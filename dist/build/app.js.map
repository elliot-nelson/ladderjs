{"version":3,"sources":["app.js","../../src/js/Constants.js","../../src/js/Viewport.js","../../src/js/Util.js","../../src/js/SpriteSheet-gen.js","../../src/js/Sprite.js","../../src/js/Input.js","../../src/js/Text.js","../../src/js/lib/zzfx.js","../../src/js/lib/zzfxm.js","../../src/js/songs/ObliqueMystique.js","../../src/js/Audio.js","../../src/js/Hud.js","../../src/js/ScreenShake.js","../../src/js/Screen.js","../../src/js/MainMenu.js","../../src/js/InstructionsMenu.js","../../src/js/Behavior.js","../../src/js/Entity.js","../../src/js/Player.js","../../src/js/Rock.js","../../src/js/Level.js","../../src/js/Field.js","../../src/js/Session.js","../../src/js/Game.js","../../src/js/index.js"],"names":["PLAY_SPEEDS","LEVEL_ORDER","Viewport","[object Object]","canvas","document","getElementById","ctx","getContext","resize","force","dpi","window","devicePixelRatio","width","clientWidth","height","clientHeight","dpiWidth","dpiHeight","scale","Math","min","ceil","center","u","v","imageSmoothingEnabled","fillRect","rgba","r","g","b","a","createCanvas","createElement","SpriteSheet","Sprite","cb","image","Image","onload","src","sheet","data","anchor","font","source","w","h","img","x","y","initDynamicSprite","sliceCanvas","drawImage","loadCacheSlice","sprite","pos","rotation","this","viewportSprite2uv","save","translate","rotate","restore","game","camera","Action","UP","DOWN","LEFT","RIGHT","JUMP","STOP","PAUSE","Input","KeyMapping","KeyW","KeyS","KeyA","KeyD","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Space","buffer","history","addEventListener","event","entry","at","Date","getTime","key","code","action","push","console","log","now","filter","length","undefined","UNICODE_CHAR_MAP","join","split","reduce","map","char","idx","Text","white","black","recolor","black_shadow","blue","blue_shadow","shadow","red","terminal","terminal_shadow","text","Array","isArray","block","drawText","k","charCodeAt","floor","measureWidth","sum","c","cu","cv","next","wip","list","cWidth","saved","space","pop","line","col","row","splitParagraph","color","fillStyle","globalCompositeOperation","zzfx","t","zzfxP","zzfxG","e","zzfxX","createBufferSource","f","createBuffer","zzfxR","d","i","getChannelData","set","connect","destination_","start","q","F","z","A","l","B","G","m","C","p","PI","H","I","D","random","Z","E","n","J","K","sin","max","tan","abs","round","zzfxV","top","AudioContext","webkitAudioContext","destination","ObliqueMystique","Audio","readyToPlay","gain_","createGain","shotgun","page","shellReload","damage","alarm","victory","song","instruments","patterns","sequence","BPM","instrumentParameters","j","note","sample","patternChannel","notFirstBeat","stop","instrument","pitch","attenuation","outSampleOffset","sampleOffset","nextSampleOffset","panning","sampleBuffer","leftChannelBuffer","rightChannelBuffer","channelIndex","hasMore","sampleCache","beatLength","patternIndex","sequenceIndex","zzfxM","localStorage","JSON","stringify","musicPlaying","sound","gain","linearRampToValueAtTime","currentTime","Hud","ScreenShake","frames","hAmplitude","vAmplitude","hSamples","vSamples","sampleCount","frame","s","s0","s1","decay","Screen","screen","clear","MainMenu","lastKeyPressed","toUpperCase","consume","startSession","playSpeed","showInstructions","highScores","write","InstructionsMenu","showMainMenu","State","STOPPED","FALLING","START_JUMP","JUMP_LEFT","JUMP_RIGHT","JUMP_UP","DYING","DEAD","JUMP_FRAMES","Entity","field","repeat","nextState","state","includes","onSolid","jumpStep","isLadder","emptySpace","canClimbUp","canClimbDown","step","terrain","layout","applyMovement","DEATH_FRAMES","Player","super","deathStep","lastActionPressed","session","Rock","dispenser","LEVEL_COLS","isEater","Level","LEVELS","name","time","maxRocks","rocks","levelNumber","level","Error","player","dispensers","slice","maRrocks","Field","load","oldX","oldY","update","isDisappearingFloor","checkIfPlayerShouldDie","rock","isStatue","updateScore","isTreasure","startNextLevel","isTrampoline","restartLevel","draw","forEach","isFire","splice","Session","score","levelCycle","lives","nextLife","recentKeystrokes","match","parseInt","RegExp","$1","stat","String","padStart","scoreType","loadSpritesheet","async","init","entities","dialogPending","dialogSeen","roomsCleared","shadowOffset","screenshakes","cameraFocus","pause","unpause","frameTimes","menu","requestAnimationFrame","delta","onFrame","desiredFps","lastFrame","paused","screenshake","setTransform","drawToViewport"],"mappings":"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","file":"app.js","sourcesContent":["(function () {\n    'use strict';\n\n    /**\n     * Constants\n     */\n\n    const TITLE = 'WIZARD WITH A SHOTGUN';\n\n    // The playable area. Note that this is the desired dimensions, but the actual on-screen dimensions\n    // may be larger to maintain aspect ratio (see `Viewport.width` & `Viewport.height`).\n    const GAME_WIDTH = 640;\n    const GAME_HEIGHT = 400;\n\n    // The \"screen area\". This is an ASCII game and so most of the game logic doesn't care about browser\n    // pixels, we care about the ASCII display area (80x25).\n    const SCREEN_WIDTH = 80;\n    const SCREEN_HEIGHT = 25;\n\n    // The size of our on-screen characters (given dimensions above, this is 80 cols by 25 rows).\n    const CHAR_WIDTH = 8;\n    const CHAR_HEIGHT = 16;\n    const CHARSHEET_WIDTH = 16 * CHAR_WIDTH;\n\n    // Game constants, copied from the original game\n    const LEVEL_ROWS = 20;\n    const LEVEL_COLS = 79;\n\n    // Play speeds, expressed as frames per second. Each number is evenly divisible into 1000ms.\n    const PLAY_SPEEDS = [10, 20, 40, 76, 142];\n\n    // Playable levels (see `Levels-gen.js` for the level data)\n    const LEVEL_ORDER = [\n        'Easy Street',\n        'Long Island',\n        'Ghost Town',\n        'Tunnel Vision'\n    ];\n\n    // Score events (note, these are just identifiers for the types of score increases, not\n    // actual score values).\n    const SCORE_ROCK = 0;\n    const SCORE_STATUE = 1;\n    const SCORE_TREASURE = 2;\n\n    /**\n     * Viewport\n     *\n     * Represents the game display (for us, a canvas).\n     */\n    const Viewport = {\n        init() {\n            Viewport.canvas = document.getElementById('canvas');\n            Viewport.ctx = Viewport.canvas.getContext('2d');\n            Viewport.resize(true);\n        },\n\n        // Resize the canvas to give us approximately our desired game display size.\n        //\n        // Rather than attempt to explain it, here's a concrete example:\n        //\n        //     we start with a desired game dimension:   480x270px\n        //          get the actual browser dimensions:  1309x468px\n        //          factor in the display's DPI ratio:  2618x936px\n        //         now calculate the horizontal scale:       5.45x\n        //                     and the vertical scale:       3.46x\n        //            our new offical game scaling is:        5.4x\n        //       and our official viewport dimensions:   484x173px\n        //\n        // This approach emphasizes correct aspect ratio and maintains full-window rendering, at\n        // the potential cost of limiting visibility of the game itself in either the X or Y axis.\n        // If you use this approach, make sure your GUI can \"float\" (otherwise there may be whole\n        // UI elements the player cannot see!).\n        resize(force) {\n            let dpi = window.devicePixelRatio,\n                width = Viewport.canvas.clientWidth,\n                height = Viewport.canvas.clientHeight,\n                dpiWidth = width * dpi,\n                dpiHeight = height * dpi;\n\n            if (\n                force ||\n                Viewport.canvas.width !== dpiWidth ||\n                Viewport.canvas.height !== dpiHeight\n            ) {\n                Viewport.canvas.width = dpiWidth;\n                Viewport.canvas.height = dpiHeight;\n\n                Viewport.scale = ((Math.min(dpiWidth / GAME_WIDTH, dpiHeight / GAME_HEIGHT) * 10) | 0) / 10;\n                Viewport.width = Math.ceil(dpiWidth / Viewport.scale);\n                Viewport.height = Math.ceil(dpiHeight / Viewport.scale);\n                Viewport.center = {\n                    u: (Viewport.width / 2) | 0,\n                    v: (Viewport.height / 2) | 0\n                };\n                Viewport.clientWidth = width;\n                Viewport.clientHeight = height;\n\n                // Note: smoothing flag gets reset on every resize by some browsers, which is why\n                // we do it here.\n                Viewport.ctx.imageSmoothingEnabled = false;\n            }\n\n            // We do this every frame, not just on resize, due to browser sometimes \"forgetting\".\n            //Viewport.canvas.style.cursor = 'none';\n        },\n\n        fillViewportRect() {\n            Viewport.ctx.fillRect(0, 0, Viewport.width, Viewport.height);\n        }\n    };\n\n    function rgba(r, g, b, a) {\n        return `rgba(${r},${g},${b},${a})`;\n    }\n\n    function createCanvas(width, height) {\n        let canvas = document.createElement('canvas');\n        canvas.width = width;\n        canvas.height = height;\n        let ctx = canvas.getContext('2d');\n        return { canvas, ctx };\n    }\n\n    /**\n     * This module is generated by `gulp buildAssets`.\n     */\n    const SpriteSheet =\n        /* <generated> */\n    { font: [ [ 128, 0, 128, 448 ] ],\n      font2: [ [ 0, 0, 128, 512 ] ],\n      harold: [ [ 128, 448, 19, 12 ] ],\n      base64:\n       'data:image/png;base64,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' };\n    /* </generated> */\n\n    /**\n     * Sprite\n     *\n     * Encapsulates loading sprite slices from the spritesheet, organizing them, and\n     * modifying them or constructing using primitives. To save space, we use some techniques\n     * like storing only a small slice of an image in the spritesheet, then using code\n     * to duplicate it, add some randomness, etc.\n     */\n    const Sprite = {\n        // This is an exception to the rule, loading the spritesheet is a special action that\n        // happens BEFORE everything is initialized.\n        loadSpritesheet(cb) {\n            let image = new Image();\n            image.onload = cb;\n            image.src = SpriteSheet.base64;\n            Sprite.sheet = image;\n        },\n\n        init() {\n            // Base pixel font and icons (see `Text.init` for additional variations)\n            Sprite.font = initBasicSprite(SpriteSheet.font2[0]);\n\n            return;\n        },\n\n        /**\n         * A small helper that draws a sprite onto a canvas, respecting the anchor point of\n         * the sprite. Note that the canvas should be PRE-TRANSLATED and PRE-ROTATED, if\n         * that's appropriate!\n         */\n        drawSprite(ctx, sprite, u, v) {\n            ctx.drawImage(sprite.img, u - sprite.anchor.x, v - sprite.anchor.y);\n        },\n\n        drawViewportSprite(sprite, pos, rotation) {\n            let { u, v } = this.viewportSprite2uv(\n                sprite,\n                pos\n            );\n            if (rotation) {\n                Viewport.ctx.save();\n                Viewport.ctx.translate(u + sprite.anchor.x, v + sprite.anchor.y);\n                Viewport.ctx.rotate(rotation);\n                Viewport.ctx.drawImage(\n                    sprite.img,\n                    -sprite.anchor.x,\n                    -sprite.anchor.y\n                );\n                Viewport.ctx.restore();\n            } else {\n                Viewport.ctx.drawImage(sprite.img, u, v);\n            }\n        },\n\n        viewportSprite2uv(sprite, pos) {\n            return {\n                u: pos.x - sprite.anchor.x - game.camera.pos.x + Viewport.center.u,\n                v: pos.y - sprite.anchor.y - game.camera.pos.y + Viewport.center.v\n            };\n        }\n    };\n\n    // Sprite utility functions\n\n    function initBasicSprite(data, anchor) {\n        return initDynamicSprite(loadCacheSlice(...data), anchor);\n    }\n\n    function initDynamicSprite(source, anchor) {\n        let w = source.width,\n            h = source.height;\n\n        return {\n            img: source,\n            // Hack! Using a flat `.map(initBasicSprite)` is actually going to pass the\n            // element INDEX as second argument, resulting in \"anchor=1\". The right solution\n            // here is \"typeof anchor === 'object' ?\", but to save bytes I avoid using\n            // the typeof and instanceof keywords anywhere in the codebase. Hence,\n            // \"anchor && anchor.x\".\n            anchor: (anchor && anchor.x) ? anchor : { x: (w / 2) | 0, y: (h / 2) | 0 }\n        };\n    }\n\n    function loadCacheSlice(x, y, w, h) {\n        const source = Sprite.sheet;\n        const sliceCanvas = createCanvas(w, h);\n        sliceCanvas.ctx.drawImage(source, x, y, w, h, 0, 0, w, h);\n        return sliceCanvas.canvas;\n    }\n\n    // A list of in-game actions that can be performed by the player\n    const Action = {\n        UP:    11,\n        DOWN:  12,\n        LEFT:  13,\n        RIGHT: 14,\n        JUMP:  15,\n        STOP:  16,\n        PAUSE: 17\n    };\n\n    // A list of key code mappings and what action they perform. Here we hard-code it, but\n    // you could easily also have the key mappings controlled by settings and let the user\n    // configure it.\n    const KeyMapping = {\n        KeyW:       Action.UP,\n        KeyS:       Action.DOWN,\n        KeyA:       Action.LEFT,\n        KeyD:       Action.RIGHT,\n        ArrowUp:    Action.UP,\n        ArrowDown:  Action.DOWN,\n        ArrowLeft:  Action.LEFT,\n        ArrowRight: Action.RIGHT,\n        Space:      Action.JUMP\n    };\n\n    const Input = {\n        Action,\n        KeyMapping,\n\n        init() {\n            // Input buffer - new keypress events go into this buffer to be handled\n            // during the game's update loop. It's up to the `update()` methods to consume\n            // key presses and remove them from the buffer.\n            this.buffer = [];\n\n            // Input history - history contains recent key press events in order,\n            // removed automatically after a few seconds. This is useful for detecting\n            // inputs like cheat codes, for example.\n            this.history = [];\n\n            window.addEventListener('keydown', event => {\n                let entry = {\n                    at: new Date().getTime(),\n                    key: event.key,\n                    code: event.code,\n                    action: Input.KeyMapping[event.code] || Input.Action.STOP\n                };\n                Input.buffer.push(entry);\n                Input.history.push(entry);\n                console.log(entry);\n            });\n        },\n\n        update() {\n            let now = new Date().getTime();\n            this.history = this.history.filter(entry => entry.at > now - 3000);\n        },\n\n        lastKeyPressed() {\n            return this.buffer.length > 0 ? this.buffer[this.buffer.length - 1].key : '';\n        },\n\n        lastCodePressed() {\n            return this.buffer.length > 0 ? this.buffer[this.buffer.length - 1].code : '';\n        },\n\n        lastActionPressed() {\n            return this.buffer.length > 0 ? this.buffer[this.buffer.length - 1].action : undefined;\n        },\n\n        consume() {\n            this.buffer = [];\n        },\n    };\n\n    // In our character sheet, chars 0x00-0x7F are standard ASCII, below that we put whatever\n    // characters are convenient for us. Here we can choose to map unicode characters to positions\n    // 0x80+ in the charsheet, making it easy for us to render things like special characters,\n    // box drawing characters, etc.\n    const SUPPORTED_UNICODE_CHARS = [\n        '─│┌┐└┘├┤┬┴┼╳╳╳╳╳',\n        '═║╔╗╚╝╠╣╦╩╬╳╳╳╳╳',\n        '↑↓←→╳╳╳╳╳╳╳╳╳╳╳╳'\n    ].join('');\n\n    const UNICODE_CHAR_MAP = SUPPORTED_UNICODE_CHARS.split('').reduce((map, char, idx) => {\n        map[char] = 0x80 + idx;\n        return map;\n    }, {});\n\n    /**\n     * Text\n     *\n     * Utilities for drawing text using in-game pixel font.\n     */\n    const Text = {\n        init() {\n            Text.white = Sprite.font.img;\n\n            Text.black = recolor(Text.white, rgba(0, 0, 0, 1));\n            Text.black_shadow = recolor(Text.white, rgba(90, 20, 90, 0.15));\n            Text.blue = recolor(Text.white, rgba(200, 40, 220, 1));\n            Text.blue_shadow = recolor(Text.white, rgba(240, 50, 200, 0.2));\n            Text.shadow = recolor(Text.white, rgba(240, 240, 255, 0.25));\n            Text.red = recolor(Text.white, rgba(240, 50, 50, 1));\n\n            Text.terminal = recolor(Text.white, rgba(51, 255, 0, 1));\n            Text.terminal_shadow = recolor(Text.white, rgba(255, 255, 255, 0.3));\n\n            Text.terminal = recolor(Text.white, rgba(51, 255, 0, 0.9));\n            Text.terminal_shadow = undefined;\n\n            Text['#ead4aa'] = recolor(Text.white, '#ead4aa');\n            Text['#fee761'] = recolor(Text.white, '#fee761');\n            Text['#ff0044'] = recolor(Text.white, '#ff0044');\n        },\n\n        drawText(ctx, text, u, v, scale = 1, font = Text.white, shadow) {\n            if (Array.isArray(text)) {\n                for (let block of text) {\n                    Text.drawText(ctx, block.text, u + block.u * scale, v + block.v * scale, scale, font, shadow);\n                }\n                return;\n            }\n\n            for (let idx = 0; idx < text.length; idx++) {\n                let c = UNICODE_CHAR_MAP[text[idx]] || text.charCodeAt(idx);\n                let k = (c - 0) * (CHAR_WIDTH);\n                if (shadow) {\n                    ctx.drawImage(\n                        shadow,\n                        k % CHARSHEET_WIDTH,\n                        Math.floor(k / CHARSHEET_WIDTH) * CHAR_HEIGHT,\n                        CHAR_WIDTH,\n                        CHAR_HEIGHT,\n                        u + 1,\n                        v,\n                        CHAR_WIDTH * scale,\n                        CHAR_HEIGHT * scale\n                    );\n                }\n                ctx.drawImage(\n                    font,\n                    k % CHARSHEET_WIDTH,\n                    Math.floor(k / CHARSHEET_WIDTH) * CHAR_HEIGHT,\n                    CHAR_WIDTH,\n                    CHAR_HEIGHT,\n                    u,\n                    v,\n                    CHAR_WIDTH * scale,\n                    CHAR_HEIGHT * scale\n                );\n                u += CHAR_WIDTH * scale;\n            }\n        },\n\n        /*\n        drawRightText(ctx, text, u, v, scale = 1, font = Text.white, shadow) {\n            u -= Text.measureWidth(text, scale);\n            Text.drawText(ctx, text, u, v, scale, font, shadow);\n        },\n        */\n\n        measureWidth(text, scale = 1) {\n            return text.split('').reduce((sum, c) => sum + CHAR_WIDTH, 0) * scale;\n        },\n\n        splitParagraph(text, w, h) {\n            let cu = 0, cv = 0;\n            let next = () => ({ text: '', u: cu, v: cv });\n            let wip = next();\n            let list = [];\n\n            for (let c of text.split('')) {\n                let cWidth = Text.measureWidth(c, 1);\n                if (c === '\\n' || cu + cWidth > w) {\n                    let saved = '';\n                    if (c !== '\\n' && c !== ' ') {\n                        let space = wip.text.split(' ');\n                        if (space.length > 1) {\n                            saved = space.pop();\n                            wip.text = space.join(' ');\n                        }\n                    }\n                    if (wip.text.length > 0) list.push(wip);\n                    cu = 0;\n                    cv += (CHAR_HEIGHT);\n                    wip = next();\n                    if (saved.length > 0) {\n                        wip.text = saved;\n                        cu += Text.measureWidth(wip.text, 1);\n                    }\n                } else {\n                    cu += cWidth;\n                }\n                if (c !== '\\n') {\n                    wip.text = wip.text + c;\n                }\n            }\n\n            if (wip.text.length > 0) list.push(wip);\n\n            return list.map(line => ({\n                ...line,\n                w: Text.measureWidth(line.text, 1),\n                h: CHAR_HEIGHT\n            }));\n        },\n\n        drawTextColRow(text, col, row) {\n            Text.drawText(Viewport.ctx, Text.splitParagraph(text, Viewport.width), col * CHAR_WIDTH, row * CHAR_HEIGHT, 1, Text.terminal, Text.terminal_shadow);\n        }\n    };\n\n    // Text utility functions\n\n    function recolor(font, color) {\n        let canvas = createCanvas(font.width, font.height);\n        canvas.ctx.fillStyle = color;\n        canvas.ctx.fillRect(0, 0, font.width, font.height);\n        canvas.ctx.globalCompositeOperation = 'destination-in';\n        canvas.ctx.drawImage(font, 0, 0);\n        return canvas.canvas;\n    }\n\n    // zzfx() - the universal entry point -- returns a AudioBufferSourceNode\n    const zzfx=(...t)=>zzfxP(zzfxG(...t));\n\n    // zzfxP() - the sound player -- returns a AudioBufferSourceNode\n    const zzfxP=(...t)=>{let e=zzfxX.createBufferSource(),f=zzfxX.createBuffer(t.length,t[0].length,zzfxR);t.map((d,i)=>f.getChannelData(i).set(d)),e.buffer=f,e.connect(zzfx.destination_),e.start();return e};\n\n    // zzfxG() - the sound generator -- returns an array of sample data\n    const zzfxG=(q=1,k=.05,c=220,e=0,t=0,u=.1,r=0,F=1,v=0,z=0,w=0,A=0,l=0,B=0,x=0,G=0,d=0,y=1,m=0,C=0)=>{let b=2*Math.PI,H=v*=500*b/zzfxR**2,I=(0<x?1:-1)*b/4,D=c*=(1+2*k*Math.random()-k)*b/zzfxR,Z=[],g=0,E=0,a=0,n=1,J=0,K=0,f=0,p,h;e=99+zzfxR*e;m*=zzfxR;t*=zzfxR;u*=zzfxR;d*=zzfxR;z*=500*b/zzfxR**3;x*=b/zzfxR;w*=b/zzfxR;A*=zzfxR;l=zzfxR*l|0;for(h=e+m+t+u+d|0;a<h;Z[a++]=f)++K%(100*G|0)||(f=r?1<r?2<r?3<r?Math.sin((g%b)**3):Math.max(Math.min(Math.tan(g),1),-1):1-(2*g/b%2+2)%2:1-4*Math.abs(Math.round(g/b)-g/b):Math.sin(g),f=(l?1-C+C*Math.sin(2*Math.PI*a/l):1)*(0<f?1:-1)*Math.abs(f)**F*q*zzfxV*(a<e?a/e:a<e+m?1-(a-e)/m*(1-y):a<e+m+t?y:a<h-d?(h-a-d)/u*y:0),f=d?f/2+(d>a?0:(a<h-d?1:(h-a)/d)*Z[a-d|0]/2):f),p=(c+=v+=z)*Math.sin(E*x-I),g+=p-p*B*(1-1E9*(Math.sin(a)+1)%2),E+=p-p*B*(1-1E9*(Math.sin(a)**2+1)%2),n&&++n>A&&(c+=w,D+=w,n=0),!l||++J%l||(c=D,v=H,n=n||1);return Z};\n\n    // zzfxV - global volume\n    const zzfxV=.3;\n\n    // zzfxR - global sample rate\n    const zzfxR=44100;\n\n    // zzfxX - the common audio context\n    const zzfxX=new(top.AudioContext||webkitAudioContext);\n\n    // destination for zzfx and zzfxm sounds\n    zzfx.destination_ = zzfxX.destination;\n\n    /**\n     * ZzFX Music Renderer v2.0.2 by Keith Clark\n     */\n\n    /**\n     * @typedef Channel\n     * @type {Array.<Number>}\n     * @property {Number} 0 - Channel instrument\n     * @property {Number} 1 - Channel panning (-1 to +1)\n     * @property {Number} 2 - Note\n     */\n\n    /**\n     * @typedef Pattern\n     * @type {Array.<Channel>}\n     */\n\n    /**\n     * @typedef Instrument\n     * @type {Array.<Number>} ZzFX sound parameters\n     */\n\n    /**\n     * Generate a song\n     *\n     * @param {Array.<Instrument>} instruments - Array of ZzFX sound paramaters.\n     * @param {Array.<Pattern>} patterns - Array of pattern data.\n     * @param {Array.<Number>} sequence - Array of pattern indexes.\n     * @param {Number} [speed=125] - Playback speed of the song (in BPM).\n     * @returns {Array.<Array.<Number>>} Left and right channel sample data.\n     */\n\n    const zzfxM = (instruments, patterns, sequence, BPM = 125) => {\n        let instrumentParameters,\n            i,\n            j,\n            k,\n            note,\n            sample,\n            patternChannel,\n            notFirstBeat,\n            stop,\n            instrument,\n            pitch,\n            attenuation,\n            outSampleOffset,\n            sampleOffset,\n            nextSampleOffset,\n            sampleBuffer = [],\n            leftChannelBuffer = [],\n            rightChannelBuffer = [],\n            channelIndex = 0,\n            panning,\n            hasMore = 1,\n            sampleCache = {},\n            beatLength = ((zzfxR / BPM) * 60) >> 2;\n\n        // for each channel in order until there are no more\n        for (; hasMore; channelIndex++) {\n            // reset current values\n            sampleBuffer = [(hasMore = notFirstBeat = pitch = outSampleOffset = 0)];\n\n            // for each pattern in sequence\n            sequence.map((patternIndex, sequenceIndex) => {\n                // get pattern for current channel, use empty 1 note pattern if none found\n                patternChannel = patterns[patternIndex][channelIndex] || [0, 0, 0];\n\n                // check if there are more channels\n                hasMore |= !!patterns[patternIndex][channelIndex];\n\n                // get next offset, use the length of first channel\n                nextSampleOffset =\n                    outSampleOffset +\n                    (patterns[patternIndex][0].length - 2 - !notFirstBeat) *\n                        beatLength;\n\n                // for each beat in pattern, plus one extra if end of sequence\n                for (\n                    i = 2, k = outSampleOffset;\n                    i <\n                    patternChannel.length + (sequenceIndex == sequence.length - 1);\n                    notFirstBeat = ++i\n                ) {\n                    // <channel-note>\n                    note = patternChannel[i];\n\n                    // stop if different instrument or new note\n                    stop = (instrument != (patternChannel[0] || 0)) | note | 0;\n\n                    // fill buffer with samples for previous beat, most cpu intensive part\n                    for (\n                        j = 0;\n                        j < beatLength && notFirstBeat;\n                        // fade off attenuation at end of beat if stopping note, prevents clicking\n                        j++ > beatLength - 99 && stop\n                            ? (attenuation += (attenuation < 1) / 99)\n                            : 0\n                    ) {\n                        // copy sample to stereo buffers with panning\n                        sample =\n                            ((1 - attenuation) * sampleBuffer[sampleOffset++]) /\n                                2 || 0;\n                        leftChannelBuffer[k] =\n                            (leftChannelBuffer[k] || 0) + sample * panning - sample;\n                        rightChannelBuffer[k] =\n                            (rightChannelBuffer[k++] || 0) +\n                            sample * panning +\n                            sample;\n                    }\n\n                    // set up for next note\n                    if (note) {\n                        // set attenuation\n                        attenuation = note % 1;\n                        panning = patternChannel[1] || 0;\n                        if ((note |= 0)) {\n                            // get cached sample\n                            sampleBuffer = sampleCache[\n                                [\n                                    (instrument =\n                                        patternChannel[(sampleOffset = 0)] || 0),\n                                    note\n                                ]\n                            ] =\n                                sampleCache[[instrument, note]] ||\n                                // add sample to cache\n                                ((instrumentParameters = [\n                                    ...instruments[instrument]\n                                ]),\n                                (instrumentParameters[2] *=\n                                    2 ** ((note - 12) / 12)),\n                                zzfxG(...instrumentParameters));\n                        }\n                    }\n                }\n\n                // update the sample offset\n                outSampleOffset = nextSampleOffset;\n            });\n        }\n\n        return [leftChannelBuffer, rightChannelBuffer];\n    };\n\n    const ObliqueMystique = [[[1.3,0,23,,,.2,3,5],[1.5,0,4e3,,,.03,2,1.25,,,,,.02,6.8,-.3,,.5],[.7,0,2100,,,.2,3,3,,,-400,,,2],[,0,655,,,.11,2,1.65,,,,,,3.8,-.1,.1]],[[[,-.5,13,,,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,14,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,14,,,,],[1,.3,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,],[2,1,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,],[,.6,,,,,13,,18,,19,,,,,,,,19,,18,,,,16,,,,13,,,,,,,,,,13,,18,,19,,,,,,,,18,19,18,,,,13,14,13,,16,,18,,19,,],[3,-1,,,13,,,,,,,,,,,,13,,,,,,,,,,,,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,,,13,13,13,13]],[[,-.5,13,,,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,14,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,14,,,,],[1,.3,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,],[2,1,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,]]],[1,1,0,0,0,0,1,0],,];\n\n    const Audio = {\n        init() {\n            Audio.readyToPlay = false;\n\n            Audio.ctx = zzfxX;\n            Audio.gain_ = Audio.ctx.createGain();\n            Audio.gain_.connect(Audio.ctx.destination);\n            zzfx.destination_ = Audio.gain_;\n\n            Audio.shotgun = [,0.01,140,0.01,0.02,0.45,4,2.42,0.1,-0.1,,,,1.2,,0.3,0.04,0.8,0.02];\n            Audio.page = [,,1233,,.01,.2,1,1.43,,,539,.1,,,,,,.51,.03,.01];\n            Audio.shellReload = [,,68,0.01,,0.14,1,1.53,7.5,0.1,50,0.02,-0.01,-0.2,0.1,0.2,,0.47,0.01];\n            Audio.damage = [,,391,,.19,.01,2,.54,-4,20,,,,,,,.02,.9];\n            Audio.alarm = [,,970,.12,.25,.35,,.39,8.1,,10,.1,.2,,.1,,,.6,.09,.13];\n            // [,,961,.05,.06,1.17,1,4.67,.8,,,,,.8,-0.8,.1,.49,.62,.09];\n            Audio.victory = [,,454,.06,.86,.71,2,.63,-0.7,1.7,-83,.09,.27,.3,.2,,.18,.95,.02,.02];\n            Audio.song = zzfxM(...ObliqueMystique);\n\n            // Save our background music in os13k, for fun!\n            localStorage[`OS13kMusic,${TITLE} - Oblique Mystique`] = JSON.stringify(ObliqueMystique);\n        },\n\n        update() {\n            if (!Audio.readyToPlay) return;\n\n            if (!Audio.musicPlaying) {\n                //Audio.bgmusicnode = zzfxP(...Audio.song);\n                //Audio.bgmusicnode.loop = true;\n                Audio.musicPlaying = true;\n            }\n        },\n\n        play(sound) {\n            if (!Audio.readyToPlay) return;\n            zzfx(...sound);\n        },\n\n        // It's important we do pausing and unpausing as specific events and not in general update(),\n        // because update() is triggered by the animation frame trigger which does not run if the\n        // page is not visible. (So, if you want the music to fade in the background, for example,\n        // that's not helpful if it won't work because you aren't looking at the page!)\n\n        pause() {\n            Audio.gain_.gain.linearRampToValueAtTime(0, Audio.ctx.currentTime + 1);\n        },\n\n        unpause() {\n            Audio.gain_.gain.linearRampToValueAtTime(1, Audio.ctx.currentTime + 1);\n        }\n    };\n\n    /**\n     * Hud\n     *\n     * Health bars, ammo, etc.\n     */\n    const Hud = {\n        init() {\n    //        Hud.tooltipCanvas = new Canvas(GAME_WIDTH, GAME_HEIGHT);\n        },\n\n        draw() {\n            return;\n        },\n    /*\n        drawPageArrow() {\n            let page = Hud.closestPage();\n            if (page) {\n                let vector = vectorBetween(game.player.pos, page.pos);\n                let angle = vector2angle(vector);\n                vector.m = clamp(vector.m / 2, 16, Viewport.height / 2 - 5);\n                if (vector.m > 64) {\n                    let xy = vectorAdd(game.player.pos, vector);\n                    let a = Math.sin(game.frame / 60)\n                    Viewport.ctx.globalAlpha = Math.sin(game.frame / 20) * 0.2 + 0.8;\n                    Sprite.drawViewportSprite(Sprite.page[2], xy, angle + R90);\n                    Viewport.ctx.globalAlpha = 1;\n                }\n            }\n        },\n\n        closestPage() {\n            let pages = game.entities.filter(entity => entity.page);\n            let pos = game.player.pos;\n            pages.sort((a, b) => {\n                let dist = ((a.pos.x - pos.x) ** 2 + (a.pos.y - pos.y) ** 2) - ((b.pos.x - pos.x) ** 2 + (b.pos.y - pos.y) ** 2);\n                return dist;\n            });\n            return pages[0];\n        },\n\n        drawBuildingHover(uv) {\n            let anchor = { ...uv };\n\n            if (anchor.u + 100 > Viewport.width) anchor.u -= 100;\n            if (anchor.v > 80 + 10) anchor.v -= 80;\n\n            Viewport.ctx.fillStyle = 'rgba(30, 30, 30, 0.9)';\n            Viewport.ctx.fillRect(anchor.u, anchor.v, 100, 80);\n\n            Viewport.ctx.strokeStyle = 'rgba(95, 205, 228, 0.9)';\n            Viewport.ctx.strokeRect(anchor.u, anchor.v, 100, 80);\n\n            Text.drawText(\n                Viewport.ctx,\n                Text.splitParagraph(\n                    'SNIPER TOWER\\n\\n' +\n                    '- STRONG VS GROUND\\n' +\n                    '- WEAK VS AIR\\n',\n                    100\n                ),\n                anchor.u + 4, anchor.v + 4,\n                1,\n                Text.white,\n                Text.shadow\n            );\n\n            // random lightning effect!\n            //Hud.drawLightning(30, 60, 120, 90);\n            Hud.drawLightning(30, 60, uv.u, uv.v);\n        },\n\n        drawTooltip(uv, body, cost) {\n            Hud.tooltipCanvas.ctx.clearRect(0, 0, GAME_WIDTH, GAME_HEIGHT);\n\n            let lines = Text.splitParagraph(body, 100, 0);\n            let w = Math.max(...lines.map(line => line.w)), h = lines[lines.length - 1].v + lines[lines.length - 1].h;\n            let u = 3, v = 3;\n\n            if (cost) {\n                cost = `${cost.ore || 0}@   ${cost.crystal || 0}$`;\n                w = Math.max(w, Text.measureWidth(cost), 75);\n                h += 10;\n            }\n\n            Hud.tooltipCanvas.ctx.fillStyle = '#ead4aa';\n            Hud.tooltipCanvas.ctx.fillRect(0, 0, w + 6, h + 6);\n\n            Hud.tooltipCanvas.ctx.fillStyle = '#262b44';\n            Hud.tooltipCanvas.ctx.fillRect(1, 1, w + 4, h + 4);\n\n            Hud.tooltipCanvas.ctx.clearRect(0, h + 5, 1, 1);\n\n            if (cost) {\n                Text.drawText(Hud.tooltipCanvas.ctx, cost, u + w - Text.measureWidth(cost), v, 1, Text['#fee761'], Text.shadow);\n                v += 10;\n            }\n\n            Text.drawText(Hud.tooltipCanvas.ctx, lines, u, v, 1, Text['#ead4aa'], Text.shadow);\n\n            Viewport.ctx.globalAlpha = 0.9;\n            Viewport.ctx.drawImage(Hud.tooltipCanvas.canvas, uv.u, uv.v - h - 6);\n            Viewport.ctx.globalAlpha = 1;\n\n            /*\n\n            let textsize = Text.drawParagraph(\n                Hud.tooltipCanvas.ctx,\n                body,\n                2, 2,\n                100, 0,\n                1,\n                Text.white,\n                Text.shadow\n            );\n\n            let anchor = { ...uv };\n\n            if (anchor.u + 100 > Viewport.width) anchor.u -= 100;\n            if (anchor.v > 80 + 10) anchor.v -= 80;\n\n            Viewport.ctx.fillStyle = 'rgba(30, 30, 30, 0.9)';\n            Viewport.ctx.fillRect(anchor.u, anchor.v, 100, 80);\n\n            Viewport.ctx.strokeStyle = 'rgba(95, 205, 228, 0.9)';\n            Viewport.ctx.strokeRect(anchor.u, anchor.v, 100, 80);\n\n            Text.drawParagraph(\n                Viewport.ctx,\n                'SNIPER TOWER\\n\\n' +\n                '- STRONG VS GROUND\\n' +\n                '- WEAK VS AIR\\n',\n                anchor.u + 4, anchor.v + 4,\n                100 - 8, 80,\n                1,\n                Text.white,\n                Text.shadow\n            );\n\n            // random lightning effect!\n            //Hud.drawLightning(30, 60, 120, 90);\n            Hud.drawLightning(30, 60, uv.u, uv.v);\n\n        },\n\n        drawLightning2(x1, y1, x2, y2) {\n            let sections = 10;\n            let vector = vectorBetween({ x: x1, y: y1 }, { x: x2, y: y2 });\n\n            Viewport.ctx.strokeStyle = 'rgba(95, 205, 228, 1)';\n            Viewport.ctx.strokeStyle = 'rgba(190, 235, 250, 1)';\n            Viewport.ctx.lineWidth = 1;\n\n            Viewport.ctx.beginPath();\n            Viewport.ctx.moveTo(x1, y1);\n            for (let i = 1; i <= sections; i++) {\n                let x = x1 + (x2 - x1) * i / sections;\n                let y = y1 + (y2 - y1) * i / sections;\n                if (i < sections) {\n                    //x += (Math.random() * (i + 3) - (i + 3) / 2) | 0;\n                    //y += (Math.random() * (i + 3) - (i + 3) / 2) | 0;\n                    let offset = Math.random() * 20 - 10;\n                    if (i > 4 && i < 7) offset *= 1.5;\n                    x += vector.y * offset;\n                    y -= vector.x * offset;\n                }\n                Viewport.ctx.lineTo(x, y);\n            }\n            Viewport.ctx.stroke();\n        },\n\n        drawLightning3(x1, y1, x2, y2) {\n            if (!this.lightningOffsets) {\n                this.lightningOffsets = Array(8).fill().map((slot, index) => ({\n                    pos: (index + 1) * 10,\n                    value: Math.random() * 2 - 1\n                }));\n                console.log(this.lightningOffsets);\n            }\n\n            let vector = vectorBetween({ x: x1, y: y1 }, { x: x2, y: y2 });\n\n            Viewport.ctx.strokeStyle = 'rgba(95, 205, 228, 1)';\n            Viewport.ctx.strokeStyle = 'rgba(190, 235, 250, 1)';\n            Viewport.ctx.lineWidth = 1;\n\n            Viewport.ctx.beginPath();\n            Viewport.ctx.moveTo(x1, y1);\n            for (let offset of this.lightningOffsets) {\n                // First get the (x,y) along the direct line to the target\n                let x = x1 + vector.x * vector.m * offset.pos / 100;\n                let y = y1 + vector.y * vector.m * offset.pos / 100;\n\n                // Now we \"offset\" it (perpendicular to the direct line) by the specified value\n                x += vector.y * offset.value * 10;\n                y -= vector.x * offset.value * 10;\n\n                Viewport.ctx.lineTo(x, y);\n            }\n            Viewport.ctx.lineTo(x2, y2);\n            Viewport.ctx.stroke();\n\n            for (let offset of this.lightningOffsets) {\n                offset.pos += 5;\n            }\n            if (this.lightningOffsets[0].pos > 10) {\n                this.lightningOffsets.unshift({ pos: 1, value: Math.random() * 2 - 1 });\n            }\n            if (this.lightningOffsets[this.lightningOffsets.length - 1].pos > 99) {\n                this.lightningOffsets.pop();\n            }\n        },\n\n        drawLightning(x1, y1, x2, y2) {\n            let vector = vectorBetween({ x: x1, y: y1 }, { x: x2, y: y2 });\n\n            Viewport.ctx.strokeStyle = 'rgba(95, 205, 228, 1)';\n            Viewport.ctx.strokeStyle = 'rgba(190, 235, 250, 1)';\n            Viewport.ctx.lineWidth = 1;\n            Viewport.ctx.fillStyle = 'rgba(190, 235, 250, 1)';\n\n    //        Viewport.ctx.beginPath();\n    //        Viewport.ctx.moveTo(x1, y1);\n            let offset = 0;\n            for (let i = 0; i < vector.m; i++) {\n                let x = x1 + vector.x * i;\n                let y = y1 + vector.y * i;\n\n                let calc = Math.random();\n                if (calc < 0.33) {\n                    offset--;\n                } else if (calc < 0.66) {\n                    offset++;\n                }\n\n                let choke = 0.98 - (i / vector.m);\n\n                x += vector.y * offset * choke;\n                y -= vector.x * offset * choke;\n\n                Viewport.ctx.fillRect(x, y, 1, 1);\n            }\n        },\n\n        drawControlPanel() {\n            let height = 44;\n            Viewport.ctx.fillStyle = '#181425';\n            Viewport.ctx.fillRect(0, Viewport.height - height, Viewport.width, height);\n\n            Viewport.ctx.fillStyle = '#b55088';\n            Viewport.ctx.fillRect(0, Viewport.height - height - 1, Viewport.width, 1);\n\n            Viewport.ctx.fillStyle = '#f6757a';\n            Viewport.ctx.fillRect(0, Viewport.height - height - 2, Viewport.width, 1);\n\n            Viewport.ctx.fillStyle = '#c0cbdc';\n            Viewport.ctx.fillRect(0, Viewport.height - height - 3, Viewport.width, 1);\n        }\n        */\n    };\n\n    // https://jonny.morrill.me/en/blog/gamedev-how-to-implement-a-camera-shake-effect/\n\n    /**\n     * Shake it baby.\n     */\n    class ScreenShake {\n        constructor(frames, hAmplitude, vAmplitude) {\n            this.frames = frames;\n            this.hAmplitude = hAmplitude;\n            this.vAmplitude = vAmplitude;\n            this.hSamples = [];\n            this.vSamples = [];\n\n            var sampleCount = frames / 2;\n            for (let i = 0; i < sampleCount; i++) {\n                this.hSamples.push(Math.random() * 2 - 1);\n                this.vSamples.push(Math.random() * 2 - 1);\n            }\n            this.frame = -1;\n        }\n\n        update() {\n            this.frame++;\n            if (this.frame >= this.frames) {\n                return false;\n            }\n\n            //let s = (this.frames / 10) * (this.frame / this.frames);\n            let s = this.frame / 2;\n            let s0 = s | 0;\n            let s1 = s0 + 1;\n            let decay = 1 - this.frame / this.frames;\n\n            this.x =\n                this.hAmplitude *\n                decay *\n                (this.hSamples[s0] +\n                    (s - s0) * (this.hSamples[s1] - this.hSamples[s0]));\n            this.y =\n                this.vAmplitude *\n                decay *\n                (this.vSamples[s0] +\n                    (s - s0) * (this.vSamples[s1] - this.vSamples[s0]));\n\n            return true;\n        }\n    }\n\n    const Screen = {\n        init() {\n            this.screen = [];\n            for (let y = 0; y < SCREEN_HEIGHT; y++) {\n                this.screen.push([]);\n            }\n            this.clear();\n        },\n\n        clear() {\n            for (let y = 0; y < SCREEN_HEIGHT; y++) {\n                for (let x = 0; x < SCREEN_WIDTH; x++) {\n                    this.screen[y][x] = ' ';\n                }\n            }\n        },\n\n        write(x, y, text) {\n            if (!Array.isArray(text)) text = [text];\n\n            for (let j = 0; j < text.length; j++) {\n                for (let i = 0; i < text[j].length; i++) {\n                    this.screen[y + j][x + i] = text[j][i];\n                }\n            }\n        },\n\n        drawToViewport() {\n            let text = this.screen.map(row => row.join('')).join('\\n');\n\n            Text.drawText(\n                Viewport.ctx,\n                Text.splitParagraph(text, Viewport.width),\n                0, 0,\n                1,\n                Text.terminal, Text.terminal_shadow\n            );\n        }\n    };\n\n    class MainMenu {\n        constructor() {\n        }\n\n        update() {\n            switch (Input.lastKeyPressed().toUpperCase()) {\n                case 'P':\n                    Input.consume();\n                    game.startSession();\n                    break;\n                case 'L':\n                    Input.consume();\n                    game.playSpeed = (game.playSpeed + 1) % PLAY_SPEEDS.length;\n                    break;\n                case 'I':\n                    Input.consume();\n                    game.showInstructions();\n                    break;\n                case 'E':\n                    Input.consume();\n                    game.showInstructions();\n                    break;\n            }\n        }\n\n        draw() {\n            let version = '?';\n            let terminal = '?';\n\n            let highScores = [\n                `1) 6000  Bob`,\n                `2) 6000  Tom`,\n                `3) 4000  Wayne`,\n                ``,\n                ``\n            ];\n\n            Screen.clear();\n            Screen.write(0, 0, [\n                `               LL                     dd       dd`,\n                `               LL                     dd       dd                      tm`,\n                `               LL         aaaa     ddddd    ddddd    eeee   rrrrrrr`,\n                `               LL        aa  aa   dd  dd   dd  dd   ee  ee  rr    rr`,\n                `               LL        aa  aa   dd  dd   dd  dd   eeeeee  rr`,\n                `               LL        aa  aa   dd  dd   dd  dd   ee      rr`,\n                `               LLLLLLLL   aaa aa   ddd dd   ddd dd   eeee   rr`,\n                ``,\n                `                                       Version:    ${version}`,\n                `(c) 1982, 1983 Yahoo Software          Terminal:   ${terminal}`,\n                `10970 Ashton Ave.  Suite 312           Play speed: ${game.playSpeed + 1} / ${PLAY_SPEEDS.length}`,\n                `Los Angeles, Ca  90024                 Move = ↑↓←→/WASD, Jump = Space,`,\n                `                                       Stop = Other`,\n                ``,\n                `P = Play game                          High Scores`,\n                `L = Change level of difficulty         ${highScores[0]}`,\n                `C = Configure Ladder                   ${highScores[1]}`,\n                `I = Instructions                       ${highScores[2]}`,\n                `E = Exit Ladder                        ${highScores[3]}`,\n                `                                       ${highScores[4]}`,\n                ``,\n                `Enter one of the above:`\n            ]);\n        }\n    }\n\n    class InstructionsMenu {\n        constructor() {\n        }\n\n        update() {\n            if (Input.lastKeyPressed().toUpperCase() !== '') {\n                Input.consume();\n                game.showMainMenu();\n            }\n        }\n\n        draw() {\n            Screen.clear();\n            Screen.write(0, 0, [\n                `You are a Lad trapped in a maze.  Your mission is is to explore the`,\n                `dark corridors never before seen by human eyes and find hidden`,\n                `treasures and riches.`,\n                ``,\n                `You control Lad by typing the direction buttons and jumping by`,\n                `typing SPACE.  But beware of the falling rocks called Der rocks.`,\n                `You must find and grasp the treasures (shown as $) BEFORE the`,\n                `bonus time runs out.`,\n                ``,\n                `A new Lad will be awarded for every 10,000 points.`,\n                `Extra points are awarded for touching the gold`,\n                `statues (shown as &).  You will receive the bonus time points`,\n                `that are left when you have finished the level.`,\n                ``,\n                `Type an ESCape to pause the game.`,\n                ``,\n                `Remember, there is more than one way to skin a cat. (Chum)`,\n                ``,\n                `Good luck Lad.`,\n                ``,\n                ``,\n                ``,\n                `Type RETURN to return to main menu:`\n            ]);\n        }\n    }\n\n    // This is our list of STATES. Each entity starts out in one of these states and can move between\n    // them based on events that happen in the game. (Note that some of these are directions, but\n    // since an entity keeps moving in the direction it is going unless stopped, directions are\n    // states in this game.)\n    const State = {\n        STOPPED:    1,         // Standing still\n        UP:         2,         // Moving up (player only)\n        LEFT:       3,         // Moving left\n        DOWN:       4,         // Moving down\n        RIGHT:      5,         // Moving right\n        FALLING:    6,         // Falling\n        START_JUMP: 7,         // About to start a jump (player only)\n        JUMP_LEFT:  8,         // Jumping left (player only)\n        JUMP_RIGHT: 9,         // Jumping right (player only)\n        JUMP_UP:    10,        // Jumping straight up (player only)\n        DYING:      11,        // Dying (used as a death animation)\n        DEAD:       12         // Dead (for player, restart level; for rock, disappear)\n    };\n\n    const JUMP_FRAMES = {\n        [State.JUMP_RIGHT]: [\n            { x: 1, y: -1 },\n            { x: 1, y: -1 },\n            { x: 1, y: 0 },\n            { x: 1, y: 0 },\n            { x: 1, y: 1 },\n            { x: 1, y: 1 }\n        ],\n        [State.JUMP_LEFT]: [\n            { x: -1, y: -1 },\n            { x: -1, y: -1 },\n            { x: -1, y: 0 },\n            { x: -1, y: 0 },\n            { x: -1, y: 1 },\n            { x: -1, y: 1 }\n        ],\n        [State.JUMP_UP]: [\n            { x: 0, y: -1 },\n            { x: 0, y: -1 },\n            { x: 0, y: 0 },\n            { x: 0, y: 1 },\n            { x: 0, y: 1 },\n            { x: 0, y: 0 }\n        ],\n    };\n\n    class Entity {\n        applyMovement(field) {\n            let repeat = false;\n\n            // This method contains generic \"movement\" application for all entities, including\n            // Lad (player) and Der Rocks (enemies). Things like falling, moving left/right, etc.,\n            // work the same for both.\n            //\n            // (There's a bunch of jump logic in here too, and moving UP, which really only applies\n            // to players, but that's OK -- Der Rocks just won't attempt those actions.)\n\n            if (this.nextState) {\n                switch (this.state) {\n                    case State.STOPPED:\n                    case State.LEFT:\n                    case State.RIGHT:\n                        if ([State.LEFT, State.RIGHT, State.STOPPED].includes(this.nextState)) {\n                            this.state = this.nextState;\n                            this.nextState = undefined;\n                        }\n                        break;\n\n                    case State.UP:\n                    case State.DOWN:\n                        // Normal\n                        if ([State.LEFT, State.RIGHT].includes(this.nextState)) {\n                            this.state = this.nextState;\n                            this.nextState = undefined;\n                        }\n                        break;\n                }\n            }\n\n            if (this.nextState === State.START_JUMP) {\n                // Special case: the user wants to jump!\n                //\n                // If the player is standing on something solid, we initiate a jump based on the current\n                // movement of the player. If not, we (sort of) ignore the request to jump... although\n                // it does subtly change the behavior upon landing.\n                if (field.onSolid(this.x, this.y)) {\n                    if (this.state === State.STOPPED || this.state === State.FALLING) {\n                        this.state = State.JUMP_UP;\n                        this.jumpStep = 0;\n                        this.nextState = State.STOPPED;\n                    } else if (this.state === State.LEFT || this.state === State.JUMP_LEFT) {\n                        this.state = State.JUMP_LEFT;\n                        this.jumpStep = 0;\n                        this.nextState = State.LEFT;\n                    } else if (this.state === State.RIGHT || this.state === State.JUMP_RIGHT) {\n                        this.state = State.JUMP_RIGHT;\n                        this.jumpStep = 0;\n                        this.nextState = State.RIGHT;\n                    }\n                } else {\n                    if (this.state === State.JUMP_UP || this.state === State.FALLING) {\n                        this.nextState = State.STOPPED;\n                    } else if (this.state === State.JUMP_RIGHT) {\n                        this.nextState = State.RIGHT;\n                    } else if (this.state === State.JUMP_LEFT) {\n                        this.nextState = State.LEFT;\n                    }\n                }\n            } else if (this.nextState === State.UP && field.isLadder(this.x, this.y)) {\n                // Special case: the user wants to go up!\n                //\n                // If the user is on a ladder, we can start ascending. Note that if the user is not\n                // on a ladder we ignore their input, which is intentional -- this allows queued\n                // (pacman) input, where we can tap UP a little before reaching the ladder.\n                this.state = State.UP;\n                this.nextState = undefined;\n            } else if (this.nextState === State.DOWN && (field.isLadder(this.x, this.y) || field.isLadder(this.x, this.y + 1))) {\n                // Special case: the player wants to go down!\n                //\n                // If the player is on (or above) a ladder, we can start descending. Note that if the player is not\n                // on a ladder we ignore their input, which is intentional -- this allows queued\n                // (pacman) input, where we can tap DOWN a little before reaching the ladder.\n                this.state = State.DOWN;\n                this.nextState = undefined;\n            }\n\n            switch (this.state) {\n                case State.LEFT:\n                    if (!field.onSolid(this.x, this.y)) {\n                        this.nextState = State.LEFT;\n                        this.state = State.FALLING;\n                        repeat = true;\n                        break;\n                    }\n                    if (field.emptySpace(this.x - 1, this.y)) {\n                        this.x--;\n                    } else {\n                        this.nextState = State.STOPPED;\n                    }\n                    break;\n\n                case State.RIGHT:\n                    if (!field.onSolid(this.x, this.y)) {\n                        this.nextState = State.RIGHT;\n                        this.state = State.FALLING;\n                        repeat = true;\n                        break;\n                    }\n                    if (field.emptySpace(this.x + 1, this.y)) {\n                        this.x++;\n                    } else {\n                        this.nextState = State.STOPPED;\n                    }\n                    break;\n\n                case State.UP:\n                    if (field.canClimbUp(this.x, this.y - 1)) {\n                        this.y--;\n                    } else {\n                        this.state = State.STOPPED;\n                    }\n                    break;\n\n                case State.DOWN:\n                    if (field.canClimbDown(this.x, this.y + 1)) {\n                        this.y++;\n                    } else {\n                        this.state = State.STOPPED;\n                    }\n                    break;\n\n                case State.JUMP_RIGHT:\n                case State.JUMP_LEFT:\n                case State.JUMP_UP:\n                    let step = JUMP_FRAMES[this.state][this.jumpStep];\n                    console.log(['jump', this.state, this.jumpStep, step]);\n                    if ((this.x + step.x >= 0) && (this.x + step.x < LEVEL_COLS)) {\n                        let terrain = field.layout[this.y + step.y][this.x + step.x];\n                        if (['=', '|', '-'].includes(terrain)) {\n                            if (field.onSolid(this.x, this.y)) {\n                                this.state = this.nextState;\n                                this.nextState = undefined;\n                            } else {\n                                switch (this.state) {\n                                    case State.JUMP_RIGHT:\n                                        this.nextState = State.RIGHT;\n                                        break;\n                                    case State.JUMP_LEFT:\n                                        this.nextState = State.LEFT;\n                                        break;\n                                    case State.JUMP_UP:\n                                        this.nextState = State.UP;\n                                        break;\n                                }\n                                this.state = State.FALLING;\n                            }\n                        } else if (terrain === 'H') {\n                            this.x += step.x;\n                            this.y += step.y;\n                            this.state = State.STOPPED;\n                            this.nextState = undefined;\n                        } else {\n                            this.x += step.x;\n                            this.y += step.y;\n                            this.jumpStep++;\n\n                            if (this.jumpStep >= JUMP_FRAMES[this.state].length) {\n                                this.state = this.nextState;\n                                this.nextState = undefined;\n                            }\n                        }\n                    } else {\n                        if (field.onSolid(this.x, this.y)) {\n                            this.state = this.nextState;\n                            this.nextState = undefined;\n                        } else {\n                            this.state = State.FALLING;\n                            this.nextState = State.STOPPED;\n                        }\n                    }\n                    break;\n\n                case State.FALLING:\n                    if (field.onSolid(this.x, this.y)) {\n                        this.state = this.nextState || State.STOPPED;\n                    } else {\n                        this.y++;\n                    }\n                    break;\n            }\n\n            // If we were attempting to move somewhere and realized we should be falling instead,\n            // we want to re-run the entire algorithm once. This avoids what boils down to a \"skipped\n            // frame\" from the user's point of view.\n            if (repeat) return this.applyMovement(field);\n        }\n    }\n\n    const DEATH_FRAMES = ['p', 'b', 'd', 'q', 'p', 'b', 'd', 'q', '-', '-', '_'];\n\n    /**\n     * Player\n     */\n    class Player extends Entity {\n        constructor(x, y) {\n            super();\n            this.x = x;\n            this.y = y;\n            this.state = State.STOPPED;\n            this.nextState = State.STOPPED;\n            this.jumpStep = 0;\n            this.deathStep = 0;\n            console.log('player constructed', x, y);\n        }\n\n        update() {\n            if (this.state === State.DYING) {\n                this.deathStep++;\n                if (this.deathStep >= DEATH_FRAMES.length) this.state = State.DEAD;\n            }\n\n            if (this.state === State.DYING || this.state === State.DEAD) return;\n\n            let action = Input.lastActionPressed();\n\n            if (action === Input.Action.LEFT) {\n                this.nextState = State.LEFT;\n                Input.consume();\n            } else if (action === Input.Action.RIGHT) {\n                this.nextState = State.RIGHT;\n                Input.consume();\n            } else if (action === Input.Action.UP) {\n                this.nextState = State.UP;\n                Input.consume();\n            } else if (action === Input.Action.DOWN) {\n                this.nextState = State.DOWN;\n                Input.consume();\n            } else if (action === Input.Action.JUMP) {\n                this.nextState = State.START_JUMP;\n                Input.consume();\n            }\n\n            return this.applyMovement(game.session.field);\n        }\n\n        draw() {\n            let char = 'g';\n\n            switch (this.state) {\n                case State.RIGHT:\n                case State.JUMP_RIGHT:\n                case State.UP:\n                case State.DOWN:\n                    char = 'p';\n                    break;\n\n                case State.LEFT:\n                case State.JUMP_LEFT:\n                    char = 'q';\n                    break;\n\n                case State.FALLING:\n                    char = 'b';\n                    break;\n\n                case State.DYING:\n                    char = DEATH_FRAMES[this.deathStep];\n                    break;\n\n                case State.DEAD:\n                    char = '_';\n                    break;\n            }\n\n            Screen.write(this.x, this.y, char);\n        }\n    }\n\n    const DEATH_FRAMES$1 = ['%', ':'];\n\n    class Rock extends Entity {\n        constructor(dispenser) {\n            super();\n            this.x = dispenser.x;\n            this.y = dispenser.y;\n            this.state = State.FALLING;\n            this.nextState = undefined;\n            this.deathStep = 0;\n        }\n\n        update(field) {\n            if (this.state === State.DYING) {\n                this.deathStep++;\n                if (this.deathStep >= DEATH_FRAMES$1.length) this.state = State.DEAD;\n            }\n\n            if (this.state === State.DYING || this.state === State.DEAD) return;\n\n            if (this.state === State.STOPPED) {\n                if (this.x === 0 || !field.emptySpace(this.x - 1, this.y)) {\n                    this.nextState = State.RIGHT;\n                } else if (this.x === LEVEL_COLS - 1 || !field.emptySpace(this.x + 1, this.y)) {\n                    this.nextState = State.LEFT;\n                } else {\n                    this.nextState = Math.random() > 0.5 ? State.LEFT : State.RIGHT;\n                }\n            }\n\n            if (this.x === 0 && this.state === State.LEFT) {\n                this.state = State.RIGHT;\n            }\n\n            if (this.x === LEVEL_COLS - 1 && this.state === State.RIGHT) {\n                this.state = State.LEFT;\n            }\n\n            if (this.state !== State.FALLING && !field.onSolid(this.x, this.y)) {\n                this.nextState = State.FALLING;\n            }\n\n            if (field.isLadder(this.x, this.y + 1) && [State.LEFT, State.RIGHT].includes(this.state)) {\n                let r = Math.floor(Math.random() * 4);\n                this.nextState = [State.LEFT, State.RIGHT, State.DOWN, State.DOWN][r];\n            }\n\n            if (field.isEater(this.x, this.y)) {\n                this.state = State.DYING;\n                return;\n            }\n\n            this.applyMovement(field);\n        }\n\n        draw() {\n            let char = 'o';\n\n            switch (this.state) {\n                case State.DYING:\n                    char = DEATH_FRAMES$1[this.deathStep];\n                    break;\n                case State.DEAD:\n                    return;\n            }\n\n            Screen.write(this.x, this.y, char);\n        }\n    }\n\n    var LevelData = [\n    \t{\n    \t\tname: \"Easy Street\",\n    \t\ttime: 35,\n    \t\tmaxRocks: 5,\n    \t\tlayout: [\n    \t\t\t\"                                       V                 $                     \",\n    \t\t\t\"                                                         H                     \",\n    \t\t\t\"                H                                        H                     \",\n    \t\t\t\"       =========H==================================================            \",\n    \t\t\t\"                H                                                              \",\n    \t\t\t\"                H                                                              \",\n    \t\t\t\"                H          H                             H                     \",\n    \t\t\t\"================H==========H==================   ========H=====================\",\n    \t\t\t\"                &          H                             H          |       |  \",\n    \t\t\t\"                                                         H         Easy Street \",\n    \t\t\t\"                H                                        H                     \",\n    \t\t\t\"       =========H==========H=========  =======================                 \",\n    \t\t\t\"                H                                                              \",\n    \t\t\t\"                H                                                              \",\n    \t\t\t\"                H                                        H                     \",\n    \t\t\t\"======================== ====================== =========H==============       \",\n    \t\t\t\"                                                         H                     \",\n    \t\t\t\"                                                         H                     \",\n    \t\t\t\"*    p                                                   H                    *\",\n    \t\t\t\"===============================================================================\"\n    \t\t]\n    \t},\n    \t{\n    \t\tname: \"Long Island\",\n    \t\ttime: 45,\n    \t\tmaxRocks: 8,\n    \t\tlayout: [\n    \t\t\t\"                                                                          $    \",\n    \t\t\t\"                                                                   &      H    \",\n    \t\t\t\"    H       |V                                                     V|     H    \",\n    \t\t\t\"====H======================= ========================= ======================  \",\n    \t\t\t\"    H                                                                          \",\n    \t\t\t\"    H                                                                          \",\n    \t\t\t\"    H                    & |                         . .                  H    \",\n    \t\t\t\"========================== ======  =================== ===================H==  \",\n    \t\t\t\"                                                                          H    \",\n    \t\t\t\"                                  |                                       H    \",\n    \t\t\t\"    H                             |                 .  .                  H    \",\n    \t\t\t\"====H=====================   ======  ================  ======================  \",\n    \t\t\t\"    H                                                                          \",\n    \t\t\t\"    H                      |                                                   \",\n    \t\t\t\"    H                      |                        .   .                 H    \",\n    \t\t\t\"=========================  ========    ==============   ==================H==  \",\n    \t\t\t\"                                                                          H    \",\n    \t\t\t\"==============                      |                                     H    \",\n    \t\t\t\" Long Island |   p         *        |                 *                   H    \",\n    \t\t\t\"===============================================================================\"\n    \t\t]\n    \t},\n    \t{\n    \t\tname: \"Ghost Town\",\n    \t\ttime: 35,\n    \t\tmaxRocks: 5,\n    \t\tlayout: [\n    \t\t\t\"                            V               V           V               $      \",\n    \t\t\t\"                                                                       $$$     \",\n    \t\t\t\"     p    H                                                    H      $$$$$   H\",\n    \t\t\t\"==========H===                                                =H==============H\",\n    \t\t\t\"          H                                                    H              H\",\n    \t\t\t\"          H                              &                     H              H\",\n    \t\t\t\"     ==============   ====     =    ======    =   ====    =====H=====         H\",\n    \t\t\t\"    G              ^^^    ^^^^^ ^^^^      ^^^^ ^^^    ^^^                     $\",\n    \t\t\t\"    h                                                                 |        \",\n    \t\t\t\"    o     |                     H                             &       |        \",\n    \t\t\t\"    s     ======================H============================== ===========    \",\n    \t\t\t\"    t        &                  H                                              \",\n    \t\t\t\"                                H                                              \",\n    \t\t\t\"              |                 H                 H                   H        \",\n    \t\t\t\"    T         ==================H=================H===================H======= \",\n    \t\t\t\"    o                                             H                   H        \",\n    \t\t\t\"    w                                                                 H        \",\n    \t\t\t\"    n                           ^                                     H        \",\n    \t\t\t\"*                              ^^^                                    H       *\",\n    \t\t\t\"===============================================================================\"\n    \t\t]\n    \t},\n    \t{\n    \t\tname: \"Tunnel Vision\",\n    \t\ttime: 36,\n    \t\trocks: 5,\n    \t\tlayout: [\n    \t\t\t\"                                            V                       V          \",\n    \t\t\t\"                                                                               \",\n    \t\t\t\"     H             H                         |                H                \",\n    \t\t\t\"=====H=====--======H==========================     ===----====H===========     \",\n    \t\t\t\"     H             H                |&&                       H                \",\n    \t\t\t\"     H             H                ==================        H                \",\n    \t\t\t\"     H             H                       tunnel  H          H                \",\n    \t\t\t\"     H           =======---===----=================H=         H           H    \",\n    \t\t\t\"     H         |                           vision  H          H           H    \",\n    \t\t\t\"     H         =========---&      -----============H          H           H    \",\n    \t\t\t\"     H           H                                 H |        H           H    \",\n    \t\t\t\"     H           H=========----===----================        H  ==============\",\n    \t\t\t\"                 H                                        &   H                \",\n    \t\t\t\"                 H                                        |   H                \",\n    \t\t\t\"====---====      H                                        |   H                \",\n    \t\t\t\"|         |    ================---===---===================   H                \",\n    \t\t\t\"|   ===   |                                                   H        H    p  \",\n    \t\t\t\"|    $    |                                                   H     ===H=======\",\n    \t\t\t\"|*  $$$  *|   *                *       *                     *H       *H       \",\n    \t\t\t\"===============================================================================\"\n    \t\t]\n    \t},\n    \t{\n    \t\tname: \"Point of No Return\",\n    \t\ttime: 35,\n    \t\tmaxRocks: 7,\n    \t\tlayout: [\n    \t\t\t\"         $                                                                     \",\n    \t\t\t\"         H                                                   V                 \",\n    \t\t\t\"         H                                                                     \",\n    \t\t\t\"         HHHHHHHHHHHHH     .HHHHHHHHHHHHHH                          H    p     \",\n    \t\t\t\"         &                   V           H                        ==H==========\",\n    \t\t\t\"                                         H                          H          \",\n    \t\t\t\"   H                                     H        .                 H          \",\n    \t\t\t\"===H==============-----------============H====                      H          \",\n    \t\t\t\"   H                                                      H         H          \",\n    \t\t\t\"   H                                                 =====H==============      \",\n    \t\t\t\"   H                                     H                H                    \",\n    \t\t\t\"   H              &..^^^.....^..^ . ^^   H==---------     H                    \",\n    \t\t\t\"   H         ============================H    &           H             H      \",\n    \t\t\t\"   H         ===      ===      ===       H    ---------=================H======\",\n    \t\t\t\"   H                                     H                              H      \",\n    \t\t\t\"   H                          &          H          &                   H      \",\n    \t\t\t\"   ==========-------------------------=======----------===================     \",\n    \t\t\t\"                                                                               \",\n    \t\t\t\"^^^*         ^^^^^^^^^^^^^^^^^^^^^^^^^*     *^^^^^^^^^^*Point of No Return*^^^^\",\n    \t\t\t\"===============================================================================\"\n    \t\t]\n    \t},\n    \t{\n    \t\tname: \"Bug City\",\n    \t\ttime: 37,\n    \t\tmaxRocks: 6,\n    \t\tlayout: [\n    \t\t\t\"        Bug City             HHHHHHHH                          V               \",\n    \t\t\t\"                           HHH      HHH                                        \",\n    \t\t\t\"   H                                          >mmmmmmmm                        \",\n    \t\t\t\"   H===============                   ====================          H          \",\n    \t\t\t\"   H              |=====       \\\\  /         V                  =====H==========\",\n    \t\t\t\"   H                            \\\\/                                  H          \",\n    \t\t\t\"   H                                        | $                     H          \",\n    \t\t\t\"   H           H                            | H                     H          \",\n    \t\t\t\"   H       ====H=======          p          |&H    H                H          \",\n    \t\t\t\"   H           H             ======================H           ======          \",\n    \t\t\t\"   H           H      &|                           H                    H      \",\n    \t\t\t\"   H           H      &|                    H      H     }{        =====H====  \",\n    \t\t\t\"===H===&       H       =====================H      H                    H      \",\n    \t\t\t\"               H                            H      H                    H      \",\n    \t\t\t\"               H                            H      &                    H      \",\n    \t\t\t\"         ======H===   =======    H    <>    &                           H      \",\n    \t\t\t\"                                 H==========       =====     =     ============\",\n    \t\t\t\"     }i{                         H                                             \",\n    \t\t\t\"*                                H                                            *\",\n    \t\t\t\"===============================================================================\"\n    \t\t]\n    \t},\n    \t{\n    \t\tname: \"GangLand\",\n    \t\ttime: 32,\n    \t\tmaxRocks: 6,\n    \t\tlayout: [\n    \t\t\t\"                    =Gang Land=                             V                  \",\n    \t\t\t\"                   ==      _  ==                                      .        \",\n    \t\t\t\"      p    H        |  [] |_| |                  &                    .  H     \",\n    \t\t\t\"===========H        |     |_| |       H         ===   ===================H     \",\n    \t\t\t\"      V    H        =============     H======                            H     \",\n    \t\t\t\"           H                          H                     &            H     \",\n    \t\t\t\"           H                          H                |    |            H     \",\n    \t\t\t\"    H      H        ^^^&&^^^ & ^  ^^^ H           H    |    =============H     \",\n    \t\t\t\"    H======H   =======================H===========H=====          &      H     \",\n    \t\t\t\"    H                                 H           H    |         &&&     H     \",\n    \t\t\t\"    H                                 H           H    |        &&&&&    H     \",\n    \t\t\t\"    H                                 H           H    |    =============H     \",\n    \t\t\t\"              =====------=================        H    |       $     $         \",\n    \t\t\t\"                                         |        H    |      $$$   $$$        \",\n    \t\t\t\"====------===                            |        H    |     $$$$$ $$$$$       \",\n    \t\t\t\"            |       =                    | =============    ============       \",\n    \t\t\t\"            |       $                     ^          &                         \",\n    \t\t\t\"            |^^^^^^^^^^^^^^      $ ^              ======                       \",\n    \t\t\t\"*                   .      &   ^ H*^                    ^  ^       ^^^^^^^^^^^^\",\n    \t\t\t\"===============================================================================\"\n    \t\t]\n    \t}\n    ];\n\n    const Level = {\n        LEVELS: LevelData,\n\n        load(levelNumber) {\n            console.log(Level.LEVELS);\n            // As the player keeps playing, level numbers will loop around to beginning\n            let level = Level.LEVELS[levelNumber % Level.LEVELS.length];\n            if (!level) throw new Error(`No such level number: ${levelNumber}`);\n\n            // Perform some sanity checks on the level layout and extract useful info\n            // like player start position and dispenser positions etc.\n\n            let layout = level.layout.map(row => row.split(''));\n            let dispensers = [];\n            let player;\n\n            // Sanity check\n            layout = layout.slice(0, LEVEL_ROWS);\n\n            for (let y = 0; y < LEVEL_ROWS; y++) {\n                // Sanity checks\n                if (!layout[y]) layout[y] = [];\n                layout[y] = layout[y].slice(0, LEVEL_COLS);\n\n                for (let x = 0; x < LEVEL_COLS; x++) {\n                    // Sanity check\n                    if (!layout[y][x]) layout[y][x] = ' ';\n\n                    // Der Dispensers (V) and Der Eaters (*) have behaviors, so it is convenient for us\n                    // to construct a list of them, but they are permanent parts of the layout, so we can\n                    // leave them as part of the level and draw them normally.\n\n                    if (layout[y][x] === 'V') {\n                        dispensers.push({ x, y });\n                    }\n\n                    // Treasure ($), Statues (&), and the Lad (p) are transient - the player moves around and\n                    // can pick up the treasures and statues. That's why for these elements, we add them to\n                    // our lists AND we remove them from the \"playing field\", we'll draw them separately on\n                    // top of the layout.\n\n                    if (layout[y][x] === 'p') {\n                        layout[y][x] = ' ';\n                        player = { x, y };\n                    }\n\n                    // Everything else, like floors (=), walls (|), ladders (H) and fire (^), is part of the\n                    // layout. The Lad interacts with them, but we can handle that during our movement checks.\n                }\n            }\n\n            return {\n                name: level.name,\n                time: level.time,\n                maxRocks: level.maRrocks,\n                layout,\n                dispensers,\n                player\n            };\n        }\n    };\n\n    /**\n     * Field\n     *\n     * The \"field\" represents the current level, or, \"playing field\". A new playing field is created\n     * every time you start a level, so we attach everything about the currently played level to\n     * the field -- positions of treasure, the player, victory conditions, etc.\n     */\n    class Field {\n        constructor(levelNumber) {\n            let level = Level.load(levelNumber);\n\n            this.layout = level.layout;\n            this.dispensers = level.dispensers;\n            this.time = level.time;\n            this.maxRocks = level.rocks;\n            this.rocks = [];\n            this.player = new Player(level.player.x, level.player.y);\n        }\n\n        update() {\n            let oldX = this.player.x, oldY = this.player.y;\n\n            // Move player based on user input\n            this.player.update();\n\n            if (oldX !== this.player.x && oldY === this.player.y) {\n                if (this.isDisappearingFloor(oldX, oldY + 1)) {\n                    this.layout[oldY + 1][oldX] = ' ';\n                }\n            }\n\n            // Check if player should be dead (before moving rocks)\n            this.checkIfPlayerShouldDie(game.session);\n\n            // Move rocks\n            for (let rock of this.rocks) rock.update(this);\n\n            // Check if player should be dead (after moving rocks)\n            this.checkIfPlayerShouldDie(game.session);\n\n            // Collect statues\n            if (this.isStatue(this.player.x, this.player.y)) {\n                this.layout[this.player.y][this.player.x] = ' ';\n                game.session.updateScore(SCORE_STATUE);\n            }\n\n            // Collect treasure (ends the current level)\n            if (this.isTreasure(this.player.x, this.player.y)) {\n                game.session.startNextLevel();\n            }\n\n            // Interact with trampolines\n            if (this.isTrampoline(this.player.x, this.player.y)) {\n                switch (Math.floor(Math.random() * 5)) {\n                    case 0:\n                        this.player.state = State.LEFT;\n                        this.player.nextState = undefined;\n                        break;\n                    case 1:\n                        this.player.state = State.RIGHT;\n                        this.player.nextState = undefined;\n                        break;\n                    case 2:\n                        this.player.state = State.JUMP_UP;\n                        this.player.nextState = undefined;\n                        this.player.jumpStep = 0;\n                        break;\n                    case 3:\n                        this.player.state = State.JUMP_LEFT;\n                        this.player.nextState = State.LEFT;\n                        this.player.jumpStep = 0;\n                        break;\n                    case 4:\n                        this.player.state = State.JUMP_RIGHT;\n                        this.player.nextState = State.RIGHT;\n                        this.player.jumpStep = 0;\n                        break;\n                }\n            }\n\n            // Dispense new rocks\n            if (this.rocks.length < 3 && Math.random() > 0.9) {\n                let dispenser = this.dispensers[Math.floor(Math.random() * this.dispensers.length)];\n                this.rocks.push(new Rock(dispenser));\n            }\n\n            // Kill dead rocks\n            this.rocks = this.rocks.filter(rock => rock.state !== State.DEAD);\n\n            // Kill player\n            if (this.player.state === State.DEAD) {\n                game.session.restartLevel();\n            }\n        }\n\n        draw() {\n            // Draw layout\n            Screen.write(0, 0, this.layout.map(row => row.join('')));\n\n            // Draw player\n            this.player.draw();\n\n            // Draw rocks\n            this.rocks.forEach(rock => rock.draw());\n        }\n\n        onSolid(x, y) {\n            return ['=', '-', 'H', '|'].includes(this.layout[y + 1][x]) || this.layout[y][x] === 'H';\n        }\n\n        emptySpace(x, y) {\n            if (x < 0 || x >= LEVEL_COLS) {\n                return false;\n            } else {\n                return !['|', '='].includes(this.layout[y][x]);\n            }\n        }\n\n        isLadder(x, y) {\n            return this.layout[y][x] === 'H';\n        }\n\n        isStatue(x, y) {\n            return this.layout[y][x] === '&';\n        }\n\n        isTreasure(x, y) {\n            return this.layout[y][x] === '$';\n        }\n\n        isTrampoline(x, y) {\n            return this.layout[y][x] === '.';\n        }\n\n        isEater(x, y) {\n            return this.layout[y][x] === '*';\n        }\n\n        isFire(x, y) {\n            return this.layout[y][x] === '^';\n        }\n\n        isDisappearingFloor(x, y) {\n            return this.layout[y][x] === '-';\n        }\n\n        canClimbUp(x, y) {\n            if (y < 0) return false;\n            return ['H', '&', '$'].includes(this.layout[y][x]);\n        }\n\n        canClimbDown(x, y) {\n            return ['H', '&', '$', ' ', '^', '.'].includes(this.layout[y][x]);\n        }\n\n        checkIfPlayerShouldDie() {\n            if (this.player.state === State.DYING || this.player.state === State.DEAD) return;\n\n            if (this.isFire(this.player.x, this.player.y)) {\n                this.player.state = State.DYING;\n            }\n\n            for (let i = 0; i < this.rocks.length; i++) {\n                if (this.player.x === this.rocks[i].x) {\n                    if (this.player.y === this.rocks[i].y) {\n                        this.player.state = State.DYING;\n                        this.rocks.splice(i, 1);\n                        break;\n                    } else if (this.player.y === this.rocks[i].y - 1 && this.emptySpace(this.player.x, this.player.y + 1)) {\n                        game.session.updateScore(SCORE_ROCK);\n                    } else if (this.player.y === this.rocks[i].y - 2 && this.emptySpace(this.player.x, this.player.y + 1) && this.emptySpace(this.player.x, this.player.y + 2)) {\n                        game.session.updateScore(SCORE_ROCK);\n                    }\n                }\n            }\n        }\n    }\n\n    class Session {\n        constructor() {\n            this.score = 0;\n            this.levelNumber = 0;\n            this.levelCycle = 1;\n            this.lives = 5;\n            this.nextLife = 100;\n        }\n\n        update() {\n            if (!this.field) {\n                this.field = new Field(this.levelNumber);\n            }\n\n            this.field.update();\n\n            let recentKeystrokes = Input.buffer.map(event => event.key).join('').toUpperCase();\n\n            if (recentKeystrokes.match(/IDCLEV(\\d\\d)/)) {\n                Input.consume();\n                this.field = undefined;\n                this.levelNumber = parseInt(RegExp.$1, 10);\n            } else if (recentKeystrokes.includes(\"IDDQD\")) {\n                Input.consume();\n                console.log(\"god mode\");\n            }\n        }\n\n        draw() {\n            Screen.clear();\n\n            if (this.field) this.field.draw();\n\n            let stat = [\n                String(this.lives).padStart(2, ' '),\n                String(this.levelNumber + 1).padStart(2, ' '),\n                String(this.score).padStart(4, '0'),\n                this.field ? String(this.field.time).padStart(4, ' ') : ''\n            ];\n            Screen.write(0, 21, `Lads   ${stat[0]}   Level   ${stat[1]}    Score   ${stat[2]}    Bonus time   ${stat[3]}`);\n        }\n\n        restartLevel() {\n            this.field = undefined;\n        }\n\n        startNextLevel() {\n            this.field = undefined;\n            this.levelNumber++;\n            if (this.levelNumber % LEVEL_ORDER.length === 0) {\n                this.levelCycle++;\n            }\n        }\n\n        updateScore(scoreType) {\n            switch (scoreType) {\n                case SCORE_ROCK:\n                    this.score += 2;\n                    break;\n                case SCORE_STATUE:\n                    this.score += this.field.time;\n                    break;\n                case SCORE_TREASURE:\n                    // Called repeatedly during the end-of-level event.\n                    this.score += 1;\n                    break;\n            }\n        }\n    }\n\n    /**\n     * Game state.\n     */\n    class Game {\n        init() {\n            Sprite.loadSpritesheet(async () => {\n                await Viewport.init();\n                await Screen.init();\n                await Sprite.init();\n                Text.init();\n                Hud.init();\n                Input.init();\n                Audio.init();\n\n                this.entities = [];\n                this.dialogPending = {};\n                this.dialogSeen = {};\n                this.roomsCleared = {};\n                this.shadowOffset = 0;\n                this.screenshakes = [];\n                this.camera = { pos: { x: 0, y: 0 } };\n                this.cameraFocus = { pos: { x: 0, y: 0 } };\n\n                window.addEventListener('blur', () => this.pause());\n                window.addEventListener('focus', () => this.unpause());\n\n                this.start();\n            });\n        }\n\n        start() {\n            this.frame = 0;\n            this.frameTimes = [];\n\n            this.menu = new MainMenu();\n\n            this.playSpeed = 0;\n\n            this.update();\n            window.requestAnimationFrame((delta) => this.onFrame(delta));\n        }\n\n        onFrame() {\n            let desiredFps = this.session ? PLAY_SPEEDS[this.playSpeed] : 60;\n            let now = new Date().getTime();\n            let lastFrame = this.lastFrame || 0;\n\n            if (now - lastFrame >= 1000 / desiredFps) {\n                this.update();\n                this.lastFrame = now;\n            }\n\n            Viewport.resize();\n            this.draw();\n\n            window.requestAnimationFrame(() => this.onFrame());\n        }\n\n        update() {\n            // Pull in frame by frame button pushes / keypresses / mouse clicks\n            Input.update();\n\n            /*game.camera.pos.x += 0.1;\n            game.camera.pos.y -= 0.1;*/\n\n            //if (Input.pressed[Input.Action.MENU]) {\n            //    this.paused ? this.unpause() : this.pause();\n            //}\n\n            if (this.paused) return;\n\n            // perform any per-frame audio updates\n            Audio.update();\n\n            // Behavior (AI, player input, etc.)\n            //perform(this.entities); <-- cut to save space\n\n            // perform any queued damage\n            //Damage.perform(this.entities);\n\n            // Movement (perform entity velocities to position)\n\n            // Dialog scheduling\n            //DialogScheduling.perform();\n\n            // Victory conditions\n\n            if (this.menu) {\n                this.menu.update();\n            }\n\n            /*    if (!this.session) {\n                this.session = new Session();\n            }*/\n\n            if (this.session) this.session.update();\n\n            // Culling (typically when an entity dies)\n\n            // Camera logic\n            /*let diff = {\n                x: this.player.pos.x - this.camera.pos.x,\n                y: this.player.pos.y - this.camera.pos.y\n            };*/\n\n            /*\n            this.camera.pos.x += diff.x * 0.2;\n            this.camera.pos.y += diff.y * 0.2;\n            */\n\n            // Tick screenshakes and cull finished screenshakes\n            this.screenshakes = this.screenshakes.filter(screenshake =>\n                screenshake.update()\n            );\n\n            // Flickering shadows\n            if (game.frame % 6 === 0) this.shadowOffset = (Math.random() * 10) | 0;\n\n            // Intro screenshake\n            if (game.frame === 30) game.screenshakes.push(new ScreenShake(20, 20, 20));\n        }\n\n        draw() {\n            // Reset canvas transform and scale\n            Viewport.ctx.setTransform(Viewport.scale, 0, 0, Viewport.scale, 0, 0);\n\n            Viewport.ctx.fillStyle = 'black';\n            Viewport.ctx.fillRect(0, 0, Viewport.width, Viewport.height);\n\n            Viewport.ctx.translate((Viewport.width - GAME_WIDTH) / 2 | 0, (Viewport.height - GAME_HEIGHT) / 2 | 0);\n\n            if (this.session) this.session.draw();\n            if (this.menu) this.menu.draw();\n\n            Screen.drawToViewport();\n\n            return;\n        }\n\n        pause() {\n            if (this.paused) return;\n            this.paused = true;\n            Audio.pause();\n        }\n\n        unpause() {\n            if (!this.paused) return;\n            this.paused = false;\n            Audio.unpause();\n        }\n\n        startSession() {\n            this.menu = undefined;\n            this.session = new Session();\n        }\n\n        showMainMenu() {\n            this.menu = new MainMenu();\n            this.session = undefined;\n        }\n\n        showInstructions() {\n            this.menu = new InstructionsMenu();\n            this.session = undefined;\n        }\n    }\n\n    const game = new Game();\n\n    /**\n     * Create and launch game.\n     */\n    game.init();\n\n}());\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwLmpzIiwic291cmNlcyI6WyIuLi8uLi9zcmMvanMvQ29uc3RhbnRzLmpzIiwiLi4vLi4vc3JjL2pzL1ZpZXdwb3J0LmpzIiwiLi4vLi4vc3JjL2pzL1V0aWwuanMiLCIuLi8uLi9zcmMvanMvU3ByaXRlU2hlZXQtZ2VuLmpzIiwiLi4vLi4vc3JjL2pzL1Nwcml0ZS5qcyIsIi4uLy4uL3NyYy9qcy9JbnB1dC5qcyIsIi4uLy4uL3NyYy9qcy9UZXh0LmpzIiwiLi4vLi4vc3JjL2pzL2xpYi96emZ4LmpzIiwiLi4vLi4vc3JjL2pzL2xpYi96emZ4bS5qcyIsIi4uLy4uL3NyYy9qcy9zb25ncy9PYmxpcXVlTXlzdGlxdWUuanMiLCIuLi8uLi9zcmMvanMvQXVkaW8uanMiLCIuLi8uLi9zcmMvanMvSHVkLmpzIiwiLi4vLi4vc3JjL2pzL1NjcmVlblNoYWtlLmpzIiwiLi4vLi4vc3JjL2pzL1NjcmVlbi5qcyIsIi4uLy4uL3NyYy9qcy9NYWluTWVudS5qcyIsIi4uLy4uL3NyYy9qcy9JbnN0cnVjdGlvbnNNZW51LmpzIiwiLi4vLi4vc3JjL2pzL0JlaGF2aW9yLmpzIiwiLi4vLi4vc3JjL2pzL0VudGl0eS5qcyIsIi4uLy4uL3NyYy9qcy9QbGF5ZXIuanMiLCIuLi8uLi9zcmMvanMvUm9jay5qcyIsIi4uLy4uL3NyYy9qcy9MZXZlbC5qcyIsIi4uLy4uL3NyYy9qcy9GaWVsZC5qcyIsIi4uLy4uL3NyYy9qcy9TZXNzaW9uLmpzIiwiLi4vLi4vc3JjL2pzL0dhbWUuanMiLCIuLi8uLi9zcmMvanMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb25zdGFudHNcbiAqL1xuXG5leHBvcnQgY29uc3QgVElUTEUgPSAnV0laQVJEIFdJVEggQSBTSE9UR1VOJztcblxuLy8gU3ByaXRlc2hlZXQgVVJJIChwcm9kdWNlZCBkdXJpbmcgZ3VscCBidWlsZClcbmV4cG9ydCBjb25zdCBTUFJJVEVTSEVFVF9VUkkgPSAnc3ByaXRlcy5wbmcnO1xuXG4vLyBUaGUgcGxheWFibGUgYXJlYS4gTm90ZSB0aGF0IHRoaXMgaXMgdGhlIGRlc2lyZWQgZGltZW5zaW9ucywgYnV0IHRoZSBhY3R1YWwgb24tc2NyZWVuIGRpbWVuc2lvbnNcbi8vIG1heSBiZSBsYXJnZXIgdG8gbWFpbnRhaW4gYXNwZWN0IHJhdGlvIChzZWUgYFZpZXdwb3J0LndpZHRoYCAmIGBWaWV3cG9ydC5oZWlnaHRgKS5cbmV4cG9ydCBjb25zdCBHQU1FX1dJRFRIID0gNjQwO1xuZXhwb3J0IGNvbnN0IEdBTUVfSEVJR0hUID0gNDAwO1xuXG4vLyBUaGUgXCJzY3JlZW4gYXJlYVwiLiBUaGlzIGlzIGFuIEFTQ0lJIGdhbWUgYW5kIHNvIG1vc3Qgb2YgdGhlIGdhbWUgbG9naWMgZG9lc24ndCBjYXJlIGFib3V0IGJyb3dzZXJcbi8vIHBpeGVscywgd2UgY2FyZSBhYm91dCB0aGUgQVNDSUkgZGlzcGxheSBhcmVhICg4MHgyNSkuXG5leHBvcnQgY29uc3QgU0NSRUVOX1dJRFRIID0gODA7XG5leHBvcnQgY29uc3QgU0NSRUVOX0hFSUdIVCA9IDI1O1xuXG4vLyBUaGUgc2l6ZSBvZiBvdXIgb24tc2NyZWVuIGNoYXJhY3RlcnMgKGdpdmVuIGRpbWVuc2lvbnMgYWJvdmUsIHRoaXMgaXMgODAgY29scyBieSAyNSByb3dzKS5cbmV4cG9ydCBjb25zdCBDSEFSX1dJRFRIID0gODtcbmV4cG9ydCBjb25zdCBDSEFSX0hFSUdIVCA9IDE2O1xuZXhwb3J0IGNvbnN0IENIQVJTSEVFVF9XSURUSCA9IDE2ICogQ0hBUl9XSURUSDtcbmV4cG9ydCBjb25zdCBDSEFSU0hFRVRfSEVJR0hUID0gMzIgKiBDSEFSX0hFSUdIVDtcblxuLy8gR2FtZSBjb25zdGFudHMsIGNvcGllZCBmcm9tIHRoZSBvcmlnaW5hbCBnYW1lXG5leHBvcnQgY29uc3QgTEVWRUxfUk9XUyA9IDIwO1xuZXhwb3J0IGNvbnN0IExFVkVMX0NPTFMgPSA3OTtcblxuLy8gUGxheSBzcGVlZHMsIGV4cHJlc3NlZCBhcyBmcmFtZXMgcGVyIHNlY29uZC4gRWFjaCBudW1iZXIgaXMgZXZlbmx5IGRpdmlzaWJsZSBpbnRvIDEwMDBtcy5cbmV4cG9ydCBjb25zdCBQTEFZX1NQRUVEUyA9IFsxMCwgMjAsIDQwLCA3NiwgMTQyXTtcblxuLy8gUGxheWFibGUgbGV2ZWxzIChzZWUgYExldmVscy1nZW4uanNgIGZvciB0aGUgbGV2ZWwgZGF0YSlcbmV4cG9ydCBjb25zdCBMRVZFTF9PUkRFUiA9IFtcbiAgICAnRWFzeSBTdHJlZXQnLFxuICAgICdMb25nIElzbGFuZCcsXG4gICAgJ0dob3N0IFRvd24nLFxuICAgICdUdW5uZWwgVmlzaW9uJ1xuXTtcblxuLy8gU2NvcmUgZXZlbnRzIChub3RlLCB0aGVzZSBhcmUganVzdCBpZGVudGlmaWVycyBmb3IgdGhlIHR5cGVzIG9mIHNjb3JlIGluY3JlYXNlcywgbm90XG4vLyBhY3R1YWwgc2NvcmUgdmFsdWVzKS5cbmV4cG9ydCBjb25zdCBTQ09SRV9ST0NLID0gMFxuZXhwb3J0IGNvbnN0IFNDT1JFX1NUQVRVRSA9IDFcbmV4cG9ydCBjb25zdCBTQ09SRV9UUkVBU1VSRSA9IDJcbiIsIid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHsgR0FNRV9XSURUSCwgR0FNRV9IRUlHSFQgfSBmcm9tICcuL0NvbnN0YW50cyc7XG5cbi8qKlxuICogVmlld3BvcnRcbiAqXG4gKiBSZXByZXNlbnRzIHRoZSBnYW1lIGRpc3BsYXkgKGZvciB1cywgYSBjYW52YXMpLlxuICovXG5leHBvcnQgY29uc3QgVmlld3BvcnQgPSB7XG4gICAgaW5pdCgpIHtcbiAgICAgICAgVmlld3BvcnQuY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhbnZhcycpO1xuICAgICAgICBWaWV3cG9ydC5jdHggPSBWaWV3cG9ydC5jYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgVmlld3BvcnQucmVzaXplKHRydWUpO1xuICAgIH0sXG5cbiAgICAvLyBSZXNpemUgdGhlIGNhbnZhcyB0byBnaXZlIHVzIGFwcHJveGltYXRlbHkgb3VyIGRlc2lyZWQgZ2FtZSBkaXNwbGF5IHNpemUuXG4gICAgLy9cbiAgICAvLyBSYXRoZXIgdGhhbiBhdHRlbXB0IHRvIGV4cGxhaW4gaXQsIGhlcmUncyBhIGNvbmNyZXRlIGV4YW1wbGU6XG4gICAgLy9cbiAgICAvLyAgICAgd2Ugc3RhcnQgd2l0aCBhIGRlc2lyZWQgZ2FtZSBkaW1lbnNpb246ICAgNDgweDI3MHB4XG4gICAgLy8gICAgICAgICAgZ2V0IHRoZSBhY3R1YWwgYnJvd3NlciBkaW1lbnNpb25zOiAgMTMwOXg0NjhweFxuICAgIC8vICAgICAgICAgIGZhY3RvciBpbiB0aGUgZGlzcGxheSdzIERQSSByYXRpbzogIDI2MTh4OTM2cHhcbiAgICAvLyAgICAgICAgIG5vdyBjYWxjdWxhdGUgdGhlIGhvcml6b250YWwgc2NhbGU6ICAgICAgIDUuNDV4XG4gICAgLy8gICAgICAgICAgICAgICAgICAgICBhbmQgdGhlIHZlcnRpY2FsIHNjYWxlOiAgICAgICAzLjQ2eFxuICAgIC8vICAgICAgICAgICAgb3VyIG5ldyBvZmZpY2FsIGdhbWUgc2NhbGluZyBpczogICAgICAgIDUuNHhcbiAgICAvLyAgICAgICBhbmQgb3VyIG9mZmljaWFsIHZpZXdwb3J0IGRpbWVuc2lvbnM6ICAgNDg0eDE3M3B4XG4gICAgLy9cbiAgICAvLyBUaGlzIGFwcHJvYWNoIGVtcGhhc2l6ZXMgY29ycmVjdCBhc3BlY3QgcmF0aW8gYW5kIG1haW50YWlucyBmdWxsLXdpbmRvdyByZW5kZXJpbmcsIGF0XG4gICAgLy8gdGhlIHBvdGVudGlhbCBjb3N0IG9mIGxpbWl0aW5nIHZpc2liaWxpdHkgb2YgdGhlIGdhbWUgaXRzZWxmIGluIGVpdGhlciB0aGUgWCBvciBZIGF4aXMuXG4gICAgLy8gSWYgeW91IHVzZSB0aGlzIGFwcHJvYWNoLCBtYWtlIHN1cmUgeW91ciBHVUkgY2FuIFwiZmxvYXRcIiAob3RoZXJ3aXNlIHRoZXJlIG1heSBiZSB3aG9sZVxuICAgIC8vIFVJIGVsZW1lbnRzIHRoZSBwbGF5ZXIgY2Fubm90IHNlZSEpLlxuICAgIHJlc2l6ZShmb3JjZSkge1xuICAgICAgICBsZXQgZHBpID0gd2luZG93LmRldmljZVBpeGVsUmF0aW8sXG4gICAgICAgICAgICB3aWR0aCA9IFZpZXdwb3J0LmNhbnZhcy5jbGllbnRXaWR0aCxcbiAgICAgICAgICAgIGhlaWdodCA9IFZpZXdwb3J0LmNhbnZhcy5jbGllbnRIZWlnaHQsXG4gICAgICAgICAgICBkcGlXaWR0aCA9IHdpZHRoICogZHBpLFxuICAgICAgICAgICAgZHBpSGVpZ2h0ID0gaGVpZ2h0ICogZHBpO1xuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIGZvcmNlIHx8XG4gICAgICAgICAgICBWaWV3cG9ydC5jYW52YXMud2lkdGggIT09IGRwaVdpZHRoIHx8XG4gICAgICAgICAgICBWaWV3cG9ydC5jYW52YXMuaGVpZ2h0ICE9PSBkcGlIZWlnaHRcbiAgICAgICAgKSB7XG4gICAgICAgICAgICBWaWV3cG9ydC5jYW52YXMud2lkdGggPSBkcGlXaWR0aDtcbiAgICAgICAgICAgIFZpZXdwb3J0LmNhbnZhcy5oZWlnaHQgPSBkcGlIZWlnaHQ7XG5cbiAgICAgICAgICAgIFZpZXdwb3J0LnNjYWxlID0gKChNYXRoLm1pbihkcGlXaWR0aCAvIEdBTUVfV0lEVEgsIGRwaUhlaWdodCAvIEdBTUVfSEVJR0hUKSAqIDEwKSB8IDApIC8gMTA7XG4gICAgICAgICAgICBWaWV3cG9ydC53aWR0aCA9IE1hdGguY2VpbChkcGlXaWR0aCAvIFZpZXdwb3J0LnNjYWxlKTtcbiAgICAgICAgICAgIFZpZXdwb3J0LmhlaWdodCA9IE1hdGguY2VpbChkcGlIZWlnaHQgLyBWaWV3cG9ydC5zY2FsZSk7XG4gICAgICAgICAgICBWaWV3cG9ydC5jZW50ZXIgPSB7XG4gICAgICAgICAgICAgICAgdTogKFZpZXdwb3J0LndpZHRoIC8gMikgfCAwLFxuICAgICAgICAgICAgICAgIHY6IChWaWV3cG9ydC5oZWlnaHQgLyAyKSB8IDBcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBWaWV3cG9ydC5jbGllbnRXaWR0aCA9IHdpZHRoO1xuICAgICAgICAgICAgVmlld3BvcnQuY2xpZW50SGVpZ2h0ID0gaGVpZ2h0O1xuXG4gICAgICAgICAgICAvLyBOb3RlOiBzbW9vdGhpbmcgZmxhZyBnZXRzIHJlc2V0IG9uIGV2ZXJ5IHJlc2l6ZSBieSBzb21lIGJyb3dzZXJzLCB3aGljaCBpcyB3aHlcbiAgICAgICAgICAgIC8vIHdlIGRvIGl0IGhlcmUuXG4gICAgICAgICAgICBWaWV3cG9ydC5jdHguaW1hZ2VTbW9vdGhpbmdFbmFibGVkID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBXZSBkbyB0aGlzIGV2ZXJ5IGZyYW1lLCBub3QganVzdCBvbiByZXNpemUsIGR1ZSB0byBicm93c2VyIHNvbWV0aW1lcyBcImZvcmdldHRpbmdcIi5cbiAgICAgICAgLy9WaWV3cG9ydC5jYW52YXMuc3R5bGUuY3Vyc29yID0gJ25vbmUnO1xuICAgIH0sXG5cbiAgICBmaWxsVmlld3BvcnRSZWN0KCkge1xuICAgICAgICBWaWV3cG9ydC5jdHguZmlsbFJlY3QoMCwgMCwgVmlld3BvcnQud2lkdGgsIFZpZXdwb3J0LmhlaWdodCk7XG4gICAgfVxufTtcbiIsIid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHsgZ2FtZSB9IGZyb20gJy4vR2FtZSc7XG5pbXBvcnQgeyBWaWV3cG9ydCB9IGZyb20gJy4vVmlld3BvcnQnO1xuXG5leHBvcnQgZnVuY3Rpb24gcXIyeHkocG9zKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgeDogcG9zLnEgKiAxMyxcbiAgICAgICAgeTogcG9zLnEgKiA2ICsgcG9zLnIgKiAxMlxuICAgIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB4eTJxcihwb3MpIHtcbiAgICBsZXQgcXJGcmFjdGlvbiA9IHtcbiAgICAgICAgcTogKHBvcy54IC8gMTMpLFxuICAgICAgICByOiAoKHBvcy55IC0gcG9zLnggKiA2IC8gMTMpIC8gMTIpXG4gICAgfTtcbiAgICByZXR1cm4gcXJSb3VuZGVkKHFyRnJhY3Rpb24pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24geHkydXYocG9zKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdTogcG9zLnggKyBWaWV3cG9ydC5jZW50ZXIudSAtIGdhbWUuY2FtZXJhLnBvcy54LFxuICAgICAgICB2OiBwb3MueSArIFZpZXdwb3J0LmNlbnRlci52IC0gZ2FtZS5jYW1lcmEucG9zLnlcbiAgICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXYyeHkocG9zKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgeDogcG9zLnUgLSBWaWV3cG9ydC5jZW50ZXIudSArIGdhbWUuY2FtZXJhLnBvcy54LFxuICAgICAgICB5OiBwb3MudiAtIFZpZXdwb3J0LmNlbnRlci52ICsgZ2FtZS5jYW1lcmEucG9zLnlcbiAgICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcXIycXJzKHBvcykge1xuICAgIHJldHVybiB7IHE6IHBvcy5xLCByOiBwb3MuciwgczogLXBvcy5xLXBvcy5yIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBxcnMycXIocG9zKSB7XG4gICAgcmV0dXJuIHsgcTogcG9zLnEsIHI6IHBvcy5yIH07XG59XG5cbi8vIFdoZW4geW91IFwicm91bmRcIiBhIGZyYWN0aW9uYWwgaGV4YWdvbmFsIHZhbHVlIHRvIGFuIGludGVnZXIgb25lICh1c3VhbGx5IHRvIGNvbnZlcnRcbi8vIGEgbW91c2UgY2xpY2sgdG8gYSBoZXggZ3JpZCksIHlvdSBjYW4ndCBqdXN0IGBNYXRoLmZsb29yKClgIGxpa2UgeW91IGNhbiB3aXRoIHN0YW5kYXJkXG4vLyBzcXVhcmUgdGlsZXMgLSB5b3UnbGwgbmV2ZXIgZ2V0IHRoZSBiZWhhdmlvciByaWdodCBvbiB0aGUgYW5nbGVkIHNpZGVzIG9mIHRoZSBoZXhhZ29ucy5cbi8vXG4vLyBUbyBnZXQgdGhlIGJlaGF2aW9yIHlvdSB3YW50LCB5b3UgbmVlZCB0byBjb252ZXJ0IHRvIGN1YmVkIGNvb3JkaW5hdGVzIChxLHIscyksIHRoZW5cbi8vIGluZGl2aWR1YWxseSByb3VuZCBlYWNoIG9uZSBhbmQgZWxpbWluYXRlIHRoZSBvbmUgZnVydGhlc3QgYXdheSBmcm9tIHlvdXIgb3JpZ2luYWwgdmFsdWUuXG5leHBvcnQgZnVuY3Rpb24gcXJSb3VuZGVkKHBvcykge1xuICAgIGxldCBxcnNBID0gcXIycXJzKHBvcyksXG4gICAgICAgIHFyc0IgPSB7XG4gICAgICAgICAgICBxOiBNYXRoLnJvdW5kKHFyc0EucSksXG4gICAgICAgICAgICByOiBNYXRoLnJvdW5kKHFyc0EuciksXG4gICAgICAgICAgICBzOiBNYXRoLnJvdW5kKHFyc0EucylcbiAgICAgICAgfSxcbiAgICAgICAgZGlmZlEgPSBNYXRoLmFicyhxcnNBLnEgLSBxcnNCLnEpLFxuICAgICAgICBkaWZmUiA9IE1hdGguYWJzKHFyc0EuciAtIHFyc0IuciksXG4gICAgICAgIGRpZmZTID0gTWF0aC5hYnMocXJzQS5zIC0gcXJzQi5zKTtcblxuICAgIGlmIChkaWZmUSA+IGRpZmZSICYmIGRpZmZRID4gZGlmZlMpIHtcbiAgICAgICAgcXJzQi5xID0gLXFyc0Iuci1xcnNCLnM7XG4gICAgfSBlbHNlIGlmIChkaWZmUiA+IGRpZmZTKSB7XG4gICAgICAgIHFyc0IuciA9IC1xcnNCLnEtcXJzQi5zO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHFyc0IucyA9IC1xcnNCLnEtcXJzQi5yO1xuICAgIH1cblxuICAgIHJldHVybiBxcnMycXIocXJzQik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjbGFtcCh2YWx1ZSwgbWluLCBtYXgpIHtcbiAgICByZXR1cm4gdmFsdWUgPCBtaW4gPyBtaW4gOiB2YWx1ZSA+IG1heCA/IG1heCA6IHZhbHVlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZmxvb2QobWF6ZSwgcG9zLCBtYXhEaXN0YW5jZSA9IEluZmluaXR5KSB7XG4gICAgbGV0IHJlc3VsdCA9IGFycmF5MmQobWF6ZVswXS5sZW5ndGgsIG1hemUubGVuZ3RoLCAoKSA9PiBJbmZpbml0eSk7XG4gICAgbGV0IHN0YWNrID0gW3sgLi4ucG9zLCBjb3N0OiAwIH1dO1xuICAgIHdoaWxlIChzdGFjay5sZW5ndGggPiAwKSB7XG4gICAgICAgIGxldCB7IHEsIHIsIGNvc3QgfSA9IHN0YWNrLnNoaWZ0KCk7XG4gICAgICAgIGlmIChyZXN1bHRbcl1bcV0gPD0gY29zdCkgY29udGludWU7XG4gICAgICAgIHJlc3VsdFtyXVtxXSA9IGNvc3QrKztcbiAgICAgICAgaWYgKHJlc3VsdFtyXVtxXSA+PSBtYXhEaXN0YW5jZSkgY29udGludWU7XG4gICAgICAgIGlmIChtYXplW3JdW3EgKyAxXSAmJiByZXN1bHRbcl1bcSArIDFdID4gY29zdClcbiAgICAgICAgICAgIHN0YWNrLnB1c2goeyBxOiBxICsgMSwgciwgY29zdCB9KTtcbiAgICAgICAgaWYgKG1hemVbcl1bcSAtIDFdICYmIHJlc3VsdFtyXVtxIC0gMV0gPiBjb3N0KVxuICAgICAgICAgICAgc3RhY2sucHVzaCh7IHE6IHEgLSAxLCByLCBjb3N0IH0pO1xuICAgICAgICBpZiAobWF6ZVtyICsgMV1bcV0gJiYgcmVzdWx0W3IgKyAxXVtxXSA+IGNvc3QpXG4gICAgICAgICAgICBzdGFjay5wdXNoKHsgcSwgcjogciArIDEsIGNvc3QgfSk7XG4gICAgICAgIGlmIChtYXplW3IgLSAxXVtxXSAmJiByZXN1bHRbciAtIDFdW3FdID4gY29zdClcbiAgICAgICAgICAgIHN0YWNrLnB1c2goeyBxLCByOiByIC0gMSwgY29zdCB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFycmF5MmQod2lkdGgsIGhlaWdodCwgZm4pIHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh7IGxlbmd0aDogaGVpZ2h0IH0sICgpID0+XG4gICAgICAgIEFycmF5LmZyb20oeyBsZW5ndGg6IHdpZHRoIH0sIGZuKVxuICAgICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0aWxlSXNQYXNzYWJsZShxLCByKSB7XG4gICAgaWYgKGdhbWUuYnJhd2wpIHtcbiAgICAgICAgbGV0IHJvb20gPSBnYW1lLmJyYXdsLnJvb207XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIHEgPCByb29tLnEgfHxcbiAgICAgICAgICAgIHIgPCByb29tLnIgfHxcbiAgICAgICAgICAgIHEgPj0gcm9vbS5xICsgcm9vbS53IHx8XG4gICAgICAgICAgICByID49IHJvb20uciArIHJvb20uaFxuICAgICAgICApXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChxIDwgMCB8fCByIDwgMCB8fCBxID49IGdhbWUubWF6ZS53IHx8IHIgPj0gZ2FtZS5tYXplLmgpIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gISFnYW1lLm1hemUubWF6ZVtyXVtxXTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJnYmEociwgZywgYiwgYSkge1xuICAgIHJldHVybiBgcmdiYSgke3J9LCR7Z30sJHtifSwke2F9KWA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDYW52YXMod2lkdGgsIGhlaWdodCkge1xuICAgIGxldCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICBjYW52YXMud2lkdGggPSB3aWR0aDtcbiAgICBjYW52YXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgIGxldCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICByZXR1cm4geyBjYW52YXMsIGN0eCB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcm9vbUNlbnRlcihyb29tKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgeDogKHJvb20ucSArIHJvb20udyAvIDIpICogVElMRV9TSVpFLFxuICAgICAgICB5OiAocm9vbS5yICsgcm9vbS5oIC8gMikgKiBUSUxFX1NJWkVcbiAgICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcGFydGlhbFRleHQodGV4dCwgdCwgZCkge1xuICAgIGxldCBsZW5ndGggPSBjbGFtcChNYXRoLmNlaWwodCAvIGQgKiB0ZXh0Lmxlbmd0aCksIDAsIHRleHQubGVuZ3RoKSxcbiAgICAgICAgc3Vic3RyID0gdGV4dC5zbGljZSgwLCBsZW5ndGgpLFxuICAgICAgICBpZHggPSB0ZXh0LmluZGV4T2YoJyAnLCBsZW5ndGggLSAxKTtcbiAgICBpZiAoaWR4IDwgMCkgaWR4ID0gdGV4dC5sZW5ndGg7XG4gICAgaWYgKGlkeCAtIGxlbmd0aCA+IDApIHN1YnN0ciArPSAnIycucmVwZWF0KGlkeCAtIGxlbmd0aCk7XG5cbiAgICByZXR1cm4gc3Vic3RyO1xufVxuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIFRoaXMgbW9kdWxlIGlzIGdlbmVyYXRlZCBieSBgZ3VscCBidWlsZEFzc2V0c2AuXG4gKi9cbmV4cG9ydCBjb25zdCBTcHJpdGVTaGVldCA9XG4gICAgLyogPGdlbmVyYXRlZD4gKi9cbnsgZm9udDogWyBbIDEyOCwgMCwgMTI4LCA0NDggXSBdLFxuICBmb250MjogWyBbIDAsIDAsIDEyOCwgNTEyIF0gXSxcbiAgaGFyb2xkOiBbIFsgMTI4LCA0NDgsIDE5LCAxMiBdIF0sXG4gIGJhc2U2NDpcbiAgICdkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQVFBQUFBSUFDQVlBQUFCdG1yTDdBQUFBQVhOU1IwSUFyczRjNlFBQUhXTkpSRUZVZUp6dG5iMlM2N3pOZ09rejJ5ZkZWNlI0VTZaSzd2OUtraXBsVXFSSWtWeUJ2eUxMSFJvR1FKQVNaZHA0bnBrenh4TDRBMmt0L0pEQzd1MSt2OStMdysxMks2V1VJcHRaNTBXYlczdDh2OS92OGx3cjgvcXV3cnQrVFg5NWZxVC9xOUIwYkhSemYvN3cyWHk5V2dGNFBiLzkrWGZxK1gvKzdiL0lQMXdlTWdEMys3MUlaeWJQOWJ4aVBhZEZBZC9ubnRwZjRVRnZ0OXV0OWV5YWw0K09VejliMXg4Wk14SWxhZksybi95czZTZm5xVitXaXZ6U0lQOU0rYThDQUduNVZjci84bm5welJzUDh1VDlheDhyL1czNzk2amV2eDJyenRsYm45REc4dnIwNUROSVQxdlBSZGNKTk01b2YvWjF3bWRDQkFDUW1LOTJOYi81Zks5ZXJQVWs5ZU5vYXQ3a29lVit2NnQ1YmhzRmFPTmJPYTRZNHlXcjd2VStXZXNiMnVlMm56YW1sc2ZMY1pTZmo5b093SUlJQUNBeFE5dUFLeDJzaUVDZTV2Slc2QzFQcDBRWlV4ZmdlV0R0K0d5dW1nZnlRUVFBa0podUJGQTlyL0VlZ0puRE51MSs4di82ZjdzT29JMWYyOGlWZEdzTm9PY1JqM3BzN1RwNysrejFuQmU1YU9lTzZHYnAxSzVQRUVWQUN4RUFRR0srYXI0dFZ1RWZQSzNuQWFONGdVSmsvSWpIWCtuZGV0N1RpNFFpa1pKczc0MHQ5WWhFS0pxKzdUelc2NkxJUDF2K0VINWJCcUIrZnVnWURLZDdENGJWYnVZaDdpMFNlaUZ5UFk0ODVKN2UxalhJQjg2N2hwNEI2STF2L2R5a29maHV3MVpoWXJxZWlWeng0OEVBSklacVFOaTZXZzM1NG1yQWFGZ3F6MW1yM3RxeE5zYkVHb0lNWFQrYW8rc1pvLzEzclZaRHZsYk9MZ0JBWXJvcGdPWE5vNHRhMWhnak5QMmZhZ25lWVY5YmkxNmlpNDJqZlNOeWdBb1JBRUJpdmtyeFBWU0U2cW1zUEwwbnIyanJCSzMzci8rM1VVQTdkdFFqV2g1V3V5NVBOMHRtNks5dXkvWEdiL3YxK3M1Y3YzN2xrQVVpQUlERS9KSWV0dlUwcllPNE4zekxOQS8wTUU1VUx0cjhJT1EvL3lRelVZdnM2MzMyOU5mdVZhdC8rMWxlWTJUOG5tNDl0Si9Ya2ZzRm53VVJBRUJpSGd5QThHSkZ5RzZhTnpzREdTMW9ZMWZ2MkhOK24rclZ6cmd1Njk1Q1hvZ0FBQkx6OEI1QTZ4enV5bS9sV1lXMldpNWxWWitxbzdVSzd1MElXS3ZvVWRyN2MrWUtlbnVOMnZpOTYydlB6K3EzYTdVYThyWHloMjAyR1IxR0hqaHhYT1ZsUks2TjJhTHA2RDBnbGx4YzJ5bjllN29aMXhIYUFvM3E1L1czK21xTGw1QVBjMi9heXhWSHY4QVJlYStONWQyOEIxWjdDTFRyaVJxQVhuK3Z6WWkrMGZhZXpwWitMZC90V1JOSUROV0FFSzRtKzhkZi8xTktLZVdQZi9tOUt1LzFSNzZmL0tzVTNYTkV2YWRzUHl2dnRiRmtudTVSWkQ0OTBuZTBqeFVaelY1ZjVPY1QwYTlYVFZZZi92cTVHb0ZvZitSN3l0a0ZBRWhNMXdEY3ZpbkYza2R1ejJ0dGVuS3QzU2ozQnVzYUl1TnJiU0xySXJPMDkvZXEvalAzdVoyQ2hjUFBnUWdBSURIYkdJRFdJNDFFRkczZm81N2F5NmU5c1RWOUl1MWVRWFJOQjNLd2pRRUFnT3RaYmdBMFQ2MTlsaXZ4a1QzN3RyMGxHOVV6c3BydXJSSHM3R0dQNm5ZTDFHTEFlMEVFQUpDWVUxNEU4dmJSNVp0cWxnZTNJb0xJbm5mYjEzc3pib1ZYOW5ZMHBENmE3TWdjSTlkelJtUlMxU0FLK0J5SUFBQVNzL3hWNEpHOFgzck5FZTh2OS9tdnlzRjc2d0phbTFIZGpsNUxaTjVJTlZsOSswOXJ1MnUxRzNKZlB2d0NTU2x6b2FjNmVlZGhuakVBMXRoUlBYdjlJbW1JTmM2ckZnZzc4MUlNbEppaEZHRG1yVE5yZlVBKzNGNTBJTC9BMW43NmtRZkw4dVF0RVNNVUdjY2JmNmFmMTMvblhRbDRQVlFEd3RiVmFzZ3ZxQWFNc3NxYmVEbHliMDR0OTYvSE05R0sxZGZUSTdyYjhDb3ZISmwzMTJvMTVHdmw3QUlBSkdZb0FwajFZRmJ1SHhsL3h1T2VzUllRUFg4V1owUlgwZnNIVUNFQ0FFak1Ud1FRMlVMenZGUnZHMnhrbTB6S3JaVnhyODJaL2FQNkg4RmJCK2tSNmJOYWYzaFBpQUFBRXZPcmxGZzlmWFIvWEJzanNrOGUyZisrTll6TUwvdXYwUDhNWnRjQmVqcGRwVCs4SDBRQUFJbjU4dDV1azZ2M2tWeDZSaTczOENPS2ord21YSlh2OWp4NFpBMGxzcjVTMFg0K00rOC9RRjZJQUFBU0kvODI0SDNFQzh1KzdYRjBsWDhrNyszdFZNenVaTFRlVSt1dnljK2tkdytpSHQyS0F0clAxbHk3VnFzaFh5dFhTM0M5dEVBNzM4cCtCcDQwQU5vYzFvSmVWQjY1aHA3K2tUbG1VNERaeGIrUk9SdzVpNEdKVVV0b1I3K29vMS9nYU00Zi9SSkhqTWpJK1NPNS9DeEgxd0FpZWhseURFQmlxQWFFb2I4TjJQNUpzSC8rN2IvRnN0OS8vTXZ2SC9xM2YxcXNsV3Y5Mjc4OTZHVmR0OXZ6WDdTVzh1ajg3WFhWdHBIK1ZkNzJzL1NyYzJqamExeFZMZmhRUis3bHVwWk1uaDg5N3MxeDF2aXI5ZmV1Nnd5NXg0Rys5OS8rL0x0NytWOGs4UE92UGZmYm4zOTNiNUh5OXZ6UjQ4cXE4YTM1Mm11WDU2b3UxdlZydW83b0g3bi9xK1RzQWtBWDZiSHVBM2FtdG0yekRpOXpxakxwVGJVMkVmbm8vTm40VlVvc2Q3N2Y1ejFnTzc0MVJ6dS8vTnpySHgzZll2WDRNM3FNOUl2cVpQMThPbjJxYmcvL2V3OW9CUG5YaGMvdWYxUytpc0hidnh3aUFIZ3JlZy9RYmc5WVM2dmJxd3lRNUdjUjBQTWVQYzhTOFlaSDI2eldZZlg0VVM4OUUxbEUrNnlJV2xwV2Y4R1BQdnhTcnFVS3Era3QvRjBORVFDRXVOL3ZQLzhzYnJmYmFTbUNOZjVSdWRXbXlsYXZEL1R1NGRWOGxhTG5uRjZPM3Nxc25OTGFvNWJ5M3R4ZXpqcnlIb0UxZnl2cnZWZmdqVy9OWWExbFdQcEg5dmExL3BIcjhlYnA4UXB2MmROalJ2NUsybTNCZi96MVAxdm95bnNBOEJLT1BnQzdQRURhTG9OSGF3UjI0RmZyTFNxbFBIdU4zZ3A5TzRiVlhwTmJxKzNlK0ZvZlM5NmJQNEkycCtaQk5iMTZudGE2RmtuVjE5SzdkNzczODExRnZhUjJPbS9xS3ZQV0VFWlVsL1B2OVBEdEFHc0FjQWo1WUdzUGNQMnN5VFhEWUtVYld2NGNNU3h5cnBuSXdacW5OVEE5L1hma3FScFFhNlRsbFBkN3JPN2M4L1FhTmErMXhxL25yVEdrZkhUKzFXajZqUGIxNUxQWFpsYUwzVzdsdHovLzdrSGVQdHhWM3NQeTZGci85cmczdnBSYmJkdjUyNzl6Mkx1K252NmF6TksvL3ErTnRVMDE0SVBRZUloR2ppTmYrTkh4dkJCZnlzK1kvOGhZa2Z2aGplczk5TmJQYkhDK3ZWMFVMT1hVUlVBcmQxOHgvb3o4NlBoSE9lTDllN1NSMDlsancrZkNMZ0NjVm0xR3RhQjlmVzAvUzcrWFZBdTJYdU11cUEzbGVVdXVIVWU4MHVoNFhuOHA5NjRsT3I5M1B0SzNkeitzYzlhMWVlUEo2d3ZNZDBxMW1aaVhhc0UzcVJaa0Z3QU9RN1hnKy9KZ0FHNEMyZGhiZmJlUUMydjE4OTM0bHRUejFqemFlSnJjYXYvS0hRQk5INDNvdGMyMk9SUDVBRVVlMEFoVUMxNERFUUI4RkwwSDZPb0hiSVJXdDZzTTBKZTFlaHoxSk5LemEvMjFPYXpJUVBhMXhyZmtWdVRpUlIwOVpMOVdUKy9hTEowOS9XZjA4emo2OHoyVDFWL3dvdysvbEd1cHdtcDZDMzluUXdRQXAzQy9VeTE0QnIxN2VEWmZwWXk5cnk2UG81NmtsOU9QOWp0cmZrM1dPejR5dGp3M00zYXYvNmorWi9BS2I5blRZMGIrU202MzY2c0ZlUThBdG9ScXdXdjRzdkxPWGg0N3VocnY1YUM5TWVUYXdNaXh0NjRRa1VmSDc5MEQ2L3FqdXhNNzVQQXJxRi80Ky8wZTJrYXNzak9yQmR2NWQxNGtYQUZyQUxDVTlvRnE4MXVxQlgyZHJ1Skw4NEoxMWRqemtGWGU2MStQUFhtVlJUM3JtZFM1dk91TmpsTS9SNk1DYmY1ZVAyL3MzaGdlMDlWa042b0ZQZjAxMlU3VmdvZEQ2TE9PTlFOd1JRcHdSWHZyWEVRV2Jkc2Foa0Vqa0N2bWhRZGVrZ0xVeUtFOTF0cGNxVThwODI4TFJoLzA2UHlqeUg1WFJVL3cvckFMOE9aSXoxK1BSOUtCVi85dE91U3ZrNXUvRVdqR0ExdjkyenozeVBoSG1jMlJQZjJQZW45dGp0bis3VGlqL1gvK1VPUTM4a3VEL0RQbFJBQnZ6cXZUSjNodnpHcEFyWEhQUTNsZlBEbjIxWGxxR3hwYk1rKzMzcHBGWkl3ZXI3bzNrQmZlQXdCSXpKQUJrTnQydlRiMW5NeWZ6NmFkMDh2REk1NTd4Z3VmNGYybGprUUJjQVZFQUFDSitTVTl0V3dndmF2MFVCRlBGZkhRbmg2Ui90SDNDbVlYeUN6OVJpT2RTQnNyVWlFcWdMTWhBZ0JJekZmRUk4NTYyOTY1TStXenVoelZQeHBSakVZZTNqMGZJUkJ0ekF3TEh3SVJBRUJpZmw0RW1uMkw3Y3kzKzQ2T05kTi9wRS8wSHJYdG91T2ZlUjliQW1QZFMzbmQzNlpEL2xyNTRkZFlNUUIrdTFjYmdBQXNMQ2JtSndXWTNYKysyRnVaek83Rmo4eDUrMmFrM2FvMUFvQXpvQllBdHE1V1EzNWhOV0FOV2VXYmZ0YSt2TVFMWTcweEl0NDZxb01sODk1eDBOcU15RWJiamFaYldrb2hJNTFldXRHN2Y3dFdxeUZmSzJjWEFDQXhUd1pBeTNOdkRhWFlIdHRxMDNvcEtkZGtFcSsvOTluclA2Si9sVm45UnRyTmVuL3JjNnZ2elAySDNCQUJBQ1FtdEFoNHRyZVlYZkgySW8vWmJjd3JPYUpqdlVhWjZ3TWNnUWdBSURIZENHQjJmMzFrekNpejNyM2QzWmpwM3lONlBkWXVDOENySUFJQVNFelhBTFNldi9WYzJpcCs2MlZiRHlmSGFNLzF4dGZhU0UvZTJ3V29ZMmk3QU5Hb0lESkhyMS9WUXpzZnZZYm92TmFjNzdCV0F0ZEJCQUNRbU5BdWdQUVdtbmZYMm5salJNYy9PbllwL2x1QTBibDY4OHZJNUt6eEkyMlAzcjlTOXExV1E3NVduaUlNOUF6QXFqbmVLTVJtU3pFeDIzeEpzK1NtV3BRZ1pkNDZoWFovcEZ3Ynh4a0RBNUFZcWdGaDYybzE1QmRXQThKYWpyNy9vTDFERU5tRjBkcElIWGF0VmtPK1ZzNHVBRUJpdnFSM3FBSXZmOVQ2ZVAzbEdONzRQUTgyZWh6eGlHZk5KN2xpUGFPM0N5TjE5YUlBeUFjUkFFQmlmclZlN1BaTlBXNy9yekxObzhoMjdiRTJocmR2cmNuUHd0c08xSzUzWkd5cHQ0d296dGpsa0dzQnMrTUFWSWdBQUJKenFnRm9vd0xORzk0YnpwejNLRllVYzFaL0xiS2FRVVpTcytNQVZJZ0FBQkx6WUFDMFhQV3N2RlBtLzk1WW8zTnBPa29QS1hOOFRXYnBGcmtIMFoyQnF6bHJqUU0rRXlJQWdNUTgvVjBBclpGYzBXNWxjclhmMjR2MjVtcjNwNlZjeWl3ZHZiNVdHeTNpcVhONXEvcmVQZWpwT09xRjJ6Rm5QSGRrM2wycjFaQ3ZsUTh2ZmtYRFphM1BTRHNyaFBmRzZJWC9FUVBnaldQSnJZZCs5aHE5YTU4TjNaMHh0a2hWNERVOC9ZWlo3d3MyMHZhVGlCcXdOd1VEa0JpS2dXRHJhalhraTZzQlozUEswVDRSUmtQdlVma3NYcm9RbmI5ZFU3RFdTanhXOTkrMVdnMzVXbm1xWFlEZVFpSkFObElaQUFCNEJBTUFrQmdXQVJkanBSeTlWQ1Q2UnVGc1N0T3NWOHgwaHcrQkNBQWdNVVFBaTlGVzYzc3IrQ012L3B5d2k4T2lhR0srb3FGb2hHZzRPdklBekREU2YyYXVrYkQ4ZzE0WWdnK0VGQUFnTVZNdkF2WG92U2d6Mm0vbC9DTTFBRDFXdllnRXNBcldBQll6a21LTUZnOVo4bDV4a3VoVFN0bTNXZzM1V3ZudzY2U2w3UGVxN2k3NmVaV0ZFYlJYZGEwSHZDZnZqZCtjaTZvSEh3Z1J3R0tpeG1Ua29ZM0l2WkppSVdjWElERVlBTmk2V2cwNWZ4c1FMbURYYWpYa2ErVnNBd0lrNXRRSVlQWDJWMitSN3VqODBSZVVadWYzK3JmbkxQbksvcEFUSWdDQXhHQUFBQktEQVFCSURBWUFJREVZQUlERVBPd0NuUFVxYk12SSsrMW5yRkwzM29pejlMVDZyUGlOUEY2ZjNodDhaOC9QaGtCdWlBQUFFblBwbTREdFh2UUtydmlWMzFlODYvQ0tmZnBkcTlXUXI1V0gvamJkcVB4aGduaFJ5dkw1WjM1ajBXaVJ6Um4wZEo2dE5qVG1PdElkM3B5dGZ2cXJ5M2wzZnhQdVJkZFBOV0JpS0FhQ3JhdlZrRk1OQ0Jld2E3VWE4clZ5ZGdFQUVvTUJBRWdNQmdBZ01kdXNBWGpiV1ZKMjltcC9iKy9kazF0dk5jNHc4dFlrd0JrOFJBRDNiNnpHUFRrQXZCZGJSQURmSGxZZW03L3RWdlBJczN2OFI5KzFseS9sUktNUzZ3VWo3VHJxeDE2azBydDJJZ2lRL0VRQTdSY1NMdytRZzVjdkFsYnZmNy9mZi81OUh4LzZ1L2Z5bkRSd1hzVGc1ZDFhR2xUUFdhL29XdDcvOW8zWEpucU5sbTRqY3NqSHIxTHNoMlowc0VnZnZvQUErM0RhR3NESWcyM2xzbHFLR3FrZ2JMeG5qU0lleHZmeTY1SHJrR3NUOWJNOEYvWCs4aHByLy9iNHU4L1R2YkFpanRrOGY5ZHFOZVJyNWFkVUExb1BUUytjYlJiMGZrTC9aa3pyYjlrOUxRSktBMkJkZzZlLzk0QzJEN1ptQUxSMnJhN2F2ZWd0WW1yM1RCcVhVUU5ndENFaVM4ekwxd0JhdnIzMzAvbm82cmIzOEFmbnYzdGR0WWYvM3RBYU5LMlBkdXpKMmdoRFJodmV3OTlHRHdBZW9SUkFmcG0wTDZqbmdjNE1WZUY4ZHE1V1EvNG0xWUNSWEwxdEsvdHBJZmVxK1QxOTZoQ3REcDV1UnFyeDBMYk42ZVd4SE9kVkJuTFhhalhrYStXaEZLRG4xYjF6TTIwQTRCcTJlQlBRVzl6cUliMytFUVBqTGZDMWMwWFNuVjZrWU9rWk5hS3REbDVFQWVBUlhnVHNoYjBBOEg1c0VRR1VNdlllKzZ3eGlyWTk0cDFuMnA2aEMra1h6UEJnQUVZZVFnQjRmOVMvREZUS3VvZmR5NTluVnY5Ny9YclgxRnREaUs0eHJMeDNrWmVKTEQxN0x4UmgwM096MVl0QUFIQXRQeEZBNjFYYVBldTJzZVc5SXg3S085L0t0SGNDWkIrcHEzZUJzdC9vOXFYblpZVXUyam0xYnk4U0dZMGdySjlWdTBOZy9UOHlEM3dlUkFBQWlWRjNBWG9lYW1hUE8rTDl2ZWpER2tmelpMMklaUFJZWHZQbzIzcHRsSEJYcWhVMS9lWDl0ZmI1djlzK1JSQ3RwNWY2YU9kMnJWWkR2bFllZmtjL3VoaG1NV0lBMm5hakQyZWtqNVZDekJnQUl3V3d4bE1MbHJSUTNFcWZORjNiY1JYWlUrZ3Zya2xPRFlrdzg4Q1JCK29JWHI1c1BRUld2dHQ4cnVldGNWdDVPMDVSNUZvWjhFTjdpVGVubU1mTnd5UFgzeG9BUzI4TUFGaHM4eUlRdkk2ZHE5V1FMNjRHbE40czR0WFA4UHplV0ZhYUVOVk5oTnhlaUcrR3ptMy9kbDVsL0hyK1FWZnJPbWFRVVlJVENSWHRmRDAyenQ5TDJiZGFEZmxhT2JzQUFJbVpTZ0hPOW5DUitZVG5mYXFHRTIzcloydTk0RFI1ajZwcnpkR2xsN2JXQVdUVVVlZVdNdEVucEJOQWhRZ0FJREZmV2c0c2Fielk1ZlhtM2lxNWhvd09Wc3ZyWis4K3RsR0FKN2Y2ZjQrdnZvZWg5SDNaYnhXQzk0TUlBQ0F4WDFFdjBmT01xOUJ5NFo0T1BmM09sSS9jdjFWeUdXR002QVc1SVFJQVNNeVRBWkM1Zm90Y2pkYncraCtWcnh6NzNYV3J5RjBSclc5MExQaDhpQUFBRXFQK1BnQ3Q0U3ZsalV4dGU2SGMzSS92N2RXL1VtNjFiZG0xV2czNVd2bHdOZUFtQnFDMGJTK1VkMS9JMmZrK0dwQUtKQ1pjYmFkMjdxd0p0T1BJTnBxczk0Q2gzNXgrbldNTVFHS29Cb1N0cTlXUVgvUzNBZVVxc1JaQ1dtSGxnR2VzeCtIcXZvdjErMm0zcVg3MWVPaiszVzc5TnpsM3JWWkR2bGJPTGdCQVluNlY4dWhoR2kvemxCdmVHNjVVRXYyTzQrMEtRRjZJQUFBU0kvOHlrTnY0MVo0RC9RRE9oUWdBSURIcUh3ZTFjbFJyTDFxZWw2dlp6U3IwVTE4aGQydmlMOUJQblg4ai9aNzZqdWdISUNFQ0FFak1WeW45ZDhWNzNpVGliWTZNZ1g3WGpBSDVJQUlBU014WEtZZmZKVjkrM0o2cldHL0xSZHIwK3RhY1dwdS8xZkVNdWFXVFI2L1B6Smk3VnFzaFh5dmY0Z0hIQUx6VUFGQU1sSmkzeUFtakJxTnk1R0d5ak05S3VYZCtSUnZaSmRnT1BoQ3FBV0hyYWpYa0YxVURsckpuUGJ1bWs5RzMreWJlaUhkc3ZiWTF0M2JPa2x2M1NQYnowcDlleUcvcHI0MGg1YnRXcXlGZksyY1hBQ0F4Yi9QN0FIcTBUckMzaUdqTkxSZm1yUEZHRnltMS9qMFByWTFsdFluYy8xNGJ5QWtSQUVCaTVIc0E1ZnRZOVpLdGw3dktnMVNQM1BOaTFucUJhRitQMVJ5NWQwMWU1TkRPcTNsNGIweWhtN2NHWU03bjZkTmJvNEM4RUFFQUpPWXRmaDlBR3dVYzBVVzd2c2dLZmJSdGRCdzVadHQzZGczQTYyL3BSVFFBUkFBQWlYbWIzd2N3NHEyaXErWDE4MGlFNFVVQjF2M3d4aDlabGJmNjlNYkEwNE1GRVFCQVl0N2k5d0ZVck5YLzNoamU5V2dyNVNQOUk4Y2p1a1U0RWgxWjdGcXRobnl0L0sxQ1ExNWlXUUxGUUlsNVNnRmtycnFiM09PVnVyMzZ2b3pvZHVRZXcyZEJOU0JzWGEyRy9PSy9EV2lGMTYrVU56SzE3WUI4eVhGUDltcDVaTTFnMTJvMTVHdmw3QUlBSk9haEZxQis5aGJaZWg3STRxUmRBTFZ0czgrdWpuZDBGYjkzTFBOcEw0cnBzZUkrUmlJWXlBa1JBRUJpbnQ0RHFDdkU4dHgzdTNwcy9zWVpPWjRtMStac3o4bGo5RHVtSDRBRkVRQkFZcDdXQUR5OFpqVVBOL29kK28xQTZIZE1Qd0FMSWdDQXhIeHAzc1hpRlI0SC9ZN1Q3Skx3OWg4OFFBUUFrSmd2dVlmZWVvdDJsVnQ2RUc4dlhPYW5rWDE2eTBQdHFwOHk5NWI2YWNmYWZkNjFXZzM1V3ZuVEw3Qm9GNk84TDQzM0JUNUQzcmJaVVQ5dkMyODMvU1JDUDlLQ3hMQ0tuQURQdUJZTVFHcW9Cb1N0cTlXUVgxQU5LRVBXM1k3UDRzaTRtbzVhaUQ4cmI5dForbmt5ajBpZlhhdlZrSytWc3dzQWtKaXAzd2w0OWZGWnpJN2JlbDVyZ2E4ZU92SndkS041ZWkyUDkzVHNyZnIzZElBY0VBRUFKRWF0QmJCeVU2K050d2Q5QnBGdHVETzM0Rm92MnJaMzhuTnpmSysvNVoyMXFNSFRWV3VuNlEvUVFnUUFrSmpUZmg5QTY0azBvaDQ4Y2l4UjJwa2VVRjVmNzlxMDZFS08yYnQvM3ZWNzBaYlM1K25hcGY3TitaL3JZQTBBTElnQUFCSnoydThENlBSYldzOHU5WmQ2amx6ZmQvVHdvMS8xb0RJcXNISjBUeit0djlkWGpxODFiZlF6KytQcHdZSUlBQ0F4Mi84K2dEcnZYYmc1SSs5LzByTjNmYTBIbmJtOGtmdW5ZYTBWV09zcjJzOUE3bHJJNkNxeUJyQnJ0UnJ5dGZLYjlRWDJGdWtzckhhOU9iUVEyZExoUi9HREJtQ2tqYWZmelAzejdtZmdIblpmRXg0MEFCUURKZVlwaDdXOGpmVUFycEpyYlN5MEI3THQ3MTJmbFl1UFBNQm4zTCsyM1l6c0FCaUF4RkFOQ0Z0WHF5Ry9vQnBRZWhVcnoxUkh1VWhlaWgwR3kzeTVON2JXM3B1L2QzL091SCtSZGd1OC93KzdWcXNoWHl0bkZ3QWdNVytWQXF6MGdBQVpJUUlBU0F3R0FDQXhHQUNBeEdBQUFCS0RBUUJJREFZQUlERVlBSURFdk5WN0FMQ09YYXZWa0srVjgySU5VQXlVR0ZJQWdNU1FBc0RXMVdySUw2Z0dCTmkxV2czNVdqa3BBRUJpTUFBQWljRUFBQ1FHQXdDUUdBd0FRR0l3QUFDSndRQUFKQVlEQUpBWURBQkFZbmdURUVvcCsxYXJJVjhycHhvUXFBWk1EQ2tBUUdKSUFXRHJhalhrVkFQQ0JleGFyWVo4clp3VUFDQXhHQUNBeEdBQUFCS0RBUUJJREFZQUlERVlBSURFWUFBQUVvTUJBRWdNQmdBZ01id0pDS1dVZmF2VmtLK1ZVdzBJVkFNbWhoUUFJREdrQUxCMXRScHlxZ0hoQW5hdFZrTytWazRLQUpBWURBQkFZakFBQUluQkFBQWtCZ01Ba0JnTUFFQmlNQUFBaWNFQUFDUUdBd0NRR040RWhGTEt2dFZxeU5mS3FRWUVxZ0VUUXdvQWtCaFNBTmk2V2cwNTFZQndBYnRXcXlGZkt5Y0ZBRWdNQmdBZ01SZ0FnTVJnQUFBU2d3RUFTQXdHQUNBeEdBQ0F4R0FBQUJLREFRQklERzhDUWlsbDMybzE1R3ZsVkFNQzFZQ0pJUVVBU0F3cEFHeGRyWWFjYWtDNGdGMnIxWkN2bFpNQ0FDUUdBd0NRR0F3QVFHSXdBQUNKd1FBQUpBWURBSkFZREFCQVlqQUFBSW5CQUFBa2hqY0JvWlN5YjdVYThyVnlxZ0dCYXNERWtBSUFKSVlVQUxhdVZrTk9OU0Jjd0s3VmFzalh5a2tCQUJLREFRQklEQVlBSURFWUFJREVZQUFBRW9NQkFFZ01CZ0FnTVJnQWdNUmdBQUFTdzV1QVVFclp0MW9OK1ZvNTFZQkFOV0JpU0FFQUVrTUtBRnRYcXlHbkdoQXVZTmRxTmVScjVhUUFBSW5CQUFBa0JnTUFrQmdNQUVCaU1BQUFpY0VBQUNRR0F3Q1FHQXdBUUdJd0FBQ0o0VTFBS0tYc1c2MkdmSzJjYWtDZ0dqQXhwQUFBaVNFRmdLMnIxWkJURFFnWHNHdTFHdksxY2xJQWdNUmdBQUFTZ3dFQVNBd0dBQ0F4R0FDQXhHQUFBQktEQVFCSURBWUFJREVZQUlERThDWWdsRkwyclZaRHZsWk9OU0JRRFpnWVVnQ0F4SkFDd05iVmFzaXBCb1FMMkxWYURmbGFPU2tBUUdJd0FBQ0p3UUFBSkFZREFKQVlEQUJBWWpBQUFJbkJBQUFrQmdNQWtCZ01BRUJpZUJNUVNpbjdWcXNoWHl1bkdoQ29Ca3dNS1FCQVlrZ0JZT3RxTmVSVUE4SUY3RnF0aG55dG5CUUFJREVZQUlERVlBQUFFb01CQUVnTUJnQWdNUmdBZ01SZ0FBQVNnd0VBU0F3R0FDQXh2QWtJcFpSOXE5V1FyNVZURFFoVUF5YUdGQUFnTWFRQXNIVzFHbktxQWVFQ2RxMVdRNzVXVGdvQWtCZ01BRUJpTUFBQWljRUFBQ1FHQXdDUUdBd0FRR0l3QUFDSndRQUFKQVlEQUpBWTNnU0VVc3ErMVdySTE4cXBCZ1NxQVJORENnQ1FHRklBMkxwYURUblZnSEFCdTFhcklWOHJKd1VBU0F3R0FDQXhHQUNBeEdBQUFCS0RBUUJJREFZQUlERVlBSURFWUFBQUVvTUJBRWdNYndKQ0tXWGZhalhrYStWVUF3TFZnSWtoQlFCSURDa0FiRjJ0aHB4cVFMaUFYYXZWa0srVmt3SUFKQVlEQUpBWURBQkFZakFBQUluQkFBQWtCZ01Ba0JnTUFFQmlNQUFBaWNFQUFDU0dOd0dobExKdnRScnl0WEtxQVlGcVFBRG84NGYvKzlQOUQvLzNKd3dHUUZZd0FwOEZLUUNFMFI3OGYvMzc3M3lIM2hoK2VQQkExTHYvNjk5L3Y5VzJHSUgzaFI4Y2xGTGlENzRIaHVEOTREMEFPT1hoaC9jRWk1MmNzeDUrdlA5N3dvdEFjQWdlL1BlR0ZBQ21IdUovL2Z2dk54NStnQThoc3IvUE93Q2ZCeEVBUUdJd0FBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBc0IzL0QwK3kxZjdGNWxXQkFBQUFBRWxGVGtTdVFtQ0MnIH1cbi8qIDwvZ2VuZXJhdGVkPiAqL1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgeyBnYW1lIH0gZnJvbSAnLi9HYW1lJztcbmltcG9ydCB7IHJnYmEsIGNyZWF0ZUNhbnZhcyB9IGZyb20gJy4vVXRpbCc7XG5pbXBvcnQgeyBTcHJpdGVTaGVldCB9IGZyb20gJy4vU3ByaXRlU2hlZXQtZ2VuJztcbmltcG9ydCB7IFZpZXdwb3J0IH0gZnJvbSAnLi9WaWV3cG9ydCc7XG5cbi8qKlxuICogU3ByaXRlXG4gKlxuICogRW5jYXBzdWxhdGVzIGxvYWRpbmcgc3ByaXRlIHNsaWNlcyBmcm9tIHRoZSBzcHJpdGVzaGVldCwgb3JnYW5pemluZyB0aGVtLCBhbmRcbiAqIG1vZGlmeWluZyB0aGVtIG9yIGNvbnN0cnVjdGluZyB1c2luZyBwcmltaXRpdmVzLiBUbyBzYXZlIHNwYWNlLCB3ZSB1c2Ugc29tZSB0ZWNobmlxdWVzXG4gKiBsaWtlIHN0b3Jpbmcgb25seSBhIHNtYWxsIHNsaWNlIG9mIGFuIGltYWdlIGluIHRoZSBzcHJpdGVzaGVldCwgdGhlbiB1c2luZyBjb2RlXG4gKiB0byBkdXBsaWNhdGUgaXQsIGFkZCBzb21lIHJhbmRvbW5lc3MsIGV0Yy5cbiAqL1xuZXhwb3J0IGNvbnN0IFNwcml0ZSA9IHtcbiAgICAvLyBUaGlzIGlzIGFuIGV4Y2VwdGlvbiB0byB0aGUgcnVsZSwgbG9hZGluZyB0aGUgc3ByaXRlc2hlZXQgaXMgYSBzcGVjaWFsIGFjdGlvbiB0aGF0XG4gICAgLy8gaGFwcGVucyBCRUZPUkUgZXZlcnl0aGluZyBpcyBpbml0aWFsaXplZC5cbiAgICBsb2FkU3ByaXRlc2hlZXQoY2IpIHtcbiAgICAgICAgbGV0IGltYWdlID0gbmV3IEltYWdlKCk7XG4gICAgICAgIGltYWdlLm9ubG9hZCA9IGNiO1xuICAgICAgICBpbWFnZS5zcmMgPSBTcHJpdGVTaGVldC5iYXNlNjQ7XG4gICAgICAgIFNwcml0ZS5zaGVldCA9IGltYWdlO1xuICAgIH0sXG5cbiAgICBpbml0KCkge1xuICAgICAgICAvLyBCYXNlIHBpeGVsIGZvbnQgYW5kIGljb25zIChzZWUgYFRleHQuaW5pdGAgZm9yIGFkZGl0aW9uYWwgdmFyaWF0aW9ucylcbiAgICAgICAgU3ByaXRlLmZvbnQgPSBpbml0QmFzaWNTcHJpdGUoU3ByaXRlU2hlZXQuZm9udDJbMF0pO1xuXG4gICAgICAgIHJldHVybjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQSBzbWFsbCBoZWxwZXIgdGhhdCBkcmF3cyBhIHNwcml0ZSBvbnRvIGEgY2FudmFzLCByZXNwZWN0aW5nIHRoZSBhbmNob3IgcG9pbnQgb2ZcbiAgICAgKiB0aGUgc3ByaXRlLiBOb3RlIHRoYXQgdGhlIGNhbnZhcyBzaG91bGQgYmUgUFJFLVRSQU5TTEFURUQgYW5kIFBSRS1ST1RBVEVELCBpZlxuICAgICAqIHRoYXQncyBhcHByb3ByaWF0ZSFcbiAgICAgKi9cbiAgICBkcmF3U3ByaXRlKGN0eCwgc3ByaXRlLCB1LCB2KSB7XG4gICAgICAgIGN0eC5kcmF3SW1hZ2Uoc3ByaXRlLmltZywgdSAtIHNwcml0ZS5hbmNob3IueCwgdiAtIHNwcml0ZS5hbmNob3IueSk7XG4gICAgfSxcblxuICAgIGRyYXdWaWV3cG9ydFNwcml0ZShzcHJpdGUsIHBvcywgcm90YXRpb24pIHtcbiAgICAgICAgbGV0IHsgdSwgdiB9ID0gdGhpcy52aWV3cG9ydFNwcml0ZTJ1dihcbiAgICAgICAgICAgIHNwcml0ZSxcbiAgICAgICAgICAgIHBvc1xuICAgICAgICApO1xuICAgICAgICBpZiAocm90YXRpb24pIHtcbiAgICAgICAgICAgIFZpZXdwb3J0LmN0eC5zYXZlKCk7XG4gICAgICAgICAgICBWaWV3cG9ydC5jdHgudHJhbnNsYXRlKHUgKyBzcHJpdGUuYW5jaG9yLngsIHYgKyBzcHJpdGUuYW5jaG9yLnkpO1xuICAgICAgICAgICAgVmlld3BvcnQuY3R4LnJvdGF0ZShyb3RhdGlvbik7XG4gICAgICAgICAgICBWaWV3cG9ydC5jdHguZHJhd0ltYWdlKFxuICAgICAgICAgICAgICAgIHNwcml0ZS5pbWcsXG4gICAgICAgICAgICAgICAgLXNwcml0ZS5hbmNob3IueCxcbiAgICAgICAgICAgICAgICAtc3ByaXRlLmFuY2hvci55XG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgVmlld3BvcnQuY3R4LnJlc3RvcmUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIFZpZXdwb3J0LmN0eC5kcmF3SW1hZ2Uoc3ByaXRlLmltZywgdSwgdik7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgdmlld3BvcnRTcHJpdGUydXYoc3ByaXRlLCBwb3MpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHU6IHBvcy54IC0gc3ByaXRlLmFuY2hvci54IC0gZ2FtZS5jYW1lcmEucG9zLnggKyBWaWV3cG9ydC5jZW50ZXIudSxcbiAgICAgICAgICAgIHY6IHBvcy55IC0gc3ByaXRlLmFuY2hvci55IC0gZ2FtZS5jYW1lcmEucG9zLnkgKyBWaWV3cG9ydC5jZW50ZXIudlxuICAgICAgICB9O1xuICAgIH1cbn07XG5cbi8vIFNwcml0ZSB1dGlsaXR5IGZ1bmN0aW9uc1xuXG5mdW5jdGlvbiBpbml0QmFzaWNTcHJpdGUoZGF0YSwgYW5jaG9yKSB7XG4gICAgcmV0dXJuIGluaXREeW5hbWljU3ByaXRlKGxvYWRDYWNoZVNsaWNlKC4uLmRhdGEpLCBhbmNob3IpO1xufVxuXG5mdW5jdGlvbiBpbml0RHluYW1pY1Nwcml0ZShzb3VyY2UsIGFuY2hvcikge1xuICAgIGxldCB3ID0gc291cmNlLndpZHRoLFxuICAgICAgICBoID0gc291cmNlLmhlaWdodDtcblxuICAgIHJldHVybiB7XG4gICAgICAgIGltZzogc291cmNlLFxuICAgICAgICAvLyBIYWNrISBVc2luZyBhIGZsYXQgYC5tYXAoaW5pdEJhc2ljU3ByaXRlKWAgaXMgYWN0dWFsbHkgZ29pbmcgdG8gcGFzcyB0aGVcbiAgICAgICAgLy8gZWxlbWVudCBJTkRFWCBhcyBzZWNvbmQgYXJndW1lbnQsIHJlc3VsdGluZyBpbiBcImFuY2hvcj0xXCIuIFRoZSByaWdodCBzb2x1dGlvblxuICAgICAgICAvLyBoZXJlIGlzIFwidHlwZW9mIGFuY2hvciA9PT0gJ29iamVjdCcgP1wiLCBidXQgdG8gc2F2ZSBieXRlcyBJIGF2b2lkIHVzaW5nXG4gICAgICAgIC8vIHRoZSB0eXBlb2YgYW5kIGluc3RhbmNlb2Yga2V5d29yZHMgYW55d2hlcmUgaW4gdGhlIGNvZGViYXNlLiBIZW5jZSxcbiAgICAgICAgLy8gXCJhbmNob3IgJiYgYW5jaG9yLnhcIi5cbiAgICAgICAgYW5jaG9yOiAoYW5jaG9yICYmIGFuY2hvci54KSA/IGFuY2hvciA6IHsgeDogKHcgLyAyKSB8IDAsIHk6IChoIC8gMikgfCAwIH1cbiAgICB9O1xufVxuXG5mdW5jdGlvbiBsb2FkQ2FjaGVTbGljZSh4LCB5LCB3LCBoKSB7XG4gICAgY29uc3Qgc291cmNlID0gU3ByaXRlLnNoZWV0O1xuICAgIGNvbnN0IHNsaWNlQ2FudmFzID0gY3JlYXRlQ2FudmFzKHcsIGgpO1xuICAgIHNsaWNlQ2FudmFzLmN0eC5kcmF3SW1hZ2Uoc291cmNlLCB4LCB5LCB3LCBoLCAwLCAwLCB3LCBoKTtcbiAgICByZXR1cm4gc2xpY2VDYW52YXMuY2FudmFzO1xufVxuIiwiXG4vLyBBIGxpc3Qgb2YgaW4tZ2FtZSBhY3Rpb25zIHRoYXQgY2FuIGJlIHBlcmZvcm1lZCBieSB0aGUgcGxheWVyXG5jb25zdCBBY3Rpb24gPSB7XG4gICAgVVA6ICAgIDExLFxuICAgIERPV046ICAxMixcbiAgICBMRUZUOiAgMTMsXG4gICAgUklHSFQ6IDE0LFxuICAgIEpVTVA6ICAxNSxcbiAgICBTVE9QOiAgMTYsXG4gICAgUEFVU0U6IDE3XG59O1xuXG4vLyBBIGxpc3Qgb2Yga2V5IGNvZGUgbWFwcGluZ3MgYW5kIHdoYXQgYWN0aW9uIHRoZXkgcGVyZm9ybS4gSGVyZSB3ZSBoYXJkLWNvZGUgaXQsIGJ1dFxuLy8geW91IGNvdWxkIGVhc2lseSBhbHNvIGhhdmUgdGhlIGtleSBtYXBwaW5ncyBjb250cm9sbGVkIGJ5IHNldHRpbmdzIGFuZCBsZXQgdGhlIHVzZXJcbi8vIGNvbmZpZ3VyZSBpdC5cbmNvbnN0IEtleU1hcHBpbmcgPSB7XG4gICAgS2V5VzogICAgICAgQWN0aW9uLlVQLFxuICAgIEtleVM6ICAgICAgIEFjdGlvbi5ET1dOLFxuICAgIEtleUE6ICAgICAgIEFjdGlvbi5MRUZULFxuICAgIEtleUQ6ICAgICAgIEFjdGlvbi5SSUdIVCxcbiAgICBBcnJvd1VwOiAgICBBY3Rpb24uVVAsXG4gICAgQXJyb3dEb3duOiAgQWN0aW9uLkRPV04sXG4gICAgQXJyb3dMZWZ0OiAgQWN0aW9uLkxFRlQsXG4gICAgQXJyb3dSaWdodDogQWN0aW9uLlJJR0hULFxuICAgIFNwYWNlOiAgICAgIEFjdGlvbi5KVU1QXG59O1xuXG5leHBvcnQgY29uc3QgSW5wdXQgPSB7XG4gICAgQWN0aW9uLFxuICAgIEtleU1hcHBpbmcsXG5cbiAgICBpbml0KCkge1xuICAgICAgICAvLyBJbnB1dCBidWZmZXIgLSBuZXcga2V5cHJlc3MgZXZlbnRzIGdvIGludG8gdGhpcyBidWZmZXIgdG8gYmUgaGFuZGxlZFxuICAgICAgICAvLyBkdXJpbmcgdGhlIGdhbWUncyB1cGRhdGUgbG9vcC4gSXQncyB1cCB0byB0aGUgYHVwZGF0ZSgpYCBtZXRob2RzIHRvIGNvbnN1bWVcbiAgICAgICAgLy8ga2V5IHByZXNzZXMgYW5kIHJlbW92ZSB0aGVtIGZyb20gdGhlIGJ1ZmZlci5cbiAgICAgICAgdGhpcy5idWZmZXIgPSBbXTtcblxuICAgICAgICAvLyBJbnB1dCBoaXN0b3J5IC0gaGlzdG9yeSBjb250YWlucyByZWNlbnQga2V5IHByZXNzIGV2ZW50cyBpbiBvcmRlcixcbiAgICAgICAgLy8gcmVtb3ZlZCBhdXRvbWF0aWNhbGx5IGFmdGVyIGEgZmV3IHNlY29uZHMuIFRoaXMgaXMgdXNlZnVsIGZvciBkZXRlY3RpbmdcbiAgICAgICAgLy8gaW5wdXRzIGxpa2UgY2hlYXQgY29kZXMsIGZvciBleGFtcGxlLlxuICAgICAgICB0aGlzLmhpc3RvcnkgPSBbXTtcblxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGV2ZW50ID0+IHtcbiAgICAgICAgICAgIGxldCBlbnRyeSA9IHtcbiAgICAgICAgICAgICAgICBhdDogbmV3IERhdGUoKS5nZXRUaW1lKCksXG4gICAgICAgICAgICAgICAga2V5OiBldmVudC5rZXksXG4gICAgICAgICAgICAgICAgY29kZTogZXZlbnQuY29kZSxcbiAgICAgICAgICAgICAgICBhY3Rpb246IElucHV0LktleU1hcHBpbmdbZXZlbnQuY29kZV0gfHwgSW5wdXQuQWN0aW9uLlNUT1BcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBJbnB1dC5idWZmZXIucHVzaChlbnRyeSk7XG4gICAgICAgICAgICBJbnB1dC5oaXN0b3J5LnB1c2goZW50cnkpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coZW50cnkpO1xuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgdXBkYXRlKCkge1xuICAgICAgICBsZXQgbm93ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICAgIHRoaXMuaGlzdG9yeSA9IHRoaXMuaGlzdG9yeS5maWx0ZXIoZW50cnkgPT4gZW50cnkuYXQgPiBub3cgLSAzMDAwKTtcbiAgICB9LFxuXG4gICAgbGFzdEtleVByZXNzZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlci5sZW5ndGggPiAwID8gdGhpcy5idWZmZXJbdGhpcy5idWZmZXIubGVuZ3RoIC0gMV0ua2V5IDogJyc7XG4gICAgfSxcblxuICAgIGxhc3RDb2RlUHJlc3NlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYnVmZmVyLmxlbmd0aCA+IDAgPyB0aGlzLmJ1ZmZlclt0aGlzLmJ1ZmZlci5sZW5ndGggLSAxXS5jb2RlIDogJyc7XG4gICAgfSxcblxuICAgIGxhc3RBY3Rpb25QcmVzc2VkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5idWZmZXIubGVuZ3RoID4gMCA/IHRoaXMuYnVmZmVyW3RoaXMuYnVmZmVyLmxlbmd0aCAtIDFdLmFjdGlvbiA6IHVuZGVmaW5lZDtcbiAgICB9LFxuXG4gICAgY29uc3VtZSgpIHtcbiAgICAgICAgdGhpcy5idWZmZXIgPSBbXTtcbiAgICB9LFxufVxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgeyBTcHJpdGUgfSBmcm9tICcuL1Nwcml0ZSc7XG5pbXBvcnQgeyByZ2JhLCBjcmVhdGVDYW52YXMgfSBmcm9tICcuL1V0aWwnO1xuaW1wb3J0IHsgQ0hBUl9XSURUSCwgQ0hBUl9IRUlHSFQsIENIQVJTSEVFVF9XSURUSCB9IGZyb20gJy4vQ29uc3RhbnRzJztcbmltcG9ydCB7IFZpZXdwb3J0IH0gZnJvbSAnLi9WaWV3cG9ydCc7XG5cblxuLy8gSW4gb3VyIGNoYXJhY3RlciBzaGVldCwgY2hhcnMgMHgwMC0weDdGIGFyZSBzdGFuZGFyZCBBU0NJSSwgYmVsb3cgdGhhdCB3ZSBwdXQgd2hhdGV2ZXJcbi8vIGNoYXJhY3RlcnMgYXJlIGNvbnZlbmllbnQgZm9yIHVzLiBIZXJlIHdlIGNhbiBjaG9vc2UgdG8gbWFwIHVuaWNvZGUgY2hhcmFjdGVycyB0byBwb3NpdGlvbnNcbi8vIDB4ODArIGluIHRoZSBjaGFyc2hlZXQsIG1ha2luZyBpdCBlYXN5IGZvciB1cyB0byByZW5kZXIgdGhpbmdzIGxpa2Ugc3BlY2lhbCBjaGFyYWN0ZXJzLFxuLy8gYm94IGRyYXdpbmcgY2hhcmFjdGVycywgZXRjLlxuY29uc3QgU1VQUE9SVEVEX1VOSUNPREVfQ0hBUlMgPSBbXG4gICAgJ+KUgOKUguKUjOKUkOKUlOKUmOKUnOKUpOKUrOKUtOKUvOKVs+KVs+KVs+KVs+KVsycsXG4gICAgJ+KVkOKVkeKVlOKVl+KVmuKVneKVoOKVo+KVpuKVqeKVrOKVs+KVs+KVs+KVs+KVsycsXG4gICAgJ+KGkeKGk+KGkOKGkuKVs+KVs+KVs+KVs+KVs+KVs+KVs+KVs+KVs+KVs+KVs+KVsydcbl0uam9pbignJyk7XG5cbmNvbnN0IFVOSUNPREVfQ0hBUl9NQVAgPSBTVVBQT1JURURfVU5JQ09ERV9DSEFSUy5zcGxpdCgnJykucmVkdWNlKChtYXAsIGNoYXIsIGlkeCkgPT4ge1xuICAgIG1hcFtjaGFyXSA9IDB4ODAgKyBpZHg7XG4gICAgcmV0dXJuIG1hcDtcbn0sIHt9KTtcblxuLyoqXG4gKiBUZXh0XG4gKlxuICogVXRpbGl0aWVzIGZvciBkcmF3aW5nIHRleHQgdXNpbmcgaW4tZ2FtZSBwaXhlbCBmb250LlxuICovXG5leHBvcnQgY29uc3QgVGV4dCA9IHtcbiAgICBpbml0KCkge1xuICAgICAgICBUZXh0LndoaXRlID0gU3ByaXRlLmZvbnQuaW1nO1xuXG4gICAgICAgIFRleHQuYmxhY2sgPSByZWNvbG9yKFRleHQud2hpdGUsIHJnYmEoMCwgMCwgMCwgMSkpO1xuICAgICAgICBUZXh0LmJsYWNrX3NoYWRvdyA9IHJlY29sb3IoVGV4dC53aGl0ZSwgcmdiYSg5MCwgMjAsIDkwLCAwLjE1KSk7XG4gICAgICAgIFRleHQuYmx1ZSA9IHJlY29sb3IoVGV4dC53aGl0ZSwgcmdiYSgyMDAsIDQwLCAyMjAsIDEpKTtcbiAgICAgICAgVGV4dC5ibHVlX3NoYWRvdyA9IHJlY29sb3IoVGV4dC53aGl0ZSwgcmdiYSgyNDAsIDUwLCAyMDAsIDAuMikpO1xuICAgICAgICBUZXh0LnNoYWRvdyA9IHJlY29sb3IoVGV4dC53aGl0ZSwgcmdiYSgyNDAsIDI0MCwgMjU1LCAwLjI1KSk7XG4gICAgICAgIFRleHQucmVkID0gcmVjb2xvcihUZXh0LndoaXRlLCByZ2JhKDI0MCwgNTAsIDUwLCAxKSk7XG5cbiAgICAgICAgVGV4dC50ZXJtaW5hbCA9IHJlY29sb3IoVGV4dC53aGl0ZSwgcmdiYSg1MSwgMjU1LCAwLCAxKSk7XG4gICAgICAgIFRleHQudGVybWluYWxfc2hhZG93ID0gcmVjb2xvcihUZXh0LndoaXRlLCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMykpO1xuXG4gICAgICAgIFRleHQudGVybWluYWwgPSByZWNvbG9yKFRleHQud2hpdGUsIHJnYmEoNTEsIDI1NSwgMCwgMC45KSk7XG4gICAgICAgIFRleHQudGVybWluYWxfc2hhZG93ID0gdW5kZWZpbmVkO1xuXG4gICAgICAgIFRleHRbJyNlYWQ0YWEnXSA9IHJlY29sb3IoVGV4dC53aGl0ZSwgJyNlYWQ0YWEnKTtcbiAgICAgICAgVGV4dFsnI2ZlZTc2MSddID0gcmVjb2xvcihUZXh0LndoaXRlLCAnI2ZlZTc2MScpO1xuICAgICAgICBUZXh0WycjZmYwMDQ0J10gPSByZWNvbG9yKFRleHQud2hpdGUsICcjZmYwMDQ0Jyk7XG4gICAgfSxcblxuICAgIGRyYXdUZXh0KGN0eCwgdGV4dCwgdSwgdiwgc2NhbGUgPSAxLCBmb250ID0gVGV4dC53aGl0ZSwgc2hhZG93KSB7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHRleHQpKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBibG9jayBvZiB0ZXh0KSB7XG4gICAgICAgICAgICAgICAgVGV4dC5kcmF3VGV4dChjdHgsIGJsb2NrLnRleHQsIHUgKyBibG9jay51ICogc2NhbGUsIHYgKyBibG9jay52ICogc2NhbGUsIHNjYWxlLCBmb250LCBzaGFkb3cpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChsZXQgaWR4ID0gMDsgaWR4IDwgdGV4dC5sZW5ndGg7IGlkeCsrKSB7XG4gICAgICAgICAgICBsZXQgYyA9IFVOSUNPREVfQ0hBUl9NQVBbdGV4dFtpZHhdXSB8fCB0ZXh0LmNoYXJDb2RlQXQoaWR4KTtcbiAgICAgICAgICAgIGxldCBrID0gKGMgLSAwKSAqIChDSEFSX1dJRFRIKTtcbiAgICAgICAgICAgIGlmIChzaGFkb3cpIHtcbiAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKFxuICAgICAgICAgICAgICAgICAgICBzaGFkb3csXG4gICAgICAgICAgICAgICAgICAgIGsgJSBDSEFSU0hFRVRfV0lEVEgsXG4gICAgICAgICAgICAgICAgICAgIE1hdGguZmxvb3IoayAvIENIQVJTSEVFVF9XSURUSCkgKiBDSEFSX0hFSUdIVCxcbiAgICAgICAgICAgICAgICAgICAgQ0hBUl9XSURUSCxcbiAgICAgICAgICAgICAgICAgICAgQ0hBUl9IRUlHSFQsXG4gICAgICAgICAgICAgICAgICAgIHUgKyAxLFxuICAgICAgICAgICAgICAgICAgICB2LFxuICAgICAgICAgICAgICAgICAgICBDSEFSX1dJRFRIICogc2NhbGUsXG4gICAgICAgICAgICAgICAgICAgIENIQVJfSEVJR0hUICogc2NhbGVcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShcbiAgICAgICAgICAgICAgICBmb250LFxuICAgICAgICAgICAgICAgIGsgJSBDSEFSU0hFRVRfV0lEVEgsXG4gICAgICAgICAgICAgICAgTWF0aC5mbG9vcihrIC8gQ0hBUlNIRUVUX1dJRFRIKSAqIENIQVJfSEVJR0hULFxuICAgICAgICAgICAgICAgIENIQVJfV0lEVEgsXG4gICAgICAgICAgICAgICAgQ0hBUl9IRUlHSFQsXG4gICAgICAgICAgICAgICAgdSxcbiAgICAgICAgICAgICAgICB2LFxuICAgICAgICAgICAgICAgIENIQVJfV0lEVEggKiBzY2FsZSxcbiAgICAgICAgICAgICAgICBDSEFSX0hFSUdIVCAqIHNjYWxlXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgdSArPSBDSEFSX1dJRFRIICogc2NhbGU7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLypcbiAgICBkcmF3UmlnaHRUZXh0KGN0eCwgdGV4dCwgdSwgdiwgc2NhbGUgPSAxLCBmb250ID0gVGV4dC53aGl0ZSwgc2hhZG93KSB7XG4gICAgICAgIHUgLT0gVGV4dC5tZWFzdXJlV2lkdGgodGV4dCwgc2NhbGUpO1xuICAgICAgICBUZXh0LmRyYXdUZXh0KGN0eCwgdGV4dCwgdSwgdiwgc2NhbGUsIGZvbnQsIHNoYWRvdyk7XG4gICAgfSxcbiAgICAqL1xuXG4gICAgbWVhc3VyZVdpZHRoKHRleHQsIHNjYWxlID0gMSkge1xuICAgICAgICByZXR1cm4gdGV4dC5zcGxpdCgnJykucmVkdWNlKChzdW0sIGMpID0+IHN1bSArIENIQVJfV0lEVEgsIDApICogc2NhbGU7XG4gICAgfSxcblxuICAgIHNwbGl0UGFyYWdyYXBoKHRleHQsIHcsIGgpIHtcbiAgICAgICAgbGV0IGN1ID0gMCwgY3YgPSAwO1xuICAgICAgICBsZXQgbmV4dCA9ICgpID0+ICh7IHRleHQ6ICcnLCB1OiBjdSwgdjogY3YgfSk7XG4gICAgICAgIGxldCB3aXAgPSBuZXh0KCk7XG4gICAgICAgIGxldCBsaXN0ID0gW107XG5cbiAgICAgICAgZm9yIChsZXQgYyBvZiB0ZXh0LnNwbGl0KCcnKSkge1xuICAgICAgICAgICAgbGV0IGNXaWR0aCA9IFRleHQubWVhc3VyZVdpZHRoKGMsIDEpO1xuICAgICAgICAgICAgaWYgKGMgPT09ICdcXG4nIHx8IGN1ICsgY1dpZHRoID4gdykge1xuICAgICAgICAgICAgICAgIGxldCBzYXZlZCA9ICcnO1xuICAgICAgICAgICAgICAgIGlmIChjICE9PSAnXFxuJyAmJiBjICE9PSAnICcpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHNwYWNlID0gd2lwLnRleHQuc3BsaXQoJyAnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNwYWNlLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNhdmVkID0gc3BhY2UucG9wKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aXAudGV4dCA9IHNwYWNlLmpvaW4oJyAnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAod2lwLnRleHQubGVuZ3RoID4gMCkgbGlzdC5wdXNoKHdpcCk7XG4gICAgICAgICAgICAgICAgY3UgPSAwO1xuICAgICAgICAgICAgICAgIGN2ICs9IChDSEFSX0hFSUdIVCk7XG4gICAgICAgICAgICAgICAgd2lwID0gbmV4dCgpO1xuICAgICAgICAgICAgICAgIGlmIChzYXZlZC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHdpcC50ZXh0ID0gc2F2ZWQ7XG4gICAgICAgICAgICAgICAgICAgIGN1ICs9IFRleHQubWVhc3VyZVdpZHRoKHdpcC50ZXh0LCAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGN1ICs9IGNXaWR0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjICE9PSAnXFxuJykge1xuICAgICAgICAgICAgICAgIHdpcC50ZXh0ID0gd2lwLnRleHQgKyBjO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHdpcC50ZXh0Lmxlbmd0aCA+IDApIGxpc3QucHVzaCh3aXApO1xuXG4gICAgICAgIHJldHVybiBsaXN0Lm1hcChsaW5lID0+ICh7XG4gICAgICAgICAgICAuLi5saW5lLFxuICAgICAgICAgICAgdzogVGV4dC5tZWFzdXJlV2lkdGgobGluZS50ZXh0LCAxKSxcbiAgICAgICAgICAgIGg6IENIQVJfSEVJR0hUXG4gICAgICAgIH0pKTtcbiAgICB9LFxuXG4gICAgZHJhd1RleHRDb2xSb3codGV4dCwgY29sLCByb3cpIHtcbiAgICAgICAgVGV4dC5kcmF3VGV4dChWaWV3cG9ydC5jdHgsIFRleHQuc3BsaXRQYXJhZ3JhcGgodGV4dCwgVmlld3BvcnQud2lkdGgpLCBjb2wgKiBDSEFSX1dJRFRILCByb3cgKiBDSEFSX0hFSUdIVCwgMSwgVGV4dC50ZXJtaW5hbCwgVGV4dC50ZXJtaW5hbF9zaGFkb3cpO1xuICAgIH1cbn07XG5cbi8vIFRleHQgdXRpbGl0eSBmdW5jdGlvbnNcblxuZnVuY3Rpb24gcmVjb2xvcihmb250LCBjb2xvcikge1xuICAgIGxldCBjYW52YXMgPSBjcmVhdGVDYW52YXMoZm9udC53aWR0aCwgZm9udC5oZWlnaHQpO1xuICAgIGNhbnZhcy5jdHguZmlsbFN0eWxlID0gY29sb3I7XG4gICAgY2FudmFzLmN0eC5maWxsUmVjdCgwLCAwLCBmb250LndpZHRoLCBmb250LmhlaWdodCk7XG4gICAgY2FudmFzLmN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAnZGVzdGluYXRpb24taW4nO1xuICAgIGNhbnZhcy5jdHguZHJhd0ltYWdlKGZvbnQsIDAsIDApO1xuICAgIHJldHVybiBjYW52YXMuY2FudmFzO1xufVxuIiwiLy8genpmeCgpIC0gdGhlIHVuaXZlcnNhbCBlbnRyeSBwb2ludCAtLSByZXR1cm5zIGEgQXVkaW9CdWZmZXJTb3VyY2VOb2RlXG5leHBvcnQgY29uc3QgenpmeD0oLi4udCk9Pnp6ZnhQKHp6ZnhHKC4uLnQpKVxuXG4vLyB6emZ4UCgpIC0gdGhlIHNvdW5kIHBsYXllciAtLSByZXR1cm5zIGEgQXVkaW9CdWZmZXJTb3VyY2VOb2RlXG5leHBvcnQgY29uc3QgenpmeFA9KC4uLnQpPT57bGV0IGU9enpmeFguY3JlYXRlQnVmZmVyU291cmNlKCksZj16emZ4WC5jcmVhdGVCdWZmZXIodC5sZW5ndGgsdFswXS5sZW5ndGgsenpmeFIpO3QubWFwKChkLGkpPT5mLmdldENoYW5uZWxEYXRhKGkpLnNldChkKSksZS5idWZmZXI9ZixlLmNvbm5lY3QoenpmeC5kZXN0aW5hdGlvbl8pLGUuc3RhcnQoKTtyZXR1cm4gZX1cblxuLy8genpmeEcoKSAtIHRoZSBzb3VuZCBnZW5lcmF0b3IgLS0gcmV0dXJucyBhbiBhcnJheSBvZiBzYW1wbGUgZGF0YVxuZXhwb3J0IGNvbnN0IHp6ZnhHPShxPTEsaz0uMDUsYz0yMjAsZT0wLHQ9MCx1PS4xLHI9MCxGPTEsdj0wLHo9MCx3PTAsQT0wLGw9MCxCPTAseD0wLEc9MCxkPTAseT0xLG09MCxDPTApPT57bGV0IGI9MipNYXRoLlBJLEg9dio9NTAwKmIvenpmeFIqKjIsST0oMDx4PzE6LTEpKmIvNCxEPWMqPSgxKzIqaypNYXRoLnJhbmRvbSgpLWspKmIvenpmeFIsWj1bXSxnPTAsRT0wLGE9MCxuPTEsSj0wLEs9MCxmPTAscCxoO2U9OTkrenpmeFIqZTttKj16emZ4Ujt0Kj16emZ4Ujt1Kj16emZ4UjtkKj16emZ4Ujt6Kj01MDAqYi96emZ4UioqMzt4Kj1iL3p6ZnhSO3cqPWIvenpmeFI7QSo9enpmeFI7bD16emZ4UipsfDA7Zm9yKGg9ZSttK3QrdStkfDA7YTxoO1pbYSsrXT1mKSsrSyUoMTAwKkd8MCl8fChmPXI/MTxyPzI8cj8zPHI/TWF0aC5zaW4oKGclYikqKjMpOk1hdGgubWF4KE1hdGgubWluKE1hdGgudGFuKGcpLDEpLC0xKToxLSgyKmcvYiUyKzIpJTI6MS00Kk1hdGguYWJzKE1hdGgucm91bmQoZy9iKS1nL2IpOk1hdGguc2luKGcpLGY9KGw/MS1DK0MqTWF0aC5zaW4oMipNYXRoLlBJKmEvbCk6MSkqKDA8Zj8xOi0xKSpNYXRoLmFicyhmKSoqRipxKnp6ZnhWKihhPGU/YS9lOmE8ZSttPzEtKGEtZSkvbSooMS15KTphPGUrbSt0P3k6YTxoLWQ/KGgtYS1kKS91Knk6MCksZj1kP2YvMisoZD5hPzA6KGE8aC1kPzE6KGgtYSkvZCkqWlthLWR8MF0vMik6ZikscD0oYys9dis9eikqTWF0aC5zaW4oRSp4LUkpLGcrPXAtcCpCKigxLTFFOSooTWF0aC5zaW4oYSkrMSklMiksRSs9cC1wKkIqKDEtMUU5KihNYXRoLnNpbihhKSoqMisxKSUyKSxuJiYrK24+QSYmKGMrPXcsRCs9dyxuPTApLCFsfHwrK0olbHx8KGM9RCx2PUgsbj1ufHwxKTtyZXR1cm4gWn1cblxuLy8genpmeFYgLSBnbG9iYWwgdm9sdW1lXG5leHBvcnQgY29uc3QgenpmeFY9LjNcblxuLy8genpmeFIgLSBnbG9iYWwgc2FtcGxlIHJhdGVcbmV4cG9ydCBjb25zdCB6emZ4Uj00NDEwMFxuXG4vLyB6emZ4WCAtIHRoZSBjb21tb24gYXVkaW8gY29udGV4dFxuZXhwb3J0IGNvbnN0IHp6ZnhYPW5ldyh0b3AuQXVkaW9Db250ZXh0fHx3ZWJraXRBdWRpb0NvbnRleHQpO1xuXG4vLyBkZXN0aW5hdGlvbiBmb3IgenpmeCBhbmQgenpmeG0gc291bmRzXG56emZ4LmRlc3RpbmF0aW9uXyA9IHp6ZnhYLmRlc3RpbmF0aW9uO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgeyB6emZ4RywgenpmeFIgfSBmcm9tICcuL3p6ZngnO1xuXG4vKipcbiAqIFp6RlggTXVzaWMgUmVuZGVyZXIgdjIuMC4yIGJ5IEtlaXRoIENsYXJrXG4gKi9cblxuLyoqXG4gKiBAdHlwZWRlZiBDaGFubmVsXG4gKiBAdHlwZSB7QXJyYXkuPE51bWJlcj59XG4gKiBAcHJvcGVydHkge051bWJlcn0gMCAtIENoYW5uZWwgaW5zdHJ1bWVudFxuICogQHByb3BlcnR5IHtOdW1iZXJ9IDEgLSBDaGFubmVsIHBhbm5pbmcgKC0xIHRvICsxKVxuICogQHByb3BlcnR5IHtOdW1iZXJ9IDIgLSBOb3RlXG4gKi9cblxuLyoqXG4gKiBAdHlwZWRlZiBQYXR0ZXJuXG4gKiBAdHlwZSB7QXJyYXkuPENoYW5uZWw+fVxuICovXG5cbi8qKlxuICogQHR5cGVkZWYgSW5zdHJ1bWVudFxuICogQHR5cGUge0FycmF5LjxOdW1iZXI+fSBaekZYIHNvdW5kIHBhcmFtZXRlcnNcbiAqL1xuXG4vKipcbiAqIEdlbmVyYXRlIGEgc29uZ1xuICpcbiAqIEBwYXJhbSB7QXJyYXkuPEluc3RydW1lbnQ+fSBpbnN0cnVtZW50cyAtIEFycmF5IG9mIFp6Rlggc291bmQgcGFyYW1hdGVycy5cbiAqIEBwYXJhbSB7QXJyYXkuPFBhdHRlcm4+fSBwYXR0ZXJucyAtIEFycmF5IG9mIHBhdHRlcm4gZGF0YS5cbiAqIEBwYXJhbSB7QXJyYXkuPE51bWJlcj59IHNlcXVlbmNlIC0gQXJyYXkgb2YgcGF0dGVybiBpbmRleGVzLlxuICogQHBhcmFtIHtOdW1iZXJ9IFtzcGVlZD0xMjVdIC0gUGxheWJhY2sgc3BlZWQgb2YgdGhlIHNvbmcgKGluIEJQTSkuXG4gKiBAcmV0dXJucyB7QXJyYXkuPEFycmF5LjxOdW1iZXI+Pn0gTGVmdCBhbmQgcmlnaHQgY2hhbm5lbCBzYW1wbGUgZGF0YS5cbiAqL1xuXG5leHBvcnQgY29uc3QgenpmeE0gPSAoaW5zdHJ1bWVudHMsIHBhdHRlcm5zLCBzZXF1ZW5jZSwgQlBNID0gMTI1KSA9PiB7XG4gICAgbGV0IGluc3RydW1lbnRQYXJhbWV0ZXJzLFxuICAgICAgICBpLFxuICAgICAgICBqLFxuICAgICAgICBrLFxuICAgICAgICBub3RlLFxuICAgICAgICBzYW1wbGUsXG4gICAgICAgIHBhdHRlcm5DaGFubmVsLFxuICAgICAgICBub3RGaXJzdEJlYXQsXG4gICAgICAgIHN0b3AsXG4gICAgICAgIGluc3RydW1lbnQsXG4gICAgICAgIHBpdGNoLFxuICAgICAgICBhdHRlbnVhdGlvbixcbiAgICAgICAgb3V0U2FtcGxlT2Zmc2V0LFxuICAgICAgICBzYW1wbGVPZmZzZXQsXG4gICAgICAgIG5leHRTYW1wbGVPZmZzZXQsXG4gICAgICAgIHNhbXBsZUJ1ZmZlciA9IFtdLFxuICAgICAgICBsZWZ0Q2hhbm5lbEJ1ZmZlciA9IFtdLFxuICAgICAgICByaWdodENoYW5uZWxCdWZmZXIgPSBbXSxcbiAgICAgICAgY2hhbm5lbEluZGV4ID0gMCxcbiAgICAgICAgcGFubmluZyxcbiAgICAgICAgaGFzTW9yZSA9IDEsXG4gICAgICAgIHNhbXBsZUNhY2hlID0ge30sXG4gICAgICAgIGJlYXRMZW5ndGggPSAoKHp6ZnhSIC8gQlBNKSAqIDYwKSA+PiAyO1xuXG4gICAgLy8gZm9yIGVhY2ggY2hhbm5lbCBpbiBvcmRlciB1bnRpbCB0aGVyZSBhcmUgbm8gbW9yZVxuICAgIGZvciAoOyBoYXNNb3JlOyBjaGFubmVsSW5kZXgrKykge1xuICAgICAgICAvLyByZXNldCBjdXJyZW50IHZhbHVlc1xuICAgICAgICBzYW1wbGVCdWZmZXIgPSBbKGhhc01vcmUgPSBub3RGaXJzdEJlYXQgPSBwaXRjaCA9IG91dFNhbXBsZU9mZnNldCA9IDApXTtcblxuICAgICAgICAvLyBmb3IgZWFjaCBwYXR0ZXJuIGluIHNlcXVlbmNlXG4gICAgICAgIHNlcXVlbmNlLm1hcCgocGF0dGVybkluZGV4LCBzZXF1ZW5jZUluZGV4KSA9PiB7XG4gICAgICAgICAgICAvLyBnZXQgcGF0dGVybiBmb3IgY3VycmVudCBjaGFubmVsLCB1c2UgZW1wdHkgMSBub3RlIHBhdHRlcm4gaWYgbm9uZSBmb3VuZFxuICAgICAgICAgICAgcGF0dGVybkNoYW5uZWwgPSBwYXR0ZXJuc1twYXR0ZXJuSW5kZXhdW2NoYW5uZWxJbmRleF0gfHwgWzAsIDAsIDBdO1xuXG4gICAgICAgICAgICAvLyBjaGVjayBpZiB0aGVyZSBhcmUgbW9yZSBjaGFubmVsc1xuICAgICAgICAgICAgaGFzTW9yZSB8PSAhIXBhdHRlcm5zW3BhdHRlcm5JbmRleF1bY2hhbm5lbEluZGV4XTtcblxuICAgICAgICAgICAgLy8gZ2V0IG5leHQgb2Zmc2V0LCB1c2UgdGhlIGxlbmd0aCBvZiBmaXJzdCBjaGFubmVsXG4gICAgICAgICAgICBuZXh0U2FtcGxlT2Zmc2V0ID1cbiAgICAgICAgICAgICAgICBvdXRTYW1wbGVPZmZzZXQgK1xuICAgICAgICAgICAgICAgIChwYXR0ZXJuc1twYXR0ZXJuSW5kZXhdWzBdLmxlbmd0aCAtIDIgLSAhbm90Rmlyc3RCZWF0KSAqXG4gICAgICAgICAgICAgICAgICAgIGJlYXRMZW5ndGg7XG5cbiAgICAgICAgICAgIC8vIGZvciBlYWNoIGJlYXQgaW4gcGF0dGVybiwgcGx1cyBvbmUgZXh0cmEgaWYgZW5kIG9mIHNlcXVlbmNlXG4gICAgICAgICAgICBmb3IgKFxuICAgICAgICAgICAgICAgIGkgPSAyLCBrID0gb3V0U2FtcGxlT2Zmc2V0O1xuICAgICAgICAgICAgICAgIGkgPFxuICAgICAgICAgICAgICAgIHBhdHRlcm5DaGFubmVsLmxlbmd0aCArIChzZXF1ZW5jZUluZGV4ID09IHNlcXVlbmNlLmxlbmd0aCAtIDEpO1xuICAgICAgICAgICAgICAgIG5vdEZpcnN0QmVhdCA9ICsraVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgLy8gPGNoYW5uZWwtbm90ZT5cbiAgICAgICAgICAgICAgICBub3RlID0gcGF0dGVybkNoYW5uZWxbaV07XG5cbiAgICAgICAgICAgICAgICAvLyBzdG9wIGlmIGRpZmZlcmVudCBpbnN0cnVtZW50IG9yIG5ldyBub3RlXG4gICAgICAgICAgICAgICAgc3RvcCA9IChpbnN0cnVtZW50ICE9IChwYXR0ZXJuQ2hhbm5lbFswXSB8fCAwKSkgfCBub3RlIHwgMDtcblxuICAgICAgICAgICAgICAgIC8vIGZpbGwgYnVmZmVyIHdpdGggc2FtcGxlcyBmb3IgcHJldmlvdXMgYmVhdCwgbW9zdCBjcHUgaW50ZW5zaXZlIHBhcnRcbiAgICAgICAgICAgICAgICBmb3IgKFxuICAgICAgICAgICAgICAgICAgICBqID0gMDtcbiAgICAgICAgICAgICAgICAgICAgaiA8IGJlYXRMZW5ndGggJiYgbm90Rmlyc3RCZWF0O1xuICAgICAgICAgICAgICAgICAgICAvLyBmYWRlIG9mZiBhdHRlbnVhdGlvbiBhdCBlbmQgb2YgYmVhdCBpZiBzdG9wcGluZyBub3RlLCBwcmV2ZW50cyBjbGlja2luZ1xuICAgICAgICAgICAgICAgICAgICBqKysgPiBiZWF0TGVuZ3RoIC0gOTkgJiYgc3RvcFxuICAgICAgICAgICAgICAgICAgICAgICAgPyAoYXR0ZW51YXRpb24gKz0gKGF0dGVudWF0aW9uIDwgMSkgLyA5OSlcbiAgICAgICAgICAgICAgICAgICAgICAgIDogMFxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAvLyBjb3B5IHNhbXBsZSB0byBzdGVyZW8gYnVmZmVycyB3aXRoIHBhbm5pbmdcbiAgICAgICAgICAgICAgICAgICAgc2FtcGxlID1cbiAgICAgICAgICAgICAgICAgICAgICAgICgoMSAtIGF0dGVudWF0aW9uKSAqIHNhbXBsZUJ1ZmZlcltzYW1wbGVPZmZzZXQrK10pIC9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAyIHx8IDA7XG4gICAgICAgICAgICAgICAgICAgIGxlZnRDaGFubmVsQnVmZmVyW2tdID1cbiAgICAgICAgICAgICAgICAgICAgICAgIChsZWZ0Q2hhbm5lbEJ1ZmZlcltrXSB8fCAwKSArIHNhbXBsZSAqIHBhbm5pbmcgLSBzYW1wbGU7XG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0Q2hhbm5lbEJ1ZmZlcltrXSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAocmlnaHRDaGFubmVsQnVmZmVyW2srK10gfHwgMCkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgc2FtcGxlICogcGFubmluZyArXG4gICAgICAgICAgICAgICAgICAgICAgICBzYW1wbGU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gc2V0IHVwIGZvciBuZXh0IG5vdGVcbiAgICAgICAgICAgICAgICBpZiAobm90ZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBzZXQgYXR0ZW51YXRpb25cbiAgICAgICAgICAgICAgICAgICAgYXR0ZW51YXRpb24gPSBub3RlICUgMTtcbiAgICAgICAgICAgICAgICAgICAgcGFubmluZyA9IHBhdHRlcm5DaGFubmVsWzFdIHx8IDA7XG4gICAgICAgICAgICAgICAgICAgIGlmICgobm90ZSB8PSAwKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZ2V0IGNhY2hlZCBzYW1wbGVcbiAgICAgICAgICAgICAgICAgICAgICAgIHNhbXBsZUJ1ZmZlciA9IHNhbXBsZUNhY2hlW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGluc3RydW1lbnQgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0dGVybkNoYW5uZWxbKHNhbXBsZU9mZnNldCA9IDApXSB8fCAwKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgICAgIF0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNhbXBsZUNhY2hlW1tpbnN0cnVtZW50LCBub3RlXV0gfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhZGQgc2FtcGxlIHRvIGNhY2hlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKChpbnN0cnVtZW50UGFyYW1ldGVycyA9IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uaW5zdHJ1bWVudHNbaW5zdHJ1bWVudF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoaW5zdHJ1bWVudFBhcmFtZXRlcnNbMl0gKj1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMiAqKiAoKG5vdGUgLSAxMikgLyAxMikpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHp6ZnhHKC4uLmluc3RydW1lbnRQYXJhbWV0ZXJzKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHVwZGF0ZSB0aGUgc2FtcGxlIG9mZnNldFxuICAgICAgICAgICAgb3V0U2FtcGxlT2Zmc2V0ID0gbmV4dFNhbXBsZU9mZnNldDtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIFtsZWZ0Q2hhbm5lbEJ1ZmZlciwgcmlnaHRDaGFubmVsQnVmZmVyXTtcbn07XG4iLCJleHBvcnQgY29uc3QgT2JsaXF1ZU15c3RpcXVlID0gW1tbMS4zLDAsMjMsLCwuMiwzLDVdLFsxLjUsMCw0ZTMsLCwuMDMsMiwxLjI1LCwsLCwuMDIsNi44LC0uMywsLjVdLFsuNywwLDIxMDAsLCwuMiwzLDMsLCwtNDAwLCwsMl0sWywwLDY1NSwsLC4xMSwyLDEuNjUsLCwsLCwzLjgsLS4xLC4xXV0sW1tbLC0uNSwxMywsLCwsLDEzLCwsLCwsMTMsLCwsLCwxMywsLCwsLDEzLCwsLDE0LCwsLDEzLCwsLCwsMTMsLCwsLCwxMywsLCwsLDEzLCwsLCwsMTMsLCwsMTQsLCwsXSxbMSwuMywxMywsMTMsLDEzLCwxMywsLCwxMywsMTMsLDEzLCwxMywsMTMsLCwsMTMsLDEzLCwxMywsMTMsLDEzLCwxMywsMTMsLDEzLCwxMywsLCwxMywsMTMsLDEzLCwxMywsMTMsLCwsMTMsLDEzLCwxMywsMTMsLDEzLCxdLFsyLDEsLCwsLCwsLCwxMywsLCwsLCwsLCwsLDEzLCwsLCwsLCwsLCwsLCwsLCwsLCwxMywsLCwsLCwsLCwsLDEzLCwsLCwsLCwsLCwsXSxbLC42LCwsLCwxMywsMTgsLDE5LCwsLCwsLCwxOSwsMTgsLCwsMTYsLCwsMTMsLCwsLCwsLCwsMTMsLDE4LCwxOSwsLCwsLCwsMTgsMTksMTgsLCwsMTMsMTQsMTMsLDE2LCwxOCwsMTksLF0sWzMsLTEsLCwxMywsLCwsLCwsLCwsLDEzLCwsLCwsLCwsLCwsLCwsLCwsLCwxMywsLCwsLCwsLCwsLDEzLCwsLCwsLCwsLCwsLCwxMywxMywxMywxM11dLFtbLC0uNSwxMywsLCwsLDEzLCwsLCwsMTMsLCwsLCwxMywsLCwsLDEzLCwsLDE0LCwsLDEzLCwsLCwsMTMsLCwsLCwxMywsLCwsLDEzLCwsLCwsMTMsLCwsMTQsLCwsXSxbMSwuMywxMywsMTMsLDEzLCwxMywsLCwxMywsMTMsLDEzLCwxMywsMTMsLCwsMTMsLDEzLCwxMywsMTMsLDEzLCwxMywsMTMsLDEzLCwxMywsLCwxMywsMTMsLDEzLCwxMywsMTMsLCwsMTMsLDEzLCwxMywsMTMsLDEzLCxdLFsyLDEsLCwsLCwsLCwxMywsLCwsLCwsLCwsLDEzLCwsLCwsLCwsLCwsLCwsLCwsLCwxMywsLCwsLCwsLCwsLDEzLCwsLCwsLCwsLCwsXV1dLFsxLDEsMCwwLDAsMCwxLDBdLCxdXG4iLCIndXNlIHN0cmljdCc7XG5cbmltcG9ydCB7IFRJVExFIH0gZnJvbSAnLi9Db25zdGFudHMnO1xuaW1wb3J0IHsgenpmeCwgenpmeFAsIHp6ZnhYIH0gZnJvbSAnLi9saWIvenpmeCc7XG5pbXBvcnQgeyB6emZ4TSB9IGZyb20gJy4vbGliL3p6ZnhtJztcbmltcG9ydCB7IE9ibGlxdWVNeXN0aXF1ZSB9IGZyb20gJy4vc29uZ3MvT2JsaXF1ZU15c3RpcXVlJztcblxuZXhwb3J0IGNvbnN0IEF1ZGlvID0ge1xuICAgIGluaXQoKSB7XG4gICAgICAgIEF1ZGlvLnJlYWR5VG9QbGF5ID0gZmFsc2U7XG5cbiAgICAgICAgQXVkaW8uY3R4ID0genpmeFg7XG4gICAgICAgIEF1ZGlvLmdhaW5fID0gQXVkaW8uY3R4LmNyZWF0ZUdhaW4oKTtcbiAgICAgICAgQXVkaW8uZ2Fpbl8uY29ubmVjdChBdWRpby5jdHguZGVzdGluYXRpb24pO1xuICAgICAgICB6emZ4LmRlc3RpbmF0aW9uXyA9IEF1ZGlvLmdhaW5fO1xuXG4gICAgICAgIEF1ZGlvLnNob3RndW4gPSBbLDAuMDEsMTQwLDAuMDEsMC4wMiwwLjQ1LDQsMi40MiwwLjEsLTAuMSwsLCwxLjIsLDAuMywwLjA0LDAuOCwwLjAyXTtcbiAgICAgICAgQXVkaW8ucGFnZSA9IFssLDEyMzMsLC4wMSwuMiwxLDEuNDMsLCw1MzksLjEsLCwsLCwuNTEsLjAzLC4wMV07XG4gICAgICAgIEF1ZGlvLnNoZWxsUmVsb2FkID0gWywsNjgsMC4wMSwsMC4xNCwxLDEuNTMsNy41LDAuMSw1MCwwLjAyLC0wLjAxLC0wLjIsMC4xLDAuMiwsMC40NywwLjAxXTtcbiAgICAgICAgQXVkaW8uZGFtYWdlID0gWywsMzkxLCwuMTksLjAxLDIsLjU0LC00LDIwLCwsLCwsLC4wMiwuOV07XG4gICAgICAgIEF1ZGlvLmFsYXJtID0gWywsOTcwLC4xMiwuMjUsLjM1LCwuMzksOC4xLCwxMCwuMSwuMiwsLjEsLCwuNiwuMDksLjEzXTtcbiAgICAgICAgLy8gWywsOTYxLC4wNSwuMDYsMS4xNywxLDQuNjcsLjgsLCwsLC44LC0wLjgsLjEsLjQ5LC42MiwuMDldO1xuICAgICAgICBBdWRpby52aWN0b3J5ID0gWywsNDU0LC4wNiwuODYsLjcxLDIsLjYzLC0wLjcsMS43LC04MywuMDksLjI3LC4zLC4yLCwuMTgsLjk1LC4wMiwuMDJdO1xuICAgICAgICBBdWRpby5zb25nID0genpmeE0oLi4uT2JsaXF1ZU15c3RpcXVlKTtcblxuICAgICAgICAvLyBTYXZlIG91ciBiYWNrZ3JvdW5kIG11c2ljIGluIG9zMTNrLCBmb3IgZnVuIVxuICAgICAgICBsb2NhbFN0b3JhZ2VbYE9TMTNrTXVzaWMsJHtUSVRMRX0gLSBPYmxpcXVlIE15c3RpcXVlYF0gPSBKU09OLnN0cmluZ2lmeShPYmxpcXVlTXlzdGlxdWUpO1xuICAgIH0sXG5cbiAgICB1cGRhdGUoKSB7XG4gICAgICAgIGlmICghQXVkaW8ucmVhZHlUb1BsYXkpIHJldHVybjtcblxuICAgICAgICBpZiAoIUF1ZGlvLm11c2ljUGxheWluZykge1xuICAgICAgICAgICAgLy9BdWRpby5iZ211c2ljbm9kZSA9IHp6ZnhQKC4uLkF1ZGlvLnNvbmcpO1xuICAgICAgICAgICAgLy9BdWRpby5iZ211c2ljbm9kZS5sb29wID0gdHJ1ZTtcbiAgICAgICAgICAgIEF1ZGlvLm11c2ljUGxheWluZyA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgcGxheShzb3VuZCkge1xuICAgICAgICBpZiAoIUF1ZGlvLnJlYWR5VG9QbGF5KSByZXR1cm47XG4gICAgICAgIHp6ZngoLi4uc291bmQpO1xuICAgIH0sXG5cbiAgICAvLyBJdCdzIGltcG9ydGFudCB3ZSBkbyBwYXVzaW5nIGFuZCB1bnBhdXNpbmcgYXMgc3BlY2lmaWMgZXZlbnRzIGFuZCBub3QgaW4gZ2VuZXJhbCB1cGRhdGUoKSxcbiAgICAvLyBiZWNhdXNlIHVwZGF0ZSgpIGlzIHRyaWdnZXJlZCBieSB0aGUgYW5pbWF0aW9uIGZyYW1lIHRyaWdnZXIgd2hpY2ggZG9lcyBub3QgcnVuIGlmIHRoZVxuICAgIC8vIHBhZ2UgaXMgbm90IHZpc2libGUuIChTbywgaWYgeW91IHdhbnQgdGhlIG11c2ljIHRvIGZhZGUgaW4gdGhlIGJhY2tncm91bmQsIGZvciBleGFtcGxlLFxuICAgIC8vIHRoYXQncyBub3QgaGVscGZ1bCBpZiBpdCB3b24ndCB3b3JrIGJlY2F1c2UgeW91IGFyZW4ndCBsb29raW5nIGF0IHRoZSBwYWdlISlcblxuICAgIHBhdXNlKCkge1xuICAgICAgICBBdWRpby5nYWluXy5nYWluLmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKDAsIEF1ZGlvLmN0eC5jdXJyZW50VGltZSArIDEpO1xuICAgIH0sXG5cbiAgICB1bnBhdXNlKCkge1xuICAgICAgICBBdWRpby5nYWluXy5nYWluLmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKDEsIEF1ZGlvLmN0eC5jdXJyZW50VGltZSArIDEpO1xuICAgIH1cbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbmltcG9ydCB7IGdhbWUgfSBmcm9tICcuL0dhbWUnO1xuXG4vKipcbiAqIEh1ZFxuICpcbiAqIEhlYWx0aCBiYXJzLCBhbW1vLCBldGMuXG4gKi9cbmV4cG9ydCBjb25zdCBIdWQgPSB7XG4gICAgaW5pdCgpIHtcbi8vICAgICAgICBIdWQudG9vbHRpcENhbnZhcyA9IG5ldyBDYW52YXMoR0FNRV9XSURUSCwgR0FNRV9IRUlHSFQpO1xuICAgIH0sXG5cbiAgICBkcmF3KCkge1xuICAgICAgICByZXR1cm47XG4gICAgfSxcbi8qXG4gICAgZHJhd1BhZ2VBcnJvdygpIHtcbiAgICAgICAgbGV0IHBhZ2UgPSBIdWQuY2xvc2VzdFBhZ2UoKTtcbiAgICAgICAgaWYgKHBhZ2UpIHtcbiAgICAgICAgICAgIGxldCB2ZWN0b3IgPSB2ZWN0b3JCZXR3ZWVuKGdhbWUucGxheWVyLnBvcywgcGFnZS5wb3MpO1xuICAgICAgICAgICAgbGV0IGFuZ2xlID0gdmVjdG9yMmFuZ2xlKHZlY3Rvcik7XG4gICAgICAgICAgICB2ZWN0b3IubSA9IGNsYW1wKHZlY3Rvci5tIC8gMiwgMTYsIFZpZXdwb3J0LmhlaWdodCAvIDIgLSA1KTtcbiAgICAgICAgICAgIGlmICh2ZWN0b3IubSA+IDY0KSB7XG4gICAgICAgICAgICAgICAgbGV0IHh5ID0gdmVjdG9yQWRkKGdhbWUucGxheWVyLnBvcywgdmVjdG9yKTtcbiAgICAgICAgICAgICAgICBsZXQgYSA9IE1hdGguc2luKGdhbWUuZnJhbWUgLyA2MClcbiAgICAgICAgICAgICAgICBWaWV3cG9ydC5jdHguZ2xvYmFsQWxwaGEgPSBNYXRoLnNpbihnYW1lLmZyYW1lIC8gMjApICogMC4yICsgMC44O1xuICAgICAgICAgICAgICAgIFNwcml0ZS5kcmF3Vmlld3BvcnRTcHJpdGUoU3ByaXRlLnBhZ2VbMl0sIHh5LCBhbmdsZSArIFI5MCk7XG4gICAgICAgICAgICAgICAgVmlld3BvcnQuY3R4Lmdsb2JhbEFscGhhID0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBjbG9zZXN0UGFnZSgpIHtcbiAgICAgICAgbGV0IHBhZ2VzID0gZ2FtZS5lbnRpdGllcy5maWx0ZXIoZW50aXR5ID0+IGVudGl0eS5wYWdlKTtcbiAgICAgICAgbGV0IHBvcyA9IGdhbWUucGxheWVyLnBvcztcbiAgICAgICAgcGFnZXMuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgICAgbGV0IGRpc3QgPSAoKGEucG9zLnggLSBwb3MueCkgKiogMiArIChhLnBvcy55IC0gcG9zLnkpICoqIDIpIC0gKChiLnBvcy54IC0gcG9zLngpICoqIDIgKyAoYi5wb3MueSAtIHBvcy55KSAqKiAyKTtcbiAgICAgICAgICAgIHJldHVybiBkaXN0O1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHBhZ2VzWzBdO1xuICAgIH0sXG5cbiAgICBkcmF3QnVpbGRpbmdIb3Zlcih1dikge1xuICAgICAgICBsZXQgYW5jaG9yID0geyAuLi51diB9O1xuXG4gICAgICAgIGlmIChhbmNob3IudSArIDEwMCA+IFZpZXdwb3J0LndpZHRoKSBhbmNob3IudSAtPSAxMDA7XG4gICAgICAgIGlmIChhbmNob3IudiA+IDgwICsgMTApIGFuY2hvci52IC09IDgwO1xuXG4gICAgICAgIFZpZXdwb3J0LmN0eC5maWxsU3R5bGUgPSAncmdiYSgzMCwgMzAsIDMwLCAwLjkpJztcbiAgICAgICAgVmlld3BvcnQuY3R4LmZpbGxSZWN0KGFuY2hvci51LCBhbmNob3IudiwgMTAwLCA4MCk7XG5cbiAgICAgICAgVmlld3BvcnQuY3R4LnN0cm9rZVN0eWxlID0gJ3JnYmEoOTUsIDIwNSwgMjI4LCAwLjkpJztcbiAgICAgICAgVmlld3BvcnQuY3R4LnN0cm9rZVJlY3QoYW5jaG9yLnUsIGFuY2hvci52LCAxMDAsIDgwKTtcblxuICAgICAgICBUZXh0LmRyYXdUZXh0KFxuICAgICAgICAgICAgVmlld3BvcnQuY3R4LFxuICAgICAgICAgICAgVGV4dC5zcGxpdFBhcmFncmFwaChcbiAgICAgICAgICAgICAgICAnU05JUEVSIFRPV0VSXFxuXFxuJyArXG4gICAgICAgICAgICAgICAgJy0gU1RST05HIFZTIEdST1VORFxcbicgK1xuICAgICAgICAgICAgICAgICctIFdFQUsgVlMgQUlSXFxuJyxcbiAgICAgICAgICAgICAgICAxMDBcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICBhbmNob3IudSArIDQsIGFuY2hvci52ICsgNCxcbiAgICAgICAgICAgIDEsXG4gICAgICAgICAgICBUZXh0LndoaXRlLFxuICAgICAgICAgICAgVGV4dC5zaGFkb3dcbiAgICAgICAgKTtcblxuICAgICAgICAvLyByYW5kb20gbGlnaHRuaW5nIGVmZmVjdCFcbiAgICAgICAgLy9IdWQuZHJhd0xpZ2h0bmluZygzMCwgNjAsIDEyMCwgOTApO1xuICAgICAgICBIdWQuZHJhd0xpZ2h0bmluZygzMCwgNjAsIHV2LnUsIHV2LnYpO1xuICAgIH0sXG5cbiAgICBkcmF3VG9vbHRpcCh1diwgYm9keSwgY29zdCkge1xuICAgICAgICBIdWQudG9vbHRpcENhbnZhcy5jdHguY2xlYXJSZWN0KDAsIDAsIEdBTUVfV0lEVEgsIEdBTUVfSEVJR0hUKTtcblxuICAgICAgICBsZXQgbGluZXMgPSBUZXh0LnNwbGl0UGFyYWdyYXBoKGJvZHksIDEwMCwgMCk7XG4gICAgICAgIGxldCB3ID0gTWF0aC5tYXgoLi4ubGluZXMubWFwKGxpbmUgPT4gbGluZS53KSksIGggPSBsaW5lc1tsaW5lcy5sZW5ndGggLSAxXS52ICsgbGluZXNbbGluZXMubGVuZ3RoIC0gMV0uaDtcbiAgICAgICAgbGV0IHUgPSAzLCB2ID0gMztcblxuICAgICAgICBpZiAoY29zdCkge1xuICAgICAgICAgICAgY29zdCA9IGAke2Nvc3Qub3JlIHx8IDB9QCAgICR7Y29zdC5jcnlzdGFsIHx8IDB9JGA7XG4gICAgICAgICAgICB3ID0gTWF0aC5tYXgodywgVGV4dC5tZWFzdXJlV2lkdGgoY29zdCksIDc1KTtcbiAgICAgICAgICAgIGggKz0gMTA7XG4gICAgICAgIH1cblxuICAgICAgICBIdWQudG9vbHRpcENhbnZhcy5jdHguZmlsbFN0eWxlID0gJyNlYWQ0YWEnO1xuICAgICAgICBIdWQudG9vbHRpcENhbnZhcy5jdHguZmlsbFJlY3QoMCwgMCwgdyArIDYsIGggKyA2KTtcblxuICAgICAgICBIdWQudG9vbHRpcENhbnZhcy5jdHguZmlsbFN0eWxlID0gJyMyNjJiNDQnO1xuICAgICAgICBIdWQudG9vbHRpcENhbnZhcy5jdHguZmlsbFJlY3QoMSwgMSwgdyArIDQsIGggKyA0KTtcblxuICAgICAgICBIdWQudG9vbHRpcENhbnZhcy5jdHguY2xlYXJSZWN0KDAsIGggKyA1LCAxLCAxKTtcblxuICAgICAgICBpZiAoY29zdCkge1xuICAgICAgICAgICAgVGV4dC5kcmF3VGV4dChIdWQudG9vbHRpcENhbnZhcy5jdHgsIGNvc3QsIHUgKyB3IC0gVGV4dC5tZWFzdXJlV2lkdGgoY29zdCksIHYsIDEsIFRleHRbJyNmZWU3NjEnXSwgVGV4dC5zaGFkb3cpO1xuICAgICAgICAgICAgdiArPSAxMDtcbiAgICAgICAgfVxuXG4gICAgICAgIFRleHQuZHJhd1RleHQoSHVkLnRvb2x0aXBDYW52YXMuY3R4LCBsaW5lcywgdSwgdiwgMSwgVGV4dFsnI2VhZDRhYSddLCBUZXh0LnNoYWRvdyk7XG5cbiAgICAgICAgVmlld3BvcnQuY3R4Lmdsb2JhbEFscGhhID0gMC45O1xuICAgICAgICBWaWV3cG9ydC5jdHguZHJhd0ltYWdlKEh1ZC50b29sdGlwQ2FudmFzLmNhbnZhcywgdXYudSwgdXYudiAtIGggLSA2KTtcbiAgICAgICAgVmlld3BvcnQuY3R4Lmdsb2JhbEFscGhhID0gMTtcblxuICAgICAgICAvKlxuXG4gICAgICAgIGxldCB0ZXh0c2l6ZSA9IFRleHQuZHJhd1BhcmFncmFwaChcbiAgICAgICAgICAgIEh1ZC50b29sdGlwQ2FudmFzLmN0eCxcbiAgICAgICAgICAgIGJvZHksXG4gICAgICAgICAgICAyLCAyLFxuICAgICAgICAgICAgMTAwLCAwLFxuICAgICAgICAgICAgMSxcbiAgICAgICAgICAgIFRleHQud2hpdGUsXG4gICAgICAgICAgICBUZXh0LnNoYWRvd1xuICAgICAgICApO1xuXG4gICAgICAgIGxldCBhbmNob3IgPSB7IC4uLnV2IH07XG5cbiAgICAgICAgaWYgKGFuY2hvci51ICsgMTAwID4gVmlld3BvcnQud2lkdGgpIGFuY2hvci51IC09IDEwMDtcbiAgICAgICAgaWYgKGFuY2hvci52ID4gODAgKyAxMCkgYW5jaG9yLnYgLT0gODA7XG5cbiAgICAgICAgVmlld3BvcnQuY3R4LmZpbGxTdHlsZSA9ICdyZ2JhKDMwLCAzMCwgMzAsIDAuOSknO1xuICAgICAgICBWaWV3cG9ydC5jdHguZmlsbFJlY3QoYW5jaG9yLnUsIGFuY2hvci52LCAxMDAsIDgwKTtcblxuICAgICAgICBWaWV3cG9ydC5jdHguc3Ryb2tlU3R5bGUgPSAncmdiYSg5NSwgMjA1LCAyMjgsIDAuOSknO1xuICAgICAgICBWaWV3cG9ydC5jdHguc3Ryb2tlUmVjdChhbmNob3IudSwgYW5jaG9yLnYsIDEwMCwgODApO1xuXG4gICAgICAgIFRleHQuZHJhd1BhcmFncmFwaChcbiAgICAgICAgICAgIFZpZXdwb3J0LmN0eCxcbiAgICAgICAgICAgICdTTklQRVIgVE9XRVJcXG5cXG4nICtcbiAgICAgICAgICAgICctIFNUUk9ORyBWUyBHUk9VTkRcXG4nICtcbiAgICAgICAgICAgICctIFdFQUsgVlMgQUlSXFxuJyxcbiAgICAgICAgICAgIGFuY2hvci51ICsgNCwgYW5jaG9yLnYgKyA0LFxuICAgICAgICAgICAgMTAwIC0gOCwgODAsXG4gICAgICAgICAgICAxLFxuICAgICAgICAgICAgVGV4dC53aGl0ZSxcbiAgICAgICAgICAgIFRleHQuc2hhZG93XG4gICAgICAgICk7XG5cbiAgICAgICAgLy8gcmFuZG9tIGxpZ2h0bmluZyBlZmZlY3QhXG4gICAgICAgIC8vSHVkLmRyYXdMaWdodG5pbmcoMzAsIDYwLCAxMjAsIDkwKTtcbiAgICAgICAgSHVkLmRyYXdMaWdodG5pbmcoMzAsIDYwLCB1di51LCB1di52KTtcblxuICAgIH0sXG5cbiAgICBkcmF3TGlnaHRuaW5nMih4MSwgeTEsIHgyLCB5Mikge1xuICAgICAgICBsZXQgc2VjdGlvbnMgPSAxMDtcbiAgICAgICAgbGV0IHZlY3RvciA9IHZlY3RvckJldHdlZW4oeyB4OiB4MSwgeTogeTEgfSwgeyB4OiB4MiwgeTogeTIgfSk7XG5cbiAgICAgICAgVmlld3BvcnQuY3R4LnN0cm9rZVN0eWxlID0gJ3JnYmEoOTUsIDIwNSwgMjI4LCAxKSc7XG4gICAgICAgIFZpZXdwb3J0LmN0eC5zdHJva2VTdHlsZSA9ICdyZ2JhKDE5MCwgMjM1LCAyNTAsIDEpJztcbiAgICAgICAgVmlld3BvcnQuY3R4LmxpbmVXaWR0aCA9IDE7XG5cbiAgICAgICAgVmlld3BvcnQuY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICBWaWV3cG9ydC5jdHgubW92ZVRvKHgxLCB5MSk7XG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IHNlY3Rpb25zOyBpKyspIHtcbiAgICAgICAgICAgIGxldCB4ID0geDEgKyAoeDIgLSB4MSkgKiBpIC8gc2VjdGlvbnM7XG4gICAgICAgICAgICBsZXQgeSA9IHkxICsgKHkyIC0geTEpICogaSAvIHNlY3Rpb25zO1xuICAgICAgICAgICAgaWYgKGkgPCBzZWN0aW9ucykge1xuICAgICAgICAgICAgICAgIC8veCArPSAoTWF0aC5yYW5kb20oKSAqIChpICsgMykgLSAoaSArIDMpIC8gMikgfCAwO1xuICAgICAgICAgICAgICAgIC8veSArPSAoTWF0aC5yYW5kb20oKSAqIChpICsgMykgLSAoaSArIDMpIC8gMikgfCAwO1xuICAgICAgICAgICAgICAgIGxldCBvZmZzZXQgPSBNYXRoLnJhbmRvbSgpICogMjAgLSAxMDtcbiAgICAgICAgICAgICAgICBpZiAoaSA+IDQgJiYgaSA8IDcpIG9mZnNldCAqPSAxLjU7XG4gICAgICAgICAgICAgICAgeCArPSB2ZWN0b3IueSAqIG9mZnNldDtcbiAgICAgICAgICAgICAgICB5IC09IHZlY3Rvci54ICogb2Zmc2V0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgVmlld3BvcnQuY3R4LmxpbmVUbyh4LCB5KTtcbiAgICAgICAgfVxuICAgICAgICBWaWV3cG9ydC5jdHguc3Ryb2tlKCk7XG4gICAgfSxcblxuICAgIGRyYXdMaWdodG5pbmczKHgxLCB5MSwgeDIsIHkyKSB7XG4gICAgICAgIGlmICghdGhpcy5saWdodG5pbmdPZmZzZXRzKSB7XG4gICAgICAgICAgICB0aGlzLmxpZ2h0bmluZ09mZnNldHMgPSBBcnJheSg4KS5maWxsKCkubWFwKChzbG90LCBpbmRleCkgPT4gKHtcbiAgICAgICAgICAgICAgICBwb3M6IChpbmRleCArIDEpICogMTAsXG4gICAgICAgICAgICAgICAgdmFsdWU6IE1hdGgucmFuZG9tKCkgKiAyIC0gMVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5saWdodG5pbmdPZmZzZXRzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCB2ZWN0b3IgPSB2ZWN0b3JCZXR3ZWVuKHsgeDogeDEsIHk6IHkxIH0sIHsgeDogeDIsIHk6IHkyIH0pO1xuXG4gICAgICAgIFZpZXdwb3J0LmN0eC5zdHJva2VTdHlsZSA9ICdyZ2JhKDk1LCAyMDUsIDIyOCwgMSknO1xuICAgICAgICBWaWV3cG9ydC5jdHguc3Ryb2tlU3R5bGUgPSAncmdiYSgxOTAsIDIzNSwgMjUwLCAxKSc7XG4gICAgICAgIFZpZXdwb3J0LmN0eC5saW5lV2lkdGggPSAxO1xuXG4gICAgICAgIFZpZXdwb3J0LmN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgVmlld3BvcnQuY3R4Lm1vdmVUbyh4MSwgeTEpO1xuICAgICAgICBmb3IgKGxldCBvZmZzZXQgb2YgdGhpcy5saWdodG5pbmdPZmZzZXRzKSB7XG4gICAgICAgICAgICAvLyBGaXJzdCBnZXQgdGhlICh4LHkpIGFsb25nIHRoZSBkaXJlY3QgbGluZSB0byB0aGUgdGFyZ2V0XG4gICAgICAgICAgICBsZXQgeCA9IHgxICsgdmVjdG9yLnggKiB2ZWN0b3IubSAqIG9mZnNldC5wb3MgLyAxMDA7XG4gICAgICAgICAgICBsZXQgeSA9IHkxICsgdmVjdG9yLnkgKiB2ZWN0b3IubSAqIG9mZnNldC5wb3MgLyAxMDA7XG5cbiAgICAgICAgICAgIC8vIE5vdyB3ZSBcIm9mZnNldFwiIGl0IChwZXJwZW5kaWN1bGFyIHRvIHRoZSBkaXJlY3QgbGluZSkgYnkgdGhlIHNwZWNpZmllZCB2YWx1ZVxuICAgICAgICAgICAgeCArPSB2ZWN0b3IueSAqIG9mZnNldC52YWx1ZSAqIDEwO1xuICAgICAgICAgICAgeSAtPSB2ZWN0b3IueCAqIG9mZnNldC52YWx1ZSAqIDEwO1xuXG4gICAgICAgICAgICBWaWV3cG9ydC5jdHgubGluZVRvKHgsIHkpO1xuICAgICAgICB9XG4gICAgICAgIFZpZXdwb3J0LmN0eC5saW5lVG8oeDIsIHkyKTtcbiAgICAgICAgVmlld3BvcnQuY3R4LnN0cm9rZSgpO1xuXG4gICAgICAgIGZvciAobGV0IG9mZnNldCBvZiB0aGlzLmxpZ2h0bmluZ09mZnNldHMpIHtcbiAgICAgICAgICAgIG9mZnNldC5wb3MgKz0gNTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5saWdodG5pbmdPZmZzZXRzWzBdLnBvcyA+IDEwKSB7XG4gICAgICAgICAgICB0aGlzLmxpZ2h0bmluZ09mZnNldHMudW5zaGlmdCh7IHBvczogMSwgdmFsdWU6IE1hdGgucmFuZG9tKCkgKiAyIC0gMSB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5saWdodG5pbmdPZmZzZXRzW3RoaXMubGlnaHRuaW5nT2Zmc2V0cy5sZW5ndGggLSAxXS5wb3MgPiA5OSkge1xuICAgICAgICAgICAgdGhpcy5saWdodG5pbmdPZmZzZXRzLnBvcCgpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIGRyYXdMaWdodG5pbmcoeDEsIHkxLCB4MiwgeTIpIHtcbiAgICAgICAgbGV0IHZlY3RvciA9IHZlY3RvckJldHdlZW4oeyB4OiB4MSwgeTogeTEgfSwgeyB4OiB4MiwgeTogeTIgfSk7XG5cbiAgICAgICAgVmlld3BvcnQuY3R4LnN0cm9rZVN0eWxlID0gJ3JnYmEoOTUsIDIwNSwgMjI4LCAxKSc7XG4gICAgICAgIFZpZXdwb3J0LmN0eC5zdHJva2VTdHlsZSA9ICdyZ2JhKDE5MCwgMjM1LCAyNTAsIDEpJztcbiAgICAgICAgVmlld3BvcnQuY3R4LmxpbmVXaWR0aCA9IDE7XG4gICAgICAgIFZpZXdwb3J0LmN0eC5maWxsU3R5bGUgPSAncmdiYSgxOTAsIDIzNSwgMjUwLCAxKSc7XG5cbi8vICAgICAgICBWaWV3cG9ydC5jdHguYmVnaW5QYXRoKCk7XG4vLyAgICAgICAgVmlld3BvcnQuY3R4Lm1vdmVUbyh4MSwgeTEpO1xuICAgICAgICBsZXQgb2Zmc2V0ID0gMDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2ZWN0b3IubTsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgeCA9IHgxICsgdmVjdG9yLnggKiBpO1xuICAgICAgICAgICAgbGV0IHkgPSB5MSArIHZlY3Rvci55ICogaTtcblxuICAgICAgICAgICAgbGV0IGNhbGMgPSBNYXRoLnJhbmRvbSgpO1xuICAgICAgICAgICAgaWYgKGNhbGMgPCAwLjMzKSB7XG4gICAgICAgICAgICAgICAgb2Zmc2V0LS07XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNhbGMgPCAwLjY2KSB7XG4gICAgICAgICAgICAgICAgb2Zmc2V0Kys7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxldCBjaG9rZSA9IDAuOTggLSAoaSAvIHZlY3Rvci5tKTtcblxuICAgICAgICAgICAgeCArPSB2ZWN0b3IueSAqIG9mZnNldCAqIGNob2tlO1xuICAgICAgICAgICAgeSAtPSB2ZWN0b3IueCAqIG9mZnNldCAqIGNob2tlO1xuXG4gICAgICAgICAgICBWaWV3cG9ydC5jdHguZmlsbFJlY3QoeCwgeSwgMSwgMSk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgZHJhd0NvbnRyb2xQYW5lbCgpIHtcbiAgICAgICAgbGV0IGhlaWdodCA9IDQ0O1xuICAgICAgICBWaWV3cG9ydC5jdHguZmlsbFN0eWxlID0gJyMxODE0MjUnO1xuICAgICAgICBWaWV3cG9ydC5jdHguZmlsbFJlY3QoMCwgVmlld3BvcnQuaGVpZ2h0IC0gaGVpZ2h0LCBWaWV3cG9ydC53aWR0aCwgaGVpZ2h0KTtcblxuICAgICAgICBWaWV3cG9ydC5jdHguZmlsbFN0eWxlID0gJyNiNTUwODgnO1xuICAgICAgICBWaWV3cG9ydC5jdHguZmlsbFJlY3QoMCwgVmlld3BvcnQuaGVpZ2h0IC0gaGVpZ2h0IC0gMSwgVmlld3BvcnQud2lkdGgsIDEpO1xuXG4gICAgICAgIFZpZXdwb3J0LmN0eC5maWxsU3R5bGUgPSAnI2Y2NzU3YSc7XG4gICAgICAgIFZpZXdwb3J0LmN0eC5maWxsUmVjdCgwLCBWaWV3cG9ydC5oZWlnaHQgLSBoZWlnaHQgLSAyLCBWaWV3cG9ydC53aWR0aCwgMSk7XG5cbiAgICAgICAgVmlld3BvcnQuY3R4LmZpbGxTdHlsZSA9ICcjYzBjYmRjJztcbiAgICAgICAgVmlld3BvcnQuY3R4LmZpbGxSZWN0KDAsIFZpZXdwb3J0LmhlaWdodCAtIGhlaWdodCAtIDMsIFZpZXdwb3J0LndpZHRoLCAxKTtcbiAgICB9XG4gICAgKi9cbn07XG4iLCIvLyBodHRwczovL2pvbm55Lm1vcnJpbGwubWUvZW4vYmxvZy9nYW1lZGV2LWhvdy10by1pbXBsZW1lbnQtYS1jYW1lcmEtc2hha2UtZWZmZWN0L1xuXG4vKipcbiAqIFNoYWtlIGl0IGJhYnkuXG4gKi9cbmV4cG9ydCBjbGFzcyBTY3JlZW5TaGFrZSB7XG4gICAgY29uc3RydWN0b3IoZnJhbWVzLCBoQW1wbGl0dWRlLCB2QW1wbGl0dWRlKSB7XG4gICAgICAgIHRoaXMuZnJhbWVzID0gZnJhbWVzO1xuICAgICAgICB0aGlzLmhBbXBsaXR1ZGUgPSBoQW1wbGl0dWRlO1xuICAgICAgICB0aGlzLnZBbXBsaXR1ZGUgPSB2QW1wbGl0dWRlO1xuICAgICAgICB0aGlzLmhTYW1wbGVzID0gW107XG4gICAgICAgIHRoaXMudlNhbXBsZXMgPSBbXTtcblxuICAgICAgICB2YXIgc2FtcGxlQ291bnQgPSBmcmFtZXMgLyAyO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNhbXBsZUNvdW50OyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuaFNhbXBsZXMucHVzaChNYXRoLnJhbmRvbSgpICogMiAtIDEpO1xuICAgICAgICAgICAgdGhpcy52U2FtcGxlcy5wdXNoKE1hdGgucmFuZG9tKCkgKiAyIC0gMSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5mcmFtZSA9IC0xO1xuICAgIH1cblxuICAgIHVwZGF0ZSgpIHtcbiAgICAgICAgdGhpcy5mcmFtZSsrO1xuICAgICAgICBpZiAodGhpcy5mcmFtZSA+PSB0aGlzLmZyYW1lcykge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy9sZXQgcyA9ICh0aGlzLmZyYW1lcyAvIDEwKSAqICh0aGlzLmZyYW1lIC8gdGhpcy5mcmFtZXMpO1xuICAgICAgICBsZXQgcyA9IHRoaXMuZnJhbWUgLyAyO1xuICAgICAgICBsZXQgczAgPSBzIHwgMDtcbiAgICAgICAgbGV0IHMxID0gczAgKyAxO1xuICAgICAgICBsZXQgZGVjYXkgPSAxIC0gdGhpcy5mcmFtZSAvIHRoaXMuZnJhbWVzO1xuXG4gICAgICAgIHRoaXMueCA9XG4gICAgICAgICAgICB0aGlzLmhBbXBsaXR1ZGUgKlxuICAgICAgICAgICAgZGVjYXkgKlxuICAgICAgICAgICAgKHRoaXMuaFNhbXBsZXNbczBdICtcbiAgICAgICAgICAgICAgICAocyAtIHMwKSAqICh0aGlzLmhTYW1wbGVzW3MxXSAtIHRoaXMuaFNhbXBsZXNbczBdKSk7XG4gICAgICAgIHRoaXMueSA9XG4gICAgICAgICAgICB0aGlzLnZBbXBsaXR1ZGUgKlxuICAgICAgICAgICAgZGVjYXkgKlxuICAgICAgICAgICAgKHRoaXMudlNhbXBsZXNbczBdICtcbiAgICAgICAgICAgICAgICAocyAtIHMwKSAqICh0aGlzLnZTYW1wbGVzW3MxXSAtIHRoaXMudlNhbXBsZXNbczBdKSk7XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgU0NSRUVOX1dJRFRILCBTQ1JFRU5fSEVJR0hUIH0gZnJvbSAnLi9Db25zdGFudHMnO1xuaW1wb3J0IHsgVmlld3BvcnQgfSBmcm9tICcuL1ZpZXdwb3J0JztcbmltcG9ydCB7IFRleHQgfSBmcm9tICcuL1RleHQnO1xuXG5leHBvcnQgY29uc3QgU2NyZWVuID0ge1xuICAgIGluaXQoKSB7XG4gICAgICAgIHRoaXMuc2NyZWVuID0gW107XG4gICAgICAgIGZvciAobGV0IHkgPSAwOyB5IDwgU0NSRUVOX0hFSUdIVDsgeSsrKSB7XG4gICAgICAgICAgICB0aGlzLnNjcmVlbi5wdXNoKFtdKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNsZWFyKCk7XG4gICAgfSxcblxuICAgIGNsZWFyKCkge1xuICAgICAgICBmb3IgKGxldCB5ID0gMDsgeSA8IFNDUkVFTl9IRUlHSFQ7IHkrKykge1xuICAgICAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCBTQ1JFRU5fV0lEVEg7IHgrKykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2NyZWVuW3ldW3hdID0gJyAnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcblxuICAgIHdyaXRlKHgsIHksIHRleHQpIHtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHRleHQpKSB0ZXh0ID0gW3RleHRdO1xuXG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGV4dC5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0ZXh0W2pdLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zY3JlZW5beSArIGpdW3ggKyBpXSA9IHRleHRbal1baV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgZHJhd1RvVmlld3BvcnQoKSB7XG4gICAgICAgIGxldCB0ZXh0ID0gdGhpcy5zY3JlZW4ubWFwKHJvdyA9PiByb3cuam9pbignJykpLmpvaW4oJ1xcbicpO1xuXG4gICAgICAgIFRleHQuZHJhd1RleHQoXG4gICAgICAgICAgICBWaWV3cG9ydC5jdHgsXG4gICAgICAgICAgICBUZXh0LnNwbGl0UGFyYWdyYXBoKHRleHQsIFZpZXdwb3J0LndpZHRoKSxcbiAgICAgICAgICAgIDAsIDAsXG4gICAgICAgICAgICAxLFxuICAgICAgICAgICAgVGV4dC50ZXJtaW5hbCwgVGV4dC50ZXJtaW5hbF9zaGFkb3dcbiAgICAgICAgKTtcbiAgICB9XG59O1xuIiwiaW1wb3J0IHsgU2NyZWVuIH0gZnJvbSAnLi9TY3JlZW4nO1xuaW1wb3J0IHsgZ2FtZSB9IGZyb20gJy4vR2FtZSc7XG5pbXBvcnQgeyBQTEFZX1NQRUVEUyB9IGZyb20gJy4vQ29uc3RhbnRzJztcbmltcG9ydCB7IElucHV0IH0gZnJvbSAnLi9JbnB1dCc7XG5cbmV4cG9ydCBjbGFzcyBNYWluTWVudSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgfVxuXG4gICAgdXBkYXRlKCkge1xuICAgICAgICBzd2l0Y2ggKElucHV0Lmxhc3RLZXlQcmVzc2VkKCkudG9VcHBlckNhc2UoKSkge1xuICAgICAgICAgICAgY2FzZSAnUCc6XG4gICAgICAgICAgICAgICAgSW5wdXQuY29uc3VtZSgpO1xuICAgICAgICAgICAgICAgIGdhbWUuc3RhcnRTZXNzaW9uKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdMJzpcbiAgICAgICAgICAgICAgICBJbnB1dC5jb25zdW1lKCk7XG4gICAgICAgICAgICAgICAgZ2FtZS5wbGF5U3BlZWQgPSAoZ2FtZS5wbGF5U3BlZWQgKyAxKSAlIFBMQVlfU1BFRURTLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ0knOlxuICAgICAgICAgICAgICAgIElucHV0LmNvbnN1bWUoKTtcbiAgICAgICAgICAgICAgICBnYW1lLnNob3dJbnN0cnVjdGlvbnMoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ0UnOlxuICAgICAgICAgICAgICAgIElucHV0LmNvbnN1bWUoKTtcbiAgICAgICAgICAgICAgICBnYW1lLnNob3dJbnN0cnVjdGlvbnMoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGRyYXcoKSB7XG4gICAgICAgIGxldCB2ZXJzaW9uID0gJz8nO1xuICAgICAgICBsZXQgdGVybWluYWwgPSAnPyc7XG5cbiAgICAgICAgbGV0IGhpZ2hTY29yZXMgPSBbXG4gICAgICAgICAgICBgMSkgNjAwMCAgQm9iYCxcbiAgICAgICAgICAgIGAyKSA2MDAwICBUb21gLFxuICAgICAgICAgICAgYDMpIDQwMDAgIFdheW5lYCxcbiAgICAgICAgICAgIGBgLFxuICAgICAgICAgICAgYGBcbiAgICAgICAgXTtcblxuICAgICAgICBTY3JlZW4uY2xlYXIoKTtcbiAgICAgICAgU2NyZWVuLndyaXRlKDAsIDAsIFtcbiAgICAgICAgICAgIGAgICAgICAgICAgICAgICBMTCAgICAgICAgICAgICAgICAgICAgIGRkICAgICAgIGRkYCxcbiAgICAgICAgICAgIGAgICAgICAgICAgICAgICBMTCAgICAgICAgICAgICAgICAgICAgIGRkICAgICAgIGRkICAgICAgICAgICAgICAgICAgICAgIHRtYCxcbiAgICAgICAgICAgIGAgICAgICAgICAgICAgICBMTCAgICAgICAgIGFhYWEgICAgIGRkZGRkICAgIGRkZGRkICAgIGVlZWUgICBycnJycnJyYCxcbiAgICAgICAgICAgIGAgICAgICAgICAgICAgICBMTCAgICAgICAgYWEgIGFhICAgZGQgIGRkICAgZGQgIGRkICAgZWUgIGVlICByciAgICBycmAsXG4gICAgICAgICAgICBgICAgICAgICAgICAgICAgTEwgICAgICAgIGFhICBhYSAgIGRkICBkZCAgIGRkICBkZCAgIGVlZWVlZSAgcnJgLFxuICAgICAgICAgICAgYCAgICAgICAgICAgICAgIExMICAgICAgICBhYSAgYWEgICBkZCAgZGQgICBkZCAgZGQgICBlZSAgICAgIHJyYCxcbiAgICAgICAgICAgIGAgICAgICAgICAgICAgICBMTExMTExMTCAgIGFhYSBhYSAgIGRkZCBkZCAgIGRkZCBkZCAgIGVlZWUgICBycmAsXG4gICAgICAgICAgICBgYCxcbiAgICAgICAgICAgIGAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWZXJzaW9uOiAgICAke3ZlcnNpb259YCxcbiAgICAgICAgICAgIGAoYykgMTk4MiwgMTk4MyBZYWhvbyBTb2Z0d2FyZSAgICAgICAgICBUZXJtaW5hbDogICAke3Rlcm1pbmFsfWAsXG4gICAgICAgICAgICBgMTA5NzAgQXNodG9uIEF2ZS4gIFN1aXRlIDMxMiAgICAgICAgICAgUGxheSBzcGVlZDogJHtnYW1lLnBsYXlTcGVlZCArIDF9IC8gJHtQTEFZX1NQRUVEUy5sZW5ndGh9YCxcbiAgICAgICAgICAgIGBMb3MgQW5nZWxlcywgQ2EgIDkwMDI0ICAgICAgICAgICAgICAgICBNb3ZlID0g4oaR4oaT4oaQ4oaSL1dBU0QsIEp1bXAgPSBTcGFjZSxgLFxuICAgICAgICAgICAgYCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0b3AgPSBPdGhlcmAsXG4gICAgICAgICAgICBgYCxcbiAgICAgICAgICAgIGBQID0gUGxheSBnYW1lICAgICAgICAgICAgICAgICAgICAgICAgICBIaWdoIFNjb3Jlc2AsXG4gICAgICAgICAgICBgTCA9IENoYW5nZSBsZXZlbCBvZiBkaWZmaWN1bHR5ICAgICAgICAgJHtoaWdoU2NvcmVzWzBdfWAsXG4gICAgICAgICAgICBgQyA9IENvbmZpZ3VyZSBMYWRkZXIgICAgICAgICAgICAgICAgICAgJHtoaWdoU2NvcmVzWzFdfWAsXG4gICAgICAgICAgICBgSSA9IEluc3RydWN0aW9ucyAgICAgICAgICAgICAgICAgICAgICAgJHtoaWdoU2NvcmVzWzJdfWAsXG4gICAgICAgICAgICBgRSA9IEV4aXQgTGFkZGVyICAgICAgICAgICAgICAgICAgICAgICAgJHtoaWdoU2NvcmVzWzNdfWAsXG4gICAgICAgICAgICBgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtoaWdoU2NvcmVzWzRdfWAsXG4gICAgICAgICAgICBgYCxcbiAgICAgICAgICAgIGBFbnRlciBvbmUgb2YgdGhlIGFib3ZlOmBcbiAgICAgICAgXSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgU2NyZWVuIH0gZnJvbSAnLi9TY3JlZW4nO1xuaW1wb3J0IHsgZ2FtZSB9IGZyb20gJy4vR2FtZSc7XG5pbXBvcnQgeyBJbnB1dCB9IGZyb20gJy4vSW5wdXQnO1xuXG5leHBvcnQgY2xhc3MgSW5zdHJ1Y3Rpb25zTWVudSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgfVxuXG4gICAgdXBkYXRlKCkge1xuICAgICAgICBpZiAoSW5wdXQubGFzdEtleVByZXNzZWQoKS50b1VwcGVyQ2FzZSgpICE9PSAnJykge1xuICAgICAgICAgICAgSW5wdXQuY29uc3VtZSgpO1xuICAgICAgICAgICAgZ2FtZS5zaG93TWFpbk1lbnUoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGRyYXcoKSB7XG4gICAgICAgIFNjcmVlbi5jbGVhcigpO1xuICAgICAgICBTY3JlZW4ud3JpdGUoMCwgMCwgW1xuICAgICAgICAgICAgYFlvdSBhcmUgYSBMYWQgdHJhcHBlZCBpbiBhIG1hemUuICBZb3VyIG1pc3Npb24gaXMgaXMgdG8gZXhwbG9yZSB0aGVgLFxuICAgICAgICAgICAgYGRhcmsgY29ycmlkb3JzIG5ldmVyIGJlZm9yZSBzZWVuIGJ5IGh1bWFuIGV5ZXMgYW5kIGZpbmQgaGlkZGVuYCxcbiAgICAgICAgICAgIGB0cmVhc3VyZXMgYW5kIHJpY2hlcy5gLFxuICAgICAgICAgICAgYGAsXG4gICAgICAgICAgICBgWW91IGNvbnRyb2wgTGFkIGJ5IHR5cGluZyB0aGUgZGlyZWN0aW9uIGJ1dHRvbnMgYW5kIGp1bXBpbmcgYnlgLFxuICAgICAgICAgICAgYHR5cGluZyBTUEFDRS4gIEJ1dCBiZXdhcmUgb2YgdGhlIGZhbGxpbmcgcm9ja3MgY2FsbGVkIERlciByb2Nrcy5gLFxuICAgICAgICAgICAgYFlvdSBtdXN0IGZpbmQgYW5kIGdyYXNwIHRoZSB0cmVhc3VyZXMgKHNob3duIGFzICQpIEJFRk9SRSB0aGVgLFxuICAgICAgICAgICAgYGJvbnVzIHRpbWUgcnVucyBvdXQuYCxcbiAgICAgICAgICAgIGBgLFxuICAgICAgICAgICAgYEEgbmV3IExhZCB3aWxsIGJlIGF3YXJkZWQgZm9yIGV2ZXJ5IDEwLDAwMCBwb2ludHMuYCxcbiAgICAgICAgICAgIGBFeHRyYSBwb2ludHMgYXJlIGF3YXJkZWQgZm9yIHRvdWNoaW5nIHRoZSBnb2xkYCxcbiAgICAgICAgICAgIGBzdGF0dWVzIChzaG93biBhcyAmKS4gIFlvdSB3aWxsIHJlY2VpdmUgdGhlIGJvbnVzIHRpbWUgcG9pbnRzYCxcbiAgICAgICAgICAgIGB0aGF0IGFyZSBsZWZ0IHdoZW4geW91IGhhdmUgZmluaXNoZWQgdGhlIGxldmVsLmAsXG4gICAgICAgICAgICBgYCxcbiAgICAgICAgICAgIGBUeXBlIGFuIEVTQ2FwZSB0byBwYXVzZSB0aGUgZ2FtZS5gLFxuICAgICAgICAgICAgYGAsXG4gICAgICAgICAgICBgUmVtZW1iZXIsIHRoZXJlIGlzIG1vcmUgdGhhbiBvbmUgd2F5IHRvIHNraW4gYSBjYXQuIChDaHVtKWAsXG4gICAgICAgICAgICBgYCxcbiAgICAgICAgICAgIGBHb29kIGx1Y2sgTGFkLmAsXG4gICAgICAgICAgICBgYCxcbiAgICAgICAgICAgIGBgLFxuICAgICAgICAgICAgYGAsXG4gICAgICAgICAgICBgVHlwZSBSRVRVUk4gdG8gcmV0dXJuIHRvIG1haW4gbWVudTpgXG4gICAgICAgIF0pO1xuICAgIH1cbn1cbiIsIlxuLy8gVGhpcyBpcyBvdXIgbGlzdCBvZiBTVEFURVMuIEVhY2ggZW50aXR5IHN0YXJ0cyBvdXQgaW4gb25lIG9mIHRoZXNlIHN0YXRlcyBhbmQgY2FuIG1vdmUgYmV0d2VlblxuLy8gdGhlbSBiYXNlZCBvbiBldmVudHMgdGhhdCBoYXBwZW4gaW4gdGhlIGdhbWUuIChOb3RlIHRoYXQgc29tZSBvZiB0aGVzZSBhcmUgZGlyZWN0aW9ucywgYnV0XG4vLyBzaW5jZSBhbiBlbnRpdHkga2VlcHMgbW92aW5nIGluIHRoZSBkaXJlY3Rpb24gaXQgaXMgZ29pbmcgdW5sZXNzIHN0b3BwZWQsIGRpcmVjdGlvbnMgYXJlXG4vLyBzdGF0ZXMgaW4gdGhpcyBnYW1lLilcbmV4cG9ydCBjb25zdCBTdGF0ZSA9IHtcbiAgICBTVE9QUEVEOiAgICAxLCAgICAgICAgIC8vIFN0YW5kaW5nIHN0aWxsXG4gICAgVVA6ICAgICAgICAgMiwgICAgICAgICAvLyBNb3ZpbmcgdXAgKHBsYXllciBvbmx5KVxuICAgIExFRlQ6ICAgICAgIDMsICAgICAgICAgLy8gTW92aW5nIGxlZnRcbiAgICBET1dOOiAgICAgICA0LCAgICAgICAgIC8vIE1vdmluZyBkb3duXG4gICAgUklHSFQ6ICAgICAgNSwgICAgICAgICAvLyBNb3ZpbmcgcmlnaHRcbiAgICBGQUxMSU5HOiAgICA2LCAgICAgICAgIC8vIEZhbGxpbmdcbiAgICBTVEFSVF9KVU1QOiA3LCAgICAgICAgIC8vIEFib3V0IHRvIHN0YXJ0IGEganVtcCAocGxheWVyIG9ubHkpXG4gICAgSlVNUF9MRUZUOiAgOCwgICAgICAgICAvLyBKdW1waW5nIGxlZnQgKHBsYXllciBvbmx5KVxuICAgIEpVTVBfUklHSFQ6IDksICAgICAgICAgLy8gSnVtcGluZyByaWdodCAocGxheWVyIG9ubHkpXG4gICAgSlVNUF9VUDogICAgMTAsICAgICAgICAvLyBKdW1waW5nIHN0cmFpZ2h0IHVwIChwbGF5ZXIgb25seSlcbiAgICBEWUlORzogICAgICAxMSwgICAgICAgIC8vIER5aW5nICh1c2VkIGFzIGEgZGVhdGggYW5pbWF0aW9uKVxuICAgIERFQUQ6ICAgICAgIDEyICAgICAgICAgLy8gRGVhZCAoZm9yIHBsYXllciwgcmVzdGFydCBsZXZlbDsgZm9yIHJvY2ssIGRpc2FwcGVhcilcbn07XG5cbmV4cG9ydCBjb25zdCBKVU1QX0ZSQU1FUyA9IHtcbiAgICBbU3RhdGUuSlVNUF9SSUdIVF06IFtcbiAgICAgICAgeyB4OiAxLCB5OiAtMSB9LFxuICAgICAgICB7IHg6IDEsIHk6IC0xIH0sXG4gICAgICAgIHsgeDogMSwgeTogMCB9LFxuICAgICAgICB7IHg6IDEsIHk6IDAgfSxcbiAgICAgICAgeyB4OiAxLCB5OiAxIH0sXG4gICAgICAgIHsgeDogMSwgeTogMSB9XG4gICAgXSxcbiAgICBbU3RhdGUuSlVNUF9MRUZUXTogW1xuICAgICAgICB7IHg6IC0xLCB5OiAtMSB9LFxuICAgICAgICB7IHg6IC0xLCB5OiAtMSB9LFxuICAgICAgICB7IHg6IC0xLCB5OiAwIH0sXG4gICAgICAgIHsgeDogLTEsIHk6IDAgfSxcbiAgICAgICAgeyB4OiAtMSwgeTogMSB9LFxuICAgICAgICB7IHg6IC0xLCB5OiAxIH1cbiAgICBdLFxuICAgIFtTdGF0ZS5KVU1QX1VQXTogW1xuICAgICAgICB7IHg6IDAsIHk6IC0xIH0sXG4gICAgICAgIHsgeDogMCwgeTogLTEgfSxcbiAgICAgICAgeyB4OiAwLCB5OiAwIH0sXG4gICAgICAgIHsgeDogMCwgeTogMSB9LFxuICAgICAgICB7IHg6IDAsIHk6IDEgfSxcbiAgICAgICAgeyB4OiAwLCB5OiAwIH1cbiAgICBdLFxufTtcbiIsImltcG9ydCB7IFN0YXRlLCBKVU1QX0ZSQU1FUyB9IGZyb20gJy4vQmVoYXZpb3InO1xuaW1wb3J0IHsgTEVWRUxfQ09MUyB9IGZyb20gJy4vQ29uc3RhbnRzJztcblxuZXhwb3J0IGNsYXNzIEVudGl0eSB7XG4gICAgYXBwbHlNb3ZlbWVudChmaWVsZCkge1xuICAgICAgICBsZXQgcmVwZWF0ID0gZmFsc2U7XG5cbiAgICAgICAgLy8gVGhpcyBtZXRob2QgY29udGFpbnMgZ2VuZXJpYyBcIm1vdmVtZW50XCIgYXBwbGljYXRpb24gZm9yIGFsbCBlbnRpdGllcywgaW5jbHVkaW5nXG4gICAgICAgIC8vIExhZCAocGxheWVyKSBhbmQgRGVyIFJvY2tzIChlbmVtaWVzKS4gVGhpbmdzIGxpa2UgZmFsbGluZywgbW92aW5nIGxlZnQvcmlnaHQsIGV0Yy4sXG4gICAgICAgIC8vIHdvcmsgdGhlIHNhbWUgZm9yIGJvdGguXG4gICAgICAgIC8vXG4gICAgICAgIC8vIChUaGVyZSdzIGEgYnVuY2ggb2YganVtcCBsb2dpYyBpbiBoZXJlIHRvbywgYW5kIG1vdmluZyBVUCwgd2hpY2ggcmVhbGx5IG9ubHkgYXBwbGllc1xuICAgICAgICAvLyB0byBwbGF5ZXJzLCBidXQgdGhhdCdzIE9LIC0tIERlciBSb2NrcyBqdXN0IHdvbid0IGF0dGVtcHQgdGhvc2UgYWN0aW9ucy4pXG5cbiAgICAgICAgaWYgKHRoaXMubmV4dFN0YXRlKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHRoaXMuc3RhdGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlIFN0YXRlLlNUT1BQRUQ6XG4gICAgICAgICAgICAgICAgY2FzZSBTdGF0ZS5MRUZUOlxuICAgICAgICAgICAgICAgIGNhc2UgU3RhdGUuUklHSFQ6XG4gICAgICAgICAgICAgICAgICAgIGlmIChbU3RhdGUuTEVGVCwgU3RhdGUuUklHSFQsIFN0YXRlLlNUT1BQRURdLmluY2x1ZGVzKHRoaXMubmV4dFN0YXRlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IHRoaXMubmV4dFN0YXRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0U3RhdGUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICBjYXNlIFN0YXRlLlVQOlxuICAgICAgICAgICAgICAgIGNhc2UgU3RhdGUuRE9XTjpcbiAgICAgICAgICAgICAgICAgICAgLy8gTm9ybWFsXG4gICAgICAgICAgICAgICAgICAgIGlmIChbU3RhdGUuTEVGVCwgU3RhdGUuUklHSFRdLmluY2x1ZGVzKHRoaXMubmV4dFN0YXRlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IHRoaXMubmV4dFN0YXRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0U3RhdGUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5uZXh0U3RhdGUgPT09IFN0YXRlLlNUQVJUX0pVTVApIHtcbiAgICAgICAgICAgIC8vIFNwZWNpYWwgY2FzZTogdGhlIHVzZXIgd2FudHMgdG8ganVtcCFcbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAvLyBJZiB0aGUgcGxheWVyIGlzIHN0YW5kaW5nIG9uIHNvbWV0aGluZyBzb2xpZCwgd2UgaW5pdGlhdGUgYSBqdW1wIGJhc2VkIG9uIHRoZSBjdXJyZW50XG4gICAgICAgICAgICAvLyBtb3ZlbWVudCBvZiB0aGUgcGxheWVyLiBJZiBub3QsIHdlIChzb3J0IG9mKSBpZ25vcmUgdGhlIHJlcXVlc3QgdG8ganVtcC4uLiBhbHRob3VnaFxuICAgICAgICAgICAgLy8gaXQgZG9lcyBzdWJ0bHkgY2hhbmdlIHRoZSBiZWhhdmlvciB1cG9uIGxhbmRpbmcuXG4gICAgICAgICAgICBpZiAoZmllbGQub25Tb2xpZCh0aGlzLngsIHRoaXMueSkpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGF0ZSA9PT0gU3RhdGUuU1RPUFBFRCB8fCB0aGlzLnN0YXRlID09PSBTdGF0ZS5GQUxMSU5HKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTdGF0ZS5KVU1QX1VQO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmp1bXBTdGVwID0gMDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0U3RhdGUgPSBTdGF0ZS5TVE9QUEVEO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0ZSA9PT0gU3RhdGUuTEVGVCB8fCB0aGlzLnN0YXRlID09PSBTdGF0ZS5KVU1QX0xFRlQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFN0YXRlLkpVTVBfTEVGVDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5qdW1wU3RlcCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmV4dFN0YXRlID0gU3RhdGUuTEVGVDtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc3RhdGUgPT09IFN0YXRlLlJJR0hUIHx8IHRoaXMuc3RhdGUgPT09IFN0YXRlLkpVTVBfUklHSFQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFN0YXRlLkpVTVBfUklHSFQ7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuanVtcFN0ZXAgPSAwO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm5leHRTdGF0ZSA9IFN0YXRlLlJJR0hUO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUgPT09IFN0YXRlLkpVTVBfVVAgfHwgdGhpcy5zdGF0ZSA9PT0gU3RhdGUuRkFMTElORykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm5leHRTdGF0ZSA9IFN0YXRlLlNUT1BQRUQ7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnN0YXRlID09PSBTdGF0ZS5KVU1QX1JJR0hUKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmV4dFN0YXRlID0gU3RhdGUuUklHSFQ7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnN0YXRlID09PSBTdGF0ZS5KVU1QX0xFRlQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0U3RhdGUgPSBTdGF0ZS5MRUZUO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLm5leHRTdGF0ZSA9PT0gU3RhdGUuVVAgJiYgZmllbGQuaXNMYWRkZXIodGhpcy54LCB0aGlzLnkpKSB7XG4gICAgICAgICAgICAvLyBTcGVjaWFsIGNhc2U6IHRoZSB1c2VyIHdhbnRzIHRvIGdvIHVwIVxuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vIElmIHRoZSB1c2VyIGlzIG9uIGEgbGFkZGVyLCB3ZSBjYW4gc3RhcnQgYXNjZW5kaW5nLiBOb3RlIHRoYXQgaWYgdGhlIHVzZXIgaXMgbm90XG4gICAgICAgICAgICAvLyBvbiBhIGxhZGRlciB3ZSBpZ25vcmUgdGhlaXIgaW5wdXQsIHdoaWNoIGlzIGludGVudGlvbmFsIC0tIHRoaXMgYWxsb3dzIHF1ZXVlZFxuICAgICAgICAgICAgLy8gKHBhY21hbikgaW5wdXQsIHdoZXJlIHdlIGNhbiB0YXAgVVAgYSBsaXR0bGUgYmVmb3JlIHJlYWNoaW5nIHRoZSBsYWRkZXIuXG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gU3RhdGUuVVA7XG4gICAgICAgICAgICB0aGlzLm5leHRTdGF0ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLm5leHRTdGF0ZSA9PT0gU3RhdGUuRE9XTiAmJiAoZmllbGQuaXNMYWRkZXIodGhpcy54LCB0aGlzLnkpIHx8IGZpZWxkLmlzTGFkZGVyKHRoaXMueCwgdGhpcy55ICsgMSkpKSB7XG4gICAgICAgICAgICAvLyBTcGVjaWFsIGNhc2U6IHRoZSBwbGF5ZXIgd2FudHMgdG8gZ28gZG93biFcbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAvLyBJZiB0aGUgcGxheWVyIGlzIG9uIChvciBhYm92ZSkgYSBsYWRkZXIsIHdlIGNhbiBzdGFydCBkZXNjZW5kaW5nLiBOb3RlIHRoYXQgaWYgdGhlIHBsYXllciBpcyBub3RcbiAgICAgICAgICAgIC8vIG9uIGEgbGFkZGVyIHdlIGlnbm9yZSB0aGVpciBpbnB1dCwgd2hpY2ggaXMgaW50ZW50aW9uYWwgLS0gdGhpcyBhbGxvd3MgcXVldWVkXG4gICAgICAgICAgICAvLyAocGFjbWFuKSBpbnB1dCwgd2hlcmUgd2UgY2FuIHRhcCBET1dOIGEgbGl0dGxlIGJlZm9yZSByZWFjaGluZyB0aGUgbGFkZGVyLlxuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFN0YXRlLkRPV047XG4gICAgICAgICAgICB0aGlzLm5leHRTdGF0ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuXG4gICAgICAgIHN3aXRjaCAodGhpcy5zdGF0ZSkge1xuICAgICAgICAgICAgY2FzZSBTdGF0ZS5MRUZUOlxuICAgICAgICAgICAgICAgIGlmICghZmllbGQub25Tb2xpZCh0aGlzLngsIHRoaXMueSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0U3RhdGUgPSBTdGF0ZS5MRUZUO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlID0gU3RhdGUuRkFMTElORztcbiAgICAgICAgICAgICAgICAgICAgcmVwZWF0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChmaWVsZC5lbXB0eVNwYWNlKHRoaXMueCAtIDEsIHRoaXMueSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy54LS07XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0U3RhdGUgPSBTdGF0ZS5TVE9QUEVEO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSBTdGF0ZS5SSUdIVDpcbiAgICAgICAgICAgICAgICBpZiAoIWZpZWxkLm9uU29saWQodGhpcy54LCB0aGlzLnkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmV4dFN0YXRlID0gU3RhdGUuUklHSFQ7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTdGF0ZS5GQUxMSU5HO1xuICAgICAgICAgICAgICAgICAgICByZXBlYXQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGZpZWxkLmVtcHR5U3BhY2UodGhpcy54ICsgMSwgdGhpcy55KSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLngrKztcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm5leHRTdGF0ZSA9IFN0YXRlLlNUT1BQRUQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIFN0YXRlLlVQOlxuICAgICAgICAgICAgICAgIGlmIChmaWVsZC5jYW5DbGltYlVwKHRoaXMueCwgdGhpcy55IC0gMSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy55LS07XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFN0YXRlLlNUT1BQRUQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIFN0YXRlLkRPV046XG4gICAgICAgICAgICAgICAgaWYgKGZpZWxkLmNhbkNsaW1iRG93bih0aGlzLngsIHRoaXMueSArIDEpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMueSsrO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTdGF0ZS5TVE9QUEVEO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSBTdGF0ZS5KVU1QX1JJR0hUOlxuICAgICAgICAgICAgY2FzZSBTdGF0ZS5KVU1QX0xFRlQ6XG4gICAgICAgICAgICBjYXNlIFN0YXRlLkpVTVBfVVA6XG4gICAgICAgICAgICAgICAgbGV0IHN0ZXAgPSBKVU1QX0ZSQU1FU1t0aGlzLnN0YXRlXVt0aGlzLmp1bXBTdGVwXTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhbJ2p1bXAnLCB0aGlzLnN0YXRlLCB0aGlzLmp1bXBTdGVwLCBzdGVwXSk7XG4gICAgICAgICAgICAgICAgaWYgKCh0aGlzLnggKyBzdGVwLnggPj0gMCkgJiYgKHRoaXMueCArIHN0ZXAueCA8IExFVkVMX0NPTFMpKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCB0ZXJyYWluID0gZmllbGQubGF5b3V0W3RoaXMueSArIHN0ZXAueV1bdGhpcy54ICsgc3RlcC54XTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKFsnPScsICd8JywgJy0nXS5pbmNsdWRlcyh0ZXJyYWluKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpZWxkLm9uU29saWQodGhpcy54LCB0aGlzLnkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IHRoaXMubmV4dFN0YXRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubmV4dFN0YXRlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRoaXMuc3RhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBTdGF0ZS5KVU1QX1JJR0hUOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0U3RhdGUgPSBTdGF0ZS5SSUdIVDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFN0YXRlLkpVTVBfTEVGVDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubmV4dFN0YXRlID0gU3RhdGUuTEVGVDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFN0YXRlLkpVTVBfVVA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5leHRTdGF0ZSA9IFN0YXRlLlVQO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTdGF0ZS5GQUxMSU5HO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRlcnJhaW4gPT09ICdIJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy54ICs9IHN0ZXAueDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMueSArPSBzdGVwLnk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlID0gU3RhdGUuU1RPUFBFRDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubmV4dFN0YXRlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy54ICs9IHN0ZXAueDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMueSArPSBzdGVwLnk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmp1bXBTdGVwKys7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmp1bXBTdGVwID49IEpVTVBfRlJBTUVTW3RoaXMuc3RhdGVdLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSB0aGlzLm5leHRTdGF0ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5leHRTdGF0ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmaWVsZC5vblNvbGlkKHRoaXMueCwgdGhpcy55KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IHRoaXMubmV4dFN0YXRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0U3RhdGUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlID0gU3RhdGUuRkFMTElORztcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubmV4dFN0YXRlID0gU3RhdGUuU1RPUFBFRDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSBTdGF0ZS5GQUxMSU5HOlxuICAgICAgICAgICAgICAgIGlmIChmaWVsZC5vblNvbGlkKHRoaXMueCwgdGhpcy55KSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlID0gdGhpcy5uZXh0U3RhdGUgfHwgU3RhdGUuU1RPUFBFRDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnkrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJZiB3ZSB3ZXJlIGF0dGVtcHRpbmcgdG8gbW92ZSBzb21ld2hlcmUgYW5kIHJlYWxpemVkIHdlIHNob3VsZCBiZSBmYWxsaW5nIGluc3RlYWQsXG4gICAgICAgIC8vIHdlIHdhbnQgdG8gcmUtcnVuIHRoZSBlbnRpcmUgYWxnb3JpdGhtIG9uY2UuIFRoaXMgYXZvaWRzIHdoYXQgYm9pbHMgZG93biB0byBhIFwic2tpcHBlZFxuICAgICAgICAvLyBmcmFtZVwiIGZyb20gdGhlIHVzZXIncyBwb2ludCBvZiB2aWV3LlxuICAgICAgICBpZiAocmVwZWF0KSByZXR1cm4gdGhpcy5hcHBseU1vdmVtZW50KGZpZWxkKTtcbiAgICB9XG59XG4iLCIndXNlIHN0cmljdCc7XG5cbmltcG9ydCB7IFNwcml0ZSB9IGZyb20gJy4vU3ByaXRlJztcbmltcG9ydCB7IFN0YXRlLCBKVU1QX0ZSQU1FUyB9IGZyb20gJy4vQmVoYXZpb3InO1xuaW1wb3J0IHsgSW5wdXQgfSBmcm9tICcuL0lucHV0JztcbmltcG9ydCB7IFRleHQgfSBmcm9tICcuL1RleHQnO1xuaW1wb3J0IHsgTEVWRUxfUk9XUywgTEVWRUxfQ09MUyB9IGZyb20gJy4vQ29uc3RhbnRzJztcbmltcG9ydCB7IEVudGl0eSB9IGZyb20gJy4vRW50aXR5JztcbmltcG9ydCB7IFNjcmVlbiB9IGZyb20gJy4vU2NyZWVuJztcbmltcG9ydCB7IGdhbWUgfSBmcm9tICcuL0dhbWUnO1xuXG5jb25zdCBERUFUSF9GUkFNRVMgPSBbJ3AnLCAnYicsICdkJywgJ3EnLCAncCcsICdiJywgJ2QnLCAncScsICctJywgJy0nLCAnXyddO1xuXG4vKipcbiAqIFBsYXllclxuICovXG5leHBvcnQgY2xhc3MgUGxheWVyIGV4dGVuZHMgRW50aXR5IHtcbiAgICBjb25zdHJ1Y3Rvcih4LCB5KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMueCA9IHg7XG4gICAgICAgIHRoaXMueSA9IHk7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBTdGF0ZS5TVE9QUEVEO1xuICAgICAgICB0aGlzLm5leHRTdGF0ZSA9IFN0YXRlLlNUT1BQRUQ7XG4gICAgICAgIHRoaXMuanVtcFN0ZXAgPSAwO1xuICAgICAgICB0aGlzLmRlYXRoU3RlcCA9IDA7XG4gICAgICAgIGNvbnNvbGUubG9nKCdwbGF5ZXIgY29uc3RydWN0ZWQnLCB4LCB5KTtcbiAgICB9XG5cbiAgICB1cGRhdGUoKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlID09PSBTdGF0ZS5EWUlORykge1xuICAgICAgICAgICAgdGhpcy5kZWF0aFN0ZXArKztcbiAgICAgICAgICAgIGlmICh0aGlzLmRlYXRoU3RlcCA+PSBERUFUSF9GUkFNRVMubGVuZ3RoKSB0aGlzLnN0YXRlID0gU3RhdGUuREVBRDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnN0YXRlID09PSBTdGF0ZS5EWUlORyB8fCB0aGlzLnN0YXRlID09PSBTdGF0ZS5ERUFEKSByZXR1cm47XG5cbiAgICAgICAgbGV0IGFjdGlvbiA9IElucHV0Lmxhc3RBY3Rpb25QcmVzc2VkKCk7XG5cbiAgICAgICAgaWYgKGFjdGlvbiA9PT0gSW5wdXQuQWN0aW9uLkxFRlQpIHtcbiAgICAgICAgICAgIHRoaXMubmV4dFN0YXRlID0gU3RhdGUuTEVGVDtcbiAgICAgICAgICAgIElucHV0LmNvbnN1bWUoKTtcbiAgICAgICAgfSBlbHNlIGlmIChhY3Rpb24gPT09IElucHV0LkFjdGlvbi5SSUdIVCkge1xuICAgICAgICAgICAgdGhpcy5uZXh0U3RhdGUgPSBTdGF0ZS5SSUdIVDtcbiAgICAgICAgICAgIElucHV0LmNvbnN1bWUoKTtcbiAgICAgICAgfSBlbHNlIGlmIChhY3Rpb24gPT09IElucHV0LkFjdGlvbi5VUCkge1xuICAgICAgICAgICAgdGhpcy5uZXh0U3RhdGUgPSBTdGF0ZS5VUDtcbiAgICAgICAgICAgIElucHV0LmNvbnN1bWUoKTtcbiAgICAgICAgfSBlbHNlIGlmIChhY3Rpb24gPT09IElucHV0LkFjdGlvbi5ET1dOKSB7XG4gICAgICAgICAgICB0aGlzLm5leHRTdGF0ZSA9IFN0YXRlLkRPV047XG4gICAgICAgICAgICBJbnB1dC5jb25zdW1lKCk7XG4gICAgICAgIH0gZWxzZSBpZiAoYWN0aW9uID09PSBJbnB1dC5BY3Rpb24uSlVNUCkge1xuICAgICAgICAgICAgdGhpcy5uZXh0U3RhdGUgPSBTdGF0ZS5TVEFSVF9KVU1QO1xuICAgICAgICAgICAgSW5wdXQuY29uc3VtZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuYXBwbHlNb3ZlbWVudChnYW1lLnNlc3Npb24uZmllbGQpO1xuICAgIH1cblxuICAgIGRyYXcoKSB7XG4gICAgICAgIGxldCBjaGFyID0gJ2cnO1xuXG4gICAgICAgIHN3aXRjaCAodGhpcy5zdGF0ZSkge1xuICAgICAgICAgICAgY2FzZSBTdGF0ZS5SSUdIVDpcbiAgICAgICAgICAgIGNhc2UgU3RhdGUuSlVNUF9SSUdIVDpcbiAgICAgICAgICAgIGNhc2UgU3RhdGUuVVA6XG4gICAgICAgICAgICBjYXNlIFN0YXRlLkRPV046XG4gICAgICAgICAgICAgICAgY2hhciA9ICdwJztcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSBTdGF0ZS5MRUZUOlxuICAgICAgICAgICAgY2FzZSBTdGF0ZS5KVU1QX0xFRlQ6XG4gICAgICAgICAgICAgICAgY2hhciA9ICdxJztcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSBTdGF0ZS5GQUxMSU5HOlxuICAgICAgICAgICAgICAgIGNoYXIgPSAnYic7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgU3RhdGUuRFlJTkc6XG4gICAgICAgICAgICAgICAgY2hhciA9IERFQVRIX0ZSQU1FU1t0aGlzLmRlYXRoU3RlcF07XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgU3RhdGUuREVBRDpcbiAgICAgICAgICAgICAgICBjaGFyID0gJ18nO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgU2NyZWVuLndyaXRlKHRoaXMueCwgdGhpcy55LCBjaGFyKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBUZXh0IH0gZnJvbSAnLi9UZXh0JztcbmltcG9ydCB7IFN0YXRlIH0gZnJvbSAnLi9CZWhhdmlvcic7XG5pbXBvcnQgeyBMRVZFTF9DT0xTIH0gZnJvbSAnLi9Db25zdGFudHMnO1xuaW1wb3J0IHsgRW50aXR5IH0gZnJvbSAnLi9FbnRpdHknO1xuaW1wb3J0IHsgU2NyZWVuIH0gZnJvbSAnLi9TY3JlZW4nO1xuXG5jb25zdCBERUFUSF9GUkFNRVMgPSBbJyUnLCAnOiddO1xuXG5leHBvcnQgY2xhc3MgUm9jayBleHRlbmRzIEVudGl0eSB7XG4gICAgY29uc3RydWN0b3IoZGlzcGVuc2VyKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMueCA9IGRpc3BlbnNlci54O1xuICAgICAgICB0aGlzLnkgPSBkaXNwZW5zZXIueTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IFN0YXRlLkZBTExJTkc7XG4gICAgICAgIHRoaXMubmV4dFN0YXRlID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmRlYXRoU3RlcCA9IDA7XG4gICAgfVxuXG4gICAgdXBkYXRlKGZpZWxkKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlID09PSBTdGF0ZS5EWUlORykge1xuICAgICAgICAgICAgdGhpcy5kZWF0aFN0ZXArKztcbiAgICAgICAgICAgIGlmICh0aGlzLmRlYXRoU3RlcCA+PSBERUFUSF9GUkFNRVMubGVuZ3RoKSB0aGlzLnN0YXRlID0gU3RhdGUuREVBRDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnN0YXRlID09PSBTdGF0ZS5EWUlORyB8fCB0aGlzLnN0YXRlID09PSBTdGF0ZS5ERUFEKSByZXR1cm47XG5cbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgPT09IFN0YXRlLlNUT1BQRUQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnggPT09IDAgfHwgIWZpZWxkLmVtcHR5U3BhY2UodGhpcy54IC0gMSwgdGhpcy55KSkge1xuICAgICAgICAgICAgICAgIHRoaXMubmV4dFN0YXRlID0gU3RhdGUuUklHSFQ7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMueCA9PT0gTEVWRUxfQ09MUyAtIDEgfHwgIWZpZWxkLmVtcHR5U3BhY2UodGhpcy54ICsgMSwgdGhpcy55KSkge1xuICAgICAgICAgICAgICAgIHRoaXMubmV4dFN0YXRlID0gU3RhdGUuTEVGVDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5uZXh0U3RhdGUgPSBNYXRoLnJhbmRvbSgpID4gMC41ID8gU3RhdGUuTEVGVCA6IFN0YXRlLlJJR0hUO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMueCA9PT0gMCAmJiB0aGlzLnN0YXRlID09PSBTdGF0ZS5MRUZUKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gU3RhdGUuUklHSFQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy54ID09PSBMRVZFTF9DT0xTIC0gMSAmJiB0aGlzLnN0YXRlID09PSBTdGF0ZS5SSUdIVCkge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFN0YXRlLkxFRlQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5zdGF0ZSAhPT0gU3RhdGUuRkFMTElORyAmJiAhZmllbGQub25Tb2xpZCh0aGlzLngsIHRoaXMueSkpIHtcbiAgICAgICAgICAgIHRoaXMubmV4dFN0YXRlID0gU3RhdGUuRkFMTElORztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChmaWVsZC5pc0xhZGRlcih0aGlzLngsIHRoaXMueSArIDEpICYmIFtTdGF0ZS5MRUZULCBTdGF0ZS5SSUdIVF0uaW5jbHVkZXModGhpcy5zdGF0ZSkpIHtcbiAgICAgICAgICAgIGxldCByID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNCk7XG4gICAgICAgICAgICB0aGlzLm5leHRTdGF0ZSA9IFtTdGF0ZS5MRUZULCBTdGF0ZS5SSUdIVCwgU3RhdGUuRE9XTiwgU3RhdGUuRE9XTl1bcl07XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZmllbGQuaXNFYXRlcih0aGlzLngsIHRoaXMueSkpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTdGF0ZS5EWUlORztcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuYXBwbHlNb3ZlbWVudChmaWVsZCk7XG4gICAgfVxuXG4gICAgZHJhdygpIHtcbiAgICAgICAgbGV0IGNoYXIgPSAnbyc7XG5cbiAgICAgICAgc3dpdGNoICh0aGlzLnN0YXRlKSB7XG4gICAgICAgICAgICBjYXNlIFN0YXRlLkRZSU5HOlxuICAgICAgICAgICAgICAgIGNoYXIgPSBERUFUSF9GUkFNRVNbdGhpcy5kZWF0aFN0ZXBdO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBTdGF0ZS5ERUFEOlxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIFNjcmVlbi53cml0ZSh0aGlzLngsIHRoaXMueSwgY2hhcik7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgTEVWRUxfUk9XUywgTEVWRUxfQ09MUyB9IGZyb20gJy4vQ29uc3RhbnRzJztcbmltcG9ydCBMZXZlbERhdGEgZnJvbSAnLi4vbGV2ZWxzL2xldmVscy5qc29uJztcblxuZXhwb3J0IGNvbnN0IExldmVsID0ge1xuICAgIExFVkVMUzogTGV2ZWxEYXRhLFxuXG4gICAgbG9hZChsZXZlbE51bWJlcikge1xuICAgICAgICBjb25zb2xlLmxvZyhMZXZlbC5MRVZFTFMpO1xuICAgICAgICAvLyBBcyB0aGUgcGxheWVyIGtlZXBzIHBsYXlpbmcsIGxldmVsIG51bWJlcnMgd2lsbCBsb29wIGFyb3VuZCB0byBiZWdpbm5pbmdcbiAgICAgICAgbGV0IGxldmVsID0gTGV2ZWwuTEVWRUxTW2xldmVsTnVtYmVyICUgTGV2ZWwuTEVWRUxTLmxlbmd0aF07XG4gICAgICAgIGlmICghbGV2ZWwpIHRocm93IG5ldyBFcnJvcihgTm8gc3VjaCBsZXZlbCBudW1iZXI6ICR7bGV2ZWxOdW1iZXJ9YCk7XG5cbiAgICAgICAgLy8gUGVyZm9ybSBzb21lIHNhbml0eSBjaGVja3Mgb24gdGhlIGxldmVsIGxheW91dCBhbmQgZXh0cmFjdCB1c2VmdWwgaW5mb1xuICAgICAgICAvLyBsaWtlIHBsYXllciBzdGFydCBwb3NpdGlvbiBhbmQgZGlzcGVuc2VyIHBvc2l0aW9ucyBldGMuXG5cbiAgICAgICAgbGV0IGxheW91dCA9IGxldmVsLmxheW91dC5tYXAocm93ID0+IHJvdy5zcGxpdCgnJykpO1xuICAgICAgICBsZXQgZGlzcGVuc2VycyA9IFtdO1xuICAgICAgICBsZXQgcGxheWVyO1xuXG4gICAgICAgIC8vIFNhbml0eSBjaGVja1xuICAgICAgICBsYXlvdXQgPSBsYXlvdXQuc2xpY2UoMCwgTEVWRUxfUk9XUyk7XG5cbiAgICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCBMRVZFTF9ST1dTOyB5KyspIHtcbiAgICAgICAgICAgIC8vIFNhbml0eSBjaGVja3NcbiAgICAgICAgICAgIGlmICghbGF5b3V0W3ldKSBsYXlvdXRbeV0gPSBbXTtcbiAgICAgICAgICAgIGxheW91dFt5XSA9IGxheW91dFt5XS5zbGljZSgwLCBMRVZFTF9DT0xTKTtcblxuICAgICAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCBMRVZFTF9DT0xTOyB4KyspIHtcbiAgICAgICAgICAgICAgICAvLyBTYW5pdHkgY2hlY2tcbiAgICAgICAgICAgICAgICBpZiAoIWxheW91dFt5XVt4XSkgbGF5b3V0W3ldW3hdID0gJyAnO1xuXG4gICAgICAgICAgICAgICAgLy8gRGVyIERpc3BlbnNlcnMgKFYpIGFuZCBEZXIgRWF0ZXJzICgqKSBoYXZlIGJlaGF2aW9ycywgc28gaXQgaXMgY29udmVuaWVudCBmb3IgdXNcbiAgICAgICAgICAgICAgICAvLyB0byBjb25zdHJ1Y3QgYSBsaXN0IG9mIHRoZW0sIGJ1dCB0aGV5IGFyZSBwZXJtYW5lbnQgcGFydHMgb2YgdGhlIGxheW91dCwgc28gd2UgY2FuXG4gICAgICAgICAgICAgICAgLy8gbGVhdmUgdGhlbSBhcyBwYXJ0IG9mIHRoZSBsZXZlbCBhbmQgZHJhdyB0aGVtIG5vcm1hbGx5LlxuXG4gICAgICAgICAgICAgICAgaWYgKGxheW91dFt5XVt4XSA9PT0gJ1YnKSB7XG4gICAgICAgICAgICAgICAgICAgIGRpc3BlbnNlcnMucHVzaCh7IHgsIHkgfSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gVHJlYXN1cmUgKCQpLCBTdGF0dWVzICgmKSwgYW5kIHRoZSBMYWQgKHApIGFyZSB0cmFuc2llbnQgLSB0aGUgcGxheWVyIG1vdmVzIGFyb3VuZCBhbmRcbiAgICAgICAgICAgICAgICAvLyBjYW4gcGljayB1cCB0aGUgdHJlYXN1cmVzIGFuZCBzdGF0dWVzLiBUaGF0J3Mgd2h5IGZvciB0aGVzZSBlbGVtZW50cywgd2UgYWRkIHRoZW0gdG9cbiAgICAgICAgICAgICAgICAvLyBvdXIgbGlzdHMgQU5EIHdlIHJlbW92ZSB0aGVtIGZyb20gdGhlIFwicGxheWluZyBmaWVsZFwiLCB3ZSdsbCBkcmF3IHRoZW0gc2VwYXJhdGVseSBvblxuICAgICAgICAgICAgICAgIC8vIHRvcCBvZiB0aGUgbGF5b3V0LlxuXG4gICAgICAgICAgICAgICAgaWYgKGxheW91dFt5XVt4XSA9PT0gJ3AnKSB7XG4gICAgICAgICAgICAgICAgICAgIGxheW91dFt5XVt4XSA9ICcgJztcbiAgICAgICAgICAgICAgICAgICAgcGxheWVyID0geyB4LCB5IH07XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gRXZlcnl0aGluZyBlbHNlLCBsaWtlIGZsb29ycyAoPSksIHdhbGxzICh8KSwgbGFkZGVycyAoSCkgYW5kIGZpcmUgKF4pLCBpcyBwYXJ0IG9mIHRoZVxuICAgICAgICAgICAgICAgIC8vIGxheW91dC4gVGhlIExhZCBpbnRlcmFjdHMgd2l0aCB0aGVtLCBidXQgd2UgY2FuIGhhbmRsZSB0aGF0IGR1cmluZyBvdXIgbW92ZW1lbnQgY2hlY2tzLlxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5hbWU6IGxldmVsLm5hbWUsXG4gICAgICAgICAgICB0aW1lOiBsZXZlbC50aW1lLFxuICAgICAgICAgICAgbWF4Um9ja3M6IGxldmVsLm1hUnJvY2tzLFxuICAgICAgICAgICAgbGF5b3V0LFxuICAgICAgICAgICAgZGlzcGVuc2VycyxcbiAgICAgICAgICAgIHBsYXllclxuICAgICAgICB9O1xuICAgIH1cbn07XG4iLCJpbXBvcnQgeyBUZXh0IH0gZnJvbSAnLi9UZXh0JztcbmltcG9ydCB7IFBsYXllciB9IGZyb20gJy4vUGxheWVyJztcbmltcG9ydCB7IFJvY2sgfSBmcm9tICcuL1JvY2snO1xuaW1wb3J0IHsgTEVWRUxfQ09MUywgTEVWRUxfUk9XUywgU0NPUkVfUk9DSywgU0NPUkVfU1RBVFVFLCBTQ09SRV9UUkVBU1VSRSB9IGZyb20gJy4vQ29uc3RhbnRzJztcbmltcG9ydCB7IGdhbWUgfSBmcm9tICcuL0dhbWUnO1xuaW1wb3J0IHsgU3RhdGUgfSBmcm9tICcuL0JlaGF2aW9yJztcbmltcG9ydCB7IFNjcmVlbiB9IGZyb20gJy4vU2NyZWVuJztcbmltcG9ydCB7IExldmVsIH0gZnJvbSAnLi9MZXZlbCc7XG5cbi8qKlxuICogRmllbGRcbiAqXG4gKiBUaGUgXCJmaWVsZFwiIHJlcHJlc2VudHMgdGhlIGN1cnJlbnQgbGV2ZWwsIG9yLCBcInBsYXlpbmcgZmllbGRcIi4gQSBuZXcgcGxheWluZyBmaWVsZCBpcyBjcmVhdGVkXG4gKiBldmVyeSB0aW1lIHlvdSBzdGFydCBhIGxldmVsLCBzbyB3ZSBhdHRhY2ggZXZlcnl0aGluZyBhYm91dCB0aGUgY3VycmVudGx5IHBsYXllZCBsZXZlbCB0b1xuICogdGhlIGZpZWxkIC0tIHBvc2l0aW9ucyBvZiB0cmVhc3VyZSwgdGhlIHBsYXllciwgdmljdG9yeSBjb25kaXRpb25zLCBldGMuXG4gKi9cbmV4cG9ydCBjbGFzcyBGaWVsZCB7XG4gICAgY29uc3RydWN0b3IobGV2ZWxOdW1iZXIpIHtcbiAgICAgICAgbGV0IGxldmVsID0gTGV2ZWwubG9hZChsZXZlbE51bWJlcik7XG5cbiAgICAgICAgdGhpcy5sYXlvdXQgPSBsZXZlbC5sYXlvdXQ7XG4gICAgICAgIHRoaXMuZGlzcGVuc2VycyA9IGxldmVsLmRpc3BlbnNlcnM7XG4gICAgICAgIHRoaXMudGltZSA9IGxldmVsLnRpbWU7XG4gICAgICAgIHRoaXMubWF4Um9ja3MgPSBsZXZlbC5yb2NrcztcbiAgICAgICAgdGhpcy5yb2NrcyA9IFtdO1xuICAgICAgICB0aGlzLnBsYXllciA9IG5ldyBQbGF5ZXIobGV2ZWwucGxheWVyLngsIGxldmVsLnBsYXllci55KTtcbiAgICB9XG5cbiAgICB1cGRhdGUoKSB7XG4gICAgICAgIGxldCBvbGRYID0gdGhpcy5wbGF5ZXIueCwgb2xkWSA9IHRoaXMucGxheWVyLnk7XG5cbiAgICAgICAgLy8gTW92ZSBwbGF5ZXIgYmFzZWQgb24gdXNlciBpbnB1dFxuICAgICAgICB0aGlzLnBsYXllci51cGRhdGUoKTtcblxuICAgICAgICBpZiAob2xkWCAhPT0gdGhpcy5wbGF5ZXIueCAmJiBvbGRZID09PSB0aGlzLnBsYXllci55KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0Rpc2FwcGVhcmluZ0Zsb29yKG9sZFgsIG9sZFkgKyAxKSkge1xuICAgICAgICAgICAgICAgIHRoaXMubGF5b3V0W29sZFkgKyAxXVtvbGRYXSA9ICcgJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENoZWNrIGlmIHBsYXllciBzaG91bGQgYmUgZGVhZCAoYmVmb3JlIG1vdmluZyByb2NrcylcbiAgICAgICAgdGhpcy5jaGVja0lmUGxheWVyU2hvdWxkRGllKGdhbWUuc2Vzc2lvbik7XG5cbiAgICAgICAgLy8gTW92ZSByb2Nrc1xuICAgICAgICBmb3IgKGxldCByb2NrIG9mIHRoaXMucm9ja3MpIHJvY2sudXBkYXRlKHRoaXMpO1xuXG4gICAgICAgIC8vIENoZWNrIGlmIHBsYXllciBzaG91bGQgYmUgZGVhZCAoYWZ0ZXIgbW92aW5nIHJvY2tzKVxuICAgICAgICB0aGlzLmNoZWNrSWZQbGF5ZXJTaG91bGREaWUoZ2FtZS5zZXNzaW9uKTtcblxuICAgICAgICAvLyBDb2xsZWN0IHN0YXR1ZXNcbiAgICAgICAgaWYgKHRoaXMuaXNTdGF0dWUodGhpcy5wbGF5ZXIueCwgdGhpcy5wbGF5ZXIueSkpIHtcbiAgICAgICAgICAgIHRoaXMubGF5b3V0W3RoaXMucGxheWVyLnldW3RoaXMucGxheWVyLnhdID0gJyAnO1xuICAgICAgICAgICAgZ2FtZS5zZXNzaW9uLnVwZGF0ZVNjb3JlKFNDT1JFX1NUQVRVRSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDb2xsZWN0IHRyZWFzdXJlIChlbmRzIHRoZSBjdXJyZW50IGxldmVsKVxuICAgICAgICBpZiAodGhpcy5pc1RyZWFzdXJlKHRoaXMucGxheWVyLngsIHRoaXMucGxheWVyLnkpKSB7XG4gICAgICAgICAgICBnYW1lLnNlc3Npb24uc3RhcnROZXh0TGV2ZWwoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEludGVyYWN0IHdpdGggdHJhbXBvbGluZXNcbiAgICAgICAgaWYgKHRoaXMuaXNUcmFtcG9saW5lKHRoaXMucGxheWVyLngsIHRoaXMucGxheWVyLnkpKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDUpKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsYXllci5zdGF0ZSA9IFN0YXRlLkxFRlQ7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGxheWVyLm5leHRTdGF0ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsYXllci5zdGF0ZSA9IFN0YXRlLlJJR0hUO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsYXllci5uZXh0U3RhdGUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXIuc3RhdGUgPSBTdGF0ZS5KVU1QX1VQO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsYXllci5uZXh0U3RhdGUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGxheWVyLmp1bXBTdGVwID0gMDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsYXllci5zdGF0ZSA9IFN0YXRlLkpVTVBfTEVGVDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXIubmV4dFN0YXRlID0gU3RhdGUuTEVGVDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXIuanVtcFN0ZXAgPSAwO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGxheWVyLnN0YXRlID0gU3RhdGUuSlVNUF9SSUdIVDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXIubmV4dFN0YXRlID0gU3RhdGUuUklHSFQ7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGxheWVyLmp1bXBTdGVwID0gMDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBEaXNwZW5zZSBuZXcgcm9ja3NcbiAgICAgICAgaWYgKHRoaXMucm9ja3MubGVuZ3RoIDwgMyAmJiBNYXRoLnJhbmRvbSgpID4gMC45KSB7XG4gICAgICAgICAgICBsZXQgZGlzcGVuc2VyID0gdGhpcy5kaXNwZW5zZXJzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHRoaXMuZGlzcGVuc2Vycy5sZW5ndGgpXTtcbiAgICAgICAgICAgIHRoaXMucm9ja3MucHVzaChuZXcgUm9jayhkaXNwZW5zZXIpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEtpbGwgZGVhZCByb2Nrc1xuICAgICAgICB0aGlzLnJvY2tzID0gdGhpcy5yb2Nrcy5maWx0ZXIocm9jayA9PiByb2NrLnN0YXRlICE9PSBTdGF0ZS5ERUFEKTtcblxuICAgICAgICAvLyBLaWxsIHBsYXllclxuICAgICAgICBpZiAodGhpcy5wbGF5ZXIuc3RhdGUgPT09IFN0YXRlLkRFQUQpIHtcbiAgICAgICAgICAgIGdhbWUuc2Vzc2lvbi5yZXN0YXJ0TGV2ZWwoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGRyYXcoKSB7XG4gICAgICAgIC8vIERyYXcgbGF5b3V0XG4gICAgICAgIFNjcmVlbi53cml0ZSgwLCAwLCB0aGlzLmxheW91dC5tYXAocm93ID0+IHJvdy5qb2luKCcnKSkpO1xuXG4gICAgICAgIC8vIERyYXcgcGxheWVyXG4gICAgICAgIHRoaXMucGxheWVyLmRyYXcoKTtcblxuICAgICAgICAvLyBEcmF3IHJvY2tzXG4gICAgICAgIHRoaXMucm9ja3MuZm9yRWFjaChyb2NrID0+IHJvY2suZHJhdygpKTtcbiAgICB9XG5cbiAgICBvblNvbGlkKHgsIHkpIHtcbiAgICAgICAgcmV0dXJuIFsnPScsICctJywgJ0gnLCAnfCddLmluY2x1ZGVzKHRoaXMubGF5b3V0W3kgKyAxXVt4XSkgfHwgdGhpcy5sYXlvdXRbeV1beF0gPT09ICdIJztcbiAgICB9XG5cbiAgICBlbXB0eVNwYWNlKHgsIHkpIHtcbiAgICAgICAgaWYgKHggPCAwIHx8IHggPj0gTEVWRUxfQ09MUykge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuICFbJ3wnLCAnPSddLmluY2x1ZGVzKHRoaXMubGF5b3V0W3ldW3hdKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlzTGFkZGVyKHgsIHkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGF5b3V0W3ldW3hdID09PSAnSCc7XG4gICAgfVxuXG4gICAgaXNTdGF0dWUoeCwgeSkge1xuICAgICAgICByZXR1cm4gdGhpcy5sYXlvdXRbeV1beF0gPT09ICcmJztcbiAgICB9XG5cbiAgICBpc1RyZWFzdXJlKHgsIHkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGF5b3V0W3ldW3hdID09PSAnJCc7XG4gICAgfVxuXG4gICAgaXNUcmFtcG9saW5lKHgsIHkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGF5b3V0W3ldW3hdID09PSAnLic7XG4gICAgfVxuXG4gICAgaXNFYXRlcih4LCB5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxheW91dFt5XVt4XSA9PT0gJyonO1xuICAgIH1cblxuICAgIGlzRmlyZSh4LCB5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxheW91dFt5XVt4XSA9PT0gJ14nO1xuICAgIH1cblxuICAgIGlzRGlzYXBwZWFyaW5nRmxvb3IoeCwgeSkge1xuICAgICAgICByZXR1cm4gdGhpcy5sYXlvdXRbeV1beF0gPT09ICctJztcbiAgICB9XG5cbiAgICBjYW5DbGltYlVwKHgsIHkpIHtcbiAgICAgICAgaWYgKHkgPCAwKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIHJldHVybiBbJ0gnLCAnJicsICckJ10uaW5jbHVkZXModGhpcy5sYXlvdXRbeV1beF0pO1xuICAgIH1cblxuICAgIGNhbkNsaW1iRG93bih4LCB5KSB7XG4gICAgICAgIHJldHVybiBbJ0gnLCAnJicsICckJywgJyAnLCAnXicsICcuJ10uaW5jbHVkZXModGhpcy5sYXlvdXRbeV1beF0pO1xuICAgIH1cblxuICAgIGNoZWNrSWZQbGF5ZXJTaG91bGREaWUoKSB7XG4gICAgICAgIGlmICh0aGlzLnBsYXllci5zdGF0ZSA9PT0gU3RhdGUuRFlJTkcgfHwgdGhpcy5wbGF5ZXIuc3RhdGUgPT09IFN0YXRlLkRFQUQpIHJldHVybjtcblxuICAgICAgICBpZiAodGhpcy5pc0ZpcmUodGhpcy5wbGF5ZXIueCwgdGhpcy5wbGF5ZXIueSkpIHtcbiAgICAgICAgICAgIHRoaXMucGxheWVyLnN0YXRlID0gU3RhdGUuRFlJTkc7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucm9ja3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBsYXllci54ID09PSB0aGlzLnJvY2tzW2ldLngpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wbGF5ZXIueSA9PT0gdGhpcy5yb2Nrc1tpXS55KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGxheWVyLnN0YXRlID0gU3RhdGUuRFlJTkc7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucm9ja3Muc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMucGxheWVyLnkgPT09IHRoaXMucm9ja3NbaV0ueSAtIDEgJiYgdGhpcy5lbXB0eVNwYWNlKHRoaXMucGxheWVyLngsIHRoaXMucGxheWVyLnkgKyAxKSkge1xuICAgICAgICAgICAgICAgICAgICBnYW1lLnNlc3Npb24udXBkYXRlU2NvcmUoU0NPUkVfUk9DSyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnBsYXllci55ID09PSB0aGlzLnJvY2tzW2ldLnkgLSAyICYmIHRoaXMuZW1wdHlTcGFjZSh0aGlzLnBsYXllci54LCB0aGlzLnBsYXllci55ICsgMSkgJiYgdGhpcy5lbXB0eVNwYWNlKHRoaXMucGxheWVyLngsIHRoaXMucGxheWVyLnkgKyAyKSkge1xuICAgICAgICAgICAgICAgICAgICBnYW1lLnNlc3Npb24udXBkYXRlU2NvcmUoU0NPUkVfUk9DSyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuIiwiXG5pbXBvcnQgeyBMRVZFTF9PUkRFUiwgU0NPUkVfUk9DSywgU0NPUkVfU1RBVFVFLCBTQ09SRV9UUkVBU1VSRSB9IGZyb20gJy4vQ29uc3RhbnRzJztcbmltcG9ydCB7IEZpZWxkIH0gZnJvbSAnLi9GaWVsZCc7XG5pbXBvcnQgeyBTY3JlZW4gfSBmcm9tICcuL1NjcmVlbic7XG5pbXBvcnQgeyBJbnB1dCB9IGZyb20gJy4vSW5wdXQnO1xuXG5leHBvcnQgY2xhc3MgU2Vzc2lvbiB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuc2NvcmUgPSAwO1xuICAgICAgICB0aGlzLmxldmVsTnVtYmVyID0gMDtcbiAgICAgICAgdGhpcy5sZXZlbEN5Y2xlID0gMTtcbiAgICAgICAgdGhpcy5saXZlcyA9IDU7XG4gICAgICAgIHRoaXMubmV4dExpZmUgPSAxMDA7XG4gICAgfVxuXG4gICAgdXBkYXRlKCkge1xuICAgICAgICBpZiAoIXRoaXMuZmllbGQpIHtcbiAgICAgICAgICAgIHRoaXMuZmllbGQgPSBuZXcgRmllbGQodGhpcy5sZXZlbE51bWJlcik7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmZpZWxkLnVwZGF0ZSgpO1xuXG4gICAgICAgIGxldCByZWNlbnRLZXlzdHJva2VzID0gSW5wdXQuYnVmZmVyLm1hcChldmVudCA9PiBldmVudC5rZXkpLmpvaW4oJycpLnRvVXBwZXJDYXNlKCk7XG5cbiAgICAgICAgaWYgKHJlY2VudEtleXN0cm9rZXMubWF0Y2goL0lEQ0xFVihcXGRcXGQpLykpIHtcbiAgICAgICAgICAgIElucHV0LmNvbnN1bWUoKTtcbiAgICAgICAgICAgIHRoaXMuZmllbGQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB0aGlzLmxldmVsTnVtYmVyID0gcGFyc2VJbnQoUmVnRXhwLiQxLCAxMCk7XG4gICAgICAgIH0gZWxzZSBpZiAocmVjZW50S2V5c3Ryb2tlcy5pbmNsdWRlcyhcIklERFFEXCIpKSB7XG4gICAgICAgICAgICBJbnB1dC5jb25zdW1lKCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImdvZCBtb2RlXCIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZHJhdygpIHtcbiAgICAgICAgU2NyZWVuLmNsZWFyKCk7XG5cbiAgICAgICAgaWYgKHRoaXMuZmllbGQpIHRoaXMuZmllbGQuZHJhdygpO1xuXG4gICAgICAgIGxldCBzdGF0ID0gW1xuICAgICAgICAgICAgU3RyaW5nKHRoaXMubGl2ZXMpLnBhZFN0YXJ0KDIsICcgJyksXG4gICAgICAgICAgICBTdHJpbmcodGhpcy5sZXZlbE51bWJlciArIDEpLnBhZFN0YXJ0KDIsICcgJyksXG4gICAgICAgICAgICBTdHJpbmcodGhpcy5zY29yZSkucGFkU3RhcnQoNCwgJzAnKSxcbiAgICAgICAgICAgIHRoaXMuZmllbGQgPyBTdHJpbmcodGhpcy5maWVsZC50aW1lKS5wYWRTdGFydCg0LCAnICcpIDogJydcbiAgICAgICAgXTtcbiAgICAgICAgU2NyZWVuLndyaXRlKDAsIDIxLCBgTGFkcyAgICR7c3RhdFswXX0gICBMZXZlbCAgICR7c3RhdFsxXX0gICAgU2NvcmUgICAke3N0YXRbMl19ICAgIEJvbnVzIHRpbWUgICAke3N0YXRbM119YCk7XG4gICAgfVxuXG4gICAgcmVzdGFydExldmVsKCkge1xuICAgICAgICB0aGlzLmZpZWxkID0gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIHN0YXJ0TmV4dExldmVsKCkge1xuICAgICAgICB0aGlzLmZpZWxkID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmxldmVsTnVtYmVyKys7XG4gICAgICAgIGlmICh0aGlzLmxldmVsTnVtYmVyICUgTEVWRUxfT1JERVIubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmxldmVsQ3ljbGUrKztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHVwZGF0ZVNjb3JlKHNjb3JlVHlwZSkge1xuICAgICAgICBzd2l0Y2ggKHNjb3JlVHlwZSkge1xuICAgICAgICAgICAgY2FzZSBTQ09SRV9ST0NLOlxuICAgICAgICAgICAgICAgIHRoaXMuc2NvcmUgKz0gMjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgU0NPUkVfU1RBVFVFOlxuICAgICAgICAgICAgICAgIHRoaXMuc2NvcmUgKz0gdGhpcy5maWVsZC50aW1lO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBTQ09SRV9UUkVBU1VSRTpcbiAgICAgICAgICAgICAgICAvLyBDYWxsZWQgcmVwZWF0ZWRseSBkdXJpbmcgdGhlIGVuZC1vZi1sZXZlbCBldmVudC5cbiAgICAgICAgICAgICAgICB0aGlzLnNjb3JlICs9IDE7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCIndXNlIHN0cmljdCc7XG5cbmltcG9ydCB7IFNwcml0ZSB9IGZyb20gJy4vU3ByaXRlJztcbmltcG9ydCB7IElucHV0IH0gZnJvbSAnLi9JbnB1dCc7XG5pbXBvcnQgeyBUZXh0IH0gZnJvbSAnLi9UZXh0JztcbmltcG9ydCB7IFZpZXdwb3J0IH0gZnJvbSAnLi9WaWV3cG9ydCc7XG5pbXBvcnQgeyBHQU1FX1dJRFRILCBHQU1FX0hFSUdIVCwgUExBWV9TUEVFRFMgfSBmcm9tICcuL0NvbnN0YW50cyc7XG5pbXBvcnQgeyByZ2JhLCBjcmVhdGVDYW52YXMsIGNsYW1wLCBwYXJ0aWFsVGV4dCwgdXYyeHksIHh5MnFyIH0gZnJvbSAnLi9VdGlsJztcbmltcG9ydCB7IEF1ZGlvIH0gZnJvbSAnLi9BdWRpbyc7XG5pbXBvcnQgeyBIdWQgfSBmcm9tICcuL0h1ZCc7XG5pbXBvcnQgeyBTY3JlZW5TaGFrZSB9IGZyb20gJy4vU2NyZWVuU2hha2UnO1xuaW1wb3J0IHsgU2NyZWVuIH0gZnJvbSAnLi9TY3JlZW4nO1xuaW1wb3J0IHsgTWFpbk1lbnUgfSBmcm9tICcuL01haW5NZW51JztcbmltcG9ydCB7IEluc3RydWN0aW9uc01lbnUgfSBmcm9tICcuL0luc3RydWN0aW9uc01lbnUnO1xuaW1wb3J0IHsgU2Vzc2lvbiB9IGZyb20gJy4vU2Vzc2lvbic7XG5cbi8qKlxuICogR2FtZSBzdGF0ZS5cbiAqL1xuZXhwb3J0IGNsYXNzIEdhbWUge1xuICAgIGluaXQoKSB7XG4gICAgICAgIFNwcml0ZS5sb2FkU3ByaXRlc2hlZXQoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgYXdhaXQgVmlld3BvcnQuaW5pdCgpO1xuICAgICAgICAgICAgYXdhaXQgU2NyZWVuLmluaXQoKTtcbiAgICAgICAgICAgIGF3YWl0IFNwcml0ZS5pbml0KCk7XG4gICAgICAgICAgICBUZXh0LmluaXQoKTtcbiAgICAgICAgICAgIEh1ZC5pbml0KCk7XG4gICAgICAgICAgICBJbnB1dC5pbml0KCk7XG4gICAgICAgICAgICBBdWRpby5pbml0KCk7XG5cbiAgICAgICAgICAgIHRoaXMuZW50aXRpZXMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuZGlhbG9nUGVuZGluZyA9IHt9O1xuICAgICAgICAgICAgdGhpcy5kaWFsb2dTZWVuID0ge307XG4gICAgICAgICAgICB0aGlzLnJvb21zQ2xlYXJlZCA9IHt9O1xuICAgICAgICAgICAgdGhpcy5zaGFkb3dPZmZzZXQgPSAwO1xuICAgICAgICAgICAgdGhpcy5zY3JlZW5zaGFrZXMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuY2FtZXJhID0geyBwb3M6IHsgeDogMCwgeTogMCB9IH07XG4gICAgICAgICAgICB0aGlzLmNhbWVyYUZvY3VzID0geyBwb3M6IHsgeDogMCwgeTogMCB9IH07XG5cbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgKCkgPT4gdGhpcy5wYXVzZSgpKTtcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsICgpID0+IHRoaXMudW5wYXVzZSgpKTtcblxuICAgICAgICAgICAgdGhpcy5zdGFydCgpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBzdGFydCgpIHtcbiAgICAgICAgdGhpcy5mcmFtZSA9IDA7XG4gICAgICAgIHRoaXMuZnJhbWVUaW1lcyA9IFtdO1xuXG4gICAgICAgIHRoaXMubWVudSA9IG5ldyBNYWluTWVudSgpO1xuXG4gICAgICAgIHRoaXMucGxheVNwZWVkID0gMDtcblxuICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKChkZWx0YSkgPT4gdGhpcy5vbkZyYW1lKGRlbHRhKSk7XG4gICAgfVxuXG4gICAgb25GcmFtZSgpIHtcbiAgICAgICAgbGV0IGRlc2lyZWRGcHMgPSB0aGlzLnNlc3Npb24gPyBQTEFZX1NQRUVEU1t0aGlzLnBsYXlTcGVlZF0gOiA2MDtcbiAgICAgICAgbGV0IG5vdyA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgICAgICBsZXQgbGFzdEZyYW1lID0gdGhpcy5sYXN0RnJhbWUgfHwgMDtcblxuICAgICAgICBpZiAobm93IC0gbGFzdEZyYW1lID49IDEwMDAgLyBkZXNpcmVkRnBzKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgICAgICAgICAgdGhpcy5sYXN0RnJhbWUgPSBub3c7XG4gICAgICAgIH1cblxuICAgICAgICBWaWV3cG9ydC5yZXNpemUoKTtcbiAgICAgICAgdGhpcy5kcmF3KCk7XG5cbiAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB0aGlzLm9uRnJhbWUoKSk7XG4gICAgfVxuXG4gICAgdXBkYXRlKCkge1xuICAgICAgICAvLyBQdWxsIGluIGZyYW1lIGJ5IGZyYW1lIGJ1dHRvbiBwdXNoZXMgLyBrZXlwcmVzc2VzIC8gbW91c2UgY2xpY2tzXG4gICAgICAgIElucHV0LnVwZGF0ZSgpO1xuXG4gICAgICAgIC8qZ2FtZS5jYW1lcmEucG9zLnggKz0gMC4xO1xuICAgICAgICBnYW1lLmNhbWVyYS5wb3MueSAtPSAwLjE7Ki9cblxuICAgICAgICAvL2lmIChJbnB1dC5wcmVzc2VkW0lucHV0LkFjdGlvbi5NRU5VXSkge1xuICAgICAgICAvLyAgICB0aGlzLnBhdXNlZCA/IHRoaXMudW5wYXVzZSgpIDogdGhpcy5wYXVzZSgpO1xuICAgICAgICAvL31cblxuICAgICAgICBpZiAodGhpcy5wYXVzZWQpIHJldHVybjtcblxuICAgICAgICAvLyBwZXJmb3JtIGFueSBwZXItZnJhbWUgYXVkaW8gdXBkYXRlc1xuICAgICAgICBBdWRpby51cGRhdGUoKTtcblxuICAgICAgICAvLyBCZWhhdmlvciAoQUksIHBsYXllciBpbnB1dCwgZXRjLilcbiAgICAgICAgLy9wZXJmb3JtKHRoaXMuZW50aXRpZXMpOyA8LS0gY3V0IHRvIHNhdmUgc3BhY2VcblxuICAgICAgICAvLyBwZXJmb3JtIGFueSBxdWV1ZWQgZGFtYWdlXG4gICAgICAgIC8vRGFtYWdlLnBlcmZvcm0odGhpcy5lbnRpdGllcyk7XG5cbiAgICAgICAgLy8gTW92ZW1lbnQgKHBlcmZvcm0gZW50aXR5IHZlbG9jaXRpZXMgdG8gcG9zaXRpb24pXG5cbiAgICAgICAgLy8gRGlhbG9nIHNjaGVkdWxpbmdcbiAgICAgICAgLy9EaWFsb2dTY2hlZHVsaW5nLnBlcmZvcm0oKTtcblxuICAgICAgICAvLyBWaWN0b3J5IGNvbmRpdGlvbnNcblxuICAgICAgICBpZiAodGhpcy5tZW51KSB7XG4gICAgICAgICAgICB0aGlzLm1lbnUudXBkYXRlKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKiAgICBpZiAoIXRoaXMuc2Vzc2lvbikge1xuICAgICAgICAgICAgdGhpcy5zZXNzaW9uID0gbmV3IFNlc3Npb24oKTtcbiAgICAgICAgfSovXG5cbiAgICAgICAgaWYgKHRoaXMuc2Vzc2lvbikgdGhpcy5zZXNzaW9uLnVwZGF0ZSgpO1xuXG4gICAgICAgIC8vIEN1bGxpbmcgKHR5cGljYWxseSB3aGVuIGFuIGVudGl0eSBkaWVzKVxuXG4gICAgICAgIC8vIENhbWVyYSBsb2dpY1xuICAgICAgICAvKmxldCBkaWZmID0ge1xuICAgICAgICAgICAgeDogdGhpcy5wbGF5ZXIucG9zLnggLSB0aGlzLmNhbWVyYS5wb3MueCxcbiAgICAgICAgICAgIHk6IHRoaXMucGxheWVyLnBvcy55IC0gdGhpcy5jYW1lcmEucG9zLnlcbiAgICAgICAgfTsqL1xuXG4gICAgICAgIC8qXG4gICAgICAgIHRoaXMuY2FtZXJhLnBvcy54ICs9IGRpZmYueCAqIDAuMjtcbiAgICAgICAgdGhpcy5jYW1lcmEucG9zLnkgKz0gZGlmZi55ICogMC4yO1xuICAgICAgICAqL1xuXG4gICAgICAgIC8vIFRpY2sgc2NyZWVuc2hha2VzIGFuZCBjdWxsIGZpbmlzaGVkIHNjcmVlbnNoYWtlc1xuICAgICAgICB0aGlzLnNjcmVlbnNoYWtlcyA9IHRoaXMuc2NyZWVuc2hha2VzLmZpbHRlcihzY3JlZW5zaGFrZSA9PlxuICAgICAgICAgICAgc2NyZWVuc2hha2UudXBkYXRlKClcbiAgICAgICAgKTtcblxuICAgICAgICAvLyBGbGlja2VyaW5nIHNoYWRvd3NcbiAgICAgICAgaWYgKGdhbWUuZnJhbWUgJSA2ID09PSAwKSB0aGlzLnNoYWRvd09mZnNldCA9IChNYXRoLnJhbmRvbSgpICogMTApIHwgMDtcblxuICAgICAgICAvLyBJbnRybyBzY3JlZW5zaGFrZVxuICAgICAgICBpZiAoZ2FtZS5mcmFtZSA9PT0gMzApIGdhbWUuc2NyZWVuc2hha2VzLnB1c2gobmV3IFNjcmVlblNoYWtlKDIwLCAyMCwgMjApKTtcbiAgICB9XG5cbiAgICBkcmF3KCkge1xuICAgICAgICAvLyBSZXNldCBjYW52YXMgdHJhbnNmb3JtIGFuZCBzY2FsZVxuICAgICAgICBWaWV3cG9ydC5jdHguc2V0VHJhbnNmb3JtKFZpZXdwb3J0LnNjYWxlLCAwLCAwLCBWaWV3cG9ydC5zY2FsZSwgMCwgMCk7XG5cbiAgICAgICAgVmlld3BvcnQuY3R4LmZpbGxTdHlsZSA9ICdibGFjayc7XG4gICAgICAgIFZpZXdwb3J0LmN0eC5maWxsUmVjdCgwLCAwLCBWaWV3cG9ydC53aWR0aCwgVmlld3BvcnQuaGVpZ2h0KTtcblxuICAgICAgICBWaWV3cG9ydC5jdHgudHJhbnNsYXRlKChWaWV3cG9ydC53aWR0aCAtIEdBTUVfV0lEVEgpIC8gMiB8IDAsIChWaWV3cG9ydC5oZWlnaHQgLSBHQU1FX0hFSUdIVCkgLyAyIHwgMCk7XG5cbiAgICAgICAgaWYgKHRoaXMuc2Vzc2lvbikgdGhpcy5zZXNzaW9uLmRyYXcoKTtcbiAgICAgICAgaWYgKHRoaXMubWVudSkgdGhpcy5tZW51LmRyYXcoKTtcblxuICAgICAgICBTY3JlZW4uZHJhd1RvVmlld3BvcnQoKTtcblxuICAgICAgICByZXR1cm47XG5cbiAgICAgICAgLy8gUmVuZGVyIHNjcmVlbnNoYWtlcyAoY2FudmFzIHRyYW5zbGF0aW9uKVxuICAgICAgICBsZXQgc2hha2VYID0gMCwgc2hha2VZID0gMDtcbiAgICAgICAgdGhpcy5zY3JlZW5zaGFrZXMuZm9yRWFjaChzaGFrZSA9PiB7XG4gICAgICAgICAgICBzaGFrZVggKz0gc2hha2UueDtcbiAgICAgICAgICAgIHNoYWtlWSArPSBzaGFrZS55O1xuICAgICAgICB9KTtcbiAgICAgICAgVmlld3BvcnQuY3R4LnRyYW5zbGF0ZShzaGFrZVgsIHNoYWtlWSk7XG5cbiAgICAgICAgLy9NYXplLmRyYXcoKTtcblxuICAgICAgICBmb3IgKGxldCBlbnRpdHkgb2YgdGhpcy5lbnRpdGllcykge1xuICAgICAgICAgICAgaWYgKCFlbnRpdHkueiB8fCBlbnRpdHkueiA8IDEwMCkgZW50aXR5LmRyYXcoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIFZpZXdwb3J0LmN0eC5kcmF3SW1hZ2UoXG4gICAgICAgICAgICBTcHJpdGUuc2hhZG93LmltZyxcbiAgICAgICAgICAgIDAsIDAsXG4gICAgICAgICAgICA1MDAsIDUwMCxcbiAgICAgICAgICAgIC10aGlzLnNoYWRvd09mZnNldCwgLXRoaXMuc2hhZG93T2Zmc2V0LFxuICAgICAgICAgICAgVmlld3BvcnQud2lkdGggKyB0aGlzLnNoYWRvd09mZnNldCAqIDIsXG4gICAgICAgICAgICBWaWV3cG9ydC5oZWlnaHQgKyB0aGlzLnNoYWRvd09mZnNldCAqIDJcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwYXVzZSgpIHtcbiAgICAgICAgaWYgKHRoaXMucGF1c2VkKSByZXR1cm47XG4gICAgICAgIHRoaXMucGF1c2VkID0gdHJ1ZTtcbiAgICAgICAgQXVkaW8ucGF1c2UoKTtcbiAgICB9XG5cbiAgICB1bnBhdXNlKCkge1xuICAgICAgICBpZiAoIXRoaXMucGF1c2VkKSByZXR1cm47XG4gICAgICAgIHRoaXMucGF1c2VkID0gZmFsc2U7XG4gICAgICAgIEF1ZGlvLnVucGF1c2UoKTtcbiAgICB9XG5cbiAgICBzdGFydFNlc3Npb24oKSB7XG4gICAgICAgIHRoaXMubWVudSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5zZXNzaW9uID0gbmV3IFNlc3Npb24oKTtcbiAgICB9XG5cbiAgICBzaG93TWFpbk1lbnUoKSB7XG4gICAgICAgIHRoaXMubWVudSA9IG5ldyBNYWluTWVudSgpO1xuICAgICAgICB0aGlzLnNlc3Npb24gPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgc2hvd0luc3RydWN0aW9ucygpIHtcbiAgICAgICAgdGhpcy5tZW51ID0gbmV3IEluc3RydWN0aW9uc01lbnUoKTtcbiAgICAgICAgdGhpcy5zZXNzaW9uID0gdW5kZWZpbmVkO1xuICAgIH1cbn1cblxuZXhwb3J0IGNvbnN0IGdhbWUgPSBuZXcgR2FtZSgpO1xuIiwiaW1wb3J0IHsgZ2FtZSB9IGZyb20gJy4vR2FtZSc7XG5cbi8qKlxuICogQ3JlYXRlIGFuZCBsYXVuY2ggZ2FtZS5cbiAqL1xuZ2FtZS5pbml0KCk7XG4iXSwibmFtZXMiOlsiREVBVEhfRlJBTUVTIl0sIm1hcHBpbmdzIjoiOzs7SUFBQTtJQUNBO0lBQ0E7QUFDQTtJQUNPLE1BQU0sS0FBSyxHQUFHLHVCQUF1QixDQUFDO0FBSTdDO0lBQ0E7SUFDQTtJQUNPLE1BQU0sVUFBVSxHQUFHLEdBQUcsQ0FBQztJQUN2QixNQUFNLFdBQVcsR0FBRyxHQUFHLENBQUM7QUFDL0I7SUFDQTtJQUNBO0lBQ08sTUFBTSxZQUFZLEdBQUcsRUFBRSxDQUFDO0lBQ3hCLE1BQU0sYUFBYSxHQUFHLEVBQUUsQ0FBQztBQUNoQztJQUNBO0lBQ08sTUFBTSxVQUFVLEdBQUcsQ0FBQyxDQUFDO0lBQ3JCLE1BQU0sV0FBVyxHQUFHLEVBQUUsQ0FBQztJQUN2QixNQUFNLGVBQWUsR0FBRyxFQUFFLEdBQUcsVUFBVSxDQUFDO0FBRS9DO0lBQ0E7SUFDTyxNQUFNLFVBQVUsR0FBRyxFQUFFLENBQUM7SUFDdEIsTUFBTSxVQUFVLEdBQUcsRUFBRSxDQUFDO0FBQzdCO0lBQ0E7SUFDTyxNQUFNLFdBQVcsR0FBRyxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxHQUFHLENBQUMsQ0FBQztBQUNqRDtJQUNBO0lBQ08sTUFBTSxXQUFXLEdBQUc7SUFDM0IsSUFBSSxhQUFhO0lBQ2pCLElBQUksYUFBYTtJQUNqQixJQUFJLFlBQVk7SUFDaEIsSUFBSSxlQUFlO0lBQ25CLENBQUMsQ0FBQztBQUNGO0lBQ0E7SUFDQTtJQUNPLE1BQU0sVUFBVSxHQUFHLEVBQUM7SUFDcEIsTUFBTSxZQUFZLEdBQUcsRUFBQztJQUN0QixNQUFNLGNBQWMsR0FBRzs7SUN4QzlCO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDTyxNQUFNLFFBQVEsR0FBRztJQUN4QixJQUFJLElBQUksR0FBRztJQUNYLFFBQVEsUUFBUSxDQUFDLE1BQU0sR0FBRyxRQUFRLENBQUMsY0FBYyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQzVELFFBQVEsUUFBUSxDQUFDLEdBQUcsR0FBRyxRQUFRLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUN4RCxRQUFRLFFBQVEsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDOUIsS0FBSztBQUNMO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQSxJQUFJLE1BQU0sQ0FBQyxLQUFLLEVBQUU7SUFDbEIsUUFBUSxJQUFJLEdBQUcsR0FBRyxNQUFNLENBQUMsZ0JBQWdCO0lBQ3pDLFlBQVksS0FBSyxHQUFHLFFBQVEsQ0FBQyxNQUFNLENBQUMsV0FBVztJQUMvQyxZQUFZLE1BQU0sR0FBRyxRQUFRLENBQUMsTUFBTSxDQUFDLFlBQVk7SUFDakQsWUFBWSxRQUFRLEdBQUcsS0FBSyxHQUFHLEdBQUc7SUFDbEMsWUFBWSxTQUFTLEdBQUcsTUFBTSxHQUFHLEdBQUcsQ0FBQztBQUNyQztJQUNBLFFBQVE7SUFDUixZQUFZLEtBQUs7SUFDakIsWUFBWSxRQUFRLENBQUMsTUFBTSxDQUFDLEtBQUssS0FBSyxRQUFRO0lBQzlDLFlBQVksUUFBUSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEtBQUssU0FBUztJQUNoRCxVQUFVO0lBQ1YsWUFBWSxRQUFRLENBQUMsTUFBTSxDQUFDLEtBQUssR0FBRyxRQUFRLENBQUM7SUFDN0MsWUFBWSxRQUFRLENBQUMsTUFBTSxDQUFDLE1BQU0sR0FBRyxTQUFTLENBQUM7QUFDL0M7SUFDQSxZQUFZLFFBQVEsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsUUFBUSxHQUFHLFVBQVUsRUFBRSxTQUFTLEdBQUcsV0FBVyxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7SUFDeEcsWUFBWSxRQUFRLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUNsRSxZQUFZLFFBQVEsQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLEdBQUcsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ3BFLFlBQVksUUFBUSxDQUFDLE1BQU0sR0FBRztJQUM5QixnQkFBZ0IsQ0FBQyxFQUFFLENBQUMsUUFBUSxDQUFDLEtBQUssR0FBRyxDQUFDLElBQUksQ0FBQztJQUMzQyxnQkFBZ0IsQ0FBQyxFQUFFLENBQUMsUUFBUSxDQUFDLE1BQU0sR0FBRyxDQUFDLElBQUksQ0FBQztJQUM1QyxhQUFhLENBQUM7SUFDZCxZQUFZLFFBQVEsQ0FBQyxXQUFXLEdBQUcsS0FBSyxDQUFDO0lBQ3pDLFlBQVksUUFBUSxDQUFDLFlBQVksR0FBRyxNQUFNLENBQUM7QUFDM0M7SUFDQTtJQUNBO0lBQ0EsWUFBWSxRQUFRLENBQUMsR0FBRyxDQUFDLHFCQUFxQixHQUFHLEtBQUssQ0FBQztJQUN2RCxTQUFTO0FBQ1Q7SUFDQTtJQUNBO0lBQ0EsS0FBSztBQUNMO0lBQ0EsSUFBSSxnQkFBZ0IsR0FBRztJQUN2QixRQUFRLFFBQVEsQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsUUFBUSxDQUFDLEtBQUssRUFBRSxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDckUsS0FBSztJQUNMLENBQUM7O0lDOENNLFNBQVMsSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRTtJQUNqQyxJQUFJLE9BQU8sQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3ZDLENBQUM7QUFDRDtJQUNPLFNBQVMsWUFBWSxDQUFDLEtBQUssRUFBRSxNQUFNLEVBQUU7SUFDNUMsSUFBSSxJQUFJLE1BQU0sR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQ2xELElBQUksTUFBTSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7SUFDekIsSUFBSSxNQUFNLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQztJQUMzQixJQUFJLElBQUksR0FBRyxHQUFHLE1BQU0sQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDdEMsSUFBSSxPQUFPLEVBQUUsTUFBTSxFQUFFLEdBQUcsRUFBRSxDQUFDO0lBQzNCOztJQzNIQTtJQUNBO0lBQ0E7SUFDTyxNQUFNLFdBQVc7SUFDeEI7SUFDQSxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEVBQUU7SUFDaEMsRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxFQUFFO0lBQy9CLEVBQUUsTUFBTSxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRTtJQUNsQyxFQUFFLE1BQU07SUFDUixHQUFHLG82VEFBbzZULEdBQUU7SUFDejZUOztJQ0xBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDTyxNQUFNLE1BQU0sR0FBRztJQUN0QjtJQUNBO0lBQ0EsSUFBSSxlQUFlLENBQUMsRUFBRSxFQUFFO0lBQ3hCLFFBQVEsSUFBSSxLQUFLLEdBQUcsSUFBSSxLQUFLLEVBQUUsQ0FBQztJQUNoQyxRQUFRLEtBQUssQ0FBQyxNQUFNLEdBQUcsRUFBRSxDQUFDO0lBQzFCLFFBQVEsS0FBSyxDQUFDLEdBQUcsR0FBRyxXQUFXLENBQUMsTUFBTSxDQUFDO0lBQ3ZDLFFBQVEsTUFBTSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7SUFDN0IsS0FBSztBQUNMO0lBQ0EsSUFBSSxJQUFJLEdBQUc7SUFDWDtJQUNBLFFBQVEsTUFBTSxDQUFDLElBQUksR0FBRyxlQUFlLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQzVEO0lBQ0EsUUFBUSxPQUFPO0lBQ2YsS0FBSztBQUNMO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBLElBQUksVUFBVSxDQUFDLEdBQUcsRUFBRSxNQUFNLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRTtJQUNsQyxRQUFRLEdBQUcsQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDNUUsS0FBSztBQUNMO0lBQ0EsSUFBSSxrQkFBa0IsQ0FBQyxNQUFNLEVBQUUsR0FBRyxFQUFFLFFBQVEsRUFBRTtJQUM5QyxRQUFRLElBQUksRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEdBQUcsSUFBSSxDQUFDLGlCQUFpQjtJQUM3QyxZQUFZLE1BQU07SUFDbEIsWUFBWSxHQUFHO0lBQ2YsU0FBUyxDQUFDO0lBQ1YsUUFBUSxJQUFJLFFBQVEsRUFBRTtJQUN0QixZQUFZLFFBQVEsQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLENBQUM7SUFDaEMsWUFBWSxRQUFRLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDN0UsWUFBWSxRQUFRLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUMxQyxZQUFZLFFBQVEsQ0FBQyxHQUFHLENBQUMsU0FBUztJQUNsQyxnQkFBZ0IsTUFBTSxDQUFDLEdBQUc7SUFDMUIsZ0JBQWdCLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ2hDLGdCQUFnQixDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUNoQyxhQUFhLENBQUM7SUFDZCxZQUFZLFFBQVEsQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLENBQUM7SUFDbkMsU0FBUyxNQUFNO0lBQ2YsWUFBWSxRQUFRLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsR0FBRyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUNyRCxTQUFTO0lBQ1QsS0FBSztBQUNMO0lBQ0EsSUFBSSxpQkFBaUIsQ0FBQyxNQUFNLEVBQUUsR0FBRyxFQUFFO0lBQ25DLFFBQVEsT0FBTztJQUNmLFlBQVksQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUM5RSxZQUFZLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDOUUsU0FBUyxDQUFDO0lBQ1YsS0FBSztJQUNMLENBQUMsQ0FBQztBQUNGO0lBQ0E7QUFDQTtJQUNBLFNBQVMsZUFBZSxDQUFDLElBQUksRUFBRSxNQUFNLEVBQUU7SUFDdkMsSUFBSSxPQUFPLGlCQUFpQixDQUFDLGNBQWMsQ0FBQyxHQUFHLElBQUksQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDO0lBQzlELENBQUM7QUFDRDtJQUNBLFNBQVMsaUJBQWlCLENBQUMsTUFBTSxFQUFFLE1BQU0sRUFBRTtJQUMzQyxJQUFJLElBQUksQ0FBQyxHQUFHLE1BQU0sQ0FBQyxLQUFLO0lBQ3hCLFFBQVEsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUM7QUFDMUI7SUFDQSxJQUFJLE9BQU87SUFDWCxRQUFRLEdBQUcsRUFBRSxNQUFNO0lBQ25CO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQSxRQUFRLE1BQU0sRUFBRSxDQUFDLE1BQU0sSUFBSSxNQUFNLENBQUMsQ0FBQyxJQUFJLE1BQU0sR0FBRyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFO0lBQ2xGLEtBQUssQ0FBQztJQUNOLENBQUM7QUFDRDtJQUNBLFNBQVMsY0FBYyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRTtJQUNwQyxJQUFJLE1BQU0sTUFBTSxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUM7SUFDaEMsSUFBSSxNQUFNLFdBQVcsR0FBRyxZQUFZLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQzNDLElBQUksV0FBVyxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUM5RCxJQUFJLE9BQU8sV0FBVyxDQUFDLE1BQU0sQ0FBQztJQUM5Qjs7SUM5RkE7SUFDQSxNQUFNLE1BQU0sR0FBRztJQUNmLElBQUksRUFBRSxLQUFLLEVBQUU7SUFDYixJQUFJLElBQUksR0FBRyxFQUFFO0lBQ2IsSUFBSSxJQUFJLEdBQUcsRUFBRTtJQUNiLElBQUksS0FBSyxFQUFFLEVBQUU7SUFDYixJQUFJLElBQUksR0FBRyxFQUFFO0lBQ2IsSUFBSSxJQUFJLEdBQUcsRUFBRTtJQUNiLElBQUksS0FBSyxFQUFFLEVBQUU7SUFDYixDQUFDLENBQUM7QUFDRjtJQUNBO0lBQ0E7SUFDQTtJQUNBLE1BQU0sVUFBVSxHQUFHO0lBQ25CLElBQUksSUFBSSxRQUFRLE1BQU0sQ0FBQyxFQUFFO0lBQ3pCLElBQUksSUFBSSxRQUFRLE1BQU0sQ0FBQyxJQUFJO0lBQzNCLElBQUksSUFBSSxRQUFRLE1BQU0sQ0FBQyxJQUFJO0lBQzNCLElBQUksSUFBSSxRQUFRLE1BQU0sQ0FBQyxLQUFLO0lBQzVCLElBQUksT0FBTyxLQUFLLE1BQU0sQ0FBQyxFQUFFO0lBQ3pCLElBQUksU0FBUyxHQUFHLE1BQU0sQ0FBQyxJQUFJO0lBQzNCLElBQUksU0FBUyxHQUFHLE1BQU0sQ0FBQyxJQUFJO0lBQzNCLElBQUksVUFBVSxFQUFFLE1BQU0sQ0FBQyxLQUFLO0lBQzVCLElBQUksS0FBSyxPQUFPLE1BQU0sQ0FBQyxJQUFJO0lBQzNCLENBQUMsQ0FBQztBQUNGO0lBQ08sTUFBTSxLQUFLLEdBQUc7SUFDckIsSUFBSSxNQUFNO0lBQ1YsSUFBSSxVQUFVO0FBQ2Q7SUFDQSxJQUFJLElBQUksR0FBRztJQUNYO0lBQ0E7SUFDQTtJQUNBLFFBQVEsSUFBSSxDQUFDLE1BQU0sR0FBRyxFQUFFLENBQUM7QUFDekI7SUFDQTtJQUNBO0lBQ0E7SUFDQSxRQUFRLElBQUksQ0FBQyxPQUFPLEdBQUcsRUFBRSxDQUFDO0FBQzFCO0lBQ0EsUUFBUSxNQUFNLENBQUMsZ0JBQWdCLENBQUMsU0FBUyxFQUFFLEtBQUssSUFBSTtJQUNwRCxZQUFZLElBQUksS0FBSyxHQUFHO0lBQ3hCLGdCQUFnQixFQUFFLEVBQUUsSUFBSSxJQUFJLEVBQUUsQ0FBQyxPQUFPLEVBQUU7SUFDeEMsZ0JBQWdCLEdBQUcsRUFBRSxLQUFLLENBQUMsR0FBRztJQUM5QixnQkFBZ0IsSUFBSSxFQUFFLEtBQUssQ0FBQyxJQUFJO0lBQ2hDLGdCQUFnQixNQUFNLEVBQUUsS0FBSyxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksS0FBSyxDQUFDLE1BQU0sQ0FBQyxJQUFJO0lBQ3pFLGFBQWEsQ0FBQztJQUNkLFlBQVksS0FBSyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDckMsWUFBWSxLQUFLLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUN0QyxZQUFZLE9BQU8sQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDL0IsU0FBUyxDQUFDLENBQUM7SUFDWCxLQUFLO0FBQ0w7SUFDQSxJQUFJLE1BQU0sR0FBRztJQUNiLFFBQVEsSUFBSSxHQUFHLEdBQUcsSUFBSSxJQUFJLEVBQUUsQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUN2QyxRQUFRLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsS0FBSyxJQUFJLEtBQUssQ0FBQyxFQUFFLEdBQUcsR0FBRyxHQUFHLElBQUksQ0FBQyxDQUFDO0lBQzNFLEtBQUs7QUFDTDtJQUNBLElBQUksY0FBYyxHQUFHO0lBQ3JCLFFBQVEsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsRUFBRSxDQUFDO0lBQ3JGLEtBQUs7QUFDTDtJQUNBLElBQUksZUFBZSxHQUFHO0lBQ3RCLFFBQVEsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxJQUFJLEdBQUcsRUFBRSxDQUFDO0lBQ3RGLEtBQUs7QUFDTDtJQUNBLElBQUksaUJBQWlCLEdBQUc7SUFDeEIsUUFBUSxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLE1BQU0sR0FBRyxTQUFTLENBQUM7SUFDL0YsS0FBSztBQUNMO0lBQ0EsSUFBSSxPQUFPLEdBQUc7SUFDZCxRQUFRLElBQUksQ0FBQyxNQUFNLEdBQUcsRUFBRSxDQUFDO0lBQ3pCLEtBQUs7SUFDTDs7SUNuRUE7SUFDQTtJQUNBO0lBQ0E7SUFDQSxNQUFNLHVCQUF1QixHQUFHO0lBQ2hDLElBQUksa0JBQWtCO0lBQ3RCLElBQUksa0JBQWtCO0lBQ3RCLElBQUksa0JBQWtCO0lBQ3RCLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDWDtJQUNBLE1BQU0sZ0JBQWdCLEdBQUcsdUJBQXVCLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsRUFBRSxJQUFJLEVBQUUsR0FBRyxLQUFLO0lBQ3RGLElBQUksR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksR0FBRyxHQUFHLENBQUM7SUFDM0IsSUFBSSxPQUFPLEdBQUcsQ0FBQztJQUNmLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztBQUNQO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNPLE1BQU0sSUFBSSxHQUFHO0lBQ3BCLElBQUksSUFBSSxHQUFHO0lBQ1gsUUFBUSxJQUFJLENBQUMsS0FBSyxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDO0FBQ3JDO0lBQ0EsUUFBUSxJQUFJLENBQUMsS0FBSyxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzNELFFBQVEsSUFBSSxDQUFDLFlBQVksR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQztJQUN4RSxRQUFRLElBQUksQ0FBQyxJQUFJLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDL0QsUUFBUSxJQUFJLENBQUMsV0FBVyxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUUsRUFBRSxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDO0lBQ3hFLFFBQVEsSUFBSSxDQUFDLE1BQU0sR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQztJQUNyRSxRQUFRLElBQUksQ0FBQyxHQUFHLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDN0Q7SUFDQSxRQUFRLElBQUksQ0FB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QUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxD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Q0FBQzs7SUNsSk0sTUFBTSxlQUFlLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsSUFBSSxLQUFLLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxJQUFJLE1BQU0sR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLEVBQUUsWUFBWSxFQUFFLG9CQUFvQixFQUFFLFlBQVksRUFBRSxhQUFhLENBQUMsRUFBRSxFQUFFLEtBQUssRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLFFBQVEsRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxVQUFVLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxRQUFRLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxZQUFZLEVBQUUsb0JBQW9CLEVBQUUsWUFBWSxFQUFFLGNBQWMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLEVBQUUsWUFBWSxFQUFFLG9CQUFvQixFQUFFLFlBQVksRUFBRSxhQUFhLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQzs7SUNPMzlCLE1BQU0sS0FBSyxHQUFHO0lBQ3JCLElBQUksSUFBSSxHQUFHO0lBQ1gsUUFBUSxLQUFLLENBQUMsV0FBVyxHQUFHLEtBQUssQ0FBQztBQUNsQztJQUNBLFFBQVEsS0FBSyxDQUFDLEdBQUcsR0FBRyxLQUFLLENBQUM7SUFDMUIsUUFBUSxLQUFLLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQyxHQUFHLENBQUMsVUFBVSxFQUFFLENBQUM7SUFDN0MsUUFBUSxLQUFLLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLFdBQVcsQ0FBQyxDQUFDO0lBQ25ELFFBQVEsSUFBSSxDQUFDLFlBQVksR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDO0FBQ3hDO0lBQ0EsUUFBUSxLQUFLLENBQUMsT0FBTyxHQUFHLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxHQUFHLEVBQUUsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDN0YsUUFBUSxLQUFLLENBQUMsSUFBSSxHQUFHLEdBQUcsSUFBSSxFQUFFLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksR0FBRyxHQUFHLENBQUMsRUFBRSxNQUFNLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDdkUsUUFBUSxLQUFLLENBQUMsV0FBVyxHQUFHLEdBQUcsRUFBRSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJ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QTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0FBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtBQUNBO0lBQ0E7SUFDQTtBQUNBO0lBQ0E7SUFDQTtJQUNBO0FBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0FBQ0E7SUFDQTtJQUNBO0FBQ0E7SUFDQTtJQUNBO0FBQ0E7SUFDQTtBQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7QUFDQTtJQUNBO0FBQ0E7SUFDQTtJQUNBO0lBQ0E7QUFDQTtJQUNBO0FBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7QUFDQTtJQUNBO0FBQ0E7SUFDQTtJQUNBO0FBQ0E7SUFDQTtJQUNBO0FBQ0E7SUFDQTtJQUNBO0FBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0FBQ0E7SUFDQTtJQUNBO0lBQ0E7QUFDQTtJQUNBO0FBQ0E7SUFDQTtJQUNBO0lBQ0E7QUFDQTtJQUNBO0lBQ0E7SUFDQTtBQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtBQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtBQUNBO0lBQ0E7QUFDQTtJQUNBO0lBQ0E7SUFDQTtBQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0FBQ0E7SUFDQTtJQUNBO0lBQ0E7QUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0FBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtBQUNBO0lBQ0E7SUFDQTtBQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7QUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtBQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0FBQ0E7SUFDQTtBQUNBO0lBQ0E7SUFDQTtBQUNBO0lBQ0E7SUFD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QUFRLEVBQUU7SUFDbEIsQ0FBQyxDQUFDO0FBQ0Y7SUFDTyxNQUFNLFdBQVcsR0FBRztJQUMzQixJQUFJLENBQUMsS0FBSyxDQUFDLFVBQVUsR0FBRztJQUN4QixRQUFRLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUU7SUFDdkIsUUFBUSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFO0lBQ3ZCLFFBQVEsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUU7SUFDdEIsUUFBUSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRTtJQUN0QixRQUFRLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFO0lBQ3RCLFFBQVEsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUU7SUFDdEIsS0FBSztJQUNMLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxHQUFHO0lBQ3ZCLFFBQVEsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFO0lBQ3hCLFFBQVEsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFO0lBQ3hCLFFBQVEsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRTtJQUN2QixRQUFRLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUU7SUFDdkIsUUFBUSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFO0lBQ3ZCLFFBQVEsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRTtJQUN2QixLQUFLO0lBQ0wsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLEdBQUc7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LENBQUM7SUFDcEMsU0FBUztBQUNUO0lBQ0EsUUFBUSxJQUFJLElBQUksQ0FBQyxLQUFLLEtBQUssS0FBSyxDQUFDLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUU7SUFDNUUsWUFBWSxJQUFJLENBQUMsU0FBUyxHQUFHLEtBQUssQ0FBQyxPQUFPLENBQUM7SUFDM0MsU0FBUztBQUNUO0lBQ0EsUUFBUSxJQUFJLEtBQUssQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRTtJQUNsRyxZQUFZLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDO0lBQ2xELFlBQVksSUFBSSxDQUFDLFNBQVMsR0FBRyxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsS0FBSyxDQUFDLEtBQUssRUFBRSxLQUFLLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNsRixTQUFTO0FBQ1Q7SUFDQSxRQUFRLElBQUksS0FBSyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRTtJQUMzQyxZQUFZLElBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQztJQUNyQyxZQUFZLE9BQU87SUFDbkIsU0FBUztBQUNUO0lBQ0EsUUFBUSxJQUFJLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ2xDLEtBQUs7QUFDTDtJQUNBLElBQUksSUFBSSxHQUFHO0lBQ1gsUUFBUSxJQUFJLElBQUksR0FBRyxHQUFHLENBQUM7QUFDdkI7SUFDQSxRQUFRLFFBQVEsSUFBSSxDQUFDLEtBQUs7SUFDMUIsWUFBWSxLQUFLLEtBQUssQ0FBQyxLQUFLO0lBQzVCLGdCQUFnQixJQUFJLEdBQUdBLGNBQVksQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7SUFDcEQsZ0JBQWdCLE1BQU07SUFDdEIsWUFBWSxLQUFLLEtBQUssQ0FBQyxJQUFJO0lBQzNCLGdCQUFnQixPQUFPO0lBQ3ZCLFNBQVM7QUFDVDtJQUNBLFFBQVEsTUFBTSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDM0MsS0FBSztJQUNMOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQ3ZFTyxNQUFNLEtBQUssR0FBRztJQUNyQixJQUFJLE1BQU0sRUFBRSxTQUFTO0FBQ3JCO0lBQ0EsSUFBSSxJQUFJLENBQUMsV0FBVyxFQUFFO0lBQ3RCLFFBQVEsT0FBTyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDbEM7SUFDQSxRQUFRLElBQUksS0FBSyxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUMsV0FBVyxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDcEUsUUFBUSxJQUFJLENBQUMsS0FBSyxFQUFFLE1BQU0sSUFBSSxLQUFLLENBQUMsQ0FBQyxzQkFBc0IsRUFBRSxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDNUU7SUFDQTtJQUNBO0FBQ0E7SUFDQSxRQUFRLElBQUksTUFBTSxHQUFHLEtBQUssQ0FBQyxNQUFNLENB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\n","/**\n * Constants\n */\n\nexport const TITLE = 'WIZARD WITH A SHOTGUN';\n\n// Spritesheet URI (produced during gulp build)\nexport const SPRITESHEET_URI = 'sprites.png';\n\n// The playable area. Note that this is the desired dimensions, but the actual on-screen dimensions\n// may be larger to maintain aspect ratio (see `Viewport.width` & `Viewport.height`).\nexport const GAME_WIDTH = 640;\nexport const GAME_HEIGHT = 400;\n\n// The \"screen area\". This is an ASCII game and so most of the game logic doesn't care about browser\n// pixels, we care about the ASCII display area (80x25).\nexport const SCREEN_WIDTH = 80;\nexport const SCREEN_HEIGHT = 25;\n\n// The size of our on-screen characters (given dimensions above, this is 80 cols by 25 rows).\nexport const CHAR_WIDTH = 8;\nexport const CHAR_HEIGHT = 16;\nexport const CHARSHEET_WIDTH = 16 * CHAR_WIDTH;\nexport const CHARSHEET_HEIGHT = 32 * CHAR_HEIGHT;\n\n// Game constants, copied from the original game\nexport const LEVEL_ROWS = 20;\nexport const LEVEL_COLS = 79;\n\n// Play speeds, expressed as frames per second. Each number is evenly divisible into 1000ms.\nexport const PLAY_SPEEDS = [10, 20, 40, 76, 142];\n\n// Playable levels (see `Levels-gen.js` for the level data)\nexport const LEVEL_ORDER = [\n    'Easy Street',\n    'Long Island',\n    'Ghost Town',\n    'Tunnel Vision'\n];\n\n// Score events (note, these are just identifiers for the types of score increases, not\n// actual score values).\nexport const SCORE_ROCK = 0\nexport const SCORE_STATUE = 1\nexport const SCORE_TREASURE = 2\n","'use strict';\n\nimport { GAME_WIDTH, GAME_HEIGHT } from './Constants';\n\n/**\n * Viewport\n *\n * Represents the game display (for us, a canvas).\n */\nexport const Viewport = {\n    init() {\n        Viewport.canvas = document.getElementById('canvas');\n        Viewport.ctx = Viewport.canvas.getContext('2d');\n        Viewport.resize(true);\n    },\n\n    // Resize the canvas to give us approximately our desired game display size.\n    //\n    // Rather than attempt to explain it, here's a concrete example:\n    //\n    //     we start with a desired game dimension:   480x270px\n    //          get the actual browser dimensions:  1309x468px\n    //          factor in the display's DPI ratio:  2618x936px\n    //         now calculate the horizontal scale:       5.45x\n    //                     and the vertical scale:       3.46x\n    //            our new offical game scaling is:        5.4x\n    //       and our official viewport dimensions:   484x173px\n    //\n    // This approach emphasizes correct aspect ratio and maintains full-window rendering, at\n    // the potential cost of limiting visibility of the game itself in either the X or Y axis.\n    // If you use this approach, make sure your GUI can \"float\" (otherwise there may be whole\n    // UI elements the player cannot see!).\n    resize(force) {\n        let dpi = window.devicePixelRatio,\n            width = Viewport.canvas.clientWidth,\n            height = Viewport.canvas.clientHeight,\n            dpiWidth = width * dpi,\n            dpiHeight = height * dpi;\n\n        if (\n            force ||\n            Viewport.canvas.width !== dpiWidth ||\n            Viewport.canvas.height !== dpiHeight\n        ) {\n            Viewport.canvas.width = dpiWidth;\n            Viewport.canvas.height = dpiHeight;\n\n            Viewport.scale = ((Math.min(dpiWidth / GAME_WIDTH, dpiHeight / GAME_HEIGHT) * 10) | 0) / 10;\n            Viewport.width = Math.ceil(dpiWidth / Viewport.scale);\n            Viewport.height = Math.ceil(dpiHeight / Viewport.scale);\n            Viewport.center = {\n                u: (Viewport.width / 2) | 0,\n                v: (Viewport.height / 2) | 0\n            };\n            Viewport.clientWidth = width;\n            Viewport.clientHeight = height;\n\n            // Note: smoothing flag gets reset on every resize by some browsers, which is why\n            // we do it here.\n            Viewport.ctx.imageSmoothingEnabled = false;\n        }\n\n        // We do this every frame, not just on resize, due to browser sometimes \"forgetting\".\n        //Viewport.canvas.style.cursor = 'none';\n    },\n\n    fillViewportRect() {\n        Viewport.ctx.fillRect(0, 0, Viewport.width, Viewport.height);\n    }\n};\n","'use strict';\n\nimport { game } from './Game';\nimport { Viewport } from './Viewport';\n\nexport function qr2xy(pos) {\n    return {\n        x: pos.q * 13,\n        y: pos.q * 6 + pos.r * 12\n    };\n}\n\nexport function xy2qr(pos) {\n    let qrFraction = {\n        q: (pos.x / 13),\n        r: ((pos.y - pos.x * 6 / 13) / 12)\n    };\n    return qrRounded(qrFraction);\n}\n\nexport function xy2uv(pos) {\n    return {\n        u: pos.x + Viewport.center.u - game.camera.pos.x,\n        v: pos.y + Viewport.center.v - game.camera.pos.y\n    };\n}\n\nexport function uv2xy(pos) {\n    return {\n        x: pos.u - Viewport.center.u + game.camera.pos.x,\n        y: pos.v - Viewport.center.v + game.camera.pos.y\n    };\n}\n\nexport function qr2qrs(pos) {\n    return { q: pos.q, r: pos.r, s: -pos.q-pos.r };\n}\n\nexport function qrs2qr(pos) {\n    return { q: pos.q, r: pos.r };\n}\n\n// When you \"round\" a fractional hexagonal value to an integer one (usually to convert\n// a mouse click to a hex grid), you can't just `Math.floor()` like you can with standard\n// square tiles - you'll never get the behavior right on the angled sides of the hexagons.\n//\n// To get the behavior you want, you need to convert to cubed coordinates (q,r,s), then\n// individually round each one and eliminate the one furthest away from your original value.\nexport function qrRounded(pos) {\n    let qrsA = qr2qrs(pos),\n        qrsB = {\n            q: Math.round(qrsA.q),\n            r: Math.round(qrsA.r),\n            s: Math.round(qrsA.s)\n        },\n        diffQ = Math.abs(qrsA.q - qrsB.q),\n        diffR = Math.abs(qrsA.r - qrsB.r),\n        diffS = Math.abs(qrsA.s - qrsB.s);\n\n    if (diffQ > diffR && diffQ > diffS) {\n        qrsB.q = -qrsB.r-qrsB.s;\n    } else if (diffR > diffS) {\n        qrsB.r = -qrsB.q-qrsB.s;\n    } else {\n        qrsB.s = -qrsB.q-qrsB.r;\n    }\n\n    return qrs2qr(qrsB);\n}\n\nexport function clamp(value, min, max) {\n    return value < min ? min : value > max ? max : value;\n}\n\nexport function flood(maze, pos, maxDistance = Infinity) {\n    let result = array2d(maze[0].length, maze.length, () => Infinity);\n    let stack = [{ ...pos, cost: 0 }];\n    while (stack.length > 0) {\n        let { q, r, cost } = stack.shift();\n        if (result[r][q] <= cost) continue;\n        result[r][q] = cost++;\n        if (result[r][q] >= maxDistance) continue;\n        if (maze[r][q + 1] && result[r][q + 1] > cost)\n            stack.push({ q: q + 1, r, cost });\n        if (maze[r][q - 1] && result[r][q - 1] > cost)\n            stack.push({ q: q - 1, r, cost });\n        if (maze[r + 1][q] && result[r + 1][q] > cost)\n            stack.push({ q, r: r + 1, cost });\n        if (maze[r - 1][q] && result[r - 1][q] > cost)\n            stack.push({ q, r: r - 1, cost });\n    }\n    return result;\n}\n\nexport function array2d(width, height, fn) {\n    return Array.from({ length: height }, () =>\n        Array.from({ length: width }, fn)\n    );\n}\n\nexport function tileIsPassable(q, r) {\n    if (game.brawl) {\n        let room = game.brawl.room;\n        if (\n            q < room.q ||\n            r < room.r ||\n            q >= room.q + room.w ||\n            r >= room.r + room.h\n        )\n            return false;\n    }\n    if (q < 0 || r < 0 || q >= game.maze.w || r >= game.maze.h) return false;\n    return !!game.maze.maze[r][q];\n}\n\nexport function rgba(r, g, b, a) {\n    return `rgba(${r},${g},${b},${a})`;\n}\n\nexport function createCanvas(width, height) {\n    let canvas = document.createElement('canvas');\n    canvas.width = width;\n    canvas.height = height;\n    let ctx = canvas.getContext('2d');\n    return { canvas, ctx };\n}\n\nexport function roomCenter(room) {\n    return {\n        x: (room.q + room.w / 2) * TILE_SIZE,\n        y: (room.r + room.h / 2) * TILE_SIZE\n    };\n}\n\nexport function partialText(text, t, d) {\n    let length = clamp(Math.ceil(t / d * text.length), 0, text.length),\n        substr = text.slice(0, length),\n        idx = text.indexOf(' ', length - 1);\n    if (idx < 0) idx = text.length;\n    if (idx - length > 0) substr += '#'.repeat(idx - length);\n\n    return substr;\n}\n","'use strict';\n\n/**\n * This module is generated by `gulp buildAssets`.\n */\nexport const SpriteSheet =\n    /* <generated> */\n{ font: [ [ 128, 0, 128, 448 ] ],\n  font2: [ [ 0, 0, 128, 512 ] ],\n  harold: [ [ 128, 448, 19, 12 ] ],\n  base64:\n   'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAIACAYAAABtmrL7AAAAAXNSR0IArs4c6QAAHWNJREFUeJztnb2S67zNgOkz2yfFV6R4U6ZK7v9KkiplUqRIkVyBvyLLHRoGQJASZdp4npkzxxL4A2kt/JDC7u1+v9+Lw+12K6WUIptZ50WbW3t8v9/v8lwr8/quwrt+TX95fqT/q9B0bHRzf/7w2Xy9WgF4Pb/9+Xfq+X/+7b/IP1weMgD3+71IZybP9bxiPadFAd/nntpf4UFvt9ut9eyal4+OUz9b1x8ZMxIlafK2n/ys6SfnqV+WivzSIP9M+a8CAGn5Vcr/8nnpzRsP8uT9ax8r/W3796jevx2rztlbn9DG8vr05DNIT1vPRdcJNM5of/Z1wmdCBACQmK92Nb/5fK9erPUk9eNoat7koeV+v6t5bhsFaONbOa4Y4yWr7vU+Wesb2ue2nzamlsfLcZSfj9oOwIIIACAxQ9uAKx2siECe5vJW6C1Pp0QZUxfgeWDt+GyumgfyQQQAkJhuBFA9r/EegJnDNu1+8v/6f7sOoI1f28iVdGsNoOcRj3ps7Tp7++z1nBe5aOeO6Gbp1K5PEEVACxEAQGK+ar4tVuEfPK3nAaN4gUJk/IjHX+ndet7Ti4QikZJs740t9YhEKJq+7TzW66LIP1v+EH5bBqB+fugYDKd7D4bVbuYh7i0SeiFyPY485J7e1jXIB867hp4B6I1v/dykofhuw1ZhYrqeiVzx48EAJIZqQNi6Wg354mrAaFgqz1mr3tqxNsbEGoIMXT+ao+sZo/13rVZDvlbOLgBAYropgOXNo4ta1hgjNP2fagneYV9bi16ii42jfSNygAoRAEBivkrxPVSE6qmsPL0nr2jrBK33r/+3UUA7dtQjWh5Wuy5PN0tm6K9uy/XGb/v1+s5cv37lkAUiAIDE/JIetvU0rYO4N3zLNA/0ME5ULtr8IOQ//yQzUYvs63329NfuVat/+1leY2T8nm49tJ/XkfsFnwURAEBiHgyA8GJFyG6aNzsDGS1oY1fv2HN+n+rVzrgu695CXogAABLz8B5A6xzuym/lWYW2Wi5lVZ+qo7UK7u0IWKvoUdr7c+YKenuN2vi962vPz+q3a7Ua8rXyh202GR1GHjhxXOVlRK6N2aLp6D0gllxc2yn9e7oZ1xHaAo3q5/W3+mqLl5APc2/ayxVHv8ARea+N5d28B1Z7CLTriRqAXn+vzYi+0faezpZ+Ld/tWRNIDNWAEK4m+8df/1NKKeWPf/m9Ku/1R76f/KsU3XNEvadsPyvvtbFknu5RZD490ne0jxUZzV5f5OcT0a9XTVYf/vq5GoFof+R7ytkFAEhM1wDcvinF3kduz2ttenKt3Sj3BusaIuNrbSLrIrO09/eq/jP3uZ2ChcPPgQgAIDHbGIDWI41EFG3fo57ay6e9sTV9Iu1eQXRNB3KwjQEAgOtZbgA0T619livxkT37tr0lG9UzsprurRHs7GGP6nYL1GLAe0EEAJCYU14E8vbR5Ztqlge3IoLInnfb13szboVX9nY0pD6a7MgcI9dzRmRS1SAK+ByIAAASs/xV4JG8X3rNEe8v9/mvysF76wJam1Hdjl5LZN5INVl9+09ru2u1G3JfPvwCSSlzoac6eedhnjEA1thRPXv9ImmINc6rFgg781IMlJihFGDmrTNrfUA+3F50IL/A1n76kQfL8uQtESMUGccbf6af13/nXQl4PVQDwtbVasgvqAaMssqbeDlyb04t96/HM9GK1dfTI7rb8CovHJl312o15Gvl7AIAJGYoApj1YFbuHxl/xuOesRYQPX8WZ0RX0fsHUCECAEjMTwQQ2ULzvFRvG2xkm0zKrZVxr82Z/aP6H8FbB+kR6bNaf3hPiAAAEvOrlFg9fXR/XBsjsk8e2f++NYzML/uv0P8MZtcBejpdpT+8H0QAAIn58t5uk6v3kVx6Ri738COKj+wmXJXv9jx4ZA0lsr5S0X4+M+8/QF6IAAASI/824H3EC8u+7XF0lX8k7+3tVMzuZLTeU+uvyc+kdw+iHt2KAtrP1ly7VqshXytXS3C9tEA738p+Bp40ANoc1oJeVB65hp7+kTlmU4DZxb+RORw5i4GJUUtoR7+oo1/gaM4f/RJHjMjI+SO5/CxH1wAiehlyDEBiqAaEob8N2P5JsH/+7b/Fst9//MvvH/q3f1qslWv927896GVdt9vzX7SW8uj87XXVtpH+Vd72s/Src2jja1xVLfhQR+7lupZMnh897s1x1vir9feu6wy5x4G+99/+/Lt7+V8k8POvPffbn393b5Hy9vzR48qq8a352muX56ou1vVruo7oH7n/q+TsAkAX6bHuA3amtm2zDi9zqjLpTbU2Efno/Nn4VUosd77f5z1gO741Rzu//NzrHx3fYvX4M3qM9IvqZP18On2qbg//ew9oBPnXhc/uf1S+isHbvxwiAHgreg/Qbg9YS6vbqwyQ5GcR0PMePc8S8YZH26zWYfX4US89E1lE+6yIWlpWf8GPPvxSrqUKq+kt/F0NEQCEuN/vP/8sbrfbaSmCNf5RudWmylavD/Tu4dV8laLnnF6O3sqsnNLao5by3txezjryHoE1fyvrvVfgjW/NYa1lWPpH9va1/pHr8ebp8Qpv2dNjRv5K2m3Bf/z1P1voynsA8BKOPgC7PEDaLoNHawR24FfrLSqlPHuN3gp9O4bVXpNbq+3e+FofS96bP4I2p+ZBNb16nta6FknV19K7d773811FvaR2Om/qKvPWEEZUl/Pv9PDtAGsAcAj5YGsPcP2syTXDYKUbWv4cMSxyrpnIwZqnNTA9/XfkqRpQa6TllPd7rO7c8/QaNa+1xq/nrTGkfHT+1Wj6jPb15LPXZlaL3W7ltz//7kHePtxV3sPy6Fr/9rg3vpRbbdv5279z2Lu+nv6azNK//q+NtU014IPQeIhGjiNf+NHxvBBfys+Y/8hYkfvhjes99NbPbHC+vV0ULOXURUArd18x/oz86PhHOeL9e7SR09ljw+fCLgCcVm1GtaB9fW0/S7+XVAu2XuMuqA3leUuuHUe80uh4Xn8p964lOr93PtK3dz+sc9a1eePJ6wvMd0q1mZiXasE3qRZkFwAOQ7Xg+/JgAG4C2dhbfbeQC2v18934ltTz1jzaeJrcav/KHQBNH43otc22ORP5AEUe0AhUC14DEQB8FL0H6OoHbIRWt6sM0Je1ehz1JNKza/21OazIQPa1xrfkVuTiRR09ZL9WT+/aLJ09/Wf08zj68z2T1V/wow+/lGupwmp6C39nQwQAp3C/Uy14Br17eDZfpYy9ry6Po56kl9OP9jtrfk3WOz4ytjw3M3av/6j+Z/AKb9nTY0b+Sm6366sFeQ8AtoRqwWv4svLOXh47uhrv5aC9MeTawMixt64QkUfH790D6/qjuxM75PArqF/4+/0e2kassjOrBdv5d14kXAFrALCU9oFq81uqBX2druJL84J11djzkFXe61+PPXmVRT3rmdS5vOuNjlM/R6MCbf5eP2/s3hge09VkN6oFPf012U7VgodD6LOONQNwRQpwRXvrXEQWbdsahkEjkCvmhQdekgLUyKE91tpcqU8p828LRh/06PyjyH5XRU/w/rAL8OZIz1+PR9KBV/9tOuSvk5u/EWjGA1v92zz3yPhHmc2RPf2Pen9tjtn+7Tij/X/+UOQ38kuD/DPlRABvzqvTJ3hvzGpArXHPQ3lfPDn21XlqGxpbMk+33ppFZIwer7o3kBfeAwBIzJABkNt2vTb1nMyfz6ad08vDI557xguf4f2ljkQBcAVEAACJ+SU9tWwgvav0UBFPFfHQnh6R/tH3CmYXyCz9RiOdSBsrUiEqgLMhAgBIzFfEI8562965M+WzuhzVPxpRjEYe3j0fIRBtzAwLHwIRAEBifl4Emn2L7cy3+46ONdN/pE/0HrXtouOfeR9bAmPdS3nd36ZD/lr54ddYMQB+u1cbgAAsLCbmJwWY3X++2FuZzO7Fj8x5+2ak3ao1AoAzoBYAtq5WQ35hNWANWeWbfta+vMQLY70xIt46qoMl895x0NqMyEbbjaZbWkohI51eutG7f7tWqyFfK2cXACAxTwZAy3NvDaXYHttq03opKddkEq+/99nrP6J/lVn9RtrNen/rc6vvzP2H3BABACQmtAh4treYXfH2Io/ZbcwrOaJjvUaZ6wMcgQgAIDHdCGB2f31kzCiz3r3d3Zjp3yN6PdYuC8CrIAIASEzXALSev/Vc2ip+62VbDyfHaM/1xtfaSE/e2wWoY2i7ANGoIDJHr1/VQzsfvYbovNac77BWAtdBBACQmNAugPQWmnfX2nljRMc/OnYp/luA0bl688vI5KzxI22P3r9S9q1WQ75WniIM9AzAqjneKMRmSzEx23xJs+SmWpQgZd46hXZ/pFwbxxkDA5AYqgFh62o15BdWA8Jajr7/oL1DENmF0dpIHXatVkO+Vs4uAEBivqR3qAIvf9T6eP3lGN74PQ82ehzxiGfNJ7liPaO3CyN19aIAyAcRAEBifrVe7PZNPW7/rzLNo8h27bE2hrdvrcnPwtsO1K53ZGypt4woztjlkGsBs+MAVIgAABJzqgFoowLNG94bzpz3KFYUc1Z/LbKaQUZSs+MAVIgAABLzYAC0XPWsvFPm/95Yo3NpOkoPKXN8TWbpFrkH0Z2BqzlrjQM+EyIAgMQ8/V0ArZFc0W5lcrXf24v25mr3p6Vcyiwdvb5WGy3iqXN5q/rePejpOOqF2zFnPHdk3l2r1ZCvlQ8vfkXDZa3PSDsrhPfG6IX/EQPgjWPJrYd+9hq9a58N3Z0xtkhV4DU8/YZZ7ws20vaTiBqwNwUDkBiKgWDrajXki6sBZ3PK0T4RRkPvUfksXroQnb9dU7DWSjxW99+1Wg35WnmqXYDeQiJANlIZAAB4BAMAkBgWARdjpRy9VCT6RuFsStOsV8x0hw+BCAAgMUQAi9FW63sr+CMv/pywi8OiaGK+oqFohGg4OvIAzDDSf2aukbD8g14Ygg+EFAAgMVMvAvXovSgz2m/l/CM1AD1WvYgEsArWABYzkmKMFg9Z8l5xkuhTStm3Wg35Wvnw66Sl7Peq7i76eZWFEbRXda0HvCfvjd+ci6oHHwgRwGKixmTkoY3IvZJiIWcXIDEYANi6Wg05fxsQLmDXajXka+VsAwIk5tQIYPX2V2+R7uj80ReUZuf3+rfnLPnK/pATIgCAxGAAABKDAQBIDAYAIDEYAIDEPOwCnPUqbMvI++1nrFL33oiz9LT6rPiNPF6f3ht8Z8/PhkBuiAAAEnPpm4DtXvQKrviV31e86/CKffpdq9WQr5WH/jbdqPxhgnhRyvL5Z35j0WiRzRn0dJ6tNjTmOtId3pytfvqry3l3fxPuRddPNWBiKAaCravVkFMNCBewa7Ua8rVydgEAEoMBAEgMBgAgMdusAXjbWVJ29mp/b+/dk1tvNc4w8tYkwBk8RAD3b6zGPTkAvBdbRADfHlYem7/tVvPIs3v8R9+1ly/lRKMS6wUj7Trqx16k0rt2IgiQ/EQA7RcSLw+Qg5cvAlbvf7/ff/59Hx/6u/fynDRwXsTg5d1aGlTPWa/oWt7/9o3XJnqNlm4jcsjHr1Lsh2Z0sEgfvoAA+3DaGsDIg23lslqKGqkgbLxnjSIexvfy65HrkGsT9bM8F/X+8hpr//b4u8/TvbAijtk8f9dqNeRr5adUA1oPTS+cbRb0fkL/Zkzrb9k9LQJKA2Bdg6e/94C2D7ZmALR2ra7avegtYmr3TBqXUQNgtCEiS8zL1wBavr330/no6rb38Afnv3tdtYf/3tAaNK2PduzJ2ghDRhvew99GDwAeoRRAfpm0L6jngc4MVeF8dq5WQ/4m1YCRXL1tK/tpIfeq+T196hCtDp5uRqrx0LbN6eWxHOdVBnLXajXka+WhFKDn1b1zM20A4Bq2eBPQW9zqIb3+EQPjLfC1c0XSnV6kYOkZNaKtDl5EAeARXgTshb0A8H5sEQGUMvYe+6wxirY94p1n2p6hC+kXzPBgAEYeQgB4f9S/DFTKuofdy59nVv97/XrX1FtDiK4xrLx3kZeJLD17LxRh03Oz1YtAAHAtPxFA61XaPeu2seW9Ix7KO9/KtHcCZB+pq3eBst/o9qXnZYUu2jm1by8SGY0grJ9Vu0Ng/T8yD3weRAAAiVF3AXoeamaPO+L9vejDGkfzZL2IZPRYXvPo23ptlHBXqhU1/eX9tfb5v9s+RRCtp5f6aOd2rVZDvlYefkc/uhhmMWIA2najD2ekj5VCzBgAIwWwxlMLlrRQ3EqfNF3bcRXZU+gvrklODYkw88CRB+oIXr5sPQRWvtt8ruetcVt5O05R5FoZ8EN7iTenmMfNwyPX3xoAS28MAFhs8yIQvI6dq9WQL64GlN4s4tXP8PzeWFaaENVNhNxeiG+Gzm3/dl5l/Hr+QVfrOmaQUYITCRXtfD02zt9L2bdaDflaObsAAImZSgHO9nCR+YTnfaqGE23rZ2u94DR5j6przdGll7bWAWTUUeeWMtEnpBNAhQgAIDFfWg4sabzY5fXm3iq5howOVsvrZ+8+tlGAJ7f6f4+vvoeh9H3ZbxWC94MIACAxX1Ev0fOMq9By4Z4OPf3OlI/cv1VyGWGM6AW5IQIASMyTAZC5fotcjdbw+h+Vrxz73XWryF0RrW90LPh8iAAAEqP+PgCt4SvljUxte6Hc3I/v7dW/Um61bdm1Wg35WvlwNeAmBqC0bS+Ud1/I2fk+GpAKJCZcbad27qwJtOPINpqs94Ch35x+nWMMQGKoBoStq9WQX/S3AeUqsRZCWmHlgGesx+Hqvov1+2m3qX71eOj+3W79Nzl3rVZDvlbOLgBAYn6V8uhhGi/zlBveG65UEv2O4+0KQF6IAAASI/8ykNv41Z4D/QDOhQgAIDHqHwe1clRrL1qel6vZzSr0U18hd2viL9BPnX8j/Z76jugHICECAEjMVyn9d8V73iTibY6MgX7XjAH5IAIASMxXKYffJV9+3J6rWG/LRdr0+tacWpu/1fEMuaWTR6/PzJi7VqshXyvf4gHHALzUAFAMlJi3yAmjBqNy5GGyjM9KuXd+RRvZJdgOPhCqAWHrajXkF1UDlrJnPbumk9G3+ybeiHdsvbY1t3bOklv3SPbz0p9eyG/pr40h5btWqyFfK2cXACAxb/P7AHq0TrC3iGjNLRfmrPFGFym1/j0PrY1ltYnc/14byAkRAEBi5HsA5ftY9ZKtl7vKg1SP3PNi1nqBaF+P1Ry5d01e5NDOq3l4b0yhm7cGYM7n6dNbo4C8EAEAJOYtfh9AGwUc0UW7vsgKfbRtdBw5Ztt3dg3A62/pRTQARAAAiXmb3wcw4q2iq+X180iE4UUB1v3wxh9Zlbf69MbA04MFEQBAYt7i9wFUrNX/3hje9Wgr5SP9I8cjukU4Eh1Z7Fqthnyt/K1CQ15iWQLFQIl5SgFkrrqb3OOVur36vozoduQew2dBNSBsXa2G/OK/DWiF16+UNzK17YB8yXFP9mp5ZM1g12o15Gvl7AIAJOahFqB+9hbZeh7I4qRdALVts8+ujnd0Fb93LPNpL4rpseI+RiIYyAkRAEBint4DqCvE8tx3u3ps/sYZOZ4m1+Zsz8lj9DumH4AFEQBAYp7WADy8ZjUPN/od+o1A6HdMPwALIgCAxHxp3sXiFR4H/Y7T7JLw9h88QAQAkJgvuYfeeot2lVt6EG8vXOankX16y0Ptqp8y95b6acfafd61Wg35WvnTL7BoF6O8L433BT5D3rbZUT9vC283/SRCP9KCxLCKnADPuBYMQGqoBoStq9WQX1ANKEPW3Y7P4si4mo5aiD8rb9tZ+nkyj0ifXavVkK+VswsAkJip3wl49fFZzI7bel5rga8eOvJwdKN5ei2P93Tsrfr3dIAcEAEAJEatBbByU6+Ntwd9BpFtuDO34Fov2rZ38nNzfK+/5Z21qMHTVWun6Q/QQgQAkJjTfh9A64k0oh48cixR2pkeUF5f79q06EKO2bt/3vV70ZbS5+napf7N+Z/rYA0ALIgAABJz2u8D6PRbWs8u9Zd6jlzfd/Two1/1oDIqsHJ0Tz+tv9dXjq81bfQz++PpwYIIACAx2/8+gDrvXbg5I+9/0rN3fa0Hnbm8kfunYa0VWOsr2s9A7lrI6CqyBrBrtRrytfKb9QX2FuksrHa9ObQQ2dLhR/GDBmCkjaffzP3z7mfgHnZfEx40ABQDJeYph7W8jfUArpJrbSy0B7Lt712flYuPPMBn3L+23YzsABiAxFANCFtXqyG/oBpQehUrz1RHuUheih0Gy3y5N7bW3pu/d3/OuH+Rdgu8/w+7VqshXytnFwAgMW+VAqz0gAAZIQIASAwGACAxGACAxGAAABKDAQBIDAYAIDEYAIDEvNV7ALCOXavVkK+V82INUAyUGFIAgMSQAsDW1WrIL6gGBNi1Wg35WjkpAEBiMAAAicEAACQGAwCQGAwAQGIwAACJwQAAJAYDAJAYDABAYngTEEop+1arIV8rpxoQqAZMDCkAQGJIAWDrajXkVAPCBexarYZ8rZwUACAxGACAxGAAABKDAQBIDAYAIDEYAIDEYAAAEoMBAEgMBgAgMbwJCKWUfavVkK+VUw0IVAMmhhQAIDGkALB1tRpyqgHhAnatVkO+Vk4KAJAYDABAYjAAAInBAAAkBgMAkBgMAEBiMAAAicEAACQGAwCQGN4EhFLKvtVqyNfKqQYEqgETQwoAkBhSANi6Wg051YBwAbtWqyFfKycFAEgMBgAgMRgAgMRgAAASgwEASAwGACAxGACAxGAAABKDAQBIDG8CQill32o15GvlVAMC1YCJIQUASAwpAGxdrYacakC4gF2r1ZCvlZMCACQGAwCQGAwAQGIwAACJwQAAJAYDAJAYDABAYjAAAInBAAAkhjcBoZSyb7Ua8rVyqgGBasDEkAIAJIYUALauVkNONSBcwK7VasjXykkBABKDAQBIDAYAIDEYAIDEYAAAEoMBAEgMBgAgMRgAgMRgAAASw5uAUErZt1oN+Vo51YBANWBiSAEAEkMKAFtXqyGnGhAuYNdqNeRr5aQAAInBAAAkBgMAkBgMAEBiMAAAicEAACQGAwCQGAwAQGIwAACJ4U1AKKXsW62GfK2cakCgGjAxpAAAiSEFgK2r1ZBTDQgXsGu1GvK1clIAgMRgAAASgwEASAwGACAxGACAxGAAABKDAQBIDAYAIDEYAIDE8CYglFL2rVZDvlZONSBQDZgYUgCAxJACwNbVasipBoQL2LVaDflaOSkAQGIwAACJwQAAJAYDAJAYDABAYjAAAInBAAAkBgMAkBgMAEBieBMQSin7VqshXyunGhCoBkwMKQBAYkgBYOtqNeRUA8IF7FqthnytnBQAIDEYAIDEYAAAEoMBAEgMBgAgMRgAgMRgAAASgwEASAwGACAxvAkIpZR9q9WQr5VTDQhUAyaGFAAgMaQAsHW1GnKqAeECdq1WQ75WTgoAkBgMAEBiMAAAicEAACQGAwCQGAwAQGIwAACJwQAAJAYDAJAY3gSEUsq+1WrI18qpBgSqARNDCgCQGFIA2LpaDTnVgHABu1arIV8rJwUASAwGACAxGACAxGAAABKDAQBIDAYAIDEYAIDEYAAAEoMBAEgMbwJCKWXfajXka+VUAwLVgIkhBQBIDCkAbF2thpxqQLiAXavVkK+VkwIAJAYDAJAYDABAYjAAAInBAAAkBgMAkBgMAEBiMAAAicEAACSGNwGhlLJvtRrytXKqAYFqQADo84f/+9P9D//3JwwGQFYwAp8FKQCE0R78f/3773yH3hh+ePBA1Lv/699/v9W2GIH3hR8clFLiD74HhuD94D0AOOXhh/cEi52csx5+vP97wotAcAge/PeGFACmHuJ//fvvNx5+gA8hsr/POwCfBxEAQGIwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsB3/D0+y1f7F5lWBAAAAAElFTkSuQmCC' }\n/* </generated> */\n","'use strict';\n\nimport { game } from './Game';\nimport { rgba, createCanvas } from './Util';\nimport { SpriteSheet } from './SpriteSheet-gen';\nimport { Viewport } from './Viewport';\n\n/**\n * Sprite\n *\n * Encapsulates loading sprite slices from the spritesheet, organizing them, and\n * modifying them or constructing using primitives. To save space, we use some techniques\n * like storing only a small slice of an image in the spritesheet, then using code\n * to duplicate it, add some randomness, etc.\n */\nexport const Sprite = {\n    // This is an exception to the rule, loading the spritesheet is a special action that\n    // happens BEFORE everything is initialized.\n    loadSpritesheet(cb) {\n        let image = new Image();\n        image.onload = cb;\n        image.src = SpriteSheet.base64;\n        Sprite.sheet = image;\n    },\n\n    init() {\n        // Base pixel font and icons (see `Text.init` for additional variations)\n        Sprite.font = initBasicSprite(SpriteSheet.font2[0]);\n\n        return;\n    },\n\n    /**\n     * A small helper that draws a sprite onto a canvas, respecting the anchor point of\n     * the sprite. Note that the canvas should be PRE-TRANSLATED and PRE-ROTATED, if\n     * that's appropriate!\n     */\n    drawSprite(ctx, sprite, u, v) {\n        ctx.drawImage(sprite.img, u - sprite.anchor.x, v - sprite.anchor.y);\n    },\n\n    drawViewportSprite(sprite, pos, rotation) {\n        let { u, v } = this.viewportSprite2uv(\n            sprite,\n            pos\n        );\n        if (rotation) {\n            Viewport.ctx.save();\n            Viewport.ctx.translate(u + sprite.anchor.x, v + sprite.anchor.y);\n            Viewport.ctx.rotate(rotation);\n            Viewport.ctx.drawImage(\n                sprite.img,\n                -sprite.anchor.x,\n                -sprite.anchor.y\n            );\n            Viewport.ctx.restore();\n        } else {\n            Viewport.ctx.drawImage(sprite.img, u, v);\n        }\n    },\n\n    viewportSprite2uv(sprite, pos) {\n        return {\n            u: pos.x - sprite.anchor.x - game.camera.pos.x + Viewport.center.u,\n            v: pos.y - sprite.anchor.y - game.camera.pos.y + Viewport.center.v\n        };\n    }\n};\n\n// Sprite utility functions\n\nfunction initBasicSprite(data, anchor) {\n    return initDynamicSprite(loadCacheSlice(...data), anchor);\n}\n\nfunction initDynamicSprite(source, anchor) {\n    let w = source.width,\n        h = source.height;\n\n    return {\n        img: source,\n        // Hack! Using a flat `.map(initBasicSprite)` is actually going to pass the\n        // element INDEX as second argument, resulting in \"anchor=1\". The right solution\n        // here is \"typeof anchor === 'object' ?\", but to save bytes I avoid using\n        // the typeof and instanceof keywords anywhere in the codebase. Hence,\n        // \"anchor && anchor.x\".\n        anchor: (anchor && anchor.x) ? anchor : { x: (w / 2) | 0, y: (h / 2) | 0 }\n    };\n}\n\nfunction loadCacheSlice(x, y, w, h) {\n    const source = Sprite.sheet;\n    const sliceCanvas = createCanvas(w, h);\n    sliceCanvas.ctx.drawImage(source, x, y, w, h, 0, 0, w, h);\n    return sliceCanvas.canvas;\n}\n","\n// A list of in-game actions that can be performed by the player\nconst Action = {\n    UP:    11,\n    DOWN:  12,\n    LEFT:  13,\n    RIGHT: 14,\n    JUMP:  15,\n    STOP:  16,\n    PAUSE: 17\n};\n\n// A list of key code mappings and what action they perform. Here we hard-code it, but\n// you could easily also have the key mappings controlled by settings and let the user\n// configure it.\nconst KeyMapping = {\n    KeyW:       Action.UP,\n    KeyS:       Action.DOWN,\n    KeyA:       Action.LEFT,\n    KeyD:       Action.RIGHT,\n    ArrowUp:    Action.UP,\n    ArrowDown:  Action.DOWN,\n    ArrowLeft:  Action.LEFT,\n    ArrowRight: Action.RIGHT,\n    Space:      Action.JUMP\n};\n\nexport const Input = {\n    Action,\n    KeyMapping,\n\n    init() {\n        // Input buffer - new keypress events go into this buffer to be handled\n        // during the game's update loop. It's up to the `update()` methods to consume\n        // key presses and remove them from the buffer.\n        this.buffer = [];\n\n        // Input history - history contains recent key press events in order,\n        // removed automatically after a few seconds. This is useful for detecting\n        // inputs like cheat codes, for example.\n        this.history = [];\n\n        window.addEventListener('keydown', event => {\n            let entry = {\n                at: new Date().getTime(),\n                key: event.key,\n                code: event.code,\n                action: Input.KeyMapping[event.code] || Input.Action.STOP\n            };\n            Input.buffer.push(entry);\n            Input.history.push(entry);\n            console.log(entry);\n        });\n    },\n\n    update() {\n        let now = new Date().getTime();\n        this.history = this.history.filter(entry => entry.at > now - 3000);\n    },\n\n    lastKeyPressed() {\n        return this.buffer.length > 0 ? this.buffer[this.buffer.length - 1].key : '';\n    },\n\n    lastCodePressed() {\n        return this.buffer.length > 0 ? this.buffer[this.buffer.length - 1].code : '';\n    },\n\n    lastActionPressed() {\n        return this.buffer.length > 0 ? this.buffer[this.buffer.length - 1].action : undefined;\n    },\n\n    consume() {\n        this.buffer = [];\n    },\n}\n","'use strict';\n\nimport { Sprite } from './Sprite';\nimport { rgba, createCanvas } from './Util';\nimport { CHAR_WIDTH, CHAR_HEIGHT, CHARSHEET_WIDTH } from './Constants';\nimport { Viewport } from './Viewport';\n\n\n// In our character sheet, chars 0x00-0x7F are standard ASCII, below that we put whatever\n// characters are convenient for us. Here we can choose to map unicode characters to positions\n// 0x80+ in the charsheet, making it easy for us to render things like special characters,\n// box drawing characters, etc.\nconst SUPPORTED_UNICODE_CHARS = [\n    '─│┌┐└┘├┤┬┴┼╳╳╳╳╳',\n    '═║╔╗╚╝╠╣╦╩╬╳╳╳╳╳',\n    '↑↓←→╳╳╳╳╳╳╳╳╳╳╳╳'\n].join('');\n\nconst UNICODE_CHAR_MAP = SUPPORTED_UNICODE_CHARS.split('').reduce((map, char, idx) => {\n    map[char] = 0x80 + idx;\n    return map;\n}, {});\n\n/**\n * Text\n *\n * Utilities for drawing text using in-game pixel font.\n */\nexport const Text = {\n    init() {\n        Text.white = Sprite.font.img;\n\n        Text.black = recolor(Text.white, rgba(0, 0, 0, 1));\n        Text.black_shadow = recolor(Text.white, rgba(90, 20, 90, 0.15));\n        Text.blue = recolor(Text.white, rgba(200, 40, 220, 1));\n        Text.blue_shadow = recolor(Text.white, rgba(240, 50, 200, 0.2));\n        Text.shadow = recolor(Text.white, rgba(240, 240, 255, 0.25));\n        Text.red = recolor(Text.white, rgba(240, 50, 50, 1));\n\n        Text.terminal = recolor(Text.white, rgba(51, 255, 0, 1));\n        Text.terminal_shadow = recolor(Text.white, rgba(255, 255, 255, 0.3));\n\n        Text.terminal = recolor(Text.white, rgba(51, 255, 0, 0.9));\n        Text.terminal_shadow = undefined;\n\n        Text['#ead4aa'] = recolor(Text.white, '#ead4aa');\n        Text['#fee761'] = recolor(Text.white, '#fee761');\n        Text['#ff0044'] = recolor(Text.white, '#ff0044');\n    },\n\n    drawText(ctx, text, u, v, scale = 1, font = Text.white, shadow) {\n        if (Array.isArray(text)) {\n            for (let block of text) {\n                Text.drawText(ctx, block.text, u + block.u * scale, v + block.v * scale, scale, font, shadow);\n            }\n            return;\n        }\n\n        for (let idx = 0; idx < text.length; idx++) {\n            let c = UNICODE_CHAR_MAP[text[idx]] || text.charCodeAt(idx);\n            let k = (c - 0) * (CHAR_WIDTH);\n            if (shadow) {\n                ctx.drawImage(\n                    shadow,\n                    k % CHARSHEET_WIDTH,\n                    Math.floor(k / CHARSHEET_WIDTH) * CHAR_HEIGHT,\n                    CHAR_WIDTH,\n                    CHAR_HEIGHT,\n                    u + 1,\n                    v,\n                    CHAR_WIDTH * scale,\n                    CHAR_HEIGHT * scale\n                );\n            }\n            ctx.drawImage(\n                font,\n                k % CHARSHEET_WIDTH,\n                Math.floor(k / CHARSHEET_WIDTH) * CHAR_HEIGHT,\n                CHAR_WIDTH,\n                CHAR_HEIGHT,\n                u,\n                v,\n                CHAR_WIDTH * scale,\n                CHAR_HEIGHT * scale\n            );\n            u += CHAR_WIDTH * scale;\n        }\n    },\n\n    /*\n    drawRightText(ctx, text, u, v, scale = 1, font = Text.white, shadow) {\n        u -= Text.measureWidth(text, scale);\n        Text.drawText(ctx, text, u, v, scale, font, shadow);\n    },\n    */\n\n    measureWidth(text, scale = 1) {\n        return text.split('').reduce((sum, c) => sum + CHAR_WIDTH, 0) * scale;\n    },\n\n    splitParagraph(text, w, h) {\n        let cu = 0, cv = 0;\n        let next = () => ({ text: '', u: cu, v: cv });\n        let wip = next();\n        let list = [];\n\n        for (let c of text.split('')) {\n            let cWidth = Text.measureWidth(c, 1);\n            if (c === '\\n' || cu + cWidth > w) {\n                let saved = '';\n                if (c !== '\\n' && c !== ' ') {\n                    let space = wip.text.split(' ');\n                    if (space.length > 1) {\n                        saved = space.pop();\n                        wip.text = space.join(' ');\n                    }\n                }\n                if (wip.text.length > 0) list.push(wip);\n                cu = 0;\n                cv += (CHAR_HEIGHT);\n                wip = next();\n                if (saved.length > 0) {\n                    wip.text = saved;\n                    cu += Text.measureWidth(wip.text, 1);\n                }\n            } else {\n                cu += cWidth;\n            }\n            if (c !== '\\n') {\n                wip.text = wip.text + c;\n            }\n        }\n\n        if (wip.text.length > 0) list.push(wip);\n\n        return list.map(line => ({\n            ...line,\n            w: Text.measureWidth(line.text, 1),\n            h: CHAR_HEIGHT\n        }));\n    },\n\n    drawTextColRow(text, col, row) {\n        Text.drawText(Viewport.ctx, Text.splitParagraph(text, Viewport.width), col * CHAR_WIDTH, row * CHAR_HEIGHT, 1, Text.terminal, Text.terminal_shadow);\n    }\n};\n\n// Text utility functions\n\nfunction recolor(font, color) {\n    let canvas = createCanvas(font.width, font.height);\n    canvas.ctx.fillStyle = color;\n    canvas.ctx.fillRect(0, 0, font.width, font.height);\n    canvas.ctx.globalCompositeOperation = 'destination-in';\n    canvas.ctx.drawImage(font, 0, 0);\n    return canvas.canvas;\n}\n","// zzfx() - the universal entry point -- returns a AudioBufferSourceNode\nexport const zzfx=(...t)=>zzfxP(zzfxG(...t))\n\n// zzfxP() - the sound player -- returns a AudioBufferSourceNode\nexport const zzfxP=(...t)=>{let e=zzfxX.createBufferSource(),f=zzfxX.createBuffer(t.length,t[0].length,zzfxR);t.map((d,i)=>f.getChannelData(i).set(d)),e.buffer=f,e.connect(zzfx.destination_),e.start();return e}\n\n// zzfxG() - the sound generator -- returns an array of sample data\nexport const zzfxG=(q=1,k=.05,c=220,e=0,t=0,u=.1,r=0,F=1,v=0,z=0,w=0,A=0,l=0,B=0,x=0,G=0,d=0,y=1,m=0,C=0)=>{let b=2*Math.PI,H=v*=500*b/zzfxR**2,I=(0<x?1:-1)*b/4,D=c*=(1+2*k*Math.random()-k)*b/zzfxR,Z=[],g=0,E=0,a=0,n=1,J=0,K=0,f=0,p,h;e=99+zzfxR*e;m*=zzfxR;t*=zzfxR;u*=zzfxR;d*=zzfxR;z*=500*b/zzfxR**3;x*=b/zzfxR;w*=b/zzfxR;A*=zzfxR;l=zzfxR*l|0;for(h=e+m+t+u+d|0;a<h;Z[a++]=f)++K%(100*G|0)||(f=r?1<r?2<r?3<r?Math.sin((g%b)**3):Math.max(Math.min(Math.tan(g),1),-1):1-(2*g/b%2+2)%2:1-4*Math.abs(Math.round(g/b)-g/b):Math.sin(g),f=(l?1-C+C*Math.sin(2*Math.PI*a/l):1)*(0<f?1:-1)*Math.abs(f)**F*q*zzfxV*(a<e?a/e:a<e+m?1-(a-e)/m*(1-y):a<e+m+t?y:a<h-d?(h-a-d)/u*y:0),f=d?f/2+(d>a?0:(a<h-d?1:(h-a)/d)*Z[a-d|0]/2):f),p=(c+=v+=z)*Math.sin(E*x-I),g+=p-p*B*(1-1E9*(Math.sin(a)+1)%2),E+=p-p*B*(1-1E9*(Math.sin(a)**2+1)%2),n&&++n>A&&(c+=w,D+=w,n=0),!l||++J%l||(c=D,v=H,n=n||1);return Z}\n\n// zzfxV - global volume\nexport const zzfxV=.3\n\n// zzfxR - global sample rate\nexport const zzfxR=44100\n\n// zzfxX - the common audio context\nexport const zzfxX=new(top.AudioContext||webkitAudioContext);\n\n// destination for zzfx and zzfxm sounds\nzzfx.destination_ = zzfxX.destination;\n","'use strict';\n\nimport { zzfxG, zzfxR } from './zzfx';\n\n/**\n * ZzFX Music Renderer v2.0.2 by Keith Clark\n */\n\n/**\n * @typedef Channel\n * @type {Array.<Number>}\n * @property {Number} 0 - Channel instrument\n * @property {Number} 1 - Channel panning (-1 to +1)\n * @property {Number} 2 - Note\n */\n\n/**\n * @typedef Pattern\n * @type {Array.<Channel>}\n */\n\n/**\n * @typedef Instrument\n * @type {Array.<Number>} ZzFX sound parameters\n */\n\n/**\n * Generate a song\n *\n * @param {Array.<Instrument>} instruments - Array of ZzFX sound paramaters.\n * @param {Array.<Pattern>} patterns - Array of pattern data.\n * @param {Array.<Number>} sequence - Array of pattern indexes.\n * @param {Number} [speed=125] - Playback speed of the song (in BPM).\n * @returns {Array.<Array.<Number>>} Left and right channel sample data.\n */\n\nexport const zzfxM = (instruments, patterns, sequence, BPM = 125) => {\n    let instrumentParameters,\n        i,\n        j,\n        k,\n        note,\n        sample,\n        patternChannel,\n        notFirstBeat,\n        stop,\n        instrument,\n        pitch,\n        attenuation,\n        outSampleOffset,\n        sampleOffset,\n        nextSampleOffset,\n        sampleBuffer = [],\n        leftChannelBuffer = [],\n        rightChannelBuffer = [],\n        channelIndex = 0,\n        panning,\n        hasMore = 1,\n        sampleCache = {},\n        beatLength = ((zzfxR / BPM) * 60) >> 2;\n\n    // for each channel in order until there are no more\n    for (; hasMore; channelIndex++) {\n        // reset current values\n        sampleBuffer = [(hasMore = notFirstBeat = pitch = outSampleOffset = 0)];\n\n        // for each pattern in sequence\n        sequence.map((patternIndex, sequenceIndex) => {\n            // get pattern for current channel, use empty 1 note pattern if none found\n            patternChannel = patterns[patternIndex][channelIndex] || [0, 0, 0];\n\n            // check if there are more channels\n            hasMore |= !!patterns[patternIndex][channelIndex];\n\n            // get next offset, use the length of first channel\n            nextSampleOffset =\n                outSampleOffset +\n                (patterns[patternIndex][0].length - 2 - !notFirstBeat) *\n                    beatLength;\n\n            // for each beat in pattern, plus one extra if end of sequence\n            for (\n                i = 2, k = outSampleOffset;\n                i <\n                patternChannel.length + (sequenceIndex == sequence.length - 1);\n                notFirstBeat = ++i\n            ) {\n                // <channel-note>\n                note = patternChannel[i];\n\n                // stop if different instrument or new note\n                stop = (instrument != (patternChannel[0] || 0)) | note | 0;\n\n                // fill buffer with samples for previous beat, most cpu intensive part\n                for (\n                    j = 0;\n                    j < beatLength && notFirstBeat;\n                    // fade off attenuation at end of beat if stopping note, prevents clicking\n                    j++ > beatLength - 99 && stop\n                        ? (attenuation += (attenuation < 1) / 99)\n                        : 0\n                ) {\n                    // copy sample to stereo buffers with panning\n                    sample =\n                        ((1 - attenuation) * sampleBuffer[sampleOffset++]) /\n                            2 || 0;\n                    leftChannelBuffer[k] =\n                        (leftChannelBuffer[k] || 0) + sample * panning - sample;\n                    rightChannelBuffer[k] =\n                        (rightChannelBuffer[k++] || 0) +\n                        sample * panning +\n                        sample;\n                }\n\n                // set up for next note\n                if (note) {\n                    // set attenuation\n                    attenuation = note % 1;\n                    panning = patternChannel[1] || 0;\n                    if ((note |= 0)) {\n                        // get cached sample\n                        sampleBuffer = sampleCache[\n                            [\n                                (instrument =\n                                    patternChannel[(sampleOffset = 0)] || 0),\n                                note\n                            ]\n                        ] =\n                            sampleCache[[instrument, note]] ||\n                            // add sample to cache\n                            ((instrumentParameters = [\n                                ...instruments[instrument]\n                            ]),\n                            (instrumentParameters[2] *=\n                                2 ** ((note - 12) / 12)),\n                            zzfxG(...instrumentParameters));\n                    }\n                }\n            }\n\n            // update the sample offset\n            outSampleOffset = nextSampleOffset;\n        });\n    }\n\n    return [leftChannelBuffer, rightChannelBuffer];\n};\n","export const ObliqueMystique = [[[1.3,0,23,,,.2,3,5],[1.5,0,4e3,,,.03,2,1.25,,,,,.02,6.8,-.3,,.5],[.7,0,2100,,,.2,3,3,,,-400,,,2],[,0,655,,,.11,2,1.65,,,,,,3.8,-.1,.1]],[[[,-.5,13,,,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,14,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,14,,,,],[1,.3,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,],[2,1,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,],[,.6,,,,,13,,18,,19,,,,,,,,19,,18,,,,16,,,,13,,,,,,,,,,13,,18,,19,,,,,,,,18,19,18,,,,13,14,13,,16,,18,,19,,],[3,-1,,,13,,,,,,,,,,,,13,,,,,,,,,,,,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,,,13,13,13,13]],[[,-.5,13,,,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,14,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,14,,,,],[1,.3,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,],[2,1,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,]]],[1,1,0,0,0,0,1,0],,]\n","'use strict';\n\nimport { TITLE } from './Constants';\nimport { zzfx, zzfxP, zzfxX } from './lib/zzfx';\nimport { zzfxM } from './lib/zzfxm';\nimport { ObliqueMystique } from './songs/ObliqueMystique';\n\nexport const Audio = {\n    init() {\n        Audio.readyToPlay = false;\n\n        Audio.ctx = zzfxX;\n        Audio.gain_ = Audio.ctx.createGain();\n        Audio.gain_.connect(Audio.ctx.destination);\n        zzfx.destination_ = Audio.gain_;\n\n        Audio.shotgun = [,0.01,140,0.01,0.02,0.45,4,2.42,0.1,-0.1,,,,1.2,,0.3,0.04,0.8,0.02];\n        Audio.page = [,,1233,,.01,.2,1,1.43,,,539,.1,,,,,,.51,.03,.01];\n        Audio.shellReload = [,,68,0.01,,0.14,1,1.53,7.5,0.1,50,0.02,-0.01,-0.2,0.1,0.2,,0.47,0.01];\n        Audio.damage = [,,391,,.19,.01,2,.54,-4,20,,,,,,,.02,.9];\n        Audio.alarm = [,,970,.12,.25,.35,,.39,8.1,,10,.1,.2,,.1,,,.6,.09,.13];\n        // [,,961,.05,.06,1.17,1,4.67,.8,,,,,.8,-0.8,.1,.49,.62,.09];\n        Audio.victory = [,,454,.06,.86,.71,2,.63,-0.7,1.7,-83,.09,.27,.3,.2,,.18,.95,.02,.02];\n        Audio.song = zzfxM(...ObliqueMystique);\n\n        // Save our background music in os13k, for fun!\n        localStorage[`OS13kMusic,${TITLE} - Oblique Mystique`] = JSON.stringify(ObliqueMystique);\n    },\n\n    update() {\n        if (!Audio.readyToPlay) return;\n\n        if (!Audio.musicPlaying) {\n            //Audio.bgmusicnode = zzfxP(...Audio.song);\n            //Audio.bgmusicnode.loop = true;\n            Audio.musicPlaying = true;\n        }\n    },\n\n    play(sound) {\n        if (!Audio.readyToPlay) return;\n        zzfx(...sound);\n    },\n\n    // It's important we do pausing and unpausing as specific events and not in general update(),\n    // because update() is triggered by the animation frame trigger which does not run if the\n    // page is not visible. (So, if you want the music to fade in the background, for example,\n    // that's not helpful if it won't work because you aren't looking at the page!)\n\n    pause() {\n        Audio.gain_.gain.linearRampToValueAtTime(0, Audio.ctx.currentTime + 1);\n    },\n\n    unpause() {\n        Audio.gain_.gain.linearRampToValueAtTime(1, Audio.ctx.currentTime + 1);\n    }\n};\n","'use strict';\n\nimport { game } from './Game';\n\n/**\n * Hud\n *\n * Health bars, ammo, etc.\n */\nexport const Hud = {\n    init() {\n//        Hud.tooltipCanvas = new Canvas(GAME_WIDTH, GAME_HEIGHT);\n    },\n\n    draw() {\n        return;\n    },\n/*\n    drawPageArrow() {\n        let page = Hud.closestPage();\n        if (page) {\n            let vector = vectorBetween(game.player.pos, page.pos);\n            let angle = vector2angle(vector);\n            vector.m = clamp(vector.m / 2, 16, Viewport.height / 2 - 5);\n            if (vector.m > 64) {\n                let xy = vectorAdd(game.player.pos, vector);\n                let a = Math.sin(game.frame / 60)\n                Viewport.ctx.globalAlpha = Math.sin(game.frame / 20) * 0.2 + 0.8;\n                Sprite.drawViewportSprite(Sprite.page[2], xy, angle + R90);\n                Viewport.ctx.globalAlpha = 1;\n            }\n        }\n    },\n\n    closestPage() {\n        let pages = game.entities.filter(entity => entity.page);\n        let pos = game.player.pos;\n        pages.sort((a, b) => {\n            let dist = ((a.pos.x - pos.x) ** 2 + (a.pos.y - pos.y) ** 2) - ((b.pos.x - pos.x) ** 2 + (b.pos.y - pos.y) ** 2);\n            return dist;\n        });\n        return pages[0];\n    },\n\n    drawBuildingHover(uv) {\n        let anchor = { ...uv };\n\n        if (anchor.u + 100 > Viewport.width) anchor.u -= 100;\n        if (anchor.v > 80 + 10) anchor.v -= 80;\n\n        Viewport.ctx.fillStyle = 'rgba(30, 30, 30, 0.9)';\n        Viewport.ctx.fillRect(anchor.u, anchor.v, 100, 80);\n\n        Viewport.ctx.strokeStyle = 'rgba(95, 205, 228, 0.9)';\n        Viewport.ctx.strokeRect(anchor.u, anchor.v, 100, 80);\n\n        Text.drawText(\n            Viewport.ctx,\n            Text.splitParagraph(\n                'SNIPER TOWER\\n\\n' +\n                '- STRONG VS GROUND\\n' +\n                '- WEAK VS AIR\\n',\n                100\n            ),\n            anchor.u + 4, anchor.v + 4,\n            1,\n            Text.white,\n            Text.shadow\n        );\n\n        // random lightning effect!\n        //Hud.drawLightning(30, 60, 120, 90);\n        Hud.drawLightning(30, 60, uv.u, uv.v);\n    },\n\n    drawTooltip(uv, body, cost) {\n        Hud.tooltipCanvas.ctx.clearRect(0, 0, GAME_WIDTH, GAME_HEIGHT);\n\n        let lines = Text.splitParagraph(body, 100, 0);\n        let w = Math.max(...lines.map(line => line.w)), h = lines[lines.length - 1].v + lines[lines.length - 1].h;\n        let u = 3, v = 3;\n\n        if (cost) {\n            cost = `${cost.ore || 0}@   ${cost.crystal || 0}$`;\n            w = Math.max(w, Text.measureWidth(cost), 75);\n            h += 10;\n        }\n\n        Hud.tooltipCanvas.ctx.fillStyle = '#ead4aa';\n        Hud.tooltipCanvas.ctx.fillRect(0, 0, w + 6, h + 6);\n\n        Hud.tooltipCanvas.ctx.fillStyle = '#262b44';\n        Hud.tooltipCanvas.ctx.fillRect(1, 1, w + 4, h + 4);\n\n        Hud.tooltipCanvas.ctx.clearRect(0, h + 5, 1, 1);\n\n        if (cost) {\n            Text.drawText(Hud.tooltipCanvas.ctx, cost, u + w - Text.measureWidth(cost), v, 1, Text['#fee761'], Text.shadow);\n            v += 10;\n        }\n\n        Text.drawText(Hud.tooltipCanvas.ctx, lines, u, v, 1, Text['#ead4aa'], Text.shadow);\n\n        Viewport.ctx.globalAlpha = 0.9;\n        Viewport.ctx.drawImage(Hud.tooltipCanvas.canvas, uv.u, uv.v - h - 6);\n        Viewport.ctx.globalAlpha = 1;\n\n        /*\n\n        let textsize = Text.drawParagraph(\n            Hud.tooltipCanvas.ctx,\n            body,\n            2, 2,\n            100, 0,\n            1,\n            Text.white,\n            Text.shadow\n        );\n\n        let anchor = { ...uv };\n\n        if (anchor.u + 100 > Viewport.width) anchor.u -= 100;\n        if (anchor.v > 80 + 10) anchor.v -= 80;\n\n        Viewport.ctx.fillStyle = 'rgba(30, 30, 30, 0.9)';\n        Viewport.ctx.fillRect(anchor.u, anchor.v, 100, 80);\n\n        Viewport.ctx.strokeStyle = 'rgba(95, 205, 228, 0.9)';\n        Viewport.ctx.strokeRect(anchor.u, anchor.v, 100, 80);\n\n        Text.drawParagraph(\n            Viewport.ctx,\n            'SNIPER TOWER\\n\\n' +\n            '- STRONG VS GROUND\\n' +\n            '- WEAK VS AIR\\n',\n            anchor.u + 4, anchor.v + 4,\n            100 - 8, 80,\n            1,\n            Text.white,\n            Text.shadow\n        );\n\n        // random lightning effect!\n        //Hud.drawLightning(30, 60, 120, 90);\n        Hud.drawLightning(30, 60, uv.u, uv.v);\n\n    },\n\n    drawLightning2(x1, y1, x2, y2) {\n        let sections = 10;\n        let vector = vectorBetween({ x: x1, y: y1 }, { x: x2, y: y2 });\n\n        Viewport.ctx.strokeStyle = 'rgba(95, 205, 228, 1)';\n        Viewport.ctx.strokeStyle = 'rgba(190, 235, 250, 1)';\n        Viewport.ctx.lineWidth = 1;\n\n        Viewport.ctx.beginPath();\n        Viewport.ctx.moveTo(x1, y1);\n        for (let i = 1; i <= sections; i++) {\n            let x = x1 + (x2 - x1) * i / sections;\n            let y = y1 + (y2 - y1) * i / sections;\n            if (i < sections) {\n                //x += (Math.random() * (i + 3) - (i + 3) / 2) | 0;\n                //y += (Math.random() * (i + 3) - (i + 3) / 2) | 0;\n                let offset = Math.random() * 20 - 10;\n                if (i > 4 && i < 7) offset *= 1.5;\n                x += vector.y * offset;\n                y -= vector.x * offset;\n            }\n            Viewport.ctx.lineTo(x, y);\n        }\n        Viewport.ctx.stroke();\n    },\n\n    drawLightning3(x1, y1, x2, y2) {\n        if (!this.lightningOffsets) {\n            this.lightningOffsets = Array(8).fill().map((slot, index) => ({\n                pos: (index + 1) * 10,\n                value: Math.random() * 2 - 1\n            }));\n            console.log(this.lightningOffsets);\n        }\n\n        let vector = vectorBetween({ x: x1, y: y1 }, { x: x2, y: y2 });\n\n        Viewport.ctx.strokeStyle = 'rgba(95, 205, 228, 1)';\n        Viewport.ctx.strokeStyle = 'rgba(190, 235, 250, 1)';\n        Viewport.ctx.lineWidth = 1;\n\n        Viewport.ctx.beginPath();\n        Viewport.ctx.moveTo(x1, y1);\n        for (let offset of this.lightningOffsets) {\n            // First get the (x,y) along the direct line to the target\n            let x = x1 + vector.x * vector.m * offset.pos / 100;\n            let y = y1 + vector.y * vector.m * offset.pos / 100;\n\n            // Now we \"offset\" it (perpendicular to the direct line) by the specified value\n            x += vector.y * offset.value * 10;\n            y -= vector.x * offset.value * 10;\n\n            Viewport.ctx.lineTo(x, y);\n        }\n        Viewport.ctx.lineTo(x2, y2);\n        Viewport.ctx.stroke();\n\n        for (let offset of this.lightningOffsets) {\n            offset.pos += 5;\n        }\n        if (this.lightningOffsets[0].pos > 10) {\n            this.lightningOffsets.unshift({ pos: 1, value: Math.random() * 2 - 1 });\n        }\n        if (this.lightningOffsets[this.lightningOffsets.length - 1].pos > 99) {\n            this.lightningOffsets.pop();\n        }\n    },\n\n    drawLightning(x1, y1, x2, y2) {\n        let vector = vectorBetween({ x: x1, y: y1 }, { x: x2, y: y2 });\n\n        Viewport.ctx.strokeStyle = 'rgba(95, 205, 228, 1)';\n        Viewport.ctx.strokeStyle = 'rgba(190, 235, 250, 1)';\n        Viewport.ctx.lineWidth = 1;\n        Viewport.ctx.fillStyle = 'rgba(190, 235, 250, 1)';\n\n//        Viewport.ctx.beginPath();\n//        Viewport.ctx.moveTo(x1, y1);\n        let offset = 0;\n        for (let i = 0; i < vector.m; i++) {\n            let x = x1 + vector.x * i;\n            let y = y1 + vector.y * i;\n\n            let calc = Math.random();\n            if (calc < 0.33) {\n                offset--;\n            } else if (calc < 0.66) {\n                offset++;\n            }\n\n            let choke = 0.98 - (i / vector.m);\n\n            x += vector.y * offset * choke;\n            y -= vector.x * offset * choke;\n\n            Viewport.ctx.fillRect(x, y, 1, 1);\n        }\n    },\n\n    drawControlPanel() {\n        let height = 44;\n        Viewport.ctx.fillStyle = '#181425';\n        Viewport.ctx.fillRect(0, Viewport.height - height, Viewport.width, height);\n\n        Viewport.ctx.fillStyle = '#b55088';\n        Viewport.ctx.fillRect(0, Viewport.height - height - 1, Viewport.width, 1);\n\n        Viewport.ctx.fillStyle = '#f6757a';\n        Viewport.ctx.fillRect(0, Viewport.height - height - 2, Viewport.width, 1);\n\n        Viewport.ctx.fillStyle = '#c0cbdc';\n        Viewport.ctx.fillRect(0, Viewport.height - height - 3, Viewport.width, 1);\n    }\n    */\n};\n","// https://jonny.morrill.me/en/blog/gamedev-how-to-implement-a-camera-shake-effect/\n\n/**\n * Shake it baby.\n */\nexport class ScreenShake {\n    constructor(frames, hAmplitude, vAmplitude) {\n        this.frames = frames;\n        this.hAmplitude = hAmplitude;\n        this.vAmplitude = vAmplitude;\n        this.hSamples = [];\n        this.vSamples = [];\n\n        var sampleCount = frames / 2;\n        for (let i = 0; i < sampleCount; i++) {\n            this.hSamples.push(Math.random() * 2 - 1);\n            this.vSamples.push(Math.random() * 2 - 1);\n        }\n        this.frame = -1;\n    }\n\n    update() {\n        this.frame++;\n        if (this.frame >= this.frames) {\n            return false;\n        }\n\n        //let s = (this.frames / 10) * (this.frame / this.frames);\n        let s = this.frame / 2;\n        let s0 = s | 0;\n        let s1 = s0 + 1;\n        let decay = 1 - this.frame / this.frames;\n\n        this.x =\n            this.hAmplitude *\n            decay *\n            (this.hSamples[s0] +\n                (s - s0) * (this.hSamples[s1] - this.hSamples[s0]));\n        this.y =\n            this.vAmplitude *\n            decay *\n            (this.vSamples[s0] +\n                (s - s0) * (this.vSamples[s1] - this.vSamples[s0]));\n\n        return true;\n    }\n}\n","import { SCREEN_WIDTH, SCREEN_HEIGHT } from './Constants';\nimport { Viewport } from './Viewport';\nimport { Text } from './Text';\n\nexport const Screen = {\n    init() {\n        this.screen = [];\n        for (let y = 0; y < SCREEN_HEIGHT; y++) {\n            this.screen.push([]);\n        }\n        this.clear();\n    },\n\n    clear() {\n        for (let y = 0; y < SCREEN_HEIGHT; y++) {\n            for (let x = 0; x < SCREEN_WIDTH; x++) {\n                this.screen[y][x] = ' ';\n            }\n        }\n    },\n\n    write(x, y, text) {\n        if (!Array.isArray(text)) text = [text];\n\n        for (let j = 0; j < text.length; j++) {\n            for (let i = 0; i < text[j].length; i++) {\n                this.screen[y + j][x + i] = text[j][i];\n            }\n        }\n    },\n\n    drawToViewport() {\n        let text = this.screen.map(row => row.join('')).join('\\n');\n\n        Text.drawText(\n            Viewport.ctx,\n            Text.splitParagraph(text, Viewport.width),\n            0, 0,\n            1,\n            Text.terminal, Text.terminal_shadow\n        );\n    }\n};\n","import { Screen } from './Screen';\nimport { game } from './Game';\nimport { PLAY_SPEEDS } from './Constants';\nimport { Input } from './Input';\n\nexport class MainMenu {\n    constructor() {\n    }\n\n    update() {\n        switch (Input.lastKeyPressed().toUpperCase()) {\n            case 'P':\n                Input.consume();\n                game.startSession();\n                break;\n            case 'L':\n                Input.consume();\n                game.playSpeed = (game.playSpeed + 1) % PLAY_SPEEDS.length;\n                break;\n            case 'I':\n                Input.consume();\n                game.showInstructions();\n                break;\n            case 'E':\n                Input.consume();\n                game.showInstructions();\n                break;\n        }\n    }\n\n    draw() {\n        let version = '?';\n        let terminal = '?';\n\n        let highScores = [\n            `1) 6000  Bob`,\n            `2) 6000  Tom`,\n            `3) 4000  Wayne`,\n            ``,\n            ``\n        ];\n\n        Screen.clear();\n        Screen.write(0, 0, [\n            `               LL                     dd       dd`,\n            `               LL                     dd       dd                      tm`,\n            `               LL         aaaa     ddddd    ddddd    eeee   rrrrrrr`,\n            `               LL        aa  aa   dd  dd   dd  dd   ee  ee  rr    rr`,\n            `               LL        aa  aa   dd  dd   dd  dd   eeeeee  rr`,\n            `               LL        aa  aa   dd  dd   dd  dd   ee      rr`,\n            `               LLLLLLLL   aaa aa   ddd dd   ddd dd   eeee   rr`,\n            ``,\n            `                                       Version:    ${version}`,\n            `(c) 1982, 1983 Yahoo Software          Terminal:   ${terminal}`,\n            `10970 Ashton Ave.  Suite 312           Play speed: ${game.playSpeed + 1} / ${PLAY_SPEEDS.length}`,\n            `Los Angeles, Ca  90024                 Move = ↑↓←→/WASD, Jump = Space,`,\n            `                                       Stop = Other`,\n            ``,\n            `P = Play game                          High Scores`,\n            `L = Change level of difficulty         ${highScores[0]}`,\n            `C = Configure Ladder                   ${highScores[1]}`,\n            `I = Instructions                       ${highScores[2]}`,\n            `E = Exit Ladder                        ${highScores[3]}`,\n            `                                       ${highScores[4]}`,\n            ``,\n            `Enter one of the above:`\n        ]);\n    }\n}\n","import { Screen } from './Screen';\nimport { game } from './Game';\nimport { Input } from './Input';\n\nexport class InstructionsMenu {\n    constructor() {\n    }\n\n    update() {\n        if (Input.lastKeyPressed().toUpperCase() !== '') {\n            Input.consume();\n            game.showMainMenu();\n        }\n    }\n\n    draw() {\n        Screen.clear();\n        Screen.write(0, 0, [\n            `You are a Lad trapped in a maze.  Your mission is is to explore the`,\n            `dark corridors never before seen by human eyes and find hidden`,\n            `treasures and riches.`,\n            ``,\n            `You control Lad by typing the direction buttons and jumping by`,\n            `typing SPACE.  But beware of the falling rocks called Der rocks.`,\n            `You must find and grasp the treasures (shown as $) BEFORE the`,\n            `bonus time runs out.`,\n            ``,\n            `A new Lad will be awarded for every 10,000 points.`,\n            `Extra points are awarded for touching the gold`,\n            `statues (shown as &).  You will receive the bonus time points`,\n            `that are left when you have finished the level.`,\n            ``,\n            `Type an ESCape to pause the game.`,\n            ``,\n            `Remember, there is more than one way to skin a cat. (Chum)`,\n            ``,\n            `Good luck Lad.`,\n            ``,\n            ``,\n            ``,\n            `Type RETURN to return to main menu:`\n        ]);\n    }\n}\n","\n// This is our list of STATES. Each entity starts out in one of these states and can move between\n// them based on events that happen in the game. (Note that some of these are directions, but\n// since an entity keeps moving in the direction it is going unless stopped, directions are\n// states in this game.)\nexport const State = {\n    STOPPED:    1,         // Standing still\n    UP:         2,         // Moving up (player only)\n    LEFT:       3,         // Moving left\n    DOWN:       4,         // Moving down\n    RIGHT:      5,         // Moving right\n    FALLING:    6,         // Falling\n    START_JUMP: 7,         // About to start a jump (player only)\n    JUMP_LEFT:  8,         // Jumping left (player only)\n    JUMP_RIGHT: 9,         // Jumping right (player only)\n    JUMP_UP:    10,        // Jumping straight up (player only)\n    DYING:      11,        // Dying (used as a death animation)\n    DEAD:       12         // Dead (for player, restart level; for rock, disappear)\n};\n\nexport const JUMP_FRAMES = {\n    [State.JUMP_RIGHT]: [\n        { x: 1, y: -1 },\n        { x: 1, y: -1 },\n        { x: 1, y: 0 },\n        { x: 1, y: 0 },\n        { x: 1, y: 1 },\n        { x: 1, y: 1 }\n    ],\n    [State.JUMP_LEFT]: [\n        { x: -1, y: -1 },\n        { x: -1, y: -1 },\n        { x: -1, y: 0 },\n        { x: -1, y: 0 },\n        { x: -1, y: 1 },\n        { x: -1, y: 1 }\n    ],\n    [State.JUMP_UP]: [\n        { x: 0, y: -1 },\n        { x: 0, y: -1 },\n        { x: 0, y: 0 },\n        { x: 0, y: 1 },\n        { x: 0, y: 1 },\n        { x: 0, y: 0 }\n    ],\n};\n","import { State, JUMP_FRAMES } from './Behavior';\nimport { LEVEL_COLS } from './Constants';\n\nexport class Entity {\n    applyMovement(field) {\n        let repeat = false;\n\n        // This method contains generic \"movement\" application for all entities, including\n        // Lad (player) and Der Rocks (enemies). Things like falling, moving left/right, etc.,\n        // work the same for both.\n        //\n        // (There's a bunch of jump logic in here too, and moving UP, which really only applies\n        // to players, but that's OK -- Der Rocks just won't attempt those actions.)\n\n        if (this.nextState) {\n            switch (this.state) {\n                case State.STOPPED:\n                case State.LEFT:\n                case State.RIGHT:\n                    if ([State.LEFT, State.RIGHT, State.STOPPED].includes(this.nextState)) {\n                        this.state = this.nextState;\n                        this.nextState = undefined;\n                    }\n                    break;\n\n                case State.UP:\n                case State.DOWN:\n                    // Normal\n                    if ([State.LEFT, State.RIGHT].includes(this.nextState)) {\n                        this.state = this.nextState;\n                        this.nextState = undefined;\n                    }\n                    break;\n            }\n        }\n\n        if (this.nextState === State.START_JUMP) {\n            // Special case: the user wants to jump!\n            //\n            // If the player is standing on something solid, we initiate a jump based on the current\n            // movement of the player. If not, we (sort of) ignore the request to jump... although\n            // it does subtly change the behavior upon landing.\n            if (field.onSolid(this.x, this.y)) {\n                if (this.state === State.STOPPED || this.state === State.FALLING) {\n                    this.state = State.JUMP_UP;\n                    this.jumpStep = 0;\n                    this.nextState = State.STOPPED;\n                } else if (this.state === State.LEFT || this.state === State.JUMP_LEFT) {\n                    this.state = State.JUMP_LEFT;\n                    this.jumpStep = 0;\n                    this.nextState = State.LEFT;\n                } else if (this.state === State.RIGHT || this.state === State.JUMP_RIGHT) {\n                    this.state = State.JUMP_RIGHT;\n                    this.jumpStep = 0;\n                    this.nextState = State.RIGHT;\n                }\n            } else {\n                if (this.state === State.JUMP_UP || this.state === State.FALLING) {\n                    this.nextState = State.STOPPED;\n                } else if (this.state === State.JUMP_RIGHT) {\n                    this.nextState = State.RIGHT;\n                } else if (this.state === State.JUMP_LEFT) {\n                    this.nextState = State.LEFT;\n                }\n            }\n        } else if (this.nextState === State.UP && field.isLadder(this.x, this.y)) {\n            // Special case: the user wants to go up!\n            //\n            // If the user is on a ladder, we can start ascending. Note that if the user is not\n            // on a ladder we ignore their input, which is intentional -- this allows queued\n            // (pacman) input, where we can tap UP a little before reaching the ladder.\n            this.state = State.UP;\n            this.nextState = undefined;\n        } else if (this.nextState === State.DOWN && (field.isLadder(this.x, this.y) || field.isLadder(this.x, this.y + 1))) {\n            // Special case: the player wants to go down!\n            //\n            // If the player is on (or above) a ladder, we can start descending. Note that if the player is not\n            // on a ladder we ignore their input, which is intentional -- this allows queued\n            // (pacman) input, where we can tap DOWN a little before reaching the ladder.\n            this.state = State.DOWN;\n            this.nextState = undefined;\n        }\n\n        switch (this.state) {\n            case State.LEFT:\n                if (!field.onSolid(this.x, this.y)) {\n                    this.nextState = State.LEFT;\n                    this.state = State.FALLING;\n                    repeat = true;\n                    break;\n                }\n                if (field.emptySpace(this.x - 1, this.y)) {\n                    this.x--;\n                } else {\n                    this.nextState = State.STOPPED;\n                }\n                break;\n\n            case State.RIGHT:\n                if (!field.onSolid(this.x, this.y)) {\n                    this.nextState = State.RIGHT;\n                    this.state = State.FALLING;\n                    repeat = true;\n                    break;\n                }\n                if (field.emptySpace(this.x + 1, this.y)) {\n                    this.x++;\n                } else {\n                    this.nextState = State.STOPPED;\n                }\n                break;\n\n            case State.UP:\n                if (field.canClimbUp(this.x, this.y - 1)) {\n                    this.y--;\n                } else {\n                    this.state = State.STOPPED;\n                }\n                break;\n\n            case State.DOWN:\n                if (field.canClimbDown(this.x, this.y + 1)) {\n                    this.y++;\n                } else {\n                    this.state = State.STOPPED;\n                }\n                break;\n\n            case State.JUMP_RIGHT:\n            case State.JUMP_LEFT:\n            case State.JUMP_UP:\n                let step = JUMP_FRAMES[this.state][this.jumpStep];\n                console.log(['jump', this.state, this.jumpStep, step]);\n                if ((this.x + step.x >= 0) && (this.x + step.x < LEVEL_COLS)) {\n                    let terrain = field.layout[this.y + step.y][this.x + step.x];\n                    if (['=', '|', '-'].includes(terrain)) {\n                        if (field.onSolid(this.x, this.y)) {\n                            this.state = this.nextState;\n                            this.nextState = undefined;\n                        } else {\n                            switch (this.state) {\n                                case State.JUMP_RIGHT:\n                                    this.nextState = State.RIGHT;\n                                    break;\n                                case State.JUMP_LEFT:\n                                    this.nextState = State.LEFT;\n                                    break;\n                                case State.JUMP_UP:\n                                    this.nextState = State.UP;\n                                    break;\n                            }\n                            this.state = State.FALLING;\n                        }\n                    } else if (terrain === 'H') {\n                        this.x += step.x;\n                        this.y += step.y;\n                        this.state = State.STOPPED;\n                        this.nextState = undefined;\n                    } else {\n                        this.x += step.x;\n                        this.y += step.y;\n                        this.jumpStep++;\n\n                        if (this.jumpStep >= JUMP_FRAMES[this.state].length) {\n                            this.state = this.nextState;\n                            this.nextState = undefined;\n                        }\n                    }\n                } else {\n                    if (field.onSolid(this.x, this.y)) {\n                        this.state = this.nextState;\n                        this.nextState = undefined;\n                    } else {\n                        this.state = State.FALLING;\n                        this.nextState = State.STOPPED;\n                    }\n                }\n                break;\n\n            case State.FALLING:\n                if (field.onSolid(this.x, this.y)) {\n                    this.state = this.nextState || State.STOPPED;\n                } else {\n                    this.y++;\n                }\n                break;\n        }\n\n        // If we were attempting to move somewhere and realized we should be falling instead,\n        // we want to re-run the entire algorithm once. This avoids what boils down to a \"skipped\n        // frame\" from the user's point of view.\n        if (repeat) return this.applyMovement(field);\n    }\n}\n","'use strict';\n\nimport { Sprite } from './Sprite';\nimport { State, JUMP_FRAMES } from './Behavior';\nimport { Input } from './Input';\nimport { Text } from './Text';\nimport { LEVEL_ROWS, LEVEL_COLS } from './Constants';\nimport { Entity } from './Entity';\nimport { Screen } from './Screen';\nimport { game } from './Game';\n\nconst DEATH_FRAMES = ['p', 'b', 'd', 'q', 'p', 'b', 'd', 'q', '-', '-', '_'];\n\n/**\n * Player\n */\nexport class Player extends Entity {\n    constructor(x, y) {\n        super();\n        this.x = x;\n        this.y = y;\n        this.state = State.STOPPED;\n        this.nextState = State.STOPPED;\n        this.jumpStep = 0;\n        this.deathStep = 0;\n        console.log('player constructed', x, y);\n    }\n\n    update() {\n        if (this.state === State.DYING) {\n            this.deathStep++;\n            if (this.deathStep >= DEATH_FRAMES.length) this.state = State.DEAD;\n        }\n\n        if (this.state === State.DYING || this.state === State.DEAD) return;\n\n        let action = Input.lastActionPressed();\n\n        if (action === Input.Action.LEFT) {\n            this.nextState = State.LEFT;\n            Input.consume();\n        } else if (action === Input.Action.RIGHT) {\n            this.nextState = State.RIGHT;\n            Input.consume();\n        } else if (action === Input.Action.UP) {\n            this.nextState = State.UP;\n            Input.consume();\n        } else if (action === Input.Action.DOWN) {\n            this.nextState = State.DOWN;\n            Input.consume();\n        } else if (action === Input.Action.JUMP) {\n            this.nextState = State.START_JUMP;\n            Input.consume();\n        }\n\n        return this.applyMovement(game.session.field);\n    }\n\n    draw() {\n        let char = 'g';\n\n        switch (this.state) {\n            case State.RIGHT:\n            case State.JUMP_RIGHT:\n            case State.UP:\n            case State.DOWN:\n                char = 'p';\n                break;\n\n            case State.LEFT:\n            case State.JUMP_LEFT:\n                char = 'q';\n                break;\n\n            case State.FALLING:\n                char = 'b';\n                break;\n\n            case State.DYING:\n                char = DEATH_FRAMES[this.deathStep];\n                break;\n\n            case State.DEAD:\n                char = '_';\n                break;\n        }\n\n        Screen.write(this.x, this.y, char);\n    }\n}\n","import { Text } from './Text';\nimport { State } from './Behavior';\nimport { LEVEL_COLS } from './Constants';\nimport { Entity } from './Entity';\nimport { Screen } from './Screen';\n\nconst DEATH_FRAMES = ['%', ':'];\n\nexport class Rock extends Entity {\n    constructor(dispenser) {\n        super();\n        this.x = dispenser.x;\n        this.y = dispenser.y;\n        this.state = State.FALLING;\n        this.nextState = undefined;\n        this.deathStep = 0;\n    }\n\n    update(field) {\n        if (this.state === State.DYING) {\n            this.deathStep++;\n            if (this.deathStep >= DEATH_FRAMES.length) this.state = State.DEAD;\n        }\n\n        if (this.state === State.DYING || this.state === State.DEAD) return;\n\n        if (this.state === State.STOPPED) {\n            if (this.x === 0 || !field.emptySpace(this.x - 1, this.y)) {\n                this.nextState = State.RIGHT;\n            } else if (this.x === LEVEL_COLS - 1 || !field.emptySpace(this.x + 1, this.y)) {\n                this.nextState = State.LEFT;\n            } else {\n                this.nextState = Math.random() > 0.5 ? State.LEFT : State.RIGHT;\n            }\n        }\n\n        if (this.x === 0 && this.state === State.LEFT) {\n            this.state = State.RIGHT;\n        }\n\n        if (this.x === LEVEL_COLS - 1 && this.state === State.RIGHT) {\n            this.state = State.LEFT;\n        }\n\n        if (this.state !== State.FALLING && !field.onSolid(this.x, this.y)) {\n            this.nextState = State.FALLING;\n        }\n\n        if (field.isLadder(this.x, this.y + 1) && [State.LEFT, State.RIGHT].includes(this.state)) {\n            let r = Math.floor(Math.random() * 4);\n            this.nextState = [State.LEFT, State.RIGHT, State.DOWN, State.DOWN][r];\n        }\n\n        if (field.isEater(this.x, this.y)) {\n            this.state = State.DYING;\n            return;\n        }\n\n        this.applyMovement(field);\n    }\n\n    draw() {\n        let char = 'o';\n\n        switch (this.state) {\n            case State.DYING:\n                char = DEATH_FRAMES[this.deathStep];\n                break;\n            case State.DEAD:\n                return;\n        }\n\n        Screen.write(this.x, this.y, char);\n    }\n}\n","import { LEVEL_ROWS, LEVEL_COLS } from './Constants';\nimport LevelData from '../levels/levels.json';\n\nexport const Level = {\n    LEVELS: LevelData,\n\n    load(levelNumber) {\n        console.log(Level.LEVELS);\n        // As the player keeps playing, level numbers will loop around to beginning\n        let level = Level.LEVELS[levelNumber % Level.LEVELS.length];\n        if (!level) throw new Error(`No such level number: ${levelNumber}`);\n\n        // Perform some sanity checks on the level layout and extract useful info\n        // like player start position and dispenser positions etc.\n\n        let layout = level.layout.map(row => row.split(''));\n        let dispensers = [];\n        let player;\n\n        // Sanity check\n        layout = layout.slice(0, LEVEL_ROWS);\n\n        for (let y = 0; y < LEVEL_ROWS; y++) {\n            // Sanity checks\n            if (!layout[y]) layout[y] = [];\n            layout[y] = layout[y].slice(0, LEVEL_COLS);\n\n            for (let x = 0; x < LEVEL_COLS; x++) {\n                // Sanity check\n                if (!layout[y][x]) layout[y][x] = ' ';\n\n                // Der Dispensers (V) and Der Eaters (*) have behaviors, so it is convenient for us\n                // to construct a list of them, but they are permanent parts of the layout, so we can\n                // leave them as part of the level and draw them normally.\n\n                if (layout[y][x] === 'V') {\n                    dispensers.push({ x, y });\n                }\n\n                // Treasure ($), Statues (&), and the Lad (p) are transient - the player moves around and\n                // can pick up the treasures and statues. That's why for these elements, we add them to\n                // our lists AND we remove them from the \"playing field\", we'll draw them separately on\n                // top of the layout.\n\n                if (layout[y][x] === 'p') {\n                    layout[y][x] = ' ';\n                    player = { x, y };\n                }\n\n                // Everything else, like floors (=), walls (|), ladders (H) and fire (^), is part of the\n                // layout. The Lad interacts with them, but we can handle that during our movement checks.\n            }\n        }\n\n        return {\n            name: level.name,\n            time: level.time,\n            maxRocks: level.maRrocks,\n            layout,\n            dispensers,\n            player\n        };\n    }\n};\n","import { Text } from './Text';\nimport { Player } from './Player';\nimport { Rock } from './Rock';\nimport { LEVEL_COLS, LEVEL_ROWS, SCORE_ROCK, SCORE_STATUE, SCORE_TREASURE } from './Constants';\nimport { game } from './Game';\nimport { State } from './Behavior';\nimport { Screen } from './Screen';\nimport { Level } from './Level';\n\n/**\n * Field\n *\n * The \"field\" represents the current level, or, \"playing field\". A new playing field is created\n * every time you start a level, so we attach everything about the currently played level to\n * the field -- positions of treasure, the player, victory conditions, etc.\n */\nexport class Field {\n    constructor(levelNumber) {\n        let level = Level.load(levelNumber);\n\n        this.layout = level.layout;\n        this.dispensers = level.dispensers;\n        this.time = level.time;\n        this.maxRocks = level.rocks;\n        this.rocks = [];\n        this.player = new Player(level.player.x, level.player.y);\n    }\n\n    update() {\n        let oldX = this.player.x, oldY = this.player.y;\n\n        // Move player based on user input\n        this.player.update();\n\n        if (oldX !== this.player.x && oldY === this.player.y) {\n            if (this.isDisappearingFloor(oldX, oldY + 1)) {\n                this.layout[oldY + 1][oldX] = ' ';\n            }\n        }\n\n        // Check if player should be dead (before moving rocks)\n        this.checkIfPlayerShouldDie(game.session);\n\n        // Move rocks\n        for (let rock of this.rocks) rock.update(this);\n\n        // Check if player should be dead (after moving rocks)\n        this.checkIfPlayerShouldDie(game.session);\n\n        // Collect statues\n        if (this.isStatue(this.player.x, this.player.y)) {\n            this.layout[this.player.y][this.player.x] = ' ';\n            game.session.updateScore(SCORE_STATUE);\n        }\n\n        // Collect treasure (ends the current level)\n        if (this.isTreasure(this.player.x, this.player.y)) {\n            game.session.startNextLevel();\n        }\n\n        // Interact with trampolines\n        if (this.isTrampoline(this.player.x, this.player.y)) {\n            switch (Math.floor(Math.random() * 5)) {\n                case 0:\n                    this.player.state = State.LEFT;\n                    this.player.nextState = undefined;\n                    break;\n                case 1:\n                    this.player.state = State.RIGHT;\n                    this.player.nextState = undefined;\n                    break;\n                case 2:\n                    this.player.state = State.JUMP_UP;\n                    this.player.nextState = undefined;\n                    this.player.jumpStep = 0;\n                    break;\n                case 3:\n                    this.player.state = State.JUMP_LEFT;\n                    this.player.nextState = State.LEFT;\n                    this.player.jumpStep = 0;\n                    break;\n                case 4:\n                    this.player.state = State.JUMP_RIGHT;\n                    this.player.nextState = State.RIGHT;\n                    this.player.jumpStep = 0;\n                    break;\n            }\n        }\n\n        // Dispense new rocks\n        if (this.rocks.length < 3 && Math.random() > 0.9) {\n            let dispenser = this.dispensers[Math.floor(Math.random() * this.dispensers.length)];\n            this.rocks.push(new Rock(dispenser));\n        }\n\n        // Kill dead rocks\n        this.rocks = this.rocks.filter(rock => rock.state !== State.DEAD);\n\n        // Kill player\n        if (this.player.state === State.DEAD) {\n            game.session.restartLevel();\n        }\n    }\n\n    draw() {\n        // Draw layout\n        Screen.write(0, 0, this.layout.map(row => row.join('')));\n\n        // Draw player\n        this.player.draw();\n\n        // Draw rocks\n        this.rocks.forEach(rock => rock.draw());\n    }\n\n    onSolid(x, y) {\n        return ['=', '-', 'H', '|'].includes(this.layout[y + 1][x]) || this.layout[y][x] === 'H';\n    }\n\n    emptySpace(x, y) {\n        if (x < 0 || x >= LEVEL_COLS) {\n            return false;\n        } else {\n            return !['|', '='].includes(this.layout[y][x]);\n        }\n    }\n\n    isLadder(x, y) {\n        return this.layout[y][x] === 'H';\n    }\n\n    isStatue(x, y) {\n        return this.layout[y][x] === '&';\n    }\n\n    isTreasure(x, y) {\n        return this.layout[y][x] === '$';\n    }\n\n    isTrampoline(x, y) {\n        return this.layout[y][x] === '.';\n    }\n\n    isEater(x, y) {\n        return this.layout[y][x] === '*';\n    }\n\n    isFire(x, y) {\n        return this.layout[y][x] === '^';\n    }\n\n    isDisappearingFloor(x, y) {\n        return this.layout[y][x] === '-';\n    }\n\n    canClimbUp(x, y) {\n        if (y < 0) return false;\n        return ['H', '&', '$'].includes(this.layout[y][x]);\n    }\n\n    canClimbDown(x, y) {\n        return ['H', '&', '$', ' ', '^', '.'].includes(this.layout[y][x]);\n    }\n\n    checkIfPlayerShouldDie() {\n        if (this.player.state === State.DYING || this.player.state === State.DEAD) return;\n\n        if (this.isFire(this.player.x, this.player.y)) {\n            this.player.state = State.DYING;\n        }\n\n        for (let i = 0; i < this.rocks.length; i++) {\n            if (this.player.x === this.rocks[i].x) {\n                if (this.player.y === this.rocks[i].y) {\n                    this.player.state = State.DYING;\n                    this.rocks.splice(i, 1);\n                    break;\n                } else if (this.player.y === this.rocks[i].y - 1 && this.emptySpace(this.player.x, this.player.y + 1)) {\n                    game.session.updateScore(SCORE_ROCK);\n                } else if (this.player.y === this.rocks[i].y - 2 && this.emptySpace(this.player.x, this.player.y + 1) && this.emptySpace(this.player.x, this.player.y + 2)) {\n                    game.session.updateScore(SCORE_ROCK);\n                }\n            }\n        }\n    }\n}\n","\nimport { LEVEL_ORDER, SCORE_ROCK, SCORE_STATUE, SCORE_TREASURE } from './Constants';\nimport { Field } from './Field';\nimport { Screen } from './Screen';\nimport { Input } from './Input';\n\nexport class Session {\n    constructor() {\n        this.score = 0;\n        this.levelNumber = 0;\n        this.levelCycle = 1;\n        this.lives = 5;\n        this.nextLife = 100;\n    }\n\n    update() {\n        if (!this.field) {\n            this.field = new Field(this.levelNumber);\n        }\n\n        this.field.update();\n\n        let recentKeystrokes = Input.buffer.map(event => event.key).join('').toUpperCase();\n\n        if (recentKeystrokes.match(/IDCLEV(\\d\\d)/)) {\n            Input.consume();\n            this.field = undefined;\n            this.levelNumber = parseInt(RegExp.$1, 10);\n        } else if (recentKeystrokes.includes(\"IDDQD\")) {\n            Input.consume();\n            console.log(\"god mode\");\n        }\n    }\n\n    draw() {\n        Screen.clear();\n\n        if (this.field) this.field.draw();\n\n        let stat = [\n            String(this.lives).padStart(2, ' '),\n            String(this.levelNumber + 1).padStart(2, ' '),\n            String(this.score).padStart(4, '0'),\n            this.field ? String(this.field.time).padStart(4, ' ') : ''\n        ];\n        Screen.write(0, 21, `Lads   ${stat[0]}   Level   ${stat[1]}    Score   ${stat[2]}    Bonus time   ${stat[3]}`);\n    }\n\n    restartLevel() {\n        this.field = undefined;\n    }\n\n    startNextLevel() {\n        this.field = undefined;\n        this.levelNumber++;\n        if (this.levelNumber % LEVEL_ORDER.length === 0) {\n            this.levelCycle++;\n        }\n    }\n\n    updateScore(scoreType) {\n        switch (scoreType) {\n            case SCORE_ROCK:\n                this.score += 2;\n                break;\n            case SCORE_STATUE:\n                this.score += this.field.time;\n                break;\n            case SCORE_TREASURE:\n                // Called repeatedly during the end-of-level event.\n                this.score += 1;\n                break;\n        }\n    }\n}\n","'use strict';\n\nimport { Sprite } from './Sprite';\nimport { Input } from './Input';\nimport { Text } from './Text';\nimport { Viewport } from './Viewport';\nimport { GAME_WIDTH, GAME_HEIGHT, PLAY_SPEEDS } from './Constants';\nimport { rgba, createCanvas, clamp, partialText, uv2xy, xy2qr } from './Util';\nimport { Audio } from './Audio';\nimport { Hud } from './Hud';\nimport { ScreenShake } from './ScreenShake';\nimport { Screen } from './Screen';\nimport { MainMenu } from './MainMenu';\nimport { InstructionsMenu } from './InstructionsMenu';\nimport { Session } from './Session';\n\n/**\n * Game state.\n */\nexport class Game {\n    init() {\n        Sprite.loadSpritesheet(async () => {\n            await Viewport.init();\n            await Screen.init();\n            await Sprite.init();\n            Text.init();\n            Hud.init();\n            Input.init();\n            Audio.init();\n\n            this.entities = [];\n            this.dialogPending = {};\n            this.dialogSeen = {};\n            this.roomsCleared = {};\n            this.shadowOffset = 0;\n            this.screenshakes = [];\n            this.camera = { pos: { x: 0, y: 0 } };\n            this.cameraFocus = { pos: { x: 0, y: 0 } };\n\n            window.addEventListener('blur', () => this.pause());\n            window.addEventListener('focus', () => this.unpause());\n\n            this.start();\n        });\n    }\n\n    start() {\n        this.frame = 0;\n        this.frameTimes = [];\n\n        this.menu = new MainMenu();\n\n        this.playSpeed = 0;\n\n        this.update();\n        window.requestAnimationFrame((delta) => this.onFrame(delta));\n    }\n\n    onFrame() {\n        let desiredFps = this.session ? PLAY_SPEEDS[this.playSpeed] : 60;\n        let now = new Date().getTime();\n        let lastFrame = this.lastFrame || 0;\n\n        if (now - lastFrame >= 1000 / desiredFps) {\n            this.update();\n            this.lastFrame = now;\n        }\n\n        Viewport.resize();\n        this.draw();\n\n        window.requestAnimationFrame(() => this.onFrame());\n    }\n\n    update() {\n        // Pull in frame by frame button pushes / keypresses / mouse clicks\n        Input.update();\n\n        /*game.camera.pos.x += 0.1;\n        game.camera.pos.y -= 0.1;*/\n\n        //if (Input.pressed[Input.Action.MENU]) {\n        //    this.paused ? this.unpause() : this.pause();\n        //}\n\n        if (this.paused) return;\n\n        // perform any per-frame audio updates\n        Audio.update();\n\n        // Behavior (AI, player input, etc.)\n        //perform(this.entities); <-- cut to save space\n\n        // perform any queued damage\n        //Damage.perform(this.entities);\n\n        // Movement (perform entity velocities to position)\n\n        // Dialog scheduling\n        //DialogScheduling.perform();\n\n        // Victory conditions\n\n        if (this.menu) {\n            this.menu.update();\n        }\n\n        /*    if (!this.session) {\n            this.session = new Session();\n        }*/\n\n        if (this.session) this.session.update();\n\n        // Culling (typically when an entity dies)\n\n        // Camera logic\n        /*let diff = {\n            x: this.player.pos.x - this.camera.pos.x,\n            y: this.player.pos.y - this.camera.pos.y\n        };*/\n\n        /*\n        this.camera.pos.x += diff.x * 0.2;\n        this.camera.pos.y += diff.y * 0.2;\n        */\n\n        // Tick screenshakes and cull finished screenshakes\n        this.screenshakes = this.screenshakes.filter(screenshake =>\n            screenshake.update()\n        );\n\n        // Flickering shadows\n        if (game.frame % 6 === 0) this.shadowOffset = (Math.random() * 10) | 0;\n\n        // Intro screenshake\n        if (game.frame === 30) game.screenshakes.push(new ScreenShake(20, 20, 20));\n    }\n\n    draw() {\n        // Reset canvas transform and scale\n        Viewport.ctx.setTransform(Viewport.scale, 0, 0, Viewport.scale, 0, 0);\n\n        Viewport.ctx.fillStyle = 'black';\n        Viewport.ctx.fillRect(0, 0, Viewport.width, Viewport.height);\n\n        Viewport.ctx.translate((Viewport.width - GAME_WIDTH) / 2 | 0, (Viewport.height - GAME_HEIGHT) / 2 | 0);\n\n        if (this.session) this.session.draw();\n        if (this.menu) this.menu.draw();\n\n        Screen.drawToViewport();\n\n        return;\n\n        // Render screenshakes (canvas translation)\n        let shakeX = 0, shakeY = 0;\n        this.screenshakes.forEach(shake => {\n            shakeX += shake.x;\n            shakeY += shake.y;\n        });\n        Viewport.ctx.translate(shakeX, shakeY);\n\n        //Maze.draw();\n\n        for (let entity of this.entities) {\n            if (!entity.z || entity.z < 100) entity.draw();\n        }\n\n        Viewport.ctx.drawImage(\n            Sprite.shadow.img,\n            0, 0,\n            500, 500,\n            -this.shadowOffset, -this.shadowOffset,\n            Viewport.width + this.shadowOffset * 2,\n            Viewport.height + this.shadowOffset * 2\n        );\n    }\n\n    pause() {\n        if (this.paused) return;\n        this.paused = true;\n        Audio.pause();\n    }\n\n    unpause() {\n        if (!this.paused) return;\n        this.paused = false;\n        Audio.unpause();\n    }\n\n    startSession() {\n        this.menu = undefined;\n        this.session = new Session();\n    }\n\n    showMainMenu() {\n        this.menu = new MainMenu();\n        this.session = undefined;\n    }\n\n    showInstructions() {\n        this.menu = new InstructionsMenu();\n        this.session = undefined;\n    }\n}\n\nexport const game = new Game();\n","import { game } from './Game';\n\n/**\n * Create and launch game.\n */\ngame.init();\n"]}