{"version":3,"sources":["app.js","../src/js/Util.js","../src/js/SpriteSheet-gen.js","../src/js/Constants.js","../src/js/Viewport.js","../src/js/Sprite.js","../src/js/Input.js","../src/js/Text.js","../src/js/lib/zzfx.js","../src/js/lib/zzfxm.js","../src/js/songs/ObliqueMystique.js","../src/js/Audio.js","../src/js/Screen.js","../src/js/MainMenu.js","../src/js/InstructionsMenu.js","../src/js/Entity.js","../src/js/Player.js","../src/js/Rock.js","../src/js/Level.js","../src/js/PlayingField.js","../src/js/GameSession.js","../src/js/Game.js","../src/js/index.js"],"names":["rgba","r","g","b","a","createCanvas","width","height","canvas","document","createElement","ctx","getContext","SpriteSheet","PLAY_SPEEDS","Viewport","[object Object]","getElementById","resize","force","dpi","window","devicePixelRatio","clientWidth","clientHeight","dpiWidth","dpiHeight","scale","Math","min","ceil","center","u","v","imageSmoothingEnabled","style","cursor","Sprite","cb","image","Image","onload","src","sheet","data","anchor","font","source","w","h","img","x","y","initDynamicSprite","sliceCanvas","drawImage","loadCacheSlice","sprite","pos","rotation","this","viewportSprite2uv","save","translate","rotate","restore","Game","camera","Action","UP","DOWN","LEFT","RIGHT","JUMP","STOP","PAUSE","RESUME","Input","KeyMapping","KeyW","KeyS","KeyA","KeyD","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Space","Escape","Enter","buffer","history","addEventListener","event","entry","at","Date","getTime","key","code","action","push","console","log","now","filter","length","undefined","clearHistory","UNICODE_CHAR_MAP","join","split","reduce","map","char","idx","Text","white","border","margin","terminal","recolor","terminal_shadow","glow","cols","rows","temp","clearRect","bakeFontGlow","text","Array","isArray","block","drawText","c","charCodeAt","k","floor","measureWidth","sum","cu","cv","next","wip","list","cWidth","saved","space","pop","line","color","fillStyle","fillRect","globalCompositeOperation","zzfx","t","zzfxP","zzfxG","e","zzfxX","createBufferSource","f","createBuffer","zzfxR","d","i","getChannelData","set","connect","destination_","start","q","F","z","A","l","B","G","m","C","p","PI","H","I","D","random","Z","E","n","J","K","sin","max","tan","abs","round","zzfxV","top","AudioContext","webkitAudioContext","destination","ObliqueMystique","Audio","readyToPlay","gain_","createGain","shotgun","page","shellReload","damage","alarm","victory","song","instruments","patterns","sequence","BPM","instrumentParameters","j","note","sample","patternChannel","notFirstBeat","stop","instrument","pitch","attenuation","outSampleOffset","sampleOffset","nextSampleOffset","panning","sampleBuffer","leftChannelBuffer","rightChannelBuffer","channelIndex","hasMore","sampleCache","beatLength","patternIndex","sequenceIndex","zzfxM","musicPlaying","sound","gain","linearRampToValueAtTime","currentTime","Screen","screen","clear","row","splitParagraph","MainMenu","lastKey","toUpperCase","consume","startSession","playSpeed","showInstructions","highScores","write","InstructionsMenu","showMainMenu","State","STOPPED","FALLING","START_JUMP","JUMP_LEFT","JUMP_RIGHT","JUMP_UP","DYING","DEAD","JUMP_FRAMES","applyEntityMovement","entity","field","repeat","nextState","state","includes","onSolid","jumpStep","isLadder","emptySpace","canClimbUp","canClimbDown","step","terrain","layout","DEATH_FRAMES","Player","queued","deathStep","moveFrame","lastAction","Rock","dispenser","LEVEL_COLS","isEater","LevelData","name","time","maxRocks","Level","LEVELS","LEVEL_COUNT","levelNumber","level","Error","player","dispensers","slice","PlayingField","load","rocks","winning","session","updateScore","startNextLevel","oldX","oldY","update","isDisappearingFloor","checkIfPlayerShouldDie","rock","isStatue","isTreasure","isTrampoline","lives","restartLevel","draw","forEach","isFire","kill","splice","hiddenFactor","GameSession","score","levelCycle","nextLife","paused","lastFrame","nextFrame","moveFrameMillisecondDelay","handleCheatCodes","stat","String","padStart","scoreType","recentKeystrokes","match","parseInt","RegExp","$1","loadSpritesheet","async","init","lostFocus","gainedFocus","frame","requestAnimationFrame","onFrame","menu","setTransform","getElementsByClassName","className"],"mappings":"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,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,oFAGF,CACCY,KAAM,aACNZ,OAAQ,CACP,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,oFAGF,CACCY,KAAM,gBACNZ,OAAQ,CACP,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,oFAGF,CACCY,KAAM,qBACNC,KAAM,GACNC,SAAU,EACVd,OAAQ,CACP,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,oFAGF,CACCY,KAAM,WACNZ,OAAQ,CACP,kFACA,kFACA,kFACA,kFACA,mFACA,mFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,oFAGF,CACCY,KAAM,WACNZ,OAAQ,CACP,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,qFkB5jDA,MAAMe,MAAQ,CACjBC,OAAQL,UACRM,YAAaN,UAAUhM,OAEvB1F,KAAKiS,aAID,IAAIC,MAAQJ,MAAMC,OAAOE,YAAcH,MAAMC,OAAOrM,QACpD,IAAKwM,MAAO,MAAM,IAAIC,MAAM,yBAAyBF,aAKrD,IAEIG,OAFArB,OAASmB,MAAMnB,OAAO9K,IAAIwI,KAAOA,IAAI1I,MAAM,KAC3CsM,WAAa,GAIjBtB,OAASA,OAAOuB,MAAM,EfMJ,IeJlB,IAAK,IAAIlQ,EAAI,EAAGA,EfIE,GeJcA,IAAK,CAE5B2O,OAAO3O,KAAI2O,OAAO3O,GAAK,IAC5B2O,OAA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","file":"app.js","sourcesContent":["(function () {\n    'use strict';\n\n    /**\n     * Miscellaneous, individually exported functions that don't fit anywhere else.\n     *\n     * In many games I'll stick all my random math, geometry, and clipping stuff here,\n     * but in this game there's actually not a lot of extra math to do (mostly because\n     * we can only move one \"character\" at a time, and there's not any AI to speak of,\n     * so no flood fills or other algorithms to consider).\n     */\n\n    function rgba(r, g, b, a) {\n        return `rgba(${r},${g},${b},${a})`;\n    }\n\n    function createCanvas(width, height) {\n        let canvas = document.createElement('canvas');\n        canvas.width = width;\n        canvas.height = height;\n        let ctx = canvas.getContext('2d');\n        return { canvas, ctx };\n    }\n\n    /**\n     * This module is generated by `gulp buildAssets`.\n     */\n    const SpriteSheet =\n        /* <generated> */\n    { font: [ [ 0, 0, 128, 512 ] ], uri: 'sprites.png' };\n    /* </generated> */\n\n    /**\n     * Global constants for our game.\n     *\n     * I export all constants individually and import just the ones I want in each file that\n     * uses them. In theory this helps with tree-shaking and lets you see at a glance which\n     * files use which constants, but mostly it works only because this is a small game. If you\n     * have hundreds of constants it's probably better to export a single `Constants` object and\n     * let them be namespaced.\n     */\n\n    // The \"screen area\". This is an ASCII game and so most of the game logic doesn't care about browser\n    // pixels, we care about the ASCII display area (80x25).\n    //\n    // Actually the original was likely an 80x24. We can use either here, whatever looks good in the browser.\n    const SCREEN_WIDTH = 80;\n    const SCREEN_HEIGHT = /*25*/ 24;\n\n    // The size of our on-screen characters (given dimensions above, this is 80 cols by 25 rows).\n    const CHAR_WIDTH = 8;\n    const CHAR_HEIGHT = 16;\n\n    // A screen scale factor. This scale factor multiplies the entire screen size so that\n    // we can then introduce text artifacts (like character glow and scan lines), to give it\n    // a little of that 1982 feel.\n    const SCREEN_SCALE = 4;\n\n    // The playable area. Note that this is the desired dimensions, but the actual on-screen dimensions\n    // may be larger to maintain aspect ratio (see `Viewport.width` & `Viewport.height`).\n    //\n    // Note the extra little padding of a character, which just prevents our text from butting right\n    // against the edge of the browser window.\n    const GAME_WIDTH = (SCREEN_WIDTH + 1) * CHAR_WIDTH * SCREEN_SCALE;\n    const GAME_HEIGHT = (SCREEN_HEIGHT + 1) * CHAR_HEIGHT * SCREEN_SCALE;\n\n    // Fixed level size\n    const LEVEL_ROWS = 20;\n    const LEVEL_COLS = 79;\n\n    // Play speeds, expressed as frames per second.\n    //\n    // According to the original, the play speeds had millisecond delays of:\n    //   [100ms, 50ms, 25ms, 13ms, 7ms].\n    //\n    // This would mean the effective FPS was:\n    //   [10, 20, 40, 76, 142].\n    //\n    // I think this is way too high, and might not be accurate (it doesn't count\n    // time spent drawing the screen and running the game's logic, which might\n    // be a significant number of milliseconds). From memory, each speed was about\n    // 50% faster than the previous one, so that's what I've set here.\n    const PLAY_SPEEDS = [120, 100, 90, 50, 30];\n\n    // Maximum number of rocks on screen at once\n    const MAX_ROCKS = 7;\n\n    // Each dispenser on the level increases max rocks by 1\n    const DISPENSER_MAX_ROCKS = 1;\n\n    // Hidden difficulty factor - the game gets 5% faster each level cycle\n    const HIDDEN_FACTOR_PLAY_SPEED = 0.05;\n\n    // Hidden difficulty factor - the maximum number of rocks increases each level cycle\n    const HIDDEN_FACTOR_MAX_ROCKS = 2;\n\n    // Score events (note, these are just identifiers for the types of score increases, not\n    // actual score values).\n    const SCORE_ROCK = 1;\n    const SCORE_STATUE = 2;\n    const SCORE_TREASURE = 3;\n\n    // 1-Up\n    const NEW_LIFE_SCORE = 10_000;\n\n    /**\n     * Viewport\n     *\n     * Represents the game display (for us, a canvas).\n     */\n    const Viewport = {\n        init() {\n            Viewport.canvas = document.getElementById('canvas');\n            Viewport.ctx = Viewport.canvas.getContext('2d');\n            Viewport.resize(true);\n        },\n\n        // Resize the canvas to give us approximately our desired game display size.\n        //\n        // Rather than attempt to explain it, here's a concrete example:\n        //\n        //     we start with a desired game dimension:   480x270px\n        //          get the actual browser dimensions:  1309x468px\n        //          factor in the display's DPI ratio:  2618x936px\n        //         now calculate the horizontal scale:       5.45x\n        //                     and the vertical scale:       3.46x\n        //            our new offical game scaling is:        5.4x\n        //       and our official viewport dimensions:   484x173px\n        //\n        // This approach emphasizes correct aspect ratio and maintains full-window rendering, at\n        // the potential cost of limiting visibility of the game itself in either the X or Y axis.\n        // If you use this approach, make sure your GUI can \"float\" (otherwise there may be whole\n        // UI elements the player cannot see!).\n        resize(force) {\n            let dpi = window.devicePixelRatio,\n                width = Viewport.canvas.clientWidth,\n                height = Viewport.canvas.clientHeight,\n                dpiWidth = width * dpi,\n                dpiHeight = height * dpi;\n\n            if (\n                force ||\n                Viewport.canvas.width !== dpiWidth ||\n                Viewport.canvas.height !== dpiHeight\n            ) {\n                Viewport.canvas.width = dpiWidth;\n                Viewport.canvas.height = dpiHeight;\n\n                Viewport.scale = ((Math.min(dpiWidth / GAME_WIDTH, dpiHeight / GAME_HEIGHT) * 10) | 0) / 10;\n                Viewport.width = Math.ceil(dpiWidth / Viewport.scale);\n                Viewport.height = Math.ceil(dpiHeight / Viewport.scale);\n                Viewport.center = {\n                    u: (Viewport.width / 2) | 0,\n                    v: (Viewport.height / 2) | 0\n                };\n                Viewport.clientWidth = width;\n                Viewport.clientHeight = height;\n\n                // Note: smoothing flag gets reset on every resize by some browsers, which is why\n                // we do it here.\n                Viewport.ctx.imageSmoothingEnabled = false;\n            }\n\n            // We do this every frame, not just on resize, due to browser sometimes \"forgetting\".\n            Viewport.canvas.style.cursor = 'not-allowed';\n        }\n    };\n\n    /**\n     * Sprite\n     *\n     * Encapsulates loading sprite slices from the spritesheet, organizing them, and\n     * modifying them or constructing using primitives. To save space, we use some techniques\n     * like storing only a small slice of an image in the spritesheet, then using code\n     * to duplicate it, add some randomness, etc.\n     */\n    const Sprite = {\n        // This is an exception to the rule, loading the spritesheet is a special action that\n        // happens BEFORE everything is initialized.\n        loadSpritesheet(cb) {\n            let image = new Image();\n            image.onload = cb;\n            image.src = SpriteSheet.uri;\n            Sprite.sheet = image;\n        },\n\n        init() {\n            // Base pixel font and icons (see `Text.init` for additional variations)\n            Sprite.font = initBasicSprite(SpriteSheet.font[0]);\n        },\n\n        /**\n         * A small helper that draws a sprite onto a canvas, respecting the anchor point of\n         * the sprite. Note that the canvas should be PRE-TRANSLATED and PRE-ROTATED, if\n         * that's appropriate!\n         */\n        drawSprite(ctx, sprite, u, v) {\n            ctx.drawImage(sprite.img, u - sprite.anchor.x, v - sprite.anchor.y);\n        },\n\n        drawViewportSprite(sprite, pos, rotation) {\n            let { u, v } = this.viewportSprite2uv(\n                sprite,\n                pos\n            );\n            if (rotation) {\n                Viewport.ctx.save();\n                Viewport.ctx.translate(u + sprite.anchor.x, v + sprite.anchor.y);\n                Viewport.ctx.rotate(rotation);\n                Viewport.ctx.drawImage(\n                    sprite.img,\n                    -sprite.anchor.x,\n                    -sprite.anchor.y\n                );\n                Viewport.ctx.restore();\n            } else {\n                Viewport.ctx.drawImage(sprite.img, u, v);\n            }\n        },\n\n        viewportSprite2uv(sprite, pos) {\n            return {\n                u: pos.x - sprite.anchor.x - Game.camera.pos.x + Viewport.center.u,\n                v: pos.y - sprite.anchor.y - Game.camera.pos.y + Viewport.center.v\n            };\n        }\n    };\n\n    // Sprite utility functions\n\n    function initBasicSprite(data, anchor) {\n        return initDynamicSprite(loadCacheSlice(...data), anchor);\n    }\n\n    function initDynamicSprite(source, anchor) {\n        let w = source.width,\n            h = source.height;\n\n        return {\n            img: source,\n            anchor: anchor || { x: (w / 2) | 0, y: (h / 2) | 0 }\n        };\n    }\n\n    function loadCacheSlice(x, y, w, h) {\n        const source = Sprite.sheet;\n        const sliceCanvas = createCanvas(w, h);\n        sliceCanvas.ctx.drawImage(source, x, y, w, h, 0, 0, w, h);\n        return sliceCanvas.canvas;\n    }\n\n    /**\n     * `Input` is a singleton that helps us map keyboard events in the browser\n     * to in-game actions.\n     *\n     * We generally care about two types of input events:\n     *\n     *  - An \"action\" is a specific action recognizable by the game, like moving right\n     *    or jumping. In theory, if this was a more complicated game, there could be\n     *    many ways to cause a specific action (maybe user presses SPACEBAR to jump,\n     *    or they click RIGHT MOUSE BUTTON, or they tap A on a gamepad, etc.). For this\n     *    reason, it helps to separate processing in-game actions from processing the\n     *    raw keyboard events that cause them.\n     *\n     *  - Actual key presses. There are situations where we need a more broad view of\n     *    the user's key presses, for example, if they are typing in their name for a\n     *    high score or pressing one of the inputs at the main menu. In this case we\n     *    want to know \"did the user tap P?\", as opposed to mapping the keys to actions.\n     */\n\n    // A list of in-game actions that can be performed by the player\n    const Action = {\n        UP:     11,\n        DOWN:   12,\n        LEFT:   13,\n        RIGHT:  14,\n        JUMP:   15,\n        STOP:   16,\n        PAUSE:  17,\n        RESUME: 18\n    };\n\n    // A list of key code mappings and what action they perform. Here we hard-code it, but\n    // you could easily also have the key mappings controlled by settings and let the user\n    // configure it.\n    const KeyMapping = {\n        KeyW:       Action.UP,\n        KeyS:       Action.DOWN,\n        KeyA:       Action.LEFT,\n        KeyD:       Action.RIGHT,\n        ArrowUp:    Action.UP,\n        ArrowDown:  Action.DOWN,\n        ArrowLeft:  Action.LEFT,\n        ArrowRight: Action.RIGHT,\n        Space:      Action.JUMP,\n        Escape:     Action.PAUSE,\n        Enter:      Action.RESUME\n    };\n\n    const Input = {\n        Action,\n        KeyMapping,\n\n        init() {\n            // Input buffer - new keypress events go into this buffer to be handled\n            // during the game's update loop. It's up to the `update()` methods to consume\n            // key presses and remove them from the buffer.\n            this.buffer = [];\n\n            // Input history - history contains recent key press events in order,\n            // removed automatically after a few seconds. This is useful for detecting\n            // inputs like cheat codes, for example.\n            //\n            // (Actually, cheat codes is the only use for this extra history buffer, so\n            // if you didn't support cheat codes you could delete it altogether.)\n            this.history = [];\n\n            window.addEventListener('keydown', event => {\n                let entry = {\n                    at: new Date().getTime(),\n                    key: event.key,\n                    code: event.code,\n                    action: Input.KeyMapping[event.code] || Input.Action.STOP\n                };\n                Input.buffer.push(entry);\n                Input.history.push(entry);\n                console.log(entry);\n            });\n        },\n\n        update() {\n            let now = new Date().getTime();\n            this.history = this.history.filter(entry => entry.at > now - 3000);\n        },\n\n        lastKey() {\n            // A shortcut helper for code that cares about what KEY was pressed.\n            return this.buffer.length > 0 ? this.buffer[this.buffer.length - 1].key : '';\n        },\n\n        lastAction() {\n            // A shortcut helper for code that cares about what ACTION was taken.\n            return this.buffer.length > 0 ? this.buffer[this.buffer.length - 1].action : undefined;\n        },\n\n        consume(clearHistory) {\n            this.buffer = [];\n\n            // Normally, \"consuming\" all existing buffer input is something that happens\n            // somewhere in the game logic. If we just detected and acted on a cheat code,\n            // though, we want to clear the history too, otherwise we'll just keep behaving\n            // like the user is entering the cheat code every frame.\n            if (clearHistory) this.history = [];\n        }\n    };\n\n    /**\n     * `Text` is a singleton responsible for drawing text characters on the viewport. This\n     * game uses a custom pixel font, so we need to implement some basic text handling\n     * (splitting long lines, measuring character width, etc.) ourselves.\n     */\n\n    // In our character sheet, chars 0x00-0x7F are standard ASCII, below that we put whatever\n    // characters are convenient for us. Here we can choose to map unicode characters to positions\n    // 0x80+ in the charsheet, making it easy for us to render things like special characters,\n    // box drawing characters, etc.\n    //\n    // Note: I like pasting actual characters instead of codes (\"\" instead of \"\\u251C\"). If you\n    // do this, don't forget to explicitly tell the browser what charset your JS file is, or it\n    // won't execute -- see `index.html` for an example.\n    const SUPPORTED_UNICODE_CHARS = [\n        '',\n        '',\n        ''\n    ].join('');\n\n    const UNICODE_CHAR_MAP = SUPPORTED_UNICODE_CHARS.split('').reduce((map, char, idx) => {\n        map[char] = 0x80 + idx;\n        return map;\n    }, {});\n\n    /**\n     * Text\n     *\n     * Utilities for drawing text using in-game pixel font.\n     */\n    const Text = {\n        init() {\n            // The \"white\" font sheet, right from the sprite.\n            Text.white = { img: Sprite.font.img, scale: 1, border: 0, margin: 0 };\n\n            // Recolored versions of the original font sheet, to use when constructing our glow.\n            //\n            // The color here is #33FF00 which is roughly the glow of the Kaypro II.\n            Text.terminal = recolor(Text.white, rgba(51 + 16, 255, 0 + 16, 1));\n            Text.terminal_shadow = recolor(Text.white, rgba(51, 255, 0, 0.4));\n\n            // \"Glowing\" a bunch of characters on-screen is just too slow when you're doing 5\n            // draw calls for every individual character. To avoid that, we can build a new\n            // sprite sheet that is pre-scaled with the glow built in.\n            Text.glow = bakeFontGlow(Text.terminal, Text.terminal_shadow, SCREEN_SCALE, 2, 2);\n        },\n\n        drawText(ctx, text, u, v, font = Text.terminal) {\n            // The math gymnastics are a little hard to read (apologies). To render the\n            // font asked for correctly, we need to have the font sheet image, the scale,\n            // the border and the margin.\n            //\n            // The \"scale\" informs us what PRESCALING is applied to the font sheet, so\n            // we know how big to render it (we don't do additional scaling here).\n            //\n            // The \"border\" tells us how many PRE-SCALE pixels of border exist in this\n            // image. A border of 2 means a total of 2 pixels (so 1 on every side) were\n            // used. This is pre-scale, so if the scale is 4, that means there are 4 pixels\n            // of \"space\" around each character in the font sheet.\n            //\n            // The \"margin\" tells us how many POST-SCALE pixels of margin exist (in practice\n            // this means, how many pixels of glow surround the character). You want to subtract\n            // this margin when rendering the character so the character body is in the expected\n            // spot on screen.\n            let { img, scale, border, margin } = font;\n\n            if (Array.isArray(text)) {\n                for (let block of text) {\n                    Text.drawText(ctx, block.text, u + block.u * scale, v + block.v * scale, font);\n                }\n                return;\n            }\n\n            for (let idx = 0; idx < text.length; idx++) {\n                let c = UNICODE_CHAR_MAP[text[idx]] || text.charCodeAt(idx);\n                let k = (c - 0) * (CHAR_WIDTH + border);\n                let drawable = (c !== 32);\n\n                // We clear the canvas in every frame, and it's a HUGE speed advantage not to draw an\n                // empty image (this check can save 1000+ drawImage calls a frame).\n                if (drawable) {\n                    ctx.drawImage(\n                        img,\n                        (k * scale) % img.width,\n                        Math.floor((k * scale) / (img.width)) * (CHAR_HEIGHT + border) * scale,\n                        CHAR_WIDTH * scale,\n                        CHAR_HEIGHT * scale,\n                        u + margin,\n                        v + margin,\n                        CHAR_WIDTH * scale,\n                        CHAR_HEIGHT * scale\n                    );\n                }\n                u += CHAR_WIDTH * scale;\n            }\n        },\n\n        measureWidth(text, scale = 1) {\n            return text.split('').reduce((sum, c) => sum + CHAR_WIDTH, 0) * scale;\n        },\n\n        splitParagraph(text, w, h) {\n            let cu = 0, cv = 0;\n            let next = () => ({ text: '', u: cu, v: cv });\n            let wip = next();\n            let list = [];\n\n            for (let c of text.split('')) {\n                let cWidth = Text.measureWidth(c, 1);\n                if (c === '\\n' || cu + cWidth > w) {\n                    let saved = '';\n                    if (c !== '\\n' && c !== ' ') {\n                        let space = wip.text.split(' ');\n                        if (space.length > 1) {\n                            saved = space.pop();\n                            wip.text = space.join(' ');\n                        }\n                    }\n                    if (wip.text.length > 0) list.push(wip);\n                    cu = 0;\n                    cv += (CHAR_HEIGHT);\n                    wip = next();\n                    if (saved.length > 0) {\n                        wip.text = saved;\n                        cu += Text.measureWidth(wip.text, 1);\n                    }\n                } else {\n                    cu += cWidth;\n                }\n                if (c !== '\\n') {\n                    wip.text = wip.text + c;\n                }\n            }\n\n            if (wip.text.length > 0) list.push(wip);\n\n            return list.map(line => ({\n                ...line,\n                w: Text.measureWidth(line.text, 1),\n                h: CHAR_HEIGHT\n            }));\n        }\n    };\n\n    // Text utility functions, for manipulating the font sheet images\n\n    function recolor(font, color) {\n        let canvas = createCanvas(font.img.width, font.img.height);\n        canvas.ctx.fillStyle = color;\n        canvas.ctx.fillRect(0, 0, font.img.width, font.img.height);\n        canvas.ctx.globalCompositeOperation = 'destination-in';\n        canvas.ctx.drawImage(font.img, 0, 0);\n\n        // Return a new font with the same metadata, but a recolored image\n        return {\n            ...font,\n            img: canvas.canvas\n        };\n    }\n\n    function bakeFontGlow(font, glow, scale, border, margin) {\n        // This function is a little complicated because it has to do several things at once.\n        //\n        // The idea is:\n        //  - Take our original sheet of 8x16 characters\n        //  - Build a NEW sheet, with additional \"border\" around each character, so that there is\n        //    room for us to add a glow around each character without bleeding into our neighbors.\n        //  - We want the glow baked in at an upscaled pixel size.\n        //\n        // What is the upscaled pixel size? Here for example, we are scaling up from 8x16 pixels\n        // to 32x64 pixels for each characters. We then want the GLOW added around this new\n        // 32x64 character, not the original size (this allows us to have a glow more tight than\n        // the original chunky pixels we started with).\n        //\n        // A complication of HTML Canvas is that if you draw from a source canvas into a destination\n        // canvas at a higher scale, you will \"bleed\" neighboring pixels from the source canvas.\n        // To avoid this, we use a second temporary canvas and draw from the source into the temporary\n        // canvas with no upscaling, then we draw from the temporary canvas into the upscaled canvas.\n        //\n        // (This means double the draws, but we only do this step once when the game loads, so it's\n        // not a big deal.)\n        let cols = font.img.width / CHAR_WIDTH, rows = font.img.height / CHAR_HEIGHT;\n\n        let temp = createCanvas(CHAR_WIDTH, CHAR_HEIGHT);\n        let canvas = createCanvas(\n            cols * (CHAR_WIDTH + border) * scale,\n            rows * (CHAR_HEIGHT + border) * scale\n        );\n\n        for (let y = 0; y < rows; y++) {\n            for (let x = 0; x < cols; x++) {\n                // Glow (rendered on all 4 sides)\n                temp.ctx.clearRect(0, 0, CHAR_WIDTH, CHAR_HEIGHT);\n                temp.ctx.drawImage(\n                    glow.img,\n                    x * CHAR_WIDTH,\n                    y * CHAR_HEIGHT,\n                    CHAR_WIDTH,\n                    CHAR_HEIGHT,\n                    0, 0,\n                    CHAR_WIDTH,\n                    CHAR_HEIGHT\n                );\n                canvas.ctx.drawImage(\n                    temp.canvas,\n                    0, 0,\n                    CHAR_WIDTH,\n                    CHAR_HEIGHT,\n                    x * (CHAR_WIDTH + border) * scale + margin,\n                    y * (CHAR_HEIGHT + border) * scale,\n                    CHAR_WIDTH * scale,\n                    CHAR_HEIGHT * scale\n                );\n                canvas.ctx.drawImage(\n                    temp.canvas,\n                    0, 0,\n                    CHAR_WIDTH,\n                    CHAR_HEIGHT,\n                    x * (CHAR_WIDTH + border) * scale,\n                    y * (CHAR_HEIGHT + border) * scale + margin,\n                    CHAR_WIDTH * scale,\n                    CHAR_HEIGHT * scale\n                );\n                canvas.ctx.drawImage(\n                    temp.canvas,\n                    0, 0,\n                    CHAR_WIDTH,\n                    CHAR_HEIGHT,\n                    x * (CHAR_WIDTH + border) * scale + margin * 2,\n                    y * (CHAR_HEIGHT + border) * scale + margin,\n                    CHAR_WIDTH * scale,\n                    CHAR_HEIGHT * scale\n                );\n                canvas.ctx.drawImage(\n                    temp.canvas,\n                    0, 0,\n                    CHAR_WIDTH,\n                    CHAR_HEIGHT,\n                    x * (CHAR_WIDTH + border) * scale + margin,\n                    y * (CHAR_HEIGHT + border) * scale + margin * 2,\n                    CHAR_WIDTH * scale,\n                    CHAR_HEIGHT * scale\n                );\n\n                // Center character\n                temp.ctx.clearRect(0, 0, CHAR_WIDTH, CHAR_HEIGHT);\n                temp.ctx.drawImage(\n                    font.img,\n                    x * CHAR_WIDTH,\n                    y * CHAR_HEIGHT,\n                    CHAR_WIDTH,\n                    CHAR_HEIGHT,\n                    0, 0,\n                    CHAR_WIDTH,\n                    CHAR_HEIGHT\n                );\n                canvas.ctx.drawImage(\n                    temp.canvas,\n                    0, 0,\n                    CHAR_WIDTH,\n                    CHAR_HEIGHT,\n                    x * (CHAR_WIDTH + border) * scale + margin,\n                    y * (CHAR_HEIGHT + border) * scale + margin,\n                    CHAR_WIDTH * scale,\n                    CHAR_HEIGHT * scale\n                );\n            }\n        }\n\n        return { img: canvas.canvas, scale, border, margin };\n    }\n\n    // zzfx() - the universal entry point -- returns a AudioBufferSourceNode\n    const zzfx=(...t)=>zzfxP(zzfxG(...t));\n\n    // zzfxP() - the sound player -- returns a AudioBufferSourceNode\n    const zzfxP=(...t)=>{let e=zzfxX.createBufferSource(),f=zzfxX.createBuffer(t.length,t[0].length,zzfxR);t.map((d,i)=>f.getChannelData(i).set(d)),e.buffer=f,e.connect(zzfx.destination_),e.start();return e};\n\n    // zzfxG() - the sound generator -- returns an array of sample data\n    const zzfxG=(q=1,k=.05,c=220,e=0,t=0,u=.1,r=0,F=1,v=0,z=0,w=0,A=0,l=0,B=0,x=0,G=0,d=0,y=1,m=0,C=0)=>{let b=2*Math.PI,H=v*=500*b/zzfxR**2,I=(0<x?1:-1)*b/4,D=c*=(1+2*k*Math.random()-k)*b/zzfxR,Z=[],g=0,E=0,a=0,n=1,J=0,K=0,f=0,p,h;e=99+zzfxR*e;m*=zzfxR;t*=zzfxR;u*=zzfxR;d*=zzfxR;z*=500*b/zzfxR**3;x*=b/zzfxR;w*=b/zzfxR;A*=zzfxR;l=zzfxR*l|0;for(h=e+m+t+u+d|0;a<h;Z[a++]=f)++K%(100*G|0)||(f=r?1<r?2<r?3<r?Math.sin((g%b)**3):Math.max(Math.min(Math.tan(g),1),-1):1-(2*g/b%2+2)%2:1-4*Math.abs(Math.round(g/b)-g/b):Math.sin(g),f=(l?1-C+C*Math.sin(2*Math.PI*a/l):1)*(0<f?1:-1)*Math.abs(f)**F*q*zzfxV*(a<e?a/e:a<e+m?1-(a-e)/m*(1-y):a<e+m+t?y:a<h-d?(h-a-d)/u*y:0),f=d?f/2+(d>a?0:(a<h-d?1:(h-a)/d)*Z[a-d|0]/2):f),p=(c+=v+=z)*Math.sin(E*x-I),g+=p-p*B*(1-1E9*(Math.sin(a)+1)%2),E+=p-p*B*(1-1E9*(Math.sin(a)**2+1)%2),n&&++n>A&&(c+=w,D+=w,n=0),!l||++J%l||(c=D,v=H,n=n||1);return Z};\n\n    // zzfxV - global volume\n    const zzfxV=.3;\n\n    // zzfxR - global sample rate\n    const zzfxR=44100;\n\n    // zzfxX - the common audio context\n    const zzfxX=new(top.AudioContext||webkitAudioContext);\n\n    // destination for zzfx and zzfxm sounds\n    zzfx.destination_ = zzfxX.destination;\n\n    /**\n     * ZzFX Music Renderer v2.0.2 by Keith Clark\n     */\n\n    /**\n     * @typedef Channel\n     * @type {Array.<Number>}\n     * @property {Number} 0 - Channel instrument\n     * @property {Number} 1 - Channel panning (-1 to +1)\n     * @property {Number} 2 - Note\n     */\n\n    /**\n     * @typedef Pattern\n     * @type {Array.<Channel>}\n     */\n\n    /**\n     * @typedef Instrument\n     * @type {Array.<Number>} ZzFX sound parameters\n     */\n\n    /**\n     * Generate a song\n     *\n     * @param {Array.<Instrument>} instruments - Array of ZzFX sound paramaters.\n     * @param {Array.<Pattern>} patterns - Array of pattern data.\n     * @param {Array.<Number>} sequence - Array of pattern indexes.\n     * @param {Number} [speed=125] - Playback speed of the song (in BPM).\n     * @returns {Array.<Array.<Number>>} Left and right channel sample data.\n     */\n\n    const zzfxM = (instruments, patterns, sequence, BPM = 125) => {\n        let instrumentParameters,\n            i,\n            j,\n            k,\n            note,\n            sample,\n            patternChannel,\n            notFirstBeat,\n            stop,\n            instrument,\n            pitch,\n            attenuation,\n            outSampleOffset,\n            sampleOffset,\n            nextSampleOffset,\n            sampleBuffer = [],\n            leftChannelBuffer = [],\n            rightChannelBuffer = [],\n            channelIndex = 0,\n            panning,\n            hasMore = 1,\n            sampleCache = {},\n            beatLength = ((zzfxR / BPM) * 60) >> 2;\n\n        // for each channel in order until there are no more\n        for (; hasMore; channelIndex++) {\n            // reset current values\n            sampleBuffer = [(hasMore = notFirstBeat = pitch = outSampleOffset = 0)];\n\n            // for each pattern in sequence\n            sequence.map((patternIndex, sequenceIndex) => {\n                // get pattern for current channel, use empty 1 note pattern if none found\n                patternChannel = patterns[patternIndex][channelIndex] || [0, 0, 0];\n\n                // check if there are more channels\n                hasMore |= !!patterns[patternIndex][channelIndex];\n\n                // get next offset, use the length of first channel\n                nextSampleOffset =\n                    outSampleOffset +\n                    (patterns[patternIndex][0].length - 2 - !notFirstBeat) *\n                        beatLength;\n\n                // for each beat in pattern, plus one extra if end of sequence\n                for (\n                    i = 2, k = outSampleOffset;\n                    i <\n                    patternChannel.length + (sequenceIndex == sequence.length - 1);\n                    notFirstBeat = ++i\n                ) {\n                    // <channel-note>\n                    note = patternChannel[i];\n\n                    // stop if different instrument or new note\n                    stop = (instrument != (patternChannel[0] || 0)) | note | 0;\n\n                    // fill buffer with samples for previous beat, most cpu intensive part\n                    for (\n                        j = 0;\n                        j < beatLength && notFirstBeat;\n                        // fade off attenuation at end of beat if stopping note, prevents clicking\n                        j++ > beatLength - 99 && stop\n                            ? (attenuation += (attenuation < 1) / 99)\n                            : 0\n                    ) {\n                        // copy sample to stereo buffers with panning\n                        sample =\n                            ((1 - attenuation) * sampleBuffer[sampleOffset++]) /\n                                2 || 0;\n                        leftChannelBuffer[k] =\n                            (leftChannelBuffer[k] || 0) + sample * panning - sample;\n                        rightChannelBuffer[k] =\n                            (rightChannelBuffer[k++] || 0) +\n                            sample * panning +\n                            sample;\n                    }\n\n                    // set up for next note\n                    if (note) {\n                        // set attenuation\n                        attenuation = note % 1;\n                        panning = patternChannel[1] || 0;\n                        if ((note |= 0)) {\n                            // get cached sample\n                            sampleBuffer = sampleCache[\n                                [\n                                    (instrument =\n                                        patternChannel[(sampleOffset = 0)] || 0),\n                                    note\n                                ]\n                            ] =\n                                sampleCache[[instrument, note]] ||\n                                // add sample to cache\n                                ((instrumentParameters = [\n                                    ...instruments[instrument]\n                                ]),\n                                (instrumentParameters[2] *=\n                                    2 ** ((note - 12) / 12)),\n                                zzfxG(...instrumentParameters));\n                        }\n                    }\n                }\n\n                // update the sample offset\n                outSampleOffset = nextSampleOffset;\n            });\n        }\n\n        return [leftChannelBuffer, rightChannelBuffer];\n    };\n\n    const ObliqueMystique = [[[1.3,0,23,,,.2,3,5],[1.5,0,4e3,,,.03,2,1.25,,,,,.02,6.8,-.3,,.5],[.7,0,2100,,,.2,3,3,,,-400,,,2],[,0,655,,,.11,2,1.65,,,,,,3.8,-.1,.1]],[[[,-.5,13,,,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,14,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,14,,,,],[1,.3,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,],[2,1,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,],[,.6,,,,,13,,18,,19,,,,,,,,19,,18,,,,16,,,,13,,,,,,,,,,13,,18,,19,,,,,,,,18,19,18,,,,13,14,13,,16,,18,,19,,],[3,-1,,,13,,,,,,,,,,,,13,,,,,,,,,,,,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,,,13,13,13,13]],[[,-.5,13,,,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,14,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,14,,,,],[1,.3,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,],[2,1,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,]]],[1,1,0,0,0,0,1,0],,];\n\n    const Audio = {\n        init() {\n            Audio.readyToPlay = false;\n\n            Audio.ctx = zzfxX;\n            Audio.gain_ = Audio.ctx.createGain();\n            Audio.gain_.connect(Audio.ctx.destination);\n            zzfx.destination_ = Audio.gain_;\n\n            Audio.shotgun = [,0.01,140,0.01,0.02,0.45,4,2.42,0.1,-0.1,,,,1.2,,0.3,0.04,0.8,0.02];\n            Audio.page = [,,1233,,.01,.2,1,1.43,,,539,.1,,,,,,.51,.03,.01];\n            Audio.shellReload = [,,68,0.01,,0.14,1,1.53,7.5,0.1,50,0.02,-0.01,-0.2,0.1,0.2,,0.47,0.01];\n            Audio.damage = [,,391,,.19,.01,2,.54,-4,20,,,,,,,.02,.9];\n            Audio.alarm = [,,970,.12,.25,.35,,.39,8.1,,10,.1,.2,,.1,,,.6,.09,.13];\n            // [,,961,.05,.06,1.17,1,4.67,.8,,,,,.8,-0.8,.1,.49,.62,.09];\n            Audio.victory = [,,454,.06,.86,.71,2,.63,-0.7,1.7,-83,.09,.27,.3,.2,,.18,.95,.02,.02];\n            Audio.song = zzfxM(...ObliqueMystique);\n\n            // Save our background music in os13k, for fun!\n            //localStorage[`OS13kMusic,${TITLE} - Oblique Mystique`] = JSON.stringify(ObliqueMystique);\n        },\n\n        update() {\n            if (!Audio.readyToPlay) return;\n\n            if (!Audio.musicPlaying) {\n                //Audio.bgmusicnode = zzfxP(...Audio.song);\n                //Audio.bgmusicnode.loop = true;\n                Audio.musicPlaying = true;\n            }\n        },\n\n        play(sound) {\n            if (!Audio.readyToPlay) return;\n            zzfx(...sound);\n        },\n\n        // It's important we do pausing and unpausing as specific events and not in general update(),\n        // because update() is triggered by the animation frame trigger which does not run if the\n        // page is not visible. (So, if you want the music to fade in the background, for example,\n        // that's not helpful if it won't work because you aren't looking at the page!)\n\n        pause() {\n            Audio.gain_.gain.linearRampToValueAtTime(0, Audio.ctx.currentTime + 1);\n        },\n\n        unpause() {\n            Audio.gain_.gain.linearRampToValueAtTime(1, Audio.ctx.currentTime + 1);\n        }\n    };\n\n    /**\n     * `Screen` is a singleton that represents the virtual 80x25 character screen our game\n     * lives in. Components like PlayingField will \"draw\" (write text onto) this virtual\n     * screen each frame. Once all the text is written, the text will end up rendered on\n     * the viewport (canvas) in the browser.\n     */\n\n    const Screen = {\n        init() {\n            this.screen = [];\n            for (let y = 0; y < SCREEN_HEIGHT; y++) {\n                this.screen.push([]);\n            }\n            this.clear();\n        },\n\n        clear() {\n            for (let y = 0; y < SCREEN_HEIGHT; y++) {\n                for (let x = 0; x < SCREEN_WIDTH; x++) {\n                    this.screen[y][x] = ' ';\n                }\n            }\n        },\n\n        write(x, y, text) {\n            if (!Array.isArray(text)) text = [text];\n\n            for (let j = 0; j < text.length; j++) {\n                for (let i = 0; i < text[j].length; i++) {\n                    this.screen[y + j][x + i] = text[j][i];\n                }\n            }\n        },\n\n        draw(ctx) {\n            let text = this.screen.map(row => row.join('')).join('\\n');\n\n            Text.drawText(\n                ctx,\n                Text.splitParagraph(text, Viewport.width),\n                0, 0,\n                Text.glow\n            );\n        }\n    };\n\n    var GameVersion = \"0.3.0\";\n\n    /**\n     * `MainMenu` is a class that represents a screen the user can view. Instances of\n     * MainMenu are constructed whenever we want the user to go to the main menu, and\n     * thrown away when we're done.\n     */\n\n    class MainMenu {\n        update() {\n            switch (Input.lastKey().toUpperCase()) {\n                case 'P':\n                    Input.consume();\n                    Game.startSession();\n                    break;\n                case 'L':\n                    Input.consume();\n                    Game.playSpeed = (Game.playSpeed + 1) % PLAY_SPEEDS.length;\n                    break;\n                case 'I':\n                    Input.consume();\n                    Game.showInstructions();\n                    break;\n                case 'E':\n                    Input.consume();\n                    Game.showInstructions();\n                    break;\n            }\n        }\n\n        draw() {\n            let terminal = 'Quiche MkII';\n\n            let highScores = [\n                `1) 6000  Bob`,\n                `2) 6000  Tom`,\n                `3) 4000  Wayne`,\n                ``,\n                ``\n            ];\n\n            Screen.clear();\n            Screen.write(0, 0, [\n                `               LL                     dd       dd`,\n                `               LL                     dd       dd                      tm`,\n                `               LL         aaaa     ddddd    ddddd    eeee   rrrrrrr`,\n                `               LL        aa  aa   dd  dd   dd  dd   ee  ee  rr    rr`,\n                `               LL        aa  aa   dd  dd   dd  dd   eeeeee  rr`,\n                `               LL        aa  aa   dd  dd   dd  dd   ee      rr`,\n                `               LLLLLLLL   aaa aa   ddd dd   ddd dd   eeee   rr`,\n                ``,\n                `                                       Version:    ${GameVersion}`,\n                `(c) 1982, 1983 Yahoo Software          Terminal:   ${terminal}`,\n                `10970 Ashton Ave.  Suite 312           Play speed: ${Game.playSpeed + 1} / ${PLAY_SPEEDS.length}`,\n                `Los Angeles, Ca  90024                 Move = /WASD, Jump = Space,`,\n                `                                       Stop = Other`,\n                ``,\n                `P = Play game                          High Scores`,\n                `L = Change level of difficulty         ${highScores[0]}`,\n                `C = Configure Ladder                   ${highScores[1]}`,\n                `I = Instructions                       ${highScores[2]}`,\n                `E = Exit Ladder                        ${highScores[3]}`,\n                `                                       ${highScores[4]}`,\n                ``,\n                `Enter one of the above:`\n            ]);\n        }\n    }\n\n    class InstructionsMenu {\n        constructor() {\n        }\n\n        update() {\n            if (Input.lastKey().toUpperCase() !== '') {\n                Input.consume();\n                Game.showMainMenu();\n            }\n        }\n\n        draw() {\n            Screen.clear();\n            Screen.write(0, 0, [\n                `You are a Lad trapped in a maze.  Your mission is is to explore the`,\n                `dark corridors never before seen by human eyes and find hidden`,\n                `treasures and riches.`,\n                ``,\n                `You control Lad by typing the direction buttons and jumping by`,\n                `typing SPACE.  But beware of the falling rocks called Der rocks.`,\n                `You must find and grasp the treasures (shown as $) BEFORE the`,\n                `bonus time runs out.`,\n                ``,\n                `A new Lad will be awarded for every 10,000 points.`,\n                `Extra points are awarded for touching the gold`,\n                `statues (shown as &).  You will receive the bonus time points`,\n                `that are left when you have finished the level.`,\n                ``,\n                `Type an ESCape to pause the Game`,\n                ``,\n                `Remember, there is more than one way to skin a cat. (Chum)`,\n                ``,\n                `Good luck Lad.`,\n                ``,\n                ``,\n                ``,\n                `Type RETURN to return to main menu:`\n            ]);\n        }\n    }\n\n    /**\n     * A collection of states and functions related to entities.\n     */\n\n    // A list of states usable by entities. Some states only apply to players (rocks can't jump).\n    //\n    // Many of these are actually DIRECTIONS, but since this game has \"pac man movement\", a\n    // direction is a state -- the player will keep moving in the tapped direction until the player\n    // enters a new input.\n    const State = {\n        STOPPED:    1,         // Standing still\n        UP:         2,         // Moving up (player only)\n        LEFT:       3,         // Moving left\n        DOWN:       4,         // Moving down\n        RIGHT:      5,         // Moving right\n        FALLING:    6,         // Falling\n        START_JUMP: 7,         // About to start a jump (player only)\n        JUMP_LEFT:  8,         // Jumping left (player only)\n        JUMP_RIGHT: 9,         // Jumping right (player only)\n        JUMP_UP:    10,        // Jumping straight up (player only)\n        DYING:      11,        // Dying (used as a death animation)\n        DEAD:       12         // Dead (for player, restart level; for rock, disappear)\n    };\n\n    // This constant controls the \"shape\" of the left, right, and straight-up jumps by\n    // the player. Note that the straight-up jump gets 1 frame less of airtime than\n    // the left and right jumps.\n    const JUMP_FRAMES = {\n        [State.JUMP_RIGHT]: [\n            { x: 1, y: -1 },\n            { x: 1, y: -1 },\n            { x: 1, y: 0 },\n            { x: 1, y: 0 },\n            { x: 1, y: 1 },\n            { x: 1, y: 1 }\n        ],\n        [State.JUMP_LEFT]: [\n            { x: -1, y: -1 },\n            { x: -1, y: -1 },\n            { x: -1, y: 0 },\n            { x: -1, y: 0 },\n            { x: -1, y: 1 },\n            { x: -1, y: 1 }\n        ],\n        [State.JUMP_UP]: [\n            { x: 0, y: -1 },\n            { x: 0, y: -1 },\n            { x: 0, y: 0 },\n            { x: 0, y: 1 },\n            { x: 0, y: 1 },\n            { x: 0, y: 0 }\n        ]\n    };\n\n    function applyEntityMovement(entity, field) {\n        let repeat = false;\n\n        // This method contains generic \"movement\" application for all entities, including\n        // Lad (player) and Der Rocks (enemies). Things like falling, moving left/right, etc.,\n        // work the same for both.\n        //\n        // (There's a bunch of jump logic in here too, and moving UP, which really only applies\n        // to players, but that's OK -- Der Rocks just won't attempt those actions.)\n\n        if (entity.nextState) {\n            switch (entity.state) {\n                case State.STOPPED:\n                case State.LEFT:\n                case State.RIGHT:\n                    if ([State.LEFT, State.RIGHT, State.STOPPED].includes(entity.nextState)) {\n                        entity.state = entity.nextState;\n                        entity.nextState = undefined;\n                    }\n                    break;\n\n                case State.UP:\n                case State.DOWN:\n                    // Normal\n                    if ([State.LEFT, State.RIGHT].includes(entity.nextState)) {\n                        entity.state = entity.nextState;\n                        entity.nextState = undefined;\n                    }\n                    break;\n\n                case State.JUMP_LEFT:\n                case State.JUMP_RIGHT:\n                case State.JUMP_UP:\n                    if (entity.nextState === State.RIGHT && entity.state != State.JUMP_RIGHT) {\n                        entity.state = State.JUMP_RIGHT;\n                        entity.nextState = State.RIGHT;\n                    }\n                    if (entity.nextState === State.LEFT && entity.state != State.JUMP_LEFT) {\n                        entity.state = State.JUMP_LEFT;\n                        entity.nextState = State.LEFT;\n                    }\n                    if (entity.nextState === State.DOWN) {\n                        entity.state = State.FALLING;\n                        entity.nextState = undefined;\n                    }\n                    if (entity.nextState === State.UP) ;\n                    break;\n            }\n        }\n\n        if (entity.nextState === State.START_JUMP) {\n            // Special case: the user wants to jump!\n            //\n            // If the player is standing on something solid, we initiate a jump based on the current\n            // movement of the player.\n            if (field.onSolid(entity.x, entity.y)) {\n                if (entity.state === State.STOPPED || entity.state === State.FALLING) {\n                    entity.state = State.JUMP_UP;\n                    entity.jumpStep = 0;\n                    entity.nextState = State.STOPPED;\n                } else if (entity.state === State.LEFT || entity.state === State.JUMP_LEFT) {\n                    entity.state = State.JUMP_LEFT;\n                    entity.jumpStep = 0;\n                    entity.nextState = State.LEFT;\n                } else if (entity.state === State.RIGHT || entity.state === State.JUMP_RIGHT) {\n                    entity.state = State.JUMP_RIGHT;\n                    entity.jumpStep = 0;\n                    entity.nextState = State.RIGHT;\n                }\n            }\n        } else if (entity.nextState === State.UP && field.isLadder(entity.x, entity.y)) {\n            // Special case: the user wants to go up!\n            //\n            // If the user is on a ladder, we can start ascending. Note that if the user is not\n            // on a ladder we ignore their input, which is intentional -- this allows queued\n            // (pacman) input, where we can tap UP a little before reaching the ladder.\n            entity.state = State.UP;\n            entity.nextState = undefined;\n        } else if (entity.nextState === State.DOWN && (field.isLadder(entity.x, entity.y) || field.isLadder(entity.x, entity.y + 1))) {\n            // Special case: the player wants to go down!\n            //\n            // If the player is on (or above) a ladder, we can start descending. Note that if the player is not\n            // on a ladder we ignore their input, which is intentional -- this allows queued\n            // (pacman) input, where we can tap DOWN a little before reaching the ladder.\n            entity.state = State.DOWN;\n            entity.nextState = undefined;\n        }\n\n        switch (entity.state) {\n            case State.LEFT:\n                if (!field.onSolid(entity.x, entity.y)) {\n                    entity.nextState = State.LEFT;\n                    entity.state = State.FALLING;\n                    repeat = true;\n                    break;\n                }\n                if (field.emptySpace(entity.x - 1, entity.y)) {\n                    entity.x--;\n                } else {\n                    entity.nextState = State.STOPPED;\n                }\n                break;\n\n            case State.RIGHT:\n                if (!field.onSolid(entity.x, entity.y)) {\n                    entity.nextState = State.RIGHT;\n                    entity.state = State.FALLING;\n                    repeat = true;\n                    break;\n                }\n                if (field.emptySpace(entity.x + 1, entity.y)) {\n                    entity.x++;\n                } else {\n                    entity.nextState = State.STOPPED;\n                }\n                break;\n\n            case State.UP:\n                if (field.canClimbUp(entity.x, entity.y - 1)) {\n                    entity.y--;\n                } else {\n                    entity.state = State.STOPPED;\n                }\n                break;\n\n            case State.DOWN:\n                if (field.canClimbDown(entity.x, entity.y + 1)) {\n                    entity.y++;\n                } else {\n                    entity.state = State.STOPPED;\n                }\n                break;\n\n            case State.JUMP_RIGHT:\n            case State.JUMP_LEFT:\n            case State.JUMP_UP:\n                let step = JUMP_FRAMES[entity.state][entity.jumpStep];\n                if ((entity.x + step.x >= 0) && (entity.x + step.x < LEVEL_COLS)) {\n                    let terrain = field.layout[entity.y + step.y][entity.x + step.x];\n                    if (['=', '|', '-'].includes(terrain)) {\n                        if (field.onSolid(entity.x, entity.y)) {\n                            entity.state = entity.nextState;\n                            entity.nextState = undefined;\n                        } else {\n                            switch (entity.state) {\n                                case State.JUMP_RIGHT:\n                                    entity.nextState = State.RIGHT;\n                                    break;\n                                case State.JUMP_LEFT:\n                                    entity.nextState = State.LEFT;\n                                    break;\n                                case State.JUMP_UP:\n                                    entity.nextState = State.UP;\n                                    break;\n                            }\n                            entity.state = State.FALLING;\n                        }\n                    } else if (terrain === 'H') {\n                        entity.x += step.x;\n                        entity.y += step.y;\n\n                        if (entity.nextState === State.UP) {\n                            entity.state = State.UP;\n                        } else {\n                            entity.state = State.STOPPED;\n                        }\n                        entity.nextState = undefined;\n                    } else {\n                        entity.x += step.x;\n                        entity.y += step.y;\n                        entity.jumpStep++;\n\n                        if (entity.jumpStep >= JUMP_FRAMES[entity.state].length) {\n                            switch (entity.state) {\n                                case State.JUMP_RIGHT:\n                                    entity.state = State.RIGHT;\n                                    break;\n                                case State.JUMP_LEFT:\n                                    entity.state = State.LEFT;\n                                    break;\n                                case State.JUMP_UP:\n                                    entity.state = State.UP;\n                                    break;\n                            }\n                        }\n                    }\n                } else {\n                    if (field.onSolid(entity.x, entity.y)) {\n                        entity.state = entity.nextState;\n                        entity.nextState = undefined;\n                    } else {\n                        entity.state = State.FALLING;\n                        entity.nextState = State.STOPPED;\n                    }\n                }\n                break;\n\n            case State.FALLING:\n                if (field.onSolid(entity.x, entity.y)) {\n                    entity.state = entity.nextState || State.STOPPED;\n                } else {\n                    entity.y++;\n                }\n                break;\n        }\n\n        // If we were attempting to move somewhere and realized we should be falling instead,\n        // we want to re-run the entire algorithm once. This avoids what boils down to a \"skipped\n        // frame\" from the user's point of view.\n        if (repeat) return applyEntityMovement(entity, field);\n    }\n\n    const DEATH_FRAMES = ['p', 'p', 'b', 'd', 'd', 'q', 'p', 'p', 'b', 'd', 'd', 'q', '-', '-', '_', '_', '_', '_', '_'];\n\n    /**\n     * Player\n     */\n    class Player {\n        constructor(x, y) {\n            this.x = x;\n            this.y = y;\n            this.state = State.STOPPED;\n            this.nextState = State.STOPPED;\n            this.queued = [];\n            this.jumpStep = 0;\n            this.deathStep = 0;\n        }\n\n        update(field, moveFrame) {\n            if (this.state === State.DYING) {\n                this.deathStep++;\n                if (this.deathStep >= DEATH_FRAMES.length) this.state = State.DEAD;\n            }\n\n            if (this.state === State.DYING || this.state === State.DEAD) return;\n\n            if (!moveFrame) return;\n\n            let action = Input.lastAction();\n\n            if (action === Input.Action.LEFT) {\n                this.nextState = State.LEFT;\n                Input.consume();\n            } else if (action === Input.Action.RIGHT) {\n                this.nextState = State.RIGHT;\n                Input.consume();\n            } else if (action === Input.Action.UP) {\n                this.nextState = State.UP;\n                Input.consume();\n            } else if (action === Input.Action.DOWN) {\n                this.nextState = State.DOWN;\n                Input.consume();\n            } else if (action === Input.Action.JUMP) {\n                this.nextState = State.START_JUMP;\n                Input.consume();\n            }\n\n            return applyEntityMovement(this, field);\n        }\n\n        draw() {\n            let char = 'g';\n\n            switch (this.state) {\n                case State.RIGHT:\n                case State.JUMP_RIGHT:\n                case State.UP:\n                case State.DOWN:\n                    char = 'p';\n                    break;\n\n                case State.LEFT:\n                case State.JUMP_LEFT:\n                    char = 'q';\n                    break;\n\n                case State.FALLING:\n                    char = 'b';\n                    break;\n\n                case State.DYING:\n                    char = DEATH_FRAMES[this.deathStep];\n                    break;\n\n                case State.DEAD:\n                    char = '_';\n                    break;\n            }\n\n            Screen.write(this.x, this.y, char);\n        }\n\n        kill() {\n            // Just a convenience method for killing the player.\n            //\n            // Note that \"killing\" the player just puts it in a dying state, we'll play\n            // a little death animation as rocks move about before the player actually dies,\n            // at which point they will lose a life and the level starts over.\n            if (this.state != State.DYING && this.state != State.DEAD) {\n                this.state = State.DYING;\n            }\n        }\n    }\n\n    /**\n     * `Rock` is a class representing the Der rocks, which fall through the level\n     * and kill the player if touched.\n     */\n\n    const DEATH_FRAMES$1 = ['{', '}', '(', ')', '%', '%', ':', ':'];\n\n    class Rock {\n        constructor(dispenser) {\n            this.x = dispenser.x;\n            this.y = dispenser.y;\n            this.state = State.FALLING;\n            this.nextState = undefined;\n            this.deathStep = 0;\n        }\n\n        update(field, moveFrame) {\n            if (this.state === State.DYING) {\n                this.deathStep++;\n                if (this.deathStep >= DEATH_FRAMES$1.length) this.state = State.DEAD;\n            }\n\n            if (this.state === State.DYING || this.state === State.DEAD) return;\n\n            if (!moveFrame) return;\n\n            if (this.state === State.STOPPED) {\n                if (this.x === 0 || !field.emptySpace(this.x - 1, this.y)) {\n                    this.nextState = State.RIGHT;\n                } else if (this.x === LEVEL_COLS - 1 || !field.emptySpace(this.x + 1, this.y)) {\n                    this.nextState = State.LEFT;\n                } else {\n                    this.nextState = Math.random() > 0.5 ? State.LEFT : State.RIGHT;\n                }\n            }\n\n            if (this.x === 0 && this.state === State.LEFT) {\n                this.state = State.RIGHT;\n            }\n\n            if (this.x === LEVEL_COLS - 1 && this.state === State.RIGHT) {\n                this.state = State.LEFT;\n            }\n\n            if (this.state !== State.FALLING && !field.onSolid(this.x, this.y)) {\n                this.nextState = State.FALLING;\n            }\n\n            if (field.isLadder(this.x, this.y + 1) && [State.LEFT, State.RIGHT].includes(this.state)) {\n                let r = Math.floor(Math.random() * 4);\n                this.nextState = [State.LEFT, State.RIGHT, State.DOWN, State.DOWN][r];\n            }\n\n            if (field.isEater(this.x, this.y)) {\n                this.state = State.DYING;\n                return;\n            }\n\n            return applyEntityMovement(this, field);\n        }\n\n        draw() {\n            let char = 'o';\n\n            switch (this.state) {\n                case State.DYING:\n                    char = DEATH_FRAMES$1[this.deathStep];\n                    break;\n                case State.DEAD:\n                    return;\n            }\n\n            Screen.write(this.x, this.y, char);\n        }\n    }\n\n    var LevelData = [\n    \t{\n    \t\tname: \"Easy Street\",\n    \t\tlayout: [\n    \t\t\t\"                                       V                 $                     \",\n    \t\t\t\"                                                         H                     \",\n    \t\t\t\"                H                                        H                     \",\n    \t\t\t\"       =========H==================================================            \",\n    \t\t\t\"                H                                                              \",\n    \t\t\t\"                H                                                              \",\n    \t\t\t\"                H          H                             H                     \",\n    \t\t\t\"================H==========H==================   ========H=====================\",\n    \t\t\t\"                &          H                             H          |       |  \",\n    \t\t\t\"                                                         H         Easy Street \",\n    \t\t\t\"                H                                        H                     \",\n    \t\t\t\"       =========H==========H=========  =======================                 \",\n    \t\t\t\"                H                                                              \",\n    \t\t\t\"                H                                                              \",\n    \t\t\t\"                H                                        H                     \",\n    \t\t\t\"======================== ====================== =========H==============       \",\n    \t\t\t\"                                                         H                     \",\n    \t\t\t\"                                                         H                     \",\n    \t\t\t\"*    p                                                   H                    *\",\n    \t\t\t\"===============================================================================\"\n    \t\t]\n    \t},\n    \t{\n    \t\tname: \"Long Island\",\n    \t\tlayout: [\n    \t\t\t\"                                                                          $    \",\n    \t\t\t\"                                                                   &      H    \",\n    \t\t\t\"    H       |V                                                     V|     H    \",\n    \t\t\t\"====H======================= ========================= ======================  \",\n    \t\t\t\"    H                                                                          \",\n    \t\t\t\"    H                                                                          \",\n    \t\t\t\"    H                    & |                         . .                  H    \",\n    \t\t\t\"========================== ======  =================== ===================H==  \",\n    \t\t\t\"                                                                          H    \",\n    \t\t\t\"                                  |                                       H    \",\n    \t\t\t\"    H                             |                 .  .                  H    \",\n    \t\t\t\"====H=====================   ======  ================  ======================  \",\n    \t\t\t\"    H                                                                          \",\n    \t\t\t\"    H                      |                                                   \",\n    \t\t\t\"    H                      |                        .   .                 H    \",\n    \t\t\t\"=========================  ========    ==============   ==================H==  \",\n    \t\t\t\"                                                                          H    \",\n    \t\t\t\"==============                      |                                     H    \",\n    \t\t\t\" Long Island |   p         *        |                 *                   H    \",\n    \t\t\t\"===============================================================================\"\n    \t\t]\n    \t},\n    \t{\n    \t\tname: \"Ghost Town\",\n    \t\tlayout: [\n    \t\t\t\"                            V               V           V               $      \",\n    \t\t\t\"                                                                       $$$     \",\n    \t\t\t\"     p    H                                                    H      $$$$$   H\",\n    \t\t\t\"==========H===                                                =H==============H\",\n    \t\t\t\"          H                                                    H              H\",\n    \t\t\t\"          H                              &                     H              H\",\n    \t\t\t\"     ==============   ====     =    ======    =   ====    =====H=====         H\",\n    \t\t\t\"    G              ^^^    ^^^^^ ^^^^      ^^^^ ^^^    ^^^                     $\",\n    \t\t\t\"    h                                                                 |        \",\n    \t\t\t\"    o     |                     H                             &       |        \",\n    \t\t\t\"    s     ======================H============================== ===========    \",\n    \t\t\t\"    t        &                  H                                              \",\n    \t\t\t\"                                H                                              \",\n    \t\t\t\"              |                 H                 H                   H        \",\n    \t\t\t\"    T         ==================H=================H===================H======= \",\n    \t\t\t\"    o                                             H                   H        \",\n    \t\t\t\"    w                                                                 H        \",\n    \t\t\t\"    n                           ^                                     H        \",\n    \t\t\t\"*                              ^^^                                    H       *\",\n    \t\t\t\"===============================================================================\"\n    \t\t]\n    \t},\n    \t{\n    \t\tname: \"Tunnel Vision\",\n    \t\tlayout: [\n    \t\t\t\"                                            V                       V          \",\n    \t\t\t\"                                                                               \",\n    \t\t\t\"     H             H                         |                H                \",\n    \t\t\t\"=====H=====--======H==========================     ===----====H===========     \",\n    \t\t\t\"     H             H                |&&                       H                \",\n    \t\t\t\"     H             H                ==================        H                \",\n    \t\t\t\"     H             H                       tunnel  H          H                \",\n    \t\t\t\"     H           =======---===----=================H=         H           H    \",\n    \t\t\t\"     H         |                           vision  H          H           H    \",\n    \t\t\t\"     H         =========---&      -----============H          H           H    \",\n    \t\t\t\"     H           H                                 H |        H           H    \",\n    \t\t\t\"     H           H=========----===----================        H  ==============\",\n    \t\t\t\"                 H                                        &   H                \",\n    \t\t\t\"                 H                                        |   H                \",\n    \t\t\t\"====---====      H                                        |   H                \",\n    \t\t\t\"|         |    ================---===---===================   H                \",\n    \t\t\t\"|   ===   |                                                   H        H    p  \",\n    \t\t\t\"|    $    |                                                   H     ===H=======\",\n    \t\t\t\"|*  $$$  *|   *                *       *                     *H       *H       \",\n    \t\t\t\"===============================================================================\"\n    \t\t]\n    \t},\n    \t{\n    \t\tname: \"Point of No Return\",\n    \t\ttime: 35,\n    \t\tmaxRocks: 7,\n    \t\tlayout: [\n    \t\t\t\"         $                                                                     \",\n    \t\t\t\"         H                                                   V                 \",\n    \t\t\t\"         H                                                                     \",\n    \t\t\t\"         HHHHHHHHHHHHH     .HHHHHHHHHHHHHH                          H    p     \",\n    \t\t\t\"         &                   V           H                        ==H==========\",\n    \t\t\t\"                                         H                          H          \",\n    \t\t\t\"   H                                     H        .                 H          \",\n    \t\t\t\"===H==============-----------============H====                      H          \",\n    \t\t\t\"   H                                                      H         H          \",\n    \t\t\t\"   H                                                 =====H==============      \",\n    \t\t\t\"   H                                     H                H                    \",\n    \t\t\t\"   H              &..^^^.....^..^ . ^^   H==---------     H                    \",\n    \t\t\t\"   H         ============================H    &           H             H      \",\n    \t\t\t\"   H         ===      ===      ===       H    ---------=================H======\",\n    \t\t\t\"   H                                     H                              H      \",\n    \t\t\t\"   H                          &          H          &                   H      \",\n    \t\t\t\"   ==========-------------------------=======----------===================     \",\n    \t\t\t\"                                                                               \",\n    \t\t\t\"^^^*         ^^^^^^^^^^^^^^^^^^^^^^^^^*     *^^^^^^^^^^*Point of No Return*^^^^\",\n    \t\t\t\"===============================================================================\"\n    \t\t]\n    \t},\n    \t{\n    \t\tname: \"Bug City\",\n    \t\tlayout: [\n    \t\t\t\"        Bug City             HHHHHHHH                          V               \",\n    \t\t\t\"                           HHH      HHH                                        \",\n    \t\t\t\"   H                                          >mmmmmmmm                        \",\n    \t\t\t\"   H===============                   ====================          H          \",\n    \t\t\t\"   H              |=====       \\\\  /         V                  =====H==========\",\n    \t\t\t\"   H                            \\\\/                                  H          \",\n    \t\t\t\"   H                                        | $                     H          \",\n    \t\t\t\"   H           H                            | H                     H          \",\n    \t\t\t\"   H       ====H=======          p          |&H    H                H          \",\n    \t\t\t\"   H           H             ======================H           ======          \",\n    \t\t\t\"   H           H      &|                           H                    H      \",\n    \t\t\t\"   H           H      &|                    H      H     }{        =====H====  \",\n    \t\t\t\"===H===&       H       =====================H      H                    H      \",\n    \t\t\t\"               H                            H      H                    H      \",\n    \t\t\t\"               H                            H      &                    H      \",\n    \t\t\t\"         ======H===   =======    H    <>    &                           H      \",\n    \t\t\t\"                                 H==========       =====     =     ============\",\n    \t\t\t\"     }i{                         H                                             \",\n    \t\t\t\"*                                H                                            *\",\n    \t\t\t\"===============================================================================\"\n    \t\t]\n    \t},\n    \t{\n    \t\tname: \"GangLand\",\n    \t\tlayout: [\n    \t\t\t\"                    =Gang Land=                             V                  \",\n    \t\t\t\"                   ==      _  ==                                      .        \",\n    \t\t\t\"      p    H        |  [] |_| |                  &                    .  H     \",\n    \t\t\t\"===========H        |     |_| |       H         ===   ===================H     \",\n    \t\t\t\"      V    H        =============     H======                            H     \",\n    \t\t\t\"           H                          H                     &            H     \",\n    \t\t\t\"           H                          H                |    |            H     \",\n    \t\t\t\"    H      H        ^^^&&^^^ & ^  ^^^ H           H    |    =============H     \",\n    \t\t\t\"    H======H   =======================H===========H=====          &      H     \",\n    \t\t\t\"    H                                 H           H    |         &&&     H     \",\n    \t\t\t\"    H                                 H           H    |        &&&&&    H     \",\n    \t\t\t\"    H                                 H           H    |    =============H     \",\n    \t\t\t\"              =====------=================        H    |       $     $         \",\n    \t\t\t\"                                         |        H    |      $$$   $$$        \",\n    \t\t\t\"====------===                            |        H    |     $$$$$ $$$$$       \",\n    \t\t\t\"            |       =                    | =============    ============       \",\n    \t\t\t\"            |       $                     ^          &                         \",\n    \t\t\t\"            |^^^^^^^^^^^^^^      $ ^              ======                       \",\n    \t\t\t\"*                   .      &   ^ H*^                    ^  ^       ^^^^^^^^^^^^\",\n    \t\t\t\"===============================================================================\"\n    \t\t]\n    \t}\n    ];\n\n    /**\n     * `Level` is a singleton that handles logic related to loading levels. A \"level\"\n     * is a bundle of data (like layout, dispensers, player position, etc.). When you\n     * load a level, that data is used to initialize a new \"playing field\" -- this is\n     * what the player moves around on and interacts with.\n     *\n     * (Naming things is hard, so it helps to make a decision and then stick to it\n     * throughout your codebase. In this case, the decision is that a \"level\" is a\n     * static block of data about a level the user COULD play, whereas a level being\n     * actively played is called a playing field.)\n     */\n\n    const Level = {\n        LEVELS: LevelData,\n        LEVEL_COUNT: LevelData.length,\n\n        load(levelNumber) {\n            // In the original Ladder, \"level 7\" was the last level, and continuing to\n            // play looped you around to the beginning again (level 8 is Easy Street\n            // again and so on, and so is level 15, etc.).\n            let level = Level.LEVELS[levelNumber % Level.LEVELS.length];\n            if (!level) throw new Error(`No such level number: ${levelNumber}`);\n\n            // Perform some sanity checks on the level layout and extract useful info\n            // like player start position and dispenser positions etc.\n\n            let layout = level.layout.map(row => row.split(''));\n            let dispensers = [];\n            let player;\n\n            // Sanity check\n            layout = layout.slice(0, LEVEL_ROWS);\n\n            for (let y = 0; y < LEVEL_ROWS; y++) {\n                // Sanity checks\n                if (!layout[y]) layout[y] = [];\n                layout[y] = layout[y].slice(0, LEVEL_COLS);\n\n                for (let x = 0; x < LEVEL_COLS; x++) {\n                    // Sanity check\n                    if (!layout[y][x]) layout[y][x] = ' ';\n\n                    // Der Dispensers (V) and Der Eaters (*) have behaviors, so it is convenient for us\n                    // to construct a list of them, but they are permanent parts of the layout, so we can\n                    // leave them as part of the level and draw them normally.\n\n                    if (layout[y][x] === 'V') {\n                        dispensers.push({ x, y });\n                    }\n\n                    // Treasure ($), Statues (&), and the Lad (p) are transient - the player moves around and\n                    // can pick up the treasures and statues. That's why for these elements, we add them to\n                    // our lists AND we remove them from the \"playing field\", we'll draw them separately on\n                    // top of the layout.\n\n                    if (layout[y][x] === 'p') {\n                        layout[y][x] = ' ';\n                        player = { x, y };\n                    }\n\n                    // Everything else, like floors (=), walls (|), ladders (H) and fire (^), is part of the\n                    // layout. The Lad interacts with them, but we can handle that during our movement checks.\n                }\n            }\n\n            return {\n                name: level.name,\n                layout,\n                dispensers,\n                player\n            };\n        }\n    };\n\n    /**\n     * `PlayingField` is a class that represents a level that is actively being played on-screen.\n     * A new one is created by the game session any time we start a new level.\n     *\n     * Level-specific stuff (like bonus time, dispensers, rocks, player position, etc.) is all\n     * managed by the playing field.\n     */\n\n    class PlayingField {\n        constructor(levelNumber) {\n            let level = Level.load(levelNumber);\n\n            // Store level-related info\n            this.layout = level.layout;\n            this.dispensers = level.dispensers;\n            this.time = 2000;\n\n            // Initialize player\n            this.player = new Player(level.player.x, level.player.y);\n\n            // Initialize list of rocks (empty)\n            this.rocks = [];\n\n            // Not winning yet (while \"winning\" the player stops moving and we add up the bonus score)\n            this.winning = false;\n        }\n\n        update(moveFrame) {\n            // If we're already winning, keep counting down the bonus time, but\n            // no more movement will happen on this level.\n            if (this.winning) {\n                Game.session.updateScore(SCORE_TREASURE);\n                this.time -= 10;\n                if (this.time < 0) Game.session.startNextLevel();\n                return;\n            }\n\n            // Count down bonus time\n            if (this.time > 0 && moveFrame) this.time--;\n\n            let oldX = this.player.x, oldY = this.player.y;\n\n            // Move player based on user input\n            this.player.update(this, moveFrame);\n\n            // Any time you move OFF of a disappearing floor, it goes away.\n            if (oldX !== this.player.x && oldY === this.player.y) {\n                if (this.isDisappearingFloor(oldX, oldY + 1)) {\n                    this.layout[oldY + 1][oldX] = ' ';\n                }\n            }\n\n            // Check if player should be dead (before moving rocks)\n            if (moveFrame) this.checkIfPlayerShouldDie(Game.session);\n\n            // Move rocks\n            for (let rock of this.rocks) rock.update(this, moveFrame);\n\n            // Check if player should be dead (after moving rocks)\n            if (moveFrame) this.checkIfPlayerShouldDie(Game.session);\n\n            if (moveFrame) {\n                // Collect statues\n                if (this.isStatue(this.player.x, this.player.y)) {\n                    this.layout[this.player.y][this.player.x] = ' ';\n                    Game.session.updateScore(SCORE_STATUE);\n                }\n\n                // Collect treasure (ends the current level)\n                if (this.isTreasure(this.player.x, this.player.y)) {\n                    this.winning = true;\n                    return;\n                }\n\n                // Interact with trampolines\n                if (this.isTrampoline(this.player.x, this.player.y)) {\n                    switch (Math.floor(Math.random() * 5)) {\n                        case 0:\n                            this.player.state = State.LEFT;\n                            this.player.nextState = undefined;\n                            break;\n                        case 1:\n                            this.player.state = State.RIGHT;\n                            this.player.nextState = undefined;\n                            break;\n                        case 2:\n                            this.player.state = State.JUMP_UP;\n                            this.player.nextState = undefined;\n                            this.player.jumpStep = 0;\n                            break;\n                        case 3:\n                            this.player.state = State.JUMP_LEFT;\n                            this.player.nextState = State.LEFT;\n                            this.player.jumpStep = 0;\n                            break;\n                        case 4:\n                            this.player.state = State.JUMP_RIGHT;\n                            this.player.nextState = State.RIGHT;\n                            this.player.jumpStep = 0;\n                            break;\n                    }\n                }\n\n                // Kill dead rocks\n                this.rocks = this.rocks.filter(rock => rock.state !== State.DEAD);\n\n                // Dispense new rocks\n                if (this.rocks.length < this.maxRocks() && Math.random() > 0.91) {\n                    let dispenser = this.dispensers[Math.floor(Math.random() * this.dispensers.length)];\n                    this.rocks.push(new Rock(dispenser));\n                }\n\n                // Dying player\n                if (this.player.state === State.DEAD) {\n                    Game.session.lives--;\n                    if (Game.session.lives <= 0) {\n                        // TODO: More fanfare\n                        Game.showMainMenu();\n                    } else {\n                        Game.session.restartLevel();\n                    }\n                }\n            }\n        }\n\n        draw() {\n            // Draw layout\n            Screen.write(0, 0, this.layout.map(row => row.join('')));\n\n            // Draw player\n            this.player.draw();\n\n            // Draw rocks\n            this.rocks.forEach(rock => rock.draw());\n        }\n\n        //\n        // Utility functions - this is an attempt to consolidate logic in one spot and make other\n        // functions (like the update logic in Player) more readable.\n        //\n\n        onSolid(x, y) {\n            return ['=', '-', 'H', '|'].includes(this.layout[y + 1][x]) || this.layout[y][x] === 'H';\n        }\n\n        emptySpace(x, y) {\n            if (x < 0 || x >= LEVEL_COLS) {\n                return false;\n            } else {\n                return !['|', '='].includes(this.layout[y][x]);\n            }\n        }\n\n        isLadder(x, y) {\n            return this.layout[y][x] === 'H';\n        }\n\n        isStatue(x, y) {\n            return this.layout[y][x] === '&';\n        }\n\n        isTreasure(x, y) {\n            return this.layout[y][x] === '$';\n        }\n\n        isTrampoline(x, y) {\n            return this.layout[y][x] === '.';\n        }\n\n        isEater(x, y) {\n            return this.layout[y][x] === '*';\n        }\n\n        isFire(x, y) {\n            return this.layout[y][x] === '^';\n        }\n\n        isDisappearingFloor(x, y) {\n            return this.layout[y][x] === '-';\n        }\n\n        canClimbUp(x, y) {\n            if (y < 0) return false;\n            return ['H', '&', '$'].includes(this.layout[y][x]);\n        }\n\n        canClimbDown(x, y) {\n            return ['H', '&', '$', ' ', '^', '.'].includes(this.layout[y][x]);\n        }\n\n        checkIfPlayerShouldDie() {\n            // If we're ALREADY dying or dead, let nature run its course\n            if (this.player.state === State.DYING || this.player.state === State.DEAD) return;\n\n            // Landing on fire kills you\n            if (this.isFire(this.player.x, this.player.y)) {\n                this.player.state = State.DYING;\n            }\n\n            // Running out of time kills you\n            if (this.time <= 0) {\n                this.player.state = State.DYING;\n            }\n\n            // Running into a rock kills you, and makes the rock that killed you disappear.\n            // That's not necessary, I just think it looks better. While we play the death\n            // animation we'll continue to move rocks, so another rock might also \"hit\" you,\n            // but it will just pass through your dying character.\n            //\n            // If we're above a rock with 1 or 2 spaces between, we get some points instead.\n            //\n            // A function named `checkIfPlayerShouldDie` is probably not the best place to do\n            // this, but it's convenient because we want to do this twice (just like the death\n            // check).\n            //\n            //                    p                          p\n            // (1)   p     -->            (2)   p     -->\n            //        o          o                o          o\n            //      =====       =====          =====       =====\n            //\n            // In situation (1), there will never be a frame on-screen where the player is directly\n            // above the rock, but we'll still count it because we'll check once after the player moves.\n            // In situation (2), the first check won't count, but the second check after the rocks move\n            // will give the score (and the frame drawn on screen will show the player above the rock).\n            //\n            for (let i = 0; i < this.rocks.length; i++) {\n                if (this.player.x === this.rocks[i].x) {\n                    if (this.player.y === this.rocks[i].y) {\n                        this.player.kill();\n                        this.rocks.splice(i, 1);\n                        break;\n                    } else if (this.player.y === this.rocks[i].y - 1 && this.emptySpace(this.player.x, this.player.y + 1)) {\n                        Game.session.updateScore(SCORE_ROCK);\n                    } else if (this.player.y === this.rocks[i].y - 2 && this.emptySpace(this.player.x, this.player.y + 1) && this.emptySpace(this.player.x, this.player.y + 2)) {\n                        Game.session.updateScore(SCORE_ROCK);\n                    }\n                }\n            }\n        }\n\n        maxRocks() {\n            // The total number of rocks we can have on screen is based on a global max rocks value,\n            // then increased slightly by the number of dispensers on the level, then increased again\n            // by a hidden difficulty factor (level cycles).\n            return MAX_ROCKS + this.dispensers.length * DISPENSER_MAX_ROCKS + Game.session.hiddenFactor() * HIDDEN_FACTOR_MAX_ROCKS;\n        }\n    }\n\n    /**\n     * `GameSession` is a class that represents... well, a game session! It is created when the\n     * player presses `P` at the main menu, and ends when the player runs out of lives.\n     *\n     * The game session tracks values that persist across levels (like number of lives, score,\n     * the level number, etc.). Most of the actual in-game logic it hands off to `PlayingField`.\n     */\n\n    class GameSession {\n        constructor() {\n            this.score = 0;\n            this.levelNumber = 0;\n            this.levelCycle = 1;\n            this.lives = 5;\n            this.nextLife = NEW_LIFE_SCORE;\n            this.paused = false;\n        }\n\n        update() {\n            // The `Game` controls the overall game loop, which runs at a fixed 60 frames per second.\n            //\n            // However, Ladder has the concept of \"play speed\" which the player can change at the main\n            // menu, and it controls how fast the game runs. To accomplish that, we can do a second\n            // frame gate here. This gate sets a flag called `moveFrame` IF things can move in this frame.\n            //\n            // We do it this way so that animations (like the play death animation, or the end-of-level\n            // score animation) can run at the same speed no matter what the play speed is.\n            let now = new Date().getTime();\n            let lastFrame = this.lastFrame || 0;\n            let moveFrame = false;\n\n            if (now - lastFrame >= (this.nextFrame || 0)) {\n                moveFrame = true;\n                this.nextFrame = now + this.moveFrameMillisecondDelay();\n            }\n\n            if (this.paused && [Input.Action.PAUSE, Input.Action.RESUME].includes(Input.lastAction())) {\n                this.paused = false;\n                Input.consume();\n            }\n\n            if (!this.paused && Input.lastAction() === Input.Action.PAUSE) {\n                this.paused = true;\n                Input.consume();\n            }\n\n            if (this.paused) return;\n\n            // If we haven't instantiated the playing field yet, create it now.\n            if (!this.field) this.field = new PlayingField(this.levelNumber);\n\n            // Hand off to the playing field for actual in-game logic\n            this.field.update(moveFrame);\n\n            this.handleCheatCodes();\n        }\n\n        draw() {\n            if (this.field) this.field.draw();\n\n            let stat = [\n                String(this.lives).padStart(2, ' '),\n                String(this.levelNumber + 1).padStart(2, ' '),\n                String(this.score).padStart(6, ' '),\n                this.field ? String(this.field.time).padStart(4, ' ') : ''\n            ];\n            Screen.write(0, 21, `Lads   ${stat[0]}     Level   ${stat[1]}      Score   ${stat[2]}      Bonus time   ${stat[3]}`);\n\n            if (this.paused) {\n                Screen.write(0, 23, 'Paused - type ESCape or RETURN to continue.');\n            }\n        }\n\n        restartLevel() {\n            this.field = undefined;\n        }\n\n        startNextLevel() {\n            this.field = undefined;\n            this.levelNumber++;\n            if (this.levelNumber % Level.LEVEL_COUNT === 0) {\n                this.levelCycle++;\n            }\n        }\n\n        updateScore(scoreType) {\n            switch (scoreType) {\n                case SCORE_ROCK:\n                    this.score += 200;\n                    break;\n                case SCORE_STATUE:\n                    this.score += this.field.time;\n                    break;\n                case SCORE_TREASURE:\n                    // Added repeatedly after winning the level\n                    this.score += 10;\n                    break;\n            }\n\n            if (this.score >= this.nextLife) {\n                this.lives++;\n                this.nextLife += NEW_LIFE_SCORE;\n            }\n        }\n\n        hiddenFactor() {\n            // This \"hidden\" difficulty level increases steadily as the player completes a\n            // level cycle (every time they reach the Easy Street level). This makes the\n            // game slowly harder as you keep playing.\n            return Math.floor(this.levelNumber / Level.LEVEL_COUNT);\n        }\n\n        moveFrameMillisecondDelay() {\n            // Regardless of play speed, the game gets slightly faster every level cycle\n            return Math.floor(PLAY_SPEEDS[Game.playSpeed] - this.hiddenFactor() * HIDDEN_FACTOR_PLAY_SPEED * PLAY_SPEEDS[Game.playSpeed]);\n        }\n\n        handleCheatCodes() {\n            // Cheat codes are useful for testing, and this game is no exception. Of course\n            // THESE cheat codes do not belong here, as they wouldn't be created until 11 years\n            // later, but that won't stop me from using them anywhere I get the chance!\n            //\n            // =================     ===============     ===============   ========  ========\n            // \\\\ . . . . . . .\\\\   //. . . . . . .\\\\   //. . . . . . .\\\\  \\\\. . .\\\\// . . //\n            // ||. . ._____. . .|| ||. . ._____. . .|| ||. . ._____. . .|| || . . .\\/ . . .||\n            // || . .||   ||. . || || . .||   ||. . || || . .||   ||. . || ||. . . . . . . ||\n            // ||. . ||   || . .|| ||. . ||   || . .|| ||. . ||   || . .|| || . | . . . . .||\n            // || . .||   ||. _-|| ||-_ .||   ||. . || || . .||   ||. _-|| ||-_.|\\ . . . . ||\n            // ||. . ||   ||-'  || ||  `-||   || . .|| ||. . ||   ||-'  || ||  `|\\_ . .|. .||\n            // || . _||   ||    || ||    ||   ||_ . || || . _||   ||    || ||   |\\ `-_/| . ||\n            // ||_-' ||  .|/    || ||    \\|.  || `-_|| ||_-' ||  .|/    || ||   | \\  / |-_.||\n            // ||    ||_-'      || ||      `-_||    || ||    ||_-'      || ||   | \\  / |  `||\n            // ||    `'         || ||         `'    || ||    `'         || ||   | \\  / |   ||\n            // ||            .===' `===.         .==='.`===.         .===' /==. |  \\/  |   ||\n            // ||         .=='   \\_|-_ `===. .==='   _|_   `===. .===' _-|/   `==  \\/  |   ||\n            // ||      .=='    _-'    `-_  `='    _-'   `-_    `='  _-'   `-_  /|  \\/  |   ||\n            // ||   .=='    _-'          `-__\\._-'         `-_./__-'         `' |. /|  |   ||\n            // ||.=='    _-'                                                     `' |  /==.||\n            // =='    _-'                                                            \\/   `==\n            // \\   _-'                                                                `-_   /\n            //  `''                                                                      ``'\n            //\n            let recentKeystrokes = Input.history.map(event => event.key).join('').toUpperCase();\n            if (recentKeystrokes.match(/IDCLEV(\\d\\d)/)) {\n                // Changing levels is as simple as setting the desired level number\n                // and then throwing the current playing field away.\n                Input.consume(true);\n                this.levelNumber = parseInt(RegExp.$1, 10);\n                this.field = undefined;\n            } else if (recentKeystrokes.includes('IDDQD')) {\n                Input.consume(true);\n                console.log('god mode');\n            } else if (recentKeystrokes.includes('IDKFA')) {\n                // Immediately end the current level as if we'd touched the treasure.\n                Input.consume(true);\n                if (this.field) this.field.winning = true;\n            } else if (recentKeystrokes.includes('IDKILL')) {\n                Input.consume(true);\n                if (this.field && this.field.player) this.field.player.kill();\n            }\n        }\n    }\n\n    /**\n     * `Game` is a singleton that represents the running game in the browser,\n     * initializes game submodules, and handles the top-level game loop.\n     */\n\n    const Game = {\n        init() {\n            Sprite.loadSpritesheet(async () => {\n                await Viewport.init();\n                await Screen.init();\n                await Sprite.init();\n                await Text.init();\n                await Input.init();\n                await Audio.init();\n\n                window.addEventListener('blur', () => this.lostFocus());\n                window.addEventListener('focus', () => this.gainedFocus());\n\n                this.start();\n            });\n        },\n\n        start() {\n            this.frame = 0;\n            this.playSpeed = 2;\n            this.showMainMenu();\n\n            window.requestAnimationFrame(() => this.onFrame());\n        },\n\n        onFrame() {\n            let fps = 60;\n            let now = new Date().getTime();\n            let lastFrame = this.lastFrame || 0;\n\n            // Note: we are using `requestAnimationFrame`, which will call our onFrame handler\n            // 60 times per second in most cases. However, it can be higher (the browser may\n            // respect the user's refresh settings, which could be 120Hz or higher for example).\n            //\n            // It's safest to have a check like we do here, where we explicitly limit the number\n            // of update calls to 60 times per second.\n            if (now - lastFrame >= 1000 / fps) {\n                this.frame++;\n                this.update();\n                this.lastFrame = now;\n            }\n\n            Viewport.resize();\n            this.draw();\n\n            window.requestAnimationFrame(() => this.onFrame());\n        },\n\n        update() {\n            // Pull in frame by frame button pushes / keypresses / mouse clicks\n            Input.update();\n\n            // perform any per-frame audio updates\n            Audio.update();\n\n            if (this.menu) {\n                this.menu.update();\n            }\n\n            if (this.session) this.session.update();\n        },\n\n        draw() {\n            // Reset canvas transform and scale\n            Viewport.ctx.setTransform(Viewport.scale, 0, 0, Viewport.scale, 0, 0);\n\n            // Clear canvas. Note we don't go for pure black but rather a dark gray, to simulate\n            // the relatively bright phosphors on the Kaypro II. (We are going to add scan lines\n            // at the end which will appear to darken the whole screen, so the overall effect\n            // will be a little darker than this color.)\n            Viewport.ctx.fillStyle = '#181818';\n            Viewport.ctx.fillRect(0, 0, Viewport.width, Viewport.height);\n\n            // Center the 80x25 character \"screen\" in the viewport\n            Viewport.ctx.translate((Viewport.width - GAME_WIDTH) / 2 | 0, (Viewport.height - GAME_HEIGHT) / 2 | 0);\n\n            // Hand off control to our submodules to draw whatever they'd like. For all the submodules\n            // below us, \"drawing\" means writing text to the Screen.\n            Screen.clear();\n            if (this.session) this.session.draw();\n            if (this.menu) this.menu.draw();\n\n            // Render the text on the screen to the viewport.\n            Screen.draw(Viewport.ctx);\n\n            // After drawing the \"screen\" (characters), add scan lines on top. Our scan lines are almost\n            // not visible, but move slowly and introduce subtle visual shifts in the characters on screen,\n            // which is the effect we are going for.\n            //\n            // (Technically scan lines should be IN BETWEEN rows of pixels, and what we're actually simulating\n            // here is our eyeballs clocking the screen refresh. We're going for a general feeling here.)\n            Viewport.ctx.fillStyle = 'rgba(0, 0, 0, 0.5)';\n            for (let y = Math.floor(-Viewport.height / 2) - 4; y < Viewport.height + 4; y += 4) {\n                let r = ((this.frame / 5) % 4) + y;\n                Viewport.ctx.fillRect(-Viewport.width, r, Viewport.width * 2, 2);\n            }\n        },\n\n        startSession() {\n            this.menu = undefined;\n            this.session = new GameSession();\n\n            // Hide the github link while in a game session\n            document.getElementsByClassName('github-corner')[0].className = 'github-corner hidden';\n        },\n\n        showMainMenu() {\n            this.menu = new MainMenu();\n            this.session = undefined;\n\n            // Show github link again when returning from a game\n            document.getElementsByClassName('github-corner')[0].className = 'github-corner';\n        },\n\n        showInstructions() {\n            this.menu = new InstructionsMenu();\n            this.session = undefined;\n        },\n\n        lostFocus() {\n            // If we lose focus (the user switched tabs, or tabbed away from the browser),\n            // automatically pause the game session if there is one.\n            if (this.session) this.session.paused = true;\n        },\n\n        gainedFocus() {\n            // Do nothing - we'll let the user hit enter to resume playing.\n        }\n    };\n\n    /**\n     * This is the entry point for the game.\n     */\n\n    Game.init();\n\n}());\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwLmpzIiwic291cmNlcyI6WyIuLi9zcmMvanMvVXRpbC5qcyIsIi4uL3NyYy9qcy9TcHJpdGVTaGVldC1nZW4uanMiLCIuLi9zcmMvanMvQ29uc3RhbnRzLmpzIiwiLi4vc3JjL2pzL1ZpZXdwb3J0LmpzIiwiLi4vc3JjL2pzL1Nwcml0ZS5qcyIsIi4uL3NyYy9qcy9JbnB1dC5qcyIsIi4uL3NyYy9qcy9UZXh0LmpzIiwiLi4vc3JjL2pzL2xpYi96emZ4LmpzIiwiLi4vc3JjL2pzL2xpYi96emZ4bS5qcyIsIi4uL3NyYy9qcy9zb25ncy9PYmxpcXVlTXlzdGlxdWUuanMiLCIuLi9zcmMvanMvQXVkaW8uanMiLCIuLi9zcmMvanMvU2NyZWVuLmpzIiwiLi4vc3JjL2pzL01haW5NZW51LmpzIiwiLi4vc3JjL2pzL0luc3RydWN0aW9uc01lbnUuanMiLCIuLi9zcmMvanMvRW50aXR5LmpzIiwiLi4vc3JjL2pzL1BsYXllci5qcyIsIi4uL3NyYy9qcy9Sb2NrLmpzIiwiLi4vc3JjL2pzL0xldmVsLmpzIiwiLi4vc3JjL2pzL1BsYXlpbmdGaWVsZC5qcyIsIi4uL3NyYy9qcy9HYW1lU2Vzc2lvbi5qcyIsIi4uL3NyYy9qcy9HYW1lLmpzIiwiLi4vc3JjL2pzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogTWlzY2VsbGFuZW91cywgaW5kaXZpZHVhbGx5IGV4cG9ydGVkIGZ1bmN0aW9ucyB0aGF0IGRvbid0IGZpdCBhbnl3aGVyZSBlbHNlLlxuICpcbiAqIEluIG1hbnkgZ2FtZXMgSSdsbCBzdGljayBhbGwgbXkgcmFuZG9tIG1hdGgsIGdlb21ldHJ5LCBhbmQgY2xpcHBpbmcgc3R1ZmYgaGVyZSxcbiAqIGJ1dCBpbiB0aGlzIGdhbWUgdGhlcmUncyBhY3R1YWxseSBub3QgYSBsb3Qgb2YgZXh0cmEgbWF0aCB0byBkbyAobW9zdGx5IGJlY2F1c2VcbiAqIHdlIGNhbiBvbmx5IG1vdmUgb25lIFwiY2hhcmFjdGVyXCIgYXQgYSB0aW1lLCBhbmQgdGhlcmUncyBub3QgYW55IEFJIHRvIHNwZWFrIG9mLFxuICogc28gbm8gZmxvb2QgZmlsbHMgb3Igb3RoZXIgYWxnb3JpdGhtcyB0byBjb25zaWRlcikuXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHJnYmEociwgZywgYiwgYSkge1xuICAgIHJldHVybiBgcmdiYSgke3J9LCR7Z30sJHtifSwke2F9KWA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDYW52YXMod2lkdGgsIGhlaWdodCkge1xuICAgIGxldCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICBjYW52YXMud2lkdGggPSB3aWR0aDtcbiAgICBjYW52YXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgIGxldCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICByZXR1cm4geyBjYW52YXMsIGN0eCB9O1xufVxuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIFRoaXMgbW9kdWxlIGlzIGdlbmVyYXRlZCBieSBgZ3VscCBidWlsZEFzc2V0c2AuXG4gKi9cbmV4cG9ydCBjb25zdCBTcHJpdGVTaGVldCA9XG4gICAgLyogPGdlbmVyYXRlZD4gKi9cbnsgZm9udDogWyBbIDAsIDAsIDEyOCwgNTEyIF0gXSwgdXJpOiAnc3ByaXRlcy5wbmcnIH1cbi8qIDwvZ2VuZXJhdGVkPiAqL1xuIiwiLyoqXG4gKiBHbG9iYWwgY29uc3RhbnRzIGZvciBvdXIgZ2FtZS5cbiAqXG4gKiBJIGV4cG9ydCBhbGwgY29uc3RhbnRzIGluZGl2aWR1YWxseSBhbmQgaW1wb3J0IGp1c3QgdGhlIG9uZXMgSSB3YW50IGluIGVhY2ggZmlsZSB0aGF0XG4gKiB1c2VzIHRoZW0uIEluIHRoZW9yeSB0aGlzIGhlbHBzIHdpdGggdHJlZS1zaGFraW5nIGFuZCBsZXRzIHlvdSBzZWUgYXQgYSBnbGFuY2Ugd2hpY2hcbiAqIGZpbGVzIHVzZSB3aGljaCBjb25zdGFudHMsIGJ1dCBtb3N0bHkgaXQgd29ya3Mgb25seSBiZWNhdXNlIHRoaXMgaXMgYSBzbWFsbCBnYW1lLiBJZiB5b3VcbiAqIGhhdmUgaHVuZHJlZHMgb2YgY29uc3RhbnRzIGl0J3MgcHJvYmFibHkgYmV0dGVyIHRvIGV4cG9ydCBhIHNpbmdsZSBgQ29uc3RhbnRzYCBvYmplY3QgYW5kXG4gKiBsZXQgdGhlbSBiZSBuYW1lc3BhY2VkLlxuICovXG5cbi8vIFNwcml0ZXNoZWV0IFVSSSAocHJvZHVjZWQgZHVyaW5nIGd1bHAgYnVpbGQpXG5leHBvcnQgY29uc3QgU1BSSVRFU0hFRVRfVVJJID0gJ3Nwcml0ZXMucG5nJztcblxuLy8gVGhlIFwic2NyZWVuIGFyZWFcIi4gVGhpcyBpcyBhbiBBU0NJSSBnYW1lIGFuZCBzbyBtb3N0IG9mIHRoZSBnYW1lIGxvZ2ljIGRvZXNuJ3QgY2FyZSBhYm91dCBicm93c2VyXG4vLyBwaXhlbHMsIHdlIGNhcmUgYWJvdXQgdGhlIEFTQ0lJIGRpc3BsYXkgYXJlYSAoODB4MjUpLlxuLy9cbi8vIEFjdHVhbGx5IHRoZSBvcmlnaW5hbCB3YXMgbGlrZWx5IGFuIDgweDI0LiBXZSBjYW4gdXNlIGVpdGhlciBoZXJlLCB3aGF0ZXZlciBsb29rcyBnb29kIGluIHRoZSBicm93c2VyLlxuZXhwb3J0IGNvbnN0IFNDUkVFTl9XSURUSCA9IDgwO1xuZXhwb3J0IGNvbnN0IFNDUkVFTl9IRUlHSFQgPSAvKjI1Ki8gMjQ7XG5cbi8vIFRoZSBzaXplIG9mIG91ciBvbi1zY3JlZW4gY2hhcmFjdGVycyAoZ2l2ZW4gZGltZW5zaW9ucyBhYm92ZSwgdGhpcyBpcyA4MCBjb2xzIGJ5IDI1IHJvd3MpLlxuZXhwb3J0IGNvbnN0IENIQVJfV0lEVEggPSA4O1xuZXhwb3J0IGNvbnN0IENIQVJfSEVJR0hUID0gMTY7XG5leHBvcnQgY29uc3QgQ0hBUlNIRUVUX1dJRFRIID0gMTYgKiBDSEFSX1dJRFRIO1xuZXhwb3J0IGNvbnN0IENIQVJTSEVFVF9IRUlHSFQgPSAzMiAqIENIQVJfSEVJR0hUO1xuXG4vLyBBIHNjcmVlbiBzY2FsZSBmYWN0b3IuIFRoaXMgc2NhbGUgZmFjdG9yIG11bHRpcGxpZXMgdGhlIGVudGlyZSBzY3JlZW4gc2l6ZSBzbyB0aGF0XG4vLyB3ZSBjYW4gdGhlbiBpbnRyb2R1Y2UgdGV4dCBhcnRpZmFjdHMgKGxpa2UgY2hhcmFjdGVyIGdsb3cgYW5kIHNjYW4gbGluZXMpLCB0byBnaXZlIGl0XG4vLyBhIGxpdHRsZSBvZiB0aGF0IDE5ODIgZmVlbC5cbmV4cG9ydCBjb25zdCBTQ1JFRU5fU0NBTEUgPSA0O1xuXG4vLyBUaGUgcGxheWFibGUgYXJlYS4gTm90ZSB0aGF0IHRoaXMgaXMgdGhlIGRlc2lyZWQgZGltZW5zaW9ucywgYnV0IHRoZSBhY3R1YWwgb24tc2NyZWVuIGRpbWVuc2lvbnNcbi8vIG1heSBiZSBsYXJnZXIgdG8gbWFpbnRhaW4gYXNwZWN0IHJhdGlvIChzZWUgYFZpZXdwb3J0LndpZHRoYCAmIGBWaWV3cG9ydC5oZWlnaHRgKS5cbi8vXG4vLyBOb3RlIHRoZSBleHRyYSBsaXR0bGUgcGFkZGluZyBvZiBhIGNoYXJhY3Rlciwgd2hpY2gganVzdCBwcmV2ZW50cyBvdXIgdGV4dCBmcm9tIGJ1dHRpbmcgcmlnaHRcbi8vIGFnYWluc3QgdGhlIGVkZ2Ugb2YgdGhlIGJyb3dzZXIgd2luZG93LlxuZXhwb3J0IGNvbnN0IEdBTUVfV0lEVEggPSAoU0NSRUVOX1dJRFRIICsgMSkgKiBDSEFSX1dJRFRIICogU0NSRUVOX1NDQUxFO1xuZXhwb3J0IGNvbnN0IEdBTUVfSEVJR0hUID0gKFNDUkVFTl9IRUlHSFQgKyAxKSAqIENIQVJfSEVJR0hUICogU0NSRUVOX1NDQUxFO1xuXG4vLyBGaXhlZCBsZXZlbCBzaXplXG5leHBvcnQgY29uc3QgTEVWRUxfUk9XUyA9IDIwO1xuZXhwb3J0IGNvbnN0IExFVkVMX0NPTFMgPSA3OTtcblxuLy8gUGxheSBzcGVlZHMsIGV4cHJlc3NlZCBhcyBmcmFtZXMgcGVyIHNlY29uZC5cbi8vXG4vLyBBY2NvcmRpbmcgdG8gdGhlIG9yaWdpbmFsLCB0aGUgcGxheSBzcGVlZHMgaGFkIG1pbGxpc2Vjb25kIGRlbGF5cyBvZjpcbi8vICAgWzEwMG1zLCA1MG1zLCAyNW1zLCAxM21zLCA3bXNdLlxuLy9cbi8vIFRoaXMgd291bGQgbWVhbiB0aGUgZWZmZWN0aXZlIEZQUyB3YXM6XG4vLyAgIFsxMCwgMjAsIDQwLCA3NiwgMTQyXS5cbi8vXG4vLyBJIHRoaW5rIHRoaXMgaXMgd2F5IHRvbyBoaWdoLCBhbmQgbWlnaHQgbm90IGJlIGFjY3VyYXRlIChpdCBkb2Vzbid0IGNvdW50XG4vLyB0aW1lIHNwZW50IGRyYXdpbmcgdGhlIHNjcmVlbiBhbmQgcnVubmluZyB0aGUgZ2FtZSdzIGxvZ2ljLCB3aGljaCBtaWdodFxuLy8gYmUgYSBzaWduaWZpY2FudCBudW1iZXIgb2YgbWlsbGlzZWNvbmRzKS4gRnJvbSBtZW1vcnksIGVhY2ggc3BlZWQgd2FzIGFib3V0XG4vLyA1MCUgZmFzdGVyIHRoYW4gdGhlIHByZXZpb3VzIG9uZSwgc28gdGhhdCdzIHdoYXQgSSd2ZSBzZXQgaGVyZS5cbmV4cG9ydCBjb25zdCBQTEFZX1NQRUVEUyA9IFsxMjAsIDEwMCwgOTAsIDUwLCAzMF07XG5cbi8vIE1heGltdW0gbnVtYmVyIG9mIHJvY2tzIG9uIHNjcmVlbiBhdCBvbmNlXG5leHBvcnQgY29uc3QgTUFYX1JPQ0tTID0gNztcblxuLy8gRWFjaCBkaXNwZW5zZXIgb24gdGhlIGxldmVsIGluY3JlYXNlcyBtYXggcm9ja3MgYnkgMVxuZXhwb3J0IGNvbnN0IERJU1BFTlNFUl9NQVhfUk9DS1MgPSAxO1xuXG4vLyBIaWRkZW4gZGlmZmljdWx0eSBmYWN0b3IgLSB0aGUgZ2FtZSBnZXRzIDUlIGZhc3RlciBlYWNoIGxldmVsIGN5Y2xlXG5leHBvcnQgY29uc3QgSElEREVOX0ZBQ1RPUl9QTEFZX1NQRUVEID0gMC4wNTtcblxuLy8gSGlkZGVuIGRpZmZpY3VsdHkgZmFjdG9yIC0gdGhlIG1heGltdW0gbnVtYmVyIG9mIHJvY2tzIGluY3JlYXNlcyBlYWNoIGxldmVsIGN5Y2xlXG5leHBvcnQgY29uc3QgSElEREVOX0ZBQ1RPUl9NQVhfUk9DS1MgPSAyO1xuXG4vLyBTY29yZSBldmVudHMgKG5vdGUsIHRoZXNlIGFyZSBqdXN0IGlkZW50aWZpZXJzIGZvciB0aGUgdHlwZXMgb2Ygc2NvcmUgaW5jcmVhc2VzLCBub3Rcbi8vIGFjdHVhbCBzY29yZSB2YWx1ZXMpLlxuZXhwb3J0IGNvbnN0IFNDT1JFX1JPQ0sgPSAxO1xuZXhwb3J0IGNvbnN0IFNDT1JFX1NUQVRVRSA9IDI7XG5leHBvcnQgY29uc3QgU0NPUkVfVFJFQVNVUkUgPSAzO1xuXG4vLyAxLVVwXG5leHBvcnQgY29uc3QgTkVXX0xJRkVfU0NPUkUgPSAxMF8wMDA7XG4iLCIndXNlIHN0cmljdCc7XG5cbmltcG9ydCB7IEdBTUVfV0lEVEgsIEdBTUVfSEVJR0hUIH0gZnJvbSAnLi9Db25zdGFudHMnO1xuXG4vKipcbiAqIFZpZXdwb3J0XG4gKlxuICogUmVwcmVzZW50cyB0aGUgZ2FtZSBkaXNwbGF5IChmb3IgdXMsIGEgY2FudmFzKS5cbiAqL1xuZXhwb3J0IGNvbnN0IFZpZXdwb3J0ID0ge1xuICAgIGluaXQoKSB7XG4gICAgICAgIFZpZXdwb3J0LmNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYW52YXMnKTtcbiAgICAgICAgVmlld3BvcnQuY3R4ID0gVmlld3BvcnQuY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gICAgICAgIFZpZXdwb3J0LnJlc2l6ZSh0cnVlKTtcbiAgICB9LFxuXG4gICAgLy8gUmVzaXplIHRoZSBjYW52YXMgdG8gZ2l2ZSB1cyBhcHByb3hpbWF0ZWx5IG91ciBkZXNpcmVkIGdhbWUgZGlzcGxheSBzaXplLlxuICAgIC8vXG4gICAgLy8gUmF0aGVyIHRoYW4gYXR0ZW1wdCB0byBleHBsYWluIGl0LCBoZXJlJ3MgYSBjb25jcmV0ZSBleGFtcGxlOlxuICAgIC8vXG4gICAgLy8gICAgIHdlIHN0YXJ0IHdpdGggYSBkZXNpcmVkIGdhbWUgZGltZW5zaW9uOiAgIDQ4MHgyNzBweFxuICAgIC8vICAgICAgICAgIGdldCB0aGUgYWN0dWFsIGJyb3dzZXIgZGltZW5zaW9uczogIDEzMDl4NDY4cHhcbiAgICAvLyAgICAgICAgICBmYWN0b3IgaW4gdGhlIGRpc3BsYXkncyBEUEkgcmF0aW86ICAyNjE4eDkzNnB4XG4gICAgLy8gICAgICAgICBub3cgY2FsY3VsYXRlIHRoZSBob3Jpem9udGFsIHNjYWxlOiAgICAgICA1LjQ1eFxuICAgIC8vICAgICAgICAgICAgICAgICAgICAgYW5kIHRoZSB2ZXJ0aWNhbCBzY2FsZTogICAgICAgMy40NnhcbiAgICAvLyAgICAgICAgICAgIG91ciBuZXcgb2ZmaWNhbCBnYW1lIHNjYWxpbmcgaXM6ICAgICAgICA1LjR4XG4gICAgLy8gICAgICAgYW5kIG91ciBvZmZpY2lhbCB2aWV3cG9ydCBkaW1lbnNpb25zOiAgIDQ4NHgxNzNweFxuICAgIC8vXG4gICAgLy8gVGhpcyBhcHByb2FjaCBlbXBoYXNpemVzIGNvcnJlY3QgYXNwZWN0IHJhdGlvIGFuZCBtYWludGFpbnMgZnVsbC13aW5kb3cgcmVuZGVyaW5nLCBhdFxuICAgIC8vIHRoZSBwb3RlbnRpYWwgY29zdCBvZiBsaW1pdGluZyB2aXNpYmlsaXR5IG9mIHRoZSBnYW1lIGl0c2VsZiBpbiBlaXRoZXIgdGhlIFggb3IgWSBheGlzLlxuICAgIC8vIElmIHlvdSB1c2UgdGhpcyBhcHByb2FjaCwgbWFrZSBzdXJlIHlvdXIgR1VJIGNhbiBcImZsb2F0XCIgKG90aGVyd2lzZSB0aGVyZSBtYXkgYmUgd2hvbGVcbiAgICAvLyBVSSBlbGVtZW50cyB0aGUgcGxheWVyIGNhbm5vdCBzZWUhKS5cbiAgICByZXNpemUoZm9yY2UpIHtcbiAgICAgICAgbGV0IGRwaSA9IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvLFxuICAgICAgICAgICAgd2lkdGggPSBWaWV3cG9ydC5jYW52YXMuY2xpZW50V2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQgPSBWaWV3cG9ydC5jYW52YXMuY2xpZW50SGVpZ2h0LFxuICAgICAgICAgICAgZHBpV2lkdGggPSB3aWR0aCAqIGRwaSxcbiAgICAgICAgICAgIGRwaUhlaWdodCA9IGhlaWdodCAqIGRwaTtcblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICBmb3JjZSB8fFxuICAgICAgICAgICAgVmlld3BvcnQuY2FudmFzLndpZHRoICE9PSBkcGlXaWR0aCB8fFxuICAgICAgICAgICAgVmlld3BvcnQuY2FudmFzLmhlaWdodCAhPT0gZHBpSGVpZ2h0XG4gICAgICAgICkge1xuICAgICAgICAgICAgVmlld3BvcnQuY2FudmFzLndpZHRoID0gZHBpV2lkdGg7XG4gICAgICAgICAgICBWaWV3cG9ydC5jYW52YXMuaGVpZ2h0ID0gZHBpSGVpZ2h0O1xuXG4gICAgICAgICAgICBWaWV3cG9ydC5zY2FsZSA9ICgoTWF0aC5taW4oZHBpV2lkdGggLyBHQU1FX1dJRFRILCBkcGlIZWlnaHQgLyBHQU1FX0hFSUdIVCkgKiAxMCkgfCAwKSAvIDEwO1xuICAgICAgICAgICAgVmlld3BvcnQud2lkdGggPSBNYXRoLmNlaWwoZHBpV2lkdGggLyBWaWV3cG9ydC5zY2FsZSk7XG4gICAgICAgICAgICBWaWV3cG9ydC5oZWlnaHQgPSBNYXRoLmNlaWwoZHBpSGVpZ2h0IC8gVmlld3BvcnQuc2NhbGUpO1xuICAgICAgICAgICAgVmlld3BvcnQuY2VudGVyID0ge1xuICAgICAgICAgICAgICAgIHU6IChWaWV3cG9ydC53aWR0aCAvIDIpIHwgMCxcbiAgICAgICAgICAgICAgICB2OiAoVmlld3BvcnQuaGVpZ2h0IC8gMikgfCAwXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgVmlld3BvcnQuY2xpZW50V2lkdGggPSB3aWR0aDtcbiAgICAgICAgICAgIFZpZXdwb3J0LmNsaWVudEhlaWdodCA9IGhlaWdodDtcblxuICAgICAgICAgICAgLy8gTm90ZTogc21vb3RoaW5nIGZsYWcgZ2V0cyByZXNldCBvbiBldmVyeSByZXNpemUgYnkgc29tZSBicm93c2Vycywgd2hpY2ggaXMgd2h5XG4gICAgICAgICAgICAvLyB3ZSBkbyBpdCBoZXJlLlxuICAgICAgICAgICAgVmlld3BvcnQuY3R4LmltYWdlU21vb3RoaW5nRW5hYmxlZCA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gV2UgZG8gdGhpcyBldmVyeSBmcmFtZSwgbm90IGp1c3Qgb24gcmVzaXplLCBkdWUgdG8gYnJvd3NlciBzb21ldGltZXMgXCJmb3JnZXR0aW5nXCIuXG4gICAgICAgIFZpZXdwb3J0LmNhbnZhcy5zdHlsZS5jdXJzb3IgPSAnbm90LWFsbG93ZWQnO1xuICAgIH1cbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbmltcG9ydCB7IEdhbWUgfSBmcm9tICcuL0dhbWUnO1xuaW1wb3J0IHsgcmdiYSwgY3JlYXRlQ2FudmFzIH0gZnJvbSAnLi9VdGlsJztcbmltcG9ydCB7IFNwcml0ZVNoZWV0IH0gZnJvbSAnLi9TcHJpdGVTaGVldC1nZW4nO1xuaW1wb3J0IHsgVmlld3BvcnQgfSBmcm9tICcuL1ZpZXdwb3J0JztcblxuLyoqXG4gKiBTcHJpdGVcbiAqXG4gKiBFbmNhcHN1bGF0ZXMgbG9hZGluZyBzcHJpdGUgc2xpY2VzIGZyb20gdGhlIHNwcml0ZXNoZWV0LCBvcmdhbml6aW5nIHRoZW0sIGFuZFxuICogbW9kaWZ5aW5nIHRoZW0gb3IgY29uc3RydWN0aW5nIHVzaW5nIHByaW1pdGl2ZXMuIFRvIHNhdmUgc3BhY2UsIHdlIHVzZSBzb21lIHRlY2huaXF1ZXNcbiAqIGxpa2Ugc3RvcmluZyBvbmx5IGEgc21hbGwgc2xpY2Ugb2YgYW4gaW1hZ2UgaW4gdGhlIHNwcml0ZXNoZWV0LCB0aGVuIHVzaW5nIGNvZGVcbiAqIHRvIGR1cGxpY2F0ZSBpdCwgYWRkIHNvbWUgcmFuZG9tbmVzcywgZXRjLlxuICovXG5leHBvcnQgY29uc3QgU3ByaXRlID0ge1xuICAgIC8vIFRoaXMgaXMgYW4gZXhjZXB0aW9uIHRvIHRoZSBydWxlLCBsb2FkaW5nIHRoZSBzcHJpdGVzaGVldCBpcyBhIHNwZWNpYWwgYWN0aW9uIHRoYXRcbiAgICAvLyBoYXBwZW5zIEJFRk9SRSBldmVyeXRoaW5nIGlzIGluaXRpYWxpemVkLlxuICAgIGxvYWRTcHJpdGVzaGVldChjYikge1xuICAgICAgICBsZXQgaW1hZ2UgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgaW1hZ2Uub25sb2FkID0gY2I7XG4gICAgICAgIGltYWdlLnNyYyA9IFNwcml0ZVNoZWV0LnVyaTtcbiAgICAgICAgU3ByaXRlLnNoZWV0ID0gaW1hZ2U7XG4gICAgfSxcblxuICAgIGluaXQoKSB7XG4gICAgICAgIC8vIEJhc2UgcGl4ZWwgZm9udCBhbmQgaWNvbnMgKHNlZSBgVGV4dC5pbml0YCBmb3IgYWRkaXRpb25hbCB2YXJpYXRpb25zKVxuICAgICAgICBTcHJpdGUuZm9udCA9IGluaXRCYXNpY1Nwcml0ZShTcHJpdGVTaGVldC5mb250WzBdKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQSBzbWFsbCBoZWxwZXIgdGhhdCBkcmF3cyBhIHNwcml0ZSBvbnRvIGEgY2FudmFzLCByZXNwZWN0aW5nIHRoZSBhbmNob3IgcG9pbnQgb2ZcbiAgICAgKiB0aGUgc3ByaXRlLiBOb3RlIHRoYXQgdGhlIGNhbnZhcyBzaG91bGQgYmUgUFJFLVRSQU5TTEFURUQgYW5kIFBSRS1ST1RBVEVELCBpZlxuICAgICAqIHRoYXQncyBhcHByb3ByaWF0ZSFcbiAgICAgKi9cbiAgICBkcmF3U3ByaXRlKGN0eCwgc3ByaXRlLCB1LCB2KSB7XG4gICAgICAgIGN0eC5kcmF3SW1hZ2Uoc3ByaXRlLmltZywgdSAtIHNwcml0ZS5hbmNob3IueCwgdiAtIHNwcml0ZS5hbmNob3IueSk7XG4gICAgfSxcblxuICAgIGRyYXdWaWV3cG9ydFNwcml0ZShzcHJpdGUsIHBvcywgcm90YXRpb24pIHtcbiAgICAgICAgbGV0IHsgdSwgdiB9ID0gdGhpcy52aWV3cG9ydFNwcml0ZTJ1dihcbiAgICAgICAgICAgIHNwcml0ZSxcbiAgICAgICAgICAgIHBvc1xuICAgICAgICApO1xuICAgICAgICBpZiAocm90YXRpb24pIHtcbiAgICAgICAgICAgIFZpZXdwb3J0LmN0eC5zYXZlKCk7XG4gICAgICAgICAgICBWaWV3cG9ydC5jdHgudHJhbnNsYXRlKHUgKyBzcHJpdGUuYW5jaG9yLngsIHYgKyBzcHJpdGUuYW5jaG9yLnkpO1xuICAgICAgICAgICAgVmlld3BvcnQuY3R4LnJvdGF0ZShyb3RhdGlvbik7XG4gICAgICAgICAgICBWaWV3cG9ydC5jdHguZHJhd0ltYWdlKFxuICAgICAgICAgICAgICAgIHNwcml0ZS5pbWcsXG4gICAgICAgICAgICAgICAgLXNwcml0ZS5hbmNob3IueCxcbiAgICAgICAgICAgICAgICAtc3ByaXRlLmFuY2hvci55XG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgVmlld3BvcnQuY3R4LnJlc3RvcmUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIFZpZXdwb3J0LmN0eC5kcmF3SW1hZ2Uoc3ByaXRlLmltZywgdSwgdik7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgdmlld3BvcnRTcHJpdGUydXYoc3ByaXRlLCBwb3MpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHU6IHBvcy54IC0gc3ByaXRlLmFuY2hvci54IC0gR2FtZS5jYW1lcmEucG9zLnggKyBWaWV3cG9ydC5jZW50ZXIudSxcbiAgICAgICAgICAgIHY6IHBvcy55IC0gc3ByaXRlLmFuY2hvci55IC0gR2FtZS5jYW1lcmEucG9zLnkgKyBWaWV3cG9ydC5jZW50ZXIudlxuICAgICAgICB9O1xuICAgIH1cbn07XG5cbi8vIFNwcml0ZSB1dGlsaXR5IGZ1bmN0aW9uc1xuXG5mdW5jdGlvbiBpbml0QmFzaWNTcHJpdGUoZGF0YSwgYW5jaG9yKSB7XG4gICAgcmV0dXJuIGluaXREeW5hbWljU3ByaXRlKGxvYWRDYWNoZVNsaWNlKC4uLmRhdGEpLCBhbmNob3IpO1xufVxuXG5mdW5jdGlvbiBpbml0RHluYW1pY1Nwcml0ZShzb3VyY2UsIGFuY2hvcikge1xuICAgIGxldCB3ID0gc291cmNlLndpZHRoLFxuICAgICAgICBoID0gc291cmNlLmhlaWdodDtcblxuICAgIHJldHVybiB7XG4gICAgICAgIGltZzogc291cmNlLFxuICAgICAgICBhbmNob3I6IGFuY2hvciB8fCB7IHg6ICh3IC8gMikgfCAwLCB5OiAoaCAvIDIpIHwgMCB9XG4gICAgfTtcbn1cblxuZnVuY3Rpb24gbG9hZENhY2hlU2xpY2UoeCwgeSwgdywgaCkge1xuICAgIGNvbnN0IHNvdXJjZSA9IFNwcml0ZS5zaGVldDtcbiAgICBjb25zdCBzbGljZUNhbnZhcyA9IGNyZWF0ZUNhbnZhcyh3LCBoKTtcbiAgICBzbGljZUNhbnZhcy5jdHguZHJhd0ltYWdlKHNvdXJjZSwgeCwgeSwgdywgaCwgMCwgMCwgdywgaCk7XG4gICAgcmV0dXJuIHNsaWNlQ2FudmFzLmNhbnZhcztcbn1cbiIsIi8qKlxuICogYElucHV0YCBpcyBhIHNpbmdsZXRvbiB0aGF0IGhlbHBzIHVzIG1hcCBrZXlib2FyZCBldmVudHMgaW4gdGhlIGJyb3dzZXJcbiAqIHRvIGluLWdhbWUgYWN0aW9ucy5cbiAqXG4gKiBXZSBnZW5lcmFsbHkgY2FyZSBhYm91dCB0d28gdHlwZXMgb2YgaW5wdXQgZXZlbnRzOlxuICpcbiAqICAtIEFuIFwiYWN0aW9uXCIgaXMgYSBzcGVjaWZpYyBhY3Rpb24gcmVjb2duaXphYmxlIGJ5IHRoZSBnYW1lLCBsaWtlIG1vdmluZyByaWdodFxuICogICAgb3IganVtcGluZy4gSW4gdGhlb3J5LCBpZiB0aGlzIHdhcyBhIG1vcmUgY29tcGxpY2F0ZWQgZ2FtZSwgdGhlcmUgY291bGQgYmVcbiAqICAgIG1hbnkgd2F5cyB0byBjYXVzZSBhIHNwZWNpZmljIGFjdGlvbiAobWF5YmUgdXNlciBwcmVzc2VzIFNQQUNFQkFSIHRvIGp1bXAsXG4gKiAgICBvciB0aGV5IGNsaWNrIFJJR0hUIE1PVVNFIEJVVFRPTiwgb3IgdGhleSB0YXAgQSBvbiBhIGdhbWVwYWQsIGV0Yy4pLiBGb3IgdGhpc1xuICogICAgcmVhc29uLCBpdCBoZWxwcyB0byBzZXBhcmF0ZSBwcm9jZXNzaW5nIGluLWdhbWUgYWN0aW9ucyBmcm9tIHByb2Nlc3NpbmcgdGhlXG4gKiAgICByYXcga2V5Ym9hcmQgZXZlbnRzIHRoYXQgY2F1c2UgdGhlbS5cbiAqXG4gKiAgLSBBY3R1YWwga2V5IHByZXNzZXMuIFRoZXJlIGFyZSBzaXR1YXRpb25zIHdoZXJlIHdlIG5lZWQgYSBtb3JlIGJyb2FkIHZpZXcgb2ZcbiAqICAgIHRoZSB1c2VyJ3Mga2V5IHByZXNzZXMsIGZvciBleGFtcGxlLCBpZiB0aGV5IGFyZSB0eXBpbmcgaW4gdGhlaXIgbmFtZSBmb3IgYVxuICogICAgaGlnaCBzY29yZSBvciBwcmVzc2luZyBvbmUgb2YgdGhlIGlucHV0cyBhdCB0aGUgbWFpbiBtZW51LiBJbiB0aGlzIGNhc2Ugd2VcbiAqICAgIHdhbnQgdG8ga25vdyBcImRpZCB0aGUgdXNlciB0YXAgUD9cIiwgYXMgb3Bwb3NlZCB0byBtYXBwaW5nIHRoZSBrZXlzIHRvIGFjdGlvbnMuXG4gKi9cblxuLy8gQSBsaXN0IG9mIGluLWdhbWUgYWN0aW9ucyB0aGF0IGNhbiBiZSBwZXJmb3JtZWQgYnkgdGhlIHBsYXllclxuY29uc3QgQWN0aW9uID0ge1xuICAgIFVQOiAgICAgMTEsXG4gICAgRE9XTjogICAxMixcbiAgICBMRUZUOiAgIDEzLFxuICAgIFJJR0hUOiAgMTQsXG4gICAgSlVNUDogICAxNSxcbiAgICBTVE9QOiAgIDE2LFxuICAgIFBBVVNFOiAgMTcsXG4gICAgUkVTVU1FOiAxOFxufTtcblxuLy8gQSBsaXN0IG9mIGtleSBjb2RlIG1hcHBpbmdzIGFuZCB3aGF0IGFjdGlvbiB0aGV5IHBlcmZvcm0uIEhlcmUgd2UgaGFyZC1jb2RlIGl0LCBidXRcbi8vIHlvdSBjb3VsZCBlYXNpbHkgYWxzbyBoYXZlIHRoZSBrZXkgbWFwcGluZ3MgY29udHJvbGxlZCBieSBzZXR0aW5ncyBhbmQgbGV0IHRoZSB1c2VyXG4vLyBjb25maWd1cmUgaXQuXG5jb25zdCBLZXlNYXBwaW5nID0ge1xuICAgIEtleVc6ICAgICAgIEFjdGlvbi5VUCxcbiAgICBLZXlTOiAgICAgICBBY3Rpb24uRE9XTixcbiAgICBLZXlBOiAgICAgICBBY3Rpb24uTEVGVCxcbiAgICBLZXlEOiAgICAgICBBY3Rpb24uUklHSFQsXG4gICAgQXJyb3dVcDogICAgQWN0aW9uLlVQLFxuICAgIEFycm93RG93bjogIEFjdGlvbi5ET1dOLFxuICAgIEFycm93TGVmdDogIEFjdGlvbi5MRUZULFxuICAgIEFycm93UmlnaHQ6IEFjdGlvbi5SSUdIVCxcbiAgICBTcGFjZTogICAgICBBY3Rpb24uSlVNUCxcbiAgICBFc2NhcGU6ICAgICBBY3Rpb24uUEFVU0UsXG4gICAgRW50ZXI6ICAgICAgQWN0aW9uLlJFU1VNRVxufTtcblxuZXhwb3J0IGNvbnN0IElucHV0ID0ge1xuICAgIEFjdGlvbixcbiAgICBLZXlNYXBwaW5nLFxuXG4gICAgaW5pdCgpIHtcbiAgICAgICAgLy8gSW5wdXQgYnVmZmVyIC0gbmV3IGtleXByZXNzIGV2ZW50cyBnbyBpbnRvIHRoaXMgYnVmZmVyIHRvIGJlIGhhbmRsZWRcbiAgICAgICAgLy8gZHVyaW5nIHRoZSBnYW1lJ3MgdXBkYXRlIGxvb3AuIEl0J3MgdXAgdG8gdGhlIGB1cGRhdGUoKWAgbWV0aG9kcyB0byBjb25zdW1lXG4gICAgICAgIC8vIGtleSBwcmVzc2VzIGFuZCByZW1vdmUgdGhlbSBmcm9tIHRoZSBidWZmZXIuXG4gICAgICAgIHRoaXMuYnVmZmVyID0gW107XG5cbiAgICAgICAgLy8gSW5wdXQgaGlzdG9yeSAtIGhpc3RvcnkgY29udGFpbnMgcmVjZW50IGtleSBwcmVzcyBldmVudHMgaW4gb3JkZXIsXG4gICAgICAgIC8vIHJlbW92ZWQgYXV0b21hdGljYWxseSBhZnRlciBhIGZldyBzZWNvbmRzLiBUaGlzIGlzIHVzZWZ1bCBmb3IgZGV0ZWN0aW5nXG4gICAgICAgIC8vIGlucHV0cyBsaWtlIGNoZWF0IGNvZGVzLCBmb3IgZXhhbXBsZS5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gKEFjdHVhbGx5LCBjaGVhdCBjb2RlcyBpcyB0aGUgb25seSB1c2UgZm9yIHRoaXMgZXh0cmEgaGlzdG9yeSBidWZmZXIsIHNvXG4gICAgICAgIC8vIGlmIHlvdSBkaWRuJ3Qgc3VwcG9ydCBjaGVhdCBjb2RlcyB5b3UgY291bGQgZGVsZXRlIGl0IGFsdG9nZXRoZXIuKVxuICAgICAgICB0aGlzLmhpc3RvcnkgPSBbXTtcblxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGV2ZW50ID0+IHtcbiAgICAgICAgICAgIGxldCBlbnRyeSA9IHtcbiAgICAgICAgICAgICAgICBhdDogbmV3IERhdGUoKS5nZXRUaW1lKCksXG4gICAgICAgICAgICAgICAga2V5OiBldmVudC5rZXksXG4gICAgICAgICAgICAgICAgY29kZTogZXZlbnQuY29kZSxcbiAgICAgICAgICAgICAgICBhY3Rpb246IElucHV0LktleU1hcHBpbmdbZXZlbnQuY29kZV0gfHwgSW5wdXQuQWN0aW9uLlNUT1BcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBJbnB1dC5idWZmZXIucHVzaChlbnRyeSk7XG4gICAgICAgICAgICBJbnB1dC5oaXN0b3J5LnB1c2goZW50cnkpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coZW50cnkpO1xuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgdXBkYXRlKCkge1xuICAgICAgICBsZXQgbm93ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICAgIHRoaXMuaGlzdG9yeSA9IHRoaXMuaGlzdG9yeS5maWx0ZXIoZW50cnkgPT4gZW50cnkuYXQgPiBub3cgLSAzMDAwKTtcbiAgICB9LFxuXG4gICAgbGFzdEtleSgpIHtcbiAgICAgICAgLy8gQSBzaG9ydGN1dCBoZWxwZXIgZm9yIGNvZGUgdGhhdCBjYXJlcyBhYm91dCB3aGF0IEtFWSB3YXMgcHJlc3NlZC5cbiAgICAgICAgcmV0dXJuIHRoaXMuYnVmZmVyLmxlbmd0aCA+IDAgPyB0aGlzLmJ1ZmZlclt0aGlzLmJ1ZmZlci5sZW5ndGggLSAxXS5rZXkgOiAnJztcbiAgICB9LFxuXG4gICAgbGFzdEFjdGlvbigpIHtcbiAgICAgICAgLy8gQSBzaG9ydGN1dCBoZWxwZXIgZm9yIGNvZGUgdGhhdCBjYXJlcyBhYm91dCB3aGF0IEFDVElPTiB3YXMgdGFrZW4uXG4gICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlci5sZW5ndGggPiAwID8gdGhpcy5idWZmZXJbdGhpcy5idWZmZXIubGVuZ3RoIC0gMV0uYWN0aW9uIDogdW5kZWZpbmVkO1xuICAgIH0sXG5cbiAgICBjb25zdW1lKGNsZWFySGlzdG9yeSkge1xuICAgICAgICB0aGlzLmJ1ZmZlciA9IFtdO1xuXG4gICAgICAgIC8vIE5vcm1hbGx5LCBcImNvbnN1bWluZ1wiIGFsbCBleGlzdGluZyBidWZmZXIgaW5wdXQgaXMgc29tZXRoaW5nIHRoYXQgaGFwcGVuc1xuICAgICAgICAvLyBzb21ld2hlcmUgaW4gdGhlIGdhbWUgbG9naWMuIElmIHdlIGp1c3QgZGV0ZWN0ZWQgYW5kIGFjdGVkIG9uIGEgY2hlYXQgY29kZSxcbiAgICAgICAgLy8gdGhvdWdoLCB3ZSB3YW50IHRvIGNsZWFyIHRoZSBoaXN0b3J5IHRvbywgb3RoZXJ3aXNlIHdlJ2xsIGp1c3Qga2VlcCBiZWhhdmluZ1xuICAgICAgICAvLyBsaWtlIHRoZSB1c2VyIGlzIGVudGVyaW5nIHRoZSBjaGVhdCBjb2RlIGV2ZXJ5IGZyYW1lLlxuICAgICAgICBpZiAoY2xlYXJIaXN0b3J5KSB0aGlzLmhpc3RvcnkgPSBbXTtcbiAgICB9XG59XG4iLCIvKipcbiAqIGBUZXh0YCBpcyBhIHNpbmdsZXRvbiByZXNwb25zaWJsZSBmb3IgZHJhd2luZyB0ZXh0IGNoYXJhY3RlcnMgb24gdGhlIHZpZXdwb3J0LiBUaGlzXG4gKiBnYW1lIHVzZXMgYSBjdXN0b20gcGl4ZWwgZm9udCwgc28gd2UgbmVlZCB0byBpbXBsZW1lbnQgc29tZSBiYXNpYyB0ZXh0IGhhbmRsaW5nXG4gKiAoc3BsaXR0aW5nIGxvbmcgbGluZXMsIG1lYXN1cmluZyBjaGFyYWN0ZXIgd2lkdGgsIGV0Yy4pIG91cnNlbHZlcy5cbiAqL1xuXG5pbXBvcnQgeyBTcHJpdGUgfSBmcm9tICcuL1Nwcml0ZSc7XG5pbXBvcnQgeyByZ2JhLCBjcmVhdGVDYW52YXMgfSBmcm9tICcuL1V0aWwnO1xuaW1wb3J0IHsgQ0hBUl9XSURUSCwgQ0hBUl9IRUlHSFQsIENIQVJTSEVFVF9XSURUSCwgU0NSRUVOX1NDQUxFIH0gZnJvbSAnLi9Db25zdGFudHMnO1xuXG4vLyBJbiBvdXIgY2hhcmFjdGVyIHNoZWV0LCBjaGFycyAweDAwLTB4N0YgYXJlIHN0YW5kYXJkIEFTQ0lJLCBiZWxvdyB0aGF0IHdlIHB1dCB3aGF0ZXZlclxuLy8gY2hhcmFjdGVycyBhcmUgY29udmVuaWVudCBmb3IgdXMuIEhlcmUgd2UgY2FuIGNob29zZSB0byBtYXAgdW5pY29kZSBjaGFyYWN0ZXJzIHRvIHBvc2l0aW9uc1xuLy8gMHg4MCsgaW4gdGhlIGNoYXJzaGVldCwgbWFraW5nIGl0IGVhc3kgZm9yIHVzIHRvIHJlbmRlciB0aGluZ3MgbGlrZSBzcGVjaWFsIGNoYXJhY3RlcnMsXG4vLyBib3ggZHJhd2luZyBjaGFyYWN0ZXJzLCBldGMuXG4vL1xuLy8gTm90ZTogSSBsaWtlIHBhc3RpbmcgYWN0dWFsIGNoYXJhY3RlcnMgaW5zdGVhZCBvZiBjb2RlcyAoXCLilJxcIiBpbnN0ZWFkIG9mIFwiXFx1MjUxQ1wiKS4gSWYgeW91XG4vLyBkbyB0aGlzLCBkb24ndCBmb3JnZXQgdG8gZXhwbGljaXRseSB0ZWxsIHRoZSBicm93c2VyIHdoYXQgY2hhcnNldCB5b3VyIEpTIGZpbGUgaXMsIG9yIGl0XG4vLyB3b24ndCBleGVjdXRlIC0tIHNlZSBgaW5kZXguaHRtbGAgZm9yIGFuIGV4YW1wbGUuXG5jb25zdCBTVVBQT1JURURfVU5JQ09ERV9DSEFSUyA9IFtcbiAgICAn4pSA4pSC4pSM4pSQ4pSU4pSY4pSc4pSk4pSs4pS04pS84pWz4pWz4pWz4pWz4pWzJyxcbiAgICAn4pWQ4pWR4pWU4pWX4pWa4pWd4pWg4pWj4pWm4pWp4pWs4pWz4pWz4pWz4pWz4pWzJyxcbiAgICAn4oaR4oaT4oaQ4oaS4pWz4pWz4pWz4pWz4pWz4pWz4pWz4pWz4pWz4pWz4pWz4pWzJ1xuXS5qb2luKCcnKTtcblxuY29uc3QgVU5JQ09ERV9DSEFSX01BUCA9IFNVUFBPUlRFRF9VTklDT0RFX0NIQVJTLnNwbGl0KCcnKS5yZWR1Y2UoKG1hcCwgY2hhciwgaWR4KSA9PiB7XG4gICAgbWFwW2NoYXJdID0gMHg4MCArIGlkeDtcbiAgICByZXR1cm4gbWFwO1xufSwge30pO1xuXG4vKipcbiAqIFRleHRcbiAqXG4gKiBVdGlsaXRpZXMgZm9yIGRyYXdpbmcgdGV4dCB1c2luZyBpbi1nYW1lIHBpeGVsIGZvbnQuXG4gKi9cbmV4cG9ydCBjb25zdCBUZXh0ID0ge1xuICAgIGluaXQoKSB7XG4gICAgICAgIC8vIFRoZSBcIndoaXRlXCIgZm9udCBzaGVldCwgcmlnaHQgZnJvbSB0aGUgc3ByaXRlLlxuICAgICAgICBUZXh0LndoaXRlID0geyBpbWc6IFNwcml0ZS5mb250LmltZywgc2NhbGU6IDEsIGJvcmRlcjogMCwgbWFyZ2luOiAwIH07XG5cbiAgICAgICAgLy8gUmVjb2xvcmVkIHZlcnNpb25zIG9mIHRoZSBvcmlnaW5hbCBmb250IHNoZWV0LCB0byB1c2Ugd2hlbiBjb25zdHJ1Y3Rpbmcgb3VyIGdsb3cuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIFRoZSBjb2xvciBoZXJlIGlzICMzM0ZGMDAgd2hpY2ggaXMgcm91Z2hseSB0aGUgZ2xvdyBvZiB0aGUgS2F5cHJvIElJLlxuICAgICAgICBUZXh0LnRlcm1pbmFsID0gcmVjb2xvcihUZXh0LndoaXRlLCByZ2JhKDUxICsgMTYsIDI1NSwgMCArIDE2LCAxKSk7XG4gICAgICAgIFRleHQudGVybWluYWxfc2hhZG93ID0gcmVjb2xvcihUZXh0LndoaXRlLCByZ2JhKDUxLCAyNTUsIDAsIDAuNCkpO1xuXG4gICAgICAgIC8vIFwiR2xvd2luZ1wiIGEgYnVuY2ggb2YgY2hhcmFjdGVycyBvbi1zY3JlZW4gaXMganVzdCB0b28gc2xvdyB3aGVuIHlvdSdyZSBkb2luZyA1XG4gICAgICAgIC8vIGRyYXcgY2FsbHMgZm9yIGV2ZXJ5IGluZGl2aWR1YWwgY2hhcmFjdGVyLiBUbyBhdm9pZCB0aGF0LCB3ZSBjYW4gYnVpbGQgYSBuZXdcbiAgICAgICAgLy8gc3ByaXRlIHNoZWV0IHRoYXQgaXMgcHJlLXNjYWxlZCB3aXRoIHRoZSBnbG93IGJ1aWx0IGluLlxuICAgICAgICBUZXh0Lmdsb3cgPSBiYWtlRm9udEdsb3coVGV4dC50ZXJtaW5hbCwgVGV4dC50ZXJtaW5hbF9zaGFkb3csIFNDUkVFTl9TQ0FMRSwgMiwgMik7XG4gICAgfSxcblxuICAgIGRyYXdUZXh0KGN0eCwgdGV4dCwgdSwgdiwgZm9udCA9IFRleHQudGVybWluYWwpIHtcbiAgICAgICAgLy8gVGhlIG1hdGggZ3ltbmFzdGljcyBhcmUgYSBsaXR0bGUgaGFyZCB0byByZWFkIChhcG9sb2dpZXMpLiBUbyByZW5kZXIgdGhlXG4gICAgICAgIC8vIGZvbnQgYXNrZWQgZm9yIGNvcnJlY3RseSwgd2UgbmVlZCB0byBoYXZlIHRoZSBmb250IHNoZWV0IGltYWdlLCB0aGUgc2NhbGUsXG4gICAgICAgIC8vIHRoZSBib3JkZXIgYW5kIHRoZSBtYXJnaW4uXG4gICAgICAgIC8vXG4gICAgICAgIC8vIFRoZSBcInNjYWxlXCIgaW5mb3JtcyB1cyB3aGF0IFBSRVNDQUxJTkcgaXMgYXBwbGllZCB0byB0aGUgZm9udCBzaGVldCwgc29cbiAgICAgICAgLy8gd2Uga25vdyBob3cgYmlnIHRvIHJlbmRlciBpdCAod2UgZG9uJ3QgZG8gYWRkaXRpb25hbCBzY2FsaW5nIGhlcmUpLlxuICAgICAgICAvL1xuICAgICAgICAvLyBUaGUgXCJib3JkZXJcIiB0ZWxscyB1cyBob3cgbWFueSBQUkUtU0NBTEUgcGl4ZWxzIG9mIGJvcmRlciBleGlzdCBpbiB0aGlzXG4gICAgICAgIC8vIGltYWdlLiBBIGJvcmRlciBvZiAyIG1lYW5zIGEgdG90YWwgb2YgMiBwaXhlbHMgKHNvIDEgb24gZXZlcnkgc2lkZSkgd2VyZVxuICAgICAgICAvLyB1c2VkLiBUaGlzIGlzIHByZS1zY2FsZSwgc28gaWYgdGhlIHNjYWxlIGlzIDQsIHRoYXQgbWVhbnMgdGhlcmUgYXJlIDQgcGl4ZWxzXG4gICAgICAgIC8vIG9mIFwic3BhY2VcIiBhcm91bmQgZWFjaCBjaGFyYWN0ZXIgaW4gdGhlIGZvbnQgc2hlZXQuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIFRoZSBcIm1hcmdpblwiIHRlbGxzIHVzIGhvdyBtYW55IFBPU1QtU0NBTEUgcGl4ZWxzIG9mIG1hcmdpbiBleGlzdCAoaW4gcHJhY3RpY2VcbiAgICAgICAgLy8gdGhpcyBtZWFucywgaG93IG1hbnkgcGl4ZWxzIG9mIGdsb3cgc3Vycm91bmQgdGhlIGNoYXJhY3RlcikuIFlvdSB3YW50IHRvIHN1YnRyYWN0XG4gICAgICAgIC8vIHRoaXMgbWFyZ2luIHdoZW4gcmVuZGVyaW5nIHRoZSBjaGFyYWN0ZXIgc28gdGhlIGNoYXJhY3RlciBib2R5IGlzIGluIHRoZSBleHBlY3RlZFxuICAgICAgICAvLyBzcG90IG9uIHNjcmVlbi5cbiAgICAgICAgbGV0IHsgaW1nLCBzY2FsZSwgYm9yZGVyLCBtYXJnaW4gfSA9IGZvbnQ7XG5cbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodGV4dCkpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGJsb2NrIG9mIHRleHQpIHtcbiAgICAgICAgICAgICAgICBUZXh0LmRyYXdUZXh0KGN0eCwgYmxvY2sudGV4dCwgdSArIGJsb2NrLnUgKiBzY2FsZSwgdiArIGJsb2NrLnYgKiBzY2FsZSwgZm9udCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGxldCBpZHggPSAwOyBpZHggPCB0ZXh0Lmxlbmd0aDsgaWR4KyspIHtcbiAgICAgICAgICAgIGxldCBjID0gVU5JQ09ERV9DSEFSX01BUFt0ZXh0W2lkeF1dIHx8IHRleHQuY2hhckNvZGVBdChpZHgpO1xuICAgICAgICAgICAgbGV0IGsgPSAoYyAtIDApICogKENIQVJfV0lEVEggKyBib3JkZXIpO1xuICAgICAgICAgICAgbGV0IGRyYXdhYmxlID0gKGMgIT09IDMyKTtcblxuICAgICAgICAgICAgLy8gV2UgY2xlYXIgdGhlIGNhbnZhcyBpbiBldmVyeSBmcmFtZSwgYW5kIGl0J3MgYSBIVUdFIHNwZWVkIGFkdmFudGFnZSBub3QgdG8gZHJhdyBhblxuICAgICAgICAgICAgLy8gZW1wdHkgaW1hZ2UgKHRoaXMgY2hlY2sgY2FuIHNhdmUgMTAwMCsgZHJhd0ltYWdlIGNhbGxzIGEgZnJhbWUpLlxuICAgICAgICAgICAgaWYgKGRyYXdhYmxlKSB7XG4gICAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShcbiAgICAgICAgICAgICAgICAgICAgaW1nLFxuICAgICAgICAgICAgICAgICAgICAoayAqIHNjYWxlKSAlIGltZy53aWR0aCxcbiAgICAgICAgICAgICAgICAgICAgTWF0aC5mbG9vcigoayAqIHNjYWxlKSAvIChpbWcud2lkdGgpKSAqIChDSEFSX0hFSUdIVCArIGJvcmRlcikgKiBzY2FsZSxcbiAgICAgICAgICAgICAgICAgICAgQ0hBUl9XSURUSCAqIHNjYWxlLFxuICAgICAgICAgICAgICAgICAgICBDSEFSX0hFSUdIVCAqIHNjYWxlLFxuICAgICAgICAgICAgICAgICAgICB1ICsgbWFyZ2luLFxuICAgICAgICAgICAgICAgICAgICB2ICsgbWFyZ2luLFxuICAgICAgICAgICAgICAgICAgICBDSEFSX1dJRFRIICogc2NhbGUsXG4gICAgICAgICAgICAgICAgICAgIENIQVJfSEVJR0hUICogc2NhbGVcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdSArPSBDSEFSX1dJRFRIICogc2NhbGU7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgbWVhc3VyZVdpZHRoKHRleHQsIHNjYWxlID0gMSkge1xuICAgICAgICByZXR1cm4gdGV4dC5zcGxpdCgnJykucmVkdWNlKChzdW0sIGMpID0+IHN1bSArIENIQVJfV0lEVEgsIDApICogc2NhbGU7XG4gICAgfSxcblxuICAgIHNwbGl0UGFyYWdyYXBoKHRleHQsIHcsIGgpIHtcbiAgICAgICAgbGV0IGN1ID0gMCwgY3YgPSAwO1xuICAgICAgICBsZXQgbmV4dCA9ICgpID0+ICh7IHRleHQ6ICcnLCB1OiBjdSwgdjogY3YgfSk7XG4gICAgICAgIGxldCB3aXAgPSBuZXh0KCk7XG4gICAgICAgIGxldCBsaXN0ID0gW107XG5cbiAgICAgICAgZm9yIChsZXQgYyBvZiB0ZXh0LnNwbGl0KCcnKSkge1xuICAgICAgICAgICAgbGV0IGNXaWR0aCA9IFRleHQubWVhc3VyZVdpZHRoKGMsIDEpO1xuICAgICAgICAgICAgaWYgKGMgPT09ICdcXG4nIHx8IGN1ICsgY1dpZHRoID4gdykge1xuICAgICAgICAgICAgICAgIGxldCBzYXZlZCA9ICcnO1xuICAgICAgICAgICAgICAgIGlmIChjICE9PSAnXFxuJyAmJiBjICE9PSAnICcpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHNwYWNlID0gd2lwLnRleHQuc3BsaXQoJyAnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNwYWNlLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNhdmVkID0gc3BhY2UucG9wKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aXAudGV4dCA9IHNwYWNlLmpvaW4oJyAnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAod2lwLnRleHQubGVuZ3RoID4gMCkgbGlzdC5wdXNoKHdpcCk7XG4gICAgICAgICAgICAgICAgY3UgPSAwO1xuICAgICAgICAgICAgICAgIGN2ICs9IChDSEFSX0hFSUdIVCk7XG4gICAgICAgICAgICAgICAgd2lwID0gbmV4dCgpO1xuICAgICAgICAgICAgICAgIGlmIChzYXZlZC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHdpcC50ZXh0ID0gc2F2ZWQ7XG4gICAgICAgICAgICAgICAgICAgIGN1ICs9IFRleHQubWVhc3VyZVdpZHRoKHdpcC50ZXh0LCAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGN1ICs9IGNXaWR0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjICE9PSAnXFxuJykge1xuICAgICAgICAgICAgICAgIHdpcC50ZXh0ID0gd2lwLnRleHQgKyBjO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHdpcC50ZXh0Lmxlbmd0aCA+IDApIGxpc3QucHVzaCh3aXApO1xuXG4gICAgICAgIHJldHVybiBsaXN0Lm1hcChsaW5lID0+ICh7XG4gICAgICAgICAgICAuLi5saW5lLFxuICAgICAgICAgICAgdzogVGV4dC5tZWFzdXJlV2lkdGgobGluZS50ZXh0LCAxKSxcbiAgICAgICAgICAgIGg6IENIQVJfSEVJR0hUXG4gICAgICAgIH0pKTtcbiAgICB9XG59O1xuXG4vLyBUZXh0IHV0aWxpdHkgZnVuY3Rpb25zLCBmb3IgbWFuaXB1bGF0aW5nIHRoZSBmb250IHNoZWV0IGltYWdlc1xuXG5mdW5jdGlvbiByZWNvbG9yKGZvbnQsIGNvbG9yKSB7XG4gICAgbGV0IGNhbnZhcyA9IGNyZWF0ZUNhbnZhcyhmb250LmltZy53aWR0aCwgZm9udC5pbWcuaGVpZ2h0KTtcbiAgICBjYW52YXMuY3R4LmZpbGxTdHlsZSA9IGNvbG9yO1xuICAgIGNhbnZhcy5jdHguZmlsbFJlY3QoMCwgMCwgZm9udC5pbWcud2lkdGgsIGZvbnQuaW1nLmhlaWdodCk7XG4gICAgY2FudmFzLmN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAnZGVzdGluYXRpb24taW4nO1xuICAgIGNhbnZhcy5jdHguZHJhd0ltYWdlKGZvbnQuaW1nLCAwLCAwKTtcblxuICAgIC8vIFJldHVybiBhIG5ldyBmb250IHdpdGggdGhlIHNhbWUgbWV0YWRhdGEsIGJ1dCBhIHJlY29sb3JlZCBpbWFnZVxuICAgIHJldHVybiB7XG4gICAgICAgIC4uLmZvbnQsXG4gICAgICAgIGltZzogY2FudmFzLmNhbnZhc1xuICAgIH07XG59XG5cbmZ1bmN0aW9uIGJha2VGb250R2xvdyhmb250LCBnbG93LCBzY2FsZSwgYm9yZGVyLCBtYXJnaW4pIHtcbiAgICAvLyBUaGlzIGZ1bmN0aW9uIGlzIGEgbGl0dGxlIGNvbXBsaWNhdGVkIGJlY2F1c2UgaXQgaGFzIHRvIGRvIHNldmVyYWwgdGhpbmdzIGF0IG9uY2UuXG4gICAgLy9cbiAgICAvLyBUaGUgaWRlYSBpczpcbiAgICAvLyAgLSBUYWtlIG91ciBvcmlnaW5hbCBzaGVldCBvZiA4eDE2IGNoYXJhY3RlcnNcbiAgICAvLyAgLSBCdWlsZCBhIE5FVyBzaGVldCwgd2l0aCBhZGRpdGlvbmFsIFwiYm9yZGVyXCIgYXJvdW5kIGVhY2ggY2hhcmFjdGVyLCBzbyB0aGF0IHRoZXJlIGlzXG4gICAgLy8gICAgcm9vbSBmb3IgdXMgdG8gYWRkIGEgZ2xvdyBhcm91bmQgZWFjaCBjaGFyYWN0ZXIgd2l0aG91dCBibGVlZGluZyBpbnRvIG91ciBuZWlnaGJvcnMuXG4gICAgLy8gIC0gV2Ugd2FudCB0aGUgZ2xvdyBiYWtlZCBpbiBhdCBhbiB1cHNjYWxlZCBwaXhlbCBzaXplLlxuICAgIC8vXG4gICAgLy8gV2hhdCBpcyB0aGUgdXBzY2FsZWQgcGl4ZWwgc2l6ZT8gSGVyZSBmb3IgZXhhbXBsZSwgd2UgYXJlIHNjYWxpbmcgdXAgZnJvbSA4eDE2IHBpeGVsc1xuICAgIC8vIHRvIDMyeDY0IHBpeGVscyBmb3IgZWFjaCBjaGFyYWN0ZXJzLiBXZSB0aGVuIHdhbnQgdGhlIEdMT1cgYWRkZWQgYXJvdW5kIHRoaXMgbmV3XG4gICAgLy8gMzJ4NjQgY2hhcmFjdGVyLCBub3QgdGhlIG9yaWdpbmFsIHNpemUgKHRoaXMgYWxsb3dzIHVzIHRvIGhhdmUgYSBnbG93IG1vcmUgdGlnaHQgdGhhblxuICAgIC8vIHRoZSBvcmlnaW5hbCBjaHVua3kgcGl4ZWxzIHdlIHN0YXJ0ZWQgd2l0aCkuXG4gICAgLy9cbiAgICAvLyBBIGNvbXBsaWNhdGlvbiBvZiBIVE1MIENhbnZhcyBpcyB0aGF0IGlmIHlvdSBkcmF3IGZyb20gYSBzb3VyY2UgY2FudmFzIGludG8gYSBkZXN0aW5hdGlvblxuICAgIC8vIGNhbnZhcyBhdCBhIGhpZ2hlciBzY2FsZSwgeW91IHdpbGwgXCJibGVlZFwiIG5laWdoYm9yaW5nIHBpeGVscyBmcm9tIHRoZSBzb3VyY2UgY2FudmFzLlxuICAgIC8vIFRvIGF2b2lkIHRoaXMsIHdlIHVzZSBhIHNlY29uZCB0ZW1wb3JhcnkgY2FudmFzIGFuZCBkcmF3IGZyb20gdGhlIHNvdXJjZSBpbnRvIHRoZSB0ZW1wb3JhcnlcbiAgICAvLyBjYW52YXMgd2l0aCBubyB1cHNjYWxpbmcsIHRoZW4gd2UgZHJhdyBmcm9tIHRoZSB0ZW1wb3JhcnkgY2FudmFzIGludG8gdGhlIHVwc2NhbGVkIGNhbnZhcy5cbiAgICAvL1xuICAgIC8vIChUaGlzIG1lYW5zIGRvdWJsZSB0aGUgZHJhd3MsIGJ1dCB3ZSBvbmx5IGRvIHRoaXMgc3RlcCBvbmNlIHdoZW4gdGhlIGdhbWUgbG9hZHMsIHNvIGl0J3NcbiAgICAvLyBub3QgYSBiaWcgZGVhbC4pXG4gICAgbGV0IGNvbHMgPSBmb250LmltZy53aWR0aCAvIENIQVJfV0lEVEgsIHJvd3MgPSBmb250LmltZy5oZWlnaHQgLyBDSEFSX0hFSUdIVDtcblxuICAgIGxldCB0ZW1wID0gY3JlYXRlQ2FudmFzKENIQVJfV0lEVEgsIENIQVJfSEVJR0hUKTtcbiAgICBsZXQgY2FudmFzID0gY3JlYXRlQ2FudmFzKFxuICAgICAgICBjb2xzICogKENIQVJfV0lEVEggKyBib3JkZXIpICogc2NhbGUsXG4gICAgICAgIHJvd3MgKiAoQ0hBUl9IRUlHSFQgKyBib3JkZXIpICogc2NhbGVcbiAgICApXG5cbiAgICBmb3IgKGxldCB5ID0gMDsgeSA8IHJvd3M7IHkrKykge1xuICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IGNvbHM7IHgrKykge1xuICAgICAgICAgICAgLy8gR2xvdyAocmVuZGVyZWQgb24gYWxsIDQgc2lkZXMpXG4gICAgICAgICAgICB0ZW1wLmN0eC5jbGVhclJlY3QoMCwgMCwgQ0hBUl9XSURUSCwgQ0hBUl9IRUlHSFQpO1xuICAgICAgICAgICAgdGVtcC5jdHguZHJhd0ltYWdlKFxuICAgICAgICAgICAgICAgIGdsb3cuaW1nLFxuICAgICAgICAgICAgICAgIHggKiBDSEFSX1dJRFRILFxuICAgICAgICAgICAgICAgIHkgKiBDSEFSX0hFSUdIVCxcbiAgICAgICAgICAgICAgICBDSEFSX1dJRFRILFxuICAgICAgICAgICAgICAgIENIQVJfSEVJR0hULFxuICAgICAgICAgICAgICAgIDAsIDAsXG4gICAgICAgICAgICAgICAgQ0hBUl9XSURUSCxcbiAgICAgICAgICAgICAgICBDSEFSX0hFSUdIVFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGNhbnZhcy5jdHguZHJhd0ltYWdlKFxuICAgICAgICAgICAgICAgIHRlbXAuY2FudmFzLFxuICAgICAgICAgICAgICAgIDAsIDAsXG4gICAgICAgICAgICAgICAgQ0hBUl9XSURUSCxcbiAgICAgICAgICAgICAgICBDSEFSX0hFSUdIVCxcbiAgICAgICAgICAgICAgICB4ICogKENIQVJfV0lEVEggKyBib3JkZXIpICogc2NhbGUgKyBtYXJnaW4sXG4gICAgICAgICAgICAgICAgeSAqIChDSEFSX0hFSUdIVCArIGJvcmRlcikgKiBzY2FsZSxcbiAgICAgICAgICAgICAgICBDSEFSX1dJRFRIICogc2NhbGUsXG4gICAgICAgICAgICAgICAgQ0hBUl9IRUlHSFQgKiBzY2FsZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGNhbnZhcy5jdHguZHJhd0ltYWdlKFxuICAgICAgICAgICAgICAgIHRlbXAuY2FudmFzLFxuICAgICAgICAgICAgICAgIDAsIDAsXG4gICAgICAgICAgICAgICAgQ0hBUl9XSURUSCxcbiAgICAgICAgICAgICAgICBDSEFSX0hFSUdIVCxcbiAgICAgICAgICAgICAgICB4ICogKENIQVJfV0lEVEggKyBib3JkZXIpICogc2NhbGUsXG4gICAgICAgICAgICAgICAgeSAqIChDSEFSX0hFSUdIVCArIGJvcmRlcikgKiBzY2FsZSArIG1hcmdpbixcbiAgICAgICAgICAgICAgICBDSEFSX1dJRFRIICogc2NhbGUsXG4gICAgICAgICAgICAgICAgQ0hBUl9IRUlHSFQgKiBzY2FsZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGNhbnZhcy5jdHguZHJhd0ltYWdlKFxuICAgICAgICAgICAgICAgIHRlbXAuY2FudmFzLFxuICAgICAgICAgICAgICAgIDAsIDAsXG4gICAgICAgICAgICAgICAgQ0hBUl9XSURUSCxcbiAgICAgICAgICAgICAgICBDSEFSX0hFSUdIVCxcbiAgICAgICAgICAgICAgICB4ICogKENIQVJfV0lEVEggKyBib3JkZXIpICogc2NhbGUgKyBtYXJnaW4gKiAyLFxuICAgICAgICAgICAgICAgIHkgKiAoQ0hBUl9IRUlHSFQgKyBib3JkZXIpICogc2NhbGUgKyBtYXJnaW4sXG4gICAgICAgICAgICAgICAgQ0hBUl9XSURUSCAqIHNjYWxlLFxuICAgICAgICAgICAgICAgIENIQVJfSEVJR0hUICogc2NhbGVcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjYW52YXMuY3R4LmRyYXdJbWFnZShcbiAgICAgICAgICAgICAgICB0ZW1wLmNhbnZhcyxcbiAgICAgICAgICAgICAgICAwLCAwLFxuICAgICAgICAgICAgICAgIENIQVJfV0lEVEgsXG4gICAgICAgICAgICAgICAgQ0hBUl9IRUlHSFQsXG4gICAgICAgICAgICAgICAgeCAqIChDSEFSX1dJRFRIICsgYm9yZGVyKSAqIHNjYWxlICsgbWFyZ2luLFxuICAgICAgICAgICAgICAgIHkgKiAoQ0hBUl9IRUlHSFQgKyBib3JkZXIpICogc2NhbGUgKyBtYXJnaW4gKiAyLFxuICAgICAgICAgICAgICAgIENIQVJfV0lEVEggKiBzY2FsZSxcbiAgICAgICAgICAgICAgICBDSEFSX0hFSUdIVCAqIHNjYWxlXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAvLyBDZW50ZXIgY2hhcmFjdGVyXG4gICAgICAgICAgICB0ZW1wLmN0eC5jbGVhclJlY3QoMCwgMCwgQ0hBUl9XSURUSCwgQ0hBUl9IRUlHSFQpO1xuICAgICAgICAgICAgdGVtcC5jdHguZHJhd0ltYWdlKFxuICAgICAgICAgICAgICAgIGZvbnQuaW1nLFxuICAgICAgICAgICAgICAgIHggKiBDSEFSX1dJRFRILFxuICAgICAgICAgICAgICAgIHkgKiBDSEFSX0hFSUdIVCxcbiAgICAgICAgICAgICAgICBDSEFSX1dJRFRILFxuICAgICAgICAgICAgICAgIENIQVJfSEVJR0hULFxuICAgICAgICAgICAgICAgIDAsIDAsXG4gICAgICAgICAgICAgICAgQ0hBUl9XSURUSCxcbiAgICAgICAgICAgICAgICBDSEFSX0hFSUdIVFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGNhbnZhcy5jdHguZHJhd0ltYWdlKFxuICAgICAgICAgICAgICAgIHRlbXAuY2FudmFzLFxuICAgICAgICAgICAgICAgIDAsIDAsXG4gICAgICAgICAgICAgICAgQ0hBUl9XSURUSCxcbiAgICAgICAgICAgICAgICBDSEFSX0hFSUdIVCxcbiAgICAgICAgICAgICAgICB4ICogKENIQVJfV0lEVEggKyBib3JkZXIpICogc2NhbGUgKyBtYXJnaW4sXG4gICAgICAgICAgICAgICAgeSAqIChDSEFSX0hFSUdIVCArIGJvcmRlcikgKiBzY2FsZSArIG1hcmdpbixcbiAgICAgICAgICAgICAgICBDSEFSX1dJRFRIICogc2NhbGUsXG4gICAgICAgICAgICAgICAgQ0hBUl9IRUlHSFQgKiBzY2FsZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7IGltZzogY2FudmFzLmNhbnZhcywgc2NhbGUsIGJvcmRlciwgbWFyZ2luIH07XG59XG4iLCIvLyB6emZ4KCkgLSB0aGUgdW5pdmVyc2FsIGVudHJ5IHBvaW50IC0tIHJldHVybnMgYSBBdWRpb0J1ZmZlclNvdXJjZU5vZGVcbmV4cG9ydCBjb25zdCB6emZ4PSguLi50KT0+enpmeFAoenpmeEcoLi4udCkpXG5cbi8vIHp6ZnhQKCkgLSB0aGUgc291bmQgcGxheWVyIC0tIHJldHVybnMgYSBBdWRpb0J1ZmZlclNvdXJjZU5vZGVcbmV4cG9ydCBjb25zdCB6emZ4UD0oLi4udCk9PntsZXQgZT16emZ4WC5jcmVhdGVCdWZmZXJTb3VyY2UoKSxmPXp6ZnhYLmNyZWF0ZUJ1ZmZlcih0Lmxlbmd0aCx0WzBdLmxlbmd0aCx6emZ4Uik7dC5tYXAoKGQsaSk9PmYuZ2V0Q2hhbm5lbERhdGEoaSkuc2V0KGQpKSxlLmJ1ZmZlcj1mLGUuY29ubmVjdCh6emZ4LmRlc3RpbmF0aW9uXyksZS5zdGFydCgpO3JldHVybiBlfVxuXG4vLyB6emZ4RygpIC0gdGhlIHNvdW5kIGdlbmVyYXRvciAtLSByZXR1cm5zIGFuIGFycmF5IG9mIHNhbXBsZSBkYXRhXG5leHBvcnQgY29uc3QgenpmeEc9KHE9MSxrPS4wNSxjPTIyMCxlPTAsdD0wLHU9LjEscj0wLEY9MSx2PTAsej0wLHc9MCxBPTAsbD0wLEI9MCx4PTAsRz0wLGQ9MCx5PTEsbT0wLEM9MCk9PntsZXQgYj0yKk1hdGguUEksSD12Kj01MDAqYi96emZ4UioqMixJPSgwPHg/MTotMSkqYi80LEQ9Yyo9KDErMiprKk1hdGgucmFuZG9tKCktaykqYi96emZ4UixaPVtdLGc9MCxFPTAsYT0wLG49MSxKPTAsSz0wLGY9MCxwLGg7ZT05OSt6emZ4UiplO20qPXp6ZnhSO3QqPXp6ZnhSO3UqPXp6ZnhSO2QqPXp6ZnhSO3oqPTUwMCpiL3p6ZnhSKiozO3gqPWIvenpmeFI7dyo9Yi96emZ4UjtBKj16emZ4UjtsPXp6ZnhSKmx8MDtmb3IoaD1lK20rdCt1K2R8MDthPGg7WlthKytdPWYpKytLJSgxMDAqR3wwKXx8KGY9cj8xPHI/MjxyPzM8cj9NYXRoLnNpbigoZyViKSoqMyk6TWF0aC5tYXgoTWF0aC5taW4oTWF0aC50YW4oZyksMSksLTEpOjEtKDIqZy9iJTIrMiklMjoxLTQqTWF0aC5hYnMoTWF0aC5yb3VuZChnL2IpLWcvYik6TWF0aC5zaW4oZyksZj0obD8xLUMrQypNYXRoLnNpbigyKk1hdGguUEkqYS9sKToxKSooMDxmPzE6LTEpKk1hdGguYWJzKGYpKipGKnEqenpmeFYqKGE8ZT9hL2U6YTxlK20/MS0oYS1lKS9tKigxLXkpOmE8ZSttK3Q/eTphPGgtZD8oaC1hLWQpL3UqeTowKSxmPWQ/Zi8yKyhkPmE/MDooYTxoLWQ/MTooaC1hKS9kKSpaW2EtZHwwXS8yKTpmKSxwPShjKz12Kz16KSpNYXRoLnNpbihFKngtSSksZys9cC1wKkIqKDEtMUU5KihNYXRoLnNpbihhKSsxKSUyKSxFKz1wLXAqQiooMS0xRTkqKE1hdGguc2luKGEpKioyKzEpJTIpLG4mJisrbj5BJiYoYys9dyxEKz13LG49MCksIWx8fCsrSiVsfHwoYz1ELHY9SCxuPW58fDEpO3JldHVybiBafVxuXG4vLyB6emZ4ViAtIGdsb2JhbCB2b2x1bWVcbmV4cG9ydCBjb25zdCB6emZ4Vj0uM1xuXG4vLyB6emZ4UiAtIGdsb2JhbCBzYW1wbGUgcmF0ZVxuZXhwb3J0IGNvbnN0IHp6ZnhSPTQ0MTAwXG5cbi8vIHp6ZnhYIC0gdGhlIGNvbW1vbiBhdWRpbyBjb250ZXh0XG5leHBvcnQgY29uc3QgenpmeFg9bmV3KHRvcC5BdWRpb0NvbnRleHR8fHdlYmtpdEF1ZGlvQ29udGV4dCk7XG5cbi8vIGRlc3RpbmF0aW9uIGZvciB6emZ4IGFuZCB6emZ4bSBzb3VuZHNcbnp6ZnguZGVzdGluYXRpb25fID0genpmeFguZGVzdGluYXRpb247XG4iLCIndXNlIHN0cmljdCc7XG5cbmltcG9ydCB7IHp6ZnhHLCB6emZ4UiB9IGZyb20gJy4venpmeCc7XG5cbi8qKlxuICogWnpGWCBNdXNpYyBSZW5kZXJlciB2Mi4wLjIgYnkgS2VpdGggQ2xhcmtcbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIENoYW5uZWxcbiAqIEB0eXBlIHtBcnJheS48TnVtYmVyPn1cbiAqIEBwcm9wZXJ0eSB7TnVtYmVyfSAwIC0gQ2hhbm5lbCBpbnN0cnVtZW50XG4gKiBAcHJvcGVydHkge051bWJlcn0gMSAtIENoYW5uZWwgcGFubmluZyAoLTEgdG8gKzEpXG4gKiBAcHJvcGVydHkge051bWJlcn0gMiAtIE5vdGVcbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIFBhdHRlcm5cbiAqIEB0eXBlIHtBcnJheS48Q2hhbm5lbD59XG4gKi9cblxuLyoqXG4gKiBAdHlwZWRlZiBJbnN0cnVtZW50XG4gKiBAdHlwZSB7QXJyYXkuPE51bWJlcj59IFp6Rlggc291bmQgcGFyYW1ldGVyc1xuICovXG5cbi8qKlxuICogR2VuZXJhdGUgYSBzb25nXG4gKlxuICogQHBhcmFtIHtBcnJheS48SW5zdHJ1bWVudD59IGluc3RydW1lbnRzIC0gQXJyYXkgb2YgWnpGWCBzb3VuZCBwYXJhbWF0ZXJzLlxuICogQHBhcmFtIHtBcnJheS48UGF0dGVybj59IHBhdHRlcm5zIC0gQXJyYXkgb2YgcGF0dGVybiBkYXRhLlxuICogQHBhcmFtIHtBcnJheS48TnVtYmVyPn0gc2VxdWVuY2UgLSBBcnJheSBvZiBwYXR0ZXJuIGluZGV4ZXMuXG4gKiBAcGFyYW0ge051bWJlcn0gW3NwZWVkPTEyNV0gLSBQbGF5YmFjayBzcGVlZCBvZiB0aGUgc29uZyAoaW4gQlBNKS5cbiAqIEByZXR1cm5zIHtBcnJheS48QXJyYXkuPE51bWJlcj4+fSBMZWZ0IGFuZCByaWdodCBjaGFubmVsIHNhbXBsZSBkYXRhLlxuICovXG5cbmV4cG9ydCBjb25zdCB6emZ4TSA9IChpbnN0cnVtZW50cywgcGF0dGVybnMsIHNlcXVlbmNlLCBCUE0gPSAxMjUpID0+IHtcbiAgICBsZXQgaW5zdHJ1bWVudFBhcmFtZXRlcnMsXG4gICAgICAgIGksXG4gICAgICAgIGosXG4gICAgICAgIGssXG4gICAgICAgIG5vdGUsXG4gICAgICAgIHNhbXBsZSxcbiAgICAgICAgcGF0dGVybkNoYW5uZWwsXG4gICAgICAgIG5vdEZpcnN0QmVhdCxcbiAgICAgICAgc3RvcCxcbiAgICAgICAgaW5zdHJ1bWVudCxcbiAgICAgICAgcGl0Y2gsXG4gICAgICAgIGF0dGVudWF0aW9uLFxuICAgICAgICBvdXRTYW1wbGVPZmZzZXQsXG4gICAgICAgIHNhbXBsZU9mZnNldCxcbiAgICAgICAgbmV4dFNhbXBsZU9mZnNldCxcbiAgICAgICAgc2FtcGxlQnVmZmVyID0gW10sXG4gICAgICAgIGxlZnRDaGFubmVsQnVmZmVyID0gW10sXG4gICAgICAgIHJpZ2h0Q2hhbm5lbEJ1ZmZlciA9IFtdLFxuICAgICAgICBjaGFubmVsSW5kZXggPSAwLFxuICAgICAgICBwYW5uaW5nLFxuICAgICAgICBoYXNNb3JlID0gMSxcbiAgICAgICAgc2FtcGxlQ2FjaGUgPSB7fSxcbiAgICAgICAgYmVhdExlbmd0aCA9ICgoenpmeFIgLyBCUE0pICogNjApID4+IDI7XG5cbiAgICAvLyBmb3IgZWFjaCBjaGFubmVsIGluIG9yZGVyIHVudGlsIHRoZXJlIGFyZSBubyBtb3JlXG4gICAgZm9yICg7IGhhc01vcmU7IGNoYW5uZWxJbmRleCsrKSB7XG4gICAgICAgIC8vIHJlc2V0IGN1cnJlbnQgdmFsdWVzXG4gICAgICAgIHNhbXBsZUJ1ZmZlciA9IFsoaGFzTW9yZSA9IG5vdEZpcnN0QmVhdCA9IHBpdGNoID0gb3V0U2FtcGxlT2Zmc2V0ID0gMCldO1xuXG4gICAgICAgIC8vIGZvciBlYWNoIHBhdHRlcm4gaW4gc2VxdWVuY2VcbiAgICAgICAgc2VxdWVuY2UubWFwKChwYXR0ZXJuSW5kZXgsIHNlcXVlbmNlSW5kZXgpID0+IHtcbiAgICAgICAgICAgIC8vIGdldCBwYXR0ZXJuIGZvciBjdXJyZW50IGNoYW5uZWwsIHVzZSBlbXB0eSAxIG5vdGUgcGF0dGVybiBpZiBub25lIGZvdW5kXG4gICAgICAgICAgICBwYXR0ZXJuQ2hhbm5lbCA9IHBhdHRlcm5zW3BhdHRlcm5JbmRleF1bY2hhbm5lbEluZGV4XSB8fCBbMCwgMCwgMF07XG5cbiAgICAgICAgICAgIC8vIGNoZWNrIGlmIHRoZXJlIGFyZSBtb3JlIGNoYW5uZWxzXG4gICAgICAgICAgICBoYXNNb3JlIHw9ICEhcGF0dGVybnNbcGF0dGVybkluZGV4XVtjaGFubmVsSW5kZXhdO1xuXG4gICAgICAgICAgICAvLyBnZXQgbmV4dCBvZmZzZXQsIHVzZSB0aGUgbGVuZ3RoIG9mIGZpcnN0IGNoYW5uZWxcbiAgICAgICAgICAgIG5leHRTYW1wbGVPZmZzZXQgPVxuICAgICAgICAgICAgICAgIG91dFNhbXBsZU9mZnNldCArXG4gICAgICAgICAgICAgICAgKHBhdHRlcm5zW3BhdHRlcm5JbmRleF1bMF0ubGVuZ3RoIC0gMiAtICFub3RGaXJzdEJlYXQpICpcbiAgICAgICAgICAgICAgICAgICAgYmVhdExlbmd0aDtcblxuICAgICAgICAgICAgLy8gZm9yIGVhY2ggYmVhdCBpbiBwYXR0ZXJuLCBwbHVzIG9uZSBleHRyYSBpZiBlbmQgb2Ygc2VxdWVuY2VcbiAgICAgICAgICAgIGZvciAoXG4gICAgICAgICAgICAgICAgaSA9IDIsIGsgPSBvdXRTYW1wbGVPZmZzZXQ7XG4gICAgICAgICAgICAgICAgaSA8XG4gICAgICAgICAgICAgICAgcGF0dGVybkNoYW5uZWwubGVuZ3RoICsgKHNlcXVlbmNlSW5kZXggPT0gc2VxdWVuY2UubGVuZ3RoIC0gMSk7XG4gICAgICAgICAgICAgICAgbm90Rmlyc3RCZWF0ID0gKytpXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAvLyA8Y2hhbm5lbC1ub3RlPlxuICAgICAgICAgICAgICAgIG5vdGUgPSBwYXR0ZXJuQ2hhbm5lbFtpXTtcblxuICAgICAgICAgICAgICAgIC8vIHN0b3AgaWYgZGlmZmVyZW50IGluc3RydW1lbnQgb3IgbmV3IG5vdGVcbiAgICAgICAgICAgICAgICBzdG9wID0gKGluc3RydW1lbnQgIT0gKHBhdHRlcm5DaGFubmVsWzBdIHx8IDApKSB8IG5vdGUgfCAwO1xuXG4gICAgICAgICAgICAgICAgLy8gZmlsbCBidWZmZXIgd2l0aCBzYW1wbGVzIGZvciBwcmV2aW91cyBiZWF0LCBtb3N0IGNwdSBpbnRlbnNpdmUgcGFydFxuICAgICAgICAgICAgICAgIGZvciAoXG4gICAgICAgICAgICAgICAgICAgIGogPSAwO1xuICAgICAgICAgICAgICAgICAgICBqIDwgYmVhdExlbmd0aCAmJiBub3RGaXJzdEJlYXQ7XG4gICAgICAgICAgICAgICAgICAgIC8vIGZhZGUgb2ZmIGF0dGVudWF0aW9uIGF0IGVuZCBvZiBiZWF0IGlmIHN0b3BwaW5nIG5vdGUsIHByZXZlbnRzIGNsaWNraW5nXG4gICAgICAgICAgICAgICAgICAgIGorKyA+IGJlYXRMZW5ndGggLSA5OSAmJiBzdG9wXG4gICAgICAgICAgICAgICAgICAgICAgICA/IChhdHRlbnVhdGlvbiArPSAoYXR0ZW51YXRpb24gPCAxKSAvIDk5KVxuICAgICAgICAgICAgICAgICAgICAgICAgOiAwXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNvcHkgc2FtcGxlIHRvIHN0ZXJlbyBidWZmZXJzIHdpdGggcGFubmluZ1xuICAgICAgICAgICAgICAgICAgICBzYW1wbGUgPVxuICAgICAgICAgICAgICAgICAgICAgICAgKCgxIC0gYXR0ZW51YXRpb24pICogc2FtcGxlQnVmZmVyW3NhbXBsZU9mZnNldCsrXSkgL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDIgfHwgMDtcbiAgICAgICAgICAgICAgICAgICAgbGVmdENoYW5uZWxCdWZmZXJba10gPVxuICAgICAgICAgICAgICAgICAgICAgICAgKGxlZnRDaGFubmVsQnVmZmVyW2tdIHx8IDApICsgc2FtcGxlICogcGFubmluZyAtIHNhbXBsZTtcbiAgICAgICAgICAgICAgICAgICAgcmlnaHRDaGFubmVsQnVmZmVyW2tdID1cbiAgICAgICAgICAgICAgICAgICAgICAgIChyaWdodENoYW5uZWxCdWZmZXJbaysrXSB8fCAwKSArXG4gICAgICAgICAgICAgICAgICAgICAgICBzYW1wbGUgKiBwYW5uaW5nICtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNhbXBsZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBzZXQgdXAgZm9yIG5leHQgbm90ZVxuICAgICAgICAgICAgICAgIGlmIChub3RlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHNldCBhdHRlbnVhdGlvblxuICAgICAgICAgICAgICAgICAgICBhdHRlbnVhdGlvbiA9IG5vdGUgJSAxO1xuICAgICAgICAgICAgICAgICAgICBwYW5uaW5nID0gcGF0dGVybkNoYW5uZWxbMV0gfHwgMDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKChub3RlIHw9IDApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBnZXQgY2FjaGVkIHNhbXBsZVxuICAgICAgICAgICAgICAgICAgICAgICAgc2FtcGxlQnVmZmVyID0gc2FtcGxlQ2FjaGVbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoaW5zdHJ1bWVudCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXR0ZXJuQ2hhbm5lbFsoc2FtcGxlT2Zmc2V0ID0gMCldIHx8IDApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICAgICAgXSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2FtcGxlQ2FjaGVbW2luc3RydW1lbnQsIG5vdGVdXSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFkZCBzYW1wbGUgdG8gY2FjaGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoKGluc3RydW1lbnRQYXJhbWV0ZXJzID0gW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5pbnN0cnVtZW50c1tpbnN0cnVtZW50XVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChpbnN0cnVtZW50UGFyYW1ldGVyc1syXSAqPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAyICoqICgobm90ZSAtIDEyKSAvIDEyKSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgenpmeEcoLi4uaW5zdHJ1bWVudFBhcmFtZXRlcnMpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gdXBkYXRlIHRoZSBzYW1wbGUgb2Zmc2V0XG4gICAgICAgICAgICBvdXRTYW1wbGVPZmZzZXQgPSBuZXh0U2FtcGxlT2Zmc2V0O1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gW2xlZnRDaGFubmVsQnVmZmVyLCByaWdodENoYW5uZWxCdWZmZXJdO1xufTtcbiIsImV4cG9ydCBjb25zdCBPYmxpcXVlTXlzdGlxdWUgPSBbW1sxLjMsMCwyMywsLC4yLDMsNV0sWzEuNSwwLDRlMywsLC4wMywyLDEuMjUsLCwsLC4wMiw2LjgsLS4zLCwuNV0sWy43LDAsMjEwMCwsLC4yLDMsMywsLC00MDAsLCwyXSxbLDAsNjU1LCwsLjExLDIsMS42NSwsLCwsLDMuOCwtLjEsLjFdXSxbW1ssLS41LDEzLCwsLCwsMTMsLCwsLCwxMywsLCwsLDEzLCwsLCwsMTMsLCwsMTQsLCwsMTMsLCwsLCwxMywsLCwsLDEzLCwsLCwsMTMsLCwsLCwxMywsLCwxNCwsLCxdLFsxLC4zLDEzLCwxMywsMTMsLDEzLCwsLDEzLCwxMywsMTMsLDEzLCwxMywsLCwxMywsMTMsLDEzLCwxMywsMTMsLDEzLCwxMywsMTMsLDEzLCwsLDEzLCwxMywsMTMsLDEzLCwxMywsLCwxMywsMTMsLDEzLCwxMywsMTMsLF0sWzIsMSwsLCwsLCwsLDEzLCwsLCwsLCwsLCwsMTMsLCwsLCwsLCwsLCwsLCwsLCwsLDEzLCwsLCwsLCwsLCwsMTMsLCwsLCwsLCwsLCxdLFssLjYsLCwsLDEzLCwxOCwsMTksLCwsLCwsLDE5LCwxOCwsLCwxNiwsLCwxMywsLCwsLCwsLCwxMywsMTgsLDE5LCwsLCwsLCwxOCwxOSwxOCwsLCwxMywxNCwxMywsMTYsLDE4LCwxOSwsXSxbMywtMSwsLDEzLCwsLCwsLCwsLCwsMTMsLCwsLCwsLCwsLCwsLCwsLCwsLDEzLCwsLCwsLCwsLCwsMTMsLCwsLCwsLCwsLCwsLDEzLDEzLDEzLDEzXV0sW1ssLS41LDEzLCwsLCwsMTMsLCwsLCwxMywsLCwsLDEzLCwsLCwsMTMsLCwsMTQsLCwsMTMsLCwsLCwxMywsLCwsLDEzLCwsLCwsMTMsLCwsLCwxMywsLCwxNCwsLCxdLFsxLC4zLDEzLCwxMywsMTMsLDEzLCwsLDEzLCwxMywsMTMsLDEzLCwxMywsLCwxMywsMTMsLDEzLCwxMywsMTMsLDEzLCwxMywsMTMsLDEzLCwsLDEzLCwxMywsMTMsLDEzLCwxMywsLCwxMywsMTMsLDEzLCwxMywsMTMsLF0sWzIsMSwsLCwsLCwsLDEzLCwsLCwsLCwsLCwsMTMsLCwsLCwsLCwsLCwsLCwsLCwsLDEzLCwsLCwsLCwsLCwsMTMsLCwsLCwsLCwsLCxdXV0sWzEsMSwwLDAsMCwwLDEsMF0sLF1cbiIsIid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHsgenpmeCwgenpmeFAsIHp6ZnhYIH0gZnJvbSAnLi9saWIvenpmeCc7XG5pbXBvcnQgeyB6emZ4TSB9IGZyb20gJy4vbGliL3p6ZnhtJztcbmltcG9ydCB7IE9ibGlxdWVNeXN0aXF1ZSB9IGZyb20gJy4vc29uZ3MvT2JsaXF1ZU15c3RpcXVlJztcblxuZXhwb3J0IGNvbnN0IEF1ZGlvID0ge1xuICAgIGluaXQoKSB7XG4gICAgICAgIEF1ZGlvLnJlYWR5VG9QbGF5ID0gZmFsc2U7XG5cbiAgICAgICAgQXVkaW8uY3R4ID0genpmeFg7XG4gICAgICAgIEF1ZGlvLmdhaW5fID0gQXVkaW8uY3R4LmNyZWF0ZUdhaW4oKTtcbiAgICAgICAgQXVkaW8uZ2Fpbl8uY29ubmVjdChBdWRpby5jdHguZGVzdGluYXRpb24pO1xuICAgICAgICB6emZ4LmRlc3RpbmF0aW9uXyA9IEF1ZGlvLmdhaW5fO1xuXG4gICAgICAgIEF1ZGlvLnNob3RndW4gPSBbLDAuMDEsMTQwLDAuMDEsMC4wMiwwLjQ1LDQsMi40MiwwLjEsLTAuMSwsLCwxLjIsLDAuMywwLjA0LDAuOCwwLjAyXTtcbiAgICAgICAgQXVkaW8ucGFnZSA9IFssLDEyMzMsLC4wMSwuMiwxLDEuNDMsLCw1MzksLjEsLCwsLCwuNTEsLjAzLC4wMV07XG4gICAgICAgIEF1ZGlvLnNoZWxsUmVsb2FkID0gWywsNjgsMC4wMSwsMC4xNCwxLDEuNTMsNy41LDAuMSw1MCwwLjAyLC0wLjAxLC0wLjIsMC4xLDAuMiwsMC40NywwLjAxXTtcbiAgICAgICAgQXVkaW8uZGFtYWdlID0gWywsMzkxLCwuMTksLjAxLDIsLjU0LC00LDIwLCwsLCwsLC4wMiwuOV07XG4gICAgICAgIEF1ZGlvLmFsYXJtID0gWywsOTcwLC4xMiwuMjUsLjM1LCwuMzksOC4xLCwxMCwuMSwuMiwsLjEsLCwuNiwuMDksLjEzXTtcbiAgICAgICAgLy8gWywsOTYxLC4wNSwuMDYsMS4xNywxLDQuNjcsLjgsLCwsLC44LC0wLjgsLjEsLjQ5LC42MiwuMDldO1xuICAgICAgICBBdWRpby52aWN0b3J5ID0gWywsNDU0LC4wNiwuODYsLjcxLDIsLjYzLC0wLjcsMS43LC04MywuMDksLjI3LC4zLC4yLCwuMTgsLjk1LC4wMiwuMDJdO1xuICAgICAgICBBdWRpby5zb25nID0genpmeE0oLi4uT2JsaXF1ZU15c3RpcXVlKTtcblxuICAgICAgICAvLyBTYXZlIG91ciBiYWNrZ3JvdW5kIG11c2ljIGluIG9zMTNrLCBmb3IgZnVuIVxuICAgICAgICAvL2xvY2FsU3RvcmFnZVtgT1MxM2tNdXNpYywke1RJVExFfSAtIE9ibGlxdWUgTXlzdGlxdWVgXSA9IEpTT04uc3RyaW5naWZ5KE9ibGlxdWVNeXN0aXF1ZSk7XG4gICAgfSxcblxuICAgIHVwZGF0ZSgpIHtcbiAgICAgICAgaWYgKCFBdWRpby5yZWFkeVRvUGxheSkgcmV0dXJuO1xuXG4gICAgICAgIGlmICghQXVkaW8ubXVzaWNQbGF5aW5nKSB7XG4gICAgICAgICAgICAvL0F1ZGlvLmJnbXVzaWNub2RlID0genpmeFAoLi4uQXVkaW8uc29uZyk7XG4gICAgICAgICAgICAvL0F1ZGlvLmJnbXVzaWNub2RlLmxvb3AgPSB0cnVlO1xuICAgICAgICAgICAgQXVkaW8ubXVzaWNQbGF5aW5nID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBwbGF5KHNvdW5kKSB7XG4gICAgICAgIGlmICghQXVkaW8ucmVhZHlUb1BsYXkpIHJldHVybjtcbiAgICAgICAgenpmeCguLi5zb3VuZCk7XG4gICAgfSxcblxuICAgIC8vIEl0J3MgaW1wb3J0YW50IHdlIGRvIHBhdXNpbmcgYW5kIHVucGF1c2luZyBhcyBzcGVjaWZpYyBldmVudHMgYW5kIG5vdCBpbiBnZW5lcmFsIHVwZGF0ZSgpLFxuICAgIC8vIGJlY2F1c2UgdXBkYXRlKCkgaXMgdHJpZ2dlcmVkIGJ5IHRoZSBhbmltYXRpb24gZnJhbWUgdHJpZ2dlciB3aGljaCBkb2VzIG5vdCBydW4gaWYgdGhlXG4gICAgLy8gcGFnZSBpcyBub3QgdmlzaWJsZS4gKFNvLCBpZiB5b3Ugd2FudCB0aGUgbXVzaWMgdG8gZmFkZSBpbiB0aGUgYmFja2dyb3VuZCwgZm9yIGV4YW1wbGUsXG4gICAgLy8gdGhhdCdzIG5vdCBoZWxwZnVsIGlmIGl0IHdvbid0IHdvcmsgYmVjYXVzZSB5b3UgYXJlbid0IGxvb2tpbmcgYXQgdGhlIHBhZ2UhKVxuXG4gICAgcGF1c2UoKSB7XG4gICAgICAgIEF1ZGlvLmdhaW5fLmdhaW4ubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUoMCwgQXVkaW8uY3R4LmN1cnJlbnRUaW1lICsgMSk7XG4gICAgfSxcblxuICAgIHVucGF1c2UoKSB7XG4gICAgICAgIEF1ZGlvLmdhaW5fLmdhaW4ubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUoMSwgQXVkaW8uY3R4LmN1cnJlbnRUaW1lICsgMSk7XG4gICAgfVxufTtcbiIsIi8qKlxuICogYFNjcmVlbmAgaXMgYSBzaW5nbGV0b24gdGhhdCByZXByZXNlbnRzIHRoZSB2aXJ0dWFsIDgweDI1IGNoYXJhY3RlciBzY3JlZW4gb3VyIGdhbWVcbiAqIGxpdmVzIGluLiBDb21wb25lbnRzIGxpa2UgUGxheWluZ0ZpZWxkIHdpbGwgXCJkcmF3XCIgKHdyaXRlIHRleHQgb250bykgdGhpcyB2aXJ0dWFsXG4gKiBzY3JlZW4gZWFjaCBmcmFtZS4gT25jZSBhbGwgdGhlIHRleHQgaXMgd3JpdHRlbiwgdGhlIHRleHQgd2lsbCBlbmQgdXAgcmVuZGVyZWQgb25cbiAqIHRoZSB2aWV3cG9ydCAoY2FudmFzKSBpbiB0aGUgYnJvd3Nlci5cbiAqL1xuXG5pbXBvcnQgeyBTQ1JFRU5fV0lEVEgsIFNDUkVFTl9IRUlHSFQgfSBmcm9tICcuL0NvbnN0YW50cyc7XG5pbXBvcnQgeyBWaWV3cG9ydCB9IGZyb20gJy4vVmlld3BvcnQnO1xuaW1wb3J0IHsgVGV4dCB9IGZyb20gJy4vVGV4dCc7XG5cbmV4cG9ydCBjb25zdCBTY3JlZW4gPSB7XG4gICAgaW5pdCgpIHtcbiAgICAgICAgdGhpcy5zY3JlZW4gPSBbXTtcbiAgICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCBTQ1JFRU5fSEVJR0hUOyB5KyspIHtcbiAgICAgICAgICAgIHRoaXMuc2NyZWVuLnB1c2goW10pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2xlYXIoKTtcbiAgICB9LFxuXG4gICAgY2xlYXIoKSB7XG4gICAgICAgIGZvciAobGV0IHkgPSAwOyB5IDwgU0NSRUVOX0hFSUdIVDsgeSsrKSB7XG4gICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IFNDUkVFTl9XSURUSDsgeCsrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zY3JlZW5beV1beF0gPSAnICc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgd3JpdGUoeCwgeSwgdGV4dCkge1xuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkodGV4dCkpIHRleHQgPSBbdGV4dF07XG5cbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0ZXh0Lmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRleHRbal0ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNjcmVlblt5ICsgal1beCArIGldID0gdGV4dFtqXVtpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBkcmF3KGN0eCkge1xuICAgICAgICBsZXQgdGV4dCA9IHRoaXMuc2NyZWVuLm1hcChyb3cgPT4gcm93LmpvaW4oJycpKS5qb2luKCdcXG4nKTtcblxuICAgICAgICBUZXh0LmRyYXdUZXh0KFxuICAgICAgICAgICAgY3R4LFxuICAgICAgICAgICAgVGV4dC5zcGxpdFBhcmFncmFwaCh0ZXh0LCBWaWV3cG9ydC53aWR0aCksXG4gICAgICAgICAgICAwLCAwLFxuICAgICAgICAgICAgVGV4dC5nbG93XG4gICAgICAgICk7XG4gICAgfVxufTtcbiIsIi8qKlxuICogYE1haW5NZW51YCBpcyBhIGNsYXNzIHRoYXQgcmVwcmVzZW50cyBhIHNjcmVlbiB0aGUgdXNlciBjYW4gdmlldy4gSW5zdGFuY2VzIG9mXG4gKiBNYWluTWVudSBhcmUgY29uc3RydWN0ZWQgd2hlbmV2ZXIgd2Ugd2FudCB0aGUgdXNlciB0byBnbyB0byB0aGUgbWFpbiBtZW51LCBhbmRcbiAqIHRocm93biBhd2F5IHdoZW4gd2UncmUgZG9uZS5cbiAqL1xuXG5pbXBvcnQgeyBQTEFZX1NQRUVEUyB9IGZyb20gJy4vQ29uc3RhbnRzJztcbmltcG9ydCB7IEdhbWVWZXJzaW9uIH0gZnJvbSAnLi9HYW1lVmVyc2lvbi1nZW4uanNvbic7XG5pbXBvcnQgeyBTY3JlZW4gfSBmcm9tICcuL1NjcmVlbic7XG5pbXBvcnQgeyBHYW1lIH0gZnJvbSAnLi9HYW1lJztcbmltcG9ydCB7IElucHV0IH0gZnJvbSAnLi9JbnB1dCc7XG5cbmV4cG9ydCBjbGFzcyBNYWluTWVudSB7XG4gICAgdXBkYXRlKCkge1xuICAgICAgICBzd2l0Y2ggKElucHV0Lmxhc3RLZXkoKS50b1VwcGVyQ2FzZSgpKSB7XG4gICAgICAgICAgICBjYXNlICdQJzpcbiAgICAgICAgICAgICAgICBJbnB1dC5jb25zdW1lKCk7XG4gICAgICAgICAgICAgICAgR2FtZS5zdGFydFNlc3Npb24oKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ0wnOlxuICAgICAgICAgICAgICAgIElucHV0LmNvbnN1bWUoKTtcbiAgICAgICAgICAgICAgICBHYW1lLnBsYXlTcGVlZCA9IChHYW1lLnBsYXlTcGVlZCArIDEpICUgUExBWV9TUEVFRFMubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnSSc6XG4gICAgICAgICAgICAgICAgSW5wdXQuY29uc3VtZSgpO1xuICAgICAgICAgICAgICAgIEdhbWUuc2hvd0luc3RydWN0aW9ucygpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnRSc6XG4gICAgICAgICAgICAgICAgSW5wdXQuY29uc3VtZSgpO1xuICAgICAgICAgICAgICAgIEdhbWUuc2hvd0luc3RydWN0aW9ucygpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZHJhdygpIHtcbiAgICAgICAgbGV0IHRlcm1pbmFsID0gJ1F1aWNoZSBNa0lJJztcblxuICAgICAgICBsZXQgaGlnaFNjb3JlcyA9IFtcbiAgICAgICAgICAgIGAxKSA2MDAwICBCb2JgLFxuICAgICAgICAgICAgYDIpIDYwMDAgIFRvbWAsXG4gICAgICAgICAgICBgMykgNDAwMCAgV2F5bmVgLFxuICAgICAgICAgICAgYGAsXG4gICAgICAgICAgICBgYFxuICAgICAgICBdO1xuXG4gICAgICAgIFNjcmVlbi5jbGVhcigpO1xuICAgICAgICBTY3JlZW4ud3JpdGUoMCwgMCwgW1xuICAgICAgICAgICAgYCAgICAgICAgICAgICAgIExMICAgICAgICAgICAgICAgICAgICAgZGQgICAgICAgZGRgLFxuICAgICAgICAgICAgYCAgICAgICAgICAgICAgIExMICAgICAgICAgICAgICAgICAgICAgZGQgICAgICAgZGQgICAgICAgICAgICAgICAgICAgICAgdG1gLFxuICAgICAgICAgICAgYCAgICAgICAgICAgICAgIExMICAgICAgICAgYWFhYSAgICAgZGRkZGQgICAgZGRkZGQgICAgZWVlZSAgIHJycnJycnJgLFxuICAgICAgICAgICAgYCAgICAgICAgICAgICAgIExMICAgICAgICBhYSAgYWEgICBkZCAgZGQgICBkZCAgZGQgICBlZSAgZWUgIHJyICAgIHJyYCxcbiAgICAgICAgICAgIGAgICAgICAgICAgICAgICBMTCAgICAgICAgYWEgIGFhICAgZGQgIGRkICAgZGQgIGRkICAgZWVlZWVlICBycmAsXG4gICAgICAgICAgICBgICAgICAgICAgICAgICAgTEwgICAgICAgIGFhICBhYSAgIGRkICBkZCAgIGRkICBkZCAgIGVlICAgICAgcnJgLFxuICAgICAgICAgICAgYCAgICAgICAgICAgICAgIExMTExMTExMICAgYWFhIGFhICAgZGRkIGRkICAgZGRkIGRkICAgZWVlZSAgIHJyYCxcbiAgICAgICAgICAgIGBgLFxuICAgICAgICAgICAgYCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZlcnNpb246ICAgICR7R2FtZVZlcnNpb259YCxcbiAgICAgICAgICAgIGAoYykgMTk4MiwgMTk4MyBZYWhvbyBTb2Z0d2FyZSAgICAgICAgICBUZXJtaW5hbDogICAke3Rlcm1pbmFsfWAsXG4gICAgICAgICAgICBgMTA5NzAgQXNodG9uIEF2ZS4gIFN1aXRlIDMxMiAgICAgICAgICAgUGxheSBzcGVlZDogJHtHYW1lLnBsYXlTcGVlZCArIDF9IC8gJHtQTEFZX1NQRUVEUy5sZW5ndGh9YCxcbiAgICAgICAgICAgIGBMb3MgQW5nZWxlcywgQ2EgIDkwMDI0ICAgICAgICAgICAgICAgICBNb3ZlID0g4oaR4oaT4oaQ4oaSL1dBU0QsIEp1bXAgPSBTcGFjZSxgLFxuICAgICAgICAgICAgYCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0b3AgPSBPdGhlcmAsXG4gICAgICAgICAgICBgYCxcbiAgICAgICAgICAgIGBQID0gUGxheSBnYW1lICAgICAgICAgICAgICAgICAgICAgICAgICBIaWdoIFNjb3Jlc2AsXG4gICAgICAgICAgICBgTCA9IENoYW5nZSBsZXZlbCBvZiBkaWZmaWN1bHR5ICAgICAgICAgJHtoaWdoU2NvcmVzWzBdfWAsXG4gICAgICAgICAgICBgQyA9IENvbmZpZ3VyZSBMYWRkZXIgICAgICAgICAgICAgICAgICAgJHtoaWdoU2NvcmVzWzFdfWAsXG4gICAgICAgICAgICBgSSA9IEluc3RydWN0aW9ucyAgICAgICAgICAgICAgICAgICAgICAgJHtoaWdoU2NvcmVzWzJdfWAsXG4gICAgICAgICAgICBgRSA9IEV4aXQgTGFkZGVyICAgICAgICAgICAgICAgICAgICAgICAgJHtoaWdoU2NvcmVzWzNdfWAsXG4gICAgICAgICAgICBgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtoaWdoU2NvcmVzWzRdfWAsXG4gICAgICAgICAgICBgYCxcbiAgICAgICAgICAgIGBFbnRlciBvbmUgb2YgdGhlIGFib3ZlOmBcbiAgICAgICAgXSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgU2NyZWVuIH0gZnJvbSAnLi9TY3JlZW4nO1xuaW1wb3J0IHsgR2FtZSB9IGZyb20gJy4vR2FtZSc7XG5pbXBvcnQgeyBJbnB1dCB9IGZyb20gJy4vSW5wdXQnO1xuXG5leHBvcnQgY2xhc3MgSW5zdHJ1Y3Rpb25zTWVudSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgfVxuXG4gICAgdXBkYXRlKCkge1xuICAgICAgICBpZiAoSW5wdXQubGFzdEtleSgpLnRvVXBwZXJDYXNlKCkgIT09ICcnKSB7XG4gICAgICAgICAgICBJbnB1dC5jb25zdW1lKCk7XG4gICAgICAgICAgICBHYW1lLnNob3dNYWluTWVudSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZHJhdygpIHtcbiAgICAgICAgU2NyZWVuLmNsZWFyKCk7XG4gICAgICAgIFNjcmVlbi53cml0ZSgwLCAwLCBbXG4gICAgICAgICAgICBgWW91IGFyZSBhIExhZCB0cmFwcGVkIGluIGEgbWF6ZS4gIFlvdXIgbWlzc2lvbiBpcyBpcyB0byBleHBsb3JlIHRoZWAsXG4gICAgICAgICAgICBgZGFyayBjb3JyaWRvcnMgbmV2ZXIgYmVmb3JlIHNlZW4gYnkgaHVtYW4gZXllcyBhbmQgZmluZCBoaWRkZW5gLFxuICAgICAgICAgICAgYHRyZWFzdXJlcyBhbmQgcmljaGVzLmAsXG4gICAgICAgICAgICBgYCxcbiAgICAgICAgICAgIGBZb3UgY29udHJvbCBMYWQgYnkgdHlwaW5nIHRoZSBkaXJlY3Rpb24gYnV0dG9ucyBhbmQganVtcGluZyBieWAsXG4gICAgICAgICAgICBgdHlwaW5nIFNQQUNFLiAgQnV0IGJld2FyZSBvZiB0aGUgZmFsbGluZyByb2NrcyBjYWxsZWQgRGVyIHJvY2tzLmAsXG4gICAgICAgICAgICBgWW91IG11c3QgZmluZCBhbmQgZ3Jhc3AgdGhlIHRyZWFzdXJlcyAoc2hvd24gYXMgJCkgQkVGT1JFIHRoZWAsXG4gICAgICAgICAgICBgYm9udXMgdGltZSBydW5zIG91dC5gLFxuICAgICAgICAgICAgYGAsXG4gICAgICAgICAgICBgQSBuZXcgTGFkIHdpbGwgYmUgYXdhcmRlZCBmb3IgZXZlcnkgMTAsMDAwIHBvaW50cy5gLFxuICAgICAgICAgICAgYEV4dHJhIHBvaW50cyBhcmUgYXdhcmRlZCBmb3IgdG91Y2hpbmcgdGhlIGdvbGRgLFxuICAgICAgICAgICAgYHN0YXR1ZXMgKHNob3duIGFzICYpLiAgWW91IHdpbGwgcmVjZWl2ZSB0aGUgYm9udXMgdGltZSBwb2ludHNgLFxuICAgICAgICAgICAgYHRoYXQgYXJlIGxlZnQgd2hlbiB5b3UgaGF2ZSBmaW5pc2hlZCB0aGUgbGV2ZWwuYCxcbiAgICAgICAgICAgIGBgLFxuICAgICAgICAgICAgYFR5cGUgYW4gRVNDYXBlIHRvIHBhdXNlIHRoZSBHYW1lYCxcbiAgICAgICAgICAgIGBgLFxuICAgICAgICAgICAgYFJlbWVtYmVyLCB0aGVyZSBpcyBtb3JlIHRoYW4gb25lIHdheSB0byBza2luIGEgY2F0LiAoQ2h1bSlgLFxuICAgICAgICAgICAgYGAsXG4gICAgICAgICAgICBgR29vZCBsdWNrIExhZC5gLFxuICAgICAgICAgICAgYGAsXG4gICAgICAgICAgICBgYCxcbiAgICAgICAgICAgIGBgLFxuICAgICAgICAgICAgYFR5cGUgUkVUVVJOIHRvIHJldHVybiB0byBtYWluIG1lbnU6YFxuICAgICAgICBdKTtcbiAgICB9XG59XG4iLCIvKipcbiAqIEEgY29sbGVjdGlvbiBvZiBzdGF0ZXMgYW5kIGZ1bmN0aW9ucyByZWxhdGVkIHRvIGVudGl0aWVzLlxuICovXG5cbmltcG9ydCB7IExFVkVMX0NPTFMgfSBmcm9tICcuL0NvbnN0YW50cyc7XG5cbi8vIEEgbGlzdCBvZiBzdGF0ZXMgdXNhYmxlIGJ5IGVudGl0aWVzLiBTb21lIHN0YXRlcyBvbmx5IGFwcGx5IHRvIHBsYXllcnMgKHJvY2tzIGNhbid0IGp1bXApLlxuLy9cbi8vIE1hbnkgb2YgdGhlc2UgYXJlIGFjdHVhbGx5IERJUkVDVElPTlMsIGJ1dCBzaW5jZSB0aGlzIGdhbWUgaGFzIFwicGFjIG1hbiBtb3ZlbWVudFwiLCBhXG4vLyBkaXJlY3Rpb24gaXMgYSBzdGF0ZSAtLSB0aGUgcGxheWVyIHdpbGwga2VlcCBtb3ZpbmcgaW4gdGhlIHRhcHBlZCBkaXJlY3Rpb24gdW50aWwgdGhlIHBsYXllclxuLy8gZW50ZXJzIGEgbmV3IGlucHV0LlxuZXhwb3J0IGNvbnN0IFN0YXRlID0ge1xuICAgIFNUT1BQRUQ6ICAgIDEsICAgICAgICAgLy8gU3RhbmRpbmcgc3RpbGxcbiAgICBVUDogICAgICAgICAyLCAgICAgICAgIC8vIE1vdmluZyB1cCAocGxheWVyIG9ubHkpXG4gICAgTEVGVDogICAgICAgMywgICAgICAgICAvLyBNb3ZpbmcgbGVmdFxuICAgIERPV046ICAgICAgIDQsICAgICAgICAgLy8gTW92aW5nIGRvd25cbiAgICBSSUdIVDogICAgICA1LCAgICAgICAgIC8vIE1vdmluZyByaWdodFxuICAgIEZBTExJTkc6ICAgIDYsICAgICAgICAgLy8gRmFsbGluZ1xuICAgIFNUQVJUX0pVTVA6IDcsICAgICAgICAgLy8gQWJvdXQgdG8gc3RhcnQgYSBqdW1wIChwbGF5ZXIgb25seSlcbiAgICBKVU1QX0xFRlQ6ICA4LCAgICAgICAgIC8vIEp1bXBpbmcgbGVmdCAocGxheWVyIG9ubHkpXG4gICAgSlVNUF9SSUdIVDogOSwgICAgICAgICAvLyBKdW1waW5nIHJpZ2h0IChwbGF5ZXIgb25seSlcbiAgICBKVU1QX1VQOiAgICAxMCwgICAgICAgIC8vIEp1bXBpbmcgc3RyYWlnaHQgdXAgKHBsYXllciBvbmx5KVxuICAgIERZSU5HOiAgICAgIDExLCAgICAgICAgLy8gRHlpbmcgKHVzZWQgYXMgYSBkZWF0aCBhbmltYXRpb24pXG4gICAgREVBRDogICAgICAgMTIgICAgICAgICAvLyBEZWFkIChmb3IgcGxheWVyLCByZXN0YXJ0IGxldmVsOyBmb3Igcm9jaywgZGlzYXBwZWFyKVxufTtcblxuLy8gVGhpcyBjb25zdGFudCBjb250cm9scyB0aGUgXCJzaGFwZVwiIG9mIHRoZSBsZWZ0LCByaWdodCwgYW5kIHN0cmFpZ2h0LXVwIGp1bXBzIGJ5XG4vLyB0aGUgcGxheWVyLiBOb3RlIHRoYXQgdGhlIHN0cmFpZ2h0LXVwIGp1bXAgZ2V0cyAxIGZyYW1lIGxlc3Mgb2YgYWlydGltZSB0aGFuXG4vLyB0aGUgbGVmdCBhbmQgcmlnaHQganVtcHMuXG5leHBvcnQgY29uc3QgSlVNUF9GUkFNRVMgPSB7XG4gICAgW1N0YXRlLkpVTVBfUklHSFRdOiBbXG4gICAgICAgIHsgeDogMSwgeTogLTEgfSxcbiAgICAgICAgeyB4OiAxLCB5OiAtMSB9LFxuICAgICAgICB7IHg6IDEsIHk6IDAgfSxcbiAgICAgICAgeyB4OiAxLCB5OiAwIH0sXG4gICAgICAgIHsgeDogMSwgeTogMSB9LFxuICAgICAgICB7IHg6IDEsIHk6IDEgfVxuICAgIF0sXG4gICAgW1N0YXRlLkpVTVBfTEVGVF06IFtcbiAgICAgICAgeyB4OiAtMSwgeTogLTEgfSxcbiAgICAgICAgeyB4OiAtMSwgeTogLTEgfSxcbiAgICAgICAgeyB4OiAtMSwgeTogMCB9LFxuICAgICAgICB7IHg6IC0xLCB5OiAwIH0sXG4gICAgICAgIHsgeDogLTEsIHk6IDEgfSxcbiAgICAgICAgeyB4OiAtMSwgeTogMSB9XG4gICAgXSxcbiAgICBbU3RhdGUuSlVNUF9VUF06IFtcbiAgICAgICAgeyB4OiAwLCB5OiAtMSB9LFxuICAgICAgICB7IHg6IDAsIHk6IC0xIH0sXG4gICAgICAgIHsgeDogMCwgeTogMCB9LFxuICAgICAgICB7IHg6IDAsIHk6IDEgfSxcbiAgICAgICAgeyB4OiAwLCB5OiAxIH0sXG4gICAgICAgIHsgeDogMCwgeTogMCB9XG4gICAgXVxufTtcblxuZXhwb3J0IGZ1bmN0aW9uIGFwcGx5RW50aXR5TW92ZW1lbnQoZW50aXR5LCBmaWVsZCkge1xuICAgIGxldCByZXBlYXQgPSBmYWxzZTtcblxuICAgIC8vIFRoaXMgbWV0aG9kIGNvbnRhaW5zIGdlbmVyaWMgXCJtb3ZlbWVudFwiIGFwcGxpY2F0aW9uIGZvciBhbGwgZW50aXRpZXMsIGluY2x1ZGluZ1xuICAgIC8vIExhZCAocGxheWVyKSBhbmQgRGVyIFJvY2tzIChlbmVtaWVzKS4gVGhpbmdzIGxpa2UgZmFsbGluZywgbW92aW5nIGxlZnQvcmlnaHQsIGV0Yy4sXG4gICAgLy8gd29yayB0aGUgc2FtZSBmb3IgYm90aC5cbiAgICAvL1xuICAgIC8vIChUaGVyZSdzIGEgYnVuY2ggb2YganVtcCBsb2dpYyBpbiBoZXJlIHRvbywgYW5kIG1vdmluZyBVUCwgd2hpY2ggcmVhbGx5IG9ubHkgYXBwbGllc1xuICAgIC8vIHRvIHBsYXllcnMsIGJ1dCB0aGF0J3MgT0sgLS0gRGVyIFJvY2tzIGp1c3Qgd29uJ3QgYXR0ZW1wdCB0aG9zZSBhY3Rpb25zLilcblxuICAgIGlmIChlbnRpdHkubmV4dFN0YXRlKSB7XG4gICAgICAgIHN3aXRjaCAoZW50aXR5LnN0YXRlKSB7XG4gICAgICAgICAgICBjYXNlIFN0YXRlLlNUT1BQRUQ6XG4gICAgICAgICAgICBjYXNlIFN0YXRlLkxFRlQ6XG4gICAgICAgICAgICBjYXNlIFN0YXRlLlJJR0hUOlxuICAgICAgICAgICAgICAgIGlmIChbU3RhdGUuTEVGVCwgU3RhdGUuUklHSFQsIFN0YXRlLlNUT1BQRURdLmluY2x1ZGVzKGVudGl0eS5uZXh0U3RhdGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGVudGl0eS5zdGF0ZSA9IGVudGl0eS5uZXh0U3RhdGU7XG4gICAgICAgICAgICAgICAgICAgIGVudGl0eS5uZXh0U3RhdGUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIFN0YXRlLlVQOlxuICAgICAgICAgICAgY2FzZSBTdGF0ZS5ET1dOOlxuICAgICAgICAgICAgICAgIC8vIE5vcm1hbFxuICAgICAgICAgICAgICAgIGlmIChbU3RhdGUuTEVGVCwgU3RhdGUuUklHSFRdLmluY2x1ZGVzKGVudGl0eS5uZXh0U3RhdGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGVudGl0eS5zdGF0ZSA9IGVudGl0eS5uZXh0U3RhdGU7XG4gICAgICAgICAgICAgICAgICAgIGVudGl0eS5uZXh0U3RhdGUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIFN0YXRlLkpVTVBfTEVGVDpcbiAgICAgICAgICAgIGNhc2UgU3RhdGUuSlVNUF9SSUdIVDpcbiAgICAgICAgICAgIGNhc2UgU3RhdGUuSlVNUF9VUDpcbiAgICAgICAgICAgICAgICBpZiAoZW50aXR5Lm5leHRTdGF0ZSA9PT0gU3RhdGUuUklHSFQgJiYgZW50aXR5LnN0YXRlICE9IFN0YXRlLkpVTVBfUklHSFQpIHtcbiAgICAgICAgICAgICAgICAgICAgZW50aXR5LnN0YXRlID0gU3RhdGUuSlVNUF9SSUdIVDtcbiAgICAgICAgICAgICAgICAgICAgZW50aXR5Lm5leHRTdGF0ZSA9IFN0YXRlLlJJR0hUO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZW50aXR5Lm5leHRTdGF0ZSA9PT0gU3RhdGUuTEVGVCAmJiBlbnRpdHkuc3RhdGUgIT0gU3RhdGUuSlVNUF9MRUZUKSB7XG4gICAgICAgICAgICAgICAgICAgIGVudGl0eS5zdGF0ZSA9IFN0YXRlLkpVTVBfTEVGVDtcbiAgICAgICAgICAgICAgICAgICAgZW50aXR5Lm5leHRTdGF0ZSA9IFN0YXRlLkxFRlQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChlbnRpdHkubmV4dFN0YXRlID09PSBTdGF0ZS5ET1dOKSB7XG4gICAgICAgICAgICAgICAgICAgIGVudGl0eS5zdGF0ZSA9IFN0YXRlLkZBTExJTkc7XG4gICAgICAgICAgICAgICAgICAgIGVudGl0eS5uZXh0U3RhdGUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChlbnRpdHkubmV4dFN0YXRlID09PSBTdGF0ZS5VUCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBTcGVjaWFsIGNhc2U6IGxlYXZlIFVQIGluIHRoZSBxdWV1ZSBmb3IgbGF0ZXJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZW50aXR5Lm5leHRTdGF0ZSA9PT0gU3RhdGUuU1RBUlRfSlVNUCkge1xuICAgICAgICAvLyBTcGVjaWFsIGNhc2U6IHRoZSB1c2VyIHdhbnRzIHRvIGp1bXAhXG4gICAgICAgIC8vXG4gICAgICAgIC8vIElmIHRoZSBwbGF5ZXIgaXMgc3RhbmRpbmcgb24gc29tZXRoaW5nIHNvbGlkLCB3ZSBpbml0aWF0ZSBhIGp1bXAgYmFzZWQgb24gdGhlIGN1cnJlbnRcbiAgICAgICAgLy8gbW92ZW1lbnQgb2YgdGhlIHBsYXllci5cbiAgICAgICAgaWYgKGZpZWxkLm9uU29saWQoZW50aXR5LngsIGVudGl0eS55KSkge1xuICAgICAgICAgICAgaWYgKGVudGl0eS5zdGF0ZSA9PT0gU3RhdGUuU1RPUFBFRCB8fCBlbnRpdHkuc3RhdGUgPT09IFN0YXRlLkZBTExJTkcpIHtcbiAgICAgICAgICAgICAgICBlbnRpdHkuc3RhdGUgPSBTdGF0ZS5KVU1QX1VQO1xuICAgICAgICAgICAgICAgIGVudGl0eS5qdW1wU3RlcCA9IDA7XG4gICAgICAgICAgICAgICAgZW50aXR5Lm5leHRTdGF0ZSA9IFN0YXRlLlNUT1BQRUQ7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGVudGl0eS5zdGF0ZSA9PT0gU3RhdGUuTEVGVCB8fCBlbnRpdHkuc3RhdGUgPT09IFN0YXRlLkpVTVBfTEVGVCkge1xuICAgICAgICAgICAgICAgIGVudGl0eS5zdGF0ZSA9IFN0YXRlLkpVTVBfTEVGVDtcbiAgICAgICAgICAgICAgICBlbnRpdHkuanVtcFN0ZXAgPSAwO1xuICAgICAgICAgICAgICAgIGVudGl0eS5uZXh0U3RhdGUgPSBTdGF0ZS5MRUZUO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChlbnRpdHkuc3RhdGUgPT09IFN0YXRlLlJJR0hUIHx8IGVudGl0eS5zdGF0ZSA9PT0gU3RhdGUuSlVNUF9SSUdIVCkge1xuICAgICAgICAgICAgICAgIGVudGl0eS5zdGF0ZSA9IFN0YXRlLkpVTVBfUklHSFQ7XG4gICAgICAgICAgICAgICAgZW50aXR5Lmp1bXBTdGVwID0gMDtcbiAgICAgICAgICAgICAgICBlbnRpdHkubmV4dFN0YXRlID0gU3RhdGUuUklHSFQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBTcGVjaWFsIGNhc2U6IGxlYXZlIFNUQVJUX0pVTVAgaW4gdGhlIHF1ZXVlIGZvciBsYXRlci5cbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAvLyBUaGlzIGxldHMgdGhlIHVzZXIgdGFwIGp1bXAgYSBmZXcgZnJhbWVzIGJlZm9yZSBoaXR0aW5nIHRoZSBncm91bmQgdG9cbiAgICAgICAgICAgIC8vIGNoYWluLWp1bXAsIGVzcGVjaWFsbHkgYXQgaGlnaGVyIHNwZWVkcyBib3VuY2luZyBvZmYgMS13aWRlIHBsYXRmb3Jtcy5cbiAgICAgICAgfVxuICAgIH0gZWxzZSBpZiAoZW50aXR5Lm5leHRTdGF0ZSA9PT0gU3RhdGUuVVAgJiYgZmllbGQuaXNMYWRkZXIoZW50aXR5LngsIGVudGl0eS55KSkge1xuICAgICAgICAvLyBTcGVjaWFsIGNhc2U6IHRoZSB1c2VyIHdhbnRzIHRvIGdvIHVwIVxuICAgICAgICAvL1xuICAgICAgICAvLyBJZiB0aGUgdXNlciBpcyBvbiBhIGxhZGRlciwgd2UgY2FuIHN0YXJ0IGFzY2VuZGluZy4gTm90ZSB0aGF0IGlmIHRoZSB1c2VyIGlzIG5vdFxuICAgICAgICAvLyBvbiBhIGxhZGRlciB3ZSBpZ25vcmUgdGhlaXIgaW5wdXQsIHdoaWNoIGlzIGludGVudGlvbmFsIC0tIHRoaXMgYWxsb3dzIHF1ZXVlZFxuICAgICAgICAvLyAocGFjbWFuKSBpbnB1dCwgd2hlcmUgd2UgY2FuIHRhcCBVUCBhIGxpdHRsZSBiZWZvcmUgcmVhY2hpbmcgdGhlIGxhZGRlci5cbiAgICAgICAgZW50aXR5LnN0YXRlID0gU3RhdGUuVVA7XG4gICAgICAgIGVudGl0eS5uZXh0U3RhdGUgPSB1bmRlZmluZWQ7XG4gICAgfSBlbHNlIGlmIChlbnRpdHkubmV4dFN0YXRlID09PSBTdGF0ZS5ET1dOICYmIChmaWVsZC5pc0xhZGRlcihlbnRpdHkueCwgZW50aXR5LnkpIHx8IGZpZWxkLmlzTGFkZGVyKGVudGl0eS54LCBlbnRpdHkueSArIDEpKSkge1xuICAgICAgICAvLyBTcGVjaWFsIGNhc2U6IHRoZSBwbGF5ZXIgd2FudHMgdG8gZ28gZG93biFcbiAgICAgICAgLy9cbiAgICAgICAgLy8gSWYgdGhlIHBsYXllciBpcyBvbiAob3IgYWJvdmUpIGEgbGFkZGVyLCB3ZSBjYW4gc3RhcnQgZGVzY2VuZGluZy4gTm90ZSB0aGF0IGlmIHRoZSBwbGF5ZXIgaXMgbm90XG4gICAgICAgIC8vIG9uIGEgbGFkZGVyIHdlIGlnbm9yZSB0aGVpciBpbnB1dCwgd2hpY2ggaXMgaW50ZW50aW9uYWwgLS0gdGhpcyBhbGxvd3MgcXVldWVkXG4gICAgICAgIC8vIChwYWNtYW4pIGlucHV0LCB3aGVyZSB3ZSBjYW4gdGFwIERPV04gYSBsaXR0bGUgYmVmb3JlIHJlYWNoaW5nIHRoZSBsYWRkZXIuXG4gICAgICAgIGVudGl0eS5zdGF0ZSA9IFN0YXRlLkRPV047XG4gICAgICAgIGVudGl0eS5uZXh0U3RhdGUgPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgc3dpdGNoIChlbnRpdHkuc3RhdGUpIHtcbiAgICAgICAgY2FzZSBTdGF0ZS5MRUZUOlxuICAgICAgICAgICAgaWYgKCFmaWVsZC5vblNvbGlkKGVudGl0eS54LCBlbnRpdHkueSkpIHtcbiAgICAgICAgICAgICAgICBlbnRpdHkubmV4dFN0YXRlID0gU3RhdGUuTEVGVDtcbiAgICAgICAgICAgICAgICBlbnRpdHkuc3RhdGUgPSBTdGF0ZS5GQUxMSU5HO1xuICAgICAgICAgICAgICAgIHJlcGVhdCA9IHRydWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZmllbGQuZW1wdHlTcGFjZShlbnRpdHkueCAtIDEsIGVudGl0eS55KSkge1xuICAgICAgICAgICAgICAgIGVudGl0eS54LS07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGVudGl0eS5uZXh0U3RhdGUgPSBTdGF0ZS5TVE9QUEVEO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBTdGF0ZS5SSUdIVDpcbiAgICAgICAgICAgIGlmICghZmllbGQub25Tb2xpZChlbnRpdHkueCwgZW50aXR5LnkpKSB7XG4gICAgICAgICAgICAgICAgZW50aXR5Lm5leHRTdGF0ZSA9IFN0YXRlLlJJR0hUO1xuICAgICAgICAgICAgICAgIGVudGl0eS5zdGF0ZSA9IFN0YXRlLkZBTExJTkc7XG4gICAgICAgICAgICAgICAgcmVwZWF0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChmaWVsZC5lbXB0eVNwYWNlKGVudGl0eS54ICsgMSwgZW50aXR5LnkpKSB7XG4gICAgICAgICAgICAgICAgZW50aXR5LngrKztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZW50aXR5Lm5leHRTdGF0ZSA9IFN0YXRlLlNUT1BQRUQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIFN0YXRlLlVQOlxuICAgICAgICAgICAgaWYgKGZpZWxkLmNhbkNsaW1iVXAoZW50aXR5LngsIGVudGl0eS55IC0gMSkpIHtcbiAgICAgICAgICAgICAgICBlbnRpdHkueS0tO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBlbnRpdHkuc3RhdGUgPSBTdGF0ZS5TVE9QUEVEO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBTdGF0ZS5ET1dOOlxuICAgICAgICAgICAgaWYgKGZpZWxkLmNhbkNsaW1iRG93bihlbnRpdHkueCwgZW50aXR5LnkgKyAxKSkge1xuICAgICAgICAgICAgICAgIGVudGl0eS55Kys7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGVudGl0eS5zdGF0ZSA9IFN0YXRlLlNUT1BQRUQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIFN0YXRlLkpVTVBfUklHSFQ6XG4gICAgICAgIGNhc2UgU3RhdGUuSlVNUF9MRUZUOlxuICAgICAgICBjYXNlIFN0YXRlLkpVTVBfVVA6XG4gICAgICAgICAgICBsZXQgc3RlcCA9IEpVTVBfRlJBTUVTW2VudGl0eS5zdGF0ZV1bZW50aXR5Lmp1bXBTdGVwXTtcbiAgICAgICAgICAgIGlmICgoZW50aXR5LnggKyBzdGVwLnggPj0gMCkgJiYgKGVudGl0eS54ICsgc3RlcC54IDwgTEVWRUxfQ09MUykpIHtcbiAgICAgICAgICAgICAgICBsZXQgdGVycmFpbiA9IGZpZWxkLmxheW91dFtlbnRpdHkueSArIHN0ZXAueV1bZW50aXR5LnggKyBzdGVwLnhdO1xuICAgICAgICAgICAgICAgIGlmIChbJz0nLCAnfCcsICctJ10uaW5jbHVkZXModGVycmFpbikpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpZWxkLm9uU29saWQoZW50aXR5LngsIGVudGl0eS55KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZW50aXR5LnN0YXRlID0gZW50aXR5Lm5leHRTdGF0ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVudGl0eS5uZXh0U3RhdGUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGVudGl0eS5zdGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgU3RhdGUuSlVNUF9SSUdIVDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW50aXR5Lm5leHRTdGF0ZSA9IFN0YXRlLlJJR0hUO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFN0YXRlLkpVTVBfTEVGVDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW50aXR5Lm5leHRTdGF0ZSA9IFN0YXRlLkxFRlQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgU3RhdGUuSlVNUF9VUDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW50aXR5Lm5leHRTdGF0ZSA9IFN0YXRlLlVQO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVudGl0eS5zdGF0ZSA9IFN0YXRlLkZBTExJTkc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRlcnJhaW4gPT09ICdIJykge1xuICAgICAgICAgICAgICAgICAgICBlbnRpdHkueCArPSBzdGVwLng7XG4gICAgICAgICAgICAgICAgICAgIGVudGl0eS55ICs9IHN0ZXAueTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoZW50aXR5Lm5leHRTdGF0ZSA9PT0gU3RhdGUuVVApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVudGl0eS5zdGF0ZSA9IFN0YXRlLlVQO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZW50aXR5LnN0YXRlID0gU3RhdGUuU1RPUFBFRDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbnRpdHkubmV4dFN0YXRlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVudGl0eS54ICs9IHN0ZXAueDtcbiAgICAgICAgICAgICAgICAgICAgZW50aXR5LnkgKz0gc3RlcC55O1xuICAgICAgICAgICAgICAgICAgICBlbnRpdHkuanVtcFN0ZXArKztcblxuICAgICAgICAgICAgICAgICAgICBpZiAoZW50aXR5Lmp1bXBTdGVwID49IEpVTVBfRlJBTUVTW2VudGl0eS5zdGF0ZV0ubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGVudGl0eS5zdGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgU3RhdGUuSlVNUF9SSUdIVDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW50aXR5LnN0YXRlID0gU3RhdGUuUklHSFQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgU3RhdGUuSlVNUF9MRUZUOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbnRpdHkuc3RhdGUgPSBTdGF0ZS5MRUZUO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFN0YXRlLkpVTVBfVVA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVudGl0eS5zdGF0ZSA9IFN0YXRlLlVQO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGZpZWxkLm9uU29saWQoZW50aXR5LngsIGVudGl0eS55KSkge1xuICAgICAgICAgICAgICAgICAgICBlbnRpdHkuc3RhdGUgPSBlbnRpdHkubmV4dFN0YXRlO1xuICAgICAgICAgICAgICAgICAgICBlbnRpdHkubmV4dFN0YXRlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVudGl0eS5zdGF0ZSA9IFN0YXRlLkZBTExJTkc7XG4gICAgICAgICAgICAgICAgICAgIGVudGl0eS5uZXh0U3RhdGUgPSBTdGF0ZS5TVE9QUEVEO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgU3RhdGUuRkFMTElORzpcbiAgICAgICAgICAgIGlmIChmaWVsZC5vblNvbGlkKGVudGl0eS54LCBlbnRpdHkueSkpIHtcbiAgICAgICAgICAgICAgICBlbnRpdHkuc3RhdGUgPSBlbnRpdHkubmV4dFN0YXRlIHx8IFN0YXRlLlNUT1BQRUQ7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGVudGl0eS55Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICB9XG5cbiAgICAvLyBJZiB3ZSB3ZXJlIGF0dGVtcHRpbmcgdG8gbW92ZSBzb21ld2hlcmUgYW5kIHJlYWxpemVkIHdlIHNob3VsZCBiZSBmYWxsaW5nIGluc3RlYWQsXG4gICAgLy8gd2Ugd2FudCB0byByZS1ydW4gdGhlIGVudGlyZSBhbGdvcml0aG0gb25jZS4gVGhpcyBhdm9pZHMgd2hhdCBib2lscyBkb3duIHRvIGEgXCJza2lwcGVkXG4gICAgLy8gZnJhbWVcIiBmcm9tIHRoZSB1c2VyJ3MgcG9pbnQgb2Ygdmlldy5cbiAgICBpZiAocmVwZWF0KSByZXR1cm4gYXBwbHlFbnRpdHlNb3ZlbWVudChlbnRpdHksIGZpZWxkKTtcbn1cbiIsIid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHsgU3RhdGUsIGFwcGx5RW50aXR5TW92ZW1lbnQgfSBmcm9tICcuL0VudGl0eSc7XG5pbXBvcnQgeyBJbnB1dCB9IGZyb20gJy4vSW5wdXQnO1xuaW1wb3J0IHsgU2NyZWVuIH0gZnJvbSAnLi9TY3JlZW4nO1xuXG5jb25zdCBERUFUSF9GUkFNRVMgPSBbJ3AnLCAncCcsICdiJywgJ2QnLCAnZCcsICdxJywgJ3AnLCAncCcsICdiJywgJ2QnLCAnZCcsICdxJywgJy0nLCAnLScsICdfJywgJ18nLCAnXycsICdfJywgJ18nXTtcblxuLyoqXG4gKiBQbGF5ZXJcbiAqL1xuZXhwb3J0IGNsYXNzIFBsYXllciB7XG4gICAgY29uc3RydWN0b3IoeCwgeSkge1xuICAgICAgICB0aGlzLnggPSB4O1xuICAgICAgICB0aGlzLnkgPSB5O1xuICAgICAgICB0aGlzLnN0YXRlID0gU3RhdGUuU1RPUFBFRDtcbiAgICAgICAgdGhpcy5uZXh0U3RhdGUgPSBTdGF0ZS5TVE9QUEVEO1xuICAgICAgICB0aGlzLnF1ZXVlZCA9IFtdO1xuICAgICAgICB0aGlzLmp1bXBTdGVwID0gMDtcbiAgICAgICAgdGhpcy5kZWF0aFN0ZXAgPSAwO1xuICAgIH1cblxuICAgIHVwZGF0ZShmaWVsZCwgbW92ZUZyYW1lKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlID09PSBTdGF0ZS5EWUlORykge1xuICAgICAgICAgICAgdGhpcy5kZWF0aFN0ZXArKztcbiAgICAgICAgICAgIGlmICh0aGlzLmRlYXRoU3RlcCA+PSBERUFUSF9GUkFNRVMubGVuZ3RoKSB0aGlzLnN0YXRlID0gU3RhdGUuREVBRDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnN0YXRlID09PSBTdGF0ZS5EWUlORyB8fCB0aGlzLnN0YXRlID09PSBTdGF0ZS5ERUFEKSByZXR1cm47XG5cbiAgICAgICAgaWYgKCFtb3ZlRnJhbWUpIHJldHVybjtcblxuICAgICAgICBsZXQgYWN0aW9uID0gSW5wdXQubGFzdEFjdGlvbigpO1xuXG4gICAgICAgIGlmIChhY3Rpb24gPT09IElucHV0LkFjdGlvbi5MRUZUKSB7XG4gICAgICAgICAgICB0aGlzLm5leHRTdGF0ZSA9IFN0YXRlLkxFRlQ7XG4gICAgICAgICAgICBJbnB1dC5jb25zdW1lKCk7XG4gICAgICAgIH0gZWxzZSBpZiAoYWN0aW9uID09PSBJbnB1dC5BY3Rpb24uUklHSFQpIHtcbiAgICAgICAgICAgIHRoaXMubmV4dFN0YXRlID0gU3RhdGUuUklHSFQ7XG4gICAgICAgICAgICBJbnB1dC5jb25zdW1lKCk7XG4gICAgICAgIH0gZWxzZSBpZiAoYWN0aW9uID09PSBJbnB1dC5BY3Rpb24uVVApIHtcbiAgICAgICAgICAgIHRoaXMubmV4dFN0YXRlID0gU3RhdGUuVVA7XG4gICAgICAgICAgICBJbnB1dC5jb25zdW1lKCk7XG4gICAgICAgIH0gZWxzZSBpZiAoYWN0aW9uID09PSBJbnB1dC5BY3Rpb24uRE9XTikge1xuICAgICAgICAgICAgdGhpcy5uZXh0U3RhdGUgPSBTdGF0ZS5ET1dOO1xuICAgICAgICAgICAgSW5wdXQuY29uc3VtZSgpO1xuICAgICAgICB9IGVsc2UgaWYgKGFjdGlvbiA9PT0gSW5wdXQuQWN0aW9uLkpVTVApIHtcbiAgICAgICAgICAgIHRoaXMubmV4dFN0YXRlID0gU3RhdGUuU1RBUlRfSlVNUDtcbiAgICAgICAgICAgIElucHV0LmNvbnN1bWUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBhcHBseUVudGl0eU1vdmVtZW50KHRoaXMsIGZpZWxkKTtcbiAgICB9XG5cbiAgICBkcmF3KCkge1xuICAgICAgICBsZXQgY2hhciA9ICdnJztcblxuICAgICAgICBzd2l0Y2ggKHRoaXMuc3RhdGUpIHtcbiAgICAgICAgICAgIGNhc2UgU3RhdGUuUklHSFQ6XG4gICAgICAgICAgICBjYXNlIFN0YXRlLkpVTVBfUklHSFQ6XG4gICAgICAgICAgICBjYXNlIFN0YXRlLlVQOlxuICAgICAgICAgICAgY2FzZSBTdGF0ZS5ET1dOOlxuICAgICAgICAgICAgICAgIGNoYXIgPSAncCc7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgU3RhdGUuTEVGVDpcbiAgICAgICAgICAgIGNhc2UgU3RhdGUuSlVNUF9MRUZUOlxuICAgICAgICAgICAgICAgIGNoYXIgPSAncSc7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgU3RhdGUuRkFMTElORzpcbiAgICAgICAgICAgICAgICBjaGFyID0gJ2InO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIFN0YXRlLkRZSU5HOlxuICAgICAgICAgICAgICAgIGNoYXIgPSBERUFUSF9GUkFNRVNbdGhpcy5kZWF0aFN0ZXBdO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIFN0YXRlLkRFQUQ6XG4gICAgICAgICAgICAgICAgY2hhciA9ICdfJztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIFNjcmVlbi53cml0ZSh0aGlzLngsIHRoaXMueSwgY2hhcik7XG4gICAgfVxuXG4gICAga2lsbCgpIHtcbiAgICAgICAgLy8gSnVzdCBhIGNvbnZlbmllbmNlIG1ldGhvZCBmb3Iga2lsbGluZyB0aGUgcGxheWVyLlxuICAgICAgICAvL1xuICAgICAgICAvLyBOb3RlIHRoYXQgXCJraWxsaW5nXCIgdGhlIHBsYXllciBqdXN0IHB1dHMgaXQgaW4gYSBkeWluZyBzdGF0ZSwgd2UnbGwgcGxheVxuICAgICAgICAvLyBhIGxpdHRsZSBkZWF0aCBhbmltYXRpb24gYXMgcm9ja3MgbW92ZSBhYm91dCBiZWZvcmUgdGhlIHBsYXllciBhY3R1YWxseSBkaWVzLFxuICAgICAgICAvLyBhdCB3aGljaCBwb2ludCB0aGV5IHdpbGwgbG9zZSBhIGxpZmUgYW5kIHRoZSBsZXZlbCBzdGFydHMgb3Zlci5cbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgIT0gU3RhdGUuRFlJTkcgJiYgdGhpcy5zdGF0ZSAhPSBTdGF0ZS5ERUFEKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gU3RhdGUuRFlJTkc7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCIvKipcbiAqIGBSb2NrYCBpcyBhIGNsYXNzIHJlcHJlc2VudGluZyB0aGUgRGVyIHJvY2tzLCB3aGljaCBmYWxsIHRocm91Z2ggdGhlIGxldmVsXG4gKiBhbmQga2lsbCB0aGUgcGxheWVyIGlmIHRvdWNoZWQuXG4gKi9cblxuaW1wb3J0IHsgTEVWRUxfQ09MUyB9IGZyb20gJy4vQ29uc3RhbnRzJztcbmltcG9ydCB7IFN0YXRlLCBhcHBseUVudGl0eU1vdmVtZW50IH0gZnJvbSAnLi9FbnRpdHknO1xuaW1wb3J0IHsgU2NyZWVuIH0gZnJvbSAnLi9TY3JlZW4nO1xuXG5jb25zdCBERUFUSF9GUkFNRVMgPSBbJ3snLCAnfScsICcoJywgJyknLCAnJScsICclJywgJzonLCAnOiddO1xuXG5leHBvcnQgY2xhc3MgUm9jayB7XG4gICAgY29uc3RydWN0b3IoZGlzcGVuc2VyKSB7XG4gICAgICAgIHRoaXMueCA9IGRpc3BlbnNlci54O1xuICAgICAgICB0aGlzLnkgPSBkaXNwZW5zZXIueTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IFN0YXRlLkZBTExJTkc7XG4gICAgICAgIHRoaXMubmV4dFN0YXRlID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmRlYXRoU3RlcCA9IDA7XG4gICAgfVxuXG4gICAgdXBkYXRlKGZpZWxkLCBtb3ZlRnJhbWUpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgPT09IFN0YXRlLkRZSU5HKSB7XG4gICAgICAgICAgICB0aGlzLmRlYXRoU3RlcCsrO1xuICAgICAgICAgICAgaWYgKHRoaXMuZGVhdGhTdGVwID49IERFQVRIX0ZSQU1FUy5sZW5ndGgpIHRoaXMuc3RhdGUgPSBTdGF0ZS5ERUFEO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgPT09IFN0YXRlLkRZSU5HIHx8IHRoaXMuc3RhdGUgPT09IFN0YXRlLkRFQUQpIHJldHVybjtcblxuICAgICAgICBpZiAoIW1vdmVGcmFtZSkgcmV0dXJuO1xuXG4gICAgICAgIGlmICh0aGlzLnN0YXRlID09PSBTdGF0ZS5TVE9QUEVEKSB7XG4gICAgICAgICAgICBpZiAodGhpcy54ID09PSAwIHx8ICFmaWVsZC5lbXB0eVNwYWNlKHRoaXMueCAtIDEsIHRoaXMueSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm5leHRTdGF0ZSA9IFN0YXRlLlJJR0hUO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnggPT09IExFVkVMX0NPTFMgLSAxIHx8ICFmaWVsZC5lbXB0eVNwYWNlKHRoaXMueCArIDEsIHRoaXMueSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm5leHRTdGF0ZSA9IFN0YXRlLkxFRlQ7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMubmV4dFN0YXRlID0gTWF0aC5yYW5kb20oKSA+IDAuNSA/IFN0YXRlLkxFRlQgOiBTdGF0ZS5SSUdIVDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnggPT09IDAgJiYgdGhpcy5zdGF0ZSA9PT0gU3RhdGUuTEVGVCkge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFN0YXRlLlJJR0hUO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMueCA9PT0gTEVWRUxfQ09MUyAtIDEgJiYgdGhpcy5zdGF0ZSA9PT0gU3RhdGUuUklHSFQpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTdGF0ZS5MRUZUO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgIT09IFN0YXRlLkZBTExJTkcgJiYgIWZpZWxkLm9uU29saWQodGhpcy54LCB0aGlzLnkpKSB7XG4gICAgICAgICAgICB0aGlzLm5leHRTdGF0ZSA9IFN0YXRlLkZBTExJTkc7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZmllbGQuaXNMYWRkZXIodGhpcy54LCB0aGlzLnkgKyAxKSAmJiBbU3RhdGUuTEVGVCwgU3RhdGUuUklHSFRdLmluY2x1ZGVzKHRoaXMuc3RhdGUpKSB7XG4gICAgICAgICAgICBsZXQgciA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDQpO1xuICAgICAgICAgICAgdGhpcy5uZXh0U3RhdGUgPSBbU3RhdGUuTEVGVCwgU3RhdGUuUklHSFQsIFN0YXRlLkRPV04sIFN0YXRlLkRPV05dW3JdO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZpZWxkLmlzRWF0ZXIodGhpcy54LCB0aGlzLnkpKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gU3RhdGUuRFlJTkc7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYXBwbHlFbnRpdHlNb3ZlbWVudCh0aGlzLCBmaWVsZCk7XG4gICAgfVxuXG4gICAgZHJhdygpIHtcbiAgICAgICAgbGV0IGNoYXIgPSAnbyc7XG5cbiAgICAgICAgc3dpdGNoICh0aGlzLnN0YXRlKSB7XG4gICAgICAgICAgICBjYXNlIFN0YXRlLkRZSU5HOlxuICAgICAgICAgICAgICAgIGNoYXIgPSBERUFUSF9GUkFNRVNbdGhpcy5kZWF0aFN0ZXBdO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBTdGF0ZS5ERUFEOlxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIFNjcmVlbi53cml0ZSh0aGlzLngsIHRoaXMueSwgY2hhcik7XG4gICAgfVxufVxuIiwiLyoqXG4gKiBgTGV2ZWxgIGlzIGEgc2luZ2xldG9uIHRoYXQgaGFuZGxlcyBsb2dpYyByZWxhdGVkIHRvIGxvYWRpbmcgbGV2ZWxzLiBBIFwibGV2ZWxcIlxuICogaXMgYSBidW5kbGUgb2YgZGF0YSAobGlrZSBsYXlvdXQsIGRpc3BlbnNlcnMsIHBsYXllciBwb3NpdGlvbiwgZXRjLikuIFdoZW4geW91XG4gKiBsb2FkIGEgbGV2ZWwsIHRoYXQgZGF0YSBpcyB1c2VkIHRvIGluaXRpYWxpemUgYSBuZXcgXCJwbGF5aW5nIGZpZWxkXCIgLS0gdGhpcyBpc1xuICogd2hhdCB0aGUgcGxheWVyIG1vdmVzIGFyb3VuZCBvbiBhbmQgaW50ZXJhY3RzIHdpdGguXG4gKlxuICogKE5hbWluZyB0aGluZ3MgaXMgaGFyZCwgc28gaXQgaGVscHMgdG8gbWFrZSBhIGRlY2lzaW9uIGFuZCB0aGVuIHN0aWNrIHRvIGl0XG4gKiB0aHJvdWdob3V0IHlvdXIgY29kZWJhc2UuIEluIHRoaXMgY2FzZSwgdGhlIGRlY2lzaW9uIGlzIHRoYXQgYSBcImxldmVsXCIgaXMgYVxuICogc3RhdGljIGJsb2NrIG9mIGRhdGEgYWJvdXQgYSBsZXZlbCB0aGUgdXNlciBDT1VMRCBwbGF5LCB3aGVyZWFzIGEgbGV2ZWwgYmVpbmdcbiAqIGFjdGl2ZWx5IHBsYXllZCBpcyBjYWxsZWQgYSBwbGF5aW5nIGZpZWxkLilcbiAqL1xuXG5pbXBvcnQgeyBMRVZFTF9ST1dTLCBMRVZFTF9DT0xTIH0gZnJvbSAnLi9Db25zdGFudHMnO1xuaW1wb3J0IExldmVsRGF0YSBmcm9tICcuLi9sZXZlbHMvbGV2ZWxzLmpzb24nO1xuXG5leHBvcnQgY29uc3QgTGV2ZWwgPSB7XG4gICAgTEVWRUxTOiBMZXZlbERhdGEsXG4gICAgTEVWRUxfQ09VTlQ6IExldmVsRGF0YS5sZW5ndGgsXG5cbiAgICBsb2FkKGxldmVsTnVtYmVyKSB7XG4gICAgICAgIC8vIEluIHRoZSBvcmlnaW5hbCBMYWRkZXIsIFwibGV2ZWwgN1wiIHdhcyB0aGUgbGFzdCBsZXZlbCwgYW5kIGNvbnRpbnVpbmcgdG9cbiAgICAgICAgLy8gcGxheSBsb29wZWQgeW91IGFyb3VuZCB0byB0aGUgYmVnaW5uaW5nIGFnYWluIChsZXZlbCA4IGlzIEVhc3kgU3RyZWV0XG4gICAgICAgIC8vIGFnYWluIGFuZCBzbyBvbiwgYW5kIHNvIGlzIGxldmVsIDE1LCBldGMuKS5cbiAgICAgICAgbGV0IGxldmVsID0gTGV2ZWwuTEVWRUxTW2xldmVsTnVtYmVyICUgTGV2ZWwuTEVWRUxTLmxlbmd0aF07XG4gICAgICAgIGlmICghbGV2ZWwpIHRocm93IG5ldyBFcnJvcihgTm8gc3VjaCBsZXZlbCBudW1iZXI6ICR7bGV2ZWxOdW1iZXJ9YCk7XG5cbiAgICAgICAgLy8gUGVyZm9ybSBzb21lIHNhbml0eSBjaGVja3Mgb24gdGhlIGxldmVsIGxheW91dCBhbmQgZXh0cmFjdCB1c2VmdWwgaW5mb1xuICAgICAgICAvLyBsaWtlIHBsYXllciBzdGFydCBwb3NpdGlvbiBhbmQgZGlzcGVuc2VyIHBvc2l0aW9ucyBldGMuXG5cbiAgICAgICAgbGV0IGxheW91dCA9IGxldmVsLmxheW91dC5tYXAocm93ID0+IHJvdy5zcGxpdCgnJykpO1xuICAgICAgICBsZXQgZGlzcGVuc2VycyA9IFtdO1xuICAgICAgICBsZXQgcGxheWVyO1xuXG4gICAgICAgIC8vIFNhbml0eSBjaGVja1xuICAgICAgICBsYXlvdXQgPSBsYXlvdXQuc2xpY2UoMCwgTEVWRUxfUk9XUyk7XG5cbiAgICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCBMRVZFTF9ST1dTOyB5KyspIHtcbiAgICAgICAgICAgIC8vIFNhbml0eSBjaGVja3NcbiAgICAgICAgICAgIGlmICghbGF5b3V0W3ldKSBsYXlvdXRbeV0gPSBbXTtcbiAgICAgICAgICAgIGxheW91dFt5XSA9IGxheW91dFt5XS5zbGljZSgwLCBMRVZFTF9DT0xTKTtcblxuICAgICAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCBMRVZFTF9DT0xTOyB4KyspIHtcbiAgICAgICAgICAgICAgICAvLyBTYW5pdHkgY2hlY2tcbiAgICAgICAgICAgICAgICBpZiAoIWxheW91dFt5XVt4XSkgbGF5b3V0W3ldW3hdID0gJyAnO1xuXG4gICAgICAgICAgICAgICAgLy8gRGVyIERpc3BlbnNlcnMgKFYpIGFuZCBEZXIgRWF0ZXJzICgqKSBoYXZlIGJlaGF2aW9ycywgc28gaXQgaXMgY29udmVuaWVudCBmb3IgdXNcbiAgICAgICAgICAgICAgICAvLyB0byBjb25zdHJ1Y3QgYSBsaXN0IG9mIHRoZW0sIGJ1dCB0aGV5IGFyZSBwZXJtYW5lbnQgcGFydHMgb2YgdGhlIGxheW91dCwgc28gd2UgY2FuXG4gICAgICAgICAgICAgICAgLy8gbGVhdmUgdGhlbSBhcyBwYXJ0IG9mIHRoZSBsZXZlbCBhbmQgZHJhdyB0aGVtIG5vcm1hbGx5LlxuXG4gICAgICAgICAgICAgICAgaWYgKGxheW91dFt5XVt4XSA9PT0gJ1YnKSB7XG4gICAgICAgICAgICAgICAgICAgIGRpc3BlbnNlcnMucHVzaCh7IHgsIHkgfSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gVHJlYXN1cmUgKCQpLCBTdGF0dWVzICgmKSwgYW5kIHRoZSBMYWQgKHApIGFyZSB0cmFuc2llbnQgLSB0aGUgcGxheWVyIG1vdmVzIGFyb3VuZCBhbmRcbiAgICAgICAgICAgICAgICAvLyBjYW4gcGljayB1cCB0aGUgdHJlYXN1cmVzIGFuZCBzdGF0dWVzLiBUaGF0J3Mgd2h5IGZvciB0aGVzZSBlbGVtZW50cywgd2UgYWRkIHRoZW0gdG9cbiAgICAgICAgICAgICAgICAvLyBvdXIgbGlzdHMgQU5EIHdlIHJlbW92ZSB0aGVtIGZyb20gdGhlIFwicGxheWluZyBmaWVsZFwiLCB3ZSdsbCBkcmF3IHRoZW0gc2VwYXJhdGVseSBvblxuICAgICAgICAgICAgICAgIC8vIHRvcCBvZiB0aGUgbGF5b3V0LlxuXG4gICAgICAgICAgICAgICAgaWYgKGxheW91dFt5XVt4XSA9PT0gJ3AnKSB7XG4gICAgICAgICAgICAgICAgICAgIGxheW91dFt5XVt4XSA9ICcgJztcbiAgICAgICAgICAgICAgICAgICAgcGxheWVyID0geyB4LCB5IH07XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gRXZlcnl0aGluZyBlbHNlLCBsaWtlIGZsb29ycyAoPSksIHdhbGxzICh8KSwgbGFkZGVycyAoSCkgYW5kIGZpcmUgKF4pLCBpcyBwYXJ0IG9mIHRoZVxuICAgICAgICAgICAgICAgIC8vIGxheW91dC4gVGhlIExhZCBpbnRlcmFjdHMgd2l0aCB0aGVtLCBidXQgd2UgY2FuIGhhbmRsZSB0aGF0IGR1cmluZyBvdXIgbW92ZW1lbnQgY2hlY2tzLlxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5hbWU6IGxldmVsLm5hbWUsXG4gICAgICAgICAgICBsYXlvdXQsXG4gICAgICAgICAgICBkaXNwZW5zZXJzLFxuICAgICAgICAgICAgcGxheWVyXG4gICAgICAgIH07XG4gICAgfVxufTtcbiIsIi8qKlxuICogYFBsYXlpbmdGaWVsZGAgaXMgYSBjbGFzcyB0aGF0IHJlcHJlc2VudHMgYSBsZXZlbCB0aGF0IGlzIGFjdGl2ZWx5IGJlaW5nIHBsYXllZCBvbi1zY3JlZW4uXG4gKiBBIG5ldyBvbmUgaXMgY3JlYXRlZCBieSB0aGUgZ2FtZSBzZXNzaW9uIGFueSB0aW1lIHdlIHN0YXJ0IGEgbmV3IGxldmVsLlxuICpcbiAqIExldmVsLXNwZWNpZmljIHN0dWZmIChsaWtlIGJvbnVzIHRpbWUsIGRpc3BlbnNlcnMsIHJvY2tzLCBwbGF5ZXIgcG9zaXRpb24sIGV0Yy4pIGlzIGFsbFxuICogbWFuYWdlZCBieSB0aGUgcGxheWluZyBmaWVsZC5cbiAqL1xuXG5pbXBvcnQgeyBMRVZFTF9DT0xTLCBTQ09SRV9ST0NLLCBTQ09SRV9TVEFUVUUsIFNDT1JFX1RSRUFTVVJFLCBNQVhfUk9DS1MsIERJU1BFTlNFUl9NQVhfUk9DS1MsIEhJRERFTl9GQUNUT1JfTUFYX1JPQ0tTIH0gZnJvbSAnLi9Db25zdGFudHMnO1xuaW1wb3J0IHsgR2FtZSB9IGZyb20gJy4vR2FtZSc7XG5pbXBvcnQgeyBQbGF5ZXIgfSBmcm9tICcuL1BsYXllcic7XG5pbXBvcnQgeyBSb2NrIH0gZnJvbSAnLi9Sb2NrJztcbmltcG9ydCB7IFN0YXRlIH0gZnJvbSAnLi9FbnRpdHknO1xuaW1wb3J0IHsgU2NyZWVuIH0gZnJvbSAnLi9TY3JlZW4nO1xuaW1wb3J0IHsgTGV2ZWwgfSBmcm9tICcuL0xldmVsJztcblxuZXhwb3J0IGNsYXNzIFBsYXlpbmdGaWVsZCB7XG4gICAgY29uc3RydWN0b3IobGV2ZWxOdW1iZXIpIHtcbiAgICAgICAgbGV0IGxldmVsID0gTGV2ZWwubG9hZChsZXZlbE51bWJlcik7XG5cbiAgICAgICAgLy8gU3RvcmUgbGV2ZWwtcmVsYXRlZCBpbmZvXG4gICAgICAgIHRoaXMubGF5b3V0ID0gbGV2ZWwubGF5b3V0O1xuICAgICAgICB0aGlzLmRpc3BlbnNlcnMgPSBsZXZlbC5kaXNwZW5zZXJzO1xuICAgICAgICB0aGlzLnRpbWUgPSAyMDAwO1xuXG4gICAgICAgIC8vIEluaXRpYWxpemUgcGxheWVyXG4gICAgICAgIHRoaXMucGxheWVyID0gbmV3IFBsYXllcihsZXZlbC5wbGF5ZXIueCwgbGV2ZWwucGxheWVyLnkpO1xuXG4gICAgICAgIC8vIEluaXRpYWxpemUgbGlzdCBvZiByb2NrcyAoZW1wdHkpXG4gICAgICAgIHRoaXMucm9ja3MgPSBbXTtcblxuICAgICAgICAvLyBOb3Qgd2lubmluZyB5ZXQgKHdoaWxlIFwid2lubmluZ1wiIHRoZSBwbGF5ZXIgc3RvcHMgbW92aW5nIGFuZCB3ZSBhZGQgdXAgdGhlIGJvbnVzIHNjb3JlKVxuICAgICAgICB0aGlzLndpbm5pbmcgPSBmYWxzZTtcbiAgICB9XG5cbiAgICB1cGRhdGUobW92ZUZyYW1lKSB7XG4gICAgICAgIC8vIElmIHdlJ3JlIGFscmVhZHkgd2lubmluZywga2VlcCBjb3VudGluZyBkb3duIHRoZSBib251cyB0aW1lLCBidXRcbiAgICAgICAgLy8gbm8gbW9yZSBtb3ZlbWVudCB3aWxsIGhhcHBlbiBvbiB0aGlzIGxldmVsLlxuICAgICAgICBpZiAodGhpcy53aW5uaW5nKSB7XG4gICAgICAgICAgICBHYW1lLnNlc3Npb24udXBkYXRlU2NvcmUoU0NPUkVfVFJFQVNVUkUpO1xuICAgICAgICAgICAgdGhpcy50aW1lIC09IDEwO1xuICAgICAgICAgICAgaWYgKHRoaXMudGltZSA8IDApIEdhbWUuc2Vzc2lvbi5zdGFydE5leHRMZXZlbCgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ291bnQgZG93biBib251cyB0aW1lXG4gICAgICAgIGlmICh0aGlzLnRpbWUgPiAwICYmIG1vdmVGcmFtZSkgdGhpcy50aW1lLS07XG5cbiAgICAgICAgbGV0IG9sZFggPSB0aGlzLnBsYXllci54LCBvbGRZID0gdGhpcy5wbGF5ZXIueTtcblxuICAgICAgICAvLyBNb3ZlIHBsYXllciBiYXNlZCBvbiB1c2VyIGlucHV0XG4gICAgICAgIHRoaXMucGxheWVyLnVwZGF0ZSh0aGlzLCBtb3ZlRnJhbWUpO1xuXG4gICAgICAgIC8vIEFueSB0aW1lIHlvdSBtb3ZlIE9GRiBvZiBhIGRpc2FwcGVhcmluZyBmbG9vciwgaXQgZ29lcyBhd2F5LlxuICAgICAgICBpZiAob2xkWCAhPT0gdGhpcy5wbGF5ZXIueCAmJiBvbGRZID09PSB0aGlzLnBsYXllci55KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0Rpc2FwcGVhcmluZ0Zsb29yKG9sZFgsIG9sZFkgKyAxKSkge1xuICAgICAgICAgICAgICAgIHRoaXMubGF5b3V0W29sZFkgKyAxXVtvbGRYXSA9ICcgJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENoZWNrIGlmIHBsYXllciBzaG91bGQgYmUgZGVhZCAoYmVmb3JlIG1vdmluZyByb2NrcylcbiAgICAgICAgaWYgKG1vdmVGcmFtZSkgdGhpcy5jaGVja0lmUGxheWVyU2hvdWxkRGllKEdhbWUuc2Vzc2lvbik7XG5cbiAgICAgICAgLy8gTW92ZSByb2Nrc1xuICAgICAgICBmb3IgKGxldCByb2NrIG9mIHRoaXMucm9ja3MpIHJvY2sudXBkYXRlKHRoaXMsIG1vdmVGcmFtZSk7XG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgcGxheWVyIHNob3VsZCBiZSBkZWFkIChhZnRlciBtb3Zpbmcgcm9ja3MpXG4gICAgICAgIGlmIChtb3ZlRnJhbWUpIHRoaXMuY2hlY2tJZlBsYXllclNob3VsZERpZShHYW1lLnNlc3Npb24pO1xuXG4gICAgICAgIGlmIChtb3ZlRnJhbWUpIHtcbiAgICAgICAgICAgIC8vIENvbGxlY3Qgc3RhdHVlc1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNTdGF0dWUodGhpcy5wbGF5ZXIueCwgdGhpcy5wbGF5ZXIueSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxheW91dFt0aGlzLnBsYXllci55XVt0aGlzLnBsYXllci54XSA9ICcgJztcbiAgICAgICAgICAgICAgICBHYW1lLnNlc3Npb24udXBkYXRlU2NvcmUoU0NPUkVfU1RBVFVFKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQ29sbGVjdCB0cmVhc3VyZSAoZW5kcyB0aGUgY3VycmVudCBsZXZlbClcbiAgICAgICAgICAgIGlmICh0aGlzLmlzVHJlYXN1cmUodGhpcy5wbGF5ZXIueCwgdGhpcy5wbGF5ZXIueSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLndpbm5pbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gSW50ZXJhY3Qgd2l0aCB0cmFtcG9saW5lc1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNUcmFtcG9saW5lKHRoaXMucGxheWVyLngsIHRoaXMucGxheWVyLnkpKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA1KSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsYXllci5zdGF0ZSA9IFN0YXRlLkxFRlQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsYXllci5uZXh0U3RhdGUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXIuc3RhdGUgPSBTdGF0ZS5SSUdIVDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGxheWVyLm5leHRTdGF0ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsYXllci5zdGF0ZSA9IFN0YXRlLkpVTVBfVVA7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsYXllci5uZXh0U3RhdGUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsYXllci5qdW1wU3RlcCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXIuc3RhdGUgPSBTdGF0ZS5KVU1QX0xFRlQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsYXllci5uZXh0U3RhdGUgPSBTdGF0ZS5MRUZUO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXIuanVtcFN0ZXAgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGxheWVyLnN0YXRlID0gU3RhdGUuSlVNUF9SSUdIVDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGxheWVyLm5leHRTdGF0ZSA9IFN0YXRlLlJJR0hUO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXIuanVtcFN0ZXAgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBLaWxsIGRlYWQgcm9ja3NcbiAgICAgICAgICAgIHRoaXMucm9ja3MgPSB0aGlzLnJvY2tzLmZpbHRlcihyb2NrID0+IHJvY2suc3RhdGUgIT09IFN0YXRlLkRFQUQpO1xuXG4gICAgICAgICAgICAvLyBEaXNwZW5zZSBuZXcgcm9ja3NcbiAgICAgICAgICAgIGlmICh0aGlzLnJvY2tzLmxlbmd0aCA8IHRoaXMubWF4Um9ja3MoKSAmJiBNYXRoLnJhbmRvbSgpID4gMC45MSkge1xuICAgICAgICAgICAgICAgIGxldCBkaXNwZW5zZXIgPSB0aGlzLmRpc3BlbnNlcnNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogdGhpcy5kaXNwZW5zZXJzLmxlbmd0aCldO1xuICAgICAgICAgICAgICAgIHRoaXMucm9ja3MucHVzaChuZXcgUm9jayhkaXNwZW5zZXIpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gRHlpbmcgcGxheWVyXG4gICAgICAgICAgICBpZiAodGhpcy5wbGF5ZXIuc3RhdGUgPT09IFN0YXRlLkRFQUQpIHtcbiAgICAgICAgICAgICAgICBHYW1lLnNlc3Npb24ubGl2ZXMtLTtcbiAgICAgICAgICAgICAgICBpZiAoR2FtZS5zZXNzaW9uLmxpdmVzIDw9IDApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogTW9yZSBmYW5mYXJlXG4gICAgICAgICAgICAgICAgICAgIEdhbWUuc2hvd01haW5NZW51KCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgR2FtZS5zZXNzaW9uLnJlc3RhcnRMZXZlbCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGRyYXcoKSB7XG4gICAgICAgIC8vIERyYXcgbGF5b3V0XG4gICAgICAgIFNjcmVlbi53cml0ZSgwLCAwLCB0aGlzLmxheW91dC5tYXAocm93ID0+IHJvdy5qb2luKCcnKSkpO1xuXG4gICAgICAgIC8vIERyYXcgcGxheWVyXG4gICAgICAgIHRoaXMucGxheWVyLmRyYXcoKTtcblxuICAgICAgICAvLyBEcmF3IHJvY2tzXG4gICAgICAgIHRoaXMucm9ja3MuZm9yRWFjaChyb2NrID0+IHJvY2suZHJhdygpKTtcbiAgICB9XG5cbiAgICAvL1xuICAgIC8vIFV0aWxpdHkgZnVuY3Rpb25zIC0gdGhpcyBpcyBhbiBhdHRlbXB0IHRvIGNvbnNvbGlkYXRlIGxvZ2ljIGluIG9uZSBzcG90IGFuZCBtYWtlIG90aGVyXG4gICAgLy8gZnVuY3Rpb25zIChsaWtlIHRoZSB1cGRhdGUgbG9naWMgaW4gUGxheWVyKSBtb3JlIHJlYWRhYmxlLlxuICAgIC8vXG5cbiAgICBvblNvbGlkKHgsIHkpIHtcbiAgICAgICAgcmV0dXJuIFsnPScsICctJywgJ0gnLCAnfCddLmluY2x1ZGVzKHRoaXMubGF5b3V0W3kgKyAxXVt4XSkgfHwgdGhpcy5sYXlvdXRbeV1beF0gPT09ICdIJztcbiAgICB9XG5cbiAgICBlbXB0eVNwYWNlKHgsIHkpIHtcbiAgICAgICAgaWYgKHggPCAwIHx8IHggPj0gTEVWRUxfQ09MUykge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuICFbJ3wnLCAnPSddLmluY2x1ZGVzKHRoaXMubGF5b3V0W3ldW3hdKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlzTGFkZGVyKHgsIHkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGF5b3V0W3ldW3hdID09PSAnSCc7XG4gICAgfVxuXG4gICAgaXNTdGF0dWUoeCwgeSkge1xuICAgICAgICByZXR1cm4gdGhpcy5sYXlvdXRbeV1beF0gPT09ICcmJztcbiAgICB9XG5cbiAgICBpc1RyZWFzdXJlKHgsIHkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGF5b3V0W3ldW3hdID09PSAnJCc7XG4gICAgfVxuXG4gICAgaXNUcmFtcG9saW5lKHgsIHkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGF5b3V0W3ldW3hdID09PSAnLic7XG4gICAgfVxuXG4gICAgaXNFYXRlcih4LCB5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxheW91dFt5XVt4XSA9PT0gJyonO1xuICAgIH1cblxuICAgIGlzRmlyZSh4LCB5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxheW91dFt5XVt4XSA9PT0gJ14nO1xuICAgIH1cblxuICAgIGlzRGlzYXBwZWFyaW5nRmxvb3IoeCwgeSkge1xuICAgICAgICByZXR1cm4gdGhpcy5sYXlvdXRbeV1beF0gPT09ICctJztcbiAgICB9XG5cbiAgICBjYW5DbGltYlVwKHgsIHkpIHtcbiAgICAgICAgaWYgKHkgPCAwKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIHJldHVybiBbJ0gnLCAnJicsICckJ10uaW5jbHVkZXModGhpcy5sYXlvdXRbeV1beF0pO1xuICAgIH1cblxuICAgIGNhbkNsaW1iRG93bih4LCB5KSB7XG4gICAgICAgIHJldHVybiBbJ0gnLCAnJicsICckJywgJyAnLCAnXicsICcuJ10uaW5jbHVkZXModGhpcy5sYXlvdXRbeV1beF0pO1xuICAgIH1cblxuICAgIGNoZWNrSWZQbGF5ZXJTaG91bGREaWUoKSB7XG4gICAgICAgIC8vIElmIHdlJ3JlIEFMUkVBRFkgZHlpbmcgb3IgZGVhZCwgbGV0IG5hdHVyZSBydW4gaXRzIGNvdXJzZVxuICAgICAgICBpZiAodGhpcy5wbGF5ZXIuc3RhdGUgPT09IFN0YXRlLkRZSU5HIHx8IHRoaXMucGxheWVyLnN0YXRlID09PSBTdGF0ZS5ERUFEKSByZXR1cm47XG5cbiAgICAgICAgLy8gTGFuZGluZyBvbiBmaXJlIGtpbGxzIHlvdVxuICAgICAgICBpZiAodGhpcy5pc0ZpcmUodGhpcy5wbGF5ZXIueCwgdGhpcy5wbGF5ZXIueSkpIHtcbiAgICAgICAgICAgIHRoaXMucGxheWVyLnN0YXRlID0gU3RhdGUuRFlJTkc7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSdW5uaW5nIG91dCBvZiB0aW1lIGtpbGxzIHlvdVxuICAgICAgICBpZiAodGhpcy50aW1lIDw9IDApIHtcbiAgICAgICAgICAgIHRoaXMucGxheWVyLnN0YXRlID0gU3RhdGUuRFlJTkc7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSdW5uaW5nIGludG8gYSByb2NrIGtpbGxzIHlvdSwgYW5kIG1ha2VzIHRoZSByb2NrIHRoYXQga2lsbGVkIHlvdSBkaXNhcHBlYXIuXG4gICAgICAgIC8vIFRoYXQncyBub3QgbmVjZXNzYXJ5LCBJIGp1c3QgdGhpbmsgaXQgbG9va3MgYmV0dGVyLiBXaGlsZSB3ZSBwbGF5IHRoZSBkZWF0aFxuICAgICAgICAvLyBhbmltYXRpb24gd2UnbGwgY29udGludWUgdG8gbW92ZSByb2Nrcywgc28gYW5vdGhlciByb2NrIG1pZ2h0IGFsc28gXCJoaXRcIiB5b3UsXG4gICAgICAgIC8vIGJ1dCBpdCB3aWxsIGp1c3QgcGFzcyB0aHJvdWdoIHlvdXIgZHlpbmcgY2hhcmFjdGVyLlxuICAgICAgICAvL1xuICAgICAgICAvLyBJZiB3ZSdyZSBhYm92ZSBhIHJvY2sgd2l0aCAxIG9yIDIgc3BhY2VzIGJldHdlZW4sIHdlIGdldCBzb21lIHBvaW50cyBpbnN0ZWFkLlxuICAgICAgICAvL1xuICAgICAgICAvLyBBIGZ1bmN0aW9uIG5hbWVkIGBjaGVja0lmUGxheWVyU2hvdWxkRGllYCBpcyBwcm9iYWJseSBub3QgdGhlIGJlc3QgcGxhY2UgdG8gZG9cbiAgICAgICAgLy8gdGhpcywgYnV0IGl0J3MgY29udmVuaWVudCBiZWNhdXNlIHdlIHdhbnQgdG8gZG8gdGhpcyB0d2ljZSAoanVzdCBsaWtlIHRoZSBkZWF0aFxuICAgICAgICAvLyBjaGVjaykuXG4gICAgICAgIC8vXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICBwICAgICAgICAgICAgICAgICAgICAgICAgICBwXG4gICAgICAgIC8vICgxKSAgIHAgICAgIC0tPiAgICAgICAgICAgICgyKSAgIHAgICAgIC0tPlxuICAgICAgICAvLyAgICAgICAgbyAgICAgICAgICBvICAgICAgICAgICAgICAgIG8gICAgICAgICAgb1xuICAgICAgICAvLyAgICAgID09PT09ICAgICAgID09PT09ICAgICAgICAgID09PT09ICAgICAgID09PT09XG4gICAgICAgIC8vXG4gICAgICAgIC8vIEluIHNpdHVhdGlvbiAoMSksIHRoZXJlIHdpbGwgbmV2ZXIgYmUgYSBmcmFtZSBvbi1zY3JlZW4gd2hlcmUgdGhlIHBsYXllciBpcyBkaXJlY3RseVxuICAgICAgICAvLyBhYm92ZSB0aGUgcm9jaywgYnV0IHdlJ2xsIHN0aWxsIGNvdW50IGl0IGJlY2F1c2Ugd2UnbGwgY2hlY2sgb25jZSBhZnRlciB0aGUgcGxheWVyIG1vdmVzLlxuICAgICAgICAvLyBJbiBzaXR1YXRpb24gKDIpLCB0aGUgZmlyc3QgY2hlY2sgd29uJ3QgY291bnQsIGJ1dCB0aGUgc2Vjb25kIGNoZWNrIGFmdGVyIHRoZSByb2NrcyBtb3ZlXG4gICAgICAgIC8vIHdpbGwgZ2l2ZSB0aGUgc2NvcmUgKGFuZCB0aGUgZnJhbWUgZHJhd24gb24gc2NyZWVuIHdpbGwgc2hvdyB0aGUgcGxheWVyIGFib3ZlIHRoZSByb2NrKS5cbiAgICAgICAgLy9cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnJvY2tzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wbGF5ZXIueCA9PT0gdGhpcy5yb2Nrc1tpXS54KSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGxheWVyLnkgPT09IHRoaXMucm9ja3NbaV0ueSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsYXllci5raWxsKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucm9ja3Muc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMucGxheWVyLnkgPT09IHRoaXMucm9ja3NbaV0ueSAtIDEgJiYgdGhpcy5lbXB0eVNwYWNlKHRoaXMucGxheWVyLngsIHRoaXMucGxheWVyLnkgKyAxKSkge1xuICAgICAgICAgICAgICAgICAgICBHYW1lLnNlc3Npb24udXBkYXRlU2NvcmUoU0NPUkVfUk9DSyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnBsYXllci55ID09PSB0aGlzLnJvY2tzW2ldLnkgLSAyICYmIHRoaXMuZW1wdHlTcGFjZSh0aGlzLnBsYXllci54LCB0aGlzLnBsYXllci55ICsgMSkgJiYgdGhpcy5lbXB0eVNwYWNlKHRoaXMucGxheWVyLngsIHRoaXMucGxheWVyLnkgKyAyKSkge1xuICAgICAgICAgICAgICAgICAgICBHYW1lLnNlc3Npb24udXBkYXRlU2NvcmUoU0NPUkVfUk9DSyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgbWF4Um9ja3MoKSB7XG4gICAgICAgIC8vIFRoZSB0b3RhbCBudW1iZXIgb2Ygcm9ja3Mgd2UgY2FuIGhhdmUgb24gc2NyZWVuIGlzIGJhc2VkIG9uIGEgZ2xvYmFsIG1heCByb2NrcyB2YWx1ZSxcbiAgICAgICAgLy8gdGhlbiBpbmNyZWFzZWQgc2xpZ2h0bHkgYnkgdGhlIG51bWJlciBvZiBkaXNwZW5zZXJzIG9uIHRoZSBsZXZlbCwgdGhlbiBpbmNyZWFzZWQgYWdhaW5cbiAgICAgICAgLy8gYnkgYSBoaWRkZW4gZGlmZmljdWx0eSBmYWN0b3IgKGxldmVsIGN5Y2xlcykuXG4gICAgICAgIHJldHVybiBNQVhfUk9DS1MgKyB0aGlzLmRpc3BlbnNlcnMubGVuZ3RoICogRElTUEVOU0VSX01BWF9ST0NLUyArIEdhbWUuc2Vzc2lvbi5oaWRkZW5GYWN0b3IoKSAqIEhJRERFTl9GQUNUT1JfTUFYX1JPQ0tTO1xuICAgIH1cbn1cbiIsIi8qKlxuICogYEdhbWVTZXNzaW9uYCBpcyBhIGNsYXNzIHRoYXQgcmVwcmVzZW50cy4uLiB3ZWxsLCBhIGdhbWUgc2Vzc2lvbiEgSXQgaXMgY3JlYXRlZCB3aGVuIHRoZVxuICogcGxheWVyIHByZXNzZXMgYFBgIGF0IHRoZSBtYWluIG1lbnUsIGFuZCBlbmRzIHdoZW4gdGhlIHBsYXllciBydW5zIG91dCBvZiBsaXZlcy5cbiAqXG4gKiBUaGUgZ2FtZSBzZXNzaW9uIHRyYWNrcyB2YWx1ZXMgdGhhdCBwZXJzaXN0IGFjcm9zcyBsZXZlbHMgKGxpa2UgbnVtYmVyIG9mIGxpdmVzLCBzY29yZSxcbiAqIHRoZSBsZXZlbCBudW1iZXIsIGV0Yy4pLiBNb3N0IG9mIHRoZSBhY3R1YWwgaW4tZ2FtZSBsb2dpYyBpdCBoYW5kcyBvZmYgdG8gYFBsYXlpbmdGaWVsZGAuXG4gKi9cblxuaW1wb3J0IHsgUExBWV9TUEVFRFMsIFNDT1JFX1JPQ0ssIFNDT1JFX1NUQVRVRSwgU0NPUkVfVFJFQVNVUkUsIEhJRERFTl9GQUNUT1JfUExBWV9TUEVFRCwgTkVXX0xJRkVfU0NPUkUgfSBmcm9tICcuL0NvbnN0YW50cyc7XG5pbXBvcnQgeyBHYW1lIH0gZnJvbSAnLi9HYW1lJztcbmltcG9ydCB7IFBsYXlpbmdGaWVsZCB9IGZyb20gJy4vUGxheWluZ0ZpZWxkJztcbmltcG9ydCB7IExldmVsIH0gZnJvbSAnLi9MZXZlbCc7XG5pbXBvcnQgeyBTY3JlZW4gfSBmcm9tICcuL1NjcmVlbic7XG5pbXBvcnQgeyBJbnB1dCB9IGZyb20gJy4vSW5wdXQnO1xuXG5leHBvcnQgY2xhc3MgR2FtZVNlc3Npb24ge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnNjb3JlID0gMDtcbiAgICAgICAgdGhpcy5sZXZlbE51bWJlciA9IDA7XG4gICAgICAgIHRoaXMubGV2ZWxDeWNsZSA9IDE7XG4gICAgICAgIHRoaXMubGl2ZXMgPSA1O1xuICAgICAgICB0aGlzLm5leHRMaWZlID0gTkVXX0xJRkVfU0NPUkU7XG4gICAgICAgIHRoaXMucGF1c2VkID0gZmFsc2U7XG4gICAgfVxuXG4gICAgdXBkYXRlKCkge1xuICAgICAgICAvLyBUaGUgYEdhbWVgIGNvbnRyb2xzIHRoZSBvdmVyYWxsIGdhbWUgbG9vcCwgd2hpY2ggcnVucyBhdCBhIGZpeGVkIDYwIGZyYW1lcyBwZXIgc2Vjb25kLlxuICAgICAgICAvL1xuICAgICAgICAvLyBIb3dldmVyLCBMYWRkZXIgaGFzIHRoZSBjb25jZXB0IG9mIFwicGxheSBzcGVlZFwiIHdoaWNoIHRoZSBwbGF5ZXIgY2FuIGNoYW5nZSBhdCB0aGUgbWFpblxuICAgICAgICAvLyBtZW51LCBhbmQgaXQgY29udHJvbHMgaG93IGZhc3QgdGhlIGdhbWUgcnVucy4gVG8gYWNjb21wbGlzaCB0aGF0LCB3ZSBjYW4gZG8gYSBzZWNvbmRcbiAgICAgICAgLy8gZnJhbWUgZ2F0ZSBoZXJlLiBUaGlzIGdhdGUgc2V0cyBhIGZsYWcgY2FsbGVkIGBtb3ZlRnJhbWVgIElGIHRoaW5ncyBjYW4gbW92ZSBpbiB0aGlzIGZyYW1lLlxuICAgICAgICAvL1xuICAgICAgICAvLyBXZSBkbyBpdCB0aGlzIHdheSBzbyB0aGF0IGFuaW1hdGlvbnMgKGxpa2UgdGhlIHBsYXkgZGVhdGggYW5pbWF0aW9uLCBvciB0aGUgZW5kLW9mLWxldmVsXG4gICAgICAgIC8vIHNjb3JlIGFuaW1hdGlvbikgY2FuIHJ1biBhdCB0aGUgc2FtZSBzcGVlZCBubyBtYXR0ZXIgd2hhdCB0aGUgcGxheSBzcGVlZCBpcy5cbiAgICAgICAgbGV0IG5vdyA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgICAgICBsZXQgbGFzdEZyYW1lID0gdGhpcy5sYXN0RnJhbWUgfHwgMDtcbiAgICAgICAgbGV0IG1vdmVGcmFtZSA9IGZhbHNlO1xuXG4gICAgICAgIGlmIChub3cgLSBsYXN0RnJhbWUgPj0gKHRoaXMubmV4dEZyYW1lIHx8IDApKSB7XG4gICAgICAgICAgICBtb3ZlRnJhbWUgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5uZXh0RnJhbWUgPSBub3cgKyB0aGlzLm1vdmVGcmFtZU1pbGxpc2Vjb25kRGVsYXkoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnBhdXNlZCAmJiBbSW5wdXQuQWN0aW9uLlBBVVNFLCBJbnB1dC5BY3Rpb24uUkVTVU1FXS5pbmNsdWRlcyhJbnB1dC5sYXN0QWN0aW9uKCkpKSB7XG4gICAgICAgICAgICB0aGlzLnBhdXNlZCA9IGZhbHNlO1xuICAgICAgICAgICAgSW5wdXQuY29uc3VtZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLnBhdXNlZCAmJiBJbnB1dC5sYXN0QWN0aW9uKCkgPT09IElucHV0LkFjdGlvbi5QQVVTRSkge1xuICAgICAgICAgICAgdGhpcy5wYXVzZWQgPSB0cnVlO1xuICAgICAgICAgICAgSW5wdXQuY29uc3VtZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMucGF1c2VkKSByZXR1cm47XG5cbiAgICAgICAgLy8gSWYgd2UgaGF2ZW4ndCBpbnN0YW50aWF0ZWQgdGhlIHBsYXlpbmcgZmllbGQgeWV0LCBjcmVhdGUgaXQgbm93LlxuICAgICAgICBpZiAoIXRoaXMuZmllbGQpIHRoaXMuZmllbGQgPSBuZXcgUGxheWluZ0ZpZWxkKHRoaXMubGV2ZWxOdW1iZXIpO1xuXG4gICAgICAgIC8vIEhhbmQgb2ZmIHRvIHRoZSBwbGF5aW5nIGZpZWxkIGZvciBhY3R1YWwgaW4tZ2FtZSBsb2dpY1xuICAgICAgICB0aGlzLmZpZWxkLnVwZGF0ZShtb3ZlRnJhbWUpO1xuXG4gICAgICAgIHRoaXMuaGFuZGxlQ2hlYXRDb2RlcygpO1xuICAgIH1cblxuICAgIGRyYXcoKSB7XG4gICAgICAgIGlmICh0aGlzLmZpZWxkKSB0aGlzLmZpZWxkLmRyYXcoKTtcblxuICAgICAgICBsZXQgc3RhdCA9IFtcbiAgICAgICAgICAgIFN0cmluZyh0aGlzLmxpdmVzKS5wYWRTdGFydCgyLCAnICcpLFxuICAgICAgICAgICAgU3RyaW5nKHRoaXMubGV2ZWxOdW1iZXIgKyAxKS5wYWRTdGFydCgyLCAnICcpLFxuICAgICAgICAgICAgU3RyaW5nKHRoaXMuc2NvcmUpLnBhZFN0YXJ0KDYsICcgJyksXG4gICAgICAgICAgICB0aGlzLmZpZWxkID8gU3RyaW5nKHRoaXMuZmllbGQudGltZSkucGFkU3RhcnQoNCwgJyAnKSA6ICcnXG4gICAgICAgIF07XG4gICAgICAgIFNjcmVlbi53cml0ZSgwLCAyMSwgYExhZHMgICAke3N0YXRbMF19ICAgICBMZXZlbCAgICR7c3RhdFsxXX0gICAgICBTY29yZSAgICR7c3RhdFsyXX0gICAgICBCb251cyB0aW1lICAgJHtzdGF0WzNdfWApO1xuXG4gICAgICAgIGlmICh0aGlzLnBhdXNlZCkge1xuICAgICAgICAgICAgU2NyZWVuLndyaXRlKDAsIDIzLCAnUGF1c2VkIC0gdHlwZSBFU0NhcGUgb3IgUkVUVVJOIHRvIGNvbnRpbnVlLicpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVzdGFydExldmVsKCkge1xuICAgICAgICB0aGlzLmZpZWxkID0gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIHN0YXJ0TmV4dExldmVsKCkge1xuICAgICAgICB0aGlzLmZpZWxkID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmxldmVsTnVtYmVyKys7XG4gICAgICAgIGlmICh0aGlzLmxldmVsTnVtYmVyICUgTGV2ZWwuTEVWRUxfQ09VTlQgPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMubGV2ZWxDeWNsZSsrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdXBkYXRlU2NvcmUoc2NvcmVUeXBlKSB7XG4gICAgICAgIHN3aXRjaCAoc2NvcmVUeXBlKSB7XG4gICAgICAgICAgICBjYXNlIFNDT1JFX1JPQ0s6XG4gICAgICAgICAgICAgICAgdGhpcy5zY29yZSArPSAyMDA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFNDT1JFX1NUQVRVRTpcbiAgICAgICAgICAgICAgICB0aGlzLnNjb3JlICs9IHRoaXMuZmllbGQudGltZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgU0NPUkVfVFJFQVNVUkU6XG4gICAgICAgICAgICAgICAgLy8gQWRkZWQgcmVwZWF0ZWRseSBhZnRlciB3aW5uaW5nIHRoZSBsZXZlbFxuICAgICAgICAgICAgICAgIHRoaXMuc2NvcmUgKz0gMTA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5zY29yZSA+PSB0aGlzLm5leHRMaWZlKSB7XG4gICAgICAgICAgICB0aGlzLmxpdmVzKys7XG4gICAgICAgICAgICB0aGlzLm5leHRMaWZlICs9IE5FV19MSUZFX1NDT1JFO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaGlkZGVuRmFjdG9yKCkge1xuICAgICAgICAvLyBUaGlzIFwiaGlkZGVuXCIgZGlmZmljdWx0eSBsZXZlbCBpbmNyZWFzZXMgc3RlYWRpbHkgYXMgdGhlIHBsYXllciBjb21wbGV0ZXMgYVxuICAgICAgICAvLyBsZXZlbCBjeWNsZSAoZXZlcnkgdGltZSB0aGV5IHJlYWNoIHRoZSBFYXN5IFN0cmVldCBsZXZlbCkuIFRoaXMgbWFrZXMgdGhlXG4gICAgICAgIC8vIGdhbWUgc2xvd2x5IGhhcmRlciBhcyB5b3Uga2VlcCBwbGF5aW5nLlxuICAgICAgICByZXR1cm4gTWF0aC5mbG9vcih0aGlzLmxldmVsTnVtYmVyIC8gTGV2ZWwuTEVWRUxfQ09VTlQpO1xuICAgIH1cblxuICAgIG1vdmVGcmFtZU1pbGxpc2Vjb25kRGVsYXkoKSB7XG4gICAgICAgIC8vIFJlZ2FyZGxlc3Mgb2YgcGxheSBzcGVlZCwgdGhlIGdhbWUgZ2V0cyBzbGlnaHRseSBmYXN0ZXIgZXZlcnkgbGV2ZWwgY3ljbGVcbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoUExBWV9TUEVFRFNbR2FtZS5wbGF5U3BlZWRdIC0gdGhpcy5oaWRkZW5GYWN0b3IoKSAqIEhJRERFTl9GQUNUT1JfUExBWV9TUEVFRCAqIFBMQVlfU1BFRURTW0dhbWUucGxheVNwZWVkXSk7XG4gICAgfVxuXG4gICAgaGFuZGxlQ2hlYXRDb2RlcygpIHtcbiAgICAgICAgLy8gQ2hlYXQgY29kZXMgYXJlIHVzZWZ1bCBmb3IgdGVzdGluZywgYW5kIHRoaXMgZ2FtZSBpcyBubyBleGNlcHRpb24uIE9mIGNvdXJzZVxuICAgICAgICAvLyBUSEVTRSBjaGVhdCBjb2RlcyBkbyBub3QgYmVsb25nIGhlcmUsIGFzIHRoZXkgd291bGRuJ3QgYmUgY3JlYXRlZCB1bnRpbCAxMSB5ZWFyc1xuICAgICAgICAvLyBsYXRlciwgYnV0IHRoYXQgd29uJ3Qgc3RvcCBtZSBmcm9tIHVzaW5nIHRoZW0gYW55d2hlcmUgSSBnZXQgdGhlIGNoYW5jZSFcbiAgICAgICAgLy9cbiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT0gICAgID09PT09PT09PT09PT09PSAgICAgPT09PT09PT09PT09PT09ICAgPT09PT09PT0gID09PT09PT09XG4gICAgICAgIC8vIFxcXFwgLiAuIC4gLiAuIC4gLlxcXFwgICAvLy4gLiAuIC4gLiAuIC5cXFxcICAgLy8uIC4gLiAuIC4gLiAuXFxcXCAgXFxcXC4gLiAuXFxcXC8vIC4gLiAvL1xuICAgICAgICAvLyB8fC4gLiAuX19fX18uIC4gLnx8IHx8LiAuIC5fX19fXy4gLiAufHwgfHwuIC4gLl9fX19fLiAuIC58fCB8fCAuIC4gLlxcLyAuIC4gLnx8XG4gICAgICAgIC8vIHx8IC4gLnx8ICAgfHwuIC4gfHwgfHwgLiAufHwgICB8fC4gLiB8fCB8fCAuIC58fCAgIHx8LiAuIHx8IHx8LiAuIC4gLiAuIC4gLiB8fFxuICAgICAgICAvLyB8fC4gLiB8fCAgIHx8IC4gLnx8IHx8LiAuIHx8ICAgfHwgLiAufHwgfHwuIC4gfHwgICB8fCAuIC58fCB8fCAuIHwgLiAuIC4gLiAufHxcbiAgICAgICAgLy8gfHwgLiAufHwgICB8fC4gXy18fCB8fC1fIC58fCAgIHx8LiAuIHx8IHx8IC4gLnx8ICAgfHwuIF8tfHwgfHwtXy58XFwgLiAuIC4gLiB8fFxuICAgICAgICAvLyB8fC4gLiB8fCAgIHx8LScgIHx8IHx8ICBgLXx8ICAgfHwgLiAufHwgfHwuIC4gfHwgICB8fC0nICB8fCB8fCAgYHxcXF8gLiAufC4gLnx8XG4gICAgICAgIC8vIHx8IC4gX3x8ICAgfHwgICAgfHwgfHwgICAgfHwgICB8fF8gLiB8fCB8fCAuIF98fCAgIHx8ICAgIHx8IHx8ICAgfFxcIGAtXy98IC4gfHxcbiAgICAgICAgLy8gfHxfLScgfHwgIC58LyAgICB8fCB8fCAgICBcXHwuICB8fCBgLV98fCB8fF8tJyB8fCAgLnwvICAgIHx8IHx8ICAgfCBcXCAgLyB8LV8ufHxcbiAgICAgICAgLy8gfHwgICAgfHxfLScgICAgICB8fCB8fCAgICAgIGAtX3x8ICAgIHx8IHx8ICAgIHx8Xy0nICAgICAgfHwgfHwgICB8IFxcICAvIHwgIGB8fFxuICAgICAgICAvLyB8fCAgICBgJyAgICAgICAgIHx8IHx8ICAgICAgICAgYCcgICAgfHwgfHwgICAgYCcgICAgICAgICB8fCB8fCAgIHwgXFwgIC8gfCAgIHx8XG4gICAgICAgIC8vIHx8ICAgICAgICAgICAgLj09PScgYD09PS4gICAgICAgICAuPT09Jy5gPT09LiAgICAgICAgIC49PT0nIC89PS4gfCAgXFwvICB8ICAgfHxcbiAgICAgICAgLy8gfHwgICAgICAgICAuPT0nICAgXFxffC1fIGA9PT0uIC49PT0nICAgX3xfICAgYD09PS4gLj09PScgXy18LyAgIGA9PSAgXFwvICB8ICAgfHxcbiAgICAgICAgLy8gfHwgICAgICAuPT0nICAgIF8tJyAgICBgLV8gIGA9JyAgICBfLScgICBgLV8gICAgYD0nICBfLScgICBgLV8gIC98ICBcXC8gIHwgICB8fFxuICAgICAgICAvLyB8fCAgIC49PScgICAgXy0nICAgICAgICAgIGAtX19cXC5fLScgICAgICAgICBgLV8uL19fLScgICAgICAgICBgJyB8LiAvfCAgfCAgIHx8XG4gICAgICAgIC8vIHx8Lj09JyAgICBfLScgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGAnIHwgIC89PS58fFxuICAgICAgICAvLyA9PScgICAgXy0nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFwvICAgYD09XG4gICAgICAgIC8vIFxcICAgXy0nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGAtXyAgIC9cbiAgICAgICAgLy8gIGAnJyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgYCdcbiAgICAgICAgLy9cbiAgICAgICAgbGV0IHJlY2VudEtleXN0cm9rZXMgPSBJbnB1dC5oaXN0b3J5Lm1hcChldmVudCA9PiBldmVudC5rZXkpLmpvaW4oJycpLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgIGlmIChyZWNlbnRLZXlzdHJva2VzLm1hdGNoKC9JRENMRVYoXFxkXFxkKS8pKSB7XG4gICAgICAgICAgICAvLyBDaGFuZ2luZyBsZXZlbHMgaXMgYXMgc2ltcGxlIGFzIHNldHRpbmcgdGhlIGRlc2lyZWQgbGV2ZWwgbnVtYmVyXG4gICAgICAgICAgICAvLyBhbmQgdGhlbiB0aHJvd2luZyB0aGUgY3VycmVudCBwbGF5aW5nIGZpZWxkIGF3YXkuXG4gICAgICAgICAgICBJbnB1dC5jb25zdW1lKHRydWUpO1xuICAgICAgICAgICAgdGhpcy5sZXZlbE51bWJlciA9IHBhcnNlSW50KFJlZ0V4cC4kMSwgMTApO1xuICAgICAgICAgICAgdGhpcy5maWVsZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgfSBlbHNlIGlmIChyZWNlbnRLZXlzdHJva2VzLmluY2x1ZGVzKCdJRERRRCcpKSB7XG4gICAgICAgICAgICBJbnB1dC5jb25zdW1lKHRydWUpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2dvZCBtb2RlJyk7XG4gICAgICAgIH0gZWxzZSBpZiAocmVjZW50S2V5c3Ryb2tlcy5pbmNsdWRlcygnSURLRkEnKSkge1xuICAgICAgICAgICAgLy8gSW1tZWRpYXRlbHkgZW5kIHRoZSBjdXJyZW50IGxldmVsIGFzIGlmIHdlJ2QgdG91Y2hlZCB0aGUgdHJlYXN1cmUuXG4gICAgICAgICAgICBJbnB1dC5jb25zdW1lKHRydWUpO1xuICAgICAgICAgICAgaWYgKHRoaXMuZmllbGQpIHRoaXMuZmllbGQud2lubmluZyA9IHRydWU7XG4gICAgICAgIH0gZWxzZSBpZiAocmVjZW50S2V5c3Ryb2tlcy5pbmNsdWRlcygnSURLSUxMJykpIHtcbiAgICAgICAgICAgIElucHV0LmNvbnN1bWUodHJ1ZSk7XG4gICAgICAgICAgICBpZiAodGhpcy5maWVsZCAmJiB0aGlzLmZpZWxkLnBsYXllcikgdGhpcy5maWVsZC5wbGF5ZXIua2lsbCgpO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiLyoqXG4gKiBgR2FtZWAgaXMgYSBzaW5nbGV0b24gdGhhdCByZXByZXNlbnRzIHRoZSBydW5uaW5nIGdhbWUgaW4gdGhlIGJyb3dzZXIsXG4gKiBpbml0aWFsaXplcyBnYW1lIHN1Ym1vZHVsZXMsIGFuZCBoYW5kbGVzIHRoZSB0b3AtbGV2ZWwgZ2FtZSBsb29wLlxuICovXG5cbmltcG9ydCB7IFNwcml0ZSB9IGZyb20gJy4vU3ByaXRlJztcbmltcG9ydCB7IElucHV0IH0gZnJvbSAnLi9JbnB1dCc7XG5pbXBvcnQgeyBUZXh0IH0gZnJvbSAnLi9UZXh0JztcbmltcG9ydCB7IFZpZXdwb3J0IH0gZnJvbSAnLi9WaWV3cG9ydCc7XG5pbXBvcnQgeyBHQU1FX1dJRFRILCBHQU1FX0hFSUdIVCwgUExBWV9TUEVFRFMgfSBmcm9tICcuL0NvbnN0YW50cyc7XG5pbXBvcnQgeyBBdWRpbyB9IGZyb20gJy4vQXVkaW8nO1xuaW1wb3J0IHsgU2NyZWVuIH0gZnJvbSAnLi9TY3JlZW4nO1xuaW1wb3J0IHsgTWFpbk1lbnUgfSBmcm9tICcuL01haW5NZW51JztcbmltcG9ydCB7IEluc3RydWN0aW9uc01lbnUgfSBmcm9tICcuL0luc3RydWN0aW9uc01lbnUnO1xuaW1wb3J0IHsgR2FtZVNlc3Npb24gfSBmcm9tICcuL0dhbWVTZXNzaW9uJztcbmltcG9ydCB7IEdhbWVWZXJzaW9uIH0gZnJvbSAnLi9HYW1lVmVyc2lvbi1nZW4uanNvbic7XG5cbmV4cG9ydCBjb25zdCBHYW1lID0ge1xuICAgIGluaXQoKSB7XG4gICAgICAgIFNwcml0ZS5sb2FkU3ByaXRlc2hlZXQoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgYXdhaXQgVmlld3BvcnQuaW5pdCgpO1xuICAgICAgICAgICAgYXdhaXQgU2NyZWVuLmluaXQoKTtcbiAgICAgICAgICAgIGF3YWl0IFNwcml0ZS5pbml0KCk7XG4gICAgICAgICAgICBhd2FpdCBUZXh0LmluaXQoKTtcbiAgICAgICAgICAgIGF3YWl0IElucHV0LmluaXQoKTtcbiAgICAgICAgICAgIGF3YWl0IEF1ZGlvLmluaXQoKTtcblxuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCAoKSA9PiB0aGlzLmxvc3RGb2N1cygpKTtcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsICgpID0+IHRoaXMuZ2FpbmVkRm9jdXMoKSk7XG5cbiAgICAgICAgICAgIHRoaXMuc3RhcnQoKTtcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIHN0YXJ0KCkge1xuICAgICAgICB0aGlzLmZyYW1lID0gMDtcbiAgICAgICAgdGhpcy5wbGF5U3BlZWQgPSAyO1xuICAgICAgICB0aGlzLnNob3dNYWluTWVudSgpO1xuXG4gICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gdGhpcy5vbkZyYW1lKCkpO1xuICAgIH0sXG5cbiAgICBvbkZyYW1lKCkge1xuICAgICAgICBsZXQgZnBzID0gNjA7XG4gICAgICAgIGxldCBub3cgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgICAgbGV0IGxhc3RGcmFtZSA9IHRoaXMubGFzdEZyYW1lIHx8IDA7XG5cbiAgICAgICAgLy8gTm90ZTogd2UgYXJlIHVzaW5nIGByZXF1ZXN0QW5pbWF0aW9uRnJhbWVgLCB3aGljaCB3aWxsIGNhbGwgb3VyIG9uRnJhbWUgaGFuZGxlclxuICAgICAgICAvLyA2MCB0aW1lcyBwZXIgc2Vjb25kIGluIG1vc3QgY2FzZXMuIEhvd2V2ZXIsIGl0IGNhbiBiZSBoaWdoZXIgKHRoZSBicm93c2VyIG1heVxuICAgICAgICAvLyByZXNwZWN0IHRoZSB1c2VyJ3MgcmVmcmVzaCBzZXR0aW5ncywgd2hpY2ggY291bGQgYmUgMTIwSHogb3IgaGlnaGVyIGZvciBleGFtcGxlKS5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gSXQncyBzYWZlc3QgdG8gaGF2ZSBhIGNoZWNrIGxpa2Ugd2UgZG8gaGVyZSwgd2hlcmUgd2UgZXhwbGljaXRseSBsaW1pdCB0aGUgbnVtYmVyXG4gICAgICAgIC8vIG9mIHVwZGF0ZSBjYWxscyB0byA2MCB0aW1lcyBwZXIgc2Vjb25kLlxuICAgICAgICBpZiAobm93IC0gbGFzdEZyYW1lID49IDEwMDAgLyBmcHMpIHtcbiAgICAgICAgICAgIHRoaXMuZnJhbWUrKztcbiAgICAgICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgICAgICAgICB0aGlzLmxhc3RGcmFtZSA9IG5vdztcbiAgICAgICAgfVxuXG4gICAgICAgIFZpZXdwb3J0LnJlc2l6ZSgpO1xuICAgICAgICB0aGlzLmRyYXcoKTtcblxuICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHRoaXMub25GcmFtZSgpKTtcbiAgICB9LFxuXG4gICAgdXBkYXRlKCkge1xuICAgICAgICAvLyBQdWxsIGluIGZyYW1lIGJ5IGZyYW1lIGJ1dHRvbiBwdXNoZXMgLyBrZXlwcmVzc2VzIC8gbW91c2UgY2xpY2tzXG4gICAgICAgIElucHV0LnVwZGF0ZSgpO1xuXG4gICAgICAgIC8vIHBlcmZvcm0gYW55IHBlci1mcmFtZSBhdWRpbyB1cGRhdGVzXG4gICAgICAgIEF1ZGlvLnVwZGF0ZSgpO1xuXG4gICAgICAgIGlmICh0aGlzLm1lbnUpIHtcbiAgICAgICAgICAgIHRoaXMubWVudS51cGRhdGUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnNlc3Npb24pIHRoaXMuc2Vzc2lvbi51cGRhdGUoKTtcbiAgICB9LFxuXG4gICAgZHJhdygpIHtcbiAgICAgICAgLy8gUmVzZXQgY2FudmFzIHRyYW5zZm9ybSBhbmQgc2NhbGVcbiAgICAgICAgVmlld3BvcnQuY3R4LnNldFRyYW5zZm9ybShWaWV3cG9ydC5zY2FsZSwgMCwgMCwgVmlld3BvcnQuc2NhbGUsIDAsIDApO1xuXG4gICAgICAgIC8vIENsZWFyIGNhbnZhcy4gTm90ZSB3ZSBkb24ndCBnbyBmb3IgcHVyZSBibGFjayBidXQgcmF0aGVyIGEgZGFyayBncmF5LCB0byBzaW11bGF0ZVxuICAgICAgICAvLyB0aGUgcmVsYXRpdmVseSBicmlnaHQgcGhvc3Bob3JzIG9uIHRoZSBLYXlwcm8gSUkuIChXZSBhcmUgZ29pbmcgdG8gYWRkIHNjYW4gbGluZXNcbiAgICAgICAgLy8gYXQgdGhlIGVuZCB3aGljaCB3aWxsIGFwcGVhciB0byBkYXJrZW4gdGhlIHdob2xlIHNjcmVlbiwgc28gdGhlIG92ZXJhbGwgZWZmZWN0XG4gICAgICAgIC8vIHdpbGwgYmUgYSBsaXR0bGUgZGFya2VyIHRoYW4gdGhpcyBjb2xvci4pXG4gICAgICAgIFZpZXdwb3J0LmN0eC5maWxsU3R5bGUgPSAnIzE4MTgxOCc7XG4gICAgICAgIFZpZXdwb3J0LmN0eC5maWxsUmVjdCgwLCAwLCBWaWV3cG9ydC53aWR0aCwgVmlld3BvcnQuaGVpZ2h0KTtcblxuICAgICAgICAvLyBDZW50ZXIgdGhlIDgweDI1IGNoYXJhY3RlciBcInNjcmVlblwiIGluIHRoZSB2aWV3cG9ydFxuICAgICAgICBWaWV3cG9ydC5jdHgudHJhbnNsYXRlKChWaWV3cG9ydC53aWR0aCAtIEdBTUVfV0lEVEgpIC8gMiB8IDAsIChWaWV3cG9ydC5oZWlnaHQgLSBHQU1FX0hFSUdIVCkgLyAyIHwgMCk7XG5cbiAgICAgICAgLy8gSGFuZCBvZmYgY29udHJvbCB0byBvdXIgc3VibW9kdWxlcyB0byBkcmF3IHdoYXRldmVyIHRoZXknZCBsaWtlLiBGb3IgYWxsIHRoZSBzdWJtb2R1bGVzXG4gICAgICAgIC8vIGJlbG93IHVzLCBcImRyYXdpbmdcIiBtZWFucyB3cml0aW5nIHRleHQgdG8gdGhlIFNjcmVlbi5cbiAgICAgICAgU2NyZWVuLmNsZWFyKCk7XG4gICAgICAgIGlmICh0aGlzLnNlc3Npb24pIHRoaXMuc2Vzc2lvbi5kcmF3KCk7XG4gICAgICAgIGlmICh0aGlzLm1lbnUpIHRoaXMubWVudS5kcmF3KCk7XG5cbiAgICAgICAgLy8gUmVuZGVyIHRoZSB0ZXh0IG9uIHRoZSBzY3JlZW4gdG8gdGhlIHZpZXdwb3J0LlxuICAgICAgICBTY3JlZW4uZHJhdyhWaWV3cG9ydC5jdHgpO1xuXG4gICAgICAgIC8vIEFmdGVyIGRyYXdpbmcgdGhlIFwic2NyZWVuXCIgKGNoYXJhY3RlcnMpLCBhZGQgc2NhbiBsaW5lcyBvbiB0b3AuIE91ciBzY2FuIGxpbmVzIGFyZSBhbG1vc3RcbiAgICAgICAgLy8gbm90IHZpc2libGUsIGJ1dCBtb3ZlIHNsb3dseSBhbmQgaW50cm9kdWNlIHN1YnRsZSB2aXN1YWwgc2hpZnRzIGluIHRoZSBjaGFyYWN0ZXJzIG9uIHNjcmVlbixcbiAgICAgICAgLy8gd2hpY2ggaXMgdGhlIGVmZmVjdCB3ZSBhcmUgZ29pbmcgZm9yLlxuICAgICAgICAvL1xuICAgICAgICAvLyAoVGVjaG5pY2FsbHkgc2NhbiBsaW5lcyBzaG91bGQgYmUgSU4gQkVUV0VFTiByb3dzIG9mIHBpeGVscywgYW5kIHdoYXQgd2UncmUgYWN0dWFsbHkgc2ltdWxhdGluZ1xuICAgICAgICAvLyBoZXJlIGlzIG91ciBleWViYWxscyBjbG9ja2luZyB0aGUgc2NyZWVuIHJlZnJlc2guIFdlJ3JlIGdvaW5nIGZvciBhIGdlbmVyYWwgZmVlbGluZyBoZXJlLilcbiAgICAgICAgVmlld3BvcnQuY3R4LmZpbGxTdHlsZSA9ICdyZ2JhKDAsIDAsIDAsIDAuNSknO1xuICAgICAgICBmb3IgKGxldCB5ID0gTWF0aC5mbG9vcigtVmlld3BvcnQuaGVpZ2h0IC8gMikgLSA0OyB5IDwgVmlld3BvcnQuaGVpZ2h0ICsgNDsgeSArPSA0KSB7XG4gICAgICAgICAgICBsZXQgciA9ICgodGhpcy5mcmFtZSAvIDUpICUgNCkgKyB5O1xuICAgICAgICAgICAgVmlld3BvcnQuY3R4LmZpbGxSZWN0KC1WaWV3cG9ydC53aWR0aCwgciwgVmlld3BvcnQud2lkdGggKiAyLCAyKTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBzdGFydFNlc3Npb24oKSB7XG4gICAgICAgIHRoaXMubWVudSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5zZXNzaW9uID0gbmV3IEdhbWVTZXNzaW9uKCk7XG5cbiAgICAgICAgLy8gSGlkZSB0aGUgZ2l0aHViIGxpbmsgd2hpbGUgaW4gYSBnYW1lIHNlc3Npb25cbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZ2l0aHViLWNvcm5lcicpWzBdLmNsYXNzTmFtZSA9ICdnaXRodWItY29ybmVyIGhpZGRlbic7XG4gICAgfSxcblxuICAgIHNob3dNYWluTWVudSgpIHtcbiAgICAgICAgdGhpcy5tZW51ID0gbmV3IE1haW5NZW51KCk7XG4gICAgICAgIHRoaXMuc2Vzc2lvbiA9IHVuZGVmaW5lZDtcblxuICAgICAgICAvLyBTaG93IGdpdGh1YiBsaW5rIGFnYWluIHdoZW4gcmV0dXJuaW5nIGZyb20gYSBnYW1lXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2dpdGh1Yi1jb3JuZXInKVswXS5jbGFzc05hbWUgPSAnZ2l0aHViLWNvcm5lcic7XG4gICAgfSxcblxuICAgIHNob3dJbnN0cnVjdGlvbnMoKSB7XG4gICAgICAgIHRoaXMubWVudSA9IG5ldyBJbnN0cnVjdGlvbnNNZW51KCk7XG4gICAgICAgIHRoaXMuc2Vzc2lvbiA9IHVuZGVmaW5lZDtcbiAgICB9LFxuXG4gICAgbG9zdEZvY3VzKCkge1xuICAgICAgICAvLyBJZiB3ZSBsb3NlIGZvY3VzICh0aGUgdXNlciBzd2l0Y2hlZCB0YWJzLCBvciB0YWJiZWQgYXdheSBmcm9tIHRoZSBicm93c2VyKSxcbiAgICAgICAgLy8gYXV0b21hdGljYWxseSBwYXVzZSB0aGUgZ2FtZSBzZXNzaW9uIGlmIHRoZXJlIGlzIG9uZS5cbiAgICAgICAgaWYgKHRoaXMuc2Vzc2lvbikgdGhpcy5zZXNzaW9uLnBhdXNlZCA9IHRydWU7XG4gICAgfSxcblxuICAgIGdhaW5lZEZvY3VzKCkge1xuICAgICAgICAvLyBEbyBub3RoaW5nIC0gd2UnbGwgbGV0IHRoZSB1c2VyIGhpdCBlbnRlciB0byByZXN1bWUgcGxheWluZy5cbiAgICB9XG59O1xuIiwiLyoqXG4gKiBUaGlzIGlzIHRoZSBlbnRyeSBwb2ludCBmb3IgdGhlIGdhbWUuXG4gKi9cbmltcG9ydCB7IEdhbWUgfSBmcm9tICcuL0dhbWUnO1xuXG5HYW1lLmluaXQoKTtcbiJdLCJuYW1lcyI6WyJERUFUSF9GUkFNRVMiXSwibWFwcGluZ3MiOiI7OztJQUFBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7QUFDQTtJQUNPLFNBQVMsSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLEVB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LENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxPQUFPLENBQUMsRUFBQztBQUNsTjtJQUNBO0lBQ08sTUFBTSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxFQUFDO0FBQ3gyQjtJQUNBO0lBQ08sTUFBTSxLQUFLLENBQUMsR0FBRTtBQUNyQjtJQUNBO0lBQ08sTUFBTSxLQUFLLENBQUMsTUFBSztBQUN4QjtJQUNBO0lBQ08sTUFBTSxLQUFL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Q0FBQyxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsRUFBRSxZQUFZLEVBQUUsb0JBQW9CLEVBQUUsWUFBWSxFQUFFLGFBQWEsQ0FBQyxFQUFFLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsUUFBUSxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLFVBQVUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLFFBQVEsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLElBQUksRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLFlBQVksRUFBRSxvQkFBb0IsRUFBRSxZQUFZLEVBQUUsY0FBYyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsRUFBRSxZQUFZLEVBQUUsb0JBQW9CLEVBQUUsWUFBWSxFQUFFLGFBQWEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDOztJQ00zOUIsTUFBTSxLQUFLLEdBQUc7SUFDckIsSUFBSSxJQUFJLEdBQUc7SUFDWCxRQUFRLEtBQUssQ0FBQyxXQUFXLEdBQUcsS0FBSyxDQUFDO0FBQ2xDO0lBQ0EsUUFBUSxLQUFLLENBQUMsR0FBRyxHQUFHLEtBQUssQ0FBQztJQUMxQixRQUFRLEtBQUssQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDLEdBQUcsQ0FBQyxVQUFVLEVBQUUsQ0FBQztJQUM3QyxRQUFRLEtBQUssQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLENBQUM7SUFDbkQsUUFBUSxJQUFJLENBQUMsWUFBWSxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUM7QUFDeEM7SUFDQSxRQUFRLEtBQUssQ0FBQyxPQUFPLEdBQUcsRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLEdBQUcsRUFBRSxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUM3RixRQUFRLEtBQUssQ0FBQyxJQUFJLEdBQUcsR0FBRyxJQUFJLEVBQUUsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxHQUFHLEdBQUcsQ0FBQyxFQUFFLE1BQU0sR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUN2RSxRQUFRLEtBQUssQ0FBQyxXQUFXLEdBQUcsR0FBRyxFQUFFLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNuRyxRQUFRLEtBQUssQ0FBQyxNQUFNLEdBQUcsR0FBRyxHQUFHLEVBQUUsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsT0FBTyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUM7SUFDakUsUUFBUSxLQUFLLENBQUMsS0FBSyxHQUFHLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxHQUFHLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDOUU7SUFDQSxRQUFRLEtBQUssQ0FBQyxPQUFPLEdBQUcsR0FBRyxHQUFHLENBQUMsR0FBRyxDQUFDLEdBQUcs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RyxLQUFLLENBQUMsS0FBSyxDQUFDO0lBQ3JDLFNBQVM7QUFDVDtJQUNBLFFBQVEsSUFBSSxJQUFJLENBQUMsQ0FBQyxLQUFLLFVBQVUsR0FBRyxDQUFDLElBQUksSUFBSSxDQUFDLEtBQUssS0FBSyxLQUFLLENBQUMsS0FBSyxFQUFFO0lBQ3JFLFlBQVksSUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDO0lBQ3BDLFNBQVM7QUFDVDtJQUNBLFFBQVEsSUFBSSxJQUFJLENBQUMsS0FBSyxLQUFLLEtBQUssQ0FBQyxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFO0lBQzVFLFlBQVksSUFBSSxDQUFDLFNBQVMsR0FBRyxLQUFLLENBQUMsT0FBTyxDQUFDO0lBQzNDLFNBQVM7QUFDVDtJQUNBLFFBQVEsSUFBSSxLQUFLLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUU7SUFDbEcsWUFBWSxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQztJQUNsRCxZQUFZLElBQUksQ0FBQyxTQUFTLEdBQUcsQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQyxLQUFLLEVBQUUsS0FBSyxDQUFDLElBQUksRUFBRSxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDbEYsU0FBUztBQUNUO0lBQ0EsUUFBUSxJQUFJLEtBQUssQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUU7SUFDM0MsWUFBWSxJQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUM7SUFDckMsWUFBWSxPQUFPO0lBQ25CLFNBQVM7QUFDVDtJQUNBLFFBQVEsT0FBTyxtQkFBbUIsQ0FBQyxJQUFJLEVBQUUsS0FBSyxDQUFDLENBQUM7SUFDaEQsS0FBSztBQUNMO0lBQ0EsSUFBSSxJQUFJLEdBQUc7SUFDWCxRQUFRLElBQUksSUFBSSxHQUFHLEdBQUcsQ0FBQztBQUN2QjtJQUNBLFFBQVEsUUFBUSxJQUFJLENBQUMsS0FBSztJQUMxQixZQUFZLEtBQUssS0FBSyxDQUFDLEtBQUs7SUFDNUIsZ0JBQWdCLElBQUksR0FBR0EsY0FBWSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztJQUNwRCxnQkFBZ0IsTUFBTTtJQUN0QixZQUFZLEtBQUssS0FBSyxDQUFDLElBQUk7SUFDM0IsZ0JBQWdCLE9BQU87SUFDdkIsU0FBUztBQUNUO0lBQ0EsUUFBUSxNQUFNLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQztJQUMzQyxLQUFLO0lBQ0w7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0lDOUVBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7QUFJQTtJQUNPLE1BQU0sS0FBSyxHQUFHO0lBQ3JCLElBQUksTUFBTSxFQUFFLFNBQVM7SUFDckIsSUFBSSxXQUFXLEVBQUUsU0FBUyxDQUFDLE1BQU07QUFDakM7SUFDQSxJQUFJLElBQUksQ0FBQyxXQUFXLEVBQUU7SUFDdEI7SUFDQTtJQUNBO0lBQ0EsUUFBUSxJQUFJLEtBQUssR0FBRyxLQUFLLENBQUMsTUFBTSxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ3BFLFFBQVEsSUFBSSxDQUFDLEtBQUssRUFBRSxNQUFNLElBQUksS0FBSyxDQUFDLENBQUMsc0JBQXNCLEVBQUUsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQzVFO0lBQ0E7SUFDQTtBQUNBO0lBQ0EsUUFBUSxJQUFJLE1BQU0sR0FBRyxLQUFLLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxHQUFHLElBQUksR0FBRyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQzVELFFBQVEsSUFBSSxVQUFVLEdBQUcsRUFBRSxDQUFDO0lBQzVCLFFBQVEsSUFBSSxNQUFNLENBQUM7QUFDbkI7SUFDQTtJQUNBLFFBQVEsTUFBTSxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLFVBQVUsQ0FBQyxDQUFDO0FBQzdDO0lBQ0EsUUFBUSxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsVUFBVSxFQUFFLENBQUMsRUFBRSxFQUFFO0lBQzdDO0lBQ0EsWUFBWSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUM7SUFDM0MsWUFBWSxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsVUFBVSxDQUFDLENBQUM7QUFDdkQ7SUFDQSxZQUFZLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxVQUFVLEVBQUUsQ0FBQyxFQUFFLEVBQUU7SUFDakQ7SUFDQSxnQkFBZ0IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDO0FBQ3REO0lBQ0E7SUFD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LEtBQUssQ0FBQztJQUN6QixTQUFTLE1BQU07SUFDZixZQUFZLE9BQU8sQ0FBQyxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzNELFNBQVM7SUFDVCxLQUFLO0FBQ0w7SUFDQSxJQUFJLFFBQVEsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFO0lBQ25CLFFBQVEsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQztJQUN6QyxLQUFLO0FBQ0w7SUFDQSxJQUFJLFFBQVEsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFO0lBQ25CLFFBQVEsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQztJQUN6QyxLQUFLO0FBQ0w7SUFDQSxJQUFJLFVBQVUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFO0lBQ3JCLFFBQVEsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQztJQUN6QyxLQUFLO0FBQ0w7SUFDQSxJQUFJLFlBQVksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFO0lBQ3ZCLFFBQVEsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQztJQUN6QyxLQUFLO0FBQ0w7SUFDQSxJQUFJLE9BQU8sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFO0lBQ2xCLFFBQVEsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQztJQUN6QyxLQUFLO0FBQ0w7SUFDQSxJQUFJLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFO0lBQ2pCLFFBQVEsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQztJQUN6QyxLQUFLO0FBQ0w7SUFDQSxJQUFJLG1CQUFtQixDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUU7SUFDOUIsUUFBUSxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssR0FBRyxDQUFDO0lBQ3pDLEtBQUs7QUFDTDtJQUNBLElBQUksVUFBVSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUU7SUFDckIsUUFBUSxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsT0FBTyxLQUFLLENBQUM7SUFDaEMsUUFBUSxPQUFPLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzNELEtBQUs7QUFDTDtJQUNBLElBQUksWUFBWSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUU7SUFDdkIsUUFBUSxPQUFPLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzFFLEtBQUs7QUFDTDtJQUNBLElBQUksc0JBQXNCLEdBQUc7SUFDN0I7SUFDQSxRQUFRLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEtBQUssS0FBSyxDQUFDLEtBQUssSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssS0FBSyxLQUFLLENBQUMsSUFBSSxFQUFFLE9BQU87QUFDMUY7SUFDQTtJQUNBLFFBQVEsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUU7SUFDdkQsWUFBWSxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDO0lBQzVDLFNBQVM7QUFDVDtJQUNBO0lBQ0EsUUFBUSxJQUFJLElBQUksQ0FBQyxJQUFJLElBQUksQ0FBQyxFQUFFO0lBQzVCLFlBQVksSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQztJQUM1QyxTQUFTO0FBQ1Q7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQSxRQUFRLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtJQUNwRCxZQUFZLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEtBQUssSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUU7SUFDbkQsZ0JBQWdCLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEtBQUssSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUU7SUFDdkQsb0JBQW9CLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLENBQUM7SUFDdkMsb0JBQW9CLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUM1QyxvQkFBb0IsTUFBTTtJQUMxQixpQkFBaUIsTUFBTSxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxLQUFLLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLENB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\n","/**\n * Miscellaneous, individually exported functions that don't fit anywhere else.\n *\n * In many games I'll stick all my random math, geometry, and clipping stuff here,\n * but in this game there's actually not a lot of extra math to do (mostly because\n * we can only move one \"character\" at a time, and there's not any AI to speak of,\n * so no flood fills or other algorithms to consider).\n */\n\nexport function rgba(r, g, b, a) {\n    return `rgba(${r},${g},${b},${a})`;\n}\n\nexport function createCanvas(width, height) {\n    let canvas = document.createElement('canvas');\n    canvas.width = width;\n    canvas.height = height;\n    let ctx = canvas.getContext('2d');\n    return { canvas, ctx };\n}\n","'use strict';\n\n/**\n * This module is generated by `gulp buildAssets`.\n */\nexport const SpriteSheet =\n    /* <generated> */\n{ font: [ [ 0, 0, 128, 512 ] ], uri: 'sprites.png' }\n/* </generated> */\n","/**\n * Global constants for our game.\n *\n * I export all constants individually and import just the ones I want in each file that\n * uses them. In theory this helps with tree-shaking and lets you see at a glance which\n * files use which constants, but mostly it works only because this is a small game. If you\n * have hundreds of constants it's probably better to export a single `Constants` object and\n * let them be namespaced.\n */\n\n// Spritesheet URI (produced during gulp build)\nexport const SPRITESHEET_URI = 'sprites.png';\n\n// The \"screen area\". This is an ASCII game and so most of the game logic doesn't care about browser\n// pixels, we care about the ASCII display area (80x25).\n//\n// Actually the original was likely an 80x24. We can use either here, whatever looks good in the browser.\nexport const SCREEN_WIDTH = 80;\nexport const SCREEN_HEIGHT = /*25*/ 24;\n\n// The size of our on-screen characters (given dimensions above, this is 80 cols by 25 rows).\nexport const CHAR_WIDTH = 8;\nexport const CHAR_HEIGHT = 16;\nexport const CHARSHEET_WIDTH = 16 * CHAR_WIDTH;\nexport const CHARSHEET_HEIGHT = 32 * CHAR_HEIGHT;\n\n// A screen scale factor. This scale factor multiplies the entire screen size so that\n// we can then introduce text artifacts (like character glow and scan lines), to give it\n// a little of that 1982 feel.\nexport const SCREEN_SCALE = 4;\n\n// The playable area. Note that this is the desired dimensions, but the actual on-screen dimensions\n// may be larger to maintain aspect ratio (see `Viewport.width` & `Viewport.height`).\n//\n// Note the extra little padding of a character, which just prevents our text from butting right\n// against the edge of the browser window.\nexport const GAME_WIDTH = (SCREEN_WIDTH + 1) * CHAR_WIDTH * SCREEN_SCALE;\nexport const GAME_HEIGHT = (SCREEN_HEIGHT + 1) * CHAR_HEIGHT * SCREEN_SCALE;\n\n// Fixed level size\nexport const LEVEL_ROWS = 20;\nexport const LEVEL_COLS = 79;\n\n// Play speeds, expressed as frames per second.\n//\n// According to the original, the play speeds had millisecond delays of:\n//   [100ms, 50ms, 25ms, 13ms, 7ms].\n//\n// This would mean the effective FPS was:\n//   [10, 20, 40, 76, 142].\n//\n// I think this is way too high, and might not be accurate (it doesn't count\n// time spent drawing the screen and running the game's logic, which might\n// be a significant number of milliseconds). From memory, each speed was about\n// 50% faster than the previous one, so that's what I've set here.\nexport const PLAY_SPEEDS = [120, 100, 90, 50, 30];\n\n// Maximum number of rocks on screen at once\nexport const MAX_ROCKS = 7;\n\n// Each dispenser on the level increases max rocks by 1\nexport const DISPENSER_MAX_ROCKS = 1;\n\n// Hidden difficulty factor - the game gets 5% faster each level cycle\nexport const HIDDEN_FACTOR_PLAY_SPEED = 0.05;\n\n// Hidden difficulty factor - the maximum number of rocks increases each level cycle\nexport const HIDDEN_FACTOR_MAX_ROCKS = 2;\n\n// Score events (note, these are just identifiers for the types of score increases, not\n// actual score values).\nexport const SCORE_ROCK = 1;\nexport const SCORE_STATUE = 2;\nexport const SCORE_TREASURE = 3;\n\n// 1-Up\nexport const NEW_LIFE_SCORE = 10_000;\n","'use strict';\n\nimport { GAME_WIDTH, GAME_HEIGHT } from './Constants';\n\n/**\n * Viewport\n *\n * Represents the game display (for us, a canvas).\n */\nexport const Viewport = {\n    init() {\n        Viewport.canvas = document.getElementById('canvas');\n        Viewport.ctx = Viewport.canvas.getContext('2d');\n        Viewport.resize(true);\n    },\n\n    // Resize the canvas to give us approximately our desired game display size.\n    //\n    // Rather than attempt to explain it, here's a concrete example:\n    //\n    //     we start with a desired game dimension:   480x270px\n    //          get the actual browser dimensions:  1309x468px\n    //          factor in the display's DPI ratio:  2618x936px\n    //         now calculate the horizontal scale:       5.45x\n    //                     and the vertical scale:       3.46x\n    //            our new offical game scaling is:        5.4x\n    //       and our official viewport dimensions:   484x173px\n    //\n    // This approach emphasizes correct aspect ratio and maintains full-window rendering, at\n    // the potential cost of limiting visibility of the game itself in either the X or Y axis.\n    // If you use this approach, make sure your GUI can \"float\" (otherwise there may be whole\n    // UI elements the player cannot see!).\n    resize(force) {\n        let dpi = window.devicePixelRatio,\n            width = Viewport.canvas.clientWidth,\n            height = Viewport.canvas.clientHeight,\n            dpiWidth = width * dpi,\n            dpiHeight = height * dpi;\n\n        if (\n            force ||\n            Viewport.canvas.width !== dpiWidth ||\n            Viewport.canvas.height !== dpiHeight\n        ) {\n            Viewport.canvas.width = dpiWidth;\n            Viewport.canvas.height = dpiHeight;\n\n            Viewport.scale = ((Math.min(dpiWidth / GAME_WIDTH, dpiHeight / GAME_HEIGHT) * 10) | 0) / 10;\n            Viewport.width = Math.ceil(dpiWidth / Viewport.scale);\n            Viewport.height = Math.ceil(dpiHeight / Viewport.scale);\n            Viewport.center = {\n                u: (Viewport.width / 2) | 0,\n                v: (Viewport.height / 2) | 0\n            };\n            Viewport.clientWidth = width;\n            Viewport.clientHeight = height;\n\n            // Note: smoothing flag gets reset on every resize by some browsers, which is why\n            // we do it here.\n            Viewport.ctx.imageSmoothingEnabled = false;\n        }\n\n        // We do this every frame, not just on resize, due to browser sometimes \"forgetting\".\n        Viewport.canvas.style.cursor = 'not-allowed';\n    }\n};\n","'use strict';\n\nimport { Game } from './Game';\nimport { rgba, createCanvas } from './Util';\nimport { SpriteSheet } from './SpriteSheet-gen';\nimport { Viewport } from './Viewport';\n\n/**\n * Sprite\n *\n * Encapsulates loading sprite slices from the spritesheet, organizing them, and\n * modifying them or constructing using primitives. To save space, we use some techniques\n * like storing only a small slice of an image in the spritesheet, then using code\n * to duplicate it, add some randomness, etc.\n */\nexport const Sprite = {\n    // This is an exception to the rule, loading the spritesheet is a special action that\n    // happens BEFORE everything is initialized.\n    loadSpritesheet(cb) {\n        let image = new Image();\n        image.onload = cb;\n        image.src = SpriteSheet.uri;\n        Sprite.sheet = image;\n    },\n\n    init() {\n        // Base pixel font and icons (see `Text.init` for additional variations)\n        Sprite.font = initBasicSprite(SpriteSheet.font[0]);\n    },\n\n    /**\n     * A small helper that draws a sprite onto a canvas, respecting the anchor point of\n     * the sprite. Note that the canvas should be PRE-TRANSLATED and PRE-ROTATED, if\n     * that's appropriate!\n     */\n    drawSprite(ctx, sprite, u, v) {\n        ctx.drawImage(sprite.img, u - sprite.anchor.x, v - sprite.anchor.y);\n    },\n\n    drawViewportSprite(sprite, pos, rotation) {\n        let { u, v } = this.viewportSprite2uv(\n            sprite,\n            pos\n        );\n        if (rotation) {\n            Viewport.ctx.save();\n            Viewport.ctx.translate(u + sprite.anchor.x, v + sprite.anchor.y);\n            Viewport.ctx.rotate(rotation);\n            Viewport.ctx.drawImage(\n                sprite.img,\n                -sprite.anchor.x,\n                -sprite.anchor.y\n            );\n            Viewport.ctx.restore();\n        } else {\n            Viewport.ctx.drawImage(sprite.img, u, v);\n        }\n    },\n\n    viewportSprite2uv(sprite, pos) {\n        return {\n            u: pos.x - sprite.anchor.x - Game.camera.pos.x + Viewport.center.u,\n            v: pos.y - sprite.anchor.y - Game.camera.pos.y + Viewport.center.v\n        };\n    }\n};\n\n// Sprite utility functions\n\nfunction initBasicSprite(data, anchor) {\n    return initDynamicSprite(loadCacheSlice(...data), anchor);\n}\n\nfunction initDynamicSprite(source, anchor) {\n    let w = source.width,\n        h = source.height;\n\n    return {\n        img: source,\n        anchor: anchor || { x: (w / 2) | 0, y: (h / 2) | 0 }\n    };\n}\n\nfunction loadCacheSlice(x, y, w, h) {\n    const source = Sprite.sheet;\n    const sliceCanvas = createCanvas(w, h);\n    sliceCanvas.ctx.drawImage(source, x, y, w, h, 0, 0, w, h);\n    return sliceCanvas.canvas;\n}\n","/**\n * `Input` is a singleton that helps us map keyboard events in the browser\n * to in-game actions.\n *\n * We generally care about two types of input events:\n *\n *  - An \"action\" is a specific action recognizable by the game, like moving right\n *    or jumping. In theory, if this was a more complicated game, there could be\n *    many ways to cause a specific action (maybe user presses SPACEBAR to jump,\n *    or they click RIGHT MOUSE BUTTON, or they tap A on a gamepad, etc.). For this\n *    reason, it helps to separate processing in-game actions from processing the\n *    raw keyboard events that cause them.\n *\n *  - Actual key presses. There are situations where we need a more broad view of\n *    the user's key presses, for example, if they are typing in their name for a\n *    high score or pressing one of the inputs at the main menu. In this case we\n *    want to know \"did the user tap P?\", as opposed to mapping the keys to actions.\n */\n\n// A list of in-game actions that can be performed by the player\nconst Action = {\n    UP:     11,\n    DOWN:   12,\n    LEFT:   13,\n    RIGHT:  14,\n    JUMP:   15,\n    STOP:   16,\n    PAUSE:  17,\n    RESUME: 18\n};\n\n// A list of key code mappings and what action they perform. Here we hard-code it, but\n// you could easily also have the key mappings controlled by settings and let the user\n// configure it.\nconst KeyMapping = {\n    KeyW:       Action.UP,\n    KeyS:       Action.DOWN,\n    KeyA:       Action.LEFT,\n    KeyD:       Action.RIGHT,\n    ArrowUp:    Action.UP,\n    ArrowDown:  Action.DOWN,\n    ArrowLeft:  Action.LEFT,\n    ArrowRight: Action.RIGHT,\n    Space:      Action.JUMP,\n    Escape:     Action.PAUSE,\n    Enter:      Action.RESUME\n};\n\nexport const Input = {\n    Action,\n    KeyMapping,\n\n    init() {\n        // Input buffer - new keypress events go into this buffer to be handled\n        // during the game's update loop. It's up to the `update()` methods to consume\n        // key presses and remove them from the buffer.\n        this.buffer = [];\n\n        // Input history - history contains recent key press events in order,\n        // removed automatically after a few seconds. This is useful for detecting\n        // inputs like cheat codes, for example.\n        //\n        // (Actually, cheat codes is the only use for this extra history buffer, so\n        // if you didn't support cheat codes you could delete it altogether.)\n        this.history = [];\n\n        window.addEventListener('keydown', event => {\n            let entry = {\n                at: new Date().getTime(),\n                key: event.key,\n                code: event.code,\n                action: Input.KeyMapping[event.code] || Input.Action.STOP\n            };\n            Input.buffer.push(entry);\n            Input.history.push(entry);\n            console.log(entry);\n        });\n    },\n\n    update() {\n        let now = new Date().getTime();\n        this.history = this.history.filter(entry => entry.at > now - 3000);\n    },\n\n    lastKey() {\n        // A shortcut helper for code that cares about what KEY was pressed.\n        return this.buffer.length > 0 ? this.buffer[this.buffer.length - 1].key : '';\n    },\n\n    lastAction() {\n        // A shortcut helper for code that cares about what ACTION was taken.\n        return this.buffer.length > 0 ? this.buffer[this.buffer.length - 1].action : undefined;\n    },\n\n    consume(clearHistory) {\n        this.buffer = [];\n\n        // Normally, \"consuming\" all existing buffer input is something that happens\n        // somewhere in the game logic. If we just detected and acted on a cheat code,\n        // though, we want to clear the history too, otherwise we'll just keep behaving\n        // like the user is entering the cheat code every frame.\n        if (clearHistory) this.history = [];\n    }\n}\n","/**\n * `Text` is a singleton responsible for drawing text characters on the viewport. This\n * game uses a custom pixel font, so we need to implement some basic text handling\n * (splitting long lines, measuring character width, etc.) ourselves.\n */\n\nimport { Sprite } from './Sprite';\nimport { rgba, createCanvas } from './Util';\nimport { CHAR_WIDTH, CHAR_HEIGHT, CHARSHEET_WIDTH, SCREEN_SCALE } from './Constants';\n\n// In our character sheet, chars 0x00-0x7F are standard ASCII, below that we put whatever\n// characters are convenient for us. Here we can choose to map unicode characters to positions\n// 0x80+ in the charsheet, making it easy for us to render things like special characters,\n// box drawing characters, etc.\n//\n// Note: I like pasting actual characters instead of codes (\"\" instead of \"\\u251C\"). If you\n// do this, don't forget to explicitly tell the browser what charset your JS file is, or it\n// won't execute -- see `index.html` for an example.\nconst SUPPORTED_UNICODE_CHARS = [\n    '',\n    '',\n    ''\n].join('');\n\nconst UNICODE_CHAR_MAP = SUPPORTED_UNICODE_CHARS.split('').reduce((map, char, idx) => {\n    map[char] = 0x80 + idx;\n    return map;\n}, {});\n\n/**\n * Text\n *\n * Utilities for drawing text using in-game pixel font.\n */\nexport const Text = {\n    init() {\n        // The \"white\" font sheet, right from the sprite.\n        Text.white = { img: Sprite.font.img, scale: 1, border: 0, margin: 0 };\n\n        // Recolored versions of the original font sheet, to use when constructing our glow.\n        //\n        // The color here is #33FF00 which is roughly the glow of the Kaypro II.\n        Text.terminal = recolor(Text.white, rgba(51 + 16, 255, 0 + 16, 1));\n        Text.terminal_shadow = recolor(Text.white, rgba(51, 255, 0, 0.4));\n\n        // \"Glowing\" a bunch of characters on-screen is just too slow when you're doing 5\n        // draw calls for every individual character. To avoid that, we can build a new\n        // sprite sheet that is pre-scaled with the glow built in.\n        Text.glow = bakeFontGlow(Text.terminal, Text.terminal_shadow, SCREEN_SCALE, 2, 2);\n    },\n\n    drawText(ctx, text, u, v, font = Text.terminal) {\n        // The math gymnastics are a little hard to read (apologies). To render the\n        // font asked for correctly, we need to have the font sheet image, the scale,\n        // the border and the margin.\n        //\n        // The \"scale\" informs us what PRESCALING is applied to the font sheet, so\n        // we know how big to render it (we don't do additional scaling here).\n        //\n        // The \"border\" tells us how many PRE-SCALE pixels of border exist in this\n        // image. A border of 2 means a total of 2 pixels (so 1 on every side) were\n        // used. This is pre-scale, so if the scale is 4, that means there are 4 pixels\n        // of \"space\" around each character in the font sheet.\n        //\n        // The \"margin\" tells us how many POST-SCALE pixels of margin exist (in practice\n        // this means, how many pixels of glow surround the character). You want to subtract\n        // this margin when rendering the character so the character body is in the expected\n        // spot on screen.\n        let { img, scale, border, margin } = font;\n\n        if (Array.isArray(text)) {\n            for (let block of text) {\n                Text.drawText(ctx, block.text, u + block.u * scale, v + block.v * scale, font);\n            }\n            return;\n        }\n\n        for (let idx = 0; idx < text.length; idx++) {\n            let c = UNICODE_CHAR_MAP[text[idx]] || text.charCodeAt(idx);\n            let k = (c - 0) * (CHAR_WIDTH + border);\n            let drawable = (c !== 32);\n\n            // We clear the canvas in every frame, and it's a HUGE speed advantage not to draw an\n            // empty image (this check can save 1000+ drawImage calls a frame).\n            if (drawable) {\n                ctx.drawImage(\n                    img,\n                    (k * scale) % img.width,\n                    Math.floor((k * scale) / (img.width)) * (CHAR_HEIGHT + border) * scale,\n                    CHAR_WIDTH * scale,\n                    CHAR_HEIGHT * scale,\n                    u + margin,\n                    v + margin,\n                    CHAR_WIDTH * scale,\n                    CHAR_HEIGHT * scale\n                );\n            }\n            u += CHAR_WIDTH * scale;\n        }\n    },\n\n    measureWidth(text, scale = 1) {\n        return text.split('').reduce((sum, c) => sum + CHAR_WIDTH, 0) * scale;\n    },\n\n    splitParagraph(text, w, h) {\n        let cu = 0, cv = 0;\n        let next = () => ({ text: '', u: cu, v: cv });\n        let wip = next();\n        let list = [];\n\n        for (let c of text.split('')) {\n            let cWidth = Text.measureWidth(c, 1);\n            if (c === '\\n' || cu + cWidth > w) {\n                let saved = '';\n                if (c !== '\\n' && c !== ' ') {\n                    let space = wip.text.split(' ');\n                    if (space.length > 1) {\n                        saved = space.pop();\n                        wip.text = space.join(' ');\n                    }\n                }\n                if (wip.text.length > 0) list.push(wip);\n                cu = 0;\n                cv += (CHAR_HEIGHT);\n                wip = next();\n                if (saved.length > 0) {\n                    wip.text = saved;\n                    cu += Text.measureWidth(wip.text, 1);\n                }\n            } else {\n                cu += cWidth;\n            }\n            if (c !== '\\n') {\n                wip.text = wip.text + c;\n            }\n        }\n\n        if (wip.text.length > 0) list.push(wip);\n\n        return list.map(line => ({\n            ...line,\n            w: Text.measureWidth(line.text, 1),\n            h: CHAR_HEIGHT\n        }));\n    }\n};\n\n// Text utility functions, for manipulating the font sheet images\n\nfunction recolor(font, color) {\n    let canvas = createCanvas(font.img.width, font.img.height);\n    canvas.ctx.fillStyle = color;\n    canvas.ctx.fillRect(0, 0, font.img.width, font.img.height);\n    canvas.ctx.globalCompositeOperation = 'destination-in';\n    canvas.ctx.drawImage(font.img, 0, 0);\n\n    // Return a new font with the same metadata, but a recolored image\n    return {\n        ...font,\n        img: canvas.canvas\n    };\n}\n\nfunction bakeFontGlow(font, glow, scale, border, margin) {\n    // This function is a little complicated because it has to do several things at once.\n    //\n    // The idea is:\n    //  - Take our original sheet of 8x16 characters\n    //  - Build a NEW sheet, with additional \"border\" around each character, so that there is\n    //    room for us to add a glow around each character without bleeding into our neighbors.\n    //  - We want the glow baked in at an upscaled pixel size.\n    //\n    // What is the upscaled pixel size? Here for example, we are scaling up from 8x16 pixels\n    // to 32x64 pixels for each characters. We then want the GLOW added around this new\n    // 32x64 character, not the original size (this allows us to have a glow more tight than\n    // the original chunky pixels we started with).\n    //\n    // A complication of HTML Canvas is that if you draw from a source canvas into a destination\n    // canvas at a higher scale, you will \"bleed\" neighboring pixels from the source canvas.\n    // To avoid this, we use a second temporary canvas and draw from the source into the temporary\n    // canvas with no upscaling, then we draw from the temporary canvas into the upscaled canvas.\n    //\n    // (This means double the draws, but we only do this step once when the game loads, so it's\n    // not a big deal.)\n    let cols = font.img.width / CHAR_WIDTH, rows = font.img.height / CHAR_HEIGHT;\n\n    let temp = createCanvas(CHAR_WIDTH, CHAR_HEIGHT);\n    let canvas = createCanvas(\n        cols * (CHAR_WIDTH + border) * scale,\n        rows * (CHAR_HEIGHT + border) * scale\n    )\n\n    for (let y = 0; y < rows; y++) {\n        for (let x = 0; x < cols; x++) {\n            // Glow (rendered on all 4 sides)\n            temp.ctx.clearRect(0, 0, CHAR_WIDTH, CHAR_HEIGHT);\n            temp.ctx.drawImage(\n                glow.img,\n                x * CHAR_WIDTH,\n                y * CHAR_HEIGHT,\n                CHAR_WIDTH,\n                CHAR_HEIGHT,\n                0, 0,\n                CHAR_WIDTH,\n                CHAR_HEIGHT\n            );\n            canvas.ctx.drawImage(\n                temp.canvas,\n                0, 0,\n                CHAR_WIDTH,\n                CHAR_HEIGHT,\n                x * (CHAR_WIDTH + border) * scale + margin,\n                y * (CHAR_HEIGHT + border) * scale,\n                CHAR_WIDTH * scale,\n                CHAR_HEIGHT * scale\n            );\n            canvas.ctx.drawImage(\n                temp.canvas,\n                0, 0,\n                CHAR_WIDTH,\n                CHAR_HEIGHT,\n                x * (CHAR_WIDTH + border) * scale,\n                y * (CHAR_HEIGHT + border) * scale + margin,\n                CHAR_WIDTH * scale,\n                CHAR_HEIGHT * scale\n            );\n            canvas.ctx.drawImage(\n                temp.canvas,\n                0, 0,\n                CHAR_WIDTH,\n                CHAR_HEIGHT,\n                x * (CHAR_WIDTH + border) * scale + margin * 2,\n                y * (CHAR_HEIGHT + border) * scale + margin,\n                CHAR_WIDTH * scale,\n                CHAR_HEIGHT * scale\n            );\n            canvas.ctx.drawImage(\n                temp.canvas,\n                0, 0,\n                CHAR_WIDTH,\n                CHAR_HEIGHT,\n                x * (CHAR_WIDTH + border) * scale + margin,\n                y * (CHAR_HEIGHT + border) * scale + margin * 2,\n                CHAR_WIDTH * scale,\n                CHAR_HEIGHT * scale\n            );\n\n            // Center character\n            temp.ctx.clearRect(0, 0, CHAR_WIDTH, CHAR_HEIGHT);\n            temp.ctx.drawImage(\n                font.img,\n                x * CHAR_WIDTH,\n                y * CHAR_HEIGHT,\n                CHAR_WIDTH,\n                CHAR_HEIGHT,\n                0, 0,\n                CHAR_WIDTH,\n                CHAR_HEIGHT\n            );\n            canvas.ctx.drawImage(\n                temp.canvas,\n                0, 0,\n                CHAR_WIDTH,\n                CHAR_HEIGHT,\n                x * (CHAR_WIDTH + border) * scale + margin,\n                y * (CHAR_HEIGHT + border) * scale + margin,\n                CHAR_WIDTH * scale,\n                CHAR_HEIGHT * scale\n            );\n        }\n    }\n\n    return { img: canvas.canvas, scale, border, margin };\n}\n","// zzfx() - the universal entry point -- returns a AudioBufferSourceNode\nexport const zzfx=(...t)=>zzfxP(zzfxG(...t))\n\n// zzfxP() - the sound player -- returns a AudioBufferSourceNode\nexport const zzfxP=(...t)=>{let e=zzfxX.createBufferSource(),f=zzfxX.createBuffer(t.length,t[0].length,zzfxR);t.map((d,i)=>f.getChannelData(i).set(d)),e.buffer=f,e.connect(zzfx.destination_),e.start();return e}\n\n// zzfxG() - the sound generator -- returns an array of sample data\nexport const zzfxG=(q=1,k=.05,c=220,e=0,t=0,u=.1,r=0,F=1,v=0,z=0,w=0,A=0,l=0,B=0,x=0,G=0,d=0,y=1,m=0,C=0)=>{let b=2*Math.PI,H=v*=500*b/zzfxR**2,I=(0<x?1:-1)*b/4,D=c*=(1+2*k*Math.random()-k)*b/zzfxR,Z=[],g=0,E=0,a=0,n=1,J=0,K=0,f=0,p,h;e=99+zzfxR*e;m*=zzfxR;t*=zzfxR;u*=zzfxR;d*=zzfxR;z*=500*b/zzfxR**3;x*=b/zzfxR;w*=b/zzfxR;A*=zzfxR;l=zzfxR*l|0;for(h=e+m+t+u+d|0;a<h;Z[a++]=f)++K%(100*G|0)||(f=r?1<r?2<r?3<r?Math.sin((g%b)**3):Math.max(Math.min(Math.tan(g),1),-1):1-(2*g/b%2+2)%2:1-4*Math.abs(Math.round(g/b)-g/b):Math.sin(g),f=(l?1-C+C*Math.sin(2*Math.PI*a/l):1)*(0<f?1:-1)*Math.abs(f)**F*q*zzfxV*(a<e?a/e:a<e+m?1-(a-e)/m*(1-y):a<e+m+t?y:a<h-d?(h-a-d)/u*y:0),f=d?f/2+(d>a?0:(a<h-d?1:(h-a)/d)*Z[a-d|0]/2):f),p=(c+=v+=z)*Math.sin(E*x-I),g+=p-p*B*(1-1E9*(Math.sin(a)+1)%2),E+=p-p*B*(1-1E9*(Math.sin(a)**2+1)%2),n&&++n>A&&(c+=w,D+=w,n=0),!l||++J%l||(c=D,v=H,n=n||1);return Z}\n\n// zzfxV - global volume\nexport const zzfxV=.3\n\n// zzfxR - global sample rate\nexport const zzfxR=44100\n\n// zzfxX - the common audio context\nexport const zzfxX=new(top.AudioContext||webkitAudioContext);\n\n// destination for zzfx and zzfxm sounds\nzzfx.destination_ = zzfxX.destination;\n","'use strict';\n\nimport { zzfxG, zzfxR } from './zzfx';\n\n/**\n * ZzFX Music Renderer v2.0.2 by Keith Clark\n */\n\n/**\n * @typedef Channel\n * @type {Array.<Number>}\n * @property {Number} 0 - Channel instrument\n * @property {Number} 1 - Channel panning (-1 to +1)\n * @property {Number} 2 - Note\n */\n\n/**\n * @typedef Pattern\n * @type {Array.<Channel>}\n */\n\n/**\n * @typedef Instrument\n * @type {Array.<Number>} ZzFX sound parameters\n */\n\n/**\n * Generate a song\n *\n * @param {Array.<Instrument>} instruments - Array of ZzFX sound paramaters.\n * @param {Array.<Pattern>} patterns - Array of pattern data.\n * @param {Array.<Number>} sequence - Array of pattern indexes.\n * @param {Number} [speed=125] - Playback speed of the song (in BPM).\n * @returns {Array.<Array.<Number>>} Left and right channel sample data.\n */\n\nexport const zzfxM = (instruments, patterns, sequence, BPM = 125) => {\n    let instrumentParameters,\n        i,\n        j,\n        k,\n        note,\n        sample,\n        patternChannel,\n        notFirstBeat,\n        stop,\n        instrument,\n        pitch,\n        attenuation,\n        outSampleOffset,\n        sampleOffset,\n        nextSampleOffset,\n        sampleBuffer = [],\n        leftChannelBuffer = [],\n        rightChannelBuffer = [],\n        channelIndex = 0,\n        panning,\n        hasMore = 1,\n        sampleCache = {},\n        beatLength = ((zzfxR / BPM) * 60) >> 2;\n\n    // for each channel in order until there are no more\n    for (; hasMore; channelIndex++) {\n        // reset current values\n        sampleBuffer = [(hasMore = notFirstBeat = pitch = outSampleOffset = 0)];\n\n        // for each pattern in sequence\n        sequence.map((patternIndex, sequenceIndex) => {\n            // get pattern for current channel, use empty 1 note pattern if none found\n            patternChannel = patterns[patternIndex][channelIndex] || [0, 0, 0];\n\n            // check if there are more channels\n            hasMore |= !!patterns[patternIndex][channelIndex];\n\n            // get next offset, use the length of first channel\n            nextSampleOffset =\n                outSampleOffset +\n                (patterns[patternIndex][0].length - 2 - !notFirstBeat) *\n                    beatLength;\n\n            // for each beat in pattern, plus one extra if end of sequence\n            for (\n                i = 2, k = outSampleOffset;\n                i <\n                patternChannel.length + (sequenceIndex == sequence.length - 1);\n                notFirstBeat = ++i\n            ) {\n                // <channel-note>\n                note = patternChannel[i];\n\n                // stop if different instrument or new note\n                stop = (instrument != (patternChannel[0] || 0)) | note | 0;\n\n                // fill buffer with samples for previous beat, most cpu intensive part\n                for (\n                    j = 0;\n                    j < beatLength && notFirstBeat;\n                    // fade off attenuation at end of beat if stopping note, prevents clicking\n                    j++ > beatLength - 99 && stop\n                        ? (attenuation += (attenuation < 1) / 99)\n                        : 0\n                ) {\n                    // copy sample to stereo buffers with panning\n                    sample =\n                        ((1 - attenuation) * sampleBuffer[sampleOffset++]) /\n                            2 || 0;\n                    leftChannelBuffer[k] =\n                        (leftChannelBuffer[k] || 0) + sample * panning - sample;\n                    rightChannelBuffer[k] =\n                        (rightChannelBuffer[k++] || 0) +\n                        sample * panning +\n                        sample;\n                }\n\n                // set up for next note\n                if (note) {\n                    // set attenuation\n                    attenuation = note % 1;\n                    panning = patternChannel[1] || 0;\n                    if ((note |= 0)) {\n                        // get cached sample\n                        sampleBuffer = sampleCache[\n                            [\n                                (instrument =\n                                    patternChannel[(sampleOffset = 0)] || 0),\n                                note\n                            ]\n                        ] =\n                            sampleCache[[instrument, note]] ||\n                            // add sample to cache\n                            ((instrumentParameters = [\n                                ...instruments[instrument]\n                            ]),\n                            (instrumentParameters[2] *=\n                                2 ** ((note - 12) / 12)),\n                            zzfxG(...instrumentParameters));\n                    }\n                }\n            }\n\n            // update the sample offset\n            outSampleOffset = nextSampleOffset;\n        });\n    }\n\n    return [leftChannelBuffer, rightChannelBuffer];\n};\n","export const ObliqueMystique = [[[1.3,0,23,,,.2,3,5],[1.5,0,4e3,,,.03,2,1.25,,,,,.02,6.8,-.3,,.5],[.7,0,2100,,,.2,3,3,,,-400,,,2],[,0,655,,,.11,2,1.65,,,,,,3.8,-.1,.1]],[[[,-.5,13,,,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,14,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,14,,,,],[1,.3,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,],[2,1,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,],[,.6,,,,,13,,18,,19,,,,,,,,19,,18,,,,16,,,,13,,,,,,,,,,13,,18,,19,,,,,,,,18,19,18,,,,13,14,13,,16,,18,,19,,],[3,-1,,,13,,,,,,,,,,,,13,,,,,,,,,,,,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,,,13,13,13,13]],[[,-.5,13,,,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,14,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,14,,,,],[1,.3,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,],[2,1,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,]]],[1,1,0,0,0,0,1,0],,]\n","'use strict';\n\nimport { zzfx, zzfxP, zzfxX } from './lib/zzfx';\nimport { zzfxM } from './lib/zzfxm';\nimport { ObliqueMystique } from './songs/ObliqueMystique';\n\nexport const Audio = {\n    init() {\n        Audio.readyToPlay = false;\n\n        Audio.ctx = zzfxX;\n        Audio.gain_ = Audio.ctx.createGain();\n        Audio.gain_.connect(Audio.ctx.destination);\n        zzfx.destination_ = Audio.gain_;\n\n        Audio.shotgun = [,0.01,140,0.01,0.02,0.45,4,2.42,0.1,-0.1,,,,1.2,,0.3,0.04,0.8,0.02];\n        Audio.page = [,,1233,,.01,.2,1,1.43,,,539,.1,,,,,,.51,.03,.01];\n        Audio.shellReload = [,,68,0.01,,0.14,1,1.53,7.5,0.1,50,0.02,-0.01,-0.2,0.1,0.2,,0.47,0.01];\n        Audio.damage = [,,391,,.19,.01,2,.54,-4,20,,,,,,,.02,.9];\n        Audio.alarm = [,,970,.12,.25,.35,,.39,8.1,,10,.1,.2,,.1,,,.6,.09,.13];\n        // [,,961,.05,.06,1.17,1,4.67,.8,,,,,.8,-0.8,.1,.49,.62,.09];\n        Audio.victory = [,,454,.06,.86,.71,2,.63,-0.7,1.7,-83,.09,.27,.3,.2,,.18,.95,.02,.02];\n        Audio.song = zzfxM(...ObliqueMystique);\n\n        // Save our background music in os13k, for fun!\n        //localStorage[`OS13kMusic,${TITLE} - Oblique Mystique`] = JSON.stringify(ObliqueMystique);\n    },\n\n    update() {\n        if (!Audio.readyToPlay) return;\n\n        if (!Audio.musicPlaying) {\n            //Audio.bgmusicnode = zzfxP(...Audio.song);\n            //Audio.bgmusicnode.loop = true;\n            Audio.musicPlaying = true;\n        }\n    },\n\n    play(sound) {\n        if (!Audio.readyToPlay) return;\n        zzfx(...sound);\n    },\n\n    // It's important we do pausing and unpausing as specific events and not in general update(),\n    // because update() is triggered by the animation frame trigger which does not run if the\n    // page is not visible. (So, if you want the music to fade in the background, for example,\n    // that's not helpful if it won't work because you aren't looking at the page!)\n\n    pause() {\n        Audio.gain_.gain.linearRampToValueAtTime(0, Audio.ctx.currentTime + 1);\n    },\n\n    unpause() {\n        Audio.gain_.gain.linearRampToValueAtTime(1, Audio.ctx.currentTime + 1);\n    }\n};\n","/**\n * `Screen` is a singleton that represents the virtual 80x25 character screen our game\n * lives in. Components like PlayingField will \"draw\" (write text onto) this virtual\n * screen each frame. Once all the text is written, the text will end up rendered on\n * the viewport (canvas) in the browser.\n */\n\nimport { SCREEN_WIDTH, SCREEN_HEIGHT } from './Constants';\nimport { Viewport } from './Viewport';\nimport { Text } from './Text';\n\nexport const Screen = {\n    init() {\n        this.screen = [];\n        for (let y = 0; y < SCREEN_HEIGHT; y++) {\n            this.screen.push([]);\n        }\n        this.clear();\n    },\n\n    clear() {\n        for (let y = 0; y < SCREEN_HEIGHT; y++) {\n            for (let x = 0; x < SCREEN_WIDTH; x++) {\n                this.screen[y][x] = ' ';\n            }\n        }\n    },\n\n    write(x, y, text) {\n        if (!Array.isArray(text)) text = [text];\n\n        for (let j = 0; j < text.length; j++) {\n            for (let i = 0; i < text[j].length; i++) {\n                this.screen[y + j][x + i] = text[j][i];\n            }\n        }\n    },\n\n    draw(ctx) {\n        let text = this.screen.map(row => row.join('')).join('\\n');\n\n        Text.drawText(\n            ctx,\n            Text.splitParagraph(text, Viewport.width),\n            0, 0,\n            Text.glow\n        );\n    }\n};\n","/**\n * `MainMenu` is a class that represents a screen the user can view. Instances of\n * MainMenu are constructed whenever we want the user to go to the main menu, and\n * thrown away when we're done.\n */\n\nimport { PLAY_SPEEDS } from './Constants';\nimport { GameVersion } from './GameVersion-gen.json';\nimport { Screen } from './Screen';\nimport { Game } from './Game';\nimport { Input } from './Input';\n\nexport class MainMenu {\n    update() {\n        switch (Input.lastKey().toUpperCase()) {\n            case 'P':\n                Input.consume();\n                Game.startSession();\n                break;\n            case 'L':\n                Input.consume();\n                Game.playSpeed = (Game.playSpeed + 1) % PLAY_SPEEDS.length;\n                break;\n            case 'I':\n                Input.consume();\n                Game.showInstructions();\n                break;\n            case 'E':\n                Input.consume();\n                Game.showInstructions();\n                break;\n        }\n    }\n\n    draw() {\n        let terminal = 'Quiche MkII';\n\n        let highScores = [\n            `1) 6000  Bob`,\n            `2) 6000  Tom`,\n            `3) 4000  Wayne`,\n            ``,\n            ``\n        ];\n\n        Screen.clear();\n        Screen.write(0, 0, [\n            `               LL                     dd       dd`,\n            `               LL                     dd       dd                      tm`,\n            `               LL         aaaa     ddddd    ddddd    eeee   rrrrrrr`,\n            `               LL        aa  aa   dd  dd   dd  dd   ee  ee  rr    rr`,\n            `               LL        aa  aa   dd  dd   dd  dd   eeeeee  rr`,\n            `               LL        aa  aa   dd  dd   dd  dd   ee      rr`,\n            `               LLLLLLLL   aaa aa   ddd dd   ddd dd   eeee   rr`,\n            ``,\n            `                                       Version:    ${GameVersion}`,\n            `(c) 1982, 1983 Yahoo Software          Terminal:   ${terminal}`,\n            `10970 Ashton Ave.  Suite 312           Play speed: ${Game.playSpeed + 1} / ${PLAY_SPEEDS.length}`,\n            `Los Angeles, Ca  90024                 Move = /WASD, Jump = Space,`,\n            `                                       Stop = Other`,\n            ``,\n            `P = Play game                          High Scores`,\n            `L = Change level of difficulty         ${highScores[0]}`,\n            `C = Configure Ladder                   ${highScores[1]}`,\n            `I = Instructions                       ${highScores[2]}`,\n            `E = Exit Ladder                        ${highScores[3]}`,\n            `                                       ${highScores[4]}`,\n            ``,\n            `Enter one of the above:`\n        ]);\n    }\n}\n","import { Screen } from './Screen';\nimport { Game } from './Game';\nimport { Input } from './Input';\n\nexport class InstructionsMenu {\n    constructor() {\n    }\n\n    update() {\n        if (Input.lastKey().toUpperCase() !== '') {\n            Input.consume();\n            Game.showMainMenu();\n        }\n    }\n\n    draw() {\n        Screen.clear();\n        Screen.write(0, 0, [\n            `You are a Lad trapped in a maze.  Your mission is is to explore the`,\n            `dark corridors never before seen by human eyes and find hidden`,\n            `treasures and riches.`,\n            ``,\n            `You control Lad by typing the direction buttons and jumping by`,\n            `typing SPACE.  But beware of the falling rocks called Der rocks.`,\n            `You must find and grasp the treasures (shown as $) BEFORE the`,\n            `bonus time runs out.`,\n            ``,\n            `A new Lad will be awarded for every 10,000 points.`,\n            `Extra points are awarded for touching the gold`,\n            `statues (shown as &).  You will receive the bonus time points`,\n            `that are left when you have finished the level.`,\n            ``,\n            `Type an ESCape to pause the Game`,\n            ``,\n            `Remember, there is more than one way to skin a cat. (Chum)`,\n            ``,\n            `Good luck Lad.`,\n            ``,\n            ``,\n            ``,\n            `Type RETURN to return to main menu:`\n        ]);\n    }\n}\n","/**\n * A collection of states and functions related to entities.\n */\n\nimport { LEVEL_COLS } from './Constants';\n\n// A list of states usable by entities. Some states only apply to players (rocks can't jump).\n//\n// Many of these are actually DIRECTIONS, but since this game has \"pac man movement\", a\n// direction is a state -- the player will keep moving in the tapped direction until the player\n// enters a new input.\nexport const State = {\n    STOPPED:    1,         // Standing still\n    UP:         2,         // Moving up (player only)\n    LEFT:       3,         // Moving left\n    DOWN:       4,         // Moving down\n    RIGHT:      5,         // Moving right\n    FALLING:    6,         // Falling\n    START_JUMP: 7,         // About to start a jump (player only)\n    JUMP_LEFT:  8,         // Jumping left (player only)\n    JUMP_RIGHT: 9,         // Jumping right (player only)\n    JUMP_UP:    10,        // Jumping straight up (player only)\n    DYING:      11,        // Dying (used as a death animation)\n    DEAD:       12         // Dead (for player, restart level; for rock, disappear)\n};\n\n// This constant controls the \"shape\" of the left, right, and straight-up jumps by\n// the player. Note that the straight-up jump gets 1 frame less of airtime than\n// the left and right jumps.\nexport const JUMP_FRAMES = {\n    [State.JUMP_RIGHT]: [\n        { x: 1, y: -1 },\n        { x: 1, y: -1 },\n        { x: 1, y: 0 },\n        { x: 1, y: 0 },\n        { x: 1, y: 1 },\n        { x: 1, y: 1 }\n    ],\n    [State.JUMP_LEFT]: [\n        { x: -1, y: -1 },\n        { x: -1, y: -1 },\n        { x: -1, y: 0 },\n        { x: -1, y: 0 },\n        { x: -1, y: 1 },\n        { x: -1, y: 1 }\n    ],\n    [State.JUMP_UP]: [\n        { x: 0, y: -1 },\n        { x: 0, y: -1 },\n        { x: 0, y: 0 },\n        { x: 0, y: 1 },\n        { x: 0, y: 1 },\n        { x: 0, y: 0 }\n    ]\n};\n\nexport function applyEntityMovement(entity, field) {\n    let repeat = false;\n\n    // This method contains generic \"movement\" application for all entities, including\n    // Lad (player) and Der Rocks (enemies). Things like falling, moving left/right, etc.,\n    // work the same for both.\n    //\n    // (There's a bunch of jump logic in here too, and moving UP, which really only applies\n    // to players, but that's OK -- Der Rocks just won't attempt those actions.)\n\n    if (entity.nextState) {\n        switch (entity.state) {\n            case State.STOPPED:\n            case State.LEFT:\n            case State.RIGHT:\n                if ([State.LEFT, State.RIGHT, State.STOPPED].includes(entity.nextState)) {\n                    entity.state = entity.nextState;\n                    entity.nextState = undefined;\n                }\n                break;\n\n            case State.UP:\n            case State.DOWN:\n                // Normal\n                if ([State.LEFT, State.RIGHT].includes(entity.nextState)) {\n                    entity.state = entity.nextState;\n                    entity.nextState = undefined;\n                }\n                break;\n\n            case State.JUMP_LEFT:\n            case State.JUMP_RIGHT:\n            case State.JUMP_UP:\n                if (entity.nextState === State.RIGHT && entity.state != State.JUMP_RIGHT) {\n                    entity.state = State.JUMP_RIGHT;\n                    entity.nextState = State.RIGHT;\n                }\n                if (entity.nextState === State.LEFT && entity.state != State.JUMP_LEFT) {\n                    entity.state = State.JUMP_LEFT;\n                    entity.nextState = State.LEFT;\n                }\n                if (entity.nextState === State.DOWN) {\n                    entity.state = State.FALLING;\n                    entity.nextState = undefined;\n                }\n                if (entity.nextState === State.UP) {\n                    // Special case: leave UP in the queue for later\n                }\n                break;\n        }\n    }\n\n    if (entity.nextState === State.START_JUMP) {\n        // Special case: the user wants to jump!\n        //\n        // If the player is standing on something solid, we initiate a jump based on the current\n        // movement of the player.\n        if (field.onSolid(entity.x, entity.y)) {\n            if (entity.state === State.STOPPED || entity.state === State.FALLING) {\n                entity.state = State.JUMP_UP;\n                entity.jumpStep = 0;\n                entity.nextState = State.STOPPED;\n            } else if (entity.state === State.LEFT || entity.state === State.JUMP_LEFT) {\n                entity.state = State.JUMP_LEFT;\n                entity.jumpStep = 0;\n                entity.nextState = State.LEFT;\n            } else if (entity.state === State.RIGHT || entity.state === State.JUMP_RIGHT) {\n                entity.state = State.JUMP_RIGHT;\n                entity.jumpStep = 0;\n                entity.nextState = State.RIGHT;\n            }\n        } else {\n            // Special case: leave START_JUMP in the queue for later.\n            //\n            // This lets the user tap jump a few frames before hitting the ground to\n            // chain-jump, especially at higher speeds bouncing off 1-wide platforms.\n        }\n    } else if (entity.nextState === State.UP && field.isLadder(entity.x, entity.y)) {\n        // Special case: the user wants to go up!\n        //\n        // If the user is on a ladder, we can start ascending. Note that if the user is not\n        // on a ladder we ignore their input, which is intentional -- this allows queued\n        // (pacman) input, where we can tap UP a little before reaching the ladder.\n        entity.state = State.UP;\n        entity.nextState = undefined;\n    } else if (entity.nextState === State.DOWN && (field.isLadder(entity.x, entity.y) || field.isLadder(entity.x, entity.y + 1))) {\n        // Special case: the player wants to go down!\n        //\n        // If the player is on (or above) a ladder, we can start descending. Note that if the player is not\n        // on a ladder we ignore their input, which is intentional -- this allows queued\n        // (pacman) input, where we can tap DOWN a little before reaching the ladder.\n        entity.state = State.DOWN;\n        entity.nextState = undefined;\n    }\n\n    switch (entity.state) {\n        case State.LEFT:\n            if (!field.onSolid(entity.x, entity.y)) {\n                entity.nextState = State.LEFT;\n                entity.state = State.FALLING;\n                repeat = true;\n                break;\n            }\n            if (field.emptySpace(entity.x - 1, entity.y)) {\n                entity.x--;\n            } else {\n                entity.nextState = State.STOPPED;\n            }\n            break;\n\n        case State.RIGHT:\n            if (!field.onSolid(entity.x, entity.y)) {\n                entity.nextState = State.RIGHT;\n                entity.state = State.FALLING;\n                repeat = true;\n                break;\n            }\n            if (field.emptySpace(entity.x + 1, entity.y)) {\n                entity.x++;\n            } else {\n                entity.nextState = State.STOPPED;\n            }\n            break;\n\n        case State.UP:\n            if (field.canClimbUp(entity.x, entity.y - 1)) {\n                entity.y--;\n            } else {\n                entity.state = State.STOPPED;\n            }\n            break;\n\n        case State.DOWN:\n            if (field.canClimbDown(entity.x, entity.y + 1)) {\n                entity.y++;\n            } else {\n                entity.state = State.STOPPED;\n            }\n            break;\n\n        case State.JUMP_RIGHT:\n        case State.JUMP_LEFT:\n        case State.JUMP_UP:\n            let step = JUMP_FRAMES[entity.state][entity.jumpStep];\n            if ((entity.x + step.x >= 0) && (entity.x + step.x < LEVEL_COLS)) {\n                let terrain = field.layout[entity.y + step.y][entity.x + step.x];\n                if (['=', '|', '-'].includes(terrain)) {\n                    if (field.onSolid(entity.x, entity.y)) {\n                        entity.state = entity.nextState;\n                        entity.nextState = undefined;\n                    } else {\n                        switch (entity.state) {\n                            case State.JUMP_RIGHT:\n                                entity.nextState = State.RIGHT;\n                                break;\n                            case State.JUMP_LEFT:\n                                entity.nextState = State.LEFT;\n                                break;\n                            case State.JUMP_UP:\n                                entity.nextState = State.UP;\n                                break;\n                        }\n                        entity.state = State.FALLING;\n                    }\n                } else if (terrain === 'H') {\n                    entity.x += step.x;\n                    entity.y += step.y;\n\n                    if (entity.nextState === State.UP) {\n                        entity.state = State.UP;\n                    } else {\n                        entity.state = State.STOPPED;\n                    }\n                    entity.nextState = undefined;\n                } else {\n                    entity.x += step.x;\n                    entity.y += step.y;\n                    entity.jumpStep++;\n\n                    if (entity.jumpStep >= JUMP_FRAMES[entity.state].length) {\n                        switch (entity.state) {\n                            case State.JUMP_RIGHT:\n                                entity.state = State.RIGHT;\n                                break;\n                            case State.JUMP_LEFT:\n                                entity.state = State.LEFT;\n                                break;\n                            case State.JUMP_UP:\n                                entity.state = State.UP;\n                                break;\n                        }\n                    }\n                }\n            } else {\n                if (field.onSolid(entity.x, entity.y)) {\n                    entity.state = entity.nextState;\n                    entity.nextState = undefined;\n                } else {\n                    entity.state = State.FALLING;\n                    entity.nextState = State.STOPPED;\n                }\n            }\n            break;\n\n        case State.FALLING:\n            if (field.onSolid(entity.x, entity.y)) {\n                entity.state = entity.nextState || State.STOPPED;\n            } else {\n                entity.y++;\n            }\n            break;\n    }\n\n    // If we were attempting to move somewhere and realized we should be falling instead,\n    // we want to re-run the entire algorithm once. This avoids what boils down to a \"skipped\n    // frame\" from the user's point of view.\n    if (repeat) return applyEntityMovement(entity, field);\n}\n","'use strict';\n\nimport { State, applyEntityMovement } from './Entity';\nimport { Input } from './Input';\nimport { Screen } from './Screen';\n\nconst DEATH_FRAMES = ['p', 'p', 'b', 'd', 'd', 'q', 'p', 'p', 'b', 'd', 'd', 'q', '-', '-', '_', '_', '_', '_', '_'];\n\n/**\n * Player\n */\nexport class Player {\n    constructor(x, y) {\n        this.x = x;\n        this.y = y;\n        this.state = State.STOPPED;\n        this.nextState = State.STOPPED;\n        this.queued = [];\n        this.jumpStep = 0;\n        this.deathStep = 0;\n    }\n\n    update(field, moveFrame) {\n        if (this.state === State.DYING) {\n            this.deathStep++;\n            if (this.deathStep >= DEATH_FRAMES.length) this.state = State.DEAD;\n        }\n\n        if (this.state === State.DYING || this.state === State.DEAD) return;\n\n        if (!moveFrame) return;\n\n        let action = Input.lastAction();\n\n        if (action === Input.Action.LEFT) {\n            this.nextState = State.LEFT;\n            Input.consume();\n        } else if (action === Input.Action.RIGHT) {\n            this.nextState = State.RIGHT;\n            Input.consume();\n        } else if (action === Input.Action.UP) {\n            this.nextState = State.UP;\n            Input.consume();\n        } else if (action === Input.Action.DOWN) {\n            this.nextState = State.DOWN;\n            Input.consume();\n        } else if (action === Input.Action.JUMP) {\n            this.nextState = State.START_JUMP;\n            Input.consume();\n        }\n\n        return applyEntityMovement(this, field);\n    }\n\n    draw() {\n        let char = 'g';\n\n        switch (this.state) {\n            case State.RIGHT:\n            case State.JUMP_RIGHT:\n            case State.UP:\n            case State.DOWN:\n                char = 'p';\n                break;\n\n            case State.LEFT:\n            case State.JUMP_LEFT:\n                char = 'q';\n                break;\n\n            case State.FALLING:\n                char = 'b';\n                break;\n\n            case State.DYING:\n                char = DEATH_FRAMES[this.deathStep];\n                break;\n\n            case State.DEAD:\n                char = '_';\n                break;\n        }\n\n        Screen.write(this.x, this.y, char);\n    }\n\n    kill() {\n        // Just a convenience method for killing the player.\n        //\n        // Note that \"killing\" the player just puts it in a dying state, we'll play\n        // a little death animation as rocks move about before the player actually dies,\n        // at which point they will lose a life and the level starts over.\n        if (this.state != State.DYING && this.state != State.DEAD) {\n            this.state = State.DYING;\n        }\n    }\n}\n","/**\n * `Rock` is a class representing the Der rocks, which fall through the level\n * and kill the player if touched.\n */\n\nimport { LEVEL_COLS } from './Constants';\nimport { State, applyEntityMovement } from './Entity';\nimport { Screen } from './Screen';\n\nconst DEATH_FRAMES = ['{', '}', '(', ')', '%', '%', ':', ':'];\n\nexport class Rock {\n    constructor(dispenser) {\n        this.x = dispenser.x;\n        this.y = dispenser.y;\n        this.state = State.FALLING;\n        this.nextState = undefined;\n        this.deathStep = 0;\n    }\n\n    update(field, moveFrame) {\n        if (this.state === State.DYING) {\n            this.deathStep++;\n            if (this.deathStep >= DEATH_FRAMES.length) this.state = State.DEAD;\n        }\n\n        if (this.state === State.DYING || this.state === State.DEAD) return;\n\n        if (!moveFrame) return;\n\n        if (this.state === State.STOPPED) {\n            if (this.x === 0 || !field.emptySpace(this.x - 1, this.y)) {\n                this.nextState = State.RIGHT;\n            } else if (this.x === LEVEL_COLS - 1 || !field.emptySpace(this.x + 1, this.y)) {\n                this.nextState = State.LEFT;\n            } else {\n                this.nextState = Math.random() > 0.5 ? State.LEFT : State.RIGHT;\n            }\n        }\n\n        if (this.x === 0 && this.state === State.LEFT) {\n            this.state = State.RIGHT;\n        }\n\n        if (this.x === LEVEL_COLS - 1 && this.state === State.RIGHT) {\n            this.state = State.LEFT;\n        }\n\n        if (this.state !== State.FALLING && !field.onSolid(this.x, this.y)) {\n            this.nextState = State.FALLING;\n        }\n\n        if (field.isLadder(this.x, this.y + 1) && [State.LEFT, State.RIGHT].includes(this.state)) {\n            let r = Math.floor(Math.random() * 4);\n            this.nextState = [State.LEFT, State.RIGHT, State.DOWN, State.DOWN][r];\n        }\n\n        if (field.isEater(this.x, this.y)) {\n            this.state = State.DYING;\n            return;\n        }\n\n        return applyEntityMovement(this, field);\n    }\n\n    draw() {\n        let char = 'o';\n\n        switch (this.state) {\n            case State.DYING:\n                char = DEATH_FRAMES[this.deathStep];\n                break;\n            case State.DEAD:\n                return;\n        }\n\n        Screen.write(this.x, this.y, char);\n    }\n}\n","/**\n * `Level` is a singleton that handles logic related to loading levels. A \"level\"\n * is a bundle of data (like layout, dispensers, player position, etc.). When you\n * load a level, that data is used to initialize a new \"playing field\" -- this is\n * what the player moves around on and interacts with.\n *\n * (Naming things is hard, so it helps to make a decision and then stick to it\n * throughout your codebase. In this case, the decision is that a \"level\" is a\n * static block of data about a level the user COULD play, whereas a level being\n * actively played is called a playing field.)\n */\n\nimport { LEVEL_ROWS, LEVEL_COLS } from './Constants';\nimport LevelData from '../levels/levels.json';\n\nexport const Level = {\n    LEVELS: LevelData,\n    LEVEL_COUNT: LevelData.length,\n\n    load(levelNumber) {\n        // In the original Ladder, \"level 7\" was the last level, and continuing to\n        // play looped you around to the beginning again (level 8 is Easy Street\n        // again and so on, and so is level 15, etc.).\n        let level = Level.LEVELS[levelNumber % Level.LEVELS.length];\n        if (!level) throw new Error(`No such level number: ${levelNumber}`);\n\n        // Perform some sanity checks on the level layout and extract useful info\n        // like player start position and dispenser positions etc.\n\n        let layout = level.layout.map(row => row.split(''));\n        let dispensers = [];\n        let player;\n\n        // Sanity check\n        layout = layout.slice(0, LEVEL_ROWS);\n\n        for (let y = 0; y < LEVEL_ROWS; y++) {\n            // Sanity checks\n            if (!layout[y]) layout[y] = [];\n            layout[y] = layout[y].slice(0, LEVEL_COLS);\n\n            for (let x = 0; x < LEVEL_COLS; x++) {\n                // Sanity check\n                if (!layout[y][x]) layout[y][x] = ' ';\n\n                // Der Dispensers (V) and Der Eaters (*) have behaviors, so it is convenient for us\n                // to construct a list of them, but they are permanent parts of the layout, so we can\n                // leave them as part of the level and draw them normally.\n\n                if (layout[y][x] === 'V') {\n                    dispensers.push({ x, y });\n                }\n\n                // Treasure ($), Statues (&), and the Lad (p) are transient - the player moves around and\n                // can pick up the treasures and statues. That's why for these elements, we add them to\n                // our lists AND we remove them from the \"playing field\", we'll draw them separately on\n                // top of the layout.\n\n                if (layout[y][x] === 'p') {\n                    layout[y][x] = ' ';\n                    player = { x, y };\n                }\n\n                // Everything else, like floors (=), walls (|), ladders (H) and fire (^), is part of the\n                // layout. The Lad interacts with them, but we can handle that during our movement checks.\n            }\n        }\n\n        return {\n            name: level.name,\n            layout,\n            dispensers,\n            player\n        };\n    }\n};\n","/**\n * `PlayingField` is a class that represents a level that is actively being played on-screen.\n * A new one is created by the game session any time we start a new level.\n *\n * Level-specific stuff (like bonus time, dispensers, rocks, player position, etc.) is all\n * managed by the playing field.\n */\n\nimport { LEVEL_COLS, SCORE_ROCK, SCORE_STATUE, SCORE_TREASURE, MAX_ROCKS, DISPENSER_MAX_ROCKS, HIDDEN_FACTOR_MAX_ROCKS } from './Constants';\nimport { Game } from './Game';\nimport { Player } from './Player';\nimport { Rock } from './Rock';\nimport { State } from './Entity';\nimport { Screen } from './Screen';\nimport { Level } from './Level';\n\nexport class PlayingField {\n    constructor(levelNumber) {\n        let level = Level.load(levelNumber);\n\n        // Store level-related info\n        this.layout = level.layout;\n        this.dispensers = level.dispensers;\n        this.time = 2000;\n\n        // Initialize player\n        this.player = new Player(level.player.x, level.player.y);\n\n        // Initialize list of rocks (empty)\n        this.rocks = [];\n\n        // Not winning yet (while \"winning\" the player stops moving and we add up the bonus score)\n        this.winning = false;\n    }\n\n    update(moveFrame) {\n        // If we're already winning, keep counting down the bonus time, but\n        // no more movement will happen on this level.\n        if (this.winning) {\n            Game.session.updateScore(SCORE_TREASURE);\n            this.time -= 10;\n            if (this.time < 0) Game.session.startNextLevel();\n            return;\n        }\n\n        // Count down bonus time\n        if (this.time > 0 && moveFrame) this.time--;\n\n        let oldX = this.player.x, oldY = this.player.y;\n\n        // Move player based on user input\n        this.player.update(this, moveFrame);\n\n        // Any time you move OFF of a disappearing floor, it goes away.\n        if (oldX !== this.player.x && oldY === this.player.y) {\n            if (this.isDisappearingFloor(oldX, oldY + 1)) {\n                this.layout[oldY + 1][oldX] = ' ';\n            }\n        }\n\n        // Check if player should be dead (before moving rocks)\n        if (moveFrame) this.checkIfPlayerShouldDie(Game.session);\n\n        // Move rocks\n        for (let rock of this.rocks) rock.update(this, moveFrame);\n\n        // Check if player should be dead (after moving rocks)\n        if (moveFrame) this.checkIfPlayerShouldDie(Game.session);\n\n        if (moveFrame) {\n            // Collect statues\n            if (this.isStatue(this.player.x, this.player.y)) {\n                this.layout[this.player.y][this.player.x] = ' ';\n                Game.session.updateScore(SCORE_STATUE);\n            }\n\n            // Collect treasure (ends the current level)\n            if (this.isTreasure(this.player.x, this.player.y)) {\n                this.winning = true;\n                return;\n            }\n\n            // Interact with trampolines\n            if (this.isTrampoline(this.player.x, this.player.y)) {\n                switch (Math.floor(Math.random() * 5)) {\n                    case 0:\n                        this.player.state = State.LEFT;\n                        this.player.nextState = undefined;\n                        break;\n                    case 1:\n                        this.player.state = State.RIGHT;\n                        this.player.nextState = undefined;\n                        break;\n                    case 2:\n                        this.player.state = State.JUMP_UP;\n                        this.player.nextState = undefined;\n                        this.player.jumpStep = 0;\n                        break;\n                    case 3:\n                        this.player.state = State.JUMP_LEFT;\n                        this.player.nextState = State.LEFT;\n                        this.player.jumpStep = 0;\n                        break;\n                    case 4:\n                        this.player.state = State.JUMP_RIGHT;\n                        this.player.nextState = State.RIGHT;\n                        this.player.jumpStep = 0;\n                        break;\n                }\n            }\n\n            // Kill dead rocks\n            this.rocks = this.rocks.filter(rock => rock.state !== State.DEAD);\n\n            // Dispense new rocks\n            if (this.rocks.length < this.maxRocks() && Math.random() > 0.91) {\n                let dispenser = this.dispensers[Math.floor(Math.random() * this.dispensers.length)];\n                this.rocks.push(new Rock(dispenser));\n            }\n\n            // Dying player\n            if (this.player.state === State.DEAD) {\n                Game.session.lives--;\n                if (Game.session.lives <= 0) {\n                    // TODO: More fanfare\n                    Game.showMainMenu();\n                } else {\n                    Game.session.restartLevel();\n                }\n            }\n        }\n    }\n\n    draw() {\n        // Draw layout\n        Screen.write(0, 0, this.layout.map(row => row.join('')));\n\n        // Draw player\n        this.player.draw();\n\n        // Draw rocks\n        this.rocks.forEach(rock => rock.draw());\n    }\n\n    //\n    // Utility functions - this is an attempt to consolidate logic in one spot and make other\n    // functions (like the update logic in Player) more readable.\n    //\n\n    onSolid(x, y) {\n        return ['=', '-', 'H', '|'].includes(this.layout[y + 1][x]) || this.layout[y][x] === 'H';\n    }\n\n    emptySpace(x, y) {\n        if (x < 0 || x >= LEVEL_COLS) {\n            return false;\n        } else {\n            return !['|', '='].includes(this.layout[y][x]);\n        }\n    }\n\n    isLadder(x, y) {\n        return this.layout[y][x] === 'H';\n    }\n\n    isStatue(x, y) {\n        return this.layout[y][x] === '&';\n    }\n\n    isTreasure(x, y) {\n        return this.layout[y][x] === '$';\n    }\n\n    isTrampoline(x, y) {\n        return this.layout[y][x] === '.';\n    }\n\n    isEater(x, y) {\n        return this.layout[y][x] === '*';\n    }\n\n    isFire(x, y) {\n        return this.layout[y][x] === '^';\n    }\n\n    isDisappearingFloor(x, y) {\n        return this.layout[y][x] === '-';\n    }\n\n    canClimbUp(x, y) {\n        if (y < 0) return false;\n        return ['H', '&', '$'].includes(this.layout[y][x]);\n    }\n\n    canClimbDown(x, y) {\n        return ['H', '&', '$', ' ', '^', '.'].includes(this.layout[y][x]);\n    }\n\n    checkIfPlayerShouldDie() {\n        // If we're ALREADY dying or dead, let nature run its course\n        if (this.player.state === State.DYING || this.player.state === State.DEAD) return;\n\n        // Landing on fire kills you\n        if (this.isFire(this.player.x, this.player.y)) {\n            this.player.state = State.DYING;\n        }\n\n        // Running out of time kills you\n        if (this.time <= 0) {\n            this.player.state = State.DYING;\n        }\n\n        // Running into a rock kills you, and makes the rock that killed you disappear.\n        // That's not necessary, I just think it looks better. While we play the death\n        // animation we'll continue to move rocks, so another rock might also \"hit\" you,\n        // but it will just pass through your dying character.\n        //\n        // If we're above a rock with 1 or 2 spaces between, we get some points instead.\n        //\n        // A function named `checkIfPlayerShouldDie` is probably not the best place to do\n        // this, but it's convenient because we want to do this twice (just like the death\n        // check).\n        //\n        //                    p                          p\n        // (1)   p     -->            (2)   p     -->\n        //        o          o                o          o\n        //      =====       =====          =====       =====\n        //\n        // In situation (1), there will never be a frame on-screen where the player is directly\n        // above the rock, but we'll still count it because we'll check once after the player moves.\n        // In situation (2), the first check won't count, but the second check after the rocks move\n        // will give the score (and the frame drawn on screen will show the player above the rock).\n        //\n        for (let i = 0; i < this.rocks.length; i++) {\n            if (this.player.x === this.rocks[i].x) {\n                if (this.player.y === this.rocks[i].y) {\n                    this.player.kill();\n                    this.rocks.splice(i, 1);\n                    break;\n                } else if (this.player.y === this.rocks[i].y - 1 && this.emptySpace(this.player.x, this.player.y + 1)) {\n                    Game.session.updateScore(SCORE_ROCK);\n                } else if (this.player.y === this.rocks[i].y - 2 && this.emptySpace(this.player.x, this.player.y + 1) && this.emptySpace(this.player.x, this.player.y + 2)) {\n                    Game.session.updateScore(SCORE_ROCK);\n                }\n            }\n        }\n    }\n\n    maxRocks() {\n        // The total number of rocks we can have on screen is based on a global max rocks value,\n        // then increased slightly by the number of dispensers on the level, then increased again\n        // by a hidden difficulty factor (level cycles).\n        return MAX_ROCKS + this.dispensers.length * DISPENSER_MAX_ROCKS + Game.session.hiddenFactor() * HIDDEN_FACTOR_MAX_ROCKS;\n    }\n}\n","/**\n * `GameSession` is a class that represents... well, a game session! It is created when the\n * player presses `P` at the main menu, and ends when the player runs out of lives.\n *\n * The game session tracks values that persist across levels (like number of lives, score,\n * the level number, etc.). Most of the actual in-game logic it hands off to `PlayingField`.\n */\n\nimport { PLAY_SPEEDS, SCORE_ROCK, SCORE_STATUE, SCORE_TREASURE, HIDDEN_FACTOR_PLAY_SPEED, NEW_LIFE_SCORE } from './Constants';\nimport { Game } from './Game';\nimport { PlayingField } from './PlayingField';\nimport { Level } from './Level';\nimport { Screen } from './Screen';\nimport { Input } from './Input';\n\nexport class GameSession {\n    constructor() {\n        this.score = 0;\n        this.levelNumber = 0;\n        this.levelCycle = 1;\n        this.lives = 5;\n        this.nextLife = NEW_LIFE_SCORE;\n        this.paused = false;\n    }\n\n    update() {\n        // The `Game` controls the overall game loop, which runs at a fixed 60 frames per second.\n        //\n        // However, Ladder has the concept of \"play speed\" which the player can change at the main\n        // menu, and it controls how fast the game runs. To accomplish that, we can do a second\n        // frame gate here. This gate sets a flag called `moveFrame` IF things can move in this frame.\n        //\n        // We do it this way so that animations (like the play death animation, or the end-of-level\n        // score animation) can run at the same speed no matter what the play speed is.\n        let now = new Date().getTime();\n        let lastFrame = this.lastFrame || 0;\n        let moveFrame = false;\n\n        if (now - lastFrame >= (this.nextFrame || 0)) {\n            moveFrame = true;\n            this.nextFrame = now + this.moveFrameMillisecondDelay();\n        }\n\n        if (this.paused && [Input.Action.PAUSE, Input.Action.RESUME].includes(Input.lastAction())) {\n            this.paused = false;\n            Input.consume();\n        }\n\n        if (!this.paused && Input.lastAction() === Input.Action.PAUSE) {\n            this.paused = true;\n            Input.consume();\n        }\n\n        if (this.paused) return;\n\n        // If we haven't instantiated the playing field yet, create it now.\n        if (!this.field) this.field = new PlayingField(this.levelNumber);\n\n        // Hand off to the playing field for actual in-game logic\n        this.field.update(moveFrame);\n\n        this.handleCheatCodes();\n    }\n\n    draw() {\n        if (this.field) this.field.draw();\n\n        let stat = [\n            String(this.lives).padStart(2, ' '),\n            String(this.levelNumber + 1).padStart(2, ' '),\n            String(this.score).padStart(6, ' '),\n            this.field ? String(this.field.time).padStart(4, ' ') : ''\n        ];\n        Screen.write(0, 21, `Lads   ${stat[0]}     Level   ${stat[1]}      Score   ${stat[2]}      Bonus time   ${stat[3]}`);\n\n        if (this.paused) {\n            Screen.write(0, 23, 'Paused - type ESCape or RETURN to continue.');\n        }\n    }\n\n    restartLevel() {\n        this.field = undefined;\n    }\n\n    startNextLevel() {\n        this.field = undefined;\n        this.levelNumber++;\n        if (this.levelNumber % Level.LEVEL_COUNT === 0) {\n            this.levelCycle++;\n        }\n    }\n\n    updateScore(scoreType) {\n        switch (scoreType) {\n            case SCORE_ROCK:\n                this.score += 200;\n                break;\n            case SCORE_STATUE:\n                this.score += this.field.time;\n                break;\n            case SCORE_TREASURE:\n                // Added repeatedly after winning the level\n                this.score += 10;\n                break;\n        }\n\n        if (this.score >= this.nextLife) {\n            this.lives++;\n            this.nextLife += NEW_LIFE_SCORE;\n        }\n    }\n\n    hiddenFactor() {\n        // This \"hidden\" difficulty level increases steadily as the player completes a\n        // level cycle (every time they reach the Easy Street level). This makes the\n        // game slowly harder as you keep playing.\n        return Math.floor(this.levelNumber / Level.LEVEL_COUNT);\n    }\n\n    moveFrameMillisecondDelay() {\n        // Regardless of play speed, the game gets slightly faster every level cycle\n        return Math.floor(PLAY_SPEEDS[Game.playSpeed] - this.hiddenFactor() * HIDDEN_FACTOR_PLAY_SPEED * PLAY_SPEEDS[Game.playSpeed]);\n    }\n\n    handleCheatCodes() {\n        // Cheat codes are useful for testing, and this game is no exception. Of course\n        // THESE cheat codes do not belong here, as they wouldn't be created until 11 years\n        // later, but that won't stop me from using them anywhere I get the chance!\n        //\n        // =================     ===============     ===============   ========  ========\n        // \\\\ . . . . . . .\\\\   //. . . . . . .\\\\   //. . . . . . .\\\\  \\\\. . .\\\\// . . //\n        // ||. . ._____. . .|| ||. . ._____. . .|| ||. . ._____. . .|| || . . .\\/ . . .||\n        // || . .||   ||. . || || . .||   ||. . || || . .||   ||. . || ||. . . . . . . ||\n        // ||. . ||   || . .|| ||. . ||   || . .|| ||. . ||   || . .|| || . | . . . . .||\n        // || . .||   ||. _-|| ||-_ .||   ||. . || || . .||   ||. _-|| ||-_.|\\ . . . . ||\n        // ||. . ||   ||-'  || ||  `-||   || . .|| ||. . ||   ||-'  || ||  `|\\_ . .|. .||\n        // || . _||   ||    || ||    ||   ||_ . || || . _||   ||    || ||   |\\ `-_/| . ||\n        // ||_-' ||  .|/    || ||    \\|.  || `-_|| ||_-' ||  .|/    || ||   | \\  / |-_.||\n        // ||    ||_-'      || ||      `-_||    || ||    ||_-'      || ||   | \\  / |  `||\n        // ||    `'         || ||         `'    || ||    `'         || ||   | \\  / |   ||\n        // ||            .===' `===.         .==='.`===.         .===' /==. |  \\/  |   ||\n        // ||         .=='   \\_|-_ `===. .==='   _|_   `===. .===' _-|/   `==  \\/  |   ||\n        // ||      .=='    _-'    `-_  `='    _-'   `-_    `='  _-'   `-_  /|  \\/  |   ||\n        // ||   .=='    _-'          `-__\\._-'         `-_./__-'         `' |. /|  |   ||\n        // ||.=='    _-'                                                     `' |  /==.||\n        // =='    _-'                                                            \\/   `==\n        // \\   _-'                                                                `-_   /\n        //  `''                                                                      ``'\n        //\n        let recentKeystrokes = Input.history.map(event => event.key).join('').toUpperCase();\n        if (recentKeystrokes.match(/IDCLEV(\\d\\d)/)) {\n            // Changing levels is as simple as setting the desired level number\n            // and then throwing the current playing field away.\n            Input.consume(true);\n            this.levelNumber = parseInt(RegExp.$1, 10);\n            this.field = undefined;\n        } else if (recentKeystrokes.includes('IDDQD')) {\n            Input.consume(true);\n            console.log('god mode');\n        } else if (recentKeystrokes.includes('IDKFA')) {\n            // Immediately end the current level as if we'd touched the treasure.\n            Input.consume(true);\n            if (this.field) this.field.winning = true;\n        } else if (recentKeystrokes.includes('IDKILL')) {\n            Input.consume(true);\n            if (this.field && this.field.player) this.field.player.kill();\n        }\n    }\n}\n","/**\n * `Game` is a singleton that represents the running game in the browser,\n * initializes game submodules, and handles the top-level game loop.\n */\n\nimport { Sprite } from './Sprite';\nimport { Input } from './Input';\nimport { Text } from './Text';\nimport { Viewport } from './Viewport';\nimport { GAME_WIDTH, GAME_HEIGHT, PLAY_SPEEDS } from './Constants';\nimport { Audio } from './Audio';\nimport { Screen } from './Screen';\nimport { MainMenu } from './MainMenu';\nimport { InstructionsMenu } from './InstructionsMenu';\nimport { GameSession } from './GameSession';\nimport { GameVersion } from './GameVersion-gen.json';\n\nexport const Game = {\n    init() {\n        Sprite.loadSpritesheet(async () => {\n            await Viewport.init();\n            await Screen.init();\n            await Sprite.init();\n            await Text.init();\n            await Input.init();\n            await Audio.init();\n\n            window.addEventListener('blur', () => this.lostFocus());\n            window.addEventListener('focus', () => this.gainedFocus());\n\n            this.start();\n        });\n    },\n\n    start() {\n        this.frame = 0;\n        this.playSpeed = 2;\n        this.showMainMenu();\n\n        window.requestAnimationFrame(() => this.onFrame());\n    },\n\n    onFrame() {\n        let fps = 60;\n        let now = new Date().getTime();\n        let lastFrame = this.lastFrame || 0;\n\n        // Note: we are using `requestAnimationFrame`, which will call our onFrame handler\n        // 60 times per second in most cases. However, it can be higher (the browser may\n        // respect the user's refresh settings, which could be 120Hz or higher for example).\n        //\n        // It's safest to have a check like we do here, where we explicitly limit the number\n        // of update calls to 60 times per second.\n        if (now - lastFrame >= 1000 / fps) {\n            this.frame++;\n            this.update();\n            this.lastFrame = now;\n        }\n\n        Viewport.resize();\n        this.draw();\n\n        window.requestAnimationFrame(() => this.onFrame());\n    },\n\n    update() {\n        // Pull in frame by frame button pushes / keypresses / mouse clicks\n        Input.update();\n\n        // perform any per-frame audio updates\n        Audio.update();\n\n        if (this.menu) {\n            this.menu.update();\n        }\n\n        if (this.session) this.session.update();\n    },\n\n    draw() {\n        // Reset canvas transform and scale\n        Viewport.ctx.setTransform(Viewport.scale, 0, 0, Viewport.scale, 0, 0);\n\n        // Clear canvas. Note we don't go for pure black but rather a dark gray, to simulate\n        // the relatively bright phosphors on the Kaypro II. (We are going to add scan lines\n        // at the end which will appear to darken the whole screen, so the overall effect\n        // will be a little darker than this color.)\n        Viewport.ctx.fillStyle = '#181818';\n        Viewport.ctx.fillRect(0, 0, Viewport.width, Viewport.height);\n\n        // Center the 80x25 character \"screen\" in the viewport\n        Viewport.ctx.translate((Viewport.width - GAME_WIDTH) / 2 | 0, (Viewport.height - GAME_HEIGHT) / 2 | 0);\n\n        // Hand off control to our submodules to draw whatever they'd like. For all the submodules\n        // below us, \"drawing\" means writing text to the Screen.\n        Screen.clear();\n        if (this.session) this.session.draw();\n        if (this.menu) this.menu.draw();\n\n        // Render the text on the screen to the viewport.\n        Screen.draw(Viewport.ctx);\n\n        // After drawing the \"screen\" (characters), add scan lines on top. Our scan lines are almost\n        // not visible, but move slowly and introduce subtle visual shifts in the characters on screen,\n        // which is the effect we are going for.\n        //\n        // (Technically scan lines should be IN BETWEEN rows of pixels, and what we're actually simulating\n        // here is our eyeballs clocking the screen refresh. We're going for a general feeling here.)\n        Viewport.ctx.fillStyle = 'rgba(0, 0, 0, 0.5)';\n        for (let y = Math.floor(-Viewport.height / 2) - 4; y < Viewport.height + 4; y += 4) {\n            let r = ((this.frame / 5) % 4) + y;\n            Viewport.ctx.fillRect(-Viewport.width, r, Viewport.width * 2, 2);\n        }\n    },\n\n    startSession() {\n        this.menu = undefined;\n        this.session = new GameSession();\n\n        // Hide the github link while in a game session\n        document.getElementsByClassName('github-corner')[0].className = 'github-corner hidden';\n    },\n\n    showMainMenu() {\n        this.menu = new MainMenu();\n        this.session = undefined;\n\n        // Show github link again when returning from a game\n        document.getElementsByClassName('github-corner')[0].className = 'github-corner';\n    },\n\n    showInstructions() {\n        this.menu = new InstructionsMenu();\n        this.session = undefined;\n    },\n\n    lostFocus() {\n        // If we lose focus (the user switched tabs, or tabbed away from the browser),\n        // automatically pause the game session if there is one.\n        if (this.session) this.session.paused = true;\n    },\n\n    gainedFocus() {\n        // Do nothing - we'll let the user hit enter to resume playing.\n    }\n};\n","/**\n * This is the entry point for the game.\n */\nimport { Game } from './Game';\n\nGame.init();\n"]}