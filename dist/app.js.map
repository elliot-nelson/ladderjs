{"version":3,"sources":["app.js","../src/js/Constants.js","../src/js/Viewport.js","../src/js/Util.js","../src/js/SpriteSheet-gen.js","../src/js/Sprite.js","../src/js/Input.js","../src/js/Text.js","../src/js/lib/zzfx.js","../src/js/lib/zzfxm.js","../src/js/songs/ObliqueMystique.js","../src/js/Audio.js","../src/js/Screen.js","../src/js/MainMenu.js","../src/js/InstructionsMenu.js","../src/js/Behavior.js","../src/js/Entity.js","../src/js/Player.js","../src/js/Rock.js","../src/js/Level.js","../src/js/PlayingField.js","../src/js/GameSession.js","../src/js/Game.js","../src/js/index.js"],"names":["PLAY_SPEEDS","Viewport","[object Object]","canvas","document","getElementById","ctx","getContext","resize","force","dpi","window","devicePixelRatio","width","clientWidth","height","clientHeight","dpiWidth","dpiHeight","scale","Math","min","ceil","center","u","v","imageSmoothingEnabled","rgba","r","g","b","a","createCanvas","createElement","SpriteSheet","Sprite","cb","image","Image","onload","src","sheet","data","anchor","font","source","w","h","img","x","y","initDynamicSprite","sliceCanvas","drawImage","loadCacheSlice","sprite","pos","rotation","this","viewportSprite2uv","save","translate","rotate","restore","Game","camera","Action","UP","DOWN","LEFT","RIGHT","JUMP","STOP","PAUSE","RESUME","Input","KeyMapping","KeyW","KeyS","KeyA","KeyD","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Space","Escape","Enter","buffer","history","addEventListener","event","entry","at","Date","getTime","key","code","action","push","console","log","now","filter","length","undefined","UNICODE_CHAR_MAP","join","split","reduce","map","char","idx","Text","white","border","margin","terminal","recolor","terminal_shadow","glow","cols","rows","temp","clearRect","bakeFontGlow","text","Array","isArray","block","drawText","c","charCodeAt","k","floor","measureWidth","sum","cu","cv","next","wip","list","cWidth","saved","space","pop","line","color","fillStyle","fillRect","globalCompositeOperation","zzfx","t","zzfxP","zzfxG","e","zzfxX","createBufferSource","f","createBuffer","zzfxR","d","i","getChannelData","set","connect","destination_","start","q","F","z","A","l","B","G","m","C","p","PI","H","I","D","random","Z","E","n","J","K","sin","max","tan","abs","round","zzfxV","top","AudioContext","webkitAudioContext","destination","ObliqueMystique","Audio","readyToPlay","gain_","createGain","shotgun","page","shellReload","damage","alarm","victory","song","instruments","patterns","sequence","BPM","instrumentParameters","j","note","sample","patternChannel","notFirstBeat","stop","instrument","pitch","attenuation","outSampleOffset","sampleOffset","nextSampleOffset","panning","sampleBuffer","leftChannelBuffer","rightChannelBuffer","channelIndex","hasMore","sampleCache","beatLength","patternIndex","sequenceIndex","zzfxM","musicPlaying","sound","gain","linearRampToValueAtTime","currentTime","Screen","screen","clear","row","splitParagraph","MainMenu","lastKey","toUpperCase","consume","startSession","playSpeed","showInstructions","highScores","write","InstructionsMenu","showMainMenu","State","STOPPED","FALLING","START_JUMP","JUMP_LEFT","JUMP_RIGHT","JUMP_UP","DYING","DEAD","JUMP_FRAMES","Entity","field","repeat","nextState","state","includes","onSolid","jumpStep","isLadder","emptySpace","canClimbUp","canClimbDown","step","terrain","layout","applyMovement","DEATH_FRAMES","Player","super","deathStep","moveFrame","lastAction","Rock","dispenser","LEVEL_COLS","isEater","LevelData","name","time","maxRocks","rocks","Level","LEVELS","LEVEL_COUNT","levelNumber","level","Error","player","dispensers","slice","maRrocks","PlayingField","load","winning","session","updateScore","startNextLevel","oldX","oldY","update","isDisappearingFloor","checkIfPlayerShouldDie","rock","isStatue","isTreasure","isTrampoline","restartLevel","draw","forEach","isFire","splice","hiddenFactor","GameSession","score","levelCycle","lives","nextLife","paused","lastFrame","nextFrame","moveFrameMillisecondDelay","handleCheatCodes","stat","String","padStart","scoreType","recentKeystrokes","match","parseInt","RegExp","$1","loadSpritesheet","async","init","lostFocus","gainedFocus","frame","menu","requestAnimationFrame","onFrame","setTransform"],"mappings":"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","file":"app.js","sourcesContent":["(function () {\n    'use strict';\n\n    /**\n     * Constants\n     */\n\n    // The \"screen area\". This is an ASCII game and so most of the game logic doesn't care about browser\n    // pixels, we care about the ASCII display area (80x25).\n    //\n    // Actually the original was likely an 80x24. We can use either here, whatever looks good in the browser.\n    const SCREEN_WIDTH = 80;\n    const SCREEN_HEIGHT = /*25*/ 24;\n\n    // The size of our on-screen characters (given dimensions above, this is 80 cols by 25 rows).\n    const CHAR_WIDTH = 8;\n    const CHAR_HEIGHT = 16;\n\n    // A screen scale factor. This scale factor multiplies the entire screen size so that\n    // we can then introduce text artifacts (like character glow and scan lines), to give it\n    // a little of that 1982 feel.\n    const SCREEN_SCALE = 4;\n\n    // The playable area. Note that this is the desired dimensions, but the actual on-screen dimensions\n    // may be larger to maintain aspect ratio (see `Viewport.width` & `Viewport.height`).\n    //\n    // Note the extra little padding of a character, which just prevents our text from butting right\n    // against the edge of the browser window.\n    const GAME_WIDTH = (SCREEN_WIDTH + 1) * CHAR_WIDTH * SCREEN_SCALE;\n    const GAME_HEIGHT = (SCREEN_HEIGHT + 1) * CHAR_HEIGHT * SCREEN_SCALE;\n\n    // Fixed level size\n    const LEVEL_ROWS = 20;\n    const LEVEL_COLS = 79;\n\n    // Play speeds, expressed as frames per second.\n    //\n    // According to the original, the play speeds had millisecond delays of:\n    //   [100ms, 50ms, 25ms, 13ms, 7ms].\n    //\n    // This would mean the effective FPS was:\n    //   [10, 20, 40, 76, 142].\n    //\n    // I think this is way too high, and might not be accurate (it doesn't count\n    // time spent drawing the screen and running the game's logic, which might\n    // be a significant number of milliseconds). From memory, each speed was about\n    // 50% faster than the previous one, so that's what I've set here.\n    const PLAY_SPEEDS = [120, 100, 90, 50, 30];\n\n    // Maximum number of rocks on screen at once\n    const MAX_ROCKS = 7;\n\n    // Each dispenser on the level increases max rocks by 1\n    const DISPENSER_MAX_ROCKS = 1;\n\n    // Hidden difficulty factor - the game gets 5% faster each level cycle\n    const HIDDEN_FACTOR_PLAY_SPEED = 0.05;\n\n    // Hidden difficulty factor - the maximum number of rocks increases each level cycle\n    const HIDDEN_FACTOR_MAX_ROCKS = 2;\n\n    // Score events (note, these are just identifiers for the types of score increases, not\n    // actual score values).\n    const SCORE_ROCK = 1;\n    const SCORE_STATUE = 2;\n    const SCORE_TREASURE = 3;\n\n    /**\n     * Viewport\n     *\n     * Represents the game display (for us, a canvas).\n     */\n    const Viewport = {\n        init() {\n            Viewport.canvas = document.getElementById('canvas');\n            Viewport.ctx = Viewport.canvas.getContext('2d');\n            Viewport.resize(true);\n        },\n\n        // Resize the canvas to give us approximately our desired game display size.\n        //\n        // Rather than attempt to explain it, here's a concrete example:\n        //\n        //     we start with a desired game dimension:   480x270px\n        //          get the actual browser dimensions:  1309x468px\n        //          factor in the display's DPI ratio:  2618x936px\n        //         now calculate the horizontal scale:       5.45x\n        //                     and the vertical scale:       3.46x\n        //            our new offical game scaling is:        5.4x\n        //       and our official viewport dimensions:   484x173px\n        //\n        // This approach emphasizes correct aspect ratio and maintains full-window rendering, at\n        // the potential cost of limiting visibility of the game itself in either the X or Y axis.\n        // If you use this approach, make sure your GUI can \"float\" (otherwise there may be whole\n        // UI elements the player cannot see!).\n        resize(force) {\n            let dpi = window.devicePixelRatio,\n                width = Viewport.canvas.clientWidth,\n                height = Viewport.canvas.clientHeight,\n                dpiWidth = width * dpi,\n                dpiHeight = height * dpi;\n\n            if (\n                force ||\n                Viewport.canvas.width !== dpiWidth ||\n                Viewport.canvas.height !== dpiHeight\n            ) {\n                Viewport.canvas.width = dpiWidth;\n                Viewport.canvas.height = dpiHeight;\n\n                Viewport.scale = ((Math.min(dpiWidth / GAME_WIDTH, dpiHeight / GAME_HEIGHT) * 10) | 0) / 10;\n                Viewport.width = Math.ceil(dpiWidth / Viewport.scale);\n                Viewport.height = Math.ceil(dpiHeight / Viewport.scale);\n                Viewport.center = {\n                    u: (Viewport.width / 2) | 0,\n                    v: (Viewport.height / 2) | 0\n                };\n                Viewport.clientWidth = width;\n                Viewport.clientHeight = height;\n\n                // Note: smoothing flag gets reset on every resize by some browsers, which is why\n                // we do it here.\n                Viewport.ctx.imageSmoothingEnabled = false;\n            }\n\n            // We do this every frame, not just on resize, due to browser sometimes \"forgetting\".\n            //Viewport.canvas.style.cursor = 'none';\n        }\n    };\n\n    function rgba(r, g, b, a) {\n        return `rgba(${r},${g},${b},${a})`;\n    }\n\n    function createCanvas(width, height) {\n        let canvas = document.createElement('canvas');\n        canvas.width = width;\n        canvas.height = height;\n        let ctx = canvas.getContext('2d');\n        return { canvas, ctx };\n    }\n\n    /**\n     * This module is generated by `gulp buildAssets`.\n     */\n    const SpriteSheet =\n        /* <generated> */\n    { font: [ [ 128, 0, 128, 448 ] ],\n      font2: [ [ 0, 0, 128, 512 ] ],\n      harold: [ [ 128, 448, 19, 12 ] ],\n      pixel: [ [ 147, 448, 6, 6 ] ],\n      uri: 'sprites.png' };\n    /* </generated> */\n\n    /**\n     * Sprite\n     *\n     * Encapsulates loading sprite slices from the spritesheet, organizing them, and\n     * modifying them or constructing using primitives. To save space, we use some techniques\n     * like storing only a small slice of an image in the spritesheet, then using code\n     * to duplicate it, add some randomness, etc.\n     */\n    const Sprite = {\n        // This is an exception to the rule, loading the spritesheet is a special action that\n        // happens BEFORE everything is initialized.\n        loadSpritesheet(cb) {\n            let image = new Image();\n            image.onload = cb;\n            image.src = SpriteSheet.uri;\n            Sprite.sheet = image;\n        },\n\n        init() {\n            // Base pixel font and icons (see `Text.init` for additional variations)\n            Sprite.font = initBasicSprite(SpriteSheet.font2[0]);\n\n            return;\n        },\n\n        /**\n         * A small helper that draws a sprite onto a canvas, respecting the anchor point of\n         * the sprite. Note that the canvas should be PRE-TRANSLATED and PRE-ROTATED, if\n         * that's appropriate!\n         */\n        drawSprite(ctx, sprite, u, v) {\n            ctx.drawImage(sprite.img, u - sprite.anchor.x, v - sprite.anchor.y);\n        },\n\n        drawViewportSprite(sprite, pos, rotation) {\n            let { u, v } = this.viewportSprite2uv(\n                sprite,\n                pos\n            );\n            if (rotation) {\n                Viewport.ctx.save();\n                Viewport.ctx.translate(u + sprite.anchor.x, v + sprite.anchor.y);\n                Viewport.ctx.rotate(rotation);\n                Viewport.ctx.drawImage(\n                    sprite.img,\n                    -sprite.anchor.x,\n                    -sprite.anchor.y\n                );\n                Viewport.ctx.restore();\n            } else {\n                Viewport.ctx.drawImage(sprite.img, u, v);\n            }\n        },\n\n        viewportSprite2uv(sprite, pos) {\n            return {\n                u: pos.x - sprite.anchor.x - Game.camera.pos.x + Viewport.center.u,\n                v: pos.y - sprite.anchor.y - Game.camera.pos.y + Viewport.center.v\n            };\n        }\n    };\n\n    // Sprite utility functions\n\n    function initBasicSprite(data, anchor) {\n        return initDynamicSprite(loadCacheSlice(...data), anchor);\n    }\n\n    function initDynamicSprite(source, anchor) {\n        let w = source.width,\n            h = source.height;\n\n        return {\n            img: source,\n            // Hack! Using a flat `.map(initBasicSprite)` is actually going to pass the\n            // element INDEX as second argument, resulting in \"anchor=1\". The right solution\n            // here is \"typeof anchor === 'object' ?\", but to save bytes I avoid using\n            // the typeof and instanceof keywords anywhere in the codebase. Hence,\n            // \"anchor && anchor.x\".\n            anchor: (anchor && anchor.x) ? anchor : { x: (w / 2) | 0, y: (h / 2) | 0 }\n        };\n    }\n\n    function loadCacheSlice(x, y, w, h) {\n        const source = Sprite.sheet;\n        const sliceCanvas = createCanvas(w, h);\n        sliceCanvas.ctx.drawImage(source, x, y, w, h, 0, 0, w, h);\n        return sliceCanvas.canvas;\n    }\n\n    // A list of in-game actions that can be performed by the player\n    const Action = {\n        UP:     11,\n        DOWN:   12,\n        LEFT:   13,\n        RIGHT:  14,\n        JUMP:   15,\n        STOP:   16,\n        PAUSE:  17,\n        RESUME: 18\n    };\n\n    // A list of key code mappings and what action they perform. Here we hard-code it, but\n    // you could easily also have the key mappings controlled by settings and let the user\n    // configure it.\n    const KeyMapping = {\n        KeyW:       Action.UP,\n        KeyS:       Action.DOWN,\n        KeyA:       Action.LEFT,\n        KeyD:       Action.RIGHT,\n        ArrowUp:    Action.UP,\n        ArrowDown:  Action.DOWN,\n        ArrowLeft:  Action.LEFT,\n        ArrowRight: Action.RIGHT,\n        Space:      Action.JUMP,\n        Escape:     Action.PAUSE,\n        Enter:      Action.RESUME\n    };\n\n    const Input = {\n        Action,\n        KeyMapping,\n\n        init() {\n            // Input buffer - new keypress events go into this buffer to be handled\n            // during the game's update loop. It's up to the `update()` methods to consume\n            // key presses and remove them from the buffer.\n            this.buffer = [];\n\n            // Input history - history contains recent key press events in order,\n            // removed automatically after a few seconds. This is useful for detecting\n            // inputs like cheat codes, for example.\n            this.history = [];\n\n            window.addEventListener('keydown', event => {\n                let entry = {\n                    at: new Date().getTime(),\n                    key: event.key,\n                    code: event.code,\n                    action: Input.KeyMapping[event.code] || Input.Action.STOP\n                };\n                Input.buffer.push(entry);\n                Input.history.push(entry);\n                console.log(entry);\n            });\n        },\n\n        update() {\n            let now = new Date().getTime();\n            this.history = this.history.filter(entry => entry.at > now - 3000);\n        },\n\n        lastKey() {\n            return this.buffer.length > 0 ? this.buffer[this.buffer.length - 1].key : '';\n        },\n\n        lastAction() {\n            return this.buffer.length > 0 ? this.buffer[this.buffer.length - 1].action : undefined;\n        },\n\n        consume() {\n            this.buffer = [];\n        },\n    };\n\n    /**\n     * `Text` is a singleton responsible for drawing text characters on the viewport. This\n     * game uses a custom pixel font, so we need to implement some basic text handling\n     * (splitting long lines, measuring character width, etc.) ourselves.\n     */\n\n    // In our character sheet, chars 0x00-0x7F are standard ASCII, below that we put whatever\n    // characters are convenient for us. Here we can choose to map unicode characters to positions\n    // 0x80+ in the charsheet, making it easy for us to render things like special characters,\n    // box drawing characters, etc.\n    //\n    // Note: I like pasting actual characters instead of codes (\"├\" instead of \"\\u251C\"). If you\n    // do this, don't forget to explicitly tell the browser what charset your JS file is, or it\n    // won't execute -- see `index.html` for an example.\n    const SUPPORTED_UNICODE_CHARS = [\n        '─│┌┐└┘├┤┬┴┼╳╳╳╳╳',\n        '═║╔╗╚╝╠╣╦╩╬╳╳╳╳╳',\n        '↑↓←→╳╳╳╳╳╳╳╳╳╳╳╳'\n    ].join('');\n\n    const UNICODE_CHAR_MAP = SUPPORTED_UNICODE_CHARS.split('').reduce((map, char, idx) => {\n        map[char] = 0x80 + idx;\n        return map;\n    }, {});\n\n    /**\n     * Text\n     *\n     * Utilities for drawing text using in-game pixel font.\n     */\n    const Text = {\n        init() {\n            // The \"white\" font sheet, right from the sprite.\n            Text.white = { img: Sprite.font.img, scale: 1, border: 0, margin: 0 };\n\n            // Recolored versions of the original font sheet, to use when constructing our glow.\n            //\n            // The color here is #33FF00 which is roughly the glow of the Kaypro II.\n            Text.terminal = recolor(Text.white, rgba(51 + 16, 255, 0 + 16, 1));\n            Text.terminal_shadow = recolor(Text.white, rgba(51, 255, 0, 0.4));\n\n            // \"Glowing\" a bunch of characters on-screen is just too slow when you're doing 5\n            // draw calls for every individual character. To avoid that, we can build a new\n            // sprite sheet that is pre-scaled with the glow built in.\n            Text.glow = bakeFontGlow(Text.terminal, Text.terminal_shadow, SCREEN_SCALE, 2, 2);\n        },\n\n        drawText(ctx, text, u, v, font = Text.terminal) {\n            // The math gymnastics are a little hard to read (apologies). To render the\n            // font asked for correctly, we need to have the font sheet image, the scale,\n            // the border and the margin.\n            //\n            // The \"scale\" informs us what PRESCALING is applied to the font sheet, so\n            // we know how big to render it (we don't do additional scaling here).\n            //\n            // The \"border\" tells us how many PRE-SCALE pixels of border exist in this\n            // image. A border of 2 means a total of 2 pixels (so 1 on every side) were\n            // used. This is pre-scale, so if the scale is 4, that means there are 4 pixels\n            // of \"space\" around each character in the font sheet.\n            //\n            // The \"margin\" tells us how many POST-SCALE pixels of margin exist (in practice\n            // this means, how many pixels of glow surround the character). You want to subtract\n            // this margin when rendering the character so the character body is in the expected\n            // spot on screen.\n            let { img, scale, border, margin } = font;\n\n            if (Array.isArray(text)) {\n                for (let block of text) {\n                    Text.drawText(ctx, block.text, u + block.u * scale, v + block.v * scale, font);\n                }\n                return;\n            }\n\n            for (let idx = 0; idx < text.length; idx++) {\n                let c = UNICODE_CHAR_MAP[text[idx]] || text.charCodeAt(idx);\n                let k = (c - 0) * (CHAR_WIDTH + border);\n                let drawable = (c !== 32);\n\n                // We clear the canvas in every frame, and it's a HUGE speed advantage not to draw an\n                // empty image (this check can save 1000+ drawImage calls a frame).\n                if (drawable) {\n                    ctx.drawImage(\n                        img,\n                        (k * scale) % img.width,\n                        Math.floor((k * scale) / (img.width)) * (CHAR_HEIGHT + border) * scale,\n                        CHAR_WIDTH * scale,\n                        CHAR_HEIGHT * scale,\n                        u + margin,\n                        v + margin,\n                        CHAR_WIDTH * scale,\n                        CHAR_HEIGHT * scale\n                    );\n                }\n                u += CHAR_WIDTH * scale;\n            }\n        },\n\n        measureWidth(text, scale = 1) {\n            return text.split('').reduce((sum, c) => sum + CHAR_WIDTH, 0) * scale;\n        },\n\n        splitParagraph(text, w, h) {\n            let cu = 0, cv = 0;\n            let next = () => ({ text: '', u: cu, v: cv });\n            let wip = next();\n            let list = [];\n\n            for (let c of text.split('')) {\n                let cWidth = Text.measureWidth(c, 1);\n                if (c === '\\n' || cu + cWidth > w) {\n                    let saved = '';\n                    if (c !== '\\n' && c !== ' ') {\n                        let space = wip.text.split(' ');\n                        if (space.length > 1) {\n                            saved = space.pop();\n                            wip.text = space.join(' ');\n                        }\n                    }\n                    if (wip.text.length > 0) list.push(wip);\n                    cu = 0;\n                    cv += (CHAR_HEIGHT);\n                    wip = next();\n                    if (saved.length > 0) {\n                        wip.text = saved;\n                        cu += Text.measureWidth(wip.text, 1);\n                    }\n                } else {\n                    cu += cWidth;\n                }\n                if (c !== '\\n') {\n                    wip.text = wip.text + c;\n                }\n            }\n\n            if (wip.text.length > 0) list.push(wip);\n\n            return list.map(line => ({\n                ...line,\n                w: Text.measureWidth(line.text, 1),\n                h: CHAR_HEIGHT\n            }));\n        }\n    };\n\n    // Text utility functions, for manipulating the font sheet images\n\n    function recolor(font, color) {\n        let canvas = createCanvas(font.img.width, font.img.height);\n        canvas.ctx.fillStyle = color;\n        canvas.ctx.fillRect(0, 0, font.img.width, font.img.height);\n        canvas.ctx.globalCompositeOperation = 'destination-in';\n        canvas.ctx.drawImage(font.img, 0, 0);\n\n        // Return a new font with the same metadata, but a recolored image\n        return {\n            ...font,\n            img: canvas.canvas\n        };\n    }\n\n    function bakeFontGlow(font, glow, scale, border, margin) {\n        // This function is a little complicated because it has to do several things at once.\n        //\n        // The idea is:\n        //  - Take our original sheet of 8x16 characters\n        //  - Build a NEW sheet, with additional \"border\" around each character, so that there is\n        //    room for us to add a glow around each character without bleeding into our neighbors.\n        //  - We want the glow baked in at an upscaled pixel size.\n        //\n        // What is the upscaled pixel size? Here for example, we are scaling up from 8x16 pixels\n        // to 32x64 pixels for each characters. We then want the GLOW added around this new\n        // 32x64 character, not the original size (this allows us to have a glow more tight than\n        // the original chunky pixels we started with).\n        //\n        // A complication of HTML Canvas is that if you draw from a source canvas into a destination\n        // canvas at a higher scale, you will \"bleed\" neighboring pixels from the source canvas.\n        // To avoid this, we use a second temporary canvas and draw from the source into the temporary\n        // canvas with no upscaling, then we draw from the temporary canvas into the upscaled canvas.\n        //\n        // (This means double the draws, but we only do this step once when the game loads, so it's\n        // not a big deal.)\n        let cols = font.img.width / CHAR_WIDTH, rows = font.img.height / CHAR_HEIGHT;\n\n        let temp = createCanvas(CHAR_WIDTH, CHAR_HEIGHT);\n        let canvas = createCanvas(\n            cols * (CHAR_WIDTH + border) * scale,\n            rows * (CHAR_HEIGHT + border) * scale\n        );\n\n        for (let y = 0; y < rows; y++) {\n            for (let x = 0; x < cols; x++) {\n                // Glow (rendered on all 4 sides)\n                temp.ctx.clearRect(0, 0, CHAR_WIDTH, CHAR_HEIGHT);\n                temp.ctx.drawImage(\n                    glow.img,\n                    x * CHAR_WIDTH,\n                    y * CHAR_HEIGHT,\n                    CHAR_WIDTH,\n                    CHAR_HEIGHT,\n                    0, 0,\n                    CHAR_WIDTH,\n                    CHAR_HEIGHT\n                );\n                canvas.ctx.drawImage(\n                    temp.canvas,\n                    0, 0,\n                    CHAR_WIDTH,\n                    CHAR_HEIGHT,\n                    x * (CHAR_WIDTH + border) * scale + margin,\n                    y * (CHAR_HEIGHT + border) * scale,\n                    CHAR_WIDTH * scale,\n                    CHAR_HEIGHT * scale\n                );\n                canvas.ctx.drawImage(\n                    temp.canvas,\n                    0, 0,\n                    CHAR_WIDTH,\n                    CHAR_HEIGHT,\n                    x * (CHAR_WIDTH + border) * scale,\n                    y * (CHAR_HEIGHT + border) * scale + margin,\n                    CHAR_WIDTH * scale,\n                    CHAR_HEIGHT * scale\n                );\n                canvas.ctx.drawImage(\n                    temp.canvas,\n                    0, 0,\n                    CHAR_WIDTH,\n                    CHAR_HEIGHT,\n                    x * (CHAR_WIDTH + border) * scale + margin * 2,\n                    y * (CHAR_HEIGHT + border) * scale + margin,\n                    CHAR_WIDTH * scale,\n                    CHAR_HEIGHT * scale\n                );\n                canvas.ctx.drawImage(\n                    temp.canvas,\n                    0, 0,\n                    CHAR_WIDTH,\n                    CHAR_HEIGHT,\n                    x * (CHAR_WIDTH + border) * scale + margin,\n                    y * (CHAR_HEIGHT + border) * scale + margin * 2,\n                    CHAR_WIDTH * scale,\n                    CHAR_HEIGHT * scale\n                );\n\n                // Center character\n                temp.ctx.clearRect(0, 0, CHAR_WIDTH, CHAR_HEIGHT);\n                temp.ctx.drawImage(\n                    font.img,\n                    x * CHAR_WIDTH,\n                    y * CHAR_HEIGHT,\n                    CHAR_WIDTH,\n                    CHAR_HEIGHT,\n                    0, 0,\n                    CHAR_WIDTH,\n                    CHAR_HEIGHT\n                );\n                canvas.ctx.drawImage(\n                    temp.canvas,\n                    0, 0,\n                    CHAR_WIDTH,\n                    CHAR_HEIGHT,\n                    x * (CHAR_WIDTH + border) * scale + margin,\n                    y * (CHAR_HEIGHT + border) * scale + margin,\n                    CHAR_WIDTH * scale,\n                    CHAR_HEIGHT * scale\n                );\n            }\n        }\n\n        return { img: canvas.canvas, scale, border, margin };\n    }\n\n    // zzfx() - the universal entry point -- returns a AudioBufferSourceNode\n    const zzfx=(...t)=>zzfxP(zzfxG(...t));\n\n    // zzfxP() - the sound player -- returns a AudioBufferSourceNode\n    const zzfxP=(...t)=>{let e=zzfxX.createBufferSource(),f=zzfxX.createBuffer(t.length,t[0].length,zzfxR);t.map((d,i)=>f.getChannelData(i).set(d)),e.buffer=f,e.connect(zzfx.destination_),e.start();return e};\n\n    // zzfxG() - the sound generator -- returns an array of sample data\n    const zzfxG=(q=1,k=.05,c=220,e=0,t=0,u=.1,r=0,F=1,v=0,z=0,w=0,A=0,l=0,B=0,x=0,G=0,d=0,y=1,m=0,C=0)=>{let b=2*Math.PI,H=v*=500*b/zzfxR**2,I=(0<x?1:-1)*b/4,D=c*=(1+2*k*Math.random()-k)*b/zzfxR,Z=[],g=0,E=0,a=0,n=1,J=0,K=0,f=0,p,h;e=99+zzfxR*e;m*=zzfxR;t*=zzfxR;u*=zzfxR;d*=zzfxR;z*=500*b/zzfxR**3;x*=b/zzfxR;w*=b/zzfxR;A*=zzfxR;l=zzfxR*l|0;for(h=e+m+t+u+d|0;a<h;Z[a++]=f)++K%(100*G|0)||(f=r?1<r?2<r?3<r?Math.sin((g%b)**3):Math.max(Math.min(Math.tan(g),1),-1):1-(2*g/b%2+2)%2:1-4*Math.abs(Math.round(g/b)-g/b):Math.sin(g),f=(l?1-C+C*Math.sin(2*Math.PI*a/l):1)*(0<f?1:-1)*Math.abs(f)**F*q*zzfxV*(a<e?a/e:a<e+m?1-(a-e)/m*(1-y):a<e+m+t?y:a<h-d?(h-a-d)/u*y:0),f=d?f/2+(d>a?0:(a<h-d?1:(h-a)/d)*Z[a-d|0]/2):f),p=(c+=v+=z)*Math.sin(E*x-I),g+=p-p*B*(1-1E9*(Math.sin(a)+1)%2),E+=p-p*B*(1-1E9*(Math.sin(a)**2+1)%2),n&&++n>A&&(c+=w,D+=w,n=0),!l||++J%l||(c=D,v=H,n=n||1);return Z};\n\n    // zzfxV - global volume\n    const zzfxV=.3;\n\n    // zzfxR - global sample rate\n    const zzfxR=44100;\n\n    // zzfxX - the common audio context\n    const zzfxX=new(top.AudioContext||webkitAudioContext);\n\n    // destination for zzfx and zzfxm sounds\n    zzfx.destination_ = zzfxX.destination;\n\n    /**\n     * ZzFX Music Renderer v2.0.2 by Keith Clark\n     */\n\n    /**\n     * @typedef Channel\n     * @type {Array.<Number>}\n     * @property {Number} 0 - Channel instrument\n     * @property {Number} 1 - Channel panning (-1 to +1)\n     * @property {Number} 2 - Note\n     */\n\n    /**\n     * @typedef Pattern\n     * @type {Array.<Channel>}\n     */\n\n    /**\n     * @typedef Instrument\n     * @type {Array.<Number>} ZzFX sound parameters\n     */\n\n    /**\n     * Generate a song\n     *\n     * @param {Array.<Instrument>} instruments - Array of ZzFX sound paramaters.\n     * @param {Array.<Pattern>} patterns - Array of pattern data.\n     * @param {Array.<Number>} sequence - Array of pattern indexes.\n     * @param {Number} [speed=125] - Playback speed of the song (in BPM).\n     * @returns {Array.<Array.<Number>>} Left and right channel sample data.\n     */\n\n    const zzfxM = (instruments, patterns, sequence, BPM = 125) => {\n        let instrumentParameters,\n            i,\n            j,\n            k,\n            note,\n            sample,\n            patternChannel,\n            notFirstBeat,\n            stop,\n            instrument,\n            pitch,\n            attenuation,\n            outSampleOffset,\n            sampleOffset,\n            nextSampleOffset,\n            sampleBuffer = [],\n            leftChannelBuffer = [],\n            rightChannelBuffer = [],\n            channelIndex = 0,\n            panning,\n            hasMore = 1,\n            sampleCache = {},\n            beatLength = ((zzfxR / BPM) * 60) >> 2;\n\n        // for each channel in order until there are no more\n        for (; hasMore; channelIndex++) {\n            // reset current values\n            sampleBuffer = [(hasMore = notFirstBeat = pitch = outSampleOffset = 0)];\n\n            // for each pattern in sequence\n            sequence.map((patternIndex, sequenceIndex) => {\n                // get pattern for current channel, use empty 1 note pattern if none found\n                patternChannel = patterns[patternIndex][channelIndex] || [0, 0, 0];\n\n                // check if there are more channels\n                hasMore |= !!patterns[patternIndex][channelIndex];\n\n                // get next offset, use the length of first channel\n                nextSampleOffset =\n                    outSampleOffset +\n                    (patterns[patternIndex][0].length - 2 - !notFirstBeat) *\n                        beatLength;\n\n                // for each beat in pattern, plus one extra if end of sequence\n                for (\n                    i = 2, k = outSampleOffset;\n                    i <\n                    patternChannel.length + (sequenceIndex == sequence.length - 1);\n                    notFirstBeat = ++i\n                ) {\n                    // <channel-note>\n                    note = patternChannel[i];\n\n                    // stop if different instrument or new note\n                    stop = (instrument != (patternChannel[0] || 0)) | note | 0;\n\n                    // fill buffer with samples for previous beat, most cpu intensive part\n                    for (\n                        j = 0;\n                        j < beatLength && notFirstBeat;\n                        // fade off attenuation at end of beat if stopping note, prevents clicking\n                        j++ > beatLength - 99 && stop\n                            ? (attenuation += (attenuation < 1) / 99)\n                            : 0\n                    ) {\n                        // copy sample to stereo buffers with panning\n                        sample =\n                            ((1 - attenuation) * sampleBuffer[sampleOffset++]) /\n                                2 || 0;\n                        leftChannelBuffer[k] =\n                            (leftChannelBuffer[k] || 0) + sample * panning - sample;\n                        rightChannelBuffer[k] =\n                            (rightChannelBuffer[k++] || 0) +\n                            sample * panning +\n                            sample;\n                    }\n\n                    // set up for next note\n                    if (note) {\n                        // set attenuation\n                        attenuation = note % 1;\n                        panning = patternChannel[1] || 0;\n                        if ((note |= 0)) {\n                            // get cached sample\n                            sampleBuffer = sampleCache[\n                                [\n                                    (instrument =\n                                        patternChannel[(sampleOffset = 0)] || 0),\n                                    note\n                                ]\n                            ] =\n                                sampleCache[[instrument, note]] ||\n                                // add sample to cache\n                                ((instrumentParameters = [\n                                    ...instruments[instrument]\n                                ]),\n                                (instrumentParameters[2] *=\n                                    2 ** ((note - 12) / 12)),\n                                zzfxG(...instrumentParameters));\n                        }\n                    }\n                }\n\n                // update the sample offset\n                outSampleOffset = nextSampleOffset;\n            });\n        }\n\n        return [leftChannelBuffer, rightChannelBuffer];\n    };\n\n    const ObliqueMystique = [[[1.3,0,23,,,.2,3,5],[1.5,0,4e3,,,.03,2,1.25,,,,,.02,6.8,-.3,,.5],[.7,0,2100,,,.2,3,3,,,-400,,,2],[,0,655,,,.11,2,1.65,,,,,,3.8,-.1,.1]],[[[,-.5,13,,,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,14,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,14,,,,],[1,.3,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,],[2,1,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,],[,.6,,,,,13,,18,,19,,,,,,,,19,,18,,,,16,,,,13,,,,,,,,,,13,,18,,19,,,,,,,,18,19,18,,,,13,14,13,,16,,18,,19,,],[3,-1,,,13,,,,,,,,,,,,13,,,,,,,,,,,,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,,,13,13,13,13]],[[,-.5,13,,,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,14,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,14,,,,],[1,.3,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,],[2,1,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,]]],[1,1,0,0,0,0,1,0],,];\n\n    const Audio = {\n        init() {\n            Audio.readyToPlay = false;\n\n            Audio.ctx = zzfxX;\n            Audio.gain_ = Audio.ctx.createGain();\n            Audio.gain_.connect(Audio.ctx.destination);\n            zzfx.destination_ = Audio.gain_;\n\n            Audio.shotgun = [,0.01,140,0.01,0.02,0.45,4,2.42,0.1,-0.1,,,,1.2,,0.3,0.04,0.8,0.02];\n            Audio.page = [,,1233,,.01,.2,1,1.43,,,539,.1,,,,,,.51,.03,.01];\n            Audio.shellReload = [,,68,0.01,,0.14,1,1.53,7.5,0.1,50,0.02,-0.01,-0.2,0.1,0.2,,0.47,0.01];\n            Audio.damage = [,,391,,.19,.01,2,.54,-4,20,,,,,,,.02,.9];\n            Audio.alarm = [,,970,.12,.25,.35,,.39,8.1,,10,.1,.2,,.1,,,.6,.09,.13];\n            // [,,961,.05,.06,1.17,1,4.67,.8,,,,,.8,-0.8,.1,.49,.62,.09];\n            Audio.victory = [,,454,.06,.86,.71,2,.63,-0.7,1.7,-83,.09,.27,.3,.2,,.18,.95,.02,.02];\n            Audio.song = zzfxM(...ObliqueMystique);\n\n            // Save our background music in os13k, for fun!\n            //localStorage[`OS13kMusic,${TITLE} - Oblique Mystique`] = JSON.stringify(ObliqueMystique);\n        },\n\n        update() {\n            if (!Audio.readyToPlay) return;\n\n            if (!Audio.musicPlaying) {\n                //Audio.bgmusicnode = zzfxP(...Audio.song);\n                //Audio.bgmusicnode.loop = true;\n                Audio.musicPlaying = true;\n            }\n        },\n\n        play(sound) {\n            if (!Audio.readyToPlay) return;\n            zzfx(...sound);\n        },\n\n        // It's important we do pausing and unpausing as specific events and not in general update(),\n        // because update() is triggered by the animation frame trigger which does not run if the\n        // page is not visible. (So, if you want the music to fade in the background, for example,\n        // that's not helpful if it won't work because you aren't looking at the page!)\n\n        pause() {\n            Audio.gain_.gain.linearRampToValueAtTime(0, Audio.ctx.currentTime + 1);\n        },\n\n        unpause() {\n            Audio.gain_.gain.linearRampToValueAtTime(1, Audio.ctx.currentTime + 1);\n        }\n    };\n\n    /**\n     * `Screen` is a singleton that represents the virtual 80x25 character screen our game\n     * lives in. Components like PlayingField will \"draw\" (write text onto) this virtual\n     * screen each frame. Once all the text is written, the text will end up rendered on\n     * the viewport (canvas) in the browser.\n     */\n\n    const Screen = {\n        init() {\n            this.screen = [];\n            for (let y = 0; y < SCREEN_HEIGHT; y++) {\n                this.screen.push([]);\n            }\n            this.clear();\n        },\n\n        clear() {\n            for (let y = 0; y < SCREEN_HEIGHT; y++) {\n                for (let x = 0; x < SCREEN_WIDTH; x++) {\n                    this.screen[y][x] = ' ';\n                }\n            }\n        },\n\n        write(x, y, text) {\n            if (!Array.isArray(text)) text = [text];\n\n            for (let j = 0; j < text.length; j++) {\n                for (let i = 0; i < text[j].length; i++) {\n                    this.screen[y + j][x + i] = text[j][i];\n                }\n            }\n        },\n\n        draw(ctx) {\n            let text = this.screen.map(row => row.join('')).join('\\n');\n\n            Text.drawText(\n                ctx,\n                Text.splitParagraph(text, Viewport.width),\n                0, 0,\n                Text.glow\n            );\n        }\n    };\n\n    class MainMenu {\n        constructor() {\n        }\n\n        update() {\n            switch (Input.lastKey().toUpperCase()) {\n                case 'P':\n                    Input.consume();\n                    Game.startSession();\n                    break;\n                case 'L':\n                    Input.consume();\n                    Game.playSpeed = (Game.playSpeed + 1) % PLAY_SPEEDS.length;\n                    break;\n                case 'I':\n                    Input.consume();\n                    Game.showInstructions();\n                    break;\n                case 'E':\n                    Input.consume();\n                    Game.showInstructions();\n                    break;\n            }\n        }\n\n        draw() {\n            let version = '?';\n            let terminal = '?';\n\n            let highScores = [\n                `1) 6000  Bob`,\n                `2) 6000  Tom`,\n                `3) 4000  Wayne`,\n                ``,\n                ``\n            ];\n\n            Screen.clear();\n            Screen.write(0, 0, [\n                `               LL                     dd       dd`,\n                `               LL                     dd       dd                      tm`,\n                `               LL         aaaa     ddddd    ddddd    eeee   rrrrrrr`,\n                `               LL        aa  aa   dd  dd   dd  dd   ee  ee  rr    rr`,\n                `               LL        aa  aa   dd  dd   dd  dd   eeeeee  rr`,\n                `               LL        aa  aa   dd  dd   dd  dd   ee      rr`,\n                `               LLLLLLLL   aaa aa   ddd dd   ddd dd   eeee   rr`,\n                ``,\n                `                                       Version:    ${version}`,\n                `(c) 1982, 1983 Yahoo Software          Terminal:   ${terminal}`,\n                `10970 Ashton Ave.  Suite 312           Play speed: ${Game.playSpeed + 1} / ${PLAY_SPEEDS.length}`,\n                `Los Angeles, Ca  90024                 Move = ↑↓←→/WASD, Jump = Space,`,\n                `                                       Stop = Other`,\n                ``,\n                `P = Play game                          High Scores`,\n                `L = Change level of difficulty         ${highScores[0]}`,\n                `C = Configure Ladder                   ${highScores[1]}`,\n                `I = Instructions                       ${highScores[2]}`,\n                `E = Exit Ladder                        ${highScores[3]}`,\n                `                                       ${highScores[4]}`,\n                ``,\n                `Enter one of the above:`\n            ]);\n        }\n    }\n\n    class InstructionsMenu {\n        constructor() {\n        }\n\n        update() {\n            if (Input.lastKey().toUpperCase() !== '') {\n                Input.consume();\n                Game.showMainMenu();\n            }\n        }\n\n        draw() {\n            Screen.clear();\n            Screen.write(0, 0, [\n                `You are a Lad trapped in a maze.  Your mission is is to explore the`,\n                `dark corridors never before seen by human eyes and find hidden`,\n                `treasures and riches.`,\n                ``,\n                `You control Lad by typing the direction buttons and jumping by`,\n                `typing SPACE.  But beware of the falling rocks called Der rocks.`,\n                `You must find and grasp the treasures (shown as $) BEFORE the`,\n                `bonus time runs out.`,\n                ``,\n                `A new Lad will be awarded for every 10,000 points.`,\n                `Extra points are awarded for touching the gold`,\n                `statues (shown as &).  You will receive the bonus time points`,\n                `that are left when you have finished the level.`,\n                ``,\n                `Type an ESCape to pause the Game`,\n                ``,\n                `Remember, there is more than one way to skin a cat. (Chum)`,\n                ``,\n                `Good luck Lad.`,\n                ``,\n                ``,\n                ``,\n                `Type RETURN to return to main menu:`\n            ]);\n        }\n    }\n\n    // This is our list of STATES. Each entity starts out in one of these states and can move between\n    // them based on events that happen in the Game (Note that some of these are directions, but\n    // since an entity keeps moving in the direction it is going unless stopped, directions are\n    // states in this Game)\n    const State = {\n        STOPPED:    1,         // Standing still\n        UP:         2,         // Moving up (player only)\n        LEFT:       3,         // Moving left\n        DOWN:       4,         // Moving down\n        RIGHT:      5,         // Moving right\n        FALLING:    6,         // Falling\n        START_JUMP: 7,         // About to start a jump (player only)\n        JUMP_LEFT:  8,         // Jumping left (player only)\n        JUMP_RIGHT: 9,         // Jumping right (player only)\n        JUMP_UP:    10,        // Jumping straight up (player only)\n        DYING:      11,        // Dying (used as a death animation)\n        DEAD:       12         // Dead (for player, restart level; for rock, disappear)\n    };\n\n    const JUMP_FRAMES = {\n        [State.JUMP_RIGHT]: [\n            { x: 1, y: -1 },\n            { x: 1, y: -1 },\n            { x: 1, y: 0 },\n            { x: 1, y: 0 },\n            { x: 1, y: 1 },\n            { x: 1, y: 1 }\n        ],\n        [State.JUMP_LEFT]: [\n            { x: -1, y: -1 },\n            { x: -1, y: -1 },\n            { x: -1, y: 0 },\n            { x: -1, y: 0 },\n            { x: -1, y: 1 },\n            { x: -1, y: 1 }\n        ],\n        [State.JUMP_UP]: [\n            { x: 0, y: -1 },\n            { x: 0, y: -1 },\n            { x: 0, y: 0 },\n            { x: 0, y: 1 },\n            { x: 0, y: 1 },\n            { x: 0, y: 0 }\n        ],\n    };\n\n    class Entity {\n        applyMovement(field) {\n            let repeat = false;\n\n            // This method contains generic \"movement\" application for all entities, including\n            // Lad (player) and Der Rocks (enemies). Things like falling, moving left/right, etc.,\n            // work the same for both.\n            //\n            // (There's a bunch of jump logic in here too, and moving UP, which really only applies\n            // to players, but that's OK -- Der Rocks just won't attempt those actions.)\n\n            if (this.nextState) {\n                switch (this.state) {\n                    case State.STOPPED:\n                    case State.LEFT:\n                    case State.RIGHT:\n                        if ([State.LEFT, State.RIGHT, State.STOPPED].includes(this.nextState)) {\n                            this.state = this.nextState;\n                            this.nextState = undefined;\n                        }\n                        break;\n\n                    case State.UP:\n                    case State.DOWN:\n                        // Normal\n                        if ([State.LEFT, State.RIGHT].includes(this.nextState)) {\n                            this.state = this.nextState;\n                            this.nextState = undefined;\n                        }\n                        break;\n                }\n            }\n\n            if (this.nextState === State.START_JUMP) {\n                // Special case: the user wants to jump!\n                //\n                // If the player is standing on something solid, we initiate a jump based on the current\n                // movement of the player. If not, we (sort of) ignore the request to jump... although\n                // it does subtly change the behavior upon landing.\n                if (field.onSolid(this.x, this.y)) {\n                    if (this.state === State.STOPPED || this.state === State.FALLING) {\n                        this.state = State.JUMP_UP;\n                        this.jumpStep = 0;\n                        this.nextState = State.STOPPED;\n                    } else if (this.state === State.LEFT || this.state === State.JUMP_LEFT) {\n                        this.state = State.JUMP_LEFT;\n                        this.jumpStep = 0;\n                        this.nextState = State.LEFT;\n                    } else if (this.state === State.RIGHT || this.state === State.JUMP_RIGHT) {\n                        this.state = State.JUMP_RIGHT;\n                        this.jumpStep = 0;\n                        this.nextState = State.RIGHT;\n                    }\n                } else {\n                    if (this.state === State.JUMP_UP || this.state === State.FALLING) {\n                        this.nextState = State.STOPPED;\n                    } else if (this.state === State.JUMP_RIGHT) {\n                        this.nextState = State.RIGHT;\n                    } else if (this.state === State.JUMP_LEFT) {\n                        this.nextState = State.LEFT;\n                    }\n                }\n            } else if (this.nextState === State.UP && field.isLadder(this.x, this.y)) {\n                // Special case: the user wants to go up!\n                //\n                // If the user is on a ladder, we can start ascending. Note that if the user is not\n                // on a ladder we ignore their input, which is intentional -- this allows queued\n                // (pacman) input, where we can tap UP a little before reaching the ladder.\n                this.state = State.UP;\n                this.nextState = undefined;\n            } else if (this.nextState === State.DOWN && (field.isLadder(this.x, this.y) || field.isLadder(this.x, this.y + 1))) {\n                // Special case: the player wants to go down!\n                //\n                // If the player is on (or above) a ladder, we can start descending. Note that if the player is not\n                // on a ladder we ignore their input, which is intentional -- this allows queued\n                // (pacman) input, where we can tap DOWN a little before reaching the ladder.\n                this.state = State.DOWN;\n                this.nextState = undefined;\n            }\n\n            switch (this.state) {\n                case State.LEFT:\n                    if (!field.onSolid(this.x, this.y)) {\n                        this.nextState = State.LEFT;\n                        this.state = State.FALLING;\n                        repeat = true;\n                        break;\n                    }\n                    if (field.emptySpace(this.x - 1, this.y)) {\n                        this.x--;\n                    } else {\n                        this.nextState = State.STOPPED;\n                    }\n                    break;\n\n                case State.RIGHT:\n                    if (!field.onSolid(this.x, this.y)) {\n                        this.nextState = State.RIGHT;\n                        this.state = State.FALLING;\n                        repeat = true;\n                        break;\n                    }\n                    if (field.emptySpace(this.x + 1, this.y)) {\n                        this.x++;\n                    } else {\n                        this.nextState = State.STOPPED;\n                    }\n                    break;\n\n                case State.UP:\n                    if (field.canClimbUp(this.x, this.y - 1)) {\n                        this.y--;\n                    } else {\n                        this.state = State.STOPPED;\n                    }\n                    break;\n\n                case State.DOWN:\n                    if (field.canClimbDown(this.x, this.y + 1)) {\n                        this.y++;\n                    } else {\n                        this.state = State.STOPPED;\n                    }\n                    break;\n\n                case State.JUMP_RIGHT:\n                case State.JUMP_LEFT:\n                case State.JUMP_UP:\n                    let step = JUMP_FRAMES[this.state][this.jumpStep];\n                    console.log(['jump', this.state, this.jumpStep, step]);\n                    if ((this.x + step.x >= 0) && (this.x + step.x < LEVEL_COLS)) {\n                        let terrain = field.layout[this.y + step.y][this.x + step.x];\n                        if (['=', '|', '-'].includes(terrain)) {\n                            if (field.onSolid(this.x, this.y)) {\n                                this.state = this.nextState;\n                                this.nextState = undefined;\n                            } else {\n                                switch (this.state) {\n                                    case State.JUMP_RIGHT:\n                                        this.nextState = State.RIGHT;\n                                        break;\n                                    case State.JUMP_LEFT:\n                                        this.nextState = State.LEFT;\n                                        break;\n                                    case State.JUMP_UP:\n                                        this.nextState = State.UP;\n                                        break;\n                                }\n                                this.state = State.FALLING;\n                            }\n                        } else if (terrain === 'H') {\n                            this.x += step.x;\n                            this.y += step.y;\n                            this.state = State.STOPPED;\n                            this.nextState = undefined;\n                        } else {\n                            this.x += step.x;\n                            this.y += step.y;\n                            this.jumpStep++;\n\n                            if (this.jumpStep >= JUMP_FRAMES[this.state].length) {\n                                this.state = this.nextState;\n                                this.nextState = undefined;\n                            }\n                        }\n                    } else {\n                        if (field.onSolid(this.x, this.y)) {\n                            this.state = this.nextState;\n                            this.nextState = undefined;\n                        } else {\n                            this.state = State.FALLING;\n                            this.nextState = State.STOPPED;\n                        }\n                    }\n                    break;\n\n                case State.FALLING:\n                    if (field.onSolid(this.x, this.y)) {\n                        this.state = this.nextState || State.STOPPED;\n                    } else {\n                        this.y++;\n                    }\n                    break;\n            }\n\n            // If we were attempting to move somewhere and realized we should be falling instead,\n            // we want to re-run the entire algorithm once. This avoids what boils down to a \"skipped\n            // frame\" from the user's point of view.\n            if (repeat) return this.applyMovement(field);\n        }\n    }\n\n    const DEATH_FRAMES = ['p', 'p', 'b', 'd', 'd', 'q', 'p', 'p', 'b', 'd', 'd', 'q', '-', '-', '_', '_', '_', '_', '_'];\n\n    /**\n     * Player\n     */\n    class Player extends Entity {\n        constructor(x, y) {\n            super();\n            this.x = x;\n            this.y = y;\n            this.state = State.STOPPED;\n            this.nextState = State.STOPPED;\n            this.jumpStep = 0;\n            this.deathStep = 0;\n            console.log('player constructed', x, y);\n        }\n\n        update(field, moveFrame) {\n            if (this.state === State.DYING) {\n                this.deathStep++;\n                if (this.deathStep >= DEATH_FRAMES.length) this.state = State.DEAD;\n            }\n\n            if (this.state === State.DYING || this.state === State.DEAD) return;\n\n            if (!moveFrame) return;\n\n            let action = Input.lastAction();\n\n            if (action === Input.Action.LEFT) {\n                this.nextState = State.LEFT;\n                Input.consume();\n            } else if (action === Input.Action.RIGHT) {\n                this.nextState = State.RIGHT;\n                Input.consume();\n            } else if (action === Input.Action.UP) {\n                this.nextState = State.UP;\n                Input.consume();\n            } else if (action === Input.Action.DOWN) {\n                this.nextState = State.DOWN;\n                Input.consume();\n            } else if (action === Input.Action.JUMP) {\n                this.nextState = State.START_JUMP;\n                Input.consume();\n            }\n\n            return this.applyMovement(field);\n        }\n\n        draw() {\n            let char = 'g';\n\n            switch (this.state) {\n                case State.RIGHT:\n                case State.JUMP_RIGHT:\n                case State.UP:\n                case State.DOWN:\n                    char = 'p';\n                    break;\n\n                case State.LEFT:\n                case State.JUMP_LEFT:\n                    char = 'q';\n                    break;\n\n                case State.FALLING:\n                    char = 'b';\n                    break;\n\n                case State.DYING:\n                    char = DEATH_FRAMES[this.deathStep];\n                    break;\n\n                case State.DEAD:\n                    char = '_';\n                    break;\n            }\n\n            Screen.write(this.x, this.y, char);\n        }\n    }\n\n    const DEATH_FRAMES$1 = ['{', '}', '(', ')', '%', '%', ':', ':'];\n\n    class Rock extends Entity {\n        constructor(dispenser) {\n            super();\n            this.x = dispenser.x;\n            this.y = dispenser.y;\n            this.state = State.FALLING;\n            this.nextState = undefined;\n            this.deathStep = 0;\n        }\n\n        update(field, moveFrame) {\n            if (this.state === State.DYING) {\n                this.deathStep++;\n                if (this.deathStep >= DEATH_FRAMES$1.length) this.state = State.DEAD;\n            }\n\n            if (this.state === State.DYING || this.state === State.DEAD) return;\n\n            if (!moveFrame) return;\n\n            if (this.state === State.STOPPED) {\n                if (this.x === 0 || !field.emptySpace(this.x - 1, this.y)) {\n                    this.nextState = State.RIGHT;\n                } else if (this.x === LEVEL_COLS - 1 || !field.emptySpace(this.x + 1, this.y)) {\n                    this.nextState = State.LEFT;\n                } else {\n                    this.nextState = Math.random() > 0.5 ? State.LEFT : State.RIGHT;\n                }\n            }\n\n            if (this.x === 0 && this.state === State.LEFT) {\n                this.state = State.RIGHT;\n            }\n\n            if (this.x === LEVEL_COLS - 1 && this.state === State.RIGHT) {\n                this.state = State.LEFT;\n            }\n\n            if (this.state !== State.FALLING && !field.onSolid(this.x, this.y)) {\n                this.nextState = State.FALLING;\n            }\n\n            if (field.isLadder(this.x, this.y + 1) && [State.LEFT, State.RIGHT].includes(this.state)) {\n                let r = Math.floor(Math.random() * 4);\n                this.nextState = [State.LEFT, State.RIGHT, State.DOWN, State.DOWN][r];\n            }\n\n            if (field.isEater(this.x, this.y)) {\n                this.state = State.DYING;\n                return;\n            }\n\n            this.applyMovement(field);\n        }\n\n        draw() {\n            let char = 'o';\n\n            switch (this.state) {\n                case State.DYING:\n                    char = DEATH_FRAMES$1[this.deathStep];\n                    break;\n                case State.DEAD:\n                    return;\n            }\n\n            Screen.write(this.x, this.y, char);\n        }\n    }\n\n    var LevelData = [\n    \t{\n    \t\tname: \"Easy Street\",\n    \t\ttime: 35,\n    \t\tmaxRocks: 5,\n    \t\tlayout: [\n    \t\t\t\"                                       V                 $                     \",\n    \t\t\t\"                                                         H                     \",\n    \t\t\t\"                H                                        H                     \",\n    \t\t\t\"       =========H==================================================            \",\n    \t\t\t\"                H                                                              \",\n    \t\t\t\"                H                                                              \",\n    \t\t\t\"                H          H                             H                     \",\n    \t\t\t\"================H==========H==================   ========H=====================\",\n    \t\t\t\"                &          H                             H          |       |  \",\n    \t\t\t\"                                                         H         Easy Street \",\n    \t\t\t\"                H                                        H                     \",\n    \t\t\t\"       =========H==========H=========  =======================                 \",\n    \t\t\t\"                H                                                              \",\n    \t\t\t\"                H                                                              \",\n    \t\t\t\"                H                                        H                     \",\n    \t\t\t\"======================== ====================== =========H==============       \",\n    \t\t\t\"                                                         H                     \",\n    \t\t\t\"                                                         H                     \",\n    \t\t\t\"*    p                                                   H                    *\",\n    \t\t\t\"===============================================================================\"\n    \t\t]\n    \t},\n    \t{\n    \t\tname: \"Long Island\",\n    \t\ttime: 45,\n    \t\tmaxRocks: 8,\n    \t\tlayout: [\n    \t\t\t\"                                                                          $    \",\n    \t\t\t\"                                                                   &      H    \",\n    \t\t\t\"    H       |V                                                     V|     H    \",\n    \t\t\t\"====H======================= ========================= ======================  \",\n    \t\t\t\"    H                                                                          \",\n    \t\t\t\"    H                                                                          \",\n    \t\t\t\"    H                    & |                         . .                  H    \",\n    \t\t\t\"========================== ======  =================== ===================H==  \",\n    \t\t\t\"                                                                          H    \",\n    \t\t\t\"                                  |                                       H    \",\n    \t\t\t\"    H                             |                 .  .                  H    \",\n    \t\t\t\"====H=====================   ======  ================  ======================  \",\n    \t\t\t\"    H                                                                          \",\n    \t\t\t\"    H                      |                                                   \",\n    \t\t\t\"    H                      |                        .   .                 H    \",\n    \t\t\t\"=========================  ========    ==============   ==================H==  \",\n    \t\t\t\"                                                                          H    \",\n    \t\t\t\"==============                      |                                     H    \",\n    \t\t\t\" Long Island |   p         *        |                 *                   H    \",\n    \t\t\t\"===============================================================================\"\n    \t\t]\n    \t},\n    \t{\n    \t\tname: \"Ghost Town\",\n    \t\ttime: 35,\n    \t\tmaxRocks: 5,\n    \t\tlayout: [\n    \t\t\t\"                            V               V           V               $      \",\n    \t\t\t\"                                                                       $$$     \",\n    \t\t\t\"     p    H                                                    H      $$$$$   H\",\n    \t\t\t\"==========H===                                                =H==============H\",\n    \t\t\t\"          H                                                    H              H\",\n    \t\t\t\"          H                              &                     H              H\",\n    \t\t\t\"     ==============   ====     =    ======    =   ====    =====H=====         H\",\n    \t\t\t\"    G              ^^^    ^^^^^ ^^^^      ^^^^ ^^^    ^^^                     $\",\n    \t\t\t\"    h                                                                 |        \",\n    \t\t\t\"    o     |                     H                             &       |        \",\n    \t\t\t\"    s     ======================H============================== ===========    \",\n    \t\t\t\"    t        &                  H                                              \",\n    \t\t\t\"                                H                                              \",\n    \t\t\t\"              |                 H                 H                   H        \",\n    \t\t\t\"    T         ==================H=================H===================H======= \",\n    \t\t\t\"    o                                             H                   H        \",\n    \t\t\t\"    w                                                                 H        \",\n    \t\t\t\"    n                           ^                                     H        \",\n    \t\t\t\"*                              ^^^                                    H       *\",\n    \t\t\t\"===============================================================================\"\n    \t\t]\n    \t},\n    \t{\n    \t\tname: \"Tunnel Vision\",\n    \t\ttime: 36,\n    \t\trocks: 5,\n    \t\tlayout: [\n    \t\t\t\"                                            V                       V          \",\n    \t\t\t\"                                                                               \",\n    \t\t\t\"     H             H                         |                H                \",\n    \t\t\t\"=====H=====--======H==========================     ===----====H===========     \",\n    \t\t\t\"     H             H                |&&                       H                \",\n    \t\t\t\"     H             H                ==================        H                \",\n    \t\t\t\"     H             H                       tunnel  H          H                \",\n    \t\t\t\"     H           =======---===----=================H=         H           H    \",\n    \t\t\t\"     H         |                           vision  H          H           H    \",\n    \t\t\t\"     H         =========---&      -----============H          H           H    \",\n    \t\t\t\"     H           H                                 H |        H           H    \",\n    \t\t\t\"     H           H=========----===----================        H  ==============\",\n    \t\t\t\"                 H                                        &   H                \",\n    \t\t\t\"                 H                                        |   H                \",\n    \t\t\t\"====---====      H                                        |   H                \",\n    \t\t\t\"|         |    ================---===---===================   H                \",\n    \t\t\t\"|   ===   |                                                   H        H    p  \",\n    \t\t\t\"|    $    |                                                   H     ===H=======\",\n    \t\t\t\"|*  $$$  *|   *                *       *                     *H       *H       \",\n    \t\t\t\"===============================================================================\"\n    \t\t]\n    \t},\n    \t{\n    \t\tname: \"Point of No Return\",\n    \t\ttime: 35,\n    \t\tmaxRocks: 7,\n    \t\tlayout: [\n    \t\t\t\"         $                                                                     \",\n    \t\t\t\"         H                                                   V                 \",\n    \t\t\t\"         H                                                                     \",\n    \t\t\t\"         HHHHHHHHHHHHH     .HHHHHHHHHHHHHH                          H    p     \",\n    \t\t\t\"         &                   V           H                        ==H==========\",\n    \t\t\t\"                                         H                          H          \",\n    \t\t\t\"   H                                     H        .                 H          \",\n    \t\t\t\"===H==============-----------============H====                      H          \",\n    \t\t\t\"   H                                                      H         H          \",\n    \t\t\t\"   H                                                 =====H==============      \",\n    \t\t\t\"   H                                     H                H                    \",\n    \t\t\t\"   H              &..^^^.....^..^ . ^^   H==---------     H                    \",\n    \t\t\t\"   H         ============================H    &           H             H      \",\n    \t\t\t\"   H         ===      ===      ===       H    ---------=================H======\",\n    \t\t\t\"   H                                     H                              H      \",\n    \t\t\t\"   H                          &          H          &                   H      \",\n    \t\t\t\"   ==========-------------------------=======----------===================     \",\n    \t\t\t\"                                                                               \",\n    \t\t\t\"^^^*         ^^^^^^^^^^^^^^^^^^^^^^^^^*     *^^^^^^^^^^*Point of No Return*^^^^\",\n    \t\t\t\"===============================================================================\"\n    \t\t]\n    \t},\n    \t{\n    \t\tname: \"Bug City\",\n    \t\ttime: 37,\n    \t\tmaxRocks: 6,\n    \t\tlayout: [\n    \t\t\t\"        Bug City             HHHHHHHH                          V               \",\n    \t\t\t\"                           HHH      HHH                                        \",\n    \t\t\t\"   H                                          >mmmmmmmm                        \",\n    \t\t\t\"   H===============                   ====================          H          \",\n    \t\t\t\"   H              |=====       \\\\  /         V                  =====H==========\",\n    \t\t\t\"   H                            \\\\/                                  H          \",\n    \t\t\t\"   H                                        | $                     H          \",\n    \t\t\t\"   H           H                            | H                     H          \",\n    \t\t\t\"   H       ====H=======          p          |&H    H                H          \",\n    \t\t\t\"   H           H             ======================H           ======          \",\n    \t\t\t\"   H           H      &|                           H                    H      \",\n    \t\t\t\"   H           H      &|                    H      H     }{        =====H====  \",\n    \t\t\t\"===H===&       H       =====================H      H                    H      \",\n    \t\t\t\"               H                            H      H                    H      \",\n    \t\t\t\"               H                            H      &                    H      \",\n    \t\t\t\"         ======H===   =======    H    <>    &                           H      \",\n    \t\t\t\"                                 H==========       =====     =     ============\",\n    \t\t\t\"     }i{                         H                                             \",\n    \t\t\t\"*                                H                                            *\",\n    \t\t\t\"===============================================================================\"\n    \t\t]\n    \t},\n    \t{\n    \t\tname: \"GangLand\",\n    \t\ttime: 32,\n    \t\tmaxRocks: 6,\n    \t\tlayout: [\n    \t\t\t\"                    =Gang Land=                             V                  \",\n    \t\t\t\"                   ==      _  ==                                      .        \",\n    \t\t\t\"      p    H        |  [] |_| |                  &                    .  H     \",\n    \t\t\t\"===========H        |     |_| |       H         ===   ===================H     \",\n    \t\t\t\"      V    H        =============     H======                            H     \",\n    \t\t\t\"           H                          H                     &            H     \",\n    \t\t\t\"           H                          H                |    |            H     \",\n    \t\t\t\"    H      H        ^^^&&^^^ & ^  ^^^ H           H    |    =============H     \",\n    \t\t\t\"    H======H   =======================H===========H=====          &      H     \",\n    \t\t\t\"    H                                 H           H    |         &&&     H     \",\n    \t\t\t\"    H                                 H           H    |        &&&&&    H     \",\n    \t\t\t\"    H                                 H           H    |    =============H     \",\n    \t\t\t\"              =====------=================        H    |       $     $         \",\n    \t\t\t\"                                         |        H    |      $$$   $$$        \",\n    \t\t\t\"====------===                            |        H    |     $$$$$ $$$$$       \",\n    \t\t\t\"            |       =                    | =============    ============       \",\n    \t\t\t\"            |       $                     ^          &                         \",\n    \t\t\t\"            |^^^^^^^^^^^^^^      $ ^              ======                       \",\n    \t\t\t\"*                   .      &   ^ H*^                    ^  ^       ^^^^^^^^^^^^\",\n    \t\t\t\"===============================================================================\"\n    \t\t]\n    \t}\n    ];\n\n    const Level = {\n        LEVELS: LevelData,\n        LEVEL_COUNT: LevelData.length,\n\n        load(levelNumber) {\n            console.log(Level.LEVELS);\n            // As the player keeps playing, level numbers will loop around to beginning\n            let level = Level.LEVELS[levelNumber % Level.LEVELS.length];\n            if (!level) throw new Error(`No such level number: ${levelNumber}`);\n\n            // Perform some sanity checks on the level layout and extract useful info\n            // like player start position and dispenser positions etc.\n\n            let layout = level.layout.map(row => row.split(''));\n            let dispensers = [];\n            let player;\n\n            // Sanity check\n            layout = layout.slice(0, LEVEL_ROWS);\n\n            for (let y = 0; y < LEVEL_ROWS; y++) {\n                // Sanity checks\n                if (!layout[y]) layout[y] = [];\n                layout[y] = layout[y].slice(0, LEVEL_COLS);\n\n                for (let x = 0; x < LEVEL_COLS; x++) {\n                    // Sanity check\n                    if (!layout[y][x]) layout[y][x] = ' ';\n\n                    // Der Dispensers (V) and Der Eaters (*) have behaviors, so it is convenient for us\n                    // to construct a list of them, but they are permanent parts of the layout, so we can\n                    // leave them as part of the level and draw them normally.\n\n                    if (layout[y][x] === 'V') {\n                        dispensers.push({ x, y });\n                    }\n\n                    // Treasure ($), Statues (&), and the Lad (p) are transient - the player moves around and\n                    // can pick up the treasures and statues. That's why for these elements, we add them to\n                    // our lists AND we remove them from the \"playing field\", we'll draw them separately on\n                    // top of the layout.\n\n                    if (layout[y][x] === 'p') {\n                        layout[y][x] = ' ';\n                        player = { x, y };\n                    }\n\n                    // Everything else, like floors (=), walls (|), ladders (H) and fire (^), is part of the\n                    // layout. The Lad interacts with them, but we can handle that during our movement checks.\n                }\n            }\n\n            return {\n                name: level.name,\n                time: level.time,\n                maxRocks: level.maRrocks,\n                layout,\n                dispensers,\n                player\n            };\n        }\n    };\n\n    /**\n     * `PlayingField` is a class that represents a level that is actively being played on-screen.\n     * A new one is created by the game session any time we start a new level.\n     *\n     * Level-specific stuff (like bonus time, dispensers, rocks, player position, etc.) is all\n     * managed by the playing field.\n     */\n\n    class PlayingField {\n        constructor(levelNumber) {\n            let level = Level.load(levelNumber);\n\n            // Store level-related info\n            this.layout = level.layout;\n            this.dispensers = level.dispensers;\n            this.time = 2000;\n\n            // Initialize player\n            this.player = new Player(level.player.x, level.player.y);\n\n            // Initialize list of rocks (empty)\n            this.rocks = [];\n\n            // Not winning yet (while \"winning\" the player stops moving and we add up the bonus score)\n            this.winning = false;\n        }\n\n        update(moveFrame) {\n            // If we're already winning, keep counting down the bonus time, but\n            // no more movement will happen on this level.\n            if (this.winning) {\n                Game.session.updateScore(SCORE_TREASURE);\n                this.time -= 10;\n                if (this.time < 0) Game.session.startNextLevel();\n                return;\n            }\n\n            // Count down bonus time\n            if (this.time > 0 && moveFrame) this.time--;\n\n            let oldX = this.player.x, oldY = this.player.y;\n\n            // Move player based on user input\n            this.player.update(this, moveFrame);\n\n            // Any time you move OFF of a disappearing floor, it goes away.\n            if (oldX !== this.player.x && oldY === this.player.y) {\n                if (this.isDisappearingFloor(oldX, oldY + 1)) {\n                    this.layout[oldY + 1][oldX] = ' ';\n                }\n            }\n\n            // Check if player should be dead (before moving rocks)\n            if (moveFrame) this.checkIfPlayerShouldDie(Game.session);\n\n            // Move rocks\n            for (let rock of this.rocks) rock.update(this, moveFrame);\n\n            // Check if player should be dead (after moving rocks)\n            if (moveFrame) this.checkIfPlayerShouldDie(Game.session);\n\n            if (moveFrame) {\n                // Collect statues\n                if (this.isStatue(this.player.x, this.player.y)) {\n                    this.layout[this.player.y][this.player.x] = ' ';\n                    Game.session.updateScore(SCORE_STATUE);\n                }\n\n                // Collect treasure (ends the current level)\n                if (this.isTreasure(this.player.x, this.player.y)) {\n                    this.winning = true;\n                    return;\n                }\n\n                // Interact with trampolines\n                if (this.isTrampoline(this.player.x, this.player.y)) {\n                    switch (Math.floor(Math.random() * 5)) {\n                        case 0:\n                            this.player.state = State.LEFT;\n                            this.player.nextState = undefined;\n                            break;\n                        case 1:\n                            this.player.state = State.RIGHT;\n                            this.player.nextState = undefined;\n                            break;\n                        case 2:\n                            this.player.state = State.JUMP_UP;\n                            this.player.nextState = undefined;\n                            this.player.jumpStep = 0;\n                            break;\n                        case 3:\n                            this.player.state = State.JUMP_LEFT;\n                            this.player.nextState = State.LEFT;\n                            this.player.jumpStep = 0;\n                            break;\n                        case 4:\n                            this.player.state = State.JUMP_RIGHT;\n                            this.player.nextState = State.RIGHT;\n                            this.player.jumpStep = 0;\n                            break;\n                    }\n                }\n\n                // Kill dead rocks\n                this.rocks = this.rocks.filter(rock => rock.state !== State.DEAD);\n\n                // Dispense new rocks\n                if (this.rocks.length < this.maxRocks() && Math.random() > 0.91) {\n                    let dispenser = this.dispensers[Math.floor(Math.random() * this.dispensers.length)];\n                    this.rocks.push(new Rock(dispenser));\n                }\n\n                // Kill player\n                if (this.player.state === State.DEAD) {\n                    Game.session.restartLevel();\n                }\n            }\n        }\n\n        draw() {\n            // Draw layout\n            Screen.write(0, 0, this.layout.map(row => row.join('')));\n\n            // Draw player\n            this.player.draw();\n\n            // Draw rocks\n            this.rocks.forEach(rock => rock.draw());\n        }\n\n        //\n        // Utility functions - this is an attempt to consolidate logic in one spot and make other\n        // functions (like the update logic in Player) more readable.\n        //\n\n        onSolid(x, y) {\n            return ['=', '-', 'H', '|'].includes(this.layout[y + 1][x]) || this.layout[y][x] === 'H';\n        }\n\n        emptySpace(x, y) {\n            if (x < 0 || x >= LEVEL_COLS) {\n                return false;\n            } else {\n                return !['|', '='].includes(this.layout[y][x]);\n            }\n        }\n\n        isLadder(x, y) {\n            return this.layout[y][x] === 'H';\n        }\n\n        isStatue(x, y) {\n            return this.layout[y][x] === '&';\n        }\n\n        isTreasure(x, y) {\n            return this.layout[y][x] === '$';\n        }\n\n        isTrampoline(x, y) {\n            return this.layout[y][x] === '.';\n        }\n\n        isEater(x, y) {\n            return this.layout[y][x] === '*';\n        }\n\n        isFire(x, y) {\n            return this.layout[y][x] === '^';\n        }\n\n        isDisappearingFloor(x, y) {\n            return this.layout[y][x] === '-';\n        }\n\n        canClimbUp(x, y) {\n            if (y < 0) return false;\n            return ['H', '&', '$'].includes(this.layout[y][x]);\n        }\n\n        canClimbDown(x, y) {\n            return ['H', '&', '$', ' ', '^', '.'].includes(this.layout[y][x]);\n        }\n\n        checkIfPlayerShouldDie() {\n            // If we're ALREADY dying or dead, let nature run its course\n            if (this.player.state === State.DYING || this.player.state === State.DEAD) return;\n\n            // Landing on fire kills you\n            if (this.isFire(this.player.x, this.player.y)) {\n                this.player.state = State.DYING;\n            }\n\n            // Running out of time kills you\n            if (this.time <= 0) {\n                this.player.state = State.DYING;\n            }\n\n            // Running into a rock kills you, and makes the rock that killed you disappear.\n            // That's not necessary, I just think it looks better. While we play the death\n            // animation we'll continue to move rocks, so another rock might also \"hit\" you,\n            // but it will just pass through your dying character.\n            //\n            // If we're above a rock with 1 or 2 spaces between, we get some points instead.\n            //\n            // A function named `checkIfPlayerShouldDie` is probably not the best place to do\n            // this, but it's convenient because we want to do this twice (just like the death\n            // check).\n            //\n            //                    p                          p\n            // (1)   p     -->            (2)   p     -->\n            //        o          o                o          o\n            //      =====       =====          =====       =====\n            //\n            // In situation (1), there will never be a frame on-screen where the player is directly\n            // above the rock, but we'll still count it because we'll check once after the player moves.\n            // In situation (2), the first check won't count, but the second check after the rocks move\n            // will give the score (and the frame drawn on screen will show the player above the rock).\n            //\n            for (let i = 0; i < this.rocks.length; i++) {\n                if (this.player.x === this.rocks[i].x) {\n                    if (this.player.y === this.rocks[i].y) {\n                        this.player.state = State.DYING;\n                        this.rocks.splice(i, 1);\n                        break;\n                    } else if (this.player.y === this.rocks[i].y - 1 && this.emptySpace(this.player.x, this.player.y + 1)) {\n                        Game.session.updateScore(SCORE_ROCK);\n                    } else if (this.player.y === this.rocks[i].y - 2 && this.emptySpace(this.player.x, this.player.y + 1) && this.emptySpace(this.player.x, this.player.y + 2)) {\n                        Game.session.updateScore(SCORE_ROCK);\n                    }\n                }\n            }\n        }\n\n        maxRocks() {\n            // The total number of rocks we can have on screen is based on a global max rocks value,\n            // then increased slightly by the number of dispensers on the level, then increased again\n            // by a hidden difficulty factor (level cycles).\n            return MAX_ROCKS + this.dispensers.length * DISPENSER_MAX_ROCKS + Game.session.hiddenFactor() * HIDDEN_FACTOR_MAX_ROCKS;\n        }\n    }\n\n    /**\n     * `GameSession` is a class that represents... well, a game session! It is created when the\n     * player presses `P` at the main menu, and ends when the player runs out of lives.\n     *\n     * The game session tracks values that persist across levels (like number of lives, score,\n     * the level number, etc.). Most of the actual in-game logic it hands off to `PlayingField`.\n     */\n\n    class GameSession {\n        constructor() {\n            this.score = 0;\n            this.levelNumber = 0;\n            this.levelCycle = 1;\n            this.lives = 5;\n            this.nextLife = 100;\n            this.paused = false;\n        }\n\n        update() {\n            // The `Game` controls the overall game loop, which runs at a fixed 60 frames per second.\n            //\n            // However, Ladder has the concept of \"play speed\" which the player can change at the main\n            // menu, and it controls how fast the game runs. To accomplish that, we can do a second\n            // frame gate here. This gate sets a flag called `moveFrame` IF things can move in this frame.\n            //\n            // We do it this way so that animations (like the play death animation, or the end-of-level\n            // score animation) can run at the same speed no matter what the play speed is.\n            let now = new Date().getTime();\n            let lastFrame = this.lastFrame || 0;\n            let moveFrame = false;\n\n            if (now - lastFrame >= (this.nextFrame || 0)) {\n                moveFrame = true;\n                this.nextFrame = now + this.moveFrameMillisecondDelay();\n            }\n\n            if (this.paused && [Input.Action.PAUSE, Input.Action.RESUME].includes(Input.lastAction())) {\n                this.paused = false;\n                Input.consume();\n            }\n\n            if (!this.paused && Input.lastAction() === Input.Action.PAUSE) {\n                this.paused = true;\n                Input.consume();\n            }\n\n            if (this.paused) return;\n\n            // If we haven't instantiated the playing field yet, create it now.\n            if (!this.field) this.field = new PlayingField(this.levelNumber);\n\n            // Hand off to the playing field for actual in-game logic\n            this.field.update(moveFrame);\n\n            this.handleCheatCodes();\n        }\n\n        draw() {\n            if (this.field) this.field.draw();\n\n            let stat = [\n                String(this.lives).padStart(2, ' '),\n                String(this.levelNumber + 1).padStart(2, ' '),\n                String(this.score).padStart(6, ' '),\n                this.field ? String(this.field.time).padStart(4, ' ') : ''\n            ];\n            Screen.write(0, 21, `Lads   ${stat[0]}     Level   ${stat[1]}      Score   ${stat[2]}      Bonus time   ${stat[3]}`);\n\n            if (this.paused) {\n                Screen.write(0, 23, 'Paused - type ESCape or RETURN to continue.');\n            }\n        }\n\n        restartLevel() {\n            this.field = undefined;\n        }\n\n        startNextLevel() {\n            this.field = undefined;\n            this.levelNumber++;\n            if (this.levelNumber % Level.LEVEL_COUNT === 0) {\n                this.levelCycle++;\n            }\n        }\n\n        updateScore(scoreType) {\n            switch (scoreType) {\n                case SCORE_ROCK:\n                    this.score += 200;\n                    break;\n                case SCORE_STATUE:\n                    this.score += this.field.time;\n                    break;\n                case SCORE_TREASURE:\n                    // Added repeatedly after winning the level\n                    this.score += 10;\n                    break;\n            }\n        }\n\n        hiddenFactor() {\n            // This \"hidden\" difficulty level increases steadily as the player completes a\n            // level cycle (every time they reach the Easy Street level). This makes the\n            // game slowly harder as you keep playing.\n            return Math.floor(this.levelNumber / Level.LEVEL_COUNT);\n        }\n\n        moveFrameMillisecondDelay() {\n            // Regardless of play speed, the game gets slightly faster every level cycle\n            return Math.floor(PLAY_SPEEDS[Game.playSpeed] - this.hiddenFactor() * HIDDEN_FACTOR_PLAY_SPEED * PLAY_SPEEDS[Game.playSpeed]);\n        }\n\n        handleCheatCodes() {\n            // Cheat codes are useful for testing, and this game is no exception. Of course\n            // THESE cheat codes do not belong here, as they wouldn't be created until 11 years\n            // later, but that won't stop me from inserting them anywhere I get the chance!\n            //\n            // =================     ===============     ===============   ========  ========\n            // \\\\ . . . . . . .\\\\   //. . . . . . .\\\\   //. . . . . . .\\\\  \\\\. . .\\\\// . . //\n            // ||. . ._____. . .|| ||. . ._____. . .|| ||. . ._____. . .|| || . . .\\/ . . .||\n            // || . .||   ||. . || || . .||   ||. . || || . .||   ||. . || ||. . . . . . . ||\n            // ||. . ||   || . .|| ||. . ||   || . .|| ||. . ||   || . .|| || . | . . . . .||\n            // || . .||   ||. _-|| ||-_ .||   ||. . || || . .||   ||. _-|| ||-_.|\\ . . . . ||\n            // ||. . ||   ||-'  || ||  `-||   || . .|| ||. . ||   ||-'  || ||  `|\\_ . .|. .||\n            // || . _||   ||    || ||    ||   ||_ . || || . _||   ||    || ||   |\\ `-_/| . ||\n            // ||_-' ||  .|/    || ||    \\|.  || `-_|| ||_-' ||  .|/    || ||   | \\  / |-_.||\n            // ||    ||_-'      || ||      `-_||    || ||    ||_-'      || ||   | \\  / |  `||\n            // ||    `'         || ||         `'    || ||    `'         || ||   | \\  / |   ||\n            // ||            .===' `===.         .==='.`===.         .===' /==. |  \\/  |   ||\n            // ||         .=='   \\_|-_ `===. .==='   _|_   `===. .===' _-|/   `==  \\/  |   ||\n            // ||      .=='    _-'    `-_  `='    _-'   `-_    `='  _-'   `-_  /|  \\/  |   ||\n            // ||   .=='    _-'          `-__\\._-'         `-_./__-'         `' |. /|  |   ||\n            // ||.=='    _-'                                                     `' |  /==.||\n            // =='    _-'                                                            \\/   `==\n            // \\   _-'                                                                `-_   /\n            //  `''                                                                      ``'\n            //\n            let recentKeystrokes = Input.history.map(event => event.key).join('').toUpperCase();\n            if (recentKeystrokes.match(/IDCLEV(\\d\\d)/)) {\n                // Changing levels is as simple as setting the desired level number\n                // and then throwing the current playing field away.\n                Input.consume();\n                this.levelNumber = parseInt(RegExp.$1, 10);\n                this.field = undefined;\n            } else if (recentKeystrokes.includes(\"IDDQD\")) {\n                Input.consume();\n                console.log(\"god mode\");\n            } else if (recentKeystrokes.includes(\"IDKFA\")) {\n                // Immediately end the current level as if we'd touched the reasure.\n                Input.consume();\n                this.field.winning = true;\n            }\n        }\n    }\n\n    /**\n     * `Game` is a singleton that represents the running game in the browser,\n     * initializes game submodules, and handles the top-level game loop.\n     */\n\n    const Game = {\n        init() {\n            Sprite.loadSpritesheet(async () => {\n                await Viewport.init();\n                await Screen.init();\n                await Sprite.init();\n                await Text.init();\n                await Input.init();\n                await Audio.init();\n\n                window.addEventListener('blur', () => this.lostFocus());\n                window.addEventListener('focus', () => this.gainedFocus());\n\n                this.start();\n            });\n        },\n\n        start() {\n            this.frame = 0;\n            this.playSpeed = 0;\n            this.menu = new MainMenu();\n\n            window.requestAnimationFrame(() => this.onFrame());\n        },\n\n        onFrame() {\n            let fps = 60;\n            let now = new Date().getTime();\n            let lastFrame = this.lastFrame || 0;\n\n            // Note: we are using `requestAnimationFrame`, which will call our onFrame handler\n            // 60 times per second in most cases. However, it can be higher (the browser may\n            // respect the user's refresh settings, which could be 120Hz or higher for example).\n            //\n            // It's safest to have a check like we do here, where we explicitly limit the number\n            // of update calls to 60 times per second.\n            if (now - lastFrame >= 1000 / fps) {\n                this.frame++;\n                this.update();\n                this.lastFrame = now;\n            }\n\n            Viewport.resize();\n            this.draw();\n\n            window.requestAnimationFrame(() => this.onFrame());\n        },\n\n        update() {\n            // Pull in frame by frame button pushes / keypresses / mouse clicks\n            Input.update();\n\n            // perform any per-frame audio updates\n            Audio.update();\n\n            if (this.menu) {\n                this.menu.update();\n            }\n\n            if (this.session) this.session.update();\n        },\n\n        draw() {\n            // Reset canvas transform and scale\n            Viewport.ctx.setTransform(Viewport.scale, 0, 0, Viewport.scale, 0, 0);\n\n            // Clear canvas. Note we don't go for pure black but rather a dark gray, to simulate\n            // the relatively bright phosphors on the Kaypro II. (We are going to add scan lines\n            // at the end which will appear to darken the whole screen, so the overall effect\n            // will be a little darker than this color.)\n            Viewport.ctx.fillStyle = '#181818';\n            Viewport.ctx.fillRect(0, 0, Viewport.width, Viewport.height);\n\n            // Center the 80x25 character \"screen\" in the viewport\n            Viewport.ctx.translate((Viewport.width - GAME_WIDTH) / 2 | 0, (Viewport.height - GAME_HEIGHT) / 2 | 0);\n\n            // Hand off control to our submodules to draw whatever they'd like. For all the submodules\n            // below us, \"drawing\" means writing text to the Screen.\n            Screen.clear();\n            if (this.session) this.session.draw();\n            if (this.menu) this.menu.draw();\n\n            // Render the text on the screen to the viewport.\n            Screen.draw(Viewport.ctx);\n\n            // After drawing the \"screen\" (characters), add scan lines on top. Our scan lines are almost\n            // not visible, but move slowly and introduce subtle visual shifts in the characters on screen,\n            // which is the effect we are going for.\n            //\n            // (Technically scan lines should be IN BETWEEN rows of pixels, and what we're actually simulating\n            // here is our eyeballs clocking the screen refresh. We're going for a general feeling here.)\n            Viewport.ctx.fillStyle = 'rgba(0, 0, 0, 0.5)';\n            for (let i = -Viewport.height / 2; i < Viewport.height / 2; i++) {\n                let k = ((this.frame / 4) % 4) + i * 4;\n                Viewport.ctx.fillRect(-Viewport.width, k, Viewport.width * 2, 2);\n            }\n        },\n\n        startSession() {\n            this.menu = undefined;\n            this.session = new GameSession();\n        },\n\n        showMainMenu() {\n            this.menu = new MainMenu();\n            this.session = undefined;\n        },\n\n        showInstructions() {\n            this.menu = new InstructionsMenu();\n            this.session = undefined;\n        },\n\n        lostFocus() {\n            // If we lose focus, automatically pause the game session (if there is one).\n            if (this.session) this.session.paused = true;\n        },\n\n        gainedFocus() {\n            // Do nothing - we'll let the user hit enter to resume playing.\n        }\n    };\n\n    /**\n     * This is the entry point for the game.\n     */\n\n    Game.init();\n\n}());\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwLmpzIiwic291cmNlcyI6WyIuLi9zcmMvanMvQ29uc3RhbnRzLmpzIiwiLi4vc3JjL2pzL1ZpZXdwb3J0LmpzIiwiLi4vc3JjL2pzL1V0aWwuanMiLCIuLi9zcmMvanMvU3ByaXRlU2hlZXQtZ2VuLmpzIiwiLi4vc3JjL2pzL1Nwcml0ZS5qcyIsIi4uL3NyYy9qcy9JbnB1dC5qcyIsIi4uL3NyYy9qcy9UZXh0LmpzIiwiLi4vc3JjL2pzL2xpYi96emZ4LmpzIiwiLi4vc3JjL2pzL2xpYi96emZ4bS5qcyIsIi4uL3NyYy9qcy9zb25ncy9PYmxpcXVlTXlzdGlxdWUuanMiLCIuLi9zcmMvanMvQXVkaW8uanMiLCIuLi9zcmMvanMvU2NyZWVuLmpzIiwiLi4vc3JjL2pzL01haW5NZW51LmpzIiwiLi4vc3JjL2pzL0luc3RydWN0aW9uc01lbnUuanMiLCIuLi9zcmMvanMvQmVoYXZpb3IuanMiLCIuLi9zcmMvanMvRW50aXR5LmpzIiwiLi4vc3JjL2pzL1BsYXllci5qcyIsIi4uL3NyYy9qcy9Sb2NrLmpzIiwiLi4vc3JjL2pzL0xldmVsLmpzIiwiLi4vc3JjL2pzL1BsYXlpbmdGaWVsZC5qcyIsIi4uL3NyYy9qcy9HYW1lU2Vzc2lvbi5qcyIsIi4uL3NyYy9qcy9HYW1lLmpzIiwiLi4vc3JjL2pzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29uc3RhbnRzXG4gKi9cblxuLy8gU3ByaXRlc2hlZXQgVVJJIChwcm9kdWNlZCBkdXJpbmcgZ3VscCBidWlsZClcbmV4cG9ydCBjb25zdCBTUFJJVEVTSEVFVF9VUkkgPSAnc3ByaXRlcy5wbmcnO1xuXG4vLyBUaGUgXCJzY3JlZW4gYXJlYVwiLiBUaGlzIGlzIGFuIEFTQ0lJIGdhbWUgYW5kIHNvIG1vc3Qgb2YgdGhlIGdhbWUgbG9naWMgZG9lc24ndCBjYXJlIGFib3V0IGJyb3dzZXJcbi8vIHBpeGVscywgd2UgY2FyZSBhYm91dCB0aGUgQVNDSUkgZGlzcGxheSBhcmVhICg4MHgyNSkuXG4vL1xuLy8gQWN0dWFsbHkgdGhlIG9yaWdpbmFsIHdhcyBsaWtlbHkgYW4gODB4MjQuIFdlIGNhbiB1c2UgZWl0aGVyIGhlcmUsIHdoYXRldmVyIGxvb2tzIGdvb2QgaW4gdGhlIGJyb3dzZXIuXG5leHBvcnQgY29uc3QgU0NSRUVOX1dJRFRIID0gODA7XG5leHBvcnQgY29uc3QgU0NSRUVOX0hFSUdIVCA9IC8qMjUqLyAyNDtcblxuLy8gVGhlIHNpemUgb2Ygb3VyIG9uLXNjcmVlbiBjaGFyYWN0ZXJzIChnaXZlbiBkaW1lbnNpb25zIGFib3ZlLCB0aGlzIGlzIDgwIGNvbHMgYnkgMjUgcm93cykuXG5leHBvcnQgY29uc3QgQ0hBUl9XSURUSCA9IDg7XG5leHBvcnQgY29uc3QgQ0hBUl9IRUlHSFQgPSAxNjtcbmV4cG9ydCBjb25zdCBDSEFSU0hFRVRfV0lEVEggPSAxNiAqIENIQVJfV0lEVEg7XG5leHBvcnQgY29uc3QgQ0hBUlNIRUVUX0hFSUdIVCA9IDMyICogQ0hBUl9IRUlHSFQ7XG5cbi8vIEEgc2NyZWVuIHNjYWxlIGZhY3Rvci4gVGhpcyBzY2FsZSBmYWN0b3IgbXVsdGlwbGllcyB0aGUgZW50aXJlIHNjcmVlbiBzaXplIHNvIHRoYXRcbi8vIHdlIGNhbiB0aGVuIGludHJvZHVjZSB0ZXh0IGFydGlmYWN0cyAobGlrZSBjaGFyYWN0ZXIgZ2xvdyBhbmQgc2NhbiBsaW5lcyksIHRvIGdpdmUgaXRcbi8vIGEgbGl0dGxlIG9mIHRoYXQgMTk4MiBmZWVsLlxuZXhwb3J0IGNvbnN0IFNDUkVFTl9TQ0FMRSA9IDQ7XG5cbi8vIFRoZSBwbGF5YWJsZSBhcmVhLiBOb3RlIHRoYXQgdGhpcyBpcyB0aGUgZGVzaXJlZCBkaW1lbnNpb25zLCBidXQgdGhlIGFjdHVhbCBvbi1zY3JlZW4gZGltZW5zaW9uc1xuLy8gbWF5IGJlIGxhcmdlciB0byBtYWludGFpbiBhc3BlY3QgcmF0aW8gKHNlZSBgVmlld3BvcnQud2lkdGhgICYgYFZpZXdwb3J0LmhlaWdodGApLlxuLy9cbi8vIE5vdGUgdGhlIGV4dHJhIGxpdHRsZSBwYWRkaW5nIG9mIGEgY2hhcmFjdGVyLCB3aGljaCBqdXN0IHByZXZlbnRzIG91ciB0ZXh0IGZyb20gYnV0dGluZyByaWdodFxuLy8gYWdhaW5zdCB0aGUgZWRnZSBvZiB0aGUgYnJvd3NlciB3aW5kb3cuXG5leHBvcnQgY29uc3QgR0FNRV9XSURUSCA9IChTQ1JFRU5fV0lEVEggKyAxKSAqIENIQVJfV0lEVEggKiBTQ1JFRU5fU0NBTEU7XG5leHBvcnQgY29uc3QgR0FNRV9IRUlHSFQgPSAoU0NSRUVOX0hFSUdIVCArIDEpICogQ0hBUl9IRUlHSFQgKiBTQ1JFRU5fU0NBTEU7XG5cbi8vIEZpeGVkIGxldmVsIHNpemVcbmV4cG9ydCBjb25zdCBMRVZFTF9ST1dTID0gMjA7XG5leHBvcnQgY29uc3QgTEVWRUxfQ09MUyA9IDc5O1xuXG4vLyBQbGF5IHNwZWVkcywgZXhwcmVzc2VkIGFzIGZyYW1lcyBwZXIgc2Vjb25kLlxuLy9cbi8vIEFjY29yZGluZyB0byB0aGUgb3JpZ2luYWwsIHRoZSBwbGF5IHNwZWVkcyBoYWQgbWlsbGlzZWNvbmQgZGVsYXlzIG9mOlxuLy8gICBbMTAwbXMsIDUwbXMsIDI1bXMsIDEzbXMsIDdtc10uXG4vL1xuLy8gVGhpcyB3b3VsZCBtZWFuIHRoZSBlZmZlY3RpdmUgRlBTIHdhczpcbi8vICAgWzEwLCAyMCwgNDAsIDc2LCAxNDJdLlxuLy9cbi8vIEkgdGhpbmsgdGhpcyBpcyB3YXkgdG9vIGhpZ2gsIGFuZCBtaWdodCBub3QgYmUgYWNjdXJhdGUgKGl0IGRvZXNuJ3QgY291bnRcbi8vIHRpbWUgc3BlbnQgZHJhd2luZyB0aGUgc2NyZWVuIGFuZCBydW5uaW5nIHRoZSBnYW1lJ3MgbG9naWMsIHdoaWNoIG1pZ2h0XG4vLyBiZSBhIHNpZ25pZmljYW50IG51bWJlciBvZiBtaWxsaXNlY29uZHMpLiBGcm9tIG1lbW9yeSwgZWFjaCBzcGVlZCB3YXMgYWJvdXRcbi8vIDUwJSBmYXN0ZXIgdGhhbiB0aGUgcHJldmlvdXMgb25lLCBzbyB0aGF0J3Mgd2hhdCBJJ3ZlIHNldCBoZXJlLlxuZXhwb3J0IGNvbnN0IFBMQVlfU1BFRURTID0gWzEyMCwgMTAwLCA5MCwgNTAsIDMwXTtcblxuLy8gTWF4aW11bSBudW1iZXIgb2Ygcm9ja3Mgb24gc2NyZWVuIGF0IG9uY2VcbmV4cG9ydCBjb25zdCBNQVhfUk9DS1MgPSA3O1xuXG4vLyBFYWNoIGRpc3BlbnNlciBvbiB0aGUgbGV2ZWwgaW5jcmVhc2VzIG1heCByb2NrcyBieSAxXG5leHBvcnQgY29uc3QgRElTUEVOU0VSX01BWF9ST0NLUyA9IDE7XG5cbi8vIEhpZGRlbiBkaWZmaWN1bHR5IGZhY3RvciAtIHRoZSBnYW1lIGdldHMgNSUgZmFzdGVyIGVhY2ggbGV2ZWwgY3ljbGVcbmV4cG9ydCBjb25zdCBISURERU5fRkFDVE9SX1BMQVlfU1BFRUQgPSAwLjA1O1xuXG4vLyBIaWRkZW4gZGlmZmljdWx0eSBmYWN0b3IgLSB0aGUgbWF4aW11bSBudW1iZXIgb2Ygcm9ja3MgaW5jcmVhc2VzIGVhY2ggbGV2ZWwgY3ljbGVcbmV4cG9ydCBjb25zdCBISURERU5fRkFDVE9SX01BWF9ST0NLUyA9IDI7XG5cbi8vIFNjb3JlIGV2ZW50cyAobm90ZSwgdGhlc2UgYXJlIGp1c3QgaWRlbnRpZmllcnMgZm9yIHRoZSB0eXBlcyBvZiBzY29yZSBpbmNyZWFzZXMsIG5vdFxuLy8gYWN0dWFsIHNjb3JlIHZhbHVlcykuXG5leHBvcnQgY29uc3QgU0NPUkVfUk9DSyA9IDE7XG5leHBvcnQgY29uc3QgU0NPUkVfU1RBVFVFID0gMjtcbmV4cG9ydCBjb25zdCBTQ09SRV9UUkVBU1VSRSA9IDM7XG4iLCIndXNlIHN0cmljdCc7XG5cbmltcG9ydCB7IEdBTUVfV0lEVEgsIEdBTUVfSEVJR0hUIH0gZnJvbSAnLi9Db25zdGFudHMnO1xuXG4vKipcbiAqIFZpZXdwb3J0XG4gKlxuICogUmVwcmVzZW50cyB0aGUgZ2FtZSBkaXNwbGF5IChmb3IgdXMsIGEgY2FudmFzKS5cbiAqL1xuZXhwb3J0IGNvbnN0IFZpZXdwb3J0ID0ge1xuICAgIGluaXQoKSB7XG4gICAgICAgIFZpZXdwb3J0LmNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYW52YXMnKTtcbiAgICAgICAgVmlld3BvcnQuY3R4ID0gVmlld3BvcnQuY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gICAgICAgIFZpZXdwb3J0LnJlc2l6ZSh0cnVlKTtcbiAgICB9LFxuXG4gICAgLy8gUmVzaXplIHRoZSBjYW52YXMgdG8gZ2l2ZSB1cyBhcHByb3hpbWF0ZWx5IG91ciBkZXNpcmVkIGdhbWUgZGlzcGxheSBzaXplLlxuICAgIC8vXG4gICAgLy8gUmF0aGVyIHRoYW4gYXR0ZW1wdCB0byBleHBsYWluIGl0LCBoZXJlJ3MgYSBjb25jcmV0ZSBleGFtcGxlOlxuICAgIC8vXG4gICAgLy8gICAgIHdlIHN0YXJ0IHdpdGggYSBkZXNpcmVkIGdhbWUgZGltZW5zaW9uOiAgIDQ4MHgyNzBweFxuICAgIC8vICAgICAgICAgIGdldCB0aGUgYWN0dWFsIGJyb3dzZXIgZGltZW5zaW9uczogIDEzMDl4NDY4cHhcbiAgICAvLyAgICAgICAgICBmYWN0b3IgaW4gdGhlIGRpc3BsYXkncyBEUEkgcmF0aW86ICAyNjE4eDkzNnB4XG4gICAgLy8gICAgICAgICBub3cgY2FsY3VsYXRlIHRoZSBob3Jpem9udGFsIHNjYWxlOiAgICAgICA1LjQ1eFxuICAgIC8vICAgICAgICAgICAgICAgICAgICAgYW5kIHRoZSB2ZXJ0aWNhbCBzY2FsZTogICAgICAgMy40NnhcbiAgICAvLyAgICAgICAgICAgIG91ciBuZXcgb2ZmaWNhbCBnYW1lIHNjYWxpbmcgaXM6ICAgICAgICA1LjR4XG4gICAgLy8gICAgICAgYW5kIG91ciBvZmZpY2lhbCB2aWV3cG9ydCBkaW1lbnNpb25zOiAgIDQ4NHgxNzNweFxuICAgIC8vXG4gICAgLy8gVGhpcyBhcHByb2FjaCBlbXBoYXNpemVzIGNvcnJlY3QgYXNwZWN0IHJhdGlvIGFuZCBtYWludGFpbnMgZnVsbC13aW5kb3cgcmVuZGVyaW5nLCBhdFxuICAgIC8vIHRoZSBwb3RlbnRpYWwgY29zdCBvZiBsaW1pdGluZyB2aXNpYmlsaXR5IG9mIHRoZSBnYW1lIGl0c2VsZiBpbiBlaXRoZXIgdGhlIFggb3IgWSBheGlzLlxuICAgIC8vIElmIHlvdSB1c2UgdGhpcyBhcHByb2FjaCwgbWFrZSBzdXJlIHlvdXIgR1VJIGNhbiBcImZsb2F0XCIgKG90aGVyd2lzZSB0aGVyZSBtYXkgYmUgd2hvbGVcbiAgICAvLyBVSSBlbGVtZW50cyB0aGUgcGxheWVyIGNhbm5vdCBzZWUhKS5cbiAgICByZXNpemUoZm9yY2UpIHtcbiAgICAgICAgbGV0IGRwaSA9IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvLFxuICAgICAgICAgICAgd2lkdGggPSBWaWV3cG9ydC5jYW52YXMuY2xpZW50V2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQgPSBWaWV3cG9ydC5jYW52YXMuY2xpZW50SGVpZ2h0LFxuICAgICAgICAgICAgZHBpV2lkdGggPSB3aWR0aCAqIGRwaSxcbiAgICAgICAgICAgIGRwaUhlaWdodCA9IGhlaWdodCAqIGRwaTtcblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICBmb3JjZSB8fFxuICAgICAgICAgICAgVmlld3BvcnQuY2FudmFzLndpZHRoICE9PSBkcGlXaWR0aCB8fFxuICAgICAgICAgICAgVmlld3BvcnQuY2FudmFzLmhlaWdodCAhPT0gZHBpSGVpZ2h0XG4gICAgICAgICkge1xuICAgICAgICAgICAgVmlld3BvcnQuY2FudmFzLndpZHRoID0gZHBpV2lkdGg7XG4gICAgICAgICAgICBWaWV3cG9ydC5jYW52YXMuaGVpZ2h0ID0gZHBpSGVpZ2h0O1xuXG4gICAgICAgICAgICBWaWV3cG9ydC5zY2FsZSA9ICgoTWF0aC5taW4oZHBpV2lkdGggLyBHQU1FX1dJRFRILCBkcGlIZWlnaHQgLyBHQU1FX0hFSUdIVCkgKiAxMCkgfCAwKSAvIDEwO1xuICAgICAgICAgICAgVmlld3BvcnQud2lkdGggPSBNYXRoLmNlaWwoZHBpV2lkdGggLyBWaWV3cG9ydC5zY2FsZSk7XG4gICAgICAgICAgICBWaWV3cG9ydC5oZWlnaHQgPSBNYXRoLmNlaWwoZHBpSGVpZ2h0IC8gVmlld3BvcnQuc2NhbGUpO1xuICAgICAgICAgICAgVmlld3BvcnQuY2VudGVyID0ge1xuICAgICAgICAgICAgICAgIHU6IChWaWV3cG9ydC53aWR0aCAvIDIpIHwgMCxcbiAgICAgICAgICAgICAgICB2OiAoVmlld3BvcnQuaGVpZ2h0IC8gMikgfCAwXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgVmlld3BvcnQuY2xpZW50V2lkdGggPSB3aWR0aDtcbiAgICAgICAgICAgIFZpZXdwb3J0LmNsaWVudEhlaWdodCA9IGhlaWdodDtcblxuICAgICAgICAgICAgLy8gTm90ZTogc21vb3RoaW5nIGZsYWcgZ2V0cyByZXNldCBvbiBldmVyeSByZXNpemUgYnkgc29tZSBicm93c2Vycywgd2hpY2ggaXMgd2h5XG4gICAgICAgICAgICAvLyB3ZSBkbyBpdCBoZXJlLlxuICAgICAgICAgICAgVmlld3BvcnQuY3R4LmltYWdlU21vb3RoaW5nRW5hYmxlZCA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gV2UgZG8gdGhpcyBldmVyeSBmcmFtZSwgbm90IGp1c3Qgb24gcmVzaXplLCBkdWUgdG8gYnJvd3NlciBzb21ldGltZXMgXCJmb3JnZXR0aW5nXCIuXG4gICAgICAgIC8vVmlld3BvcnQuY2FudmFzLnN0eWxlLmN1cnNvciA9ICdub25lJztcbiAgICB9XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgeyBHYW1lIH0gZnJvbSAnLi9HYW1lJztcbmltcG9ydCB7IFZpZXdwb3J0IH0gZnJvbSAnLi9WaWV3cG9ydCc7XG5cbmV4cG9ydCBmdW5jdGlvbiBxcjJ4eShwb3MpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB4OiBwb3MucSAqIDEzLFxuICAgICAgICB5OiBwb3MucSAqIDYgKyBwb3MuciAqIDEyXG4gICAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHh5MnFyKHBvcykge1xuICAgIGxldCBxckZyYWN0aW9uID0ge1xuICAgICAgICBxOiAocG9zLnggLyAxMyksXG4gICAgICAgIHI6ICgocG9zLnkgLSBwb3MueCAqIDYgLyAxMykgLyAxMilcbiAgICB9O1xuICAgIHJldHVybiBxclJvdW5kZWQocXJGcmFjdGlvbik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB4eTJ1dihwb3MpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB1OiBwb3MueCArIFZpZXdwb3J0LmNlbnRlci51IC0gR2FtZS5jYW1lcmEucG9zLngsXG4gICAgICAgIHY6IHBvcy55ICsgVmlld3BvcnQuY2VudGVyLnYgLSBHYW1lLmNhbWVyYS5wb3MueVxuICAgIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1djJ4eShwb3MpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB4OiBwb3MudSAtIFZpZXdwb3J0LmNlbnRlci51ICsgR2FtZS5jYW1lcmEucG9zLngsXG4gICAgICAgIHk6IHBvcy52IC0gVmlld3BvcnQuY2VudGVyLnYgKyBHYW1lLmNhbWVyYS5wb3MueVxuICAgIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBxcjJxcnMocG9zKSB7XG4gICAgcmV0dXJuIHsgcTogcG9zLnEsIHI6IHBvcy5yLCBzOiAtcG9zLnEtcG9zLnIgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHFyczJxcihwb3MpIHtcbiAgICByZXR1cm4geyBxOiBwb3MucSwgcjogcG9zLnIgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRpbGVJc1Bhc3NhYmxlKHEsIHIpIHtcbiAgICBpZiAoR2FtZS5icmF3bCkge1xuICAgICAgICBsZXQgcm9vbSA9IEdhbWUuYnJhd2wucm9vbTtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgcSA8IHJvb20ucSB8fFxuICAgICAgICAgICAgciA8IHJvb20uciB8fFxuICAgICAgICAgICAgcSA+PSByb29tLnEgKyByb29tLncgfHxcbiAgICAgICAgICAgIHIgPj0gcm9vbS5yICsgcm9vbS5oXG4gICAgICAgIClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKHEgPCAwIHx8IHIgPCAwIHx8IHEgPj0gR2FtZS5tYXplLncgfHwgciA+PSBHYW1lLm1hemUuaCkgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiAhIUdhbWUubWF6ZS5tYXplW3JdW3FdO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmdiYShyLCBnLCBiLCBhKSB7XG4gICAgcmV0dXJuIGByZ2JhKCR7cn0sJHtnfSwke2J9LCR7YX0pYDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUNhbnZhcyh3aWR0aCwgaGVpZ2h0KSB7XG4gICAgbGV0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgIGNhbnZhcy53aWR0aCA9IHdpZHRoO1xuICAgIGNhbnZhcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgbGV0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgIHJldHVybiB7IGNhbnZhcywgY3R4IH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByb29tQ2VudGVyKHJvb20pIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB4OiAocm9vbS5xICsgcm9vbS53IC8gMikgKiBUSUxFX1NJWkUsXG4gICAgICAgIHk6IChyb29tLnIgKyByb29tLmggLyAyKSAqIFRJTEVfU0laRVxuICAgIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJ0aWFsVGV4dCh0ZXh0LCB0LCBkKSB7XG4gICAgbGV0IGxlbmd0aCA9IGNsYW1wKE1hdGguY2VpbCh0IC8gZCAqIHRleHQubGVuZ3RoKSwgMCwgdGV4dC5sZW5ndGgpLFxuICAgICAgICBzdWJzdHIgPSB0ZXh0LnNsaWNlKDAsIGxlbmd0aCksXG4gICAgICAgIGlkeCA9IHRleHQuaW5kZXhPZignICcsIGxlbmd0aCAtIDEpO1xuICAgIGlmIChpZHggPCAwKSBpZHggPSB0ZXh0Lmxlbmd0aDtcbiAgICBpZiAoaWR4IC0gbGVuZ3RoID4gMCkgc3Vic3RyICs9ICcjJy5yZXBlYXQoaWR4IC0gbGVuZ3RoKTtcblxuICAgIHJldHVybiBzdWJzdHI7XG59XG4iLCIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogVGhpcyBtb2R1bGUgaXMgZ2VuZXJhdGVkIGJ5IGBndWxwIGJ1aWxkQXNzZXRzYC5cbiAqL1xuZXhwb3J0IGNvbnN0IFNwcml0ZVNoZWV0ID1cbiAgICAvKiA8Z2VuZXJhdGVkPiAqL1xueyBmb250OiBbIFsgMTI4LCAwLCAxMjgsIDQ0OCBdIF0sXG4gIGZvbnQyOiBbIFsgMCwgMCwgMTI4LCA1MTIgXSBdLFxuICBoYXJvbGQ6IFsgWyAxMjgsIDQ0OCwgMTksIDEyIF0gXSxcbiAgcGl4ZWw6IFsgWyAxNDcsIDQ0OCwgNiwgNiBdIF0sXG4gIHVyaTogJ3Nwcml0ZXMucG5nJyB9XG4vKiA8L2dlbmVyYXRlZD4gKi9cbiIsIid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHsgR2FtZSB9IGZyb20gJy4vR2FtZSc7XG5pbXBvcnQgeyByZ2JhLCBjcmVhdGVDYW52YXMgfSBmcm9tICcuL1V0aWwnO1xuaW1wb3J0IHsgU3ByaXRlU2hlZXQgfSBmcm9tICcuL1Nwcml0ZVNoZWV0LWdlbic7XG5pbXBvcnQgeyBWaWV3cG9ydCB9IGZyb20gJy4vVmlld3BvcnQnO1xuXG4vKipcbiAqIFNwcml0ZVxuICpcbiAqIEVuY2Fwc3VsYXRlcyBsb2FkaW5nIHNwcml0ZSBzbGljZXMgZnJvbSB0aGUgc3ByaXRlc2hlZXQsIG9yZ2FuaXppbmcgdGhlbSwgYW5kXG4gKiBtb2RpZnlpbmcgdGhlbSBvciBjb25zdHJ1Y3RpbmcgdXNpbmcgcHJpbWl0aXZlcy4gVG8gc2F2ZSBzcGFjZSwgd2UgdXNlIHNvbWUgdGVjaG5pcXVlc1xuICogbGlrZSBzdG9yaW5nIG9ubHkgYSBzbWFsbCBzbGljZSBvZiBhbiBpbWFnZSBpbiB0aGUgc3ByaXRlc2hlZXQsIHRoZW4gdXNpbmcgY29kZVxuICogdG8gZHVwbGljYXRlIGl0LCBhZGQgc29tZSByYW5kb21uZXNzLCBldGMuXG4gKi9cbmV4cG9ydCBjb25zdCBTcHJpdGUgPSB7XG4gICAgLy8gVGhpcyBpcyBhbiBleGNlcHRpb24gdG8gdGhlIHJ1bGUsIGxvYWRpbmcgdGhlIHNwcml0ZXNoZWV0IGlzIGEgc3BlY2lhbCBhY3Rpb24gdGhhdFxuICAgIC8vIGhhcHBlbnMgQkVGT1JFIGV2ZXJ5dGhpbmcgaXMgaW5pdGlhbGl6ZWQuXG4gICAgbG9hZFNwcml0ZXNoZWV0KGNiKSB7XG4gICAgICAgIGxldCBpbWFnZSA9IG5ldyBJbWFnZSgpO1xuICAgICAgICBpbWFnZS5vbmxvYWQgPSBjYjtcbiAgICAgICAgaW1hZ2Uuc3JjID0gU3ByaXRlU2hlZXQudXJpO1xuICAgICAgICBTcHJpdGUuc2hlZXQgPSBpbWFnZTtcbiAgICB9LFxuXG4gICAgaW5pdCgpIHtcbiAgICAgICAgLy8gQmFzZSBwaXhlbCBmb250IGFuZCBpY29ucyAoc2VlIGBUZXh0LmluaXRgIGZvciBhZGRpdGlvbmFsIHZhcmlhdGlvbnMpXG4gICAgICAgIFNwcml0ZS5mb250ID0gaW5pdEJhc2ljU3ByaXRlKFNwcml0ZVNoZWV0LmZvbnQyWzBdKTtcblxuICAgICAgICByZXR1cm47XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEEgc21hbGwgaGVscGVyIHRoYXQgZHJhd3MgYSBzcHJpdGUgb250byBhIGNhbnZhcywgcmVzcGVjdGluZyB0aGUgYW5jaG9yIHBvaW50IG9mXG4gICAgICogdGhlIHNwcml0ZS4gTm90ZSB0aGF0IHRoZSBjYW52YXMgc2hvdWxkIGJlIFBSRS1UUkFOU0xBVEVEIGFuZCBQUkUtUk9UQVRFRCwgaWZcbiAgICAgKiB0aGF0J3MgYXBwcm9wcmlhdGUhXG4gICAgICovXG4gICAgZHJhd1Nwcml0ZShjdHgsIHNwcml0ZSwgdSwgdikge1xuICAgICAgICBjdHguZHJhd0ltYWdlKHNwcml0ZS5pbWcsIHUgLSBzcHJpdGUuYW5jaG9yLngsIHYgLSBzcHJpdGUuYW5jaG9yLnkpO1xuICAgIH0sXG5cbiAgICBkcmF3Vmlld3BvcnRTcHJpdGUoc3ByaXRlLCBwb3MsIHJvdGF0aW9uKSB7XG4gICAgICAgIGxldCB7IHUsIHYgfSA9IHRoaXMudmlld3BvcnRTcHJpdGUydXYoXG4gICAgICAgICAgICBzcHJpdGUsXG4gICAgICAgICAgICBwb3NcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKHJvdGF0aW9uKSB7XG4gICAgICAgICAgICBWaWV3cG9ydC5jdHguc2F2ZSgpO1xuICAgICAgICAgICAgVmlld3BvcnQuY3R4LnRyYW5zbGF0ZSh1ICsgc3ByaXRlLmFuY2hvci54LCB2ICsgc3ByaXRlLmFuY2hvci55KTtcbiAgICAgICAgICAgIFZpZXdwb3J0LmN0eC5yb3RhdGUocm90YXRpb24pO1xuICAgICAgICAgICAgVmlld3BvcnQuY3R4LmRyYXdJbWFnZShcbiAgICAgICAgICAgICAgICBzcHJpdGUuaW1nLFxuICAgICAgICAgICAgICAgIC1zcHJpdGUuYW5jaG9yLngsXG4gICAgICAgICAgICAgICAgLXNwcml0ZS5hbmNob3IueVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIFZpZXdwb3J0LmN0eC5yZXN0b3JlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBWaWV3cG9ydC5jdHguZHJhd0ltYWdlKHNwcml0ZS5pbWcsIHUsIHYpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIHZpZXdwb3J0U3ByaXRlMnV2KHNwcml0ZSwgcG9zKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB1OiBwb3MueCAtIHNwcml0ZS5hbmNob3IueCAtIEdhbWUuY2FtZXJhLnBvcy54ICsgVmlld3BvcnQuY2VudGVyLnUsXG4gICAgICAgICAgICB2OiBwb3MueSAtIHNwcml0ZS5hbmNob3IueSAtIEdhbWUuY2FtZXJhLnBvcy55ICsgVmlld3BvcnQuY2VudGVyLnZcbiAgICAgICAgfTtcbiAgICB9XG59O1xuXG4vLyBTcHJpdGUgdXRpbGl0eSBmdW5jdGlvbnNcblxuZnVuY3Rpb24gaW5pdEJhc2ljU3ByaXRlKGRhdGEsIGFuY2hvcikge1xuICAgIHJldHVybiBpbml0RHluYW1pY1Nwcml0ZShsb2FkQ2FjaGVTbGljZSguLi5kYXRhKSwgYW5jaG9yKTtcbn1cblxuZnVuY3Rpb24gaW5pdER5bmFtaWNTcHJpdGUoc291cmNlLCBhbmNob3IpIHtcbiAgICBsZXQgdyA9IHNvdXJjZS53aWR0aCxcbiAgICAgICAgaCA9IHNvdXJjZS5oZWlnaHQ7XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBpbWc6IHNvdXJjZSxcbiAgICAgICAgLy8gSGFjayEgVXNpbmcgYSBmbGF0IGAubWFwKGluaXRCYXNpY1Nwcml0ZSlgIGlzIGFjdHVhbGx5IGdvaW5nIHRvIHBhc3MgdGhlXG4gICAgICAgIC8vIGVsZW1lbnQgSU5ERVggYXMgc2Vjb25kIGFyZ3VtZW50LCByZXN1bHRpbmcgaW4gXCJhbmNob3I9MVwiLiBUaGUgcmlnaHQgc29sdXRpb25cbiAgICAgICAgLy8gaGVyZSBpcyBcInR5cGVvZiBhbmNob3IgPT09ICdvYmplY3QnID9cIiwgYnV0IHRvIHNhdmUgYnl0ZXMgSSBhdm9pZCB1c2luZ1xuICAgICAgICAvLyB0aGUgdHlwZW9mIGFuZCBpbnN0YW5jZW9mIGtleXdvcmRzIGFueXdoZXJlIGluIHRoZSBjb2RlYmFzZS4gSGVuY2UsXG4gICAgICAgIC8vIFwiYW5jaG9yICYmIGFuY2hvci54XCIuXG4gICAgICAgIGFuY2hvcjogKGFuY2hvciAmJiBhbmNob3IueCkgPyBhbmNob3IgOiB7IHg6ICh3IC8gMikgfCAwLCB5OiAoaCAvIDIpIHwgMCB9XG4gICAgfTtcbn1cblxuZnVuY3Rpb24gbG9hZENhY2hlU2xpY2UoeCwgeSwgdywgaCkge1xuICAgIGNvbnN0IHNvdXJjZSA9IFNwcml0ZS5zaGVldDtcbiAgICBjb25zdCBzbGljZUNhbnZhcyA9IGNyZWF0ZUNhbnZhcyh3LCBoKTtcbiAgICBzbGljZUNhbnZhcy5jdHguZHJhd0ltYWdlKHNvdXJjZSwgeCwgeSwgdywgaCwgMCwgMCwgdywgaCk7XG4gICAgcmV0dXJuIHNsaWNlQ2FudmFzLmNhbnZhcztcbn1cbiIsIlxuLy8gQSBsaXN0IG9mIGluLWdhbWUgYWN0aW9ucyB0aGF0IGNhbiBiZSBwZXJmb3JtZWQgYnkgdGhlIHBsYXllclxuY29uc3QgQWN0aW9uID0ge1xuICAgIFVQOiAgICAgMTEsXG4gICAgRE9XTjogICAxMixcbiAgICBMRUZUOiAgIDEzLFxuICAgIFJJR0hUOiAgMTQsXG4gICAgSlVNUDogICAxNSxcbiAgICBTVE9QOiAgIDE2LFxuICAgIFBBVVNFOiAgMTcsXG4gICAgUkVTVU1FOiAxOFxufTtcblxuLy8gQSBsaXN0IG9mIGtleSBjb2RlIG1hcHBpbmdzIGFuZCB3aGF0IGFjdGlvbiB0aGV5IHBlcmZvcm0uIEhlcmUgd2UgaGFyZC1jb2RlIGl0LCBidXRcbi8vIHlvdSBjb3VsZCBlYXNpbHkgYWxzbyBoYXZlIHRoZSBrZXkgbWFwcGluZ3MgY29udHJvbGxlZCBieSBzZXR0aW5ncyBhbmQgbGV0IHRoZSB1c2VyXG4vLyBjb25maWd1cmUgaXQuXG5jb25zdCBLZXlNYXBwaW5nID0ge1xuICAgIEtleVc6ICAgICAgIEFjdGlvbi5VUCxcbiAgICBLZXlTOiAgICAgICBBY3Rpb24uRE9XTixcbiAgICBLZXlBOiAgICAgICBBY3Rpb24uTEVGVCxcbiAgICBLZXlEOiAgICAgICBBY3Rpb24uUklHSFQsXG4gICAgQXJyb3dVcDogICAgQWN0aW9uLlVQLFxuICAgIEFycm93RG93bjogIEFjdGlvbi5ET1dOLFxuICAgIEFycm93TGVmdDogIEFjdGlvbi5MRUZULFxuICAgIEFycm93UmlnaHQ6IEFjdGlvbi5SSUdIVCxcbiAgICBTcGFjZTogICAgICBBY3Rpb24uSlVNUCxcbiAgICBFc2NhcGU6ICAgICBBY3Rpb24uUEFVU0UsXG4gICAgRW50ZXI6ICAgICAgQWN0aW9uLlJFU1VNRVxufTtcblxuZXhwb3J0IGNvbnN0IElucHV0ID0ge1xuICAgIEFjdGlvbixcbiAgICBLZXlNYXBwaW5nLFxuXG4gICAgaW5pdCgpIHtcbiAgICAgICAgLy8gSW5wdXQgYnVmZmVyIC0gbmV3IGtleXByZXNzIGV2ZW50cyBnbyBpbnRvIHRoaXMgYnVmZmVyIHRvIGJlIGhhbmRsZWRcbiAgICAgICAgLy8gZHVyaW5nIHRoZSBnYW1lJ3MgdXBkYXRlIGxvb3AuIEl0J3MgdXAgdG8gdGhlIGB1cGRhdGUoKWAgbWV0aG9kcyB0byBjb25zdW1lXG4gICAgICAgIC8vIGtleSBwcmVzc2VzIGFuZCByZW1vdmUgdGhlbSBmcm9tIHRoZSBidWZmZXIuXG4gICAgICAgIHRoaXMuYnVmZmVyID0gW107XG5cbiAgICAgICAgLy8gSW5wdXQgaGlzdG9yeSAtIGhpc3RvcnkgY29udGFpbnMgcmVjZW50IGtleSBwcmVzcyBldmVudHMgaW4gb3JkZXIsXG4gICAgICAgIC8vIHJlbW92ZWQgYXV0b21hdGljYWxseSBhZnRlciBhIGZldyBzZWNvbmRzLiBUaGlzIGlzIHVzZWZ1bCBmb3IgZGV0ZWN0aW5nXG4gICAgICAgIC8vIGlucHV0cyBsaWtlIGNoZWF0IGNvZGVzLCBmb3IgZXhhbXBsZS5cbiAgICAgICAgdGhpcy5oaXN0b3J5ID0gW107XG5cbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBldmVudCA9PiB7XG4gICAgICAgICAgICBsZXQgZW50cnkgPSB7XG4gICAgICAgICAgICAgICAgYXQ6IG5ldyBEYXRlKCkuZ2V0VGltZSgpLFxuICAgICAgICAgICAgICAgIGtleTogZXZlbnQua2V5LFxuICAgICAgICAgICAgICAgIGNvZGU6IGV2ZW50LmNvZGUsXG4gICAgICAgICAgICAgICAgYWN0aW9uOiBJbnB1dC5LZXlNYXBwaW5nW2V2ZW50LmNvZGVdIHx8IElucHV0LkFjdGlvbi5TVE9QXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgSW5wdXQuYnVmZmVyLnB1c2goZW50cnkpO1xuICAgICAgICAgICAgSW5wdXQuaGlzdG9yeS5wdXNoKGVudHJ5KTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVudHJ5KTtcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIHVwZGF0ZSgpIHtcbiAgICAgICAgbGV0IG5vdyA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgICAgICB0aGlzLmhpc3RvcnkgPSB0aGlzLmhpc3RvcnkuZmlsdGVyKGVudHJ5ID0+IGVudHJ5LmF0ID4gbm93IC0gMzAwMCk7XG4gICAgfSxcblxuICAgIGxhc3RLZXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlci5sZW5ndGggPiAwID8gdGhpcy5idWZmZXJbdGhpcy5idWZmZXIubGVuZ3RoIC0gMV0ua2V5IDogJyc7XG4gICAgfSxcblxuICAgIGxhc3RBY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlci5sZW5ndGggPiAwID8gdGhpcy5idWZmZXJbdGhpcy5idWZmZXIubGVuZ3RoIC0gMV0uYWN0aW9uIDogdW5kZWZpbmVkO1xuICAgIH0sXG5cbiAgICBjb25zdW1lKCkge1xuICAgICAgICB0aGlzLmJ1ZmZlciA9IFtdO1xuICAgIH0sXG59XG4iLCIvKipcbiAqIGBUZXh0YCBpcyBhIHNpbmdsZXRvbiByZXNwb25zaWJsZSBmb3IgZHJhd2luZyB0ZXh0IGNoYXJhY3RlcnMgb24gdGhlIHZpZXdwb3J0LiBUaGlzXG4gKiBnYW1lIHVzZXMgYSBjdXN0b20gcGl4ZWwgZm9udCwgc28gd2UgbmVlZCB0byBpbXBsZW1lbnQgc29tZSBiYXNpYyB0ZXh0IGhhbmRsaW5nXG4gKiAoc3BsaXR0aW5nIGxvbmcgbGluZXMsIG1lYXN1cmluZyBjaGFyYWN0ZXIgd2lkdGgsIGV0Yy4pIG91cnNlbHZlcy5cbiAqL1xuXG5pbXBvcnQgeyBTcHJpdGUgfSBmcm9tICcuL1Nwcml0ZSc7XG5pbXBvcnQgeyByZ2JhLCBjcmVhdGVDYW52YXMgfSBmcm9tICcuL1V0aWwnO1xuaW1wb3J0IHsgQ0hBUl9XSURUSCwgQ0hBUl9IRUlHSFQsIENIQVJTSEVFVF9XSURUSCwgU0NSRUVOX1NDQUxFIH0gZnJvbSAnLi9Db25zdGFudHMnO1xuaW1wb3J0IHsgVmlld3BvcnQgfSBmcm9tICcuL1ZpZXdwb3J0JztcblxuLy8gSW4gb3VyIGNoYXJhY3RlciBzaGVldCwgY2hhcnMgMHgwMC0weDdGIGFyZSBzdGFuZGFyZCBBU0NJSSwgYmVsb3cgdGhhdCB3ZSBwdXQgd2hhdGV2ZXJcbi8vIGNoYXJhY3RlcnMgYXJlIGNvbnZlbmllbnQgZm9yIHVzLiBIZXJlIHdlIGNhbiBjaG9vc2UgdG8gbWFwIHVuaWNvZGUgY2hhcmFjdGVycyB0byBwb3NpdGlvbnNcbi8vIDB4ODArIGluIHRoZSBjaGFyc2hlZXQsIG1ha2luZyBpdCBlYXN5IGZvciB1cyB0byByZW5kZXIgdGhpbmdzIGxpa2Ugc3BlY2lhbCBjaGFyYWN0ZXJzLFxuLy8gYm94IGRyYXdpbmcgY2hhcmFjdGVycywgZXRjLlxuLy9cbi8vIE5vdGU6IEkgbGlrZSBwYXN0aW5nIGFjdHVhbCBjaGFyYWN0ZXJzIGluc3RlYWQgb2YgY29kZXMgKFwi4pScXCIgaW5zdGVhZCBvZiBcIlxcdTI1MUNcIikuIElmIHlvdVxuLy8gZG8gdGhpcywgZG9uJ3QgZm9yZ2V0IHRvIGV4cGxpY2l0bHkgdGVsbCB0aGUgYnJvd3NlciB3aGF0IGNoYXJzZXQgeW91ciBKUyBmaWxlIGlzLCBvciBpdFxuLy8gd29uJ3QgZXhlY3V0ZSAtLSBzZWUgYGluZGV4Lmh0bWxgIGZvciBhbiBleGFtcGxlLlxuY29uc3QgU1VQUE9SVEVEX1VOSUNPREVfQ0hBUlMgPSBbXG4gICAgJ+KUgOKUguKUjOKUkOKUlOKUmOKUnOKUpOKUrOKUtOKUvOKVs+KVs+KVs+KVs+KVsycsXG4gICAgJ+KVkOKVkeKVlOKVl+KVmuKVneKVoOKVo+KVpuKVqeKVrOKVs+KVs+KVs+KVs+KVsycsXG4gICAgJ+KGkeKGk+KGkOKGkuKVs+KVs+KVs+KVs+KVs+KVs+KVs+KVs+KVs+KVs+KVs+KVsydcbl0uam9pbignJyk7XG5cbmNvbnN0IFVOSUNPREVfQ0hBUl9NQVAgPSBTVVBQT1JURURfVU5JQ09ERV9DSEFSUy5zcGxpdCgnJykucmVkdWNlKChtYXAsIGNoYXIsIGlkeCkgPT4ge1xuICAgIG1hcFtjaGFyXSA9IDB4ODAgKyBpZHg7XG4gICAgcmV0dXJuIG1hcDtcbn0sIHt9KTtcblxuLyoqXG4gKiBUZXh0XG4gKlxuICogVXRpbGl0aWVzIGZvciBkcmF3aW5nIHRleHQgdXNpbmcgaW4tZ2FtZSBwaXhlbCBmb250LlxuICovXG5leHBvcnQgY29uc3QgVGV4dCA9IHtcbiAgICBpbml0KCkge1xuICAgICAgICAvLyBUaGUgXCJ3aGl0ZVwiIGZvbnQgc2hlZXQsIHJpZ2h0IGZyb20gdGhlIHNwcml0ZS5cbiAgICAgICAgVGV4dC53aGl0ZSA9IHsgaW1nOiBTcHJpdGUuZm9udC5pbWcsIHNjYWxlOiAxLCBib3JkZXI6IDAsIG1hcmdpbjogMCB9O1xuXG4gICAgICAgIC8vIFJlY29sb3JlZCB2ZXJzaW9ucyBvZiB0aGUgb3JpZ2luYWwgZm9udCBzaGVldCwgdG8gdXNlIHdoZW4gY29uc3RydWN0aW5nIG91ciBnbG93LlxuICAgICAgICAvL1xuICAgICAgICAvLyBUaGUgY29sb3IgaGVyZSBpcyAjMzNGRjAwIHdoaWNoIGlzIHJvdWdobHkgdGhlIGdsb3cgb2YgdGhlIEtheXBybyBJSS5cbiAgICAgICAgVGV4dC50ZXJtaW5hbCA9IHJlY29sb3IoVGV4dC53aGl0ZSwgcmdiYSg1MSArIDE2LCAyNTUsIDAgKyAxNiwgMSkpO1xuICAgICAgICBUZXh0LnRlcm1pbmFsX3NoYWRvdyA9IHJlY29sb3IoVGV4dC53aGl0ZSwgcmdiYSg1MSwgMjU1LCAwLCAwLjQpKTtcblxuICAgICAgICAvLyBcIkdsb3dpbmdcIiBhIGJ1bmNoIG9mIGNoYXJhY3RlcnMgb24tc2NyZWVuIGlzIGp1c3QgdG9vIHNsb3cgd2hlbiB5b3UncmUgZG9pbmcgNVxuICAgICAgICAvLyBkcmF3IGNhbGxzIGZvciBldmVyeSBpbmRpdmlkdWFsIGNoYXJhY3Rlci4gVG8gYXZvaWQgdGhhdCwgd2UgY2FuIGJ1aWxkIGEgbmV3XG4gICAgICAgIC8vIHNwcml0ZSBzaGVldCB0aGF0IGlzIHByZS1zY2FsZWQgd2l0aCB0aGUgZ2xvdyBidWlsdCBpbi5cbiAgICAgICAgVGV4dC5nbG93ID0gYmFrZUZvbnRHbG93KFRleHQudGVybWluYWwsIFRleHQudGVybWluYWxfc2hhZG93LCBTQ1JFRU5fU0NBTEUsIDIsIDIpO1xuICAgIH0sXG5cbiAgICBkcmF3VGV4dChjdHgsIHRleHQsIHUsIHYsIGZvbnQgPSBUZXh0LnRlcm1pbmFsKSB7XG4gICAgICAgIC8vIFRoZSBtYXRoIGd5bW5hc3RpY3MgYXJlIGEgbGl0dGxlIGhhcmQgdG8gcmVhZCAoYXBvbG9naWVzKS4gVG8gcmVuZGVyIHRoZVxuICAgICAgICAvLyBmb250IGFza2VkIGZvciBjb3JyZWN0bHksIHdlIG5lZWQgdG8gaGF2ZSB0aGUgZm9udCBzaGVldCBpbWFnZSwgdGhlIHNjYWxlLFxuICAgICAgICAvLyB0aGUgYm9yZGVyIGFuZCB0aGUgbWFyZ2luLlxuICAgICAgICAvL1xuICAgICAgICAvLyBUaGUgXCJzY2FsZVwiIGluZm9ybXMgdXMgd2hhdCBQUkVTQ0FMSU5HIGlzIGFwcGxpZWQgdG8gdGhlIGZvbnQgc2hlZXQsIHNvXG4gICAgICAgIC8vIHdlIGtub3cgaG93IGJpZyB0byByZW5kZXIgaXQgKHdlIGRvbid0IGRvIGFkZGl0aW9uYWwgc2NhbGluZyBoZXJlKS5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gVGhlIFwiYm9yZGVyXCIgdGVsbHMgdXMgaG93IG1hbnkgUFJFLVNDQUxFIHBpeGVscyBvZiBib3JkZXIgZXhpc3QgaW4gdGhpc1xuICAgICAgICAvLyBpbWFnZS4gQSBib3JkZXIgb2YgMiBtZWFucyBhIHRvdGFsIG9mIDIgcGl4ZWxzIChzbyAxIG9uIGV2ZXJ5IHNpZGUpIHdlcmVcbiAgICAgICAgLy8gdXNlZC4gVGhpcyBpcyBwcmUtc2NhbGUsIHNvIGlmIHRoZSBzY2FsZSBpcyA0LCB0aGF0IG1lYW5zIHRoZXJlIGFyZSA0IHBpeGVsc1xuICAgICAgICAvLyBvZiBcInNwYWNlXCIgYXJvdW5kIGVhY2ggY2hhcmFjdGVyIGluIHRoZSBmb250IHNoZWV0LlxuICAgICAgICAvL1xuICAgICAgICAvLyBUaGUgXCJtYXJnaW5cIiB0ZWxscyB1cyBob3cgbWFueSBQT1NULVNDQUxFIHBpeGVscyBvZiBtYXJnaW4gZXhpc3QgKGluIHByYWN0aWNlXG4gICAgICAgIC8vIHRoaXMgbWVhbnMsIGhvdyBtYW55IHBpeGVscyBvZiBnbG93IHN1cnJvdW5kIHRoZSBjaGFyYWN0ZXIpLiBZb3Ugd2FudCB0byBzdWJ0cmFjdFxuICAgICAgICAvLyB0aGlzIG1hcmdpbiB3aGVuIHJlbmRlcmluZyB0aGUgY2hhcmFjdGVyIHNvIHRoZSBjaGFyYWN0ZXIgYm9keSBpcyBpbiB0aGUgZXhwZWN0ZWRcbiAgICAgICAgLy8gc3BvdCBvbiBzY3JlZW4uXG4gICAgICAgIGxldCB7IGltZywgc2NhbGUsIGJvcmRlciwgbWFyZ2luIH0gPSBmb250O1xuXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHRleHQpKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBibG9jayBvZiB0ZXh0KSB7XG4gICAgICAgICAgICAgICAgVGV4dC5kcmF3VGV4dChjdHgsIGJsb2NrLnRleHQsIHUgKyBibG9jay51ICogc2NhbGUsIHYgKyBibG9jay52ICogc2NhbGUsIGZvbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChsZXQgaWR4ID0gMDsgaWR4IDwgdGV4dC5sZW5ndGg7IGlkeCsrKSB7XG4gICAgICAgICAgICBsZXQgYyA9IFVOSUNPREVfQ0hBUl9NQVBbdGV4dFtpZHhdXSB8fCB0ZXh0LmNoYXJDb2RlQXQoaWR4KTtcbiAgICAgICAgICAgIGxldCBrID0gKGMgLSAwKSAqIChDSEFSX1dJRFRIICsgYm9yZGVyKTtcbiAgICAgICAgICAgIGxldCBkcmF3YWJsZSA9IChjICE9PSAzMik7XG5cbiAgICAgICAgICAgIC8vIFdlIGNsZWFyIHRoZSBjYW52YXMgaW4gZXZlcnkgZnJhbWUsIGFuZCBpdCdzIGEgSFVHRSBzcGVlZCBhZHZhbnRhZ2Ugbm90IHRvIGRyYXcgYW5cbiAgICAgICAgICAgIC8vIGVtcHR5IGltYWdlICh0aGlzIGNoZWNrIGNhbiBzYXZlIDEwMDArIGRyYXdJbWFnZSBjYWxscyBhIGZyYW1lKS5cbiAgICAgICAgICAgIGlmIChkcmF3YWJsZSkge1xuICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoXG4gICAgICAgICAgICAgICAgICAgIGltZyxcbiAgICAgICAgICAgICAgICAgICAgKGsgKiBzY2FsZSkgJSBpbWcud2lkdGgsXG4gICAgICAgICAgICAgICAgICAgIE1hdGguZmxvb3IoKGsgKiBzY2FsZSkgLyAoaW1nLndpZHRoKSkgKiAoQ0hBUl9IRUlHSFQgKyBib3JkZXIpICogc2NhbGUsXG4gICAgICAgICAgICAgICAgICAgIENIQVJfV0lEVEggKiBzY2FsZSxcbiAgICAgICAgICAgICAgICAgICAgQ0hBUl9IRUlHSFQgKiBzY2FsZSxcbiAgICAgICAgICAgICAgICAgICAgdSArIG1hcmdpbixcbiAgICAgICAgICAgICAgICAgICAgdiArIG1hcmdpbixcbiAgICAgICAgICAgICAgICAgICAgQ0hBUl9XSURUSCAqIHNjYWxlLFxuICAgICAgICAgICAgICAgICAgICBDSEFSX0hFSUdIVCAqIHNjYWxlXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHUgKz0gQ0hBUl9XSURUSCAqIHNjYWxlO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIG1lYXN1cmVXaWR0aCh0ZXh0LCBzY2FsZSA9IDEpIHtcbiAgICAgICAgcmV0dXJuIHRleHQuc3BsaXQoJycpLnJlZHVjZSgoc3VtLCBjKSA9PiBzdW0gKyBDSEFSX1dJRFRILCAwKSAqIHNjYWxlO1xuICAgIH0sXG5cbiAgICBzcGxpdFBhcmFncmFwaCh0ZXh0LCB3LCBoKSB7XG4gICAgICAgIGxldCBjdSA9IDAsIGN2ID0gMDtcbiAgICAgICAgbGV0IG5leHQgPSAoKSA9PiAoeyB0ZXh0OiAnJywgdTogY3UsIHY6IGN2IH0pO1xuICAgICAgICBsZXQgd2lwID0gbmV4dCgpO1xuICAgICAgICBsZXQgbGlzdCA9IFtdO1xuXG4gICAgICAgIGZvciAobGV0IGMgb2YgdGV4dC5zcGxpdCgnJykpIHtcbiAgICAgICAgICAgIGxldCBjV2lkdGggPSBUZXh0Lm1lYXN1cmVXaWR0aChjLCAxKTtcbiAgICAgICAgICAgIGlmIChjID09PSAnXFxuJyB8fCBjdSArIGNXaWR0aCA+IHcpIHtcbiAgICAgICAgICAgICAgICBsZXQgc2F2ZWQgPSAnJztcbiAgICAgICAgICAgICAgICBpZiAoYyAhPT0gJ1xcbicgJiYgYyAhPT0gJyAnKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBzcGFjZSA9IHdpcC50ZXh0LnNwbGl0KCcgJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzcGFjZS5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzYXZlZCA9IHNwYWNlLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgd2lwLnRleHQgPSBzcGFjZS5qb2luKCcgJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHdpcC50ZXh0Lmxlbmd0aCA+IDApIGxpc3QucHVzaCh3aXApO1xuICAgICAgICAgICAgICAgIGN1ID0gMDtcbiAgICAgICAgICAgICAgICBjdiArPSAoQ0hBUl9IRUlHSFQpO1xuICAgICAgICAgICAgICAgIHdpcCA9IG5leHQoKTtcbiAgICAgICAgICAgICAgICBpZiAoc2F2ZWQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICB3aXAudGV4dCA9IHNhdmVkO1xuICAgICAgICAgICAgICAgICAgICBjdSArPSBUZXh0Lm1lYXN1cmVXaWR0aCh3aXAudGV4dCwgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjdSArPSBjV2lkdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYyAhPT0gJ1xcbicpIHtcbiAgICAgICAgICAgICAgICB3aXAudGV4dCA9IHdpcC50ZXh0ICsgYztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh3aXAudGV4dC5sZW5ndGggPiAwKSBsaXN0LnB1c2god2lwKTtcblxuICAgICAgICByZXR1cm4gbGlzdC5tYXAobGluZSA9PiAoe1xuICAgICAgICAgICAgLi4ubGluZSxcbiAgICAgICAgICAgIHc6IFRleHQubWVhc3VyZVdpZHRoKGxpbmUudGV4dCwgMSksXG4gICAgICAgICAgICBoOiBDSEFSX0hFSUdIVFxuICAgICAgICB9KSk7XG4gICAgfVxufTtcblxuLy8gVGV4dCB1dGlsaXR5IGZ1bmN0aW9ucywgZm9yIG1hbmlwdWxhdGluZyB0aGUgZm9udCBzaGVldCBpbWFnZXNcblxuZnVuY3Rpb24gcmVjb2xvcihmb250LCBjb2xvcikge1xuICAgIGxldCBjYW52YXMgPSBjcmVhdGVDYW52YXMoZm9udC5pbWcud2lkdGgsIGZvbnQuaW1nLmhlaWdodCk7XG4gICAgY2FudmFzLmN0eC5maWxsU3R5bGUgPSBjb2xvcjtcbiAgICBjYW52YXMuY3R4LmZpbGxSZWN0KDAsIDAsIGZvbnQuaW1nLndpZHRoLCBmb250LmltZy5oZWlnaHQpO1xuICAgIGNhbnZhcy5jdHguZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gJ2Rlc3RpbmF0aW9uLWluJztcbiAgICBjYW52YXMuY3R4LmRyYXdJbWFnZShmb250LmltZywgMCwgMCk7XG5cbiAgICAvLyBSZXR1cm4gYSBuZXcgZm9udCB3aXRoIHRoZSBzYW1lIG1ldGFkYXRhLCBidXQgYSByZWNvbG9yZWQgaW1hZ2VcbiAgICByZXR1cm4ge1xuICAgICAgICAuLi5mb250LFxuICAgICAgICBpbWc6IGNhbnZhcy5jYW52YXNcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBiYWtlRm9udEdsb3coZm9udCwgZ2xvdywgc2NhbGUsIGJvcmRlciwgbWFyZ2luKSB7XG4gICAgLy8gVGhpcyBmdW5jdGlvbiBpcyBhIGxpdHRsZSBjb21wbGljYXRlZCBiZWNhdXNlIGl0IGhhcyB0byBkbyBzZXZlcmFsIHRoaW5ncyBhdCBvbmNlLlxuICAgIC8vXG4gICAgLy8gVGhlIGlkZWEgaXM6XG4gICAgLy8gIC0gVGFrZSBvdXIgb3JpZ2luYWwgc2hlZXQgb2YgOHgxNiBjaGFyYWN0ZXJzXG4gICAgLy8gIC0gQnVpbGQgYSBORVcgc2hlZXQsIHdpdGggYWRkaXRpb25hbCBcImJvcmRlclwiIGFyb3VuZCBlYWNoIGNoYXJhY3Rlciwgc28gdGhhdCB0aGVyZSBpc1xuICAgIC8vICAgIHJvb20gZm9yIHVzIHRvIGFkZCBhIGdsb3cgYXJvdW5kIGVhY2ggY2hhcmFjdGVyIHdpdGhvdXQgYmxlZWRpbmcgaW50byBvdXIgbmVpZ2hib3JzLlxuICAgIC8vICAtIFdlIHdhbnQgdGhlIGdsb3cgYmFrZWQgaW4gYXQgYW4gdXBzY2FsZWQgcGl4ZWwgc2l6ZS5cbiAgICAvL1xuICAgIC8vIFdoYXQgaXMgdGhlIHVwc2NhbGVkIHBpeGVsIHNpemU/IEhlcmUgZm9yIGV4YW1wbGUsIHdlIGFyZSBzY2FsaW5nIHVwIGZyb20gOHgxNiBwaXhlbHNcbiAgICAvLyB0byAzMng2NCBwaXhlbHMgZm9yIGVhY2ggY2hhcmFjdGVycy4gV2UgdGhlbiB3YW50IHRoZSBHTE9XIGFkZGVkIGFyb3VuZCB0aGlzIG5ld1xuICAgIC8vIDMyeDY0IGNoYXJhY3Rlciwgbm90IHRoZSBvcmlnaW5hbCBzaXplICh0aGlzIGFsbG93cyB1cyB0byBoYXZlIGEgZ2xvdyBtb3JlIHRpZ2h0IHRoYW5cbiAgICAvLyB0aGUgb3JpZ2luYWwgY2h1bmt5IHBpeGVscyB3ZSBzdGFydGVkIHdpdGgpLlxuICAgIC8vXG4gICAgLy8gQSBjb21wbGljYXRpb24gb2YgSFRNTCBDYW52YXMgaXMgdGhhdCBpZiB5b3UgZHJhdyBmcm9tIGEgc291cmNlIGNhbnZhcyBpbnRvIGEgZGVzdGluYXRpb25cbiAgICAvLyBjYW52YXMgYXQgYSBoaWdoZXIgc2NhbGUsIHlvdSB3aWxsIFwiYmxlZWRcIiBuZWlnaGJvcmluZyBwaXhlbHMgZnJvbSB0aGUgc291cmNlIGNhbnZhcy5cbiAgICAvLyBUbyBhdm9pZCB0aGlzLCB3ZSB1c2UgYSBzZWNvbmQgdGVtcG9yYXJ5IGNhbnZhcyBhbmQgZHJhdyBmcm9tIHRoZSBzb3VyY2UgaW50byB0aGUgdGVtcG9yYXJ5XG4gICAgLy8gY2FudmFzIHdpdGggbm8gdXBzY2FsaW5nLCB0aGVuIHdlIGRyYXcgZnJvbSB0aGUgdGVtcG9yYXJ5IGNhbnZhcyBpbnRvIHRoZSB1cHNjYWxlZCBjYW52YXMuXG4gICAgLy9cbiAgICAvLyAoVGhpcyBtZWFucyBkb3VibGUgdGhlIGRyYXdzLCBidXQgd2Ugb25seSBkbyB0aGlzIHN0ZXAgb25jZSB3aGVuIHRoZSBnYW1lIGxvYWRzLCBzbyBpdCdzXG4gICAgLy8gbm90IGEgYmlnIGRlYWwuKVxuICAgIGxldCBjb2xzID0gZm9udC5pbWcud2lkdGggLyBDSEFSX1dJRFRILCByb3dzID0gZm9udC5pbWcuaGVpZ2h0IC8gQ0hBUl9IRUlHSFQ7XG5cbiAgICBsZXQgdGVtcCA9IGNyZWF0ZUNhbnZhcyhDSEFSX1dJRFRILCBDSEFSX0hFSUdIVCk7XG4gICAgbGV0IGNhbnZhcyA9IGNyZWF0ZUNhbnZhcyhcbiAgICAgICAgY29scyAqIChDSEFSX1dJRFRIICsgYm9yZGVyKSAqIHNjYWxlLFxuICAgICAgICByb3dzICogKENIQVJfSEVJR0hUICsgYm9yZGVyKSAqIHNjYWxlXG4gICAgKVxuXG4gICAgZm9yIChsZXQgeSA9IDA7IHkgPCByb3dzOyB5KyspIHtcbiAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCBjb2xzOyB4KyspIHtcbiAgICAgICAgICAgIC8vIEdsb3cgKHJlbmRlcmVkIG9uIGFsbCA0IHNpZGVzKVxuICAgICAgICAgICAgdGVtcC5jdHguY2xlYXJSZWN0KDAsIDAsIENIQVJfV0lEVEgsIENIQVJfSEVJR0hUKTtcbiAgICAgICAgICAgIHRlbXAuY3R4LmRyYXdJbWFnZShcbiAgICAgICAgICAgICAgICBnbG93LmltZyxcbiAgICAgICAgICAgICAgICB4ICogQ0hBUl9XSURUSCxcbiAgICAgICAgICAgICAgICB5ICogQ0hBUl9IRUlHSFQsXG4gICAgICAgICAgICAgICAgQ0hBUl9XSURUSCxcbiAgICAgICAgICAgICAgICBDSEFSX0hFSUdIVCxcbiAgICAgICAgICAgICAgICAwLCAwLFxuICAgICAgICAgICAgICAgIENIQVJfV0lEVEgsXG4gICAgICAgICAgICAgICAgQ0hBUl9IRUlHSFRcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjYW52YXMuY3R4LmRyYXdJbWFnZShcbiAgICAgICAgICAgICAgICB0ZW1wLmNhbnZhcyxcbiAgICAgICAgICAgICAgICAwLCAwLFxuICAgICAgICAgICAgICAgIENIQVJfV0lEVEgsXG4gICAgICAgICAgICAgICAgQ0hBUl9IRUlHSFQsXG4gICAgICAgICAgICAgICAgeCAqIChDSEFSX1dJRFRIICsgYm9yZGVyKSAqIHNjYWxlICsgbWFyZ2luLFxuICAgICAgICAgICAgICAgIHkgKiAoQ0hBUl9IRUlHSFQgKyBib3JkZXIpICogc2NhbGUsXG4gICAgICAgICAgICAgICAgQ0hBUl9XSURUSCAqIHNjYWxlLFxuICAgICAgICAgICAgICAgIENIQVJfSEVJR0hUICogc2NhbGVcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjYW52YXMuY3R4LmRyYXdJbWFnZShcbiAgICAgICAgICAgICAgICB0ZW1wLmNhbnZhcyxcbiAgICAgICAgICAgICAgICAwLCAwLFxuICAgICAgICAgICAgICAgIENIQVJfV0lEVEgsXG4gICAgICAgICAgICAgICAgQ0hBUl9IRUlHSFQsXG4gICAgICAgICAgICAgICAgeCAqIChDSEFSX1dJRFRIICsgYm9yZGVyKSAqIHNjYWxlLFxuICAgICAgICAgICAgICAgIHkgKiAoQ0hBUl9IRUlHSFQgKyBib3JkZXIpICogc2NhbGUgKyBtYXJnaW4sXG4gICAgICAgICAgICAgICAgQ0hBUl9XSURUSCAqIHNjYWxlLFxuICAgICAgICAgICAgICAgIENIQVJfSEVJR0hUICogc2NhbGVcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjYW52YXMuY3R4LmRyYXdJbWFnZShcbiAgICAgICAgICAgICAgICB0ZW1wLmNhbnZhcyxcbiAgICAgICAgICAgICAgICAwLCAwLFxuICAgICAgICAgICAgICAgIENIQVJfV0lEVEgsXG4gICAgICAgICAgICAgICAgQ0hBUl9IRUlHSFQsXG4gICAgICAgICAgICAgICAgeCAqIChDSEFSX1dJRFRIICsgYm9yZGVyKSAqIHNjYWxlICsgbWFyZ2luICogMixcbiAgICAgICAgICAgICAgICB5ICogKENIQVJfSEVJR0hUICsgYm9yZGVyKSAqIHNjYWxlICsgbWFyZ2luLFxuICAgICAgICAgICAgICAgIENIQVJfV0lEVEggKiBzY2FsZSxcbiAgICAgICAgICAgICAgICBDSEFSX0hFSUdIVCAqIHNjYWxlXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgY2FudmFzLmN0eC5kcmF3SW1hZ2UoXG4gICAgICAgICAgICAgICAgdGVtcC5jYW52YXMsXG4gICAgICAgICAgICAgICAgMCwgMCxcbiAgICAgICAgICAgICAgICBDSEFSX1dJRFRILFxuICAgICAgICAgICAgICAgIENIQVJfSEVJR0hULFxuICAgICAgICAgICAgICAgIHggKiAoQ0hBUl9XSURUSCArIGJvcmRlcikgKiBzY2FsZSArIG1hcmdpbixcbiAgICAgICAgICAgICAgICB5ICogKENIQVJfSEVJR0hUICsgYm9yZGVyKSAqIHNjYWxlICsgbWFyZ2luICogMixcbiAgICAgICAgICAgICAgICBDSEFSX1dJRFRIICogc2NhbGUsXG4gICAgICAgICAgICAgICAgQ0hBUl9IRUlHSFQgKiBzY2FsZVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgLy8gQ2VudGVyIGNoYXJhY3RlclxuICAgICAgICAgICAgdGVtcC5jdHguY2xlYXJSZWN0KDAsIDAsIENIQVJfV0lEVEgsIENIQVJfSEVJR0hUKTtcbiAgICAgICAgICAgIHRlbXAuY3R4LmRyYXdJbWFnZShcbiAgICAgICAgICAgICAgICBmb250LmltZyxcbiAgICAgICAgICAgICAgICB4ICogQ0hBUl9XSURUSCxcbiAgICAgICAgICAgICAgICB5ICogQ0hBUl9IRUlHSFQsXG4gICAgICAgICAgICAgICAgQ0hBUl9XSURUSCxcbiAgICAgICAgICAgICAgICBDSEFSX0hFSUdIVCxcbiAgICAgICAgICAgICAgICAwLCAwLFxuICAgICAgICAgICAgICAgIENIQVJfV0lEVEgsXG4gICAgICAgICAgICAgICAgQ0hBUl9IRUlHSFRcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjYW52YXMuY3R4LmRyYXdJbWFnZShcbiAgICAgICAgICAgICAgICB0ZW1wLmNhbnZhcyxcbiAgICAgICAgICAgICAgICAwLCAwLFxuICAgICAgICAgICAgICAgIENIQVJfV0lEVEgsXG4gICAgICAgICAgICAgICAgQ0hBUl9IRUlHSFQsXG4gICAgICAgICAgICAgICAgeCAqIChDSEFSX1dJRFRIICsgYm9yZGVyKSAqIHNjYWxlICsgbWFyZ2luLFxuICAgICAgICAgICAgICAgIHkgKiAoQ0hBUl9IRUlHSFQgKyBib3JkZXIpICogc2NhbGUgKyBtYXJnaW4sXG4gICAgICAgICAgICAgICAgQ0hBUl9XSURUSCAqIHNjYWxlLFxuICAgICAgICAgICAgICAgIENIQVJfSEVJR0hUICogc2NhbGVcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4geyBpbWc6IGNhbnZhcy5jYW52YXMsIHNjYWxlLCBib3JkZXIsIG1hcmdpbiB9O1xufVxuIiwiLy8genpmeCgpIC0gdGhlIHVuaXZlcnNhbCBlbnRyeSBwb2ludCAtLSByZXR1cm5zIGEgQXVkaW9CdWZmZXJTb3VyY2VOb2RlXG5leHBvcnQgY29uc3QgenpmeD0oLi4udCk9Pnp6ZnhQKHp6ZnhHKC4uLnQpKVxuXG4vLyB6emZ4UCgpIC0gdGhlIHNvdW5kIHBsYXllciAtLSByZXR1cm5zIGEgQXVkaW9CdWZmZXJTb3VyY2VOb2RlXG5leHBvcnQgY29uc3QgenpmeFA9KC4uLnQpPT57bGV0IGU9enpmeFguY3JlYXRlQnVmZmVyU291cmNlKCksZj16emZ4WC5jcmVhdGVCdWZmZXIodC5sZW5ndGgsdFswXS5sZW5ndGgsenpmeFIpO3QubWFwKChkLGkpPT5mLmdldENoYW5uZWxEYXRhKGkpLnNldChkKSksZS5idWZmZXI9ZixlLmNvbm5lY3QoenpmeC5kZXN0aW5hdGlvbl8pLGUuc3RhcnQoKTtyZXR1cm4gZX1cblxuLy8genpmeEcoKSAtIHRoZSBzb3VuZCBnZW5lcmF0b3IgLS0gcmV0dXJucyBhbiBhcnJheSBvZiBzYW1wbGUgZGF0YVxuZXhwb3J0IGNvbnN0IHp6ZnhHPShxPTEsaz0uMDUsYz0yMjAsZT0wLHQ9MCx1PS4xLHI9MCxGPTEsdj0wLHo9MCx3PTAsQT0wLGw9MCxCPTAseD0wLEc9MCxkPTAseT0xLG09MCxDPTApPT57bGV0IGI9MipNYXRoLlBJLEg9dio9NTAwKmIvenpmeFIqKjIsST0oMDx4PzE6LTEpKmIvNCxEPWMqPSgxKzIqaypNYXRoLnJhbmRvbSgpLWspKmIvenpmeFIsWj1bXSxnPTAsRT0wLGE9MCxuPTEsSj0wLEs9MCxmPTAscCxoO2U9OTkrenpmeFIqZTttKj16emZ4Ujt0Kj16emZ4Ujt1Kj16emZ4UjtkKj16emZ4Ujt6Kj01MDAqYi96emZ4UioqMzt4Kj1iL3p6ZnhSO3cqPWIvenpmeFI7QSo9enpmeFI7bD16emZ4UipsfDA7Zm9yKGg9ZSttK3QrdStkfDA7YTxoO1pbYSsrXT1mKSsrSyUoMTAwKkd8MCl8fChmPXI/MTxyPzI8cj8zPHI/TWF0aC5zaW4oKGclYikqKjMpOk1hdGgubWF4KE1hdGgubWluKE1hdGgudGFuKGcpLDEpLC0xKToxLSgyKmcvYiUyKzIpJTI6MS00Kk1hdGguYWJzKE1hdGgucm91bmQoZy9iKS1nL2IpOk1hdGguc2luKGcpLGY9KGw/MS1DK0MqTWF0aC5zaW4oMipNYXRoLlBJKmEvbCk6MSkqKDA8Zj8xOi0xKSpNYXRoLmFicyhmKSoqRipxKnp6ZnhWKihhPGU/YS9lOmE8ZSttPzEtKGEtZSkvbSooMS15KTphPGUrbSt0P3k6YTxoLWQ/KGgtYS1kKS91Knk6MCksZj1kP2YvMisoZD5hPzA6KGE8aC1kPzE6KGgtYSkvZCkqWlthLWR8MF0vMik6ZikscD0oYys9dis9eikqTWF0aC5zaW4oRSp4LUkpLGcrPXAtcCpCKigxLTFFOSooTWF0aC5zaW4oYSkrMSklMiksRSs9cC1wKkIqKDEtMUU5KihNYXRoLnNpbihhKSoqMisxKSUyKSxuJiYrK24+QSYmKGMrPXcsRCs9dyxuPTApLCFsfHwrK0olbHx8KGM9RCx2PUgsbj1ufHwxKTtyZXR1cm4gWn1cblxuLy8genpmeFYgLSBnbG9iYWwgdm9sdW1lXG5leHBvcnQgY29uc3QgenpmeFY9LjNcblxuLy8genpmeFIgLSBnbG9iYWwgc2FtcGxlIHJhdGVcbmV4cG9ydCBjb25zdCB6emZ4Uj00NDEwMFxuXG4vLyB6emZ4WCAtIHRoZSBjb21tb24gYXVkaW8gY29udGV4dFxuZXhwb3J0IGNvbnN0IHp6ZnhYPW5ldyh0b3AuQXVkaW9Db250ZXh0fHx3ZWJraXRBdWRpb0NvbnRleHQpO1xuXG4vLyBkZXN0aW5hdGlvbiBmb3IgenpmeCBhbmQgenpmeG0gc291bmRzXG56emZ4LmRlc3RpbmF0aW9uXyA9IHp6ZnhYLmRlc3RpbmF0aW9uO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgeyB6emZ4RywgenpmeFIgfSBmcm9tICcuL3p6ZngnO1xuXG4vKipcbiAqIFp6RlggTXVzaWMgUmVuZGVyZXIgdjIuMC4yIGJ5IEtlaXRoIENsYXJrXG4gKi9cblxuLyoqXG4gKiBAdHlwZWRlZiBDaGFubmVsXG4gKiBAdHlwZSB7QXJyYXkuPE51bWJlcj59XG4gKiBAcHJvcGVydHkge051bWJlcn0gMCAtIENoYW5uZWwgaW5zdHJ1bWVudFxuICogQHByb3BlcnR5IHtOdW1iZXJ9IDEgLSBDaGFubmVsIHBhbm5pbmcgKC0xIHRvICsxKVxuICogQHByb3BlcnR5IHtOdW1iZXJ9IDIgLSBOb3RlXG4gKi9cblxuLyoqXG4gKiBAdHlwZWRlZiBQYXR0ZXJuXG4gKiBAdHlwZSB7QXJyYXkuPENoYW5uZWw+fVxuICovXG5cbi8qKlxuICogQHR5cGVkZWYgSW5zdHJ1bWVudFxuICogQHR5cGUge0FycmF5LjxOdW1iZXI+fSBaekZYIHNvdW5kIHBhcmFtZXRlcnNcbiAqL1xuXG4vKipcbiAqIEdlbmVyYXRlIGEgc29uZ1xuICpcbiAqIEBwYXJhbSB7QXJyYXkuPEluc3RydW1lbnQ+fSBpbnN0cnVtZW50cyAtIEFycmF5IG9mIFp6Rlggc291bmQgcGFyYW1hdGVycy5cbiAqIEBwYXJhbSB7QXJyYXkuPFBhdHRlcm4+fSBwYXR0ZXJucyAtIEFycmF5IG9mIHBhdHRlcm4gZGF0YS5cbiAqIEBwYXJhbSB7QXJyYXkuPE51bWJlcj59IHNlcXVlbmNlIC0gQXJyYXkgb2YgcGF0dGVybiBpbmRleGVzLlxuICogQHBhcmFtIHtOdW1iZXJ9IFtzcGVlZD0xMjVdIC0gUGxheWJhY2sgc3BlZWQgb2YgdGhlIHNvbmcgKGluIEJQTSkuXG4gKiBAcmV0dXJucyB7QXJyYXkuPEFycmF5LjxOdW1iZXI+Pn0gTGVmdCBhbmQgcmlnaHQgY2hhbm5lbCBzYW1wbGUgZGF0YS5cbiAqL1xuXG5leHBvcnQgY29uc3QgenpmeE0gPSAoaW5zdHJ1bWVudHMsIHBhdHRlcm5zLCBzZXF1ZW5jZSwgQlBNID0gMTI1KSA9PiB7XG4gICAgbGV0IGluc3RydW1lbnRQYXJhbWV0ZXJzLFxuICAgICAgICBpLFxuICAgICAgICBqLFxuICAgICAgICBrLFxuICAgICAgICBub3RlLFxuICAgICAgICBzYW1wbGUsXG4gICAgICAgIHBhdHRlcm5DaGFubmVsLFxuICAgICAgICBub3RGaXJzdEJlYXQsXG4gICAgICAgIHN0b3AsXG4gICAgICAgIGluc3RydW1lbnQsXG4gICAgICAgIHBpdGNoLFxuICAgICAgICBhdHRlbnVhdGlvbixcbiAgICAgICAgb3V0U2FtcGxlT2Zmc2V0LFxuICAgICAgICBzYW1wbGVPZmZzZXQsXG4gICAgICAgIG5leHRTYW1wbGVPZmZzZXQsXG4gICAgICAgIHNhbXBsZUJ1ZmZlciA9IFtdLFxuICAgICAgICBsZWZ0Q2hhbm5lbEJ1ZmZlciA9IFtdLFxuICAgICAgICByaWdodENoYW5uZWxCdWZmZXIgPSBbXSxcbiAgICAgICAgY2hhbm5lbEluZGV4ID0gMCxcbiAgICAgICAgcGFubmluZyxcbiAgICAgICAgaGFzTW9yZSA9IDEsXG4gICAgICAgIHNhbXBsZUNhY2hlID0ge30sXG4gICAgICAgIGJlYXRMZW5ndGggPSAoKHp6ZnhSIC8gQlBNKSAqIDYwKSA+PiAyO1xuXG4gICAgLy8gZm9yIGVhY2ggY2hhbm5lbCBpbiBvcmRlciB1bnRpbCB0aGVyZSBhcmUgbm8gbW9yZVxuICAgIGZvciAoOyBoYXNNb3JlOyBjaGFubmVsSW5kZXgrKykge1xuICAgICAgICAvLyByZXNldCBjdXJyZW50IHZhbHVlc1xuICAgICAgICBzYW1wbGVCdWZmZXIgPSBbKGhhc01vcmUgPSBub3RGaXJzdEJlYXQgPSBwaXRjaCA9IG91dFNhbXBsZU9mZnNldCA9IDApXTtcblxuICAgICAgICAvLyBmb3IgZWFjaCBwYXR0ZXJuIGluIHNlcXVlbmNlXG4gICAgICAgIHNlcXVlbmNlLm1hcCgocGF0dGVybkluZGV4LCBzZXF1ZW5jZUluZGV4KSA9PiB7XG4gICAgICAgICAgICAvLyBnZXQgcGF0dGVybiBmb3IgY3VycmVudCBjaGFubmVsLCB1c2UgZW1wdHkgMSBub3RlIHBhdHRlcm4gaWYgbm9uZSBmb3VuZFxuICAgICAgICAgICAgcGF0dGVybkNoYW5uZWwgPSBwYXR0ZXJuc1twYXR0ZXJuSW5kZXhdW2NoYW5uZWxJbmRleF0gfHwgWzAsIDAsIDBdO1xuXG4gICAgICAgICAgICAvLyBjaGVjayBpZiB0aGVyZSBhcmUgbW9yZSBjaGFubmVsc1xuICAgICAgICAgICAgaGFzTW9yZSB8PSAhIXBhdHRlcm5zW3BhdHRlcm5JbmRleF1bY2hhbm5lbEluZGV4XTtcblxuICAgICAgICAgICAgLy8gZ2V0IG5leHQgb2Zmc2V0LCB1c2UgdGhlIGxlbmd0aCBvZiBmaXJzdCBjaGFubmVsXG4gICAgICAgICAgICBuZXh0U2FtcGxlT2Zmc2V0ID1cbiAgICAgICAgICAgICAgICBvdXRTYW1wbGVPZmZzZXQgK1xuICAgICAgICAgICAgICAgIChwYXR0ZXJuc1twYXR0ZXJuSW5kZXhdWzBdLmxlbmd0aCAtIDIgLSAhbm90Rmlyc3RCZWF0KSAqXG4gICAgICAgICAgICAgICAgICAgIGJlYXRMZW5ndGg7XG5cbiAgICAgICAgICAgIC8vIGZvciBlYWNoIGJlYXQgaW4gcGF0dGVybiwgcGx1cyBvbmUgZXh0cmEgaWYgZW5kIG9mIHNlcXVlbmNlXG4gICAgICAgICAgICBmb3IgKFxuICAgICAgICAgICAgICAgIGkgPSAyLCBrID0gb3V0U2FtcGxlT2Zmc2V0O1xuICAgICAgICAgICAgICAgIGkgPFxuICAgICAgICAgICAgICAgIHBhdHRlcm5DaGFubmVsLmxlbmd0aCArIChzZXF1ZW5jZUluZGV4ID09IHNlcXVlbmNlLmxlbmd0aCAtIDEpO1xuICAgICAgICAgICAgICAgIG5vdEZpcnN0QmVhdCA9ICsraVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgLy8gPGNoYW5uZWwtbm90ZT5cbiAgICAgICAgICAgICAgICBub3RlID0gcGF0dGVybkNoYW5uZWxbaV07XG5cbiAgICAgICAgICAgICAgICAvLyBzdG9wIGlmIGRpZmZlcmVudCBpbnN0cnVtZW50IG9yIG5ldyBub3RlXG4gICAgICAgICAgICAgICAgc3RvcCA9IChpbnN0cnVtZW50ICE9IChwYXR0ZXJuQ2hhbm5lbFswXSB8fCAwKSkgfCBub3RlIHwgMDtcblxuICAgICAgICAgICAgICAgIC8vIGZpbGwgYnVmZmVyIHdpdGggc2FtcGxlcyBmb3IgcHJldmlvdXMgYmVhdCwgbW9zdCBjcHUgaW50ZW5zaXZlIHBhcnRcbiAgICAgICAgICAgICAgICBmb3IgKFxuICAgICAgICAgICAgICAgICAgICBqID0gMDtcbiAgICAgICAgICAgICAgICAgICAgaiA8IGJlYXRMZW5ndGggJiYgbm90Rmlyc3RCZWF0O1xuICAgICAgICAgICAgICAgICAgICAvLyBmYWRlIG9mZiBhdHRlbnVhdGlvbiBhdCBlbmQgb2YgYmVhdCBpZiBzdG9wcGluZyBub3RlLCBwcmV2ZW50cyBjbGlja2luZ1xuICAgICAgICAgICAgICAgICAgICBqKysgPiBiZWF0TGVuZ3RoIC0gOTkgJiYgc3RvcFxuICAgICAgICAgICAgICAgICAgICAgICAgPyAoYXR0ZW51YXRpb24gKz0gKGF0dGVudWF0aW9uIDwgMSkgLyA5OSlcbiAgICAgICAgICAgICAgICAgICAgICAgIDogMFxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAvLyBjb3B5IHNhbXBsZSB0byBzdGVyZW8gYnVmZmVycyB3aXRoIHBhbm5pbmdcbiAgICAgICAgICAgICAgICAgICAgc2FtcGxlID1cbiAgICAgICAgICAgICAgICAgICAgICAgICgoMSAtIGF0dGVudWF0aW9uKSAqIHNhbXBsZUJ1ZmZlcltzYW1wbGVPZmZzZXQrK10pIC9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAyIHx8IDA7XG4gICAgICAgICAgICAgICAgICAgIGxlZnRDaGFubmVsQnVmZmVyW2tdID1cbiAgICAgICAgICAgICAgICAgICAgICAgIChsZWZ0Q2hhbm5lbEJ1ZmZlcltrXSB8fCAwKSArIHNhbXBsZSAqIHBhbm5pbmcgLSBzYW1wbGU7XG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0Q2hhbm5lbEJ1ZmZlcltrXSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAocmlnaHRDaGFubmVsQnVmZmVyW2srK10gfHwgMCkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgc2FtcGxlICogcGFubmluZyArXG4gICAgICAgICAgICAgICAgICAgICAgICBzYW1wbGU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gc2V0IHVwIGZvciBuZXh0IG5vdGVcbiAgICAgICAgICAgICAgICBpZiAobm90ZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBzZXQgYXR0ZW51YXRpb25cbiAgICAgICAgICAgICAgICAgICAgYXR0ZW51YXRpb24gPSBub3RlICUgMTtcbiAgICAgICAgICAgICAgICAgICAgcGFubmluZyA9IHBhdHRlcm5DaGFubmVsWzFdIHx8IDA7XG4gICAgICAgICAgICAgICAgICAgIGlmICgobm90ZSB8PSAwKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZ2V0IGNhY2hlZCBzYW1wbGVcbiAgICAgICAgICAgICAgICAgICAgICAgIHNhbXBsZUJ1ZmZlciA9IHNhbXBsZUNhY2hlW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGluc3RydW1lbnQgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0dGVybkNoYW5uZWxbKHNhbXBsZU9mZnNldCA9IDApXSB8fCAwKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgICAgIF0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNhbXBsZUNhY2hlW1tpbnN0cnVtZW50LCBub3RlXV0gfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhZGQgc2FtcGxlIHRvIGNhY2hlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKChpbnN0cnVtZW50UGFyYW1ldGVycyA9IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uaW5zdHJ1bWVudHNbaW5zdHJ1bWVudF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoaW5zdHJ1bWVudFBhcmFtZXRlcnNbMl0gKj1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMiAqKiAoKG5vdGUgLSAxMikgLyAxMikpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHp6ZnhHKC4uLmluc3RydW1lbnRQYXJhbWV0ZXJzKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHVwZGF0ZSB0aGUgc2FtcGxlIG9mZnNldFxuICAgICAgICAgICAgb3V0U2FtcGxlT2Zmc2V0ID0gbmV4dFNhbXBsZU9mZnNldDtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIFtsZWZ0Q2hhbm5lbEJ1ZmZlciwgcmlnaHRDaGFubmVsQnVmZmVyXTtcbn07XG4iLCJleHBvcnQgY29uc3QgT2JsaXF1ZU15c3RpcXVlID0gW1tbMS4zLDAsMjMsLCwuMiwzLDVdLFsxLjUsMCw0ZTMsLCwuMDMsMiwxLjI1LCwsLCwuMDIsNi44LC0uMywsLjVdLFsuNywwLDIxMDAsLCwuMiwzLDMsLCwtNDAwLCwsMl0sWywwLDY1NSwsLC4xMSwyLDEuNjUsLCwsLCwzLjgsLS4xLC4xXV0sW1tbLC0uNSwxMywsLCwsLDEzLCwsLCwsMTMsLCwsLCwxMywsLCwsLDEzLCwsLDE0LCwsLDEzLCwsLCwsMTMsLCwsLCwxMywsLCwsLDEzLCwsLCwsMTMsLCwsMTQsLCwsXSxbMSwuMywxMywsMTMsLDEzLCwxMywsLCwxMywsMTMsLDEzLCwxMywsMTMsLCwsMTMsLDEzLCwxMywsMTMsLDEzLCwxMywsMTMsLDEzLCwxMywsLCwxMywsMTMsLDEzLCwxMywsMTMsLCwsMTMsLDEzLCwxMywsMTMsLDEzLCxdLFsyLDEsLCwsLCwsLCwxMywsLCwsLCwsLCwsLDEzLCwsLCwsLCwsLCwsLCwsLCwsLCwxMywsLCwsLCwsLCwsLDEzLCwsLCwsLCwsLCwsXSxbLC42LCwsLCwxMywsMTgsLDE5LCwsLCwsLCwxOSwsMTgsLCwsMTYsLCwsMTMsLCwsLCwsLCwsMTMsLDE4LCwxOSwsLCwsLCwsMTgsMTksMTgsLCwsMTMsMTQsMTMsLDE2LCwxOCwsMTksLF0sWzMsLTEsLCwxMywsLCwsLCwsLCwsLDEzLCwsLCwsLCwsLCwsLCwsLCwsLCwxMywsLCwsLCwsLCwsLDEzLCwsLCwsLCwsLCwsLCwxMywxMywxMywxM11dLFtbLC0uNSwxMywsLCwsLDEzLCwsLCwsMTMsLCwsLCwxMywsLCwsLDEzLCwsLDE0LCwsLDEzLCwsLCwsMTMsLCwsLCwxMywsLCwsLDEzLCwsLCwsMTMsLCwsMTQsLCwsXSxbMSwuMywxMywsMTMsLDEzLCwxMywsLCwxMywsMTMsLDEzLCwxMywsMTMsLCwsMTMsLDEzLCwxMywsMTMsLDEzLCwxMywsMTMsLDEzLCwxMywsLCwxMywsMTMsLDEzLCwxMywsMTMsLCwsMTMsLDEzLCwxMywsMTMsLDEzLCxdLFsyLDEsLCwsLCwsLCwxMywsLCwsLCwsLCwsLDEzLCwsLCwsLCwsLCwsLCwsLCwsLCwxMywsLCwsLCwsLCwsLDEzLCwsLCwsLCwsLCwsXV1dLFsxLDEsMCwwLDAsMCwxLDBdLCxdXG4iLCIndXNlIHN0cmljdCc7XG5cbmltcG9ydCB7IHp6ZngsIHp6ZnhQLCB6emZ4WCB9IGZyb20gJy4vbGliL3p6ZngnO1xuaW1wb3J0IHsgenpmeE0gfSBmcm9tICcuL2xpYi96emZ4bSc7XG5pbXBvcnQgeyBPYmxpcXVlTXlzdGlxdWUgfSBmcm9tICcuL3NvbmdzL09ibGlxdWVNeXN0aXF1ZSc7XG5cbmV4cG9ydCBjb25zdCBBdWRpbyA9IHtcbiAgICBpbml0KCkge1xuICAgICAgICBBdWRpby5yZWFkeVRvUGxheSA9IGZhbHNlO1xuXG4gICAgICAgIEF1ZGlvLmN0eCA9IHp6ZnhYO1xuICAgICAgICBBdWRpby5nYWluXyA9IEF1ZGlvLmN0eC5jcmVhdGVHYWluKCk7XG4gICAgICAgIEF1ZGlvLmdhaW5fLmNvbm5lY3QoQXVkaW8uY3R4LmRlc3RpbmF0aW9uKTtcbiAgICAgICAgenpmeC5kZXN0aW5hdGlvbl8gPSBBdWRpby5nYWluXztcblxuICAgICAgICBBdWRpby5zaG90Z3VuID0gWywwLjAxLDE0MCwwLjAxLDAuMDIsMC40NSw0LDIuNDIsMC4xLC0wLjEsLCwsMS4yLCwwLjMsMC4wNCwwLjgsMC4wMl07XG4gICAgICAgIEF1ZGlvLnBhZ2UgPSBbLCwxMjMzLCwuMDEsLjIsMSwxLjQzLCwsNTM5LC4xLCwsLCwsLjUxLC4wMywuMDFdO1xuICAgICAgICBBdWRpby5zaGVsbFJlbG9hZCA9IFssLDY4LDAuMDEsLDAuMTQsMSwxLjUzLDcuNSwwLjEsNTAsMC4wMiwtMC4wMSwtMC4yLDAuMSwwLjIsLDAuNDcsMC4wMV07XG4gICAgICAgIEF1ZGlvLmRhbWFnZSA9IFssLDM5MSwsLjE5LC4wMSwyLC41NCwtNCwyMCwsLCwsLCwuMDIsLjldO1xuICAgICAgICBBdWRpby5hbGFybSA9IFssLDk3MCwuMTIsLjI1LC4zNSwsLjM5LDguMSwsMTAsLjEsLjIsLC4xLCwsLjYsLjA5LC4xM107XG4gICAgICAgIC8vIFssLDk2MSwuMDUsLjA2LDEuMTcsMSw0LjY3LC44LCwsLCwuOCwtMC44LC4xLC40OSwuNjIsLjA5XTtcbiAgICAgICAgQXVkaW8udmljdG9yeSA9IFssLDQ1NCwuMDYsLjg2LC43MSwyLC42MywtMC43LDEuNywtODMsLjA5LC4yNywuMywuMiwsLjE4LC45NSwuMDIsLjAyXTtcbiAgICAgICAgQXVkaW8uc29uZyA9IHp6ZnhNKC4uLk9ibGlxdWVNeXN0aXF1ZSk7XG5cbiAgICAgICAgLy8gU2F2ZSBvdXIgYmFja2dyb3VuZCBtdXNpYyBpbiBvczEzaywgZm9yIGZ1biFcbiAgICAgICAgLy9sb2NhbFN0b3JhZ2VbYE9TMTNrTXVzaWMsJHtUSVRMRX0gLSBPYmxpcXVlIE15c3RpcXVlYF0gPSBKU09OLnN0cmluZ2lmeShPYmxpcXVlTXlzdGlxdWUpO1xuICAgIH0sXG5cbiAgICB1cGRhdGUoKSB7XG4gICAgICAgIGlmICghQXVkaW8ucmVhZHlUb1BsYXkpIHJldHVybjtcblxuICAgICAgICBpZiAoIUF1ZGlvLm11c2ljUGxheWluZykge1xuICAgICAgICAgICAgLy9BdWRpby5iZ211c2ljbm9kZSA9IHp6ZnhQKC4uLkF1ZGlvLnNvbmcpO1xuICAgICAgICAgICAgLy9BdWRpby5iZ211c2ljbm9kZS5sb29wID0gdHJ1ZTtcbiAgICAgICAgICAgIEF1ZGlvLm11c2ljUGxheWluZyA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgcGxheShzb3VuZCkge1xuICAgICAgICBpZiAoIUF1ZGlvLnJlYWR5VG9QbGF5KSByZXR1cm47XG4gICAgICAgIHp6ZngoLi4uc291bmQpO1xuICAgIH0sXG5cbiAgICAvLyBJdCdzIGltcG9ydGFudCB3ZSBkbyBwYXVzaW5nIGFuZCB1bnBhdXNpbmcgYXMgc3BlY2lmaWMgZXZlbnRzIGFuZCBub3QgaW4gZ2VuZXJhbCB1cGRhdGUoKSxcbiAgICAvLyBiZWNhdXNlIHVwZGF0ZSgpIGlzIHRyaWdnZXJlZCBieSB0aGUgYW5pbWF0aW9uIGZyYW1lIHRyaWdnZXIgd2hpY2ggZG9lcyBub3QgcnVuIGlmIHRoZVxuICAgIC8vIHBhZ2UgaXMgbm90IHZpc2libGUuIChTbywgaWYgeW91IHdhbnQgdGhlIG11c2ljIHRvIGZhZGUgaW4gdGhlIGJhY2tncm91bmQsIGZvciBleGFtcGxlLFxuICAgIC8vIHRoYXQncyBub3QgaGVscGZ1bCBpZiBpdCB3b24ndCB3b3JrIGJlY2F1c2UgeW91IGFyZW4ndCBsb29raW5nIGF0IHRoZSBwYWdlISlcblxuICAgIHBhdXNlKCkge1xuICAgICAgICBBdWRpby5nYWluXy5nYWluLmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKDAsIEF1ZGlvLmN0eC5jdXJyZW50VGltZSArIDEpO1xuICAgIH0sXG5cbiAgICB1bnBhdXNlKCkge1xuICAgICAgICBBdWRpby5nYWluXy5nYWluLmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKDEsIEF1ZGlvLmN0eC5jdXJyZW50VGltZSArIDEpO1xuICAgIH1cbn07XG4iLCIvKipcbiAqIGBTY3JlZW5gIGlzIGEgc2luZ2xldG9uIHRoYXQgcmVwcmVzZW50cyB0aGUgdmlydHVhbCA4MHgyNSBjaGFyYWN0ZXIgc2NyZWVuIG91ciBnYW1lXG4gKiBsaXZlcyBpbi4gQ29tcG9uZW50cyBsaWtlIFBsYXlpbmdGaWVsZCB3aWxsIFwiZHJhd1wiICh3cml0ZSB0ZXh0IG9udG8pIHRoaXMgdmlydHVhbFxuICogc2NyZWVuIGVhY2ggZnJhbWUuIE9uY2UgYWxsIHRoZSB0ZXh0IGlzIHdyaXR0ZW4sIHRoZSB0ZXh0IHdpbGwgZW5kIHVwIHJlbmRlcmVkIG9uXG4gKiB0aGUgdmlld3BvcnQgKGNhbnZhcykgaW4gdGhlIGJyb3dzZXIuXG4gKi9cblxuaW1wb3J0IHsgU0NSRUVOX1dJRFRILCBTQ1JFRU5fSEVJR0hUIH0gZnJvbSAnLi9Db25zdGFudHMnO1xuaW1wb3J0IHsgVmlld3BvcnQgfSBmcm9tICcuL1ZpZXdwb3J0JztcbmltcG9ydCB7IFRleHQgfSBmcm9tICcuL1RleHQnO1xuXG5leHBvcnQgY29uc3QgU2NyZWVuID0ge1xuICAgIGluaXQoKSB7XG4gICAgICAgIHRoaXMuc2NyZWVuID0gW107XG4gICAgICAgIGZvciAobGV0IHkgPSAwOyB5IDwgU0NSRUVOX0hFSUdIVDsgeSsrKSB7XG4gICAgICAgICAgICB0aGlzLnNjcmVlbi5wdXNoKFtdKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNsZWFyKCk7XG4gICAgfSxcblxuICAgIGNsZWFyKCkge1xuICAgICAgICBmb3IgKGxldCB5ID0gMDsgeSA8IFNDUkVFTl9IRUlHSFQ7IHkrKykge1xuICAgICAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCBTQ1JFRU5fV0lEVEg7IHgrKykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2NyZWVuW3ldW3hdID0gJyAnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcblxuICAgIHdyaXRlKHgsIHksIHRleHQpIHtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHRleHQpKSB0ZXh0ID0gW3RleHRdO1xuXG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGV4dC5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0ZXh0W2pdLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zY3JlZW5beSArIGpdW3ggKyBpXSA9IHRleHRbal1baV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgZHJhdyhjdHgpIHtcbiAgICAgICAgbGV0IHRleHQgPSB0aGlzLnNjcmVlbi5tYXAocm93ID0+IHJvdy5qb2luKCcnKSkuam9pbignXFxuJyk7XG5cbiAgICAgICAgVGV4dC5kcmF3VGV4dChcbiAgICAgICAgICAgIGN0eCxcbiAgICAgICAgICAgIFRleHQuc3BsaXRQYXJhZ3JhcGgodGV4dCwgVmlld3BvcnQud2lkdGgpLFxuICAgICAgICAgICAgMCwgMCxcbiAgICAgICAgICAgIFRleHQuZ2xvd1xuICAgICAgICApO1xuICAgIH1cbn07XG4iLCJpbXBvcnQgeyBTY3JlZW4gfSBmcm9tICcuL1NjcmVlbic7XG5pbXBvcnQgeyBHYW1lIH0gZnJvbSAnLi9HYW1lJztcbmltcG9ydCB7IFBMQVlfU1BFRURTIH0gZnJvbSAnLi9Db25zdGFudHMnO1xuaW1wb3J0IHsgSW5wdXQgfSBmcm9tICcuL0lucHV0JztcblxuZXhwb3J0IGNsYXNzIE1haW5NZW51IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICB9XG5cbiAgICB1cGRhdGUoKSB7XG4gICAgICAgIHN3aXRjaCAoSW5wdXQubGFzdEtleSgpLnRvVXBwZXJDYXNlKCkpIHtcbiAgICAgICAgICAgIGNhc2UgJ1AnOlxuICAgICAgICAgICAgICAgIElucHV0LmNvbnN1bWUoKTtcbiAgICAgICAgICAgICAgICBHYW1lLnN0YXJ0U2Vzc2lvbigpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnTCc6XG4gICAgICAgICAgICAgICAgSW5wdXQuY29uc3VtZSgpO1xuICAgICAgICAgICAgICAgIEdhbWUucGxheVNwZWVkID0gKEdhbWUucGxheVNwZWVkICsgMSkgJSBQTEFZX1NQRUVEUy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdJJzpcbiAgICAgICAgICAgICAgICBJbnB1dC5jb25zdW1lKCk7XG4gICAgICAgICAgICAgICAgR2FtZS5zaG93SW5zdHJ1Y3Rpb25zKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdFJzpcbiAgICAgICAgICAgICAgICBJbnB1dC5jb25zdW1lKCk7XG4gICAgICAgICAgICAgICAgR2FtZS5zaG93SW5zdHJ1Y3Rpb25zKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBkcmF3KCkge1xuICAgICAgICBsZXQgdmVyc2lvbiA9ICc/JztcbiAgICAgICAgbGV0IHRlcm1pbmFsID0gJz8nO1xuXG4gICAgICAgIGxldCBoaWdoU2NvcmVzID0gW1xuICAgICAgICAgICAgYDEpIDYwMDAgIEJvYmAsXG4gICAgICAgICAgICBgMikgNjAwMCAgVG9tYCxcbiAgICAgICAgICAgIGAzKSA0MDAwICBXYXluZWAsXG4gICAgICAgICAgICBgYCxcbiAgICAgICAgICAgIGBgXG4gICAgICAgIF07XG5cbiAgICAgICAgU2NyZWVuLmNsZWFyKCk7XG4gICAgICAgIFNjcmVlbi53cml0ZSgwLCAwLCBbXG4gICAgICAgICAgICBgICAgICAgICAgICAgICAgTEwgICAgICAgICAgICAgICAgICAgICBkZCAgICAgICBkZGAsXG4gICAgICAgICAgICBgICAgICAgICAgICAgICAgTEwgICAgICAgICAgICAgICAgICAgICBkZCAgICAgICBkZCAgICAgICAgICAgICAgICAgICAgICB0bWAsXG4gICAgICAgICAgICBgICAgICAgICAgICAgICAgTEwgICAgICAgICBhYWFhICAgICBkZGRkZCAgICBkZGRkZCAgICBlZWVlICAgcnJycnJycmAsXG4gICAgICAgICAgICBgICAgICAgICAgICAgICAgTEwgICAgICAgIGFhICBhYSAgIGRkICBkZCAgIGRkICBkZCAgIGVlICBlZSAgcnIgICAgcnJgLFxuICAgICAgICAgICAgYCAgICAgICAgICAgICAgIExMICAgICAgICBhYSAgYWEgICBkZCAgZGQgICBkZCAgZGQgICBlZWVlZWUgIHJyYCxcbiAgICAgICAgICAgIGAgICAgICAgICAgICAgICBMTCAgICAgICAgYWEgIGFhICAgZGQgIGRkICAgZGQgIGRkICAgZWUgICAgICBycmAsXG4gICAgICAgICAgICBgICAgICAgICAgICAgICAgTExMTExMTEwgICBhYWEgYWEgICBkZGQgZGQgICBkZGQgZGQgICBlZWVlICAgcnJgLFxuICAgICAgICAgICAgYGAsXG4gICAgICAgICAgICBgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVmVyc2lvbjogICAgJHt2ZXJzaW9ufWAsXG4gICAgICAgICAgICBgKGMpIDE5ODIsIDE5ODMgWWFob28gU29mdHdhcmUgICAgICAgICAgVGVybWluYWw6ICAgJHt0ZXJtaW5hbH1gLFxuICAgICAgICAgICAgYDEwOTcwIEFzaHRvbiBBdmUuICBTdWl0ZSAzMTIgICAgICAgICAgIFBsYXkgc3BlZWQ6ICR7R2FtZS5wbGF5U3BlZWQgKyAxfSAvICR7UExBWV9TUEVFRFMubGVuZ3RofWAsXG4gICAgICAgICAgICBgTG9zIEFuZ2VsZXMsIENhICA5MDAyNCAgICAgICAgICAgICAgICAgTW92ZSA9IOKGkeKGk+KGkOKGki9XQVNELCBKdW1wID0gU3BhY2UsYCxcbiAgICAgICAgICAgIGAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdG9wID0gT3RoZXJgLFxuICAgICAgICAgICAgYGAsXG4gICAgICAgICAgICBgUCA9IFBsYXkgZ2FtZSAgICAgICAgICAgICAgICAgICAgICAgICAgSGlnaCBTY29yZXNgLFxuICAgICAgICAgICAgYEwgPSBDaGFuZ2UgbGV2ZWwgb2YgZGlmZmljdWx0eSAgICAgICAgICR7aGlnaFNjb3Jlc1swXX1gLFxuICAgICAgICAgICAgYEMgPSBDb25maWd1cmUgTGFkZGVyICAgICAgICAgICAgICAgICAgICR7aGlnaFNjb3Jlc1sxXX1gLFxuICAgICAgICAgICAgYEkgPSBJbnN0cnVjdGlvbnMgICAgICAgICAgICAgICAgICAgICAgICR7aGlnaFNjb3Jlc1syXX1gLFxuICAgICAgICAgICAgYEUgPSBFeGl0IExhZGRlciAgICAgICAgICAgICAgICAgICAgICAgICR7aGlnaFNjb3Jlc1szXX1gLFxuICAgICAgICAgICAgYCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7aGlnaFNjb3Jlc1s0XX1gLFxuICAgICAgICAgICAgYGAsXG4gICAgICAgICAgICBgRW50ZXIgb25lIG9mIHRoZSBhYm92ZTpgXG4gICAgICAgIF0pO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IFNjcmVlbiB9IGZyb20gJy4vU2NyZWVuJztcbmltcG9ydCB7IEdhbWUgfSBmcm9tICcuL0dhbWUnO1xuaW1wb3J0IHsgSW5wdXQgfSBmcm9tICcuL0lucHV0JztcblxuZXhwb3J0IGNsYXNzIEluc3RydWN0aW9uc01lbnUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgIH1cblxuICAgIHVwZGF0ZSgpIHtcbiAgICAgICAgaWYgKElucHV0Lmxhc3RLZXkoKS50b1VwcGVyQ2FzZSgpICE9PSAnJykge1xuICAgICAgICAgICAgSW5wdXQuY29uc3VtZSgpO1xuICAgICAgICAgICAgR2FtZS5zaG93TWFpbk1lbnUoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGRyYXcoKSB7XG4gICAgICAgIFNjcmVlbi5jbGVhcigpO1xuICAgICAgICBTY3JlZW4ud3JpdGUoMCwgMCwgW1xuICAgICAgICAgICAgYFlvdSBhcmUgYSBMYWQgdHJhcHBlZCBpbiBhIG1hemUuICBZb3VyIG1pc3Npb24gaXMgaXMgdG8gZXhwbG9yZSB0aGVgLFxuICAgICAgICAgICAgYGRhcmsgY29ycmlkb3JzIG5ldmVyIGJlZm9yZSBzZWVuIGJ5IGh1bWFuIGV5ZXMgYW5kIGZpbmQgaGlkZGVuYCxcbiAgICAgICAgICAgIGB0cmVhc3VyZXMgYW5kIHJpY2hlcy5gLFxuICAgICAgICAgICAgYGAsXG4gICAgICAgICAgICBgWW91IGNvbnRyb2wgTGFkIGJ5IHR5cGluZyB0aGUgZGlyZWN0aW9uIGJ1dHRvbnMgYW5kIGp1bXBpbmcgYnlgLFxuICAgICAgICAgICAgYHR5cGluZyBTUEFDRS4gIEJ1dCBiZXdhcmUgb2YgdGhlIGZhbGxpbmcgcm9ja3MgY2FsbGVkIERlciByb2Nrcy5gLFxuICAgICAgICAgICAgYFlvdSBtdXN0IGZpbmQgYW5kIGdyYXNwIHRoZSB0cmVhc3VyZXMgKHNob3duIGFzICQpIEJFRk9SRSB0aGVgLFxuICAgICAgICAgICAgYGJvbnVzIHRpbWUgcnVucyBvdXQuYCxcbiAgICAgICAgICAgIGBgLFxuICAgICAgICAgICAgYEEgbmV3IExhZCB3aWxsIGJlIGF3YXJkZWQgZm9yIGV2ZXJ5IDEwLDAwMCBwb2ludHMuYCxcbiAgICAgICAgICAgIGBFeHRyYSBwb2ludHMgYXJlIGF3YXJkZWQgZm9yIHRvdWNoaW5nIHRoZSBnb2xkYCxcbiAgICAgICAgICAgIGBzdGF0dWVzIChzaG93biBhcyAmKS4gIFlvdSB3aWxsIHJlY2VpdmUgdGhlIGJvbnVzIHRpbWUgcG9pbnRzYCxcbiAgICAgICAgICAgIGB0aGF0IGFyZSBsZWZ0IHdoZW4geW91IGhhdmUgZmluaXNoZWQgdGhlIGxldmVsLmAsXG4gICAgICAgICAgICBgYCxcbiAgICAgICAgICAgIGBUeXBlIGFuIEVTQ2FwZSB0byBwYXVzZSB0aGUgR2FtZWAsXG4gICAgICAgICAgICBgYCxcbiAgICAgICAgICAgIGBSZW1lbWJlciwgdGhlcmUgaXMgbW9yZSB0aGFuIG9uZSB3YXkgdG8gc2tpbiBhIGNhdC4gKENodW0pYCxcbiAgICAgICAgICAgIGBgLFxuICAgICAgICAgICAgYEdvb2QgbHVjayBMYWQuYCxcbiAgICAgICAgICAgIGBgLFxuICAgICAgICAgICAgYGAsXG4gICAgICAgICAgICBgYCxcbiAgICAgICAgICAgIGBUeXBlIFJFVFVSTiB0byByZXR1cm4gdG8gbWFpbiBtZW51OmBcbiAgICAgICAgXSk7XG4gICAgfVxufVxuIiwiXG4vLyBUaGlzIGlzIG91ciBsaXN0IG9mIFNUQVRFUy4gRWFjaCBlbnRpdHkgc3RhcnRzIG91dCBpbiBvbmUgb2YgdGhlc2Ugc3RhdGVzIGFuZCBjYW4gbW92ZSBiZXR3ZWVuXG4vLyB0aGVtIGJhc2VkIG9uIGV2ZW50cyB0aGF0IGhhcHBlbiBpbiB0aGUgR2FtZSAoTm90ZSB0aGF0IHNvbWUgb2YgdGhlc2UgYXJlIGRpcmVjdGlvbnMsIGJ1dFxuLy8gc2luY2UgYW4gZW50aXR5IGtlZXBzIG1vdmluZyBpbiB0aGUgZGlyZWN0aW9uIGl0IGlzIGdvaW5nIHVubGVzcyBzdG9wcGVkLCBkaXJlY3Rpb25zIGFyZVxuLy8gc3RhdGVzIGluIHRoaXMgR2FtZSlcbmV4cG9ydCBjb25zdCBTdGF0ZSA9IHtcbiAgICBTVE9QUEVEOiAgICAxLCAgICAgICAgIC8vIFN0YW5kaW5nIHN0aWxsXG4gICAgVVA6ICAgICAgICAgMiwgICAgICAgICAvLyBNb3ZpbmcgdXAgKHBsYXllciBvbmx5KVxuICAgIExFRlQ6ICAgICAgIDMsICAgICAgICAgLy8gTW92aW5nIGxlZnRcbiAgICBET1dOOiAgICAgICA0LCAgICAgICAgIC8vIE1vdmluZyBkb3duXG4gICAgUklHSFQ6ICAgICAgNSwgICAgICAgICAvLyBNb3ZpbmcgcmlnaHRcbiAgICBGQUxMSU5HOiAgICA2LCAgICAgICAgIC8vIEZhbGxpbmdcbiAgICBTVEFSVF9KVU1QOiA3LCAgICAgICAgIC8vIEFib3V0IHRvIHN0YXJ0IGEganVtcCAocGxheWVyIG9ubHkpXG4gICAgSlVNUF9MRUZUOiAgOCwgICAgICAgICAvLyBKdW1waW5nIGxlZnQgKHBsYXllciBvbmx5KVxuICAgIEpVTVBfUklHSFQ6IDksICAgICAgICAgLy8gSnVtcGluZyByaWdodCAocGxheWVyIG9ubHkpXG4gICAgSlVNUF9VUDogICAgMTAsICAgICAgICAvLyBKdW1waW5nIHN0cmFpZ2h0IHVwIChwbGF5ZXIgb25seSlcbiAgICBEWUlORzogICAgICAxMSwgICAgICAgIC8vIER5aW5nICh1c2VkIGFzIGEgZGVhdGggYW5pbWF0aW9uKVxuICAgIERFQUQ6ICAgICAgIDEyICAgICAgICAgLy8gRGVhZCAoZm9yIHBsYXllciwgcmVzdGFydCBsZXZlbDsgZm9yIHJvY2ssIGRpc2FwcGVhcilcbn07XG5cbmV4cG9ydCBjb25zdCBKVU1QX0ZSQU1FUyA9IHtcbiAgICBbU3RhdGUuSlVNUF9SSUdIVF06IFtcbiAgICAgICAgeyB4OiAxLCB5OiAtMSB9LFxuICAgICAgICB7IHg6IDEsIHk6IC0xIH0sXG4gICAgICAgIHsgeDogMSwgeTogMCB9LFxuICAgICAgICB7IHg6IDEsIHk6IDAgfSxcbiAgICAgICAgeyB4OiAxLCB5OiAxIH0sXG4gICAgICAgIHsgeDogMSwgeTogMSB9XG4gICAgXSxcbiAgICBbU3RhdGUuSlVNUF9MRUZUXTogW1xuICAgICAgICB7IHg6IC0xLCB5OiAtMSB9LFxuICAgICAgICB7IHg6IC0xLCB5OiAtMSB9LFxuICAgICAgICB7IHg6IC0xLCB5OiAwIH0sXG4gICAgICAgIHsgeDogLTEsIHk6IDAgfSxcbiAgICAgICAgeyB4OiAtMSwgeTogMSB9LFxuICAgICAgICB7IHg6IC0xLCB5OiAxIH1cbiAgICBdLFxuICAgIFtTdGF0ZS5KVU1QX1VQXTogW1xuICAgICAgICB7IHg6IDAsIHk6IC0xIH0sXG4gICAgICAgIHsgeDogMCwgeTogLTEgfSxcbiAgICAgICAgeyB4OiAwLCB5OiAwIH0sXG4gICAgICAgIHsgeDogMCwgeTogMSB9LFxuICAgICAgICB7IHg6IDAsIHk6IDEgfSxcbiAgICAgICAgeyB4OiAwLCB5OiAwIH1cbiAgICBdLFxufTtcbiIsImltcG9ydCB7IFN0YXRlLCBKVU1QX0ZSQU1FUyB9IGZyb20gJy4vQmVoYXZpb3InO1xuaW1wb3J0IHsgTEVWRUxfQ09MUyB9IGZyb20gJy4vQ29uc3RhbnRzJztcblxuZXhwb3J0IGNsYXNzIEVudGl0eSB7XG4gICAgYXBwbHlNb3ZlbWVudChmaWVsZCkge1xuICAgICAgICBsZXQgcmVwZWF0ID0gZmFsc2U7XG5cbiAgICAgICAgLy8gVGhpcyBtZXRob2QgY29udGFpbnMgZ2VuZXJpYyBcIm1vdmVtZW50XCIgYXBwbGljYXRpb24gZm9yIGFsbCBlbnRpdGllcywgaW5jbHVkaW5nXG4gICAgICAgIC8vIExhZCAocGxheWVyKSBhbmQgRGVyIFJvY2tzIChlbmVtaWVzKS4gVGhpbmdzIGxpa2UgZmFsbGluZywgbW92aW5nIGxlZnQvcmlnaHQsIGV0Yy4sXG4gICAgICAgIC8vIHdvcmsgdGhlIHNhbWUgZm9yIGJvdGguXG4gICAgICAgIC8vXG4gICAgICAgIC8vIChUaGVyZSdzIGEgYnVuY2ggb2YganVtcCBsb2dpYyBpbiBoZXJlIHRvbywgYW5kIG1vdmluZyBVUCwgd2hpY2ggcmVhbGx5IG9ubHkgYXBwbGllc1xuICAgICAgICAvLyB0byBwbGF5ZXJzLCBidXQgdGhhdCdzIE9LIC0tIERlciBSb2NrcyBqdXN0IHdvbid0IGF0dGVtcHQgdGhvc2UgYWN0aW9ucy4pXG5cbiAgICAgICAgaWYgKHRoaXMubmV4dFN0YXRlKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHRoaXMuc3RhdGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlIFN0YXRlLlNUT1BQRUQ6XG4gICAgICAgICAgICAgICAgY2FzZSBTdGF0ZS5MRUZUOlxuICAgICAgICAgICAgICAgIGNhc2UgU3RhdGUuUklHSFQ6XG4gICAgICAgICAgICAgICAgICAgIGlmIChbU3RhdGUuTEVGVCwgU3RhdGUuUklHSFQsIFN0YXRlLlNUT1BQRURdLmluY2x1ZGVzKHRoaXMubmV4dFN0YXRlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IHRoaXMubmV4dFN0YXRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0U3RhdGUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICBjYXNlIFN0YXRlLlVQOlxuICAgICAgICAgICAgICAgIGNhc2UgU3RhdGUuRE9XTjpcbiAgICAgICAgICAgICAgICAgICAgLy8gTm9ybWFsXG4gICAgICAgICAgICAgICAgICAgIGlmIChbU3RhdGUuTEVGVCwgU3RhdGUuUklHSFRdLmluY2x1ZGVzKHRoaXMubmV4dFN0YXRlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IHRoaXMubmV4dFN0YXRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0U3RhdGUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5uZXh0U3RhdGUgPT09IFN0YXRlLlNUQVJUX0pVTVApIHtcbiAgICAgICAgICAgIC8vIFNwZWNpYWwgY2FzZTogdGhlIHVzZXIgd2FudHMgdG8ganVtcCFcbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAvLyBJZiB0aGUgcGxheWVyIGlzIHN0YW5kaW5nIG9uIHNvbWV0aGluZyBzb2xpZCwgd2UgaW5pdGlhdGUgYSBqdW1wIGJhc2VkIG9uIHRoZSBjdXJyZW50XG4gICAgICAgICAgICAvLyBtb3ZlbWVudCBvZiB0aGUgcGxheWVyLiBJZiBub3QsIHdlIChzb3J0IG9mKSBpZ25vcmUgdGhlIHJlcXVlc3QgdG8ganVtcC4uLiBhbHRob3VnaFxuICAgICAgICAgICAgLy8gaXQgZG9lcyBzdWJ0bHkgY2hhbmdlIHRoZSBiZWhhdmlvciB1cG9uIGxhbmRpbmcuXG4gICAgICAgICAgICBpZiAoZmllbGQub25Tb2xpZCh0aGlzLngsIHRoaXMueSkpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGF0ZSA9PT0gU3RhdGUuU1RPUFBFRCB8fCB0aGlzLnN0YXRlID09PSBTdGF0ZS5GQUxMSU5HKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTdGF0ZS5KVU1QX1VQO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmp1bXBTdGVwID0gMDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0U3RhdGUgPSBTdGF0ZS5TVE9QUEVEO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0ZSA9PT0gU3RhdGUuTEVGVCB8fCB0aGlzLnN0YXRlID09PSBTdGF0ZS5KVU1QX0xFRlQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFN0YXRlLkpVTVBfTEVGVDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5qdW1wU3RlcCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmV4dFN0YXRlID0gU3RhdGUuTEVGVDtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc3RhdGUgPT09IFN0YXRlLlJJR0hUIHx8IHRoaXMuc3RhdGUgPT09IFN0YXRlLkpVTVBfUklHSFQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFN0YXRlLkpVTVBfUklHSFQ7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuanVtcFN0ZXAgPSAwO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm5leHRTdGF0ZSA9IFN0YXRlLlJJR0hUO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUgPT09IFN0YXRlLkpVTVBfVVAgfHwgdGhpcy5zdGF0ZSA9PT0gU3RhdGUuRkFMTElORykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm5leHRTdGF0ZSA9IFN0YXRlLlNUT1BQRUQ7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnN0YXRlID09PSBTdGF0ZS5KVU1QX1JJR0hUKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmV4dFN0YXRlID0gU3RhdGUuUklHSFQ7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnN0YXRlID09PSBTdGF0ZS5KVU1QX0xFRlQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0U3RhdGUgPSBTdGF0ZS5MRUZUO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLm5leHRTdGF0ZSA9PT0gU3RhdGUuVVAgJiYgZmllbGQuaXNMYWRkZXIodGhpcy54LCB0aGlzLnkpKSB7XG4gICAgICAgICAgICAvLyBTcGVjaWFsIGNhc2U6IHRoZSB1c2VyIHdhbnRzIHRvIGdvIHVwIVxuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vIElmIHRoZSB1c2VyIGlzIG9uIGEgbGFkZGVyLCB3ZSBjYW4gc3RhcnQgYXNjZW5kaW5nLiBOb3RlIHRoYXQgaWYgdGhlIHVzZXIgaXMgbm90XG4gICAgICAgICAgICAvLyBvbiBhIGxhZGRlciB3ZSBpZ25vcmUgdGhlaXIgaW5wdXQsIHdoaWNoIGlzIGludGVudGlvbmFsIC0tIHRoaXMgYWxsb3dzIHF1ZXVlZFxuICAgICAgICAgICAgLy8gKHBhY21hbikgaW5wdXQsIHdoZXJlIHdlIGNhbiB0YXAgVVAgYSBsaXR0bGUgYmVmb3JlIHJlYWNoaW5nIHRoZSBsYWRkZXIuXG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gU3RhdGUuVVA7XG4gICAgICAgICAgICB0aGlzLm5leHRTdGF0ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLm5leHRTdGF0ZSA9PT0gU3RhdGUuRE9XTiAmJiAoZmllbGQuaXNMYWRkZXIodGhpcy54LCB0aGlzLnkpIHx8IGZpZWxkLmlzTGFkZGVyKHRoaXMueCwgdGhpcy55ICsgMSkpKSB7XG4gICAgICAgICAgICAvLyBTcGVjaWFsIGNhc2U6IHRoZSBwbGF5ZXIgd2FudHMgdG8gZ28gZG93biFcbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAvLyBJZiB0aGUgcGxheWVyIGlzIG9uIChvciBhYm92ZSkgYSBsYWRkZXIsIHdlIGNhbiBzdGFydCBkZXNjZW5kaW5nLiBOb3RlIHRoYXQgaWYgdGhlIHBsYXllciBpcyBub3RcbiAgICAgICAgICAgIC8vIG9uIGEgbGFkZGVyIHdlIGlnbm9yZSB0aGVpciBpbnB1dCwgd2hpY2ggaXMgaW50ZW50aW9uYWwgLS0gdGhpcyBhbGxvd3MgcXVldWVkXG4gICAgICAgICAgICAvLyAocGFjbWFuKSBpbnB1dCwgd2hlcmUgd2UgY2FuIHRhcCBET1dOIGEgbGl0dGxlIGJlZm9yZSByZWFjaGluZyB0aGUgbGFkZGVyLlxuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFN0YXRlLkRPV047XG4gICAgICAgICAgICB0aGlzLm5leHRTdGF0ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuXG4gICAgICAgIHN3aXRjaCAodGhpcy5zdGF0ZSkge1xuICAgICAgICAgICAgY2FzZSBTdGF0ZS5MRUZUOlxuICAgICAgICAgICAgICAgIGlmICghZmllbGQub25Tb2xpZCh0aGlzLngsIHRoaXMueSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0U3RhdGUgPSBTdGF0ZS5MRUZUO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlID0gU3RhdGUuRkFMTElORztcbiAgICAgICAgICAgICAgICAgICAgcmVwZWF0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChmaWVsZC5lbXB0eVNwYWNlKHRoaXMueCAtIDEsIHRoaXMueSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy54LS07XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0U3RhdGUgPSBTdGF0ZS5TVE9QUEVEO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSBTdGF0ZS5SSUdIVDpcbiAgICAgICAgICAgICAgICBpZiAoIWZpZWxkLm9uU29saWQodGhpcy54LCB0aGlzLnkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmV4dFN0YXRlID0gU3RhdGUuUklHSFQ7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTdGF0ZS5GQUxMSU5HO1xuICAgICAgICAgICAgICAgICAgICByZXBlYXQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGZpZWxkLmVtcHR5U3BhY2UodGhpcy54ICsgMSwgdGhpcy55KSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLngrKztcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm5leHRTdGF0ZSA9IFN0YXRlLlNUT1BQRUQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIFN0YXRlLlVQOlxuICAgICAgICAgICAgICAgIGlmIChmaWVsZC5jYW5DbGltYlVwKHRoaXMueCwgdGhpcy55IC0gMSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy55LS07XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFN0YXRlLlNUT1BQRUQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIFN0YXRlLkRPV046XG4gICAgICAgICAgICAgICAgaWYgKGZpZWxkLmNhbkNsaW1iRG93bih0aGlzLngsIHRoaXMueSArIDEpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMueSsrO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTdGF0ZS5TVE9QUEVEO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSBTdGF0ZS5KVU1QX1JJR0hUOlxuICAgICAgICAgICAgY2FzZSBTdGF0ZS5KVU1QX0xFRlQ6XG4gICAgICAgICAgICBjYXNlIFN0YXRlLkpVTVBfVVA6XG4gICAgICAgICAgICAgICAgbGV0IHN0ZXAgPSBKVU1QX0ZSQU1FU1t0aGlzLnN0YXRlXVt0aGlzLmp1bXBTdGVwXTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhbJ2p1bXAnLCB0aGlzLnN0YXRlLCB0aGlzLmp1bXBTdGVwLCBzdGVwXSk7XG4gICAgICAgICAgICAgICAgaWYgKCh0aGlzLnggKyBzdGVwLnggPj0gMCkgJiYgKHRoaXMueCArIHN0ZXAueCA8IExFVkVMX0NPTFMpKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCB0ZXJyYWluID0gZmllbGQubGF5b3V0W3RoaXMueSArIHN0ZXAueV1bdGhpcy54ICsgc3RlcC54XTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKFsnPScsICd8JywgJy0nXS5pbmNsdWRlcyh0ZXJyYWluKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpZWxkLm9uU29saWQodGhpcy54LCB0aGlzLnkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IHRoaXMubmV4dFN0YXRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubmV4dFN0YXRlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRoaXMuc3RhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBTdGF0ZS5KVU1QX1JJR0hUOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0U3RhdGUgPSBTdGF0ZS5SSUdIVDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFN0YXRlLkpVTVBfTEVGVDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubmV4dFN0YXRlID0gU3RhdGUuTEVGVDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFN0YXRlLkpVTVBfVVA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5leHRTdGF0ZSA9IFN0YXRlLlVQO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTdGF0ZS5GQUxMSU5HO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRlcnJhaW4gPT09ICdIJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy54ICs9IHN0ZXAueDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMueSArPSBzdGVwLnk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlID0gU3RhdGUuU1RPUFBFRDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubmV4dFN0YXRlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy54ICs9IHN0ZXAueDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMueSArPSBzdGVwLnk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmp1bXBTdGVwKys7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmp1bXBTdGVwID49IEpVTVBfRlJBTUVTW3RoaXMuc3RhdGVdLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSB0aGlzLm5leHRTdGF0ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5leHRTdGF0ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmaWVsZC5vblNvbGlkKHRoaXMueCwgdGhpcy55KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IHRoaXMubmV4dFN0YXRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0U3RhdGUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlID0gU3RhdGUuRkFMTElORztcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubmV4dFN0YXRlID0gU3RhdGUuU1RPUFBFRDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSBTdGF0ZS5GQUxMSU5HOlxuICAgICAgICAgICAgICAgIGlmIChmaWVsZC5vblNvbGlkKHRoaXMueCwgdGhpcy55KSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlID0gdGhpcy5uZXh0U3RhdGUgfHwgU3RhdGUuU1RPUFBFRDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnkrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJZiB3ZSB3ZXJlIGF0dGVtcHRpbmcgdG8gbW92ZSBzb21ld2hlcmUgYW5kIHJlYWxpemVkIHdlIHNob3VsZCBiZSBmYWxsaW5nIGluc3RlYWQsXG4gICAgICAgIC8vIHdlIHdhbnQgdG8gcmUtcnVuIHRoZSBlbnRpcmUgYWxnb3JpdGhtIG9uY2UuIFRoaXMgYXZvaWRzIHdoYXQgYm9pbHMgZG93biB0byBhIFwic2tpcHBlZFxuICAgICAgICAvLyBmcmFtZVwiIGZyb20gdGhlIHVzZXIncyBwb2ludCBvZiB2aWV3LlxuICAgICAgICBpZiAocmVwZWF0KSByZXR1cm4gdGhpcy5hcHBseU1vdmVtZW50KGZpZWxkKTtcbiAgICB9XG59XG4iLCIndXNlIHN0cmljdCc7XG5cbmltcG9ydCB7IFNwcml0ZSB9IGZyb20gJy4vU3ByaXRlJztcbmltcG9ydCB7IFN0YXRlLCBKVU1QX0ZSQU1FUyB9IGZyb20gJy4vQmVoYXZpb3InO1xuaW1wb3J0IHsgSW5wdXQgfSBmcm9tICcuL0lucHV0JztcbmltcG9ydCB7IFRleHQgfSBmcm9tICcuL1RleHQnO1xuaW1wb3J0IHsgTEVWRUxfUk9XUywgTEVWRUxfQ09MUyB9IGZyb20gJy4vQ29uc3RhbnRzJztcbmltcG9ydCB7IEVudGl0eSB9IGZyb20gJy4vRW50aXR5JztcbmltcG9ydCB7IFNjcmVlbiB9IGZyb20gJy4vU2NyZWVuJztcbmltcG9ydCB7IEdhbWUgfSBmcm9tICcuL0dhbWUnO1xuXG5jb25zdCBERUFUSF9GUkFNRVMgPSBbJ3AnLCAncCcsICdiJywgJ2QnLCAnZCcsICdxJywgJ3AnLCAncCcsICdiJywgJ2QnLCAnZCcsICdxJywgJy0nLCAnLScsICdfJywgJ18nLCAnXycsICdfJywgJ18nXTtcblxuLyoqXG4gKiBQbGF5ZXJcbiAqL1xuZXhwb3J0IGNsYXNzIFBsYXllciBleHRlbmRzIEVudGl0eSB7XG4gICAgY29uc3RydWN0b3IoeCwgeSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnggPSB4O1xuICAgICAgICB0aGlzLnkgPSB5O1xuICAgICAgICB0aGlzLnN0YXRlID0gU3RhdGUuU1RPUFBFRDtcbiAgICAgICAgdGhpcy5uZXh0U3RhdGUgPSBTdGF0ZS5TVE9QUEVEO1xuICAgICAgICB0aGlzLmp1bXBTdGVwID0gMDtcbiAgICAgICAgdGhpcy5kZWF0aFN0ZXAgPSAwO1xuICAgICAgICBjb25zb2xlLmxvZygncGxheWVyIGNvbnN0cnVjdGVkJywgeCwgeSk7XG4gICAgfVxuXG4gICAgdXBkYXRlKGZpZWxkLCBtb3ZlRnJhbWUpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgPT09IFN0YXRlLkRZSU5HKSB7XG4gICAgICAgICAgICB0aGlzLmRlYXRoU3RlcCsrO1xuICAgICAgICAgICAgaWYgKHRoaXMuZGVhdGhTdGVwID49IERFQVRIX0ZSQU1FUy5sZW5ndGgpIHRoaXMuc3RhdGUgPSBTdGF0ZS5ERUFEO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgPT09IFN0YXRlLkRZSU5HIHx8IHRoaXMuc3RhdGUgPT09IFN0YXRlLkRFQUQpIHJldHVybjtcblxuICAgICAgICBpZiAoIW1vdmVGcmFtZSkgcmV0dXJuO1xuXG4gICAgICAgIGxldCBhY3Rpb24gPSBJbnB1dC5sYXN0QWN0aW9uKCk7XG5cbiAgICAgICAgaWYgKGFjdGlvbiA9PT0gSW5wdXQuQWN0aW9uLkxFRlQpIHtcbiAgICAgICAgICAgIHRoaXMubmV4dFN0YXRlID0gU3RhdGUuTEVGVDtcbiAgICAgICAgICAgIElucHV0LmNvbnN1bWUoKTtcbiAgICAgICAgfSBlbHNlIGlmIChhY3Rpb24gPT09IElucHV0LkFjdGlvbi5SSUdIVCkge1xuICAgICAgICAgICAgdGhpcy5uZXh0U3RhdGUgPSBTdGF0ZS5SSUdIVDtcbiAgICAgICAgICAgIElucHV0LmNvbnN1bWUoKTtcbiAgICAgICAgfSBlbHNlIGlmIChhY3Rpb24gPT09IElucHV0LkFjdGlvbi5VUCkge1xuICAgICAgICAgICAgdGhpcy5uZXh0U3RhdGUgPSBTdGF0ZS5VUDtcbiAgICAgICAgICAgIElucHV0LmNvbnN1bWUoKTtcbiAgICAgICAgfSBlbHNlIGlmIChhY3Rpb24gPT09IElucHV0LkFjdGlvbi5ET1dOKSB7XG4gICAgICAgICAgICB0aGlzLm5leHRTdGF0ZSA9IFN0YXRlLkRPV047XG4gICAgICAgICAgICBJbnB1dC5jb25zdW1lKCk7XG4gICAgICAgIH0gZWxzZSBpZiAoYWN0aW9uID09PSBJbnB1dC5BY3Rpb24uSlVNUCkge1xuICAgICAgICAgICAgdGhpcy5uZXh0U3RhdGUgPSBTdGF0ZS5TVEFSVF9KVU1QO1xuICAgICAgICAgICAgSW5wdXQuY29uc3VtZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuYXBwbHlNb3ZlbWVudChmaWVsZCk7XG4gICAgfVxuXG4gICAgZHJhdygpIHtcbiAgICAgICAgbGV0IGNoYXIgPSAnZyc7XG5cbiAgICAgICAgc3dpdGNoICh0aGlzLnN0YXRlKSB7XG4gICAgICAgICAgICBjYXNlIFN0YXRlLlJJR0hUOlxuICAgICAgICAgICAgY2FzZSBTdGF0ZS5KVU1QX1JJR0hUOlxuICAgICAgICAgICAgY2FzZSBTdGF0ZS5VUDpcbiAgICAgICAgICAgIGNhc2UgU3RhdGUuRE9XTjpcbiAgICAgICAgICAgICAgICBjaGFyID0gJ3AnO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIFN0YXRlLkxFRlQ6XG4gICAgICAgICAgICBjYXNlIFN0YXRlLkpVTVBfTEVGVDpcbiAgICAgICAgICAgICAgICBjaGFyID0gJ3EnO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIFN0YXRlLkZBTExJTkc6XG4gICAgICAgICAgICAgICAgY2hhciA9ICdiJztcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSBTdGF0ZS5EWUlORzpcbiAgICAgICAgICAgICAgICBjaGFyID0gREVBVEhfRlJBTUVTW3RoaXMuZGVhdGhTdGVwXTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSBTdGF0ZS5ERUFEOlxuICAgICAgICAgICAgICAgIGNoYXIgPSAnXyc7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICBTY3JlZW4ud3JpdGUodGhpcy54LCB0aGlzLnksIGNoYXIpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IFRleHQgfSBmcm9tICcuL1RleHQnO1xuaW1wb3J0IHsgU3RhdGUgfSBmcm9tICcuL0JlaGF2aW9yJztcbmltcG9ydCB7IExFVkVMX0NPTFMgfSBmcm9tICcuL0NvbnN0YW50cyc7XG5pbXBvcnQgeyBFbnRpdHkgfSBmcm9tICcuL0VudGl0eSc7XG5pbXBvcnQgeyBTY3JlZW4gfSBmcm9tICcuL1NjcmVlbic7XG5pbXBvcnQgeyBHYW1lIH0gZnJvbSAnLi9HYW1lJztcblxuY29uc3QgREVBVEhfRlJBTUVTID0gWyd7JywgJ30nLCAnKCcsICcpJywgJyUnLCAnJScsICc6JywgJzonXTtcblxuZXhwb3J0IGNsYXNzIFJvY2sgZXh0ZW5kcyBFbnRpdHkge1xuICAgIGNvbnN0cnVjdG9yKGRpc3BlbnNlcikge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnggPSBkaXNwZW5zZXIueDtcbiAgICAgICAgdGhpcy55ID0gZGlzcGVuc2VyLnk7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBTdGF0ZS5GQUxMSU5HO1xuICAgICAgICB0aGlzLm5leHRTdGF0ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5kZWF0aFN0ZXAgPSAwO1xuICAgIH1cblxuICAgIHVwZGF0ZShmaWVsZCwgbW92ZUZyYW1lKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlID09PSBTdGF0ZS5EWUlORykge1xuICAgICAgICAgICAgdGhpcy5kZWF0aFN0ZXArKztcbiAgICAgICAgICAgIGlmICh0aGlzLmRlYXRoU3RlcCA+PSBERUFUSF9GUkFNRVMubGVuZ3RoKSB0aGlzLnN0YXRlID0gU3RhdGUuREVBRDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnN0YXRlID09PSBTdGF0ZS5EWUlORyB8fCB0aGlzLnN0YXRlID09PSBTdGF0ZS5ERUFEKSByZXR1cm47XG5cbiAgICAgICAgaWYgKCFtb3ZlRnJhbWUpIHJldHVybjtcblxuICAgICAgICBpZiAodGhpcy5zdGF0ZSA9PT0gU3RhdGUuU1RPUFBFRCkge1xuICAgICAgICAgICAgaWYgKHRoaXMueCA9PT0gMCB8fCAhZmllbGQuZW1wdHlTcGFjZSh0aGlzLnggLSAxLCB0aGlzLnkpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5uZXh0U3RhdGUgPSBTdGF0ZS5SSUdIVDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy54ID09PSBMRVZFTF9DT0xTIC0gMSB8fCAhZmllbGQuZW1wdHlTcGFjZSh0aGlzLnggKyAxLCB0aGlzLnkpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5uZXh0U3RhdGUgPSBTdGF0ZS5MRUZUO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLm5leHRTdGF0ZSA9IE1hdGgucmFuZG9tKCkgPiAwLjUgPyBTdGF0ZS5MRUZUIDogU3RhdGUuUklHSFQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy54ID09PSAwICYmIHRoaXMuc3RhdGUgPT09IFN0YXRlLkxFRlQpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTdGF0ZS5SSUdIVDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnggPT09IExFVkVMX0NPTFMgLSAxICYmIHRoaXMuc3RhdGUgPT09IFN0YXRlLlJJR0hUKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gU3RhdGUuTEVGVDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnN0YXRlICE9PSBTdGF0ZS5GQUxMSU5HICYmICFmaWVsZC5vblNvbGlkKHRoaXMueCwgdGhpcy55KSkge1xuICAgICAgICAgICAgdGhpcy5uZXh0U3RhdGUgPSBTdGF0ZS5GQUxMSU5HO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZpZWxkLmlzTGFkZGVyKHRoaXMueCwgdGhpcy55ICsgMSkgJiYgW1N0YXRlLkxFRlQsIFN0YXRlLlJJR0hUXS5pbmNsdWRlcyh0aGlzLnN0YXRlKSkge1xuICAgICAgICAgICAgbGV0IHIgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA0KTtcbiAgICAgICAgICAgIHRoaXMubmV4dFN0YXRlID0gW1N0YXRlLkxFRlQsIFN0YXRlLlJJR0hULCBTdGF0ZS5ET1dOLCBTdGF0ZS5ET1dOXVtyXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChmaWVsZC5pc0VhdGVyKHRoaXMueCwgdGhpcy55KSkge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFN0YXRlLkRZSU5HO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5hcHBseU1vdmVtZW50KGZpZWxkKTtcbiAgICB9XG5cbiAgICBkcmF3KCkge1xuICAgICAgICBsZXQgY2hhciA9ICdvJztcblxuICAgICAgICBzd2l0Y2ggKHRoaXMuc3RhdGUpIHtcbiAgICAgICAgICAgIGNhc2UgU3RhdGUuRFlJTkc6XG4gICAgICAgICAgICAgICAgY2hhciA9IERFQVRIX0ZSQU1FU1t0aGlzLmRlYXRoU3RlcF07XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFN0YXRlLkRFQUQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgU2NyZWVuLndyaXRlKHRoaXMueCwgdGhpcy55LCBjaGFyKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBMRVZFTF9ST1dTLCBMRVZFTF9DT0xTIH0gZnJvbSAnLi9Db25zdGFudHMnO1xuaW1wb3J0IExldmVsRGF0YSBmcm9tICcuLi9sZXZlbHMvbGV2ZWxzLmpzb24nO1xuXG5leHBvcnQgY29uc3QgTGV2ZWwgPSB7XG4gICAgTEVWRUxTOiBMZXZlbERhdGEsXG4gICAgTEVWRUxfQ09VTlQ6IExldmVsRGF0YS5sZW5ndGgsXG5cbiAgICBsb2FkKGxldmVsTnVtYmVyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKExldmVsLkxFVkVMUyk7XG4gICAgICAgIC8vIEFzIHRoZSBwbGF5ZXIga2VlcHMgcGxheWluZywgbGV2ZWwgbnVtYmVycyB3aWxsIGxvb3AgYXJvdW5kIHRvIGJlZ2lubmluZ1xuICAgICAgICBsZXQgbGV2ZWwgPSBMZXZlbC5MRVZFTFNbbGV2ZWxOdW1iZXIgJSBMZXZlbC5MRVZFTFMubGVuZ3RoXTtcbiAgICAgICAgaWYgKCFsZXZlbCkgdGhyb3cgbmV3IEVycm9yKGBObyBzdWNoIGxldmVsIG51bWJlcjogJHtsZXZlbE51bWJlcn1gKTtcblxuICAgICAgICAvLyBQZXJmb3JtIHNvbWUgc2FuaXR5IGNoZWNrcyBvbiB0aGUgbGV2ZWwgbGF5b3V0IGFuZCBleHRyYWN0IHVzZWZ1bCBpbmZvXG4gICAgICAgIC8vIGxpa2UgcGxheWVyIHN0YXJ0IHBvc2l0aW9uIGFuZCBkaXNwZW5zZXIgcG9zaXRpb25zIGV0Yy5cblxuICAgICAgICBsZXQgbGF5b3V0ID0gbGV2ZWwubGF5b3V0Lm1hcChyb3cgPT4gcm93LnNwbGl0KCcnKSk7XG4gICAgICAgIGxldCBkaXNwZW5zZXJzID0gW107XG4gICAgICAgIGxldCBwbGF5ZXI7XG5cbiAgICAgICAgLy8gU2FuaXR5IGNoZWNrXG4gICAgICAgIGxheW91dCA9IGxheW91dC5zbGljZSgwLCBMRVZFTF9ST1dTKTtcblxuICAgICAgICBmb3IgKGxldCB5ID0gMDsgeSA8IExFVkVMX1JPV1M7IHkrKykge1xuICAgICAgICAgICAgLy8gU2FuaXR5IGNoZWNrc1xuICAgICAgICAgICAgaWYgKCFsYXlvdXRbeV0pIGxheW91dFt5XSA9IFtdO1xuICAgICAgICAgICAgbGF5b3V0W3ldID0gbGF5b3V0W3ldLnNsaWNlKDAsIExFVkVMX0NPTFMpO1xuXG4gICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IExFVkVMX0NPTFM7IHgrKykge1xuICAgICAgICAgICAgICAgIC8vIFNhbml0eSBjaGVja1xuICAgICAgICAgICAgICAgIGlmICghbGF5b3V0W3ldW3hdKSBsYXlvdXRbeV1beF0gPSAnICc7XG5cbiAgICAgICAgICAgICAgICAvLyBEZXIgRGlzcGVuc2VycyAoVikgYW5kIERlciBFYXRlcnMgKCopIGhhdmUgYmVoYXZpb3JzLCBzbyBpdCBpcyBjb252ZW5pZW50IGZvciB1c1xuICAgICAgICAgICAgICAgIC8vIHRvIGNvbnN0cnVjdCBhIGxpc3Qgb2YgdGhlbSwgYnV0IHRoZXkgYXJlIHBlcm1hbmVudCBwYXJ0cyBvZiB0aGUgbGF5b3V0LCBzbyB3ZSBjYW5cbiAgICAgICAgICAgICAgICAvLyBsZWF2ZSB0aGVtIGFzIHBhcnQgb2YgdGhlIGxldmVsIGFuZCBkcmF3IHRoZW0gbm9ybWFsbHkuXG5cbiAgICAgICAgICAgICAgICBpZiAobGF5b3V0W3ldW3hdID09PSAnVicpIHtcbiAgICAgICAgICAgICAgICAgICAgZGlzcGVuc2Vycy5wdXNoKHsgeCwgeSB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBUcmVhc3VyZSAoJCksIFN0YXR1ZXMgKCYpLCBhbmQgdGhlIExhZCAocCkgYXJlIHRyYW5zaWVudCAtIHRoZSBwbGF5ZXIgbW92ZXMgYXJvdW5kIGFuZFxuICAgICAgICAgICAgICAgIC8vIGNhbiBwaWNrIHVwIHRoZSB0cmVhc3VyZXMgYW5kIHN0YXR1ZXMuIFRoYXQncyB3aHkgZm9yIHRoZXNlIGVsZW1lbnRzLCB3ZSBhZGQgdGhlbSB0b1xuICAgICAgICAgICAgICAgIC8vIG91ciBsaXN0cyBBTkQgd2UgcmVtb3ZlIHRoZW0gZnJvbSB0aGUgXCJwbGF5aW5nIGZpZWxkXCIsIHdlJ2xsIGRyYXcgdGhlbSBzZXBhcmF0ZWx5IG9uXG4gICAgICAgICAgICAgICAgLy8gdG9wIG9mIHRoZSBsYXlvdXQuXG5cbiAgICAgICAgICAgICAgICBpZiAobGF5b3V0W3ldW3hdID09PSAncCcpIHtcbiAgICAgICAgICAgICAgICAgICAgbGF5b3V0W3ldW3hdID0gJyAnO1xuICAgICAgICAgICAgICAgICAgICBwbGF5ZXIgPSB7IHgsIHkgfTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBFdmVyeXRoaW5nIGVsc2UsIGxpa2UgZmxvb3JzICg9KSwgd2FsbHMgKHwpLCBsYWRkZXJzIChIKSBhbmQgZmlyZSAoXiksIGlzIHBhcnQgb2YgdGhlXG4gICAgICAgICAgICAgICAgLy8gbGF5b3V0LiBUaGUgTGFkIGludGVyYWN0cyB3aXRoIHRoZW0sIGJ1dCB3ZSBjYW4gaGFuZGxlIHRoYXQgZHVyaW5nIG91ciBtb3ZlbWVudCBjaGVja3MuXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmFtZTogbGV2ZWwubmFtZSxcbiAgICAgICAgICAgIHRpbWU6IGxldmVsLnRpbWUsXG4gICAgICAgICAgICBtYXhSb2NrczogbGV2ZWwubWFScm9ja3MsXG4gICAgICAgICAgICBsYXlvdXQsXG4gICAgICAgICAgICBkaXNwZW5zZXJzLFxuICAgICAgICAgICAgcGxheWVyXG4gICAgICAgIH07XG4gICAgfVxufTtcbiIsIi8qKlxuICogYFBsYXlpbmdGaWVsZGAgaXMgYSBjbGFzcyB0aGF0IHJlcHJlc2VudHMgYSBsZXZlbCB0aGF0IGlzIGFjdGl2ZWx5IGJlaW5nIHBsYXllZCBvbi1zY3JlZW4uXG4gKiBBIG5ldyBvbmUgaXMgY3JlYXRlZCBieSB0aGUgZ2FtZSBzZXNzaW9uIGFueSB0aW1lIHdlIHN0YXJ0IGEgbmV3IGxldmVsLlxuICpcbiAqIExldmVsLXNwZWNpZmljIHN0dWZmIChsaWtlIGJvbnVzIHRpbWUsIGRpc3BlbnNlcnMsIHJvY2tzLCBwbGF5ZXIgcG9zaXRpb24sIGV0Yy4pIGlzIGFsbFxuICogbWFuYWdlZCBieSB0aGUgcGxheWluZyBmaWVsZC5cbiAqL1xuXG5pbXBvcnQgeyBMRVZFTF9DT0xTLCBTQ09SRV9ST0NLLCBTQ09SRV9TVEFUVUUsIFNDT1JFX1RSRUFTVVJFLCBNQVhfUk9DS1MsIERJU1BFTlNFUl9NQVhfUk9DS1MsIEhJRERFTl9GQUNUT1JfTUFYX1JPQ0tTIH0gZnJvbSAnLi9Db25zdGFudHMnO1xuaW1wb3J0IHsgR2FtZSB9IGZyb20gJy4vR2FtZSc7XG5pbXBvcnQgeyBQbGF5ZXIgfSBmcm9tICcuL1BsYXllcic7XG5pbXBvcnQgeyBSb2NrIH0gZnJvbSAnLi9Sb2NrJztcbmltcG9ydCB7IFN0YXRlIH0gZnJvbSAnLi9CZWhhdmlvcic7XG5pbXBvcnQgeyBTY3JlZW4gfSBmcm9tICcuL1NjcmVlbic7XG5pbXBvcnQgeyBMZXZlbCB9IGZyb20gJy4vTGV2ZWwnO1xuXG5leHBvcnQgY2xhc3MgUGxheWluZ0ZpZWxkIHtcbiAgICBjb25zdHJ1Y3RvcihsZXZlbE51bWJlcikge1xuICAgICAgICBsZXQgbGV2ZWwgPSBMZXZlbC5sb2FkKGxldmVsTnVtYmVyKTtcblxuICAgICAgICAvLyBTdG9yZSBsZXZlbC1yZWxhdGVkIGluZm9cbiAgICAgICAgdGhpcy5sYXlvdXQgPSBsZXZlbC5sYXlvdXQ7XG4gICAgICAgIHRoaXMuZGlzcGVuc2VycyA9IGxldmVsLmRpc3BlbnNlcnM7XG4gICAgICAgIHRoaXMudGltZSA9IDIwMDA7XG5cbiAgICAgICAgLy8gSW5pdGlhbGl6ZSBwbGF5ZXJcbiAgICAgICAgdGhpcy5wbGF5ZXIgPSBuZXcgUGxheWVyKGxldmVsLnBsYXllci54LCBsZXZlbC5wbGF5ZXIueSk7XG5cbiAgICAgICAgLy8gSW5pdGlhbGl6ZSBsaXN0IG9mIHJvY2tzIChlbXB0eSlcbiAgICAgICAgdGhpcy5yb2NrcyA9IFtdO1xuXG4gICAgICAgIC8vIE5vdCB3aW5uaW5nIHlldCAod2hpbGUgXCJ3aW5uaW5nXCIgdGhlIHBsYXllciBzdG9wcyBtb3ZpbmcgYW5kIHdlIGFkZCB1cCB0aGUgYm9udXMgc2NvcmUpXG4gICAgICAgIHRoaXMud2lubmluZyA9IGZhbHNlO1xuICAgIH1cblxuICAgIHVwZGF0ZShtb3ZlRnJhbWUpIHtcbiAgICAgICAgLy8gSWYgd2UncmUgYWxyZWFkeSB3aW5uaW5nLCBrZWVwIGNvdW50aW5nIGRvd24gdGhlIGJvbnVzIHRpbWUsIGJ1dFxuICAgICAgICAvLyBubyBtb3JlIG1vdmVtZW50IHdpbGwgaGFwcGVuIG9uIHRoaXMgbGV2ZWwuXG4gICAgICAgIGlmICh0aGlzLndpbm5pbmcpIHtcbiAgICAgICAgICAgIEdhbWUuc2Vzc2lvbi51cGRhdGVTY29yZShTQ09SRV9UUkVBU1VSRSk7XG4gICAgICAgICAgICB0aGlzLnRpbWUgLT0gMTA7XG4gICAgICAgICAgICBpZiAodGhpcy50aW1lIDwgMCkgR2FtZS5zZXNzaW9uLnN0YXJ0TmV4dExldmVsKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDb3VudCBkb3duIGJvbnVzIHRpbWVcbiAgICAgICAgaWYgKHRoaXMudGltZSA+IDAgJiYgbW92ZUZyYW1lKSB0aGlzLnRpbWUtLTtcblxuICAgICAgICBsZXQgb2xkWCA9IHRoaXMucGxheWVyLngsIG9sZFkgPSB0aGlzLnBsYXllci55O1xuXG4gICAgICAgIC8vIE1vdmUgcGxheWVyIGJhc2VkIG9uIHVzZXIgaW5wdXRcbiAgICAgICAgdGhpcy5wbGF5ZXIudXBkYXRlKHRoaXMsIG1vdmVGcmFtZSk7XG5cbiAgICAgICAgLy8gQW55IHRpbWUgeW91IG1vdmUgT0ZGIG9mIGEgZGlzYXBwZWFyaW5nIGZsb29yLCBpdCBnb2VzIGF3YXkuXG4gICAgICAgIGlmIChvbGRYICE9PSB0aGlzLnBsYXllci54ICYmIG9sZFkgPT09IHRoaXMucGxheWVyLnkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzRGlzYXBwZWFyaW5nRmxvb3Iob2xkWCwgb2xkWSArIDEpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sYXlvdXRbb2xkWSArIDFdW29sZFhdID0gJyAnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgcGxheWVyIHNob3VsZCBiZSBkZWFkIChiZWZvcmUgbW92aW5nIHJvY2tzKVxuICAgICAgICBpZiAobW92ZUZyYW1lKSB0aGlzLmNoZWNrSWZQbGF5ZXJTaG91bGREaWUoR2FtZS5zZXNzaW9uKTtcblxuICAgICAgICAvLyBNb3ZlIHJvY2tzXG4gICAgICAgIGZvciAobGV0IHJvY2sgb2YgdGhpcy5yb2Nrcykgcm9jay51cGRhdGUodGhpcywgbW92ZUZyYW1lKTtcblxuICAgICAgICAvLyBDaGVjayBpZiBwbGF5ZXIgc2hvdWxkIGJlIGRlYWQgKGFmdGVyIG1vdmluZyByb2NrcylcbiAgICAgICAgaWYgKG1vdmVGcmFtZSkgdGhpcy5jaGVja0lmUGxheWVyU2hvdWxkRGllKEdhbWUuc2Vzc2lvbik7XG5cbiAgICAgICAgaWYgKG1vdmVGcmFtZSkge1xuICAgICAgICAgICAgLy8gQ29sbGVjdCBzdGF0dWVzXG4gICAgICAgICAgICBpZiAodGhpcy5pc1N0YXR1ZSh0aGlzLnBsYXllci54LCB0aGlzLnBsYXllci55KSkge1xuICAgICAgICAgICAgICAgIHRoaXMubGF5b3V0W3RoaXMucGxheWVyLnldW3RoaXMucGxheWVyLnhdID0gJyAnO1xuICAgICAgICAgICAgICAgIEdhbWUuc2Vzc2lvbi51cGRhdGVTY29yZShTQ09SRV9TVEFUVUUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBDb2xsZWN0IHRyZWFzdXJlIChlbmRzIHRoZSBjdXJyZW50IGxldmVsKVxuICAgICAgICAgICAgaWYgKHRoaXMuaXNUcmVhc3VyZSh0aGlzLnBsYXllci54LCB0aGlzLnBsYXllci55KSkge1xuICAgICAgICAgICAgICAgIHRoaXMud2lubmluZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBJbnRlcmFjdCB3aXRoIHRyYW1wb2xpbmVzXG4gICAgICAgICAgICBpZiAodGhpcy5pc1RyYW1wb2xpbmUodGhpcy5wbGF5ZXIueCwgdGhpcy5wbGF5ZXIueSkpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGxheWVyLnN0YXRlID0gU3RhdGUuTEVGVDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGxheWVyLm5leHRTdGF0ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsYXllci5zdGF0ZSA9IFN0YXRlLlJJR0hUO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXIubmV4dFN0YXRlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGxheWVyLnN0YXRlID0gU3RhdGUuSlVNUF9VUDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGxheWVyLm5leHRTdGF0ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGxheWVyLmp1bXBTdGVwID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsYXllci5zdGF0ZSA9IFN0YXRlLkpVTVBfTEVGVDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGxheWVyLm5leHRTdGF0ZSA9IFN0YXRlLkxFRlQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsYXllci5qdW1wU3RlcCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXIuc3RhdGUgPSBTdGF0ZS5KVU1QX1JJR0hUO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXIubmV4dFN0YXRlID0gU3RhdGUuUklHSFQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsYXllci5qdW1wU3RlcCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEtpbGwgZGVhZCByb2Nrc1xuICAgICAgICAgICAgdGhpcy5yb2NrcyA9IHRoaXMucm9ja3MuZmlsdGVyKHJvY2sgPT4gcm9jay5zdGF0ZSAhPT0gU3RhdGUuREVBRCk7XG5cbiAgICAgICAgICAgIC8vIERpc3BlbnNlIG5ldyByb2Nrc1xuICAgICAgICAgICAgaWYgKHRoaXMucm9ja3MubGVuZ3RoIDwgdGhpcy5tYXhSb2NrcygpICYmIE1hdGgucmFuZG9tKCkgPiAwLjkxKSB7XG4gICAgICAgICAgICAgICAgbGV0IGRpc3BlbnNlciA9IHRoaXMuZGlzcGVuc2Vyc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB0aGlzLmRpc3BlbnNlcnMubGVuZ3RoKV07XG4gICAgICAgICAgICAgICAgdGhpcy5yb2Nrcy5wdXNoKG5ldyBSb2NrKGRpc3BlbnNlcikpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBLaWxsIHBsYXllclxuICAgICAgICAgICAgaWYgKHRoaXMucGxheWVyLnN0YXRlID09PSBTdGF0ZS5ERUFEKSB7XG4gICAgICAgICAgICAgICAgR2FtZS5zZXNzaW9uLnJlc3RhcnRMZXZlbCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZHJhdygpIHtcbiAgICAgICAgLy8gRHJhdyBsYXlvdXRcbiAgICAgICAgU2NyZWVuLndyaXRlKDAsIDAsIHRoaXMubGF5b3V0Lm1hcChyb3cgPT4gcm93LmpvaW4oJycpKSk7XG5cbiAgICAgICAgLy8gRHJhdyBwbGF5ZXJcbiAgICAgICAgdGhpcy5wbGF5ZXIuZHJhdygpO1xuXG4gICAgICAgIC8vIERyYXcgcm9ja3NcbiAgICAgICAgdGhpcy5yb2Nrcy5mb3JFYWNoKHJvY2sgPT4gcm9jay5kcmF3KCkpO1xuICAgIH1cblxuICAgIC8vXG4gICAgLy8gVXRpbGl0eSBmdW5jdGlvbnMgLSB0aGlzIGlzIGFuIGF0dGVtcHQgdG8gY29uc29saWRhdGUgbG9naWMgaW4gb25lIHNwb3QgYW5kIG1ha2Ugb3RoZXJcbiAgICAvLyBmdW5jdGlvbnMgKGxpa2UgdGhlIHVwZGF0ZSBsb2dpYyBpbiBQbGF5ZXIpIG1vcmUgcmVhZGFibGUuXG4gICAgLy9cblxuICAgIG9uU29saWQoeCwgeSkge1xuICAgICAgICByZXR1cm4gWyc9JywgJy0nLCAnSCcsICd8J10uaW5jbHVkZXModGhpcy5sYXlvdXRbeSArIDFdW3hdKSB8fCB0aGlzLmxheW91dFt5XVt4XSA9PT0gJ0gnO1xuICAgIH1cblxuICAgIGVtcHR5U3BhY2UoeCwgeSkge1xuICAgICAgICBpZiAoeCA8IDAgfHwgeCA+PSBMRVZFTF9DT0xTKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gIVsnfCcsICc9J10uaW5jbHVkZXModGhpcy5sYXlvdXRbeV1beF0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaXNMYWRkZXIoeCwgeSkge1xuICAgICAgICByZXR1cm4gdGhpcy5sYXlvdXRbeV1beF0gPT09ICdIJztcbiAgICB9XG5cbiAgICBpc1N0YXR1ZSh4LCB5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxheW91dFt5XVt4XSA9PT0gJyYnO1xuICAgIH1cblxuICAgIGlzVHJlYXN1cmUoeCwgeSkge1xuICAgICAgICByZXR1cm4gdGhpcy5sYXlvdXRbeV1beF0gPT09ICckJztcbiAgICB9XG5cbiAgICBpc1RyYW1wb2xpbmUoeCwgeSkge1xuICAgICAgICByZXR1cm4gdGhpcy5sYXlvdXRbeV1beF0gPT09ICcuJztcbiAgICB9XG5cbiAgICBpc0VhdGVyKHgsIHkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGF5b3V0W3ldW3hdID09PSAnKic7XG4gICAgfVxuXG4gICAgaXNGaXJlKHgsIHkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGF5b3V0W3ldW3hdID09PSAnXic7XG4gICAgfVxuXG4gICAgaXNEaXNhcHBlYXJpbmdGbG9vcih4LCB5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxheW91dFt5XVt4XSA9PT0gJy0nO1xuICAgIH1cblxuICAgIGNhbkNsaW1iVXAoeCwgeSkge1xuICAgICAgICBpZiAoeSA8IDApIHJldHVybiBmYWxzZTtcbiAgICAgICAgcmV0dXJuIFsnSCcsICcmJywgJyQnXS5pbmNsdWRlcyh0aGlzLmxheW91dFt5XVt4XSk7XG4gICAgfVxuXG4gICAgY2FuQ2xpbWJEb3duKHgsIHkpIHtcbiAgICAgICAgcmV0dXJuIFsnSCcsICcmJywgJyQnLCAnICcsICdeJywgJy4nXS5pbmNsdWRlcyh0aGlzLmxheW91dFt5XVt4XSk7XG4gICAgfVxuXG4gICAgY2hlY2tJZlBsYXllclNob3VsZERpZSgpIHtcbiAgICAgICAgLy8gSWYgd2UncmUgQUxSRUFEWSBkeWluZyBvciBkZWFkLCBsZXQgbmF0dXJlIHJ1biBpdHMgY291cnNlXG4gICAgICAgIGlmICh0aGlzLnBsYXllci5zdGF0ZSA9PT0gU3RhdGUuRFlJTkcgfHwgdGhpcy5wbGF5ZXIuc3RhdGUgPT09IFN0YXRlLkRFQUQpIHJldHVybjtcblxuICAgICAgICAvLyBMYW5kaW5nIG9uIGZpcmUga2lsbHMgeW91XG4gICAgICAgIGlmICh0aGlzLmlzRmlyZSh0aGlzLnBsYXllci54LCB0aGlzLnBsYXllci55KSkge1xuICAgICAgICAgICAgdGhpcy5wbGF5ZXIuc3RhdGUgPSBTdGF0ZS5EWUlORztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJ1bm5pbmcgb3V0IG9mIHRpbWUga2lsbHMgeW91XG4gICAgICAgIGlmICh0aGlzLnRpbWUgPD0gMCkge1xuICAgICAgICAgICAgdGhpcy5wbGF5ZXIuc3RhdGUgPSBTdGF0ZS5EWUlORztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJ1bm5pbmcgaW50byBhIHJvY2sga2lsbHMgeW91LCBhbmQgbWFrZXMgdGhlIHJvY2sgdGhhdCBraWxsZWQgeW91IGRpc2FwcGVhci5cbiAgICAgICAgLy8gVGhhdCdzIG5vdCBuZWNlc3NhcnksIEkganVzdCB0aGluayBpdCBsb29rcyBiZXR0ZXIuIFdoaWxlIHdlIHBsYXkgdGhlIGRlYXRoXG4gICAgICAgIC8vIGFuaW1hdGlvbiB3ZSdsbCBjb250aW51ZSB0byBtb3ZlIHJvY2tzLCBzbyBhbm90aGVyIHJvY2sgbWlnaHQgYWxzbyBcImhpdFwiIHlvdSxcbiAgICAgICAgLy8gYnV0IGl0IHdpbGwganVzdCBwYXNzIHRocm91Z2ggeW91ciBkeWluZyBjaGFyYWN0ZXIuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIElmIHdlJ3JlIGFib3ZlIGEgcm9jayB3aXRoIDEgb3IgMiBzcGFjZXMgYmV0d2Vlbiwgd2UgZ2V0IHNvbWUgcG9pbnRzIGluc3RlYWQuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIEEgZnVuY3Rpb24gbmFtZWQgYGNoZWNrSWZQbGF5ZXJTaG91bGREaWVgIGlzIHByb2JhYmx5IG5vdCB0aGUgYmVzdCBwbGFjZSB0byBkb1xuICAgICAgICAvLyB0aGlzLCBidXQgaXQncyBjb252ZW5pZW50IGJlY2F1c2Ugd2Ugd2FudCB0byBkbyB0aGlzIHR3aWNlIChqdXN0IGxpa2UgdGhlIGRlYXRoXG4gICAgICAgIC8vIGNoZWNrKS5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgIHAgICAgICAgICAgICAgICAgICAgICAgICAgIHBcbiAgICAgICAgLy8gKDEpICAgcCAgICAgLS0+ICAgICAgICAgICAgKDIpICAgcCAgICAgLS0+XG4gICAgICAgIC8vICAgICAgICBvICAgICAgICAgIG8gICAgICAgICAgICAgICAgbyAgICAgICAgICBvXG4gICAgICAgIC8vICAgICAgPT09PT0gICAgICAgPT09PT0gICAgICAgICAgPT09PT0gICAgICAgPT09PT1cbiAgICAgICAgLy9cbiAgICAgICAgLy8gSW4gc2l0dWF0aW9uICgxKSwgdGhlcmUgd2lsbCBuZXZlciBiZSBhIGZyYW1lIG9uLXNjcmVlbiB3aGVyZSB0aGUgcGxheWVyIGlzIGRpcmVjdGx5XG4gICAgICAgIC8vIGFib3ZlIHRoZSByb2NrLCBidXQgd2UnbGwgc3RpbGwgY291bnQgaXQgYmVjYXVzZSB3ZSdsbCBjaGVjayBvbmNlIGFmdGVyIHRoZSBwbGF5ZXIgbW92ZXMuXG4gICAgICAgIC8vIEluIHNpdHVhdGlvbiAoMiksIHRoZSBmaXJzdCBjaGVjayB3b24ndCBjb3VudCwgYnV0IHRoZSBzZWNvbmQgY2hlY2sgYWZ0ZXIgdGhlIHJvY2tzIG1vdmVcbiAgICAgICAgLy8gd2lsbCBnaXZlIHRoZSBzY29yZSAoYW5kIHRoZSBmcmFtZSBkcmF3biBvbiBzY3JlZW4gd2lsbCBzaG93IHRoZSBwbGF5ZXIgYWJvdmUgdGhlIHJvY2spLlxuICAgICAgICAvL1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucm9ja3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBsYXllci54ID09PSB0aGlzLnJvY2tzW2ldLngpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wbGF5ZXIueSA9PT0gdGhpcy5yb2Nrc1tpXS55KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGxheWVyLnN0YXRlID0gU3RhdGUuRFlJTkc7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucm9ja3Muc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMucGxheWVyLnkgPT09IHRoaXMucm9ja3NbaV0ueSAtIDEgJiYgdGhpcy5lbXB0eVNwYWNlKHRoaXMucGxheWVyLngsIHRoaXMucGxheWVyLnkgKyAxKSkge1xuICAgICAgICAgICAgICAgICAgICBHYW1lLnNlc3Npb24udXBkYXRlU2NvcmUoU0NPUkVfUk9DSyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnBsYXllci55ID09PSB0aGlzLnJvY2tzW2ldLnkgLSAyICYmIHRoaXMuZW1wdHlTcGFjZSh0aGlzLnBsYXllci54LCB0aGlzLnBsYXllci55ICsgMSkgJiYgdGhpcy5lbXB0eVNwYWNlKHRoaXMucGxheWVyLngsIHRoaXMucGxheWVyLnkgKyAyKSkge1xuICAgICAgICAgICAgICAgICAgICBHYW1lLnNlc3Npb24udXBkYXRlU2NvcmUoU0NPUkVfUk9DSyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgbWF4Um9ja3MoKSB7XG4gICAgICAgIC8vIFRoZSB0b3RhbCBudW1iZXIgb2Ygcm9ja3Mgd2UgY2FuIGhhdmUgb24gc2NyZWVuIGlzIGJhc2VkIG9uIGEgZ2xvYmFsIG1heCByb2NrcyB2YWx1ZSxcbiAgICAgICAgLy8gdGhlbiBpbmNyZWFzZWQgc2xpZ2h0bHkgYnkgdGhlIG51bWJlciBvZiBkaXNwZW5zZXJzIG9uIHRoZSBsZXZlbCwgdGhlbiBpbmNyZWFzZWQgYWdhaW5cbiAgICAgICAgLy8gYnkgYSBoaWRkZW4gZGlmZmljdWx0eSBmYWN0b3IgKGxldmVsIGN5Y2xlcykuXG4gICAgICAgIHJldHVybiBNQVhfUk9DS1MgKyB0aGlzLmRpc3BlbnNlcnMubGVuZ3RoICogRElTUEVOU0VSX01BWF9ST0NLUyArIEdhbWUuc2Vzc2lvbi5oaWRkZW5GYWN0b3IoKSAqIEhJRERFTl9GQUNUT1JfTUFYX1JPQ0tTO1xuICAgIH1cbn1cbiIsIi8qKlxuICogYEdhbWVTZXNzaW9uYCBpcyBhIGNsYXNzIHRoYXQgcmVwcmVzZW50cy4uLiB3ZWxsLCBhIGdhbWUgc2Vzc2lvbiEgSXQgaXMgY3JlYXRlZCB3aGVuIHRoZVxuICogcGxheWVyIHByZXNzZXMgYFBgIGF0IHRoZSBtYWluIG1lbnUsIGFuZCBlbmRzIHdoZW4gdGhlIHBsYXllciBydW5zIG91dCBvZiBsaXZlcy5cbiAqXG4gKiBUaGUgZ2FtZSBzZXNzaW9uIHRyYWNrcyB2YWx1ZXMgdGhhdCBwZXJzaXN0IGFjcm9zcyBsZXZlbHMgKGxpa2UgbnVtYmVyIG9mIGxpdmVzLCBzY29yZSxcbiAqIHRoZSBsZXZlbCBudW1iZXIsIGV0Yy4pLiBNb3N0IG9mIHRoZSBhY3R1YWwgaW4tZ2FtZSBsb2dpYyBpdCBoYW5kcyBvZmYgdG8gYFBsYXlpbmdGaWVsZGAuXG4gKi9cblxuaW1wb3J0IHsgUExBWV9TUEVFRFMsIFNDT1JFX1JPQ0ssIFNDT1JFX1NUQVRVRSwgU0NPUkVfVFJFQVNVUkUsIEhJRERFTl9GQUNUT1JfUExBWV9TUEVFRCB9IGZyb20gJy4vQ29uc3RhbnRzJztcbmltcG9ydCB7IEdhbWUgfSBmcm9tICcuL0dhbWUnO1xuaW1wb3J0IHsgUGxheWluZ0ZpZWxkIH0gZnJvbSAnLi9QbGF5aW5nRmllbGQnO1xuaW1wb3J0IHsgTGV2ZWwgfSBmcm9tICcuL0xldmVsJztcbmltcG9ydCB7IFNjcmVlbiB9IGZyb20gJy4vU2NyZWVuJztcbmltcG9ydCB7IElucHV0IH0gZnJvbSAnLi9JbnB1dCc7XG5cbmV4cG9ydCBjbGFzcyBHYW1lU2Vzc2lvbiB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuc2NvcmUgPSAwO1xuICAgICAgICB0aGlzLmxldmVsTnVtYmVyID0gMDtcbiAgICAgICAgdGhpcy5sZXZlbEN5Y2xlID0gMTtcbiAgICAgICAgdGhpcy5saXZlcyA9IDU7XG4gICAgICAgIHRoaXMubmV4dExpZmUgPSAxMDA7XG4gICAgICAgIHRoaXMucGF1c2VkID0gZmFsc2U7XG4gICAgfVxuXG4gICAgdXBkYXRlKCkge1xuICAgICAgICAvLyBUaGUgYEdhbWVgIGNvbnRyb2xzIHRoZSBvdmVyYWxsIGdhbWUgbG9vcCwgd2hpY2ggcnVucyBhdCBhIGZpeGVkIDYwIGZyYW1lcyBwZXIgc2Vjb25kLlxuICAgICAgICAvL1xuICAgICAgICAvLyBIb3dldmVyLCBMYWRkZXIgaGFzIHRoZSBjb25jZXB0IG9mIFwicGxheSBzcGVlZFwiIHdoaWNoIHRoZSBwbGF5ZXIgY2FuIGNoYW5nZSBhdCB0aGUgbWFpblxuICAgICAgICAvLyBtZW51LCBhbmQgaXQgY29udHJvbHMgaG93IGZhc3QgdGhlIGdhbWUgcnVucy4gVG8gYWNjb21wbGlzaCB0aGF0LCB3ZSBjYW4gZG8gYSBzZWNvbmRcbiAgICAgICAgLy8gZnJhbWUgZ2F0ZSBoZXJlLiBUaGlzIGdhdGUgc2V0cyBhIGZsYWcgY2FsbGVkIGBtb3ZlRnJhbWVgIElGIHRoaW5ncyBjYW4gbW92ZSBpbiB0aGlzIGZyYW1lLlxuICAgICAgICAvL1xuICAgICAgICAvLyBXZSBkbyBpdCB0aGlzIHdheSBzbyB0aGF0IGFuaW1hdGlvbnMgKGxpa2UgdGhlIHBsYXkgZGVhdGggYW5pbWF0aW9uLCBvciB0aGUgZW5kLW9mLWxldmVsXG4gICAgICAgIC8vIHNjb3JlIGFuaW1hdGlvbikgY2FuIHJ1biBhdCB0aGUgc2FtZSBzcGVlZCBubyBtYXR0ZXIgd2hhdCB0aGUgcGxheSBzcGVlZCBpcy5cbiAgICAgICAgbGV0IG5vdyA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgICAgICBsZXQgbGFzdEZyYW1lID0gdGhpcy5sYXN0RnJhbWUgfHwgMDtcbiAgICAgICAgbGV0IG1vdmVGcmFtZSA9IGZhbHNlO1xuXG4gICAgICAgIGlmIChub3cgLSBsYXN0RnJhbWUgPj0gKHRoaXMubmV4dEZyYW1lIHx8IDApKSB7XG4gICAgICAgICAgICBtb3ZlRnJhbWUgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5uZXh0RnJhbWUgPSBub3cgKyB0aGlzLm1vdmVGcmFtZU1pbGxpc2Vjb25kRGVsYXkoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnBhdXNlZCAmJiBbSW5wdXQuQWN0aW9uLlBBVVNFLCBJbnB1dC5BY3Rpb24uUkVTVU1FXS5pbmNsdWRlcyhJbnB1dC5sYXN0QWN0aW9uKCkpKSB7XG4gICAgICAgICAgICB0aGlzLnBhdXNlZCA9IGZhbHNlO1xuICAgICAgICAgICAgSW5wdXQuY29uc3VtZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLnBhdXNlZCAmJiBJbnB1dC5sYXN0QWN0aW9uKCkgPT09IElucHV0LkFjdGlvbi5QQVVTRSkge1xuICAgICAgICAgICAgdGhpcy5wYXVzZWQgPSB0cnVlO1xuICAgICAgICAgICAgSW5wdXQuY29uc3VtZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMucGF1c2VkKSByZXR1cm47XG5cbiAgICAgICAgLy8gSWYgd2UgaGF2ZW4ndCBpbnN0YW50aWF0ZWQgdGhlIHBsYXlpbmcgZmllbGQgeWV0LCBjcmVhdGUgaXQgbm93LlxuICAgICAgICBpZiAoIXRoaXMuZmllbGQpIHRoaXMuZmllbGQgPSBuZXcgUGxheWluZ0ZpZWxkKHRoaXMubGV2ZWxOdW1iZXIpO1xuXG4gICAgICAgIC8vIEhhbmQgb2ZmIHRvIHRoZSBwbGF5aW5nIGZpZWxkIGZvciBhY3R1YWwgaW4tZ2FtZSBsb2dpY1xuICAgICAgICB0aGlzLmZpZWxkLnVwZGF0ZShtb3ZlRnJhbWUpO1xuXG4gICAgICAgIHRoaXMuaGFuZGxlQ2hlYXRDb2RlcygpO1xuICAgIH1cblxuICAgIGRyYXcoKSB7XG4gICAgICAgIGlmICh0aGlzLmZpZWxkKSB0aGlzLmZpZWxkLmRyYXcoKTtcblxuICAgICAgICBsZXQgc3RhdCA9IFtcbiAgICAgICAgICAgIFN0cmluZyh0aGlzLmxpdmVzKS5wYWRTdGFydCgyLCAnICcpLFxuICAgICAgICAgICAgU3RyaW5nKHRoaXMubGV2ZWxOdW1iZXIgKyAxKS5wYWRTdGFydCgyLCAnICcpLFxuICAgICAgICAgICAgU3RyaW5nKHRoaXMuc2NvcmUpLnBhZFN0YXJ0KDYsICcgJyksXG4gICAgICAgICAgICB0aGlzLmZpZWxkID8gU3RyaW5nKHRoaXMuZmllbGQudGltZSkucGFkU3RhcnQoNCwgJyAnKSA6ICcnXG4gICAgICAgIF07XG4gICAgICAgIFNjcmVlbi53cml0ZSgwLCAyMSwgYExhZHMgICAke3N0YXRbMF19ICAgICBMZXZlbCAgICR7c3RhdFsxXX0gICAgICBTY29yZSAgICR7c3RhdFsyXX0gICAgICBCb251cyB0aW1lICAgJHtzdGF0WzNdfWApO1xuXG4gICAgICAgIGlmICh0aGlzLnBhdXNlZCkge1xuICAgICAgICAgICAgU2NyZWVuLndyaXRlKDAsIDIzLCAnUGF1c2VkIC0gdHlwZSBFU0NhcGUgb3IgUkVUVVJOIHRvIGNvbnRpbnVlLicpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVzdGFydExldmVsKCkge1xuICAgICAgICB0aGlzLmZpZWxkID0gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIHN0YXJ0TmV4dExldmVsKCkge1xuICAgICAgICB0aGlzLmZpZWxkID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmxldmVsTnVtYmVyKys7XG4gICAgICAgIGlmICh0aGlzLmxldmVsTnVtYmVyICUgTGV2ZWwuTEVWRUxfQ09VTlQgPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMubGV2ZWxDeWNsZSsrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdXBkYXRlU2NvcmUoc2NvcmVUeXBlKSB7XG4gICAgICAgIHN3aXRjaCAoc2NvcmVUeXBlKSB7XG4gICAgICAgICAgICBjYXNlIFNDT1JFX1JPQ0s6XG4gICAgICAgICAgICAgICAgdGhpcy5zY29yZSArPSAyMDA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFNDT1JFX1NUQVRVRTpcbiAgICAgICAgICAgICAgICB0aGlzLnNjb3JlICs9IHRoaXMuZmllbGQudGltZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgU0NPUkVfVFJFQVNVUkU6XG4gICAgICAgICAgICAgICAgLy8gQWRkZWQgcmVwZWF0ZWRseSBhZnRlciB3aW5uaW5nIHRoZSBsZXZlbFxuICAgICAgICAgICAgICAgIHRoaXMuc2NvcmUgKz0gMTA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBoaWRkZW5GYWN0b3IoKSB7XG4gICAgICAgIC8vIFRoaXMgXCJoaWRkZW5cIiBkaWZmaWN1bHR5IGxldmVsIGluY3JlYXNlcyBzdGVhZGlseSBhcyB0aGUgcGxheWVyIGNvbXBsZXRlcyBhXG4gICAgICAgIC8vIGxldmVsIGN5Y2xlIChldmVyeSB0aW1lIHRoZXkgcmVhY2ggdGhlIEVhc3kgU3RyZWV0IGxldmVsKS4gVGhpcyBtYWtlcyB0aGVcbiAgICAgICAgLy8gZ2FtZSBzbG93bHkgaGFyZGVyIGFzIHlvdSBrZWVwIHBsYXlpbmcuXG4gICAgICAgIHJldHVybiBNYXRoLmZsb29yKHRoaXMubGV2ZWxOdW1iZXIgLyBMZXZlbC5MRVZFTF9DT1VOVCk7XG4gICAgfVxuXG4gICAgbW92ZUZyYW1lTWlsbGlzZWNvbmREZWxheSgpIHtcbiAgICAgICAgLy8gUmVnYXJkbGVzcyBvZiBwbGF5IHNwZWVkLCB0aGUgZ2FtZSBnZXRzIHNsaWdodGx5IGZhc3RlciBldmVyeSBsZXZlbCBjeWNsZVxuICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihQTEFZX1NQRUVEU1tHYW1lLnBsYXlTcGVlZF0gLSB0aGlzLmhpZGRlbkZhY3RvcigpICogSElEREVOX0ZBQ1RPUl9QTEFZX1NQRUVEICogUExBWV9TUEVFRFNbR2FtZS5wbGF5U3BlZWRdKTtcbiAgICB9XG5cbiAgICBoYW5kbGVDaGVhdENvZGVzKCkge1xuICAgICAgICAvLyBDaGVhdCBjb2RlcyBhcmUgdXNlZnVsIGZvciB0ZXN0aW5nLCBhbmQgdGhpcyBnYW1lIGlzIG5vIGV4Y2VwdGlvbi4gT2YgY291cnNlXG4gICAgICAgIC8vIFRIRVNFIGNoZWF0IGNvZGVzIGRvIG5vdCBiZWxvbmcgaGVyZSwgYXMgdGhleSB3b3VsZG4ndCBiZSBjcmVhdGVkIHVudGlsIDExIHllYXJzXG4gICAgICAgIC8vIGxhdGVyLCBidXQgdGhhdCB3b24ndCBzdG9wIG1lIGZyb20gaW5zZXJ0aW5nIHRoZW0gYW55d2hlcmUgSSBnZXQgdGhlIGNoYW5jZSFcbiAgICAgICAgLy9cbiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT0gICAgID09PT09PT09PT09PT09PSAgICAgPT09PT09PT09PT09PT09ICAgPT09PT09PT0gID09PT09PT09XG4gICAgICAgIC8vIFxcXFwgLiAuIC4gLiAuIC4gLlxcXFwgICAvLy4gLiAuIC4gLiAuIC5cXFxcICAgLy8uIC4gLiAuIC4gLiAuXFxcXCAgXFxcXC4gLiAuXFxcXC8vIC4gLiAvL1xuICAgICAgICAvLyB8fC4gLiAuX19fX18uIC4gLnx8IHx8LiAuIC5fX19fXy4gLiAufHwgfHwuIC4gLl9fX19fLiAuIC58fCB8fCAuIC4gLlxcLyAuIC4gLnx8XG4gICAgICAgIC8vIHx8IC4gLnx8ICAgfHwuIC4gfHwgfHwgLiAufHwgICB8fC4gLiB8fCB8fCAuIC58fCAgIHx8LiAuIHx8IHx8LiAuIC4gLiAuIC4gLiB8fFxuICAgICAgICAvLyB8fC4gLiB8fCAgIHx8IC4gLnx8IHx8LiAuIHx8ICAgfHwgLiAufHwgfHwuIC4gfHwgICB8fCAuIC58fCB8fCAuIHwgLiAuIC4gLiAufHxcbiAgICAgICAgLy8gfHwgLiAufHwgICB8fC4gXy18fCB8fC1fIC58fCAgIHx8LiAuIHx8IHx8IC4gLnx8ICAgfHwuIF8tfHwgfHwtXy58XFwgLiAuIC4gLiB8fFxuICAgICAgICAvLyB8fC4gLiB8fCAgIHx8LScgIHx8IHx8ICBgLXx8ICAgfHwgLiAufHwgfHwuIC4gfHwgICB8fC0nICB8fCB8fCAgYHxcXF8gLiAufC4gLnx8XG4gICAgICAgIC8vIHx8IC4gX3x8ICAgfHwgICAgfHwgfHwgICAgfHwgICB8fF8gLiB8fCB8fCAuIF98fCAgIHx8ICAgIHx8IHx8ICAgfFxcIGAtXy98IC4gfHxcbiAgICAgICAgLy8gfHxfLScgfHwgIC58LyAgICB8fCB8fCAgICBcXHwuICB8fCBgLV98fCB8fF8tJyB8fCAgLnwvICAgIHx8IHx8ICAgfCBcXCAgLyB8LV8ufHxcbiAgICAgICAgLy8gfHwgICAgfHxfLScgICAgICB8fCB8fCAgICAgIGAtX3x8ICAgIHx8IHx8ICAgIHx8Xy0nICAgICAgfHwgfHwgICB8IFxcICAvIHwgIGB8fFxuICAgICAgICAvLyB8fCAgICBgJyAgICAgICAgIHx8IHx8ICAgICAgICAgYCcgICAgfHwgfHwgICAgYCcgICAgICAgICB8fCB8fCAgIHwgXFwgIC8gfCAgIHx8XG4gICAgICAgIC8vIHx8ICAgICAgICAgICAgLj09PScgYD09PS4gICAgICAgICAuPT09Jy5gPT09LiAgICAgICAgIC49PT0nIC89PS4gfCAgXFwvICB8ICAgfHxcbiAgICAgICAgLy8gfHwgICAgICAgICAuPT0nICAgXFxffC1fIGA9PT0uIC49PT0nICAgX3xfICAgYD09PS4gLj09PScgXy18LyAgIGA9PSAgXFwvICB8ICAgfHxcbiAgICAgICAgLy8gfHwgICAgICAuPT0nICAgIF8tJyAgICBgLV8gIGA9JyAgICBfLScgICBgLV8gICAgYD0nICBfLScgICBgLV8gIC98ICBcXC8gIHwgICB8fFxuICAgICAgICAvLyB8fCAgIC49PScgICAgXy0nICAgICAgICAgIGAtX19cXC5fLScgICAgICAgICBgLV8uL19fLScgICAgICAgICBgJyB8LiAvfCAgfCAgIHx8XG4gICAgICAgIC8vIHx8Lj09JyAgICBfLScgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGAnIHwgIC89PS58fFxuICAgICAgICAvLyA9PScgICAgXy0nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFwvICAgYD09XG4gICAgICAgIC8vIFxcICAgXy0nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGAtXyAgIC9cbiAgICAgICAgLy8gIGAnJyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgYCdcbiAgICAgICAgLy9cbiAgICAgICAgbGV0IHJlY2VudEtleXN0cm9rZXMgPSBJbnB1dC5oaXN0b3J5Lm1hcChldmVudCA9PiBldmVudC5rZXkpLmpvaW4oJycpLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgIGlmIChyZWNlbnRLZXlzdHJva2VzLm1hdGNoKC9JRENMRVYoXFxkXFxkKS8pKSB7XG4gICAgICAgICAgICAvLyBDaGFuZ2luZyBsZXZlbHMgaXMgYXMgc2ltcGxlIGFzIHNldHRpbmcgdGhlIGRlc2lyZWQgbGV2ZWwgbnVtYmVyXG4gICAgICAgICAgICAvLyBhbmQgdGhlbiB0aHJvd2luZyB0aGUgY3VycmVudCBwbGF5aW5nIGZpZWxkIGF3YXkuXG4gICAgICAgICAgICBJbnB1dC5jb25zdW1lKCk7XG4gICAgICAgICAgICB0aGlzLmxldmVsTnVtYmVyID0gcGFyc2VJbnQoUmVnRXhwLiQxLCAxMCk7XG4gICAgICAgICAgICB0aGlzLmZpZWxkID0gdW5kZWZpbmVkO1xuICAgICAgICB9IGVsc2UgaWYgKHJlY2VudEtleXN0cm9rZXMuaW5jbHVkZXMoXCJJRERRRFwiKSkge1xuICAgICAgICAgICAgSW5wdXQuY29uc3VtZSgpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJnb2QgbW9kZVwiKTtcbiAgICAgICAgfSBlbHNlIGlmIChyZWNlbnRLZXlzdHJva2VzLmluY2x1ZGVzKFwiSURLRkFcIikpIHtcbiAgICAgICAgICAgIC8vIEltbWVkaWF0ZWx5IGVuZCB0aGUgY3VycmVudCBsZXZlbCBhcyBpZiB3ZSdkIHRvdWNoZWQgdGhlIHJlYXN1cmUuXG4gICAgICAgICAgICBJbnB1dC5jb25zdW1lKCk7XG4gICAgICAgICAgICB0aGlzLmZpZWxkLndpbm5pbmcgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiLyoqXG4gKiBgR2FtZWAgaXMgYSBzaW5nbGV0b24gdGhhdCByZXByZXNlbnRzIHRoZSBydW5uaW5nIGdhbWUgaW4gdGhlIGJyb3dzZXIsXG4gKiBpbml0aWFsaXplcyBnYW1lIHN1Ym1vZHVsZXMsIGFuZCBoYW5kbGVzIHRoZSB0b3AtbGV2ZWwgZ2FtZSBsb29wLlxuICovXG5cbmltcG9ydCB7IFNwcml0ZSB9IGZyb20gJy4vU3ByaXRlJztcbmltcG9ydCB7IElucHV0IH0gZnJvbSAnLi9JbnB1dCc7XG5pbXBvcnQgeyBUZXh0IH0gZnJvbSAnLi9UZXh0JztcbmltcG9ydCB7IFZpZXdwb3J0IH0gZnJvbSAnLi9WaWV3cG9ydCc7XG5pbXBvcnQgeyBHQU1FX1dJRFRILCBHQU1FX0hFSUdIVCwgUExBWV9TUEVFRFMgfSBmcm9tICcuL0NvbnN0YW50cyc7XG5pbXBvcnQgeyBBdWRpbyB9IGZyb20gJy4vQXVkaW8nO1xuaW1wb3J0IHsgU2NyZWVuIH0gZnJvbSAnLi9TY3JlZW4nO1xuaW1wb3J0IHsgTWFpbk1lbnUgfSBmcm9tICcuL01haW5NZW51JztcbmltcG9ydCB7IEluc3RydWN0aW9uc01lbnUgfSBmcm9tICcuL0luc3RydWN0aW9uc01lbnUnO1xuaW1wb3J0IHsgR2FtZVNlc3Npb24gfSBmcm9tICcuL0dhbWVTZXNzaW9uJztcblxuZXhwb3J0IGNvbnN0IEdhbWUgPSB7XG4gICAgaW5pdCgpIHtcbiAgICAgICAgU3ByaXRlLmxvYWRTcHJpdGVzaGVldChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBhd2FpdCBWaWV3cG9ydC5pbml0KCk7XG4gICAgICAgICAgICBhd2FpdCBTY3JlZW4uaW5pdCgpO1xuICAgICAgICAgICAgYXdhaXQgU3ByaXRlLmluaXQoKTtcbiAgICAgICAgICAgIGF3YWl0IFRleHQuaW5pdCgpO1xuICAgICAgICAgICAgYXdhaXQgSW5wdXQuaW5pdCgpO1xuICAgICAgICAgICAgYXdhaXQgQXVkaW8uaW5pdCgpO1xuXG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsICgpID0+IHRoaXMubG9zdEZvY3VzKCkpO1xuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgKCkgPT4gdGhpcy5nYWluZWRGb2N1cygpKTtcblxuICAgICAgICAgICAgdGhpcy5zdGFydCgpO1xuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgc3RhcnQoKSB7XG4gICAgICAgIHRoaXMuZnJhbWUgPSAwO1xuICAgICAgICB0aGlzLnBsYXlTcGVlZCA9IDA7XG4gICAgICAgIHRoaXMubWVudSA9IG5ldyBNYWluTWVudSgpO1xuXG4gICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gdGhpcy5vbkZyYW1lKCkpO1xuICAgIH0sXG5cbiAgICBvbkZyYW1lKCkge1xuICAgICAgICBsZXQgZnBzID0gNjA7XG4gICAgICAgIGxldCBub3cgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgICAgbGV0IGxhc3RGcmFtZSA9IHRoaXMubGFzdEZyYW1lIHx8IDA7XG5cbiAgICAgICAgLy8gTm90ZTogd2UgYXJlIHVzaW5nIGByZXF1ZXN0QW5pbWF0aW9uRnJhbWVgLCB3aGljaCB3aWxsIGNhbGwgb3VyIG9uRnJhbWUgaGFuZGxlclxuICAgICAgICAvLyA2MCB0aW1lcyBwZXIgc2Vjb25kIGluIG1vc3QgY2FzZXMuIEhvd2V2ZXIsIGl0IGNhbiBiZSBoaWdoZXIgKHRoZSBicm93c2VyIG1heVxuICAgICAgICAvLyByZXNwZWN0IHRoZSB1c2VyJ3MgcmVmcmVzaCBzZXR0aW5ncywgd2hpY2ggY291bGQgYmUgMTIwSHogb3IgaGlnaGVyIGZvciBleGFtcGxlKS5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gSXQncyBzYWZlc3QgdG8gaGF2ZSBhIGNoZWNrIGxpa2Ugd2UgZG8gaGVyZSwgd2hlcmUgd2UgZXhwbGljaXRseSBsaW1pdCB0aGUgbnVtYmVyXG4gICAgICAgIC8vIG9mIHVwZGF0ZSBjYWxscyB0byA2MCB0aW1lcyBwZXIgc2Vjb25kLlxuICAgICAgICBpZiAobm93IC0gbGFzdEZyYW1lID49IDEwMDAgLyBmcHMpIHtcbiAgICAgICAgICAgIHRoaXMuZnJhbWUrKztcbiAgICAgICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgICAgICAgICB0aGlzLmxhc3RGcmFtZSA9IG5vdztcbiAgICAgICAgfVxuXG4gICAgICAgIFZpZXdwb3J0LnJlc2l6ZSgpO1xuICAgICAgICB0aGlzLmRyYXcoKTtcblxuICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHRoaXMub25GcmFtZSgpKTtcbiAgICB9LFxuXG4gICAgdXBkYXRlKCkge1xuICAgICAgICAvLyBQdWxsIGluIGZyYW1lIGJ5IGZyYW1lIGJ1dHRvbiBwdXNoZXMgLyBrZXlwcmVzc2VzIC8gbW91c2UgY2xpY2tzXG4gICAgICAgIElucHV0LnVwZGF0ZSgpO1xuXG4gICAgICAgIC8vIHBlcmZvcm0gYW55IHBlci1mcmFtZSBhdWRpbyB1cGRhdGVzXG4gICAgICAgIEF1ZGlvLnVwZGF0ZSgpO1xuXG4gICAgICAgIGlmICh0aGlzLm1lbnUpIHtcbiAgICAgICAgICAgIHRoaXMubWVudS51cGRhdGUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnNlc3Npb24pIHRoaXMuc2Vzc2lvbi51cGRhdGUoKTtcbiAgICB9LFxuXG4gICAgZHJhdygpIHtcbiAgICAgICAgLy8gUmVzZXQgY2FudmFzIHRyYW5zZm9ybSBhbmQgc2NhbGVcbiAgICAgICAgVmlld3BvcnQuY3R4LnNldFRyYW5zZm9ybShWaWV3cG9ydC5zY2FsZSwgMCwgMCwgVmlld3BvcnQuc2NhbGUsIDAsIDApO1xuXG4gICAgICAgIC8vIENsZWFyIGNhbnZhcy4gTm90ZSB3ZSBkb24ndCBnbyBmb3IgcHVyZSBibGFjayBidXQgcmF0aGVyIGEgZGFyayBncmF5LCB0byBzaW11bGF0ZVxuICAgICAgICAvLyB0aGUgcmVsYXRpdmVseSBicmlnaHQgcGhvc3Bob3JzIG9uIHRoZSBLYXlwcm8gSUkuIChXZSBhcmUgZ29pbmcgdG8gYWRkIHNjYW4gbGluZXNcbiAgICAgICAgLy8gYXQgdGhlIGVuZCB3aGljaCB3aWxsIGFwcGVhciB0byBkYXJrZW4gdGhlIHdob2xlIHNjcmVlbiwgc28gdGhlIG92ZXJhbGwgZWZmZWN0XG4gICAgICAgIC8vIHdpbGwgYmUgYSBsaXR0bGUgZGFya2VyIHRoYW4gdGhpcyBjb2xvci4pXG4gICAgICAgIFZpZXdwb3J0LmN0eC5maWxsU3R5bGUgPSAnIzE4MTgxOCc7XG4gICAgICAgIFZpZXdwb3J0LmN0eC5maWxsUmVjdCgwLCAwLCBWaWV3cG9ydC53aWR0aCwgVmlld3BvcnQuaGVpZ2h0KTtcblxuICAgICAgICAvLyBDZW50ZXIgdGhlIDgweDI1IGNoYXJhY3RlciBcInNjcmVlblwiIGluIHRoZSB2aWV3cG9ydFxuICAgICAgICBWaWV3cG9ydC5jdHgudHJhbnNsYXRlKChWaWV3cG9ydC53aWR0aCAtIEdBTUVfV0lEVEgpIC8gMiB8IDAsIChWaWV3cG9ydC5oZWlnaHQgLSBHQU1FX0hFSUdIVCkgLyAyIHwgMCk7XG5cbiAgICAgICAgLy8gSGFuZCBvZmYgY29udHJvbCB0byBvdXIgc3VibW9kdWxlcyB0byBkcmF3IHdoYXRldmVyIHRoZXknZCBsaWtlLiBGb3IgYWxsIHRoZSBzdWJtb2R1bGVzXG4gICAgICAgIC8vIGJlbG93IHVzLCBcImRyYXdpbmdcIiBtZWFucyB3cml0aW5nIHRleHQgdG8gdGhlIFNjcmVlbi5cbiAgICAgICAgU2NyZWVuLmNsZWFyKCk7XG4gICAgICAgIGlmICh0aGlzLnNlc3Npb24pIHRoaXMuc2Vzc2lvbi5kcmF3KCk7XG4gICAgICAgIGlmICh0aGlzLm1lbnUpIHRoaXMubWVudS5kcmF3KCk7XG5cbiAgICAgICAgLy8gUmVuZGVyIHRoZSB0ZXh0IG9uIHRoZSBzY3JlZW4gdG8gdGhlIHZpZXdwb3J0LlxuICAgICAgICBTY3JlZW4uZHJhdyhWaWV3cG9ydC5jdHgpO1xuXG4gICAgICAgIC8vIEFmdGVyIGRyYXdpbmcgdGhlIFwic2NyZWVuXCIgKGNoYXJhY3RlcnMpLCBhZGQgc2NhbiBsaW5lcyBvbiB0b3AuIE91ciBzY2FuIGxpbmVzIGFyZSBhbG1vc3RcbiAgICAgICAgLy8gbm90IHZpc2libGUsIGJ1dCBtb3ZlIHNsb3dseSBhbmQgaW50cm9kdWNlIHN1YnRsZSB2aXN1YWwgc2hpZnRzIGluIHRoZSBjaGFyYWN0ZXJzIG9uIHNjcmVlbixcbiAgICAgICAgLy8gd2hpY2ggaXMgdGhlIGVmZmVjdCB3ZSBhcmUgZ29pbmcgZm9yLlxuICAgICAgICAvL1xuICAgICAgICAvLyAoVGVjaG5pY2FsbHkgc2NhbiBsaW5lcyBzaG91bGQgYmUgSU4gQkVUV0VFTiByb3dzIG9mIHBpeGVscywgYW5kIHdoYXQgd2UncmUgYWN0dWFsbHkgc2ltdWxhdGluZ1xuICAgICAgICAvLyBoZXJlIGlzIG91ciBleWViYWxscyBjbG9ja2luZyB0aGUgc2NyZWVuIHJlZnJlc2guIFdlJ3JlIGdvaW5nIGZvciBhIGdlbmVyYWwgZmVlbGluZyBoZXJlLilcbiAgICAgICAgVmlld3BvcnQuY3R4LmZpbGxTdHlsZSA9ICdyZ2JhKDAsIDAsIDAsIDAuNSknO1xuICAgICAgICBmb3IgKGxldCBpID0gLVZpZXdwb3J0LmhlaWdodCAvIDI7IGkgPCBWaWV3cG9ydC5oZWlnaHQgLyAyOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBrID0gKCh0aGlzLmZyYW1lIC8gNCkgJSA0KSArIGkgKiA0O1xuICAgICAgICAgICAgVmlld3BvcnQuY3R4LmZpbGxSZWN0KC1WaWV3cG9ydC53aWR0aCwgaywgVmlld3BvcnQud2lkdGggKiAyLCAyKTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBzdGFydFNlc3Npb24oKSB7XG4gICAgICAgIHRoaXMubWVudSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5zZXNzaW9uID0gbmV3IEdhbWVTZXNzaW9uKCk7XG4gICAgfSxcblxuICAgIHNob3dNYWluTWVudSgpIHtcbiAgICAgICAgdGhpcy5tZW51ID0gbmV3IE1haW5NZW51KCk7XG4gICAgICAgIHRoaXMuc2Vzc2lvbiA9IHVuZGVmaW5lZDtcbiAgICB9LFxuXG4gICAgc2hvd0luc3RydWN0aW9ucygpIHtcbiAgICAgICAgdGhpcy5tZW51ID0gbmV3IEluc3RydWN0aW9uc01lbnUoKTtcbiAgICAgICAgdGhpcy5zZXNzaW9uID0gdW5kZWZpbmVkO1xuICAgIH0sXG5cbiAgICBsb3N0Rm9jdXMoKSB7XG4gICAgICAgIC8vIElmIHdlIGxvc2UgZm9jdXMsIGF1dG9tYXRpY2FsbHkgcGF1c2UgdGhlIGdhbWUgc2Vzc2lvbiAoaWYgdGhlcmUgaXMgb25lKS5cbiAgICAgICAgaWYgKHRoaXMuc2Vzc2lvbikgdGhpcy5zZXNzaW9uLnBhdXNlZCA9IHRydWU7XG4gICAgfSxcblxuICAgIGdhaW5lZEZvY3VzKCkge1xuICAgICAgICAvLyBEbyBub3RoaW5nIC0gd2UnbGwgbGV0IHRoZSB1c2VyIGhpdCBlbnRlciB0byByZXN1bWUgcGxheWluZy5cbiAgICB9XG59O1xuIiwiLyoqXG4gKiBUaGlzIGlzIHRoZSBlbnRyeSBwb2ludCBmb3IgdGhlIGdhbWUuXG4gKi9cbmltcG9ydCB7IEdhbWUgfSBmcm9tICcuL0dhbWUnO1xuXG5HYW1lLmluaXQoKTtcbiJdLCJuYW1lcyI6WyJERUFUSF9GUkFNRVMiXSwibWFwcGluZ3MiOiI7OztJQUFBO0lBQ0E7SUFDQTtBQUlBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDTyxNQUFNLFlBQVksR0FBRyxFQUFFLENBQUM7SUFDeEIsTUFBTSxhQUFhLFVBQVUsRUFBRSxDQUFDO0FBQ3ZDO0lBQ0E7SUFDTyxNQUFNLFVBQVUsR0FBRyxDQUFDLENBQUM7SUFDckIsTUFBTSxXQUFXLEdBQUcsRUFBRSxDQUFDO0FBRzlCO0lBQ0E7SUFDQTtJQUNBO0lBQ08sTUFBTSxZQUFZLEdBQUcsQ0FBQyxDQUFDO0FBQzlCO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNPLE1BQU0sVUFBVSxHQUFHLENBQUMsWUFBWSxHQUFHLENBQUMsSUFBSSxVQUFVLEdBQUcsWUFBWSxDQUFDO0lBQ2xFLE1BQU0sV0FBVyxHQUFHLENBQUMsYUFBYSxHQUFHLENBQUMsSUFBSSxXQUFXLEdBQUcsWUFBWSxDQUFDO0FBQzVFO0lBQ0E7SUFDTyxNQUFNLFVBQVUsR0FBRyxFQUFFLENBQUM7SUFDdEIsTUFBTSxVQUFVLEdBQUcsRUFBRSxDQUFDO0FBQzdCO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ08sTUFBTSxXQUFXLEdBQUcsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7QUFDbEQ7SUFDQTtJQUNPLE1BQU0sU0FB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QUMsTUFBTSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLENBQUM7SUFDekQ7O0lDblJBO0lBQ08sTUFBTSxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUM7QUFDNUM7SUFDQTtJQUNPLE1BQU0sS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxLQUFLLENBQUMsa0JBQWtCLEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUMsT0FBTyxDQUFDLEVBQUM7QUFDbE47SUFDQTtJQUNPLE1BQU0sS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUs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QUMsSUFBSSxLQUFLLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxJQUFJLE1BQU0sR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLEVBQUUsWUFBWSxFQUFFLG9CQUFvQixFQUFFLFlBQVksRUFBRSxhQUFhLENBQUMsRUFBRSxFQUFFLEtBQUssRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLFFBQVEsRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxVQUFVLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxRQUFRLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxZQUFZLEVBQUUsb0JBQW9CLEVBQUUsWUFBWSxFQUFFLGNBQWMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLEVBQUUsWUFBWSxFQUFFLG9CQUFvQixFQUFFLFlBQVksRUFBRSxhQUFhLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQzs7SUNNMzlCLE1BQU0sS0FBSyxHQUFHO0lBQ3JCLElBQUksSUFBSSxHQUFHO0lBQ1gsUUFBUSxLQUFLLENBQUMsV0FBVyxHQUFHLEtBQUssQ0FBQztBQUNsQztJQUNBLFFBQVEsS0FBSyxDQUFDLEdBQUcsR0FBRyxLQUFLLENBQUM7SUFDMUIsUUFBUSxLQUFLLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQyxHQUFHLENBQUMsVUFBVSxFQUFFLENBQUM7SUFDN0MsUUFBUSxLQUFLLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLFdBQVcsQ0FBQyxDQUFDO0lBQ25ELFFBQVEsSUFBSSxDQUFDLFlBQVksR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDO0FBQ3hDO0lBQ0EsUUFBUSxLQUFLLENBQUMsT0FBTyxHQUFHLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxHQUFHLEVBQUUsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDN0YsUUFBUSxLQUFLLENBQUMsSUFBSSxHQUFHLEdBQUcsSUFBSSxFQUFFLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksR0FBRyxHQUFHLENBQUMsRUFBRSxNQUFNLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDdkUsUUFBUSxLQUFLLENBQUMsV0FBVyxHQUFHLEdBQUcsRUFBRSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDbkcsUUFBUSxLQUFLLENBQUMsTUFBTSxHQUFHLEdBQUcsR0FBRyxFQUFFLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLE9BQU8sR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQ2pFLFFBQVEsS0FBSyxDQUFDLEtBQUssR0FBRyxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsR0FBRyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQzlFO0lBQ0EsUUFBUSxLQUFLLENBQUMsT0FBTyxHQUFHLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxHQUFHLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUM5RixRQUFRLEtBQUssQ0FBQyxJQUFJLEdBQUcsS0FBSyxDQUFDLEdBQUcsZUFBZSxDQUFDLENBQUM7QUFDL0M7SUFDQTtJQUNBO0lBQ0EsS0FBSztBQUNMO0lBQ0EsSUFBSSxNQUFNLEdBQUc7SUFDYixRQUFRLElBQUksQ0FBQyxLQUFLLENBQUMsV0FBVyxFQUFFLE9BQU87QUFDdkM7SUFDQSxRQUFRLElBQUksQ0FBQyxLQUFLLENBQUMsWUFBWSxFQUFFO0lBQ2pDO0lBQ0E7SUFDQSxZQUFZLEtBQUssQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDO0lBQ3RDLFNBQVM7SUFDVCxLQUFLO0FBQ0w7SUFDQSxJQUFJLElBQUksQ0FBQyxLQUFLLEVBQUU7SUFDaEIsUUFBUSxJQUFJLENBQUMsS0FBSyxDQUFDLFdBQVcsRUFBRSxPQUFPO0lBQ3ZDLFFBQVEsSUFBSSxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUM7SUFDdkIsS0FBSztBQUNMO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7QUFDQTtJQUNBLElBQUksS0FBSyxHQUFHO0lBQ1osUUFBUSxLQUFLLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLEdBQUcsQ0FBQyxXQUFXLEdBQUcsQ0FBQyxDQUFDLENBQUM7SUFDL0UsS0FBSztBQUNMO0lBQ0EsSUFBSSxPQUFPLEdBQUc7SUFDZCxRQUFRLEtBQUssQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLHVCQUF1QixDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsR0FBRyxDQUFDLFdBQVcsR0FBRyxDQUFDLENBQUMsQ0FBQztJQUMvRSxLQUFLO0lBQ0wsQ0FBQzs7SUN2REQ7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0FBS0E7SUFDTyxNQUFNLE1BQU0sR0FBRztJQUN0QixJQUFJLElBQUksR0FBRztJQUNYLFFBQVEsSUFBSSxDQUFDLE1BQU0sR0FBRyxFQUFFLENBQUM7SUFDekIsUUFBUSxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsYUFBYSxFQUFFLENBQUMsRUFBRSxFQUFFO0lBQ2hELFlBQVksSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7SUFDakMsU0FBUztJQUNULFFBQVEsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDO0lBQ3JCLEtBQUs7QUFDTDtJQUNBLElBQUksS0FBSyxHQUFHO0lBQ1osUUFBUSxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsYUFBYSxFQUFFLENBQUMsRUFBRSxFQUFFO0lBQ2hELFlBQVksS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFlBQVksRUFBRSxDQUFDLEVBQUUsRUFBRTtJQUNuRCxnQkFBZ0IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUM7SUFDeEMsYUFBYTtJQUNiLFNBQVM7SUFDVCxLQUFLO0FBQ0w7SUFDQSxJQUFJLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLElBQUksRUFBRTtJQUN0QixRQUFRLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxFQUFFLElBQUksR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ2hEO0lBQ0EsUUFBUSxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtJQUM5QyxZQUFZLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO0lBQ3JELGdCQUFnQixJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3ZELGFBQWE7SUFDYixTQUFTO0lBQ1QsS0FBSztBQUNMO0lBQ0EsSUFBSSxJQUFJLENBQUMsR0FBRyxFQUFFO0lBQ2QsUUFBUSxJQUFJLElBQUksR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxHQUFHLElBQUksR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUNuRTtJQUNBLFFBQVEsSUFBSSxDQUFDLFFBQVE7SUFDckIsWUFBWSxHQUFHO0lBQ2YsWUFBWSxJQUFJLENBQUMsY0FBYyxDQUFDLElBQUksRUFBRSxRQUFRLENBQUMsS0FBSyxDQUFDO0lBQ3JELFlBQVksQ0FBQyxFQUFFLENBQUM7SUFDaEIsWUFBWSxJQUFJLENBQUMsSUFBSTtJQUNyQixTQUFTLENBQUM7SUFDVixLQUFLO0lBQ0wsQ0FBQzs7SUMzQ00sTUFBTSxRQUFRLENBQUM7SUFDdEIsSUFBSSxXQUFXLEdBQUc7SUFDbEIsS0FBSztBQUNMO0lBQ0EsSUFBSSxNQUFNLEdBQUc7SUFDYixRQUFRLFFBQVEsS0FBSyxDQUFDLE9BQU8sRUFBRSxDQUFDLFdBQVcsRUFBRTtJQUM3QyxZQUFZLEtBQUssR0FBRztJQUNwQixnQkFBZ0IsS0FBSyxDQUFDLE9BQU8sRUFBRSxDQUFDO0lBQ2hDLGdCQUFnQixJQUFJLENBQUMsWUFBWSxFQUFFLENBQUM7SUFDcEMsZ0JBQWdCLE1BQU07SUFDdEIsWUFBWSxLQUFLLEdBQUc7SUFDcEIsZ0JBQWdCLEtBQUssQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUNoQyxnQkFBZ0IsSUFBSSxDQUFDLFNBQVMsR0FBRyxDQUFDLElBQUksQ0FBQyxTQUFTLEdBQUcsQ0FBQyxJQUFJLFdBQVcsQ0FBQyxNQUFNLENBQUM7SUFDM0UsZ0JBQWdCLE1BQU07SUFDdEIsWUFBWSxLQUFLLEdBQUc7SUFDcEIsZ0JBQWdCLEtBQUssQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUNoQyxnQkFBZ0IsSUFBSSxDQUFDLGdCQUFnQixFQUFFLENBQUM7SUFDeEMsZ0JBQWdCLE1BQU07SUFDdEIsWUFBWSxLQUFLLEdBQUc7SUFDcEIsZ0JBQWdCLEtBQUssQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUNoQyxnQkFBZ0IsSUFBSSxDQUFDLGdCQUFnQixFQUFFLENBQUM7SUFDeEMsZ0JBQWdCLE1BQU07SUFDdEIsU0FBUztJQUNULEtBQUs7QUFDTDtJQUNBLElBQUksSUFBSSxHQUFHO0lBQ1gsUUFBUSxJQUFJLE9BQU8sR0FBRyxHQUFHLENBQUM7SUFDMUIsUUFBUSxJQUFJLFFBQVEsR0FBRyxHQUFHLENBQUM7QUFDM0I7SUFDQSxRQUFRLElBQUksVUFBVSxHQUFHO0lBQ3pCLFlBQVksQ0FBQyxZQUFZLENBQUM7SUFDMUIsWUFBWSxDQUFDLFlBQVksQ0FBQztJQUMxQixZQUFZLENBQUMsY0FBYyxDQUFDO0lBQzVCLFlBQVksQ0FBQyxDQUFDO0lBQ2QsWUFBWSxDQUFDLENBQUM7SUFDZCxTQUFTLENBQUM7QUFDVjtJQUNBLFFBQVEsTUFBTSxDQUFDLEtBQUssRUFBRSxDQUFDO0lBQ3ZCLFFBQVEsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFO0lBQzNCLFlBQVksQ0FBQyxpREFBaUQsQ0FBQztJQUMvRCxZQUFZLENBQUMseUVBQXlFLENBQUM7SUFDdkYsWUFBWSxDQUFDLG1FQUFtRSxDQUFDO0lBQ2pGLFlBQVksQ0FBQyxvRUFBb0UsQ0FBQztJQUNsRixZQUFZLENBQUMsOERBQThELENBQUM7SUFDNUUsWUFBWSxDQUFDLDhEQUE4RCxDQUFDO0lBQzVFLFlBQVksQ0FBQyw4REFBOEQsQ0FBQztJQUM1RSxZQUFZLENBQUMsQ0FBQztJQUNkLFlBQVksQ0FBQyxtREFBbUQsRUFBRSxPQUFPLENBQUMsQ0FBQztJQUMzRSxZQUFZLENBQUMsbURBQW1ELEVBQUUsUUFBUSxDQUFDLENBQUM7SUFDNUUsWUFBWSxDQUFDLG1EQUFtRCxFQUFFLElBQUksQ0FBQyxTQUFTLEdBQUcsQ0FBQyxDQUFDLEdBQUcsRUFBRSxXQUFXLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDOUcsWUFBWSxDQUFDLHNFQUFzRSxDQUFDO0lBQ3BGLFlBQVksQ0FBQyxtREFBbUQsQ0FBQztJQUNqRSxZQUFZLENBQUMsQ0FBQztJQUNkLFlBQVksQ0FBQyxrREFBa0QsQ0FBQztJQUNoRSxZQUFZLENBQUMsdUNBQXVDLEVBQUUsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDckUsWUFBWSxDQUFDLHVDQUF1QyxFQUFFLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3JFLFlBQVksQ0FBQyx1Q0FBdUMsRUFBRSxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNyRSxZQUFZLENBQUMsdUNBQXVDLEVBQUUsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDckUsWUFBWSxDQUFDLHVDQUF1QyxFQUFFLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3JFLFlBQVksQ0FBQyxDQUFDO0lBQ2QsWUFBWSxDQUFDLHVCQUF1QixDQUFDO0lBQ3JDLFNBQVMsQ0FBQyxDQUFDO0lBQ1gsS0FBSztJQUNMOztJQ2hFTyxNQUFNLGdCQUFnQixDQUFDO0lBQzlCLElBQUksV0FBVyxHQUFHO0lBQ2xCLEtBQUs7QUFDTDtJQUNBLElBQUksTUFBTSxHQUFHO0lBQ2IsUUFBUSxJQUFJLEtBQUssQ0FBQyxPQUFPLEVBQUUsQ0FBQyxXQUFXLEVBQUUsS0FBSyxFQUFFLEVBQUU7SUFDbEQsWUFBWSxLQUFLLENBQUMsT0FBTyxFQUFFLENBQUM7SUFDNUIsWUFBWSxJQUFJLENBQUMsWUFBWSxFQUFFLENBQUM7SUFDaEMsU0FBUztJQUNULEtBQUs7QUFDTDtJQUNBLElBQUksSUFBSSxHQUFHO0lBQ1gsUUFBUSxNQUFNLENBQUMsS0FBSyxFQUFFLENBQUM7SUFDdkIsUUFBUSxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUU7SUFDM0IsWUFBWSxDQUFDLG1FQUFtRSxDQUFDO0lBQ2pGLFlBQVksQ0FBQyw4REFBOEQsQ0FBQztJQUM1RSxZQUFZLENBQUMscUJBQXFCLENBQUM7SUFDbkMsWUFBWSxDQUFDLENBQUM7SUFDZCxZQUFZLENBQUMsOERBQThELENBQUM7SUFDNUUsWUFBWSxDQUFDLGdFQUFnRSxDQUFDO0lBQzlFLFlBQVksQ0FBQyw2REFBNkQsQ0FBQztJQUMzRSxZQUFZLENBQUMsb0JBQW9CLENBQUM7SUFDbEMsWUFBWSxDQUFDLENBQUM7SUFDZCxZQUFZLENBQUMsa0RBQWtELENBQUM7SUFDaEUsWUFBWSxDQUFDLDhDQUE4QyxDQUFDO0lBQzVELFlBQVksQ0FBQyw2REFBNkQsQ0FBQztJQUMzRSxZQUFZLENBQUMsK0NBQStDLENBQUM7SUFDN0QsWUFBWSxDQUFDLENBQUM7SUFDZCxZQUFZLENBQUMsZ0NBQWdDLENBQUM7SUFDOUMsWUFBWSxDQUFDLENBQUM7SUFDZCxZQUFZLENBQUMsMERBQTBELENBQUM7SUFDeEUsWUFBWSxDQUFDLENBQUM7SUFDZCxZQUFZLENBQUMsY0FBYyxDQUFDO0lBQzVCLFlBQVksQ0FBQyxDQUFDO0lBQ2QsWUFBWSxDQUFDLENBQUM7SUFDZCxZQUFZLENBQUMsQ0FBQztJQUNkLFlBQVksQ0FBQyxtQ0FBbUMsQ0FBQztJQUNqRCxTQUFTLENBQUMsQ0FBQztJQUNYLEtBQUs7SUFDTDs7SUMxQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDTyxNQUFNLEtBQUssR0FBRztJQUNyQixJQUFJLE9BQU8sS0FBSyxDQUFDO0lBQ2pCLElBQUksRUFBRSxVQUFVLENBQUM7SUFDakIsSUFBSSxJQUFJLFFBQVEsQ0FBQztJQUNqQixJQUFJLElBQUksUUFBUSxDQUFDO0lBQ2pCLElBQUksS0FBSyxPQUFPLENBQUM7SUFDakIsSUFBSSxPQUFPLEtBQUssQ0FBQztJQUNqQixJQUFJLFVBQVUsRUFBRSxDQUFDO0lBQ2pCLElBQUksU0FBUyxHQUFHLENBQUM7SUFDakIsSUFBSSxVQUFVLEVBQUUsQ0FBQztJQUNqQixJQUFJLE9BQU8sS0FBSyxFQUFFO0lBQ2xCLElBQUksS0FBSyxPQUFPLEVBQUU7SUFDbEIsSUFBSSxJQUFJLFFBQVEsRUFBRTtJQUNsQixDQUFDLENBQUM7QUFDRjtJQUNPLE1BQU0sV0FBVyxHQUFHO0lBQzNCLElBQUksQ0FBQyxLQUFLLENBQUMsVUFBVSxHQUFHO0lBQ3hCLFFBQVEsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRTtJQUN2QixRQUFRLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUU7SUFDdkIsUUFBUSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRTtJQUN0QixRQUFRLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFO0lBQ3RCLFFBQVEsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUU7SUFDdEIsUUFBUSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRTtJQUN0QixLQUFLO0lBQ0wsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLEdBQUc7SUFDdkIsUUFBUSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUU7SUFDeEIsUUFBUSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUU7SUFDeEIsUUFBUSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFO0lBQ3ZCLFFBQVEsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRTtJQUN2QixRQUFRLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUU7SUFDdkIsUUFBUSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFO0lBQ3ZCLEtBQUs7SUFDTCxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sR0FBRztJQUNyQixRQUFRLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUU7SUFDdkIsUUFBUSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFO0lBQ3ZCLFFBQVEsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUU7SUFDdEIsUUFBUSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRTtJQUN0QixRQUFRLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFO0lBQ3RCLFFBQVEsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUU7SUFDdEIsS0FBSztJQUNMLENBQUM7O0lDMUNNLE1BQU0sTUFBTSxDQUFDO0lBQ3BCLElBQUksYUFBYSxDQUFDLEtBQUssRUFBRTtJQUN6QixRQUFRLElBQUksTUFBTSxHQUFHLEtBQUssQ0FBQztBQUMzQjtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtBQUNB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SUFBSSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQztJQUMzQyxLQUFLO0lBQ0w7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0lDMUVPLE1BQU0sS0FBSyxHQUFHO0lBQ3JCLElBQUksTUFBTSxFQUFFLFNBQVM7SUFDckIsSUFBSSxXQUFXLEVBQUUsU0FBUyxDQUFDLE1BQU07QUFDakM7SUFDQSxJQUFJLElBQUksQ0FBQyxXQUFXLEVBQUU7SUFDdEIsUUFBUSxPQUFPLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUNsQztJQUNBLFFBQVEsSUFBSSxLQUFLLEdBQUcsS0FBSyxDQUFDLE1BQU0sQ0FBQyxXQUFXLEdBQUcsS0FBSyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUNwRSxRQUFRLElBQUksQ0FBQyxLQUFLLEVBQUUsTUFBTSxJQUFJLEtBQUssQ0FBQyxDQUFDLHNCQUFzQixFQUFFLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUM1RTtJQUNBO0lBQ0E7QUFDQTtJQUNBLFFBQVEsSUFBSSxNQUFNLEdBQUcsS0FBSyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsR0FBRyxJQUFJLEdBQUcsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUM1RCxRQUFRLElBQUksVUFBVSxHQUFHLEVBQUUsQ0FBQztJQUM1QixRQUFRLElBQUksTUFBTSxDQUFDO0FBQ25CO0lBQ0E7SUFDQSxRQUFRLE1BQU0sR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxVQUFVLENBQUMsQ0FBQztBQUM3QztJQUNBLFFBQVEsS0FBSyxJQUFJLENB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QUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUMxRSxLQUFLO0FBQ0w7SUFDQSxJQUFJLHNCQUFzQixHQUFHO0lBQzdCO0lBQ0EsUUFBUSxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxLQUFLLEtBQUssQ0FBQyxLQUFLLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEtBQUssS0FBSyxDQUFDLElBQUksRUFBRSxPQUFPO0FBQzFGO0lBQ0E7SUFDQSxRQUFRLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFO0lBQ3ZELFlBQVksSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQztJQUM1QyxTQUFTO0FBQ1Q7SUFDQTtJQUNBLFFBQVEsSUFBSSxJQUFJLENBQUMsSUFBSSxJQUFJLENBQUMsRUFBRTtJQUM1QixZQUFZLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUM7SUFDNUMsU0FBUztBQUNUO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0EsUUFBUSxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7SUFDcEQsWUFBWSxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxLQUFLLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFO0lBQ25ELGdCQUFnQixJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxLQUFLLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFD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QUFDLE1BQU0sRUFBRSxDQUFDO0lBQzFCLFFBQVEsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ3BCO0lBQ0EsUUFBUSxNQUFNLENBQUMscUJBQXFCLENBQUMsTUFBTSxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQztJQUMzRCxLQUFLO0FBQ0w7SUFDQSxJQUFJLE1BQU0sR0FBRztJQUNiO0lBQ0EsUUFBUSxLQUFLLENBQUMsTUFBTSxFQUFFLENBQUM7QUFDdkI7SUFDQTtJQUNBLFFBQVEsS0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDO0FBQ3ZCO0lBQ0EsUUFBUSxJQUFJLElBQUksQ0FBQyxJQUFJLEVBQUU7SUFDdkIsWUFBWSxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO0lBQy9CLFNBQVM7QUFDVDtJQUNBLFFBQVEsSUFBSSxJQUFJLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxFQUFFLENBQUM7SUFDaEQsS0FBSztBQUNMO0lBQ0EsSUFBSSxJQUFJLEdBQUc7SUFDWDtJQUNBLFFBQVEsUUFBUSxDQUFDLEdBQUcsQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDLEtBQUssRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLFFBQVEsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQzlFO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQSxRQUFRLFFBQVEsQ0FBQyxHQUFHLENBQUMsU0FBUyxHQUFHLFNBQVMsQ0FBQztJQUMzQyxRQUFRLFFBQVEsQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsUUFBUSxDQUFDLEtBQUssRUFBRSxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDckU7SUFDQTtJQUNBLFFBQVEsUUFBUSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQyxRQUFRLENBQUMsS0FBSyxHQUFHLFVBQVUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsUUFBUSxDQUFDLE1BQU0sR0FBRyxXQUFXLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0FBQy9HO0lBQ0E7SUFDQTtJQUNBLFFBQVEsTUFBTSxDQUFDLEtBQUssRUFBRSxDQUFDO0lBQ3ZCLFFBQVEsSUFBSSxJQUFJLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxFQUFFLENBQUM7SUFDOUMsUUFBUSxJQUFJLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUN4QztJQUNBO0lBQ0EsUUFBUSxNQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUNsQztJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBLFFBQVEsUUFBUSxDQUFDLEdBQUcsQ0FBQyxTQUFTLEdBQUcsb0JBQW9CLENBQUM7SUFDdEQsUUFBUSxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFFBQVEsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFO0lBQ3pFLFlBQVksSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ25ELFlBQVksUUFBUSxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQyxRQUFRLENBQUMsS0FBSyxFQUFFLENBQUMsRUFBRSxRQUFRLENBQUMsS0FBSyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUM3RSxTQUFTO0lBQ1QsS0FBSztBQUNMO0lBQ0EsSUFBSSxZQUFZLEdBQUc7SUFDbkIsUUFBUSxJQUFJLENBQUMsSUFBSSxHQUFHLFNBQVMsQ0FBQztJQUM5QixRQUFRLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxXQUFXLEVBQUUsQ0FBQztJQUN6QyxLQUFLO0FBQ0w7SUFDQSxJQUFJLFlBQVksR0FBRztJQUNuQixRQUFRLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxRQUFRLEVBQUUsQ0FBQztJQUNuQyxRQUFRLElBQUksQ0FBQyxPQUFPLEdBQUcsU0FBUyxDQUFDO0lBQ2pDLEtBQUs7QUFDTDtJQUNBLElBQUksZ0JBQWdCLEdBQUc7SUFDdkIsUUFBUSxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksZ0JBQWdCLEVBQUUsQ0FBQztJQUMzQyxRQUFRLElBQUksQ0FBQyxPQUFPLEdBQUcsU0FBUyxDQUFDO0lBQ2pDLEtBQUs7QUFDTDtJQUNBLElBQUksU0FBUyxHQUFHO0lBQ2hCO0lBQ0EsUUFBUSxJQUFJLElBQUksQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDO0lBQ3JELEtBQUs7QUFDTDtJQUNBLElBQUksV0FBVyxHQUFHO0lBQ2xCO0lBQ0EsS0FBSztJQUNMLENBQUM7O0lDeklEO0lBQ0E7SUFDQTtBQUVBO0lBQ0EsSUFBSSxDQUFDLElBQUksRUFBRTs7Ozs7OyJ9\n","/**\n * Constants\n */\n\n// Spritesheet URI (produced during gulp build)\nexport const SPRITESHEET_URI = 'sprites.png';\n\n// The \"screen area\". This is an ASCII game and so most of the game logic doesn't care about browser\n// pixels, we care about the ASCII display area (80x25).\n//\n// Actually the original was likely an 80x24. We can use either here, whatever looks good in the browser.\nexport const SCREEN_WIDTH = 80;\nexport const SCREEN_HEIGHT = /*25*/ 24;\n\n// The size of our on-screen characters (given dimensions above, this is 80 cols by 25 rows).\nexport const CHAR_WIDTH = 8;\nexport const CHAR_HEIGHT = 16;\nexport const CHARSHEET_WIDTH = 16 * CHAR_WIDTH;\nexport const CHARSHEET_HEIGHT = 32 * CHAR_HEIGHT;\n\n// A screen scale factor. This scale factor multiplies the entire screen size so that\n// we can then introduce text artifacts (like character glow and scan lines), to give it\n// a little of that 1982 feel.\nexport const SCREEN_SCALE = 4;\n\n// The playable area. Note that this is the desired dimensions, but the actual on-screen dimensions\n// may be larger to maintain aspect ratio (see `Viewport.width` & `Viewport.height`).\n//\n// Note the extra little padding of a character, which just prevents our text from butting right\n// against the edge of the browser window.\nexport const GAME_WIDTH = (SCREEN_WIDTH + 1) * CHAR_WIDTH * SCREEN_SCALE;\nexport const GAME_HEIGHT = (SCREEN_HEIGHT + 1) * CHAR_HEIGHT * SCREEN_SCALE;\n\n// Fixed level size\nexport const LEVEL_ROWS = 20;\nexport const LEVEL_COLS = 79;\n\n// Play speeds, expressed as frames per second.\n//\n// According to the original, the play speeds had millisecond delays of:\n//   [100ms, 50ms, 25ms, 13ms, 7ms].\n//\n// This would mean the effective FPS was:\n//   [10, 20, 40, 76, 142].\n//\n// I think this is way too high, and might not be accurate (it doesn't count\n// time spent drawing the screen and running the game's logic, which might\n// be a significant number of milliseconds). From memory, each speed was about\n// 50% faster than the previous one, so that's what I've set here.\nexport const PLAY_SPEEDS = [120, 100, 90, 50, 30];\n\n// Maximum number of rocks on screen at once\nexport const MAX_ROCKS = 7;\n\n// Each dispenser on the level increases max rocks by 1\nexport const DISPENSER_MAX_ROCKS = 1;\n\n// Hidden difficulty factor - the game gets 5% faster each level cycle\nexport const HIDDEN_FACTOR_PLAY_SPEED = 0.05;\n\n// Hidden difficulty factor - the maximum number of rocks increases each level cycle\nexport const HIDDEN_FACTOR_MAX_ROCKS = 2;\n\n// Score events (note, these are just identifiers for the types of score increases, not\n// actual score values).\nexport const SCORE_ROCK = 1;\nexport const SCORE_STATUE = 2;\nexport const SCORE_TREASURE = 3;\n","'use strict';\n\nimport { GAME_WIDTH, GAME_HEIGHT } from './Constants';\n\n/**\n * Viewport\n *\n * Represents the game display (for us, a canvas).\n */\nexport const Viewport = {\n    init() {\n        Viewport.canvas = document.getElementById('canvas');\n        Viewport.ctx = Viewport.canvas.getContext('2d');\n        Viewport.resize(true);\n    },\n\n    // Resize the canvas to give us approximately our desired game display size.\n    //\n    // Rather than attempt to explain it, here's a concrete example:\n    //\n    //     we start with a desired game dimension:   480x270px\n    //          get the actual browser dimensions:  1309x468px\n    //          factor in the display's DPI ratio:  2618x936px\n    //         now calculate the horizontal scale:       5.45x\n    //                     and the vertical scale:       3.46x\n    //            our new offical game scaling is:        5.4x\n    //       and our official viewport dimensions:   484x173px\n    //\n    // This approach emphasizes correct aspect ratio and maintains full-window rendering, at\n    // the potential cost of limiting visibility of the game itself in either the X or Y axis.\n    // If you use this approach, make sure your GUI can \"float\" (otherwise there may be whole\n    // UI elements the player cannot see!).\n    resize(force) {\n        let dpi = window.devicePixelRatio,\n            width = Viewport.canvas.clientWidth,\n            height = Viewport.canvas.clientHeight,\n            dpiWidth = width * dpi,\n            dpiHeight = height * dpi;\n\n        if (\n            force ||\n            Viewport.canvas.width !== dpiWidth ||\n            Viewport.canvas.height !== dpiHeight\n        ) {\n            Viewport.canvas.width = dpiWidth;\n            Viewport.canvas.height = dpiHeight;\n\n            Viewport.scale = ((Math.min(dpiWidth / GAME_WIDTH, dpiHeight / GAME_HEIGHT) * 10) | 0) / 10;\n            Viewport.width = Math.ceil(dpiWidth / Viewport.scale);\n            Viewport.height = Math.ceil(dpiHeight / Viewport.scale);\n            Viewport.center = {\n                u: (Viewport.width / 2) | 0,\n                v: (Viewport.height / 2) | 0\n            };\n            Viewport.clientWidth = width;\n            Viewport.clientHeight = height;\n\n            // Note: smoothing flag gets reset on every resize by some browsers, which is why\n            // we do it here.\n            Viewport.ctx.imageSmoothingEnabled = false;\n        }\n\n        // We do this every frame, not just on resize, due to browser sometimes \"forgetting\".\n        //Viewport.canvas.style.cursor = 'none';\n    }\n};\n","'use strict';\n\nimport { Game } from './Game';\nimport { Viewport } from './Viewport';\n\nexport function qr2xy(pos) {\n    return {\n        x: pos.q * 13,\n        y: pos.q * 6 + pos.r * 12\n    };\n}\n\nexport function xy2qr(pos) {\n    let qrFraction = {\n        q: (pos.x / 13),\n        r: ((pos.y - pos.x * 6 / 13) / 12)\n    };\n    return qrRounded(qrFraction);\n}\n\nexport function xy2uv(pos) {\n    return {\n        u: pos.x + Viewport.center.u - Game.camera.pos.x,\n        v: pos.y + Viewport.center.v - Game.camera.pos.y\n    };\n}\n\nexport function uv2xy(pos) {\n    return {\n        x: pos.u - Viewport.center.u + Game.camera.pos.x,\n        y: pos.v - Viewport.center.v + Game.camera.pos.y\n    };\n}\n\nexport function qr2qrs(pos) {\n    return { q: pos.q, r: pos.r, s: -pos.q-pos.r };\n}\n\nexport function qrs2qr(pos) {\n    return { q: pos.q, r: pos.r };\n}\n\nexport function tileIsPassable(q, r) {\n    if (Game.brawl) {\n        let room = Game.brawl.room;\n        if (\n            q < room.q ||\n            r < room.r ||\n            q >= room.q + room.w ||\n            r >= room.r + room.h\n        )\n            return false;\n    }\n    if (q < 0 || r < 0 || q >= Game.maze.w || r >= Game.maze.h) return false;\n    return !!Game.maze.maze[r][q];\n}\n\nexport function rgba(r, g, b, a) {\n    return `rgba(${r},${g},${b},${a})`;\n}\n\nexport function createCanvas(width, height) {\n    let canvas = document.createElement('canvas');\n    canvas.width = width;\n    canvas.height = height;\n    let ctx = canvas.getContext('2d');\n    return { canvas, ctx };\n}\n\nexport function roomCenter(room) {\n    return {\n        x: (room.q + room.w / 2) * TILE_SIZE,\n        y: (room.r + room.h / 2) * TILE_SIZE\n    };\n}\n\nexport function partialText(text, t, d) {\n    let length = clamp(Math.ceil(t / d * text.length), 0, text.length),\n        substr = text.slice(0, length),\n        idx = text.indexOf(' ', length - 1);\n    if (idx < 0) idx = text.length;\n    if (idx - length > 0) substr += '#'.repeat(idx - length);\n\n    return substr;\n}\n","'use strict';\n\n/**\n * This module is generated by `gulp buildAssets`.\n */\nexport const SpriteSheet =\n    /* <generated> */\n{ font: [ [ 128, 0, 128, 448 ] ],\n  font2: [ [ 0, 0, 128, 512 ] ],\n  harold: [ [ 128, 448, 19, 12 ] ],\n  pixel: [ [ 147, 448, 6, 6 ] ],\n  uri: 'sprites.png' }\n/* </generated> */\n","'use strict';\n\nimport { Game } from './Game';\nimport { rgba, createCanvas } from './Util';\nimport { SpriteSheet } from './SpriteSheet-gen';\nimport { Viewport } from './Viewport';\n\n/**\n * Sprite\n *\n * Encapsulates loading sprite slices from the spritesheet, organizing them, and\n * modifying them or constructing using primitives. To save space, we use some techniques\n * like storing only a small slice of an image in the spritesheet, then using code\n * to duplicate it, add some randomness, etc.\n */\nexport const Sprite = {\n    // This is an exception to the rule, loading the spritesheet is a special action that\n    // happens BEFORE everything is initialized.\n    loadSpritesheet(cb) {\n        let image = new Image();\n        image.onload = cb;\n        image.src = SpriteSheet.uri;\n        Sprite.sheet = image;\n    },\n\n    init() {\n        // Base pixel font and icons (see `Text.init` for additional variations)\n        Sprite.font = initBasicSprite(SpriteSheet.font2[0]);\n\n        return;\n    },\n\n    /**\n     * A small helper that draws a sprite onto a canvas, respecting the anchor point of\n     * the sprite. Note that the canvas should be PRE-TRANSLATED and PRE-ROTATED, if\n     * that's appropriate!\n     */\n    drawSprite(ctx, sprite, u, v) {\n        ctx.drawImage(sprite.img, u - sprite.anchor.x, v - sprite.anchor.y);\n    },\n\n    drawViewportSprite(sprite, pos, rotation) {\n        let { u, v } = this.viewportSprite2uv(\n            sprite,\n            pos\n        );\n        if (rotation) {\n            Viewport.ctx.save();\n            Viewport.ctx.translate(u + sprite.anchor.x, v + sprite.anchor.y);\n            Viewport.ctx.rotate(rotation);\n            Viewport.ctx.drawImage(\n                sprite.img,\n                -sprite.anchor.x,\n                -sprite.anchor.y\n            );\n            Viewport.ctx.restore();\n        } else {\n            Viewport.ctx.drawImage(sprite.img, u, v);\n        }\n    },\n\n    viewportSprite2uv(sprite, pos) {\n        return {\n            u: pos.x - sprite.anchor.x - Game.camera.pos.x + Viewport.center.u,\n            v: pos.y - sprite.anchor.y - Game.camera.pos.y + Viewport.center.v\n        };\n    }\n};\n\n// Sprite utility functions\n\nfunction initBasicSprite(data, anchor) {\n    return initDynamicSprite(loadCacheSlice(...data), anchor);\n}\n\nfunction initDynamicSprite(source, anchor) {\n    let w = source.width,\n        h = source.height;\n\n    return {\n        img: source,\n        // Hack! Using a flat `.map(initBasicSprite)` is actually going to pass the\n        // element INDEX as second argument, resulting in \"anchor=1\". The right solution\n        // here is \"typeof anchor === 'object' ?\", but to save bytes I avoid using\n        // the typeof and instanceof keywords anywhere in the codebase. Hence,\n        // \"anchor && anchor.x\".\n        anchor: (anchor && anchor.x) ? anchor : { x: (w / 2) | 0, y: (h / 2) | 0 }\n    };\n}\n\nfunction loadCacheSlice(x, y, w, h) {\n    const source = Sprite.sheet;\n    const sliceCanvas = createCanvas(w, h);\n    sliceCanvas.ctx.drawImage(source, x, y, w, h, 0, 0, w, h);\n    return sliceCanvas.canvas;\n}\n","\n// A list of in-game actions that can be performed by the player\nconst Action = {\n    UP:     11,\n    DOWN:   12,\n    LEFT:   13,\n    RIGHT:  14,\n    JUMP:   15,\n    STOP:   16,\n    PAUSE:  17,\n    RESUME: 18\n};\n\n// A list of key code mappings and what action they perform. Here we hard-code it, but\n// you could easily also have the key mappings controlled by settings and let the user\n// configure it.\nconst KeyMapping = {\n    KeyW:       Action.UP,\n    KeyS:       Action.DOWN,\n    KeyA:       Action.LEFT,\n    KeyD:       Action.RIGHT,\n    ArrowUp:    Action.UP,\n    ArrowDown:  Action.DOWN,\n    ArrowLeft:  Action.LEFT,\n    ArrowRight: Action.RIGHT,\n    Space:      Action.JUMP,\n    Escape:     Action.PAUSE,\n    Enter:      Action.RESUME\n};\n\nexport const Input = {\n    Action,\n    KeyMapping,\n\n    init() {\n        // Input buffer - new keypress events go into this buffer to be handled\n        // during the game's update loop. It's up to the `update()` methods to consume\n        // key presses and remove them from the buffer.\n        this.buffer = [];\n\n        // Input history - history contains recent key press events in order,\n        // removed automatically after a few seconds. This is useful for detecting\n        // inputs like cheat codes, for example.\n        this.history = [];\n\n        window.addEventListener('keydown', event => {\n            let entry = {\n                at: new Date().getTime(),\n                key: event.key,\n                code: event.code,\n                action: Input.KeyMapping[event.code] || Input.Action.STOP\n            };\n            Input.buffer.push(entry);\n            Input.history.push(entry);\n            console.log(entry);\n        });\n    },\n\n    update() {\n        let now = new Date().getTime();\n        this.history = this.history.filter(entry => entry.at > now - 3000);\n    },\n\n    lastKey() {\n        return this.buffer.length > 0 ? this.buffer[this.buffer.length - 1].key : '';\n    },\n\n    lastAction() {\n        return this.buffer.length > 0 ? this.buffer[this.buffer.length - 1].action : undefined;\n    },\n\n    consume() {\n        this.buffer = [];\n    },\n}\n","/**\n * `Text` is a singleton responsible for drawing text characters on the viewport. This\n * game uses a custom pixel font, so we need to implement some basic text handling\n * (splitting long lines, measuring character width, etc.) ourselves.\n */\n\nimport { Sprite } from './Sprite';\nimport { rgba, createCanvas } from './Util';\nimport { CHAR_WIDTH, CHAR_HEIGHT, CHARSHEET_WIDTH, SCREEN_SCALE } from './Constants';\nimport { Viewport } from './Viewport';\n\n// In our character sheet, chars 0x00-0x7F are standard ASCII, below that we put whatever\n// characters are convenient for us. Here we can choose to map unicode characters to positions\n// 0x80+ in the charsheet, making it easy for us to render things like special characters,\n// box drawing characters, etc.\n//\n// Note: I like pasting actual characters instead of codes (\"├\" instead of \"\\u251C\"). If you\n// do this, don't forget to explicitly tell the browser what charset your JS file is, or it\n// won't execute -- see `index.html` for an example.\nconst SUPPORTED_UNICODE_CHARS = [\n    '─│┌┐└┘├┤┬┴┼╳╳╳╳╳',\n    '═║╔╗╚╝╠╣╦╩╬╳╳╳╳╳',\n    '↑↓←→╳╳╳╳╳╳╳╳╳╳╳╳'\n].join('');\n\nconst UNICODE_CHAR_MAP = SUPPORTED_UNICODE_CHARS.split('').reduce((map, char, idx) => {\n    map[char] = 0x80 + idx;\n    return map;\n}, {});\n\n/**\n * Text\n *\n * Utilities for drawing text using in-game pixel font.\n */\nexport const Text = {\n    init() {\n        // The \"white\" font sheet, right from the sprite.\n        Text.white = { img: Sprite.font.img, scale: 1, border: 0, margin: 0 };\n\n        // Recolored versions of the original font sheet, to use when constructing our glow.\n        //\n        // The color here is #33FF00 which is roughly the glow of the Kaypro II.\n        Text.terminal = recolor(Text.white, rgba(51 + 16, 255, 0 + 16, 1));\n        Text.terminal_shadow = recolor(Text.white, rgba(51, 255, 0, 0.4));\n\n        // \"Glowing\" a bunch of characters on-screen is just too slow when you're doing 5\n        // draw calls for every individual character. To avoid that, we can build a new\n        // sprite sheet that is pre-scaled with the glow built in.\n        Text.glow = bakeFontGlow(Text.terminal, Text.terminal_shadow, SCREEN_SCALE, 2, 2);\n    },\n\n    drawText(ctx, text, u, v, font = Text.terminal) {\n        // The math gymnastics are a little hard to read (apologies). To render the\n        // font asked for correctly, we need to have the font sheet image, the scale,\n        // the border and the margin.\n        //\n        // The \"scale\" informs us what PRESCALING is applied to the font sheet, so\n        // we know how big to render it (we don't do additional scaling here).\n        //\n        // The \"border\" tells us how many PRE-SCALE pixels of border exist in this\n        // image. A border of 2 means a total of 2 pixels (so 1 on every side) were\n        // used. This is pre-scale, so if the scale is 4, that means there are 4 pixels\n        // of \"space\" around each character in the font sheet.\n        //\n        // The \"margin\" tells us how many POST-SCALE pixels of margin exist (in practice\n        // this means, how many pixels of glow surround the character). You want to subtract\n        // this margin when rendering the character so the character body is in the expected\n        // spot on screen.\n        let { img, scale, border, margin } = font;\n\n        if (Array.isArray(text)) {\n            for (let block of text) {\n                Text.drawText(ctx, block.text, u + block.u * scale, v + block.v * scale, font);\n            }\n            return;\n        }\n\n        for (let idx = 0; idx < text.length; idx++) {\n            let c = UNICODE_CHAR_MAP[text[idx]] || text.charCodeAt(idx);\n            let k = (c - 0) * (CHAR_WIDTH + border);\n            let drawable = (c !== 32);\n\n            // We clear the canvas in every frame, and it's a HUGE speed advantage not to draw an\n            // empty image (this check can save 1000+ drawImage calls a frame).\n            if (drawable) {\n                ctx.drawImage(\n                    img,\n                    (k * scale) % img.width,\n                    Math.floor((k * scale) / (img.width)) * (CHAR_HEIGHT + border) * scale,\n                    CHAR_WIDTH * scale,\n                    CHAR_HEIGHT * scale,\n                    u + margin,\n                    v + margin,\n                    CHAR_WIDTH * scale,\n                    CHAR_HEIGHT * scale\n                );\n            }\n            u += CHAR_WIDTH * scale;\n        }\n    },\n\n    measureWidth(text, scale = 1) {\n        return text.split('').reduce((sum, c) => sum + CHAR_WIDTH, 0) * scale;\n    },\n\n    splitParagraph(text, w, h) {\n        let cu = 0, cv = 0;\n        let next = () => ({ text: '', u: cu, v: cv });\n        let wip = next();\n        let list = [];\n\n        for (let c of text.split('')) {\n            let cWidth = Text.measureWidth(c, 1);\n            if (c === '\\n' || cu + cWidth > w) {\n                let saved = '';\n                if (c !== '\\n' && c !== ' ') {\n                    let space = wip.text.split(' ');\n                    if (space.length > 1) {\n                        saved = space.pop();\n                        wip.text = space.join(' ');\n                    }\n                }\n                if (wip.text.length > 0) list.push(wip);\n                cu = 0;\n                cv += (CHAR_HEIGHT);\n                wip = next();\n                if (saved.length > 0) {\n                    wip.text = saved;\n                    cu += Text.measureWidth(wip.text, 1);\n                }\n            } else {\n                cu += cWidth;\n            }\n            if (c !== '\\n') {\n                wip.text = wip.text + c;\n            }\n        }\n\n        if (wip.text.length > 0) list.push(wip);\n\n        return list.map(line => ({\n            ...line,\n            w: Text.measureWidth(line.text, 1),\n            h: CHAR_HEIGHT\n        }));\n    }\n};\n\n// Text utility functions, for manipulating the font sheet images\n\nfunction recolor(font, color) {\n    let canvas = createCanvas(font.img.width, font.img.height);\n    canvas.ctx.fillStyle = color;\n    canvas.ctx.fillRect(0, 0, font.img.width, font.img.height);\n    canvas.ctx.globalCompositeOperation = 'destination-in';\n    canvas.ctx.drawImage(font.img, 0, 0);\n\n    // Return a new font with the same metadata, but a recolored image\n    return {\n        ...font,\n        img: canvas.canvas\n    };\n}\n\nfunction bakeFontGlow(font, glow, scale, border, margin) {\n    // This function is a little complicated because it has to do several things at once.\n    //\n    // The idea is:\n    //  - Take our original sheet of 8x16 characters\n    //  - Build a NEW sheet, with additional \"border\" around each character, so that there is\n    //    room for us to add a glow around each character without bleeding into our neighbors.\n    //  - We want the glow baked in at an upscaled pixel size.\n    //\n    // What is the upscaled pixel size? Here for example, we are scaling up from 8x16 pixels\n    // to 32x64 pixels for each characters. We then want the GLOW added around this new\n    // 32x64 character, not the original size (this allows us to have a glow more tight than\n    // the original chunky pixels we started with).\n    //\n    // A complication of HTML Canvas is that if you draw from a source canvas into a destination\n    // canvas at a higher scale, you will \"bleed\" neighboring pixels from the source canvas.\n    // To avoid this, we use a second temporary canvas and draw from the source into the temporary\n    // canvas with no upscaling, then we draw from the temporary canvas into the upscaled canvas.\n    //\n    // (This means double the draws, but we only do this step once when the game loads, so it's\n    // not a big deal.)\n    let cols = font.img.width / CHAR_WIDTH, rows = font.img.height / CHAR_HEIGHT;\n\n    let temp = createCanvas(CHAR_WIDTH, CHAR_HEIGHT);\n    let canvas = createCanvas(\n        cols * (CHAR_WIDTH + border) * scale,\n        rows * (CHAR_HEIGHT + border) * scale\n    )\n\n    for (let y = 0; y < rows; y++) {\n        for (let x = 0; x < cols; x++) {\n            // Glow (rendered on all 4 sides)\n            temp.ctx.clearRect(0, 0, CHAR_WIDTH, CHAR_HEIGHT);\n            temp.ctx.drawImage(\n                glow.img,\n                x * CHAR_WIDTH,\n                y * CHAR_HEIGHT,\n                CHAR_WIDTH,\n                CHAR_HEIGHT,\n                0, 0,\n                CHAR_WIDTH,\n                CHAR_HEIGHT\n            );\n            canvas.ctx.drawImage(\n                temp.canvas,\n                0, 0,\n                CHAR_WIDTH,\n                CHAR_HEIGHT,\n                x * (CHAR_WIDTH + border) * scale + margin,\n                y * (CHAR_HEIGHT + border) * scale,\n                CHAR_WIDTH * scale,\n                CHAR_HEIGHT * scale\n            );\n            canvas.ctx.drawImage(\n                temp.canvas,\n                0, 0,\n                CHAR_WIDTH,\n                CHAR_HEIGHT,\n                x * (CHAR_WIDTH + border) * scale,\n                y * (CHAR_HEIGHT + border) * scale + margin,\n                CHAR_WIDTH * scale,\n                CHAR_HEIGHT * scale\n            );\n            canvas.ctx.drawImage(\n                temp.canvas,\n                0, 0,\n                CHAR_WIDTH,\n                CHAR_HEIGHT,\n                x * (CHAR_WIDTH + border) * scale + margin * 2,\n                y * (CHAR_HEIGHT + border) * scale + margin,\n                CHAR_WIDTH * scale,\n                CHAR_HEIGHT * scale\n            );\n            canvas.ctx.drawImage(\n                temp.canvas,\n                0, 0,\n                CHAR_WIDTH,\n                CHAR_HEIGHT,\n                x * (CHAR_WIDTH + border) * scale + margin,\n                y * (CHAR_HEIGHT + border) * scale + margin * 2,\n                CHAR_WIDTH * scale,\n                CHAR_HEIGHT * scale\n            );\n\n            // Center character\n            temp.ctx.clearRect(0, 0, CHAR_WIDTH, CHAR_HEIGHT);\n            temp.ctx.drawImage(\n                font.img,\n                x * CHAR_WIDTH,\n                y * CHAR_HEIGHT,\n                CHAR_WIDTH,\n                CHAR_HEIGHT,\n                0, 0,\n                CHAR_WIDTH,\n                CHAR_HEIGHT\n            );\n            canvas.ctx.drawImage(\n                temp.canvas,\n                0, 0,\n                CHAR_WIDTH,\n                CHAR_HEIGHT,\n                x * (CHAR_WIDTH + border) * scale + margin,\n                y * (CHAR_HEIGHT + border) * scale + margin,\n                CHAR_WIDTH * scale,\n                CHAR_HEIGHT * scale\n            );\n        }\n    }\n\n    return { img: canvas.canvas, scale, border, margin };\n}\n","// zzfx() - the universal entry point -- returns a AudioBufferSourceNode\nexport const zzfx=(...t)=>zzfxP(zzfxG(...t))\n\n// zzfxP() - the sound player -- returns a AudioBufferSourceNode\nexport const zzfxP=(...t)=>{let e=zzfxX.createBufferSource(),f=zzfxX.createBuffer(t.length,t[0].length,zzfxR);t.map((d,i)=>f.getChannelData(i).set(d)),e.buffer=f,e.connect(zzfx.destination_),e.start();return e}\n\n// zzfxG() - the sound generator -- returns an array of sample data\nexport const zzfxG=(q=1,k=.05,c=220,e=0,t=0,u=.1,r=0,F=1,v=0,z=0,w=0,A=0,l=0,B=0,x=0,G=0,d=0,y=1,m=0,C=0)=>{let b=2*Math.PI,H=v*=500*b/zzfxR**2,I=(0<x?1:-1)*b/4,D=c*=(1+2*k*Math.random()-k)*b/zzfxR,Z=[],g=0,E=0,a=0,n=1,J=0,K=0,f=0,p,h;e=99+zzfxR*e;m*=zzfxR;t*=zzfxR;u*=zzfxR;d*=zzfxR;z*=500*b/zzfxR**3;x*=b/zzfxR;w*=b/zzfxR;A*=zzfxR;l=zzfxR*l|0;for(h=e+m+t+u+d|0;a<h;Z[a++]=f)++K%(100*G|0)||(f=r?1<r?2<r?3<r?Math.sin((g%b)**3):Math.max(Math.min(Math.tan(g),1),-1):1-(2*g/b%2+2)%2:1-4*Math.abs(Math.round(g/b)-g/b):Math.sin(g),f=(l?1-C+C*Math.sin(2*Math.PI*a/l):1)*(0<f?1:-1)*Math.abs(f)**F*q*zzfxV*(a<e?a/e:a<e+m?1-(a-e)/m*(1-y):a<e+m+t?y:a<h-d?(h-a-d)/u*y:0),f=d?f/2+(d>a?0:(a<h-d?1:(h-a)/d)*Z[a-d|0]/2):f),p=(c+=v+=z)*Math.sin(E*x-I),g+=p-p*B*(1-1E9*(Math.sin(a)+1)%2),E+=p-p*B*(1-1E9*(Math.sin(a)**2+1)%2),n&&++n>A&&(c+=w,D+=w,n=0),!l||++J%l||(c=D,v=H,n=n||1);return Z}\n\n// zzfxV - global volume\nexport const zzfxV=.3\n\n// zzfxR - global sample rate\nexport const zzfxR=44100\n\n// zzfxX - the common audio context\nexport const zzfxX=new(top.AudioContext||webkitAudioContext);\n\n// destination for zzfx and zzfxm sounds\nzzfx.destination_ = zzfxX.destination;\n","'use strict';\n\nimport { zzfxG, zzfxR } from './zzfx';\n\n/**\n * ZzFX Music Renderer v2.0.2 by Keith Clark\n */\n\n/**\n * @typedef Channel\n * @type {Array.<Number>}\n * @property {Number} 0 - Channel instrument\n * @property {Number} 1 - Channel panning (-1 to +1)\n * @property {Number} 2 - Note\n */\n\n/**\n * @typedef Pattern\n * @type {Array.<Channel>}\n */\n\n/**\n * @typedef Instrument\n * @type {Array.<Number>} ZzFX sound parameters\n */\n\n/**\n * Generate a song\n *\n * @param {Array.<Instrument>} instruments - Array of ZzFX sound paramaters.\n * @param {Array.<Pattern>} patterns - Array of pattern data.\n * @param {Array.<Number>} sequence - Array of pattern indexes.\n * @param {Number} [speed=125] - Playback speed of the song (in BPM).\n * @returns {Array.<Array.<Number>>} Left and right channel sample data.\n */\n\nexport const zzfxM = (instruments, patterns, sequence, BPM = 125) => {\n    let instrumentParameters,\n        i,\n        j,\n        k,\n        note,\n        sample,\n        patternChannel,\n        notFirstBeat,\n        stop,\n        instrument,\n        pitch,\n        attenuation,\n        outSampleOffset,\n        sampleOffset,\n        nextSampleOffset,\n        sampleBuffer = [],\n        leftChannelBuffer = [],\n        rightChannelBuffer = [],\n        channelIndex = 0,\n        panning,\n        hasMore = 1,\n        sampleCache = {},\n        beatLength = ((zzfxR / BPM) * 60) >> 2;\n\n    // for each channel in order until there are no more\n    for (; hasMore; channelIndex++) {\n        // reset current values\n        sampleBuffer = [(hasMore = notFirstBeat = pitch = outSampleOffset = 0)];\n\n        // for each pattern in sequence\n        sequence.map((patternIndex, sequenceIndex) => {\n            // get pattern for current channel, use empty 1 note pattern if none found\n            patternChannel = patterns[patternIndex][channelIndex] || [0, 0, 0];\n\n            // check if there are more channels\n            hasMore |= !!patterns[patternIndex][channelIndex];\n\n            // get next offset, use the length of first channel\n            nextSampleOffset =\n                outSampleOffset +\n                (patterns[patternIndex][0].length - 2 - !notFirstBeat) *\n                    beatLength;\n\n            // for each beat in pattern, plus one extra if end of sequence\n            for (\n                i = 2, k = outSampleOffset;\n                i <\n                patternChannel.length + (sequenceIndex == sequence.length - 1);\n                notFirstBeat = ++i\n            ) {\n                // <channel-note>\n                note = patternChannel[i];\n\n                // stop if different instrument or new note\n                stop = (instrument != (patternChannel[0] || 0)) | note | 0;\n\n                // fill buffer with samples for previous beat, most cpu intensive part\n                for (\n                    j = 0;\n                    j < beatLength && notFirstBeat;\n                    // fade off attenuation at end of beat if stopping note, prevents clicking\n                    j++ > beatLength - 99 && stop\n                        ? (attenuation += (attenuation < 1) / 99)\n                        : 0\n                ) {\n                    // copy sample to stereo buffers with panning\n                    sample =\n                        ((1 - attenuation) * sampleBuffer[sampleOffset++]) /\n                            2 || 0;\n                    leftChannelBuffer[k] =\n                        (leftChannelBuffer[k] || 0) + sample * panning - sample;\n                    rightChannelBuffer[k] =\n                        (rightChannelBuffer[k++] || 0) +\n                        sample * panning +\n                        sample;\n                }\n\n                // set up for next note\n                if (note) {\n                    // set attenuation\n                    attenuation = note % 1;\n                    panning = patternChannel[1] || 0;\n                    if ((note |= 0)) {\n                        // get cached sample\n                        sampleBuffer = sampleCache[\n                            [\n                                (instrument =\n                                    patternChannel[(sampleOffset = 0)] || 0),\n                                note\n                            ]\n                        ] =\n                            sampleCache[[instrument, note]] ||\n                            // add sample to cache\n                            ((instrumentParameters = [\n                                ...instruments[instrument]\n                            ]),\n                            (instrumentParameters[2] *=\n                                2 ** ((note - 12) / 12)),\n                            zzfxG(...instrumentParameters));\n                    }\n                }\n            }\n\n            // update the sample offset\n            outSampleOffset = nextSampleOffset;\n        });\n    }\n\n    return [leftChannelBuffer, rightChannelBuffer];\n};\n","export const ObliqueMystique = [[[1.3,0,23,,,.2,3,5],[1.5,0,4e3,,,.03,2,1.25,,,,,.02,6.8,-.3,,.5],[.7,0,2100,,,.2,3,3,,,-400,,,2],[,0,655,,,.11,2,1.65,,,,,,3.8,-.1,.1]],[[[,-.5,13,,,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,14,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,14,,,,],[1,.3,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,],[2,1,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,],[,.6,,,,,13,,18,,19,,,,,,,,19,,18,,,,16,,,,13,,,,,,,,,,13,,18,,19,,,,,,,,18,19,18,,,,13,14,13,,16,,18,,19,,],[3,-1,,,13,,,,,,,,,,,,13,,,,,,,,,,,,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,,,13,13,13,13]],[[,-.5,13,,,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,14,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,14,,,,],[1,.3,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,],[2,1,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,]]],[1,1,0,0,0,0,1,0],,]\n","'use strict';\n\nimport { zzfx, zzfxP, zzfxX } from './lib/zzfx';\nimport { zzfxM } from './lib/zzfxm';\nimport { ObliqueMystique } from './songs/ObliqueMystique';\n\nexport const Audio = {\n    init() {\n        Audio.readyToPlay = false;\n\n        Audio.ctx = zzfxX;\n        Audio.gain_ = Audio.ctx.createGain();\n        Audio.gain_.connect(Audio.ctx.destination);\n        zzfx.destination_ = Audio.gain_;\n\n        Audio.shotgun = [,0.01,140,0.01,0.02,0.45,4,2.42,0.1,-0.1,,,,1.2,,0.3,0.04,0.8,0.02];\n        Audio.page = [,,1233,,.01,.2,1,1.43,,,539,.1,,,,,,.51,.03,.01];\n        Audio.shellReload = [,,68,0.01,,0.14,1,1.53,7.5,0.1,50,0.02,-0.01,-0.2,0.1,0.2,,0.47,0.01];\n        Audio.damage = [,,391,,.19,.01,2,.54,-4,20,,,,,,,.02,.9];\n        Audio.alarm = [,,970,.12,.25,.35,,.39,8.1,,10,.1,.2,,.1,,,.6,.09,.13];\n        // [,,961,.05,.06,1.17,1,4.67,.8,,,,,.8,-0.8,.1,.49,.62,.09];\n        Audio.victory = [,,454,.06,.86,.71,2,.63,-0.7,1.7,-83,.09,.27,.3,.2,,.18,.95,.02,.02];\n        Audio.song = zzfxM(...ObliqueMystique);\n\n        // Save our background music in os13k, for fun!\n        //localStorage[`OS13kMusic,${TITLE} - Oblique Mystique`] = JSON.stringify(ObliqueMystique);\n    },\n\n    update() {\n        if (!Audio.readyToPlay) return;\n\n        if (!Audio.musicPlaying) {\n            //Audio.bgmusicnode = zzfxP(...Audio.song);\n            //Audio.bgmusicnode.loop = true;\n            Audio.musicPlaying = true;\n        }\n    },\n\n    play(sound) {\n        if (!Audio.readyToPlay) return;\n        zzfx(...sound);\n    },\n\n    // It's important we do pausing and unpausing as specific events and not in general update(),\n    // because update() is triggered by the animation frame trigger which does not run if the\n    // page is not visible. (So, if you want the music to fade in the background, for example,\n    // that's not helpful if it won't work because you aren't looking at the page!)\n\n    pause() {\n        Audio.gain_.gain.linearRampToValueAtTime(0, Audio.ctx.currentTime + 1);\n    },\n\n    unpause() {\n        Audio.gain_.gain.linearRampToValueAtTime(1, Audio.ctx.currentTime + 1);\n    }\n};\n","/**\n * `Screen` is a singleton that represents the virtual 80x25 character screen our game\n * lives in. Components like PlayingField will \"draw\" (write text onto) this virtual\n * screen each frame. Once all the text is written, the text will end up rendered on\n * the viewport (canvas) in the browser.\n */\n\nimport { SCREEN_WIDTH, SCREEN_HEIGHT } from './Constants';\nimport { Viewport } from './Viewport';\nimport { Text } from './Text';\n\nexport const Screen = {\n    init() {\n        this.screen = [];\n        for (let y = 0; y < SCREEN_HEIGHT; y++) {\n            this.screen.push([]);\n        }\n        this.clear();\n    },\n\n    clear() {\n        for (let y = 0; y < SCREEN_HEIGHT; y++) {\n            for (let x = 0; x < SCREEN_WIDTH; x++) {\n                this.screen[y][x] = ' ';\n            }\n        }\n    },\n\n    write(x, y, text) {\n        if (!Array.isArray(text)) text = [text];\n\n        for (let j = 0; j < text.length; j++) {\n            for (let i = 0; i < text[j].length; i++) {\n                this.screen[y + j][x + i] = text[j][i];\n            }\n        }\n    },\n\n    draw(ctx) {\n        let text = this.screen.map(row => row.join('')).join('\\n');\n\n        Text.drawText(\n            ctx,\n            Text.splitParagraph(text, Viewport.width),\n            0, 0,\n            Text.glow\n        );\n    }\n};\n","import { Screen } from './Screen';\nimport { Game } from './Game';\nimport { PLAY_SPEEDS } from './Constants';\nimport { Input } from './Input';\n\nexport class MainMenu {\n    constructor() {\n    }\n\n    update() {\n        switch (Input.lastKey().toUpperCase()) {\n            case 'P':\n                Input.consume();\n                Game.startSession();\n                break;\n            case 'L':\n                Input.consume();\n                Game.playSpeed = (Game.playSpeed + 1) % PLAY_SPEEDS.length;\n                break;\n            case 'I':\n                Input.consume();\n                Game.showInstructions();\n                break;\n            case 'E':\n                Input.consume();\n                Game.showInstructions();\n                break;\n        }\n    }\n\n    draw() {\n        let version = '?';\n        let terminal = '?';\n\n        let highScores = [\n            `1) 6000  Bob`,\n            `2) 6000  Tom`,\n            `3) 4000  Wayne`,\n            ``,\n            ``\n        ];\n\n        Screen.clear();\n        Screen.write(0, 0, [\n            `               LL                     dd       dd`,\n            `               LL                     dd       dd                      tm`,\n            `               LL         aaaa     ddddd    ddddd    eeee   rrrrrrr`,\n            `               LL        aa  aa   dd  dd   dd  dd   ee  ee  rr    rr`,\n            `               LL        aa  aa   dd  dd   dd  dd   eeeeee  rr`,\n            `               LL        aa  aa   dd  dd   dd  dd   ee      rr`,\n            `               LLLLLLLL   aaa aa   ddd dd   ddd dd   eeee   rr`,\n            ``,\n            `                                       Version:    ${version}`,\n            `(c) 1982, 1983 Yahoo Software          Terminal:   ${terminal}`,\n            `10970 Ashton Ave.  Suite 312           Play speed: ${Game.playSpeed + 1} / ${PLAY_SPEEDS.length}`,\n            `Los Angeles, Ca  90024                 Move = ↑↓←→/WASD, Jump = Space,`,\n            `                                       Stop = Other`,\n            ``,\n            `P = Play game                          High Scores`,\n            `L = Change level of difficulty         ${highScores[0]}`,\n            `C = Configure Ladder                   ${highScores[1]}`,\n            `I = Instructions                       ${highScores[2]}`,\n            `E = Exit Ladder                        ${highScores[3]}`,\n            `                                       ${highScores[4]}`,\n            ``,\n            `Enter one of the above:`\n        ]);\n    }\n}\n","import { Screen } from './Screen';\nimport { Game } from './Game';\nimport { Input } from './Input';\n\nexport class InstructionsMenu {\n    constructor() {\n    }\n\n    update() {\n        if (Input.lastKey().toUpperCase() !== '') {\n            Input.consume();\n            Game.showMainMenu();\n        }\n    }\n\n    draw() {\n        Screen.clear();\n        Screen.write(0, 0, [\n            `You are a Lad trapped in a maze.  Your mission is is to explore the`,\n            `dark corridors never before seen by human eyes and find hidden`,\n            `treasures and riches.`,\n            ``,\n            `You control Lad by typing the direction buttons and jumping by`,\n            `typing SPACE.  But beware of the falling rocks called Der rocks.`,\n            `You must find and grasp the treasures (shown as $) BEFORE the`,\n            `bonus time runs out.`,\n            ``,\n            `A new Lad will be awarded for every 10,000 points.`,\n            `Extra points are awarded for touching the gold`,\n            `statues (shown as &).  You will receive the bonus time points`,\n            `that are left when you have finished the level.`,\n            ``,\n            `Type an ESCape to pause the Game`,\n            ``,\n            `Remember, there is more than one way to skin a cat. (Chum)`,\n            ``,\n            `Good luck Lad.`,\n            ``,\n            ``,\n            ``,\n            `Type RETURN to return to main menu:`\n        ]);\n    }\n}\n","\n// This is our list of STATES. Each entity starts out in one of these states and can move between\n// them based on events that happen in the Game (Note that some of these are directions, but\n// since an entity keeps moving in the direction it is going unless stopped, directions are\n// states in this Game)\nexport const State = {\n    STOPPED:    1,         // Standing still\n    UP:         2,         // Moving up (player only)\n    LEFT:       3,         // Moving left\n    DOWN:       4,         // Moving down\n    RIGHT:      5,         // Moving right\n    FALLING:    6,         // Falling\n    START_JUMP: 7,         // About to start a jump (player only)\n    JUMP_LEFT:  8,         // Jumping left (player only)\n    JUMP_RIGHT: 9,         // Jumping right (player only)\n    JUMP_UP:    10,        // Jumping straight up (player only)\n    DYING:      11,        // Dying (used as a death animation)\n    DEAD:       12         // Dead (for player, restart level; for rock, disappear)\n};\n\nexport const JUMP_FRAMES = {\n    [State.JUMP_RIGHT]: [\n        { x: 1, y: -1 },\n        { x: 1, y: -1 },\n        { x: 1, y: 0 },\n        { x: 1, y: 0 },\n        { x: 1, y: 1 },\n        { x: 1, y: 1 }\n    ],\n    [State.JUMP_LEFT]: [\n        { x: -1, y: -1 },\n        { x: -1, y: -1 },\n        { x: -1, y: 0 },\n        { x: -1, y: 0 },\n        { x: -1, y: 1 },\n        { x: -1, y: 1 }\n    ],\n    [State.JUMP_UP]: [\n        { x: 0, y: -1 },\n        { x: 0, y: -1 },\n        { x: 0, y: 0 },\n        { x: 0, y: 1 },\n        { x: 0, y: 1 },\n        { x: 0, y: 0 }\n    ],\n};\n","import { State, JUMP_FRAMES } from './Behavior';\nimport { LEVEL_COLS } from './Constants';\n\nexport class Entity {\n    applyMovement(field) {\n        let repeat = false;\n\n        // This method contains generic \"movement\" application for all entities, including\n        // Lad (player) and Der Rocks (enemies). Things like falling, moving left/right, etc.,\n        // work the same for both.\n        //\n        // (There's a bunch of jump logic in here too, and moving UP, which really only applies\n        // to players, but that's OK -- Der Rocks just won't attempt those actions.)\n\n        if (this.nextState) {\n            switch (this.state) {\n                case State.STOPPED:\n                case State.LEFT:\n                case State.RIGHT:\n                    if ([State.LEFT, State.RIGHT, State.STOPPED].includes(this.nextState)) {\n                        this.state = this.nextState;\n                        this.nextState = undefined;\n                    }\n                    break;\n\n                case State.UP:\n                case State.DOWN:\n                    // Normal\n                    if ([State.LEFT, State.RIGHT].includes(this.nextState)) {\n                        this.state = this.nextState;\n                        this.nextState = undefined;\n                    }\n                    break;\n            }\n        }\n\n        if (this.nextState === State.START_JUMP) {\n            // Special case: the user wants to jump!\n            //\n            // If the player is standing on something solid, we initiate a jump based on the current\n            // movement of the player. If not, we (sort of) ignore the request to jump... although\n            // it does subtly change the behavior upon landing.\n            if (field.onSolid(this.x, this.y)) {\n                if (this.state === State.STOPPED || this.state === State.FALLING) {\n                    this.state = State.JUMP_UP;\n                    this.jumpStep = 0;\n                    this.nextState = State.STOPPED;\n                } else if (this.state === State.LEFT || this.state === State.JUMP_LEFT) {\n                    this.state = State.JUMP_LEFT;\n                    this.jumpStep = 0;\n                    this.nextState = State.LEFT;\n                } else if (this.state === State.RIGHT || this.state === State.JUMP_RIGHT) {\n                    this.state = State.JUMP_RIGHT;\n                    this.jumpStep = 0;\n                    this.nextState = State.RIGHT;\n                }\n            } else {\n                if (this.state === State.JUMP_UP || this.state === State.FALLING) {\n                    this.nextState = State.STOPPED;\n                } else if (this.state === State.JUMP_RIGHT) {\n                    this.nextState = State.RIGHT;\n                } else if (this.state === State.JUMP_LEFT) {\n                    this.nextState = State.LEFT;\n                }\n            }\n        } else if (this.nextState === State.UP && field.isLadder(this.x, this.y)) {\n            // Special case: the user wants to go up!\n            //\n            // If the user is on a ladder, we can start ascending. Note that if the user is not\n            // on a ladder we ignore their input, which is intentional -- this allows queued\n            // (pacman) input, where we can tap UP a little before reaching the ladder.\n            this.state = State.UP;\n            this.nextState = undefined;\n        } else if (this.nextState === State.DOWN && (field.isLadder(this.x, this.y) || field.isLadder(this.x, this.y + 1))) {\n            // Special case: the player wants to go down!\n            //\n            // If the player is on (or above) a ladder, we can start descending. Note that if the player is not\n            // on a ladder we ignore their input, which is intentional -- this allows queued\n            // (pacman) input, where we can tap DOWN a little before reaching the ladder.\n            this.state = State.DOWN;\n            this.nextState = undefined;\n        }\n\n        switch (this.state) {\n            case State.LEFT:\n                if (!field.onSolid(this.x, this.y)) {\n                    this.nextState = State.LEFT;\n                    this.state = State.FALLING;\n                    repeat = true;\n                    break;\n                }\n                if (field.emptySpace(this.x - 1, this.y)) {\n                    this.x--;\n                } else {\n                    this.nextState = State.STOPPED;\n                }\n                break;\n\n            case State.RIGHT:\n                if (!field.onSolid(this.x, this.y)) {\n                    this.nextState = State.RIGHT;\n                    this.state = State.FALLING;\n                    repeat = true;\n                    break;\n                }\n                if (field.emptySpace(this.x + 1, this.y)) {\n                    this.x++;\n                } else {\n                    this.nextState = State.STOPPED;\n                }\n                break;\n\n            case State.UP:\n                if (field.canClimbUp(this.x, this.y - 1)) {\n                    this.y--;\n                } else {\n                    this.state = State.STOPPED;\n                }\n                break;\n\n            case State.DOWN:\n                if (field.canClimbDown(this.x, this.y + 1)) {\n                    this.y++;\n                } else {\n                    this.state = State.STOPPED;\n                }\n                break;\n\n            case State.JUMP_RIGHT:\n            case State.JUMP_LEFT:\n            case State.JUMP_UP:\n                let step = JUMP_FRAMES[this.state][this.jumpStep];\n                console.log(['jump', this.state, this.jumpStep, step]);\n                if ((this.x + step.x >= 0) && (this.x + step.x < LEVEL_COLS)) {\n                    let terrain = field.layout[this.y + step.y][this.x + step.x];\n                    if (['=', '|', '-'].includes(terrain)) {\n                        if (field.onSolid(this.x, this.y)) {\n                            this.state = this.nextState;\n                            this.nextState = undefined;\n                        } else {\n                            switch (this.state) {\n                                case State.JUMP_RIGHT:\n                                    this.nextState = State.RIGHT;\n                                    break;\n                                case State.JUMP_LEFT:\n                                    this.nextState = State.LEFT;\n                                    break;\n                                case State.JUMP_UP:\n                                    this.nextState = State.UP;\n                                    break;\n                            }\n                            this.state = State.FALLING;\n                        }\n                    } else if (terrain === 'H') {\n                        this.x += step.x;\n                        this.y += step.y;\n                        this.state = State.STOPPED;\n                        this.nextState = undefined;\n                    } else {\n                        this.x += step.x;\n                        this.y += step.y;\n                        this.jumpStep++;\n\n                        if (this.jumpStep >= JUMP_FRAMES[this.state].length) {\n                            this.state = this.nextState;\n                            this.nextState = undefined;\n                        }\n                    }\n                } else {\n                    if (field.onSolid(this.x, this.y)) {\n                        this.state = this.nextState;\n                        this.nextState = undefined;\n                    } else {\n                        this.state = State.FALLING;\n                        this.nextState = State.STOPPED;\n                    }\n                }\n                break;\n\n            case State.FALLING:\n                if (field.onSolid(this.x, this.y)) {\n                    this.state = this.nextState || State.STOPPED;\n                } else {\n                    this.y++;\n                }\n                break;\n        }\n\n        // If we were attempting to move somewhere and realized we should be falling instead,\n        // we want to re-run the entire algorithm once. This avoids what boils down to a \"skipped\n        // frame\" from the user's point of view.\n        if (repeat) return this.applyMovement(field);\n    }\n}\n","'use strict';\n\nimport { Sprite } from './Sprite';\nimport { State, JUMP_FRAMES } from './Behavior';\nimport { Input } from './Input';\nimport { Text } from './Text';\nimport { LEVEL_ROWS, LEVEL_COLS } from './Constants';\nimport { Entity } from './Entity';\nimport { Screen } from './Screen';\nimport { Game } from './Game';\n\nconst DEATH_FRAMES = ['p', 'p', 'b', 'd', 'd', 'q', 'p', 'p', 'b', 'd', 'd', 'q', '-', '-', '_', '_', '_', '_', '_'];\n\n/**\n * Player\n */\nexport class Player extends Entity {\n    constructor(x, y) {\n        super();\n        this.x = x;\n        this.y = y;\n        this.state = State.STOPPED;\n        this.nextState = State.STOPPED;\n        this.jumpStep = 0;\n        this.deathStep = 0;\n        console.log('player constructed', x, y);\n    }\n\n    update(field, moveFrame) {\n        if (this.state === State.DYING) {\n            this.deathStep++;\n            if (this.deathStep >= DEATH_FRAMES.length) this.state = State.DEAD;\n        }\n\n        if (this.state === State.DYING || this.state === State.DEAD) return;\n\n        if (!moveFrame) return;\n\n        let action = Input.lastAction();\n\n        if (action === Input.Action.LEFT) {\n            this.nextState = State.LEFT;\n            Input.consume();\n        } else if (action === Input.Action.RIGHT) {\n            this.nextState = State.RIGHT;\n            Input.consume();\n        } else if (action === Input.Action.UP) {\n            this.nextState = State.UP;\n            Input.consume();\n        } else if (action === Input.Action.DOWN) {\n            this.nextState = State.DOWN;\n            Input.consume();\n        } else if (action === Input.Action.JUMP) {\n            this.nextState = State.START_JUMP;\n            Input.consume();\n        }\n\n        return this.applyMovement(field);\n    }\n\n    draw() {\n        let char = 'g';\n\n        switch (this.state) {\n            case State.RIGHT:\n            case State.JUMP_RIGHT:\n            case State.UP:\n            case State.DOWN:\n                char = 'p';\n                break;\n\n            case State.LEFT:\n            case State.JUMP_LEFT:\n                char = 'q';\n                break;\n\n            case State.FALLING:\n                char = 'b';\n                break;\n\n            case State.DYING:\n                char = DEATH_FRAMES[this.deathStep];\n                break;\n\n            case State.DEAD:\n                char = '_';\n                break;\n        }\n\n        Screen.write(this.x, this.y, char);\n    }\n}\n","import { Text } from './Text';\nimport { State } from './Behavior';\nimport { LEVEL_COLS } from './Constants';\nimport { Entity } from './Entity';\nimport { Screen } from './Screen';\nimport { Game } from './Game';\n\nconst DEATH_FRAMES = ['{', '}', '(', ')', '%', '%', ':', ':'];\n\nexport class Rock extends Entity {\n    constructor(dispenser) {\n        super();\n        this.x = dispenser.x;\n        this.y = dispenser.y;\n        this.state = State.FALLING;\n        this.nextState = undefined;\n        this.deathStep = 0;\n    }\n\n    update(field, moveFrame) {\n        if (this.state === State.DYING) {\n            this.deathStep++;\n            if (this.deathStep >= DEATH_FRAMES.length) this.state = State.DEAD;\n        }\n\n        if (this.state === State.DYING || this.state === State.DEAD) return;\n\n        if (!moveFrame) return;\n\n        if (this.state === State.STOPPED) {\n            if (this.x === 0 || !field.emptySpace(this.x - 1, this.y)) {\n                this.nextState = State.RIGHT;\n            } else if (this.x === LEVEL_COLS - 1 || !field.emptySpace(this.x + 1, this.y)) {\n                this.nextState = State.LEFT;\n            } else {\n                this.nextState = Math.random() > 0.5 ? State.LEFT : State.RIGHT;\n            }\n        }\n\n        if (this.x === 0 && this.state === State.LEFT) {\n            this.state = State.RIGHT;\n        }\n\n        if (this.x === LEVEL_COLS - 1 && this.state === State.RIGHT) {\n            this.state = State.LEFT;\n        }\n\n        if (this.state !== State.FALLING && !field.onSolid(this.x, this.y)) {\n            this.nextState = State.FALLING;\n        }\n\n        if (field.isLadder(this.x, this.y + 1) && [State.LEFT, State.RIGHT].includes(this.state)) {\n            let r = Math.floor(Math.random() * 4);\n            this.nextState = [State.LEFT, State.RIGHT, State.DOWN, State.DOWN][r];\n        }\n\n        if (field.isEater(this.x, this.y)) {\n            this.state = State.DYING;\n            return;\n        }\n\n        this.applyMovement(field);\n    }\n\n    draw() {\n        let char = 'o';\n\n        switch (this.state) {\n            case State.DYING:\n                char = DEATH_FRAMES[this.deathStep];\n                break;\n            case State.DEAD:\n                return;\n        }\n\n        Screen.write(this.x, this.y, char);\n    }\n}\n","import { LEVEL_ROWS, LEVEL_COLS } from './Constants';\nimport LevelData from '../levels/levels.json';\n\nexport const Level = {\n    LEVELS: LevelData,\n    LEVEL_COUNT: LevelData.length,\n\n    load(levelNumber) {\n        console.log(Level.LEVELS);\n        // As the player keeps playing, level numbers will loop around to beginning\n        let level = Level.LEVELS[levelNumber % Level.LEVELS.length];\n        if (!level) throw new Error(`No such level number: ${levelNumber}`);\n\n        // Perform some sanity checks on the level layout and extract useful info\n        // like player start position and dispenser positions etc.\n\n        let layout = level.layout.map(row => row.split(''));\n        let dispensers = [];\n        let player;\n\n        // Sanity check\n        layout = layout.slice(0, LEVEL_ROWS);\n\n        for (let y = 0; y < LEVEL_ROWS; y++) {\n            // Sanity checks\n            if (!layout[y]) layout[y] = [];\n            layout[y] = layout[y].slice(0, LEVEL_COLS);\n\n            for (let x = 0; x < LEVEL_COLS; x++) {\n                // Sanity check\n                if (!layout[y][x]) layout[y][x] = ' ';\n\n                // Der Dispensers (V) and Der Eaters (*) have behaviors, so it is convenient for us\n                // to construct a list of them, but they are permanent parts of the layout, so we can\n                // leave them as part of the level and draw them normally.\n\n                if (layout[y][x] === 'V') {\n                    dispensers.push({ x, y });\n                }\n\n                // Treasure ($), Statues (&), and the Lad (p) are transient - the player moves around and\n                // can pick up the treasures and statues. That's why for these elements, we add them to\n                // our lists AND we remove them from the \"playing field\", we'll draw them separately on\n                // top of the layout.\n\n                if (layout[y][x] === 'p') {\n                    layout[y][x] = ' ';\n                    player = { x, y };\n                }\n\n                // Everything else, like floors (=), walls (|), ladders (H) and fire (^), is part of the\n                // layout. The Lad interacts with them, but we can handle that during our movement checks.\n            }\n        }\n\n        return {\n            name: level.name,\n            time: level.time,\n            maxRocks: level.maRrocks,\n            layout,\n            dispensers,\n            player\n        };\n    }\n};\n","/**\n * `PlayingField` is a class that represents a level that is actively being played on-screen.\n * A new one is created by the game session any time we start a new level.\n *\n * Level-specific stuff (like bonus time, dispensers, rocks, player position, etc.) is all\n * managed by the playing field.\n */\n\nimport { LEVEL_COLS, SCORE_ROCK, SCORE_STATUE, SCORE_TREASURE, MAX_ROCKS, DISPENSER_MAX_ROCKS, HIDDEN_FACTOR_MAX_ROCKS } from './Constants';\nimport { Game } from './Game';\nimport { Player } from './Player';\nimport { Rock } from './Rock';\nimport { State } from './Behavior';\nimport { Screen } from './Screen';\nimport { Level } from './Level';\n\nexport class PlayingField {\n    constructor(levelNumber) {\n        let level = Level.load(levelNumber);\n\n        // Store level-related info\n        this.layout = level.layout;\n        this.dispensers = level.dispensers;\n        this.time = 2000;\n\n        // Initialize player\n        this.player = new Player(level.player.x, level.player.y);\n\n        // Initialize list of rocks (empty)\n        this.rocks = [];\n\n        // Not winning yet (while \"winning\" the player stops moving and we add up the bonus score)\n        this.winning = false;\n    }\n\n    update(moveFrame) {\n        // If we're already winning, keep counting down the bonus time, but\n        // no more movement will happen on this level.\n        if (this.winning) {\n            Game.session.updateScore(SCORE_TREASURE);\n            this.time -= 10;\n            if (this.time < 0) Game.session.startNextLevel();\n            return;\n        }\n\n        // Count down bonus time\n        if (this.time > 0 && moveFrame) this.time--;\n\n        let oldX = this.player.x, oldY = this.player.y;\n\n        // Move player based on user input\n        this.player.update(this, moveFrame);\n\n        // Any time you move OFF of a disappearing floor, it goes away.\n        if (oldX !== this.player.x && oldY === this.player.y) {\n            if (this.isDisappearingFloor(oldX, oldY + 1)) {\n                this.layout[oldY + 1][oldX] = ' ';\n            }\n        }\n\n        // Check if player should be dead (before moving rocks)\n        if (moveFrame) this.checkIfPlayerShouldDie(Game.session);\n\n        // Move rocks\n        for (let rock of this.rocks) rock.update(this, moveFrame);\n\n        // Check if player should be dead (after moving rocks)\n        if (moveFrame) this.checkIfPlayerShouldDie(Game.session);\n\n        if (moveFrame) {\n            // Collect statues\n            if (this.isStatue(this.player.x, this.player.y)) {\n                this.layout[this.player.y][this.player.x] = ' ';\n                Game.session.updateScore(SCORE_STATUE);\n            }\n\n            // Collect treasure (ends the current level)\n            if (this.isTreasure(this.player.x, this.player.y)) {\n                this.winning = true;\n                return;\n            }\n\n            // Interact with trampolines\n            if (this.isTrampoline(this.player.x, this.player.y)) {\n                switch (Math.floor(Math.random() * 5)) {\n                    case 0:\n                        this.player.state = State.LEFT;\n                        this.player.nextState = undefined;\n                        break;\n                    case 1:\n                        this.player.state = State.RIGHT;\n                        this.player.nextState = undefined;\n                        break;\n                    case 2:\n                        this.player.state = State.JUMP_UP;\n                        this.player.nextState = undefined;\n                        this.player.jumpStep = 0;\n                        break;\n                    case 3:\n                        this.player.state = State.JUMP_LEFT;\n                        this.player.nextState = State.LEFT;\n                        this.player.jumpStep = 0;\n                        break;\n                    case 4:\n                        this.player.state = State.JUMP_RIGHT;\n                        this.player.nextState = State.RIGHT;\n                        this.player.jumpStep = 0;\n                        break;\n                }\n            }\n\n            // Kill dead rocks\n            this.rocks = this.rocks.filter(rock => rock.state !== State.DEAD);\n\n            // Dispense new rocks\n            if (this.rocks.length < this.maxRocks() && Math.random() > 0.91) {\n                let dispenser = this.dispensers[Math.floor(Math.random() * this.dispensers.length)];\n                this.rocks.push(new Rock(dispenser));\n            }\n\n            // Kill player\n            if (this.player.state === State.DEAD) {\n                Game.session.restartLevel();\n            }\n        }\n    }\n\n    draw() {\n        // Draw layout\n        Screen.write(0, 0, this.layout.map(row => row.join('')));\n\n        // Draw player\n        this.player.draw();\n\n        // Draw rocks\n        this.rocks.forEach(rock => rock.draw());\n    }\n\n    //\n    // Utility functions - this is an attempt to consolidate logic in one spot and make other\n    // functions (like the update logic in Player) more readable.\n    //\n\n    onSolid(x, y) {\n        return ['=', '-', 'H', '|'].includes(this.layout[y + 1][x]) || this.layout[y][x] === 'H';\n    }\n\n    emptySpace(x, y) {\n        if (x < 0 || x >= LEVEL_COLS) {\n            return false;\n        } else {\n            return !['|', '='].includes(this.layout[y][x]);\n        }\n    }\n\n    isLadder(x, y) {\n        return this.layout[y][x] === 'H';\n    }\n\n    isStatue(x, y) {\n        return this.layout[y][x] === '&';\n    }\n\n    isTreasure(x, y) {\n        return this.layout[y][x] === '$';\n    }\n\n    isTrampoline(x, y) {\n        return this.layout[y][x] === '.';\n    }\n\n    isEater(x, y) {\n        return this.layout[y][x] === '*';\n    }\n\n    isFire(x, y) {\n        return this.layout[y][x] === '^';\n    }\n\n    isDisappearingFloor(x, y) {\n        return this.layout[y][x] === '-';\n    }\n\n    canClimbUp(x, y) {\n        if (y < 0) return false;\n        return ['H', '&', '$'].includes(this.layout[y][x]);\n    }\n\n    canClimbDown(x, y) {\n        return ['H', '&', '$', ' ', '^', '.'].includes(this.layout[y][x]);\n    }\n\n    checkIfPlayerShouldDie() {\n        // If we're ALREADY dying or dead, let nature run its course\n        if (this.player.state === State.DYING || this.player.state === State.DEAD) return;\n\n        // Landing on fire kills you\n        if (this.isFire(this.player.x, this.player.y)) {\n            this.player.state = State.DYING;\n        }\n\n        // Running out of time kills you\n        if (this.time <= 0) {\n            this.player.state = State.DYING;\n        }\n\n        // Running into a rock kills you, and makes the rock that killed you disappear.\n        // That's not necessary, I just think it looks better. While we play the death\n        // animation we'll continue to move rocks, so another rock might also \"hit\" you,\n        // but it will just pass through your dying character.\n        //\n        // If we're above a rock with 1 or 2 spaces between, we get some points instead.\n        //\n        // A function named `checkIfPlayerShouldDie` is probably not the best place to do\n        // this, but it's convenient because we want to do this twice (just like the death\n        // check).\n        //\n        //                    p                          p\n        // (1)   p     -->            (2)   p     -->\n        //        o          o                o          o\n        //      =====       =====          =====       =====\n        //\n        // In situation (1), there will never be a frame on-screen where the player is directly\n        // above the rock, but we'll still count it because we'll check once after the player moves.\n        // In situation (2), the first check won't count, but the second check after the rocks move\n        // will give the score (and the frame drawn on screen will show the player above the rock).\n        //\n        for (let i = 0; i < this.rocks.length; i++) {\n            if (this.player.x === this.rocks[i].x) {\n                if (this.player.y === this.rocks[i].y) {\n                    this.player.state = State.DYING;\n                    this.rocks.splice(i, 1);\n                    break;\n                } else if (this.player.y === this.rocks[i].y - 1 && this.emptySpace(this.player.x, this.player.y + 1)) {\n                    Game.session.updateScore(SCORE_ROCK);\n                } else if (this.player.y === this.rocks[i].y - 2 && this.emptySpace(this.player.x, this.player.y + 1) && this.emptySpace(this.player.x, this.player.y + 2)) {\n                    Game.session.updateScore(SCORE_ROCK);\n                }\n            }\n        }\n    }\n\n    maxRocks() {\n        // The total number of rocks we can have on screen is based on a global max rocks value,\n        // then increased slightly by the number of dispensers on the level, then increased again\n        // by a hidden difficulty factor (level cycles).\n        return MAX_ROCKS + this.dispensers.length * DISPENSER_MAX_ROCKS + Game.session.hiddenFactor() * HIDDEN_FACTOR_MAX_ROCKS;\n    }\n}\n","/**\n * `GameSession` is a class that represents... well, a game session! It is created when the\n * player presses `P` at the main menu, and ends when the player runs out of lives.\n *\n * The game session tracks values that persist across levels (like number of lives, score,\n * the level number, etc.). Most of the actual in-game logic it hands off to `PlayingField`.\n */\n\nimport { PLAY_SPEEDS, SCORE_ROCK, SCORE_STATUE, SCORE_TREASURE, HIDDEN_FACTOR_PLAY_SPEED } from './Constants';\nimport { Game } from './Game';\nimport { PlayingField } from './PlayingField';\nimport { Level } from './Level';\nimport { Screen } from './Screen';\nimport { Input } from './Input';\n\nexport class GameSession {\n    constructor() {\n        this.score = 0;\n        this.levelNumber = 0;\n        this.levelCycle = 1;\n        this.lives = 5;\n        this.nextLife = 100;\n        this.paused = false;\n    }\n\n    update() {\n        // The `Game` controls the overall game loop, which runs at a fixed 60 frames per second.\n        //\n        // However, Ladder has the concept of \"play speed\" which the player can change at the main\n        // menu, and it controls how fast the game runs. To accomplish that, we can do a second\n        // frame gate here. This gate sets a flag called `moveFrame` IF things can move in this frame.\n        //\n        // We do it this way so that animations (like the play death animation, or the end-of-level\n        // score animation) can run at the same speed no matter what the play speed is.\n        let now = new Date().getTime();\n        let lastFrame = this.lastFrame || 0;\n        let moveFrame = false;\n\n        if (now - lastFrame >= (this.nextFrame || 0)) {\n            moveFrame = true;\n            this.nextFrame = now + this.moveFrameMillisecondDelay();\n        }\n\n        if (this.paused && [Input.Action.PAUSE, Input.Action.RESUME].includes(Input.lastAction())) {\n            this.paused = false;\n            Input.consume();\n        }\n\n        if (!this.paused && Input.lastAction() === Input.Action.PAUSE) {\n            this.paused = true;\n            Input.consume();\n        }\n\n        if (this.paused) return;\n\n        // If we haven't instantiated the playing field yet, create it now.\n        if (!this.field) this.field = new PlayingField(this.levelNumber);\n\n        // Hand off to the playing field for actual in-game logic\n        this.field.update(moveFrame);\n\n        this.handleCheatCodes();\n    }\n\n    draw() {\n        if (this.field) this.field.draw();\n\n        let stat = [\n            String(this.lives).padStart(2, ' '),\n            String(this.levelNumber + 1).padStart(2, ' '),\n            String(this.score).padStart(6, ' '),\n            this.field ? String(this.field.time).padStart(4, ' ') : ''\n        ];\n        Screen.write(0, 21, `Lads   ${stat[0]}     Level   ${stat[1]}      Score   ${stat[2]}      Bonus time   ${stat[3]}`);\n\n        if (this.paused) {\n            Screen.write(0, 23, 'Paused - type ESCape or RETURN to continue.');\n        }\n    }\n\n    restartLevel() {\n        this.field = undefined;\n    }\n\n    startNextLevel() {\n        this.field = undefined;\n        this.levelNumber++;\n        if (this.levelNumber % Level.LEVEL_COUNT === 0) {\n            this.levelCycle++;\n        }\n    }\n\n    updateScore(scoreType) {\n        switch (scoreType) {\n            case SCORE_ROCK:\n                this.score += 200;\n                break;\n            case SCORE_STATUE:\n                this.score += this.field.time;\n                break;\n            case SCORE_TREASURE:\n                // Added repeatedly after winning the level\n                this.score += 10;\n                break;\n        }\n    }\n\n    hiddenFactor() {\n        // This \"hidden\" difficulty level increases steadily as the player completes a\n        // level cycle (every time they reach the Easy Street level). This makes the\n        // game slowly harder as you keep playing.\n        return Math.floor(this.levelNumber / Level.LEVEL_COUNT);\n    }\n\n    moveFrameMillisecondDelay() {\n        // Regardless of play speed, the game gets slightly faster every level cycle\n        return Math.floor(PLAY_SPEEDS[Game.playSpeed] - this.hiddenFactor() * HIDDEN_FACTOR_PLAY_SPEED * PLAY_SPEEDS[Game.playSpeed]);\n    }\n\n    handleCheatCodes() {\n        // Cheat codes are useful for testing, and this game is no exception. Of course\n        // THESE cheat codes do not belong here, as they wouldn't be created until 11 years\n        // later, but that won't stop me from inserting them anywhere I get the chance!\n        //\n        // =================     ===============     ===============   ========  ========\n        // \\\\ . . . . . . .\\\\   //. . . . . . .\\\\   //. . . . . . .\\\\  \\\\. . .\\\\// . . //\n        // ||. . ._____. . .|| ||. . ._____. . .|| ||. . ._____. . .|| || . . .\\/ . . .||\n        // || . .||   ||. . || || . .||   ||. . || || . .||   ||. . || ||. . . . . . . ||\n        // ||. . ||   || . .|| ||. . ||   || . .|| ||. . ||   || . .|| || . | . . . . .||\n        // || . .||   ||. _-|| ||-_ .||   ||. . || || . .||   ||. _-|| ||-_.|\\ . . . . ||\n        // ||. . ||   ||-'  || ||  `-||   || . .|| ||. . ||   ||-'  || ||  `|\\_ . .|. .||\n        // || . _||   ||    || ||    ||   ||_ . || || . _||   ||    || ||   |\\ `-_/| . ||\n        // ||_-' ||  .|/    || ||    \\|.  || `-_|| ||_-' ||  .|/    || ||   | \\  / |-_.||\n        // ||    ||_-'      || ||      `-_||    || ||    ||_-'      || ||   | \\  / |  `||\n        // ||    `'         || ||         `'    || ||    `'         || ||   | \\  / |   ||\n        // ||            .===' `===.         .==='.`===.         .===' /==. |  \\/  |   ||\n        // ||         .=='   \\_|-_ `===. .==='   _|_   `===. .===' _-|/   `==  \\/  |   ||\n        // ||      .=='    _-'    `-_  `='    _-'   `-_    `='  _-'   `-_  /|  \\/  |   ||\n        // ||   .=='    _-'          `-__\\._-'         `-_./__-'         `' |. /|  |   ||\n        // ||.=='    _-'                                                     `' |  /==.||\n        // =='    _-'                                                            \\/   `==\n        // \\   _-'                                                                `-_   /\n        //  `''                                                                      ``'\n        //\n        let recentKeystrokes = Input.history.map(event => event.key).join('').toUpperCase();\n        if (recentKeystrokes.match(/IDCLEV(\\d\\d)/)) {\n            // Changing levels is as simple as setting the desired level number\n            // and then throwing the current playing field away.\n            Input.consume();\n            this.levelNumber = parseInt(RegExp.$1, 10);\n            this.field = undefined;\n        } else if (recentKeystrokes.includes(\"IDDQD\")) {\n            Input.consume();\n            console.log(\"god mode\");\n        } else if (recentKeystrokes.includes(\"IDKFA\")) {\n            // Immediately end the current level as if we'd touched the reasure.\n            Input.consume();\n            this.field.winning = true;\n        }\n    }\n}\n","/**\n * `Game` is a singleton that represents the running game in the browser,\n * initializes game submodules, and handles the top-level game loop.\n */\n\nimport { Sprite } from './Sprite';\nimport { Input } from './Input';\nimport { Text } from './Text';\nimport { Viewport } from './Viewport';\nimport { GAME_WIDTH, GAME_HEIGHT, PLAY_SPEEDS } from './Constants';\nimport { Audio } from './Audio';\nimport { Screen } from './Screen';\nimport { MainMenu } from './MainMenu';\nimport { InstructionsMenu } from './InstructionsMenu';\nimport { GameSession } from './GameSession';\n\nexport const Game = {\n    init() {\n        Sprite.loadSpritesheet(async () => {\n            await Viewport.init();\n            await Screen.init();\n            await Sprite.init();\n            await Text.init();\n            await Input.init();\n            await Audio.init();\n\n            window.addEventListener('blur', () => this.lostFocus());\n            window.addEventListener('focus', () => this.gainedFocus());\n\n            this.start();\n        });\n    },\n\n    start() {\n        this.frame = 0;\n        this.playSpeed = 0;\n        this.menu = new MainMenu();\n\n        window.requestAnimationFrame(() => this.onFrame());\n    },\n\n    onFrame() {\n        let fps = 60;\n        let now = new Date().getTime();\n        let lastFrame = this.lastFrame || 0;\n\n        // Note: we are using `requestAnimationFrame`, which will call our onFrame handler\n        // 60 times per second in most cases. However, it can be higher (the browser may\n        // respect the user's refresh settings, which could be 120Hz or higher for example).\n        //\n        // It's safest to have a check like we do here, where we explicitly limit the number\n        // of update calls to 60 times per second.\n        if (now - lastFrame >= 1000 / fps) {\n            this.frame++;\n            this.update();\n            this.lastFrame = now;\n        }\n\n        Viewport.resize();\n        this.draw();\n\n        window.requestAnimationFrame(() => this.onFrame());\n    },\n\n    update() {\n        // Pull in frame by frame button pushes / keypresses / mouse clicks\n        Input.update();\n\n        // perform any per-frame audio updates\n        Audio.update();\n\n        if (this.menu) {\n            this.menu.update();\n        }\n\n        if (this.session) this.session.update();\n    },\n\n    draw() {\n        // Reset canvas transform and scale\n        Viewport.ctx.setTransform(Viewport.scale, 0, 0, Viewport.scale, 0, 0);\n\n        // Clear canvas. Note we don't go for pure black but rather a dark gray, to simulate\n        // the relatively bright phosphors on the Kaypro II. (We are going to add scan lines\n        // at the end which will appear to darken the whole screen, so the overall effect\n        // will be a little darker than this color.)\n        Viewport.ctx.fillStyle = '#181818';\n        Viewport.ctx.fillRect(0, 0, Viewport.width, Viewport.height);\n\n        // Center the 80x25 character \"screen\" in the viewport\n        Viewport.ctx.translate((Viewport.width - GAME_WIDTH) / 2 | 0, (Viewport.height - GAME_HEIGHT) / 2 | 0);\n\n        // Hand off control to our submodules to draw whatever they'd like. For all the submodules\n        // below us, \"drawing\" means writing text to the Screen.\n        Screen.clear();\n        if (this.session) this.session.draw();\n        if (this.menu) this.menu.draw();\n\n        // Render the text on the screen to the viewport.\n        Screen.draw(Viewport.ctx);\n\n        // After drawing the \"screen\" (characters), add scan lines on top. Our scan lines are almost\n        // not visible, but move slowly and introduce subtle visual shifts in the characters on screen,\n        // which is the effect we are going for.\n        //\n        // (Technically scan lines should be IN BETWEEN rows of pixels, and what we're actually simulating\n        // here is our eyeballs clocking the screen refresh. We're going for a general feeling here.)\n        Viewport.ctx.fillStyle = 'rgba(0, 0, 0, 0.5)';\n        for (let i = -Viewport.height / 2; i < Viewport.height / 2; i++) {\n            let k = ((this.frame / 4) % 4) + i * 4;\n            Viewport.ctx.fillRect(-Viewport.width, k, Viewport.width * 2, 2);\n        }\n    },\n\n    startSession() {\n        this.menu = undefined;\n        this.session = new GameSession();\n    },\n\n    showMainMenu() {\n        this.menu = new MainMenu();\n        this.session = undefined;\n    },\n\n    showInstructions() {\n        this.menu = new InstructionsMenu();\n        this.session = undefined;\n    },\n\n    lostFocus() {\n        // If we lose focus, automatically pause the game session (if there is one).\n        if (this.session) this.session.paused = true;\n    },\n\n    gainedFocus() {\n        // Do nothing - we'll let the user hit enter to resume playing.\n    }\n};\n","/**\n * This is the entry point for the game.\n */\nimport { Game } from './Game';\n\nGame.init();\n"]}