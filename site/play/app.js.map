{"version":3,"sources":["app.js","../src/js/Constants.js","../src/js/Viewport.js","../src/js/Util.js","../src/js/SpriteSheet-gen.js","../src/js/Sprite.js","../src/js/Input.js","../src/js/Text.js","../src/js/lib/zzfx.js","../src/js/lib/zzfxm.js","../src/js/songs/ObliqueMystique.js","../src/js/Audio.js","../src/js/Screen.js","../src/js/MainMenu.js","../src/js/InstructionsMenu.js","../src/js/Behavior.js","../src/js/Entity.js","../src/js/Player.js","../src/js/Rock.js","../src/js/Level.js","../src/js/PlayingField.js","../src/js/GameSession.js","../src/js/Game.js","../src/js/index.js"],"names":["PLAY_SPEEDS","Viewport","[object Object]","canvas","document","getElementById","ctx","getContext","resize","force","dpi","window","devicePixelRatio","width","clientWidth","height","clientHeight","dpiWidth","dpiHeight","scale","Math","min","ceil","center","u","v","imageSmoothingEnabled","rgba","r","g","b","a","createCanvas","createElement","SpriteSheet","Sprite","cb","image","Image","onload","src","sheet","data","anchor","font","source","w","h","img","x","y","initDynamicSprite","sliceCanvas","drawImage","loadCacheSlice","sprite","pos","rotation","this","viewportSprite2uv","save","translate","rotate","restore","Game","camera","Action","UP","DOWN","LEFT","RIGHT","JUMP","STOP","PAUSE","RESUME","Input","KeyMapping","KeyW","KeyS","KeyA","KeyD","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Space","Escape","Enter","buffer","history","addEventListener","event","entry","at","Date","getTime","key","code","action","push","console","log","now","filter","length","undefined","UNICODE_CHAR_MAP","join","split","reduce","map","char","idx","Text","white","black","recolor","black_shadow","blue","blue_shadow","shadow","red","terminal","terminal_shadow","text","Array","isArray","block","drawText","k","charCodeAt","floor","measureWidth","sum","c","cu","cv","next","wip","list","cWidth","saved","space","pop","line","col","row","splitParagraph","color","fillStyle","fillRect","globalCompositeOperation","zzfx","t","zzfxP","zzfxG","e","zzfxX","createBufferSource","f","createBuffer","zzfxR","d","i","getChannelData","set","connect","destination_","start","q","F","z","A","l","B","G","m","C","p","PI","H","I","D","random","Z","E","n","J","K","sin","max","tan","abs","round","zzfxV","top","AudioContext","webkitAudioContext","destination","ObliqueMystique","Audio","readyToPlay","gain_","createGain","shotgun","page","shellReload","damage","alarm","victory","song","instruments","patterns","sequence","BPM","instrumentParameters","j","note","sample","patternChannel","notFirstBeat","stop","instrument","pitch","attenuation","outSampleOffset","sampleOffset","nextSampleOffset","panning","sampleBuffer","leftChannelBuffer","rightChannelBuffer","channelIndex","hasMore","sampleCache","beatLength","patternIndex","sequenceIndex","zzfxM","musicPlaying","sound","gain","linearRampToValueAtTime","currentTime","Screen","screen","clear","MainMenu","lastKeyPressed","toUpperCase","consume","startSession","playSpeed","showInstructions","highScores","write","InstructionsMenu","showMainMenu","State","STOPPED","FALLING","START_JUMP","JUMP_LEFT","JUMP_RIGHT","JUMP_UP","DYING","DEAD","JUMP_FRAMES","Entity","field","repeat","nextState","state","includes","onSolid","jumpStep","isLadder","emptySpace","canClimbUp","canClimbDown","step","terrain","layout","applyMovement","DEATH_FRAMES","Player","super","deathStep","moveFrame","lastActionPressed","Rock","dispenser","LEVEL_COLS","isEater","LevelData","name","time","maxRocks","rocks","Level","LEVELS","LEVEL_COUNT","levelNumber","level","Error","player","dispensers","slice","maRrocks","PlayingField","load","winning","session","updateScore","startNextLevel","oldX","oldY","update","isDisappearingFloor","checkIfPlayerShouldDie","rock","isStatue","isTreasure","isTrampoline","restartLevel","draw","forEach","isFire","splice","hiddenFactor","GameSession","score","levelCycle","lives","nextLife","lastFrame","nextFrame","moveFrameMillisecondDelay","handleCheatCodes","stat","String","padStart","scoreType","recentKeystrokes","match","parseInt","RegExp","$1","loadSpritesheet","async","init","pause","unpause","frame","menu","requestAnimationFrame","onFrame","setTransform","drawToViewport","paused"],"mappings":"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A,kFACA,oFAGF,CACCa,KAAM,cACNC,KAAM,GACNC,SAAU,EACVf,OAAQ,CACP,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,oFAGF,CACCa,KAAM,aACNC,KAAM,GACNC,SAAU,EACVf,OAAQ,CACP,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,oFAGF,CACCa,KAAM,gBACNC,KAAM,GACNE,MAAO,EACPhB,OAAQ,CACP,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,oFAGF,CACCa,KAAM,qBACNC,KAAM,GACNC,SAAU,EACVf,OAAQ,CACP,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,oFAGF,CACCa,KAAM,WACNC,KAAM,GACNC,SAAU,EACVf,OAAQ,CACP,kFACA,kFACA,kFACA,kFACA,mFACA,mFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,oFAGF,CACCa,KAAM,WACNC,KAAM,GACNC,SAAU,EACVf,OAAQ,CACP,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,kFACA,qFmB54CA,MAAMiB,MAAQ,CACjBC,OAAQN,UACRO,YAAaP,UAAU9L,OAEvBtG,KAAK4S,aACD1M,QAAQC,IAAIsM,MAAMC,QAElB,IAAIG,MAAQJ,MAAMC,OAAOE,YAAcH,MAAMC,OAAOpM,QACpD,IAAKuM,MAAO,MAAM,IAAIC,MAA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","file":"app.js","sourcesContent":["(function () {\n    'use strict';\n\n    /**\n     * Constants\n     */\n\n    // The playable area. Note that this is the desired dimensions, but the actual on-screen dimensions\n    // may be larger to maintain aspect ratio (see `Viewport.width` & `Viewport.height`).\n    const GAME_WIDTH = 640;\n    const GAME_HEIGHT = 400;\n\n    // The \"screen area\". This is an ASCII game and so most of the game logic doesn't care about browser\n    // pixels, we care about the ASCII display area (80x25).\n    const SCREEN_WIDTH = 80;\n    const SCREEN_HEIGHT = 25;\n\n    // The size of our on-screen characters (given dimensions above, this is 80 cols by 25 rows).\n    const CHAR_WIDTH = 8;\n    const CHAR_HEIGHT = 16;\n    const CHARSHEET_WIDTH = 16 * CHAR_WIDTH;\n\n    // Fixed level size\n    const LEVEL_ROWS = 20;\n    const LEVEL_COLS = 79;\n\n    // Play speeds, expressed as frames per second.\n    //\n    // According to the original, the play speeds had millisecond delays of:\n    //   [100ms, 50ms, 25ms, 13ms, 7ms].\n    //\n    // This would mean the effective FPS was:\n    //   [10, 20, 40, 76, 142].\n    //\n    // I think this is way too high, and might not be accurate (it doesn't count\n    // time spent drawing the screen and running the game's logic, which might\n    // be a significant number of milliseconds). From memory, each speed was about\n    // 50% faster than the previous one, so that's what I've set here.\n    const PLAY_SPEEDS = [120, 100, 90, 50, 30];\n\n    // Maximum number of rocks on screen at once\n    const MAX_ROCKS = 7;\n\n    // Each dispenser on the level increases max rocks by 1\n    const DISPENSER_MAX_ROCKS = 1;\n\n    // Hidden difficulty factor - the game gets 5% faster each level cycle\n    const HIDDEN_FACTOR_PLAY_SPEED = 0.05;\n\n    // Hidden difficulty factor - the maximum number of rocks increases each level cycle\n    const HIDDEN_FACTOR_MAX_ROCKS = 2;\n\n    // Score events (note, these are just identifiers for the types of score increases, not\n    // actual score values).\n    const SCORE_ROCK = 1;\n    const SCORE_STATUE = 2;\n    const SCORE_TREASURE = 3;\n\n    /**\n     * Viewport\n     *\n     * Represents the game display (for us, a canvas).\n     */\n    const Viewport = {\n        init() {\n            Viewport.canvas = document.getElementById('canvas');\n            Viewport.ctx = Viewport.canvas.getContext('2d');\n            Viewport.resize(true);\n        },\n\n        // Resize the canvas to give us approximately our desired game display size.\n        //\n        // Rather than attempt to explain it, here's a concrete example:\n        //\n        //     we start with a desired game dimension:   480x270px\n        //          get the actual browser dimensions:  1309x468px\n        //          factor in the display's DPI ratio:  2618x936px\n        //         now calculate the horizontal scale:       5.45x\n        //                     and the vertical scale:       3.46x\n        //            our new offical game scaling is:        5.4x\n        //       and our official viewport dimensions:   484x173px\n        //\n        // This approach emphasizes correct aspect ratio and maintains full-window rendering, at\n        // the potential cost of limiting visibility of the game itself in either the X or Y axis.\n        // If you use this approach, make sure your GUI can \"float\" (otherwise there may be whole\n        // UI elements the player cannot see!).\n        resize(force) {\n            let dpi = window.devicePixelRatio,\n                width = Viewport.canvas.clientWidth,\n                height = Viewport.canvas.clientHeight,\n                dpiWidth = width * dpi,\n                dpiHeight = height * dpi;\n\n            if (\n                force ||\n                Viewport.canvas.width !== dpiWidth ||\n                Viewport.canvas.height !== dpiHeight\n            ) {\n                Viewport.canvas.width = dpiWidth;\n                Viewport.canvas.height = dpiHeight;\n\n                Viewport.scale = ((Math.min(dpiWidth / GAME_WIDTH, dpiHeight / GAME_HEIGHT) * 10) | 0) / 10;\n                Viewport.width = Math.ceil(dpiWidth / Viewport.scale);\n                Viewport.height = Math.ceil(dpiHeight / Viewport.scale);\n                Viewport.center = {\n                    u: (Viewport.width / 2) | 0,\n                    v: (Viewport.height / 2) | 0\n                };\n                Viewport.clientWidth = width;\n                Viewport.clientHeight = height;\n\n                // Note: smoothing flag gets reset on every resize by some browsers, which is why\n                // we do it here.\n                Viewport.ctx.imageSmoothingEnabled = false;\n            }\n\n            // We do this every frame, not just on resize, due to browser sometimes \"forgetting\".\n            //Viewport.canvas.style.cursor = 'none';\n        }\n    };\n\n    function rgba(r, g, b, a) {\n        return `rgba(${r},${g},${b},${a})`;\n    }\n\n    function createCanvas(width, height) {\n        let canvas = document.createElement('canvas');\n        canvas.width = width;\n        canvas.height = height;\n        let ctx = canvas.getContext('2d');\n        return { canvas, ctx };\n    }\n\n    /**\n     * This module is generated by `gulp buildAssets`.\n     */\n    const SpriteSheet =\n        /* <generated> */\n    { font: [ [ 128, 0, 128, 448 ] ],\n      font2: [ [ 0, 0, 128, 512 ] ],\n      harold: [ [ 128, 448, 19, 12 ] ],\n      uri: 'sprites.png' };\n    /* </generated> */\n\n    /**\n     * Sprite\n     *\n     * Encapsulates loading sprite slices from the spritesheet, organizing them, and\n     * modifying them or constructing using primitives. To save space, we use some techniques\n     * like storing only a small slice of an image in the spritesheet, then using code\n     * to duplicate it, add some randomness, etc.\n     */\n    const Sprite = {\n        // This is an exception to the rule, loading the spritesheet is a special action that\n        // happens BEFORE everything is initialized.\n        loadSpritesheet(cb) {\n            let image = new Image();\n            image.onload = cb;\n            image.src = SpriteSheet.uri;\n            Sprite.sheet = image;\n        },\n\n        init() {\n            // Base pixel font and icons (see `Text.init` for additional variations)\n            Sprite.font = initBasicSprite(SpriteSheet.font2[0]);\n\n            return;\n        },\n\n        /**\n         * A small helper that draws a sprite onto a canvas, respecting the anchor point of\n         * the sprite. Note that the canvas should be PRE-TRANSLATED and PRE-ROTATED, if\n         * that's appropriate!\n         */\n        drawSprite(ctx, sprite, u, v) {\n            ctx.drawImage(sprite.img, u - sprite.anchor.x, v - sprite.anchor.y);\n        },\n\n        drawViewportSprite(sprite, pos, rotation) {\n            let { u, v } = this.viewportSprite2uv(\n                sprite,\n                pos\n            );\n            if (rotation) {\n                Viewport.ctx.save();\n                Viewport.ctx.translate(u + sprite.anchor.x, v + sprite.anchor.y);\n                Viewport.ctx.rotate(rotation);\n                Viewport.ctx.drawImage(\n                    sprite.img,\n                    -sprite.anchor.x,\n                    -sprite.anchor.y\n                );\n                Viewport.ctx.restore();\n            } else {\n                Viewport.ctx.drawImage(sprite.img, u, v);\n            }\n        },\n\n        viewportSprite2uv(sprite, pos) {\n            return {\n                u: pos.x - sprite.anchor.x - Game.camera.pos.x + Viewport.center.u,\n                v: pos.y - sprite.anchor.y - Game.camera.pos.y + Viewport.center.v\n            };\n        }\n    };\n\n    // Sprite utility functions\n\n    function initBasicSprite(data, anchor) {\n        return initDynamicSprite(loadCacheSlice(...data), anchor);\n    }\n\n    function initDynamicSprite(source, anchor) {\n        let w = source.width,\n            h = source.height;\n\n        return {\n            img: source,\n            // Hack! Using a flat `.map(initBasicSprite)` is actually going to pass the\n            // element INDEX as second argument, resulting in \"anchor=1\". The right solution\n            // here is \"typeof anchor === 'object' ?\", but to save bytes I avoid using\n            // the typeof and instanceof keywords anywhere in the codebase. Hence,\n            // \"anchor && anchor.x\".\n            anchor: (anchor && anchor.x) ? anchor : { x: (w / 2) | 0, y: (h / 2) | 0 }\n        };\n    }\n\n    function loadCacheSlice(x, y, w, h) {\n        const source = Sprite.sheet;\n        const sliceCanvas = createCanvas(w, h);\n        sliceCanvas.ctx.drawImage(source, x, y, w, h, 0, 0, w, h);\n        return sliceCanvas.canvas;\n    }\n\n    // A list of in-game actions that can be performed by the player\n    const Action = {\n        UP:     11,\n        DOWN:   12,\n        LEFT:   13,\n        RIGHT:  14,\n        JUMP:   15,\n        STOP:   16,\n        PAUSE:  17,\n        RESUME: 18\n    };\n\n    // A list of key code mappings and what action they perform. Here we hard-code it, but\n    // you could easily also have the key mappings controlled by settings and let the user\n    // configure it.\n    const KeyMapping = {\n        KeyW:       Action.UP,\n        KeyS:       Action.DOWN,\n        KeyA:       Action.LEFT,\n        KeyD:       Action.RIGHT,\n        ArrowUp:    Action.UP,\n        ArrowDown:  Action.DOWN,\n        ArrowLeft:  Action.LEFT,\n        ArrowRight: Action.RIGHT,\n        Space:      Action.JUMP,\n        Escape:     Action.PAUSE,\n        Enter:      Action.RESUME\n    };\n\n    const Input = {\n        Action,\n        KeyMapping,\n\n        init() {\n            // Input buffer - new keypress events go into this buffer to be handled\n            // during the game's update loop. It's up to the `update()` methods to consume\n            // key presses and remove them from the buffer.\n            this.buffer = [];\n\n            // Input history - history contains recent key press events in order,\n            // removed automatically after a few seconds. This is useful for detecting\n            // inputs like cheat codes, for example.\n            this.history = [];\n\n            window.addEventListener('keydown', event => {\n                let entry = {\n                    at: new Date().getTime(),\n                    key: event.key,\n                    code: event.code,\n                    action: Input.KeyMapping[event.code] || Input.Action.STOP\n                };\n                Input.buffer.push(entry);\n                Input.history.push(entry);\n                console.log(entry);\n            });\n        },\n\n        update() {\n            let now = new Date().getTime();\n            this.history = this.history.filter(entry => entry.at > now - 3000);\n        },\n\n        lastKeyPressed() {\n            return this.buffer.length > 0 ? this.buffer[this.buffer.length - 1].key : '';\n        },\n\n        lastCodePressed() {\n            return this.buffer.length > 0 ? this.buffer[this.buffer.length - 1].code : '';\n        },\n\n        lastActionPressed() {\n            return this.buffer.length > 0 ? this.buffer[this.buffer.length - 1].action : undefined;\n        },\n\n        consume() {\n            this.buffer = [];\n        },\n    };\n\n    /**\n     * `Text` is a singleton responsible for drawing text characters on the viewport. This\n     * game uses a custom pixel font, so we need to implement some basic text handling\n     * (splitting long lines, measuring character width, etc.) ourselves.\n     */\n\n    // In our character sheet, chars 0x00-0x7F are standard ASCII, below that we put whatever\n    // characters are convenient for us. Here we can choose to map unicode characters to positions\n    // 0x80+ in the charsheet, making it easy for us to render things like special characters,\n    // box drawing characters, etc.\n    //\n    // Note: I like pasting actual characters instead of codes (\"├\" instead of \"\\u251C\"). If you\n    // do this, don't forget to explicitly tell the browser what charset your JS file is, or it\n    // won't execute -- see `index.html` for an example.\n    const SUPPORTED_UNICODE_CHARS = [\n        '─│┌┐└┘├┤┬┴┼╳╳╳╳╳',\n        '═║╔╗╚╝╠╣╦╩╬╳╳╳╳╳',\n        '↑↓←→╳╳╳╳╳╳╳╳╳╳╳╳'\n    ].join('');\n\n    const UNICODE_CHAR_MAP = SUPPORTED_UNICODE_CHARS.split('').reduce((map, char, idx) => {\n        map[char] = 0x80 + idx;\n        return map;\n    }, {});\n\n    /**\n     * Text\n     *\n     * Utilities for drawing text using in-game pixel font.\n     */\n    const Text = {\n        init() {\n            Text.white = Sprite.font.img;\n\n            Text.black = recolor(Text.white, rgba(0, 0, 0, 1));\n            Text.black_shadow = recolor(Text.white, rgba(90, 20, 90, 0.15));\n            Text.blue = recolor(Text.white, rgba(200, 40, 220, 1));\n            Text.blue_shadow = recolor(Text.white, rgba(240, 50, 200, 0.2));\n            Text.shadow = recolor(Text.white, rgba(240, 240, 255, 0.25));\n            Text.red = recolor(Text.white, rgba(240, 50, 50, 1));\n\n            Text.terminal = recolor(Text.white, rgba(51, 255, 0, 1));\n            Text.terminal_shadow = recolor(Text.white, rgba(255, 255, 255, 0.3));\n\n            Text.terminal = recolor(Text.white, rgba(51, 255, 0, 0.9));\n            Text.terminal_shadow = undefined;\n\n            Text['#ead4aa'] = recolor(Text.white, '#ead4aa');\n            Text['#fee761'] = recolor(Text.white, '#fee761');\n            Text['#ff0044'] = recolor(Text.white, '#ff0044');\n        },\n\n        drawText(ctx, text, u, v, scale = 1, font = Text.white, shadow) {\n            if (Array.isArray(text)) {\n                for (let block of text) {\n                    Text.drawText(ctx, block.text, u + block.u * scale, v + block.v * scale, scale, font, shadow);\n                }\n                return;\n            }\n\n            for (let idx = 0; idx < text.length; idx++) {\n                let c = UNICODE_CHAR_MAP[text[idx]] || text.charCodeAt(idx);\n                let k = (c - 0) * (CHAR_WIDTH);\n                if (shadow) {\n                    ctx.drawImage(\n                        shadow,\n                        k % CHARSHEET_WIDTH,\n                        Math.floor(k / CHARSHEET_WIDTH) * CHAR_HEIGHT,\n                        CHAR_WIDTH,\n                        CHAR_HEIGHT,\n                        u + 1,\n                        v,\n                        CHAR_WIDTH * scale,\n                        CHAR_HEIGHT * scale\n                    );\n                }\n                ctx.drawImage(\n                    font,\n                    k % CHARSHEET_WIDTH,\n                    Math.floor(k / CHARSHEET_WIDTH) * CHAR_HEIGHT,\n                    CHAR_WIDTH,\n                    CHAR_HEIGHT,\n                    u,\n                    v,\n                    CHAR_WIDTH * scale,\n                    CHAR_HEIGHT * scale\n                );\n                u += CHAR_WIDTH * scale;\n            }\n        },\n\n        /*\n        drawRightText(ctx, text, u, v, scale = 1, font = Text.white, shadow) {\n            u -= Text.measureWidth(text, scale);\n            Text.drawText(ctx, text, u, v, scale, font, shadow);\n        },\n        */\n\n        measureWidth(text, scale = 1) {\n            return text.split('').reduce((sum, c) => sum + CHAR_WIDTH, 0) * scale;\n        },\n\n        splitParagraph(text, w, h) {\n            let cu = 0, cv = 0;\n            let next = () => ({ text: '', u: cu, v: cv });\n            let wip = next();\n            let list = [];\n\n            for (let c of text.split('')) {\n                let cWidth = Text.measureWidth(c, 1);\n                if (c === '\\n' || cu + cWidth > w) {\n                    let saved = '';\n                    if (c !== '\\n' && c !== ' ') {\n                        let space = wip.text.split(' ');\n                        if (space.length > 1) {\n                            saved = space.pop();\n                            wip.text = space.join(' ');\n                        }\n                    }\n                    if (wip.text.length > 0) list.push(wip);\n                    cu = 0;\n                    cv += (CHAR_HEIGHT);\n                    wip = next();\n                    if (saved.length > 0) {\n                        wip.text = saved;\n                        cu += Text.measureWidth(wip.text, 1);\n                    }\n                } else {\n                    cu += cWidth;\n                }\n                if (c !== '\\n') {\n                    wip.text = wip.text + c;\n                }\n            }\n\n            if (wip.text.length > 0) list.push(wip);\n\n            return list.map(line => ({\n                ...line,\n                w: Text.measureWidth(line.text, 1),\n                h: CHAR_HEIGHT\n            }));\n        },\n\n        drawTextColRow(text, col, row) {\n            Text.drawText(Viewport.ctx, Text.splitParagraph(text, Viewport.width), col * CHAR_WIDTH, row * CHAR_HEIGHT, 1, Text.terminal, Text.terminal_shadow);\n        }\n    };\n\n    // Text utility functions\n\n    function recolor(font, color) {\n        let canvas = createCanvas(font.width, font.height);\n        canvas.ctx.fillStyle = color;\n        canvas.ctx.fillRect(0, 0, font.width, font.height);\n        canvas.ctx.globalCompositeOperation = 'destination-in';\n        canvas.ctx.drawImage(font, 0, 0);\n        return canvas.canvas;\n    }\n\n    // zzfx() - the universal entry point -- returns a AudioBufferSourceNode\n    const zzfx=(...t)=>zzfxP(zzfxG(...t));\n\n    // zzfxP() - the sound player -- returns a AudioBufferSourceNode\n    const zzfxP=(...t)=>{let e=zzfxX.createBufferSource(),f=zzfxX.createBuffer(t.length,t[0].length,zzfxR);t.map((d,i)=>f.getChannelData(i).set(d)),e.buffer=f,e.connect(zzfx.destination_),e.start();return e};\n\n    // zzfxG() - the sound generator -- returns an array of sample data\n    const zzfxG=(q=1,k=.05,c=220,e=0,t=0,u=.1,r=0,F=1,v=0,z=0,w=0,A=0,l=0,B=0,x=0,G=0,d=0,y=1,m=0,C=0)=>{let b=2*Math.PI,H=v*=500*b/zzfxR**2,I=(0<x?1:-1)*b/4,D=c*=(1+2*k*Math.random()-k)*b/zzfxR,Z=[],g=0,E=0,a=0,n=1,J=0,K=0,f=0,p,h;e=99+zzfxR*e;m*=zzfxR;t*=zzfxR;u*=zzfxR;d*=zzfxR;z*=500*b/zzfxR**3;x*=b/zzfxR;w*=b/zzfxR;A*=zzfxR;l=zzfxR*l|0;for(h=e+m+t+u+d|0;a<h;Z[a++]=f)++K%(100*G|0)||(f=r?1<r?2<r?3<r?Math.sin((g%b)**3):Math.max(Math.min(Math.tan(g),1),-1):1-(2*g/b%2+2)%2:1-4*Math.abs(Math.round(g/b)-g/b):Math.sin(g),f=(l?1-C+C*Math.sin(2*Math.PI*a/l):1)*(0<f?1:-1)*Math.abs(f)**F*q*zzfxV*(a<e?a/e:a<e+m?1-(a-e)/m*(1-y):a<e+m+t?y:a<h-d?(h-a-d)/u*y:0),f=d?f/2+(d>a?0:(a<h-d?1:(h-a)/d)*Z[a-d|0]/2):f),p=(c+=v+=z)*Math.sin(E*x-I),g+=p-p*B*(1-1E9*(Math.sin(a)+1)%2),E+=p-p*B*(1-1E9*(Math.sin(a)**2+1)%2),n&&++n>A&&(c+=w,D+=w,n=0),!l||++J%l||(c=D,v=H,n=n||1);return Z};\n\n    // zzfxV - global volume\n    const zzfxV=.3;\n\n    // zzfxR - global sample rate\n    const zzfxR=44100;\n\n    // zzfxX - the common audio context\n    const zzfxX=new(top.AudioContext||webkitAudioContext);\n\n    // destination for zzfx and zzfxm sounds\n    zzfx.destination_ = zzfxX.destination;\n\n    /**\n     * ZzFX Music Renderer v2.0.2 by Keith Clark\n     */\n\n    /**\n     * @typedef Channel\n     * @type {Array.<Number>}\n     * @property {Number} 0 - Channel instrument\n     * @property {Number} 1 - Channel panning (-1 to +1)\n     * @property {Number} 2 - Note\n     */\n\n    /**\n     * @typedef Pattern\n     * @type {Array.<Channel>}\n     */\n\n    /**\n     * @typedef Instrument\n     * @type {Array.<Number>} ZzFX sound parameters\n     */\n\n    /**\n     * Generate a song\n     *\n     * @param {Array.<Instrument>} instruments - Array of ZzFX sound paramaters.\n     * @param {Array.<Pattern>} patterns - Array of pattern data.\n     * @param {Array.<Number>} sequence - Array of pattern indexes.\n     * @param {Number} [speed=125] - Playback speed of the song (in BPM).\n     * @returns {Array.<Array.<Number>>} Left and right channel sample data.\n     */\n\n    const zzfxM = (instruments, patterns, sequence, BPM = 125) => {\n        let instrumentParameters,\n            i,\n            j,\n            k,\n            note,\n            sample,\n            patternChannel,\n            notFirstBeat,\n            stop,\n            instrument,\n            pitch,\n            attenuation,\n            outSampleOffset,\n            sampleOffset,\n            nextSampleOffset,\n            sampleBuffer = [],\n            leftChannelBuffer = [],\n            rightChannelBuffer = [],\n            channelIndex = 0,\n            panning,\n            hasMore = 1,\n            sampleCache = {},\n            beatLength = ((zzfxR / BPM) * 60) >> 2;\n\n        // for each channel in order until there are no more\n        for (; hasMore; channelIndex++) {\n            // reset current values\n            sampleBuffer = [(hasMore = notFirstBeat = pitch = outSampleOffset = 0)];\n\n            // for each pattern in sequence\n            sequence.map((patternIndex, sequenceIndex) => {\n                // get pattern for current channel, use empty 1 note pattern if none found\n                patternChannel = patterns[patternIndex][channelIndex] || [0, 0, 0];\n\n                // check if there are more channels\n                hasMore |= !!patterns[patternIndex][channelIndex];\n\n                // get next offset, use the length of first channel\n                nextSampleOffset =\n                    outSampleOffset +\n                    (patterns[patternIndex][0].length - 2 - !notFirstBeat) *\n                        beatLength;\n\n                // for each beat in pattern, plus one extra if end of sequence\n                for (\n                    i = 2, k = outSampleOffset;\n                    i <\n                    patternChannel.length + (sequenceIndex == sequence.length - 1);\n                    notFirstBeat = ++i\n                ) {\n                    // <channel-note>\n                    note = patternChannel[i];\n\n                    // stop if different instrument or new note\n                    stop = (instrument != (patternChannel[0] || 0)) | note | 0;\n\n                    // fill buffer with samples for previous beat, most cpu intensive part\n                    for (\n                        j = 0;\n                        j < beatLength && notFirstBeat;\n                        // fade off attenuation at end of beat if stopping note, prevents clicking\n                        j++ > beatLength - 99 && stop\n                            ? (attenuation += (attenuation < 1) / 99)\n                            : 0\n                    ) {\n                        // copy sample to stereo buffers with panning\n                        sample =\n                            ((1 - attenuation) * sampleBuffer[sampleOffset++]) /\n                                2 || 0;\n                        leftChannelBuffer[k] =\n                            (leftChannelBuffer[k] || 0) + sample * panning - sample;\n                        rightChannelBuffer[k] =\n                            (rightChannelBuffer[k++] || 0) +\n                            sample * panning +\n                            sample;\n                    }\n\n                    // set up for next note\n                    if (note) {\n                        // set attenuation\n                        attenuation = note % 1;\n                        panning = patternChannel[1] || 0;\n                        if ((note |= 0)) {\n                            // get cached sample\n                            sampleBuffer = sampleCache[\n                                [\n                                    (instrument =\n                                        patternChannel[(sampleOffset = 0)] || 0),\n                                    note\n                                ]\n                            ] =\n                                sampleCache[[instrument, note]] ||\n                                // add sample to cache\n                                ((instrumentParameters = [\n                                    ...instruments[instrument]\n                                ]),\n                                (instrumentParameters[2] *=\n                                    2 ** ((note - 12) / 12)),\n                                zzfxG(...instrumentParameters));\n                        }\n                    }\n                }\n\n                // update the sample offset\n                outSampleOffset = nextSampleOffset;\n            });\n        }\n\n        return [leftChannelBuffer, rightChannelBuffer];\n    };\n\n    const ObliqueMystique = [[[1.3,0,23,,,.2,3,5],[1.5,0,4e3,,,.03,2,1.25,,,,,.02,6.8,-.3,,.5],[.7,0,2100,,,.2,3,3,,,-400,,,2],[,0,655,,,.11,2,1.65,,,,,,3.8,-.1,.1]],[[[,-.5,13,,,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,14,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,14,,,,],[1,.3,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,],[2,1,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,],[,.6,,,,,13,,18,,19,,,,,,,,19,,18,,,,16,,,,13,,,,,,,,,,13,,18,,19,,,,,,,,18,19,18,,,,13,14,13,,16,,18,,19,,],[3,-1,,,13,,,,,,,,,,,,13,,,,,,,,,,,,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,,,13,13,13,13]],[[,-.5,13,,,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,14,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,14,,,,],[1,.3,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,],[2,1,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,]]],[1,1,0,0,0,0,1,0],,];\n\n    const Audio = {\n        init() {\n            Audio.readyToPlay = false;\n\n            Audio.ctx = zzfxX;\n            Audio.gain_ = Audio.ctx.createGain();\n            Audio.gain_.connect(Audio.ctx.destination);\n            zzfx.destination_ = Audio.gain_;\n\n            Audio.shotgun = [,0.01,140,0.01,0.02,0.45,4,2.42,0.1,-0.1,,,,1.2,,0.3,0.04,0.8,0.02];\n            Audio.page = [,,1233,,.01,.2,1,1.43,,,539,.1,,,,,,.51,.03,.01];\n            Audio.shellReload = [,,68,0.01,,0.14,1,1.53,7.5,0.1,50,0.02,-0.01,-0.2,0.1,0.2,,0.47,0.01];\n            Audio.damage = [,,391,,.19,.01,2,.54,-4,20,,,,,,,.02,.9];\n            Audio.alarm = [,,970,.12,.25,.35,,.39,8.1,,10,.1,.2,,.1,,,.6,.09,.13];\n            // [,,961,.05,.06,1.17,1,4.67,.8,,,,,.8,-0.8,.1,.49,.62,.09];\n            Audio.victory = [,,454,.06,.86,.71,2,.63,-0.7,1.7,-83,.09,.27,.3,.2,,.18,.95,.02,.02];\n            Audio.song = zzfxM(...ObliqueMystique);\n\n            // Save our background music in os13k, for fun!\n            //localStorage[`OS13kMusic,${TITLE} - Oblique Mystique`] = JSON.stringify(ObliqueMystique);\n        },\n\n        update() {\n            if (!Audio.readyToPlay) return;\n\n            if (!Audio.musicPlaying) {\n                //Audio.bgmusicnode = zzfxP(...Audio.song);\n                //Audio.bgmusicnode.loop = true;\n                Audio.musicPlaying = true;\n            }\n        },\n\n        play(sound) {\n            if (!Audio.readyToPlay) return;\n            zzfx(...sound);\n        },\n\n        // It's important we do pausing and unpausing as specific events and not in general update(),\n        // because update() is triggered by the animation frame trigger which does not run if the\n        // page is not visible. (So, if you want the music to fade in the background, for example,\n        // that's not helpful if it won't work because you aren't looking at the page!)\n\n        pause() {\n            Audio.gain_.gain.linearRampToValueAtTime(0, Audio.ctx.currentTime + 1);\n        },\n\n        unpause() {\n            Audio.gain_.gain.linearRampToValueAtTime(1, Audio.ctx.currentTime + 1);\n        }\n    };\n\n    /**\n     * `Screen` is a singleton that represents the virtual 80x25 character screen our game\n     * lives in. Components like PlayingField will \"draw\" (write text onto) this virtual\n     * screen each frame. Once all the text is written, the text will end up rendered on\n     * the viewport (canvas) in the browser.\n     */\n\n    const Screen = {\n        init() {\n            this.screen = [];\n            for (let y = 0; y < SCREEN_HEIGHT; y++) {\n                this.screen.push([]);\n            }\n            this.clear();\n        },\n\n        clear() {\n            for (let y = 0; y < SCREEN_HEIGHT; y++) {\n                for (let x = 0; x < SCREEN_WIDTH; x++) {\n                    this.screen[y][x] = ' ';\n                }\n            }\n        },\n\n        write(x, y, text) {\n            if (!Array.isArray(text)) text = [text];\n\n            for (let j = 0; j < text.length; j++) {\n                for (let i = 0; i < text[j].length; i++) {\n                    this.screen[y + j][x + i] = text[j][i];\n                }\n            }\n        },\n\n        drawToViewport() {\n            let text = this.screen.map(row => row.join('')).join('\\n');\n\n            Text.drawText(\n                Viewport.ctx,\n                Text.splitParagraph(text, Viewport.width),\n                0, 0,\n                1,\n                Text.terminal, Text.terminal_shadow\n            );\n        }\n    };\n\n    class MainMenu {\n        constructor() {\n        }\n\n        update() {\n            switch (Input.lastKeyPressed().toUpperCase()) {\n                case 'P':\n                    Input.consume();\n                    Game.startSession();\n                    break;\n                case 'L':\n                    Input.consume();\n                    Game.playSpeed = (Game.playSpeed + 1) % PLAY_SPEEDS.length;\n                    break;\n                case 'I':\n                    Input.consume();\n                    Game.showInstructions();\n                    break;\n                case 'E':\n                    Input.consume();\n                    Game.showInstructions();\n                    break;\n            }\n        }\n\n        draw() {\n            let version = '?';\n            let terminal = '?';\n\n            let highScores = [\n                `1) 6000  Bob`,\n                `2) 6000  Tom`,\n                `3) 4000  Wayne`,\n                ``,\n                ``\n            ];\n\n            Screen.clear();\n            Screen.write(0, 0, [\n                `               LL                     dd       dd`,\n                `               LL                     dd       dd                      tm`,\n                `               LL         aaaa     ddddd    ddddd    eeee   rrrrrrr`,\n                `               LL        aa  aa   dd  dd   dd  dd   ee  ee  rr    rr`,\n                `               LL        aa  aa   dd  dd   dd  dd   eeeeee  rr`,\n                `               LL        aa  aa   dd  dd   dd  dd   ee      rr`,\n                `               LLLLLLLL   aaa aa   ddd dd   ddd dd   eeee   rr`,\n                ``,\n                `                                       Version:    ${version}`,\n                `(c) 1982, 1983 Yahoo Software          Terminal:   ${terminal}`,\n                `10970 Ashton Ave.  Suite 312           Play speed: ${Game.playSpeed + 1} / ${PLAY_SPEEDS.length}`,\n                `Los Angeles, Ca  90024                 Move = ↑↓←→/WASD, Jump = Space,`,\n                `                                       Stop = Other`,\n                ``,\n                `P = Play game                          High Scores`,\n                `L = Change level of difficulty         ${highScores[0]}`,\n                `C = Configure Ladder                   ${highScores[1]}`,\n                `I = Instructions                       ${highScores[2]}`,\n                `E = Exit Ladder                        ${highScores[3]}`,\n                `                                       ${highScores[4]}`,\n                ``,\n                `Enter one of the above:`\n            ]);\n        }\n    }\n\n    class InstructionsMenu {\n        constructor() {\n        }\n\n        update() {\n            if (Input.lastKeyPressed().toUpperCase() !== '') {\n                Input.consume();\n                Game.showMainMenu();\n            }\n        }\n\n        draw() {\n            Screen.clear();\n            Screen.write(0, 0, [\n                `You are a Lad trapped in a maze.  Your mission is is to explore the`,\n                `dark corridors never before seen by human eyes and find hidden`,\n                `treasures and riches.`,\n                ``,\n                `You control Lad by typing the direction buttons and jumping by`,\n                `typing SPACE.  But beware of the falling rocks called Der rocks.`,\n                `You must find and grasp the treasures (shown as $) BEFORE the`,\n                `bonus time runs out.`,\n                ``,\n                `A new Lad will be awarded for every 10,000 points.`,\n                `Extra points are awarded for touching the gold`,\n                `statues (shown as &).  You will receive the bonus time points`,\n                `that are left when you have finished the level.`,\n                ``,\n                `Type an ESCape to pause the Game`,\n                ``,\n                `Remember, there is more than one way to skin a cat. (Chum)`,\n                ``,\n                `Good luck Lad.`,\n                ``,\n                ``,\n                ``,\n                `Type RETURN to return to main menu:`\n            ]);\n        }\n    }\n\n    // This is our list of STATES. Each entity starts out in one of these states and can move between\n    // them based on events that happen in the Game (Note that some of these are directions, but\n    // since an entity keeps moving in the direction it is going unless stopped, directions are\n    // states in this Game)\n    const State = {\n        STOPPED:    1,         // Standing still\n        UP:         2,         // Moving up (player only)\n        LEFT:       3,         // Moving left\n        DOWN:       4,         // Moving down\n        RIGHT:      5,         // Moving right\n        FALLING:    6,         // Falling\n        START_JUMP: 7,         // About to start a jump (player only)\n        JUMP_LEFT:  8,         // Jumping left (player only)\n        JUMP_RIGHT: 9,         // Jumping right (player only)\n        JUMP_UP:    10,        // Jumping straight up (player only)\n        DYING:      11,        // Dying (used as a death animation)\n        DEAD:       12         // Dead (for player, restart level; for rock, disappear)\n    };\n\n    const JUMP_FRAMES = {\n        [State.JUMP_RIGHT]: [\n            { x: 1, y: -1 },\n            { x: 1, y: -1 },\n            { x: 1, y: 0 },\n            { x: 1, y: 0 },\n            { x: 1, y: 1 },\n            { x: 1, y: 1 }\n        ],\n        [State.JUMP_LEFT]: [\n            { x: -1, y: -1 },\n            { x: -1, y: -1 },\n            { x: -1, y: 0 },\n            { x: -1, y: 0 },\n            { x: -1, y: 1 },\n            { x: -1, y: 1 }\n        ],\n        [State.JUMP_UP]: [\n            { x: 0, y: -1 },\n            { x: 0, y: -1 },\n            { x: 0, y: 0 },\n            { x: 0, y: 1 },\n            { x: 0, y: 1 },\n            { x: 0, y: 0 }\n        ],\n    };\n\n    class Entity {\n        applyMovement(field) {\n            let repeat = false;\n\n            // This method contains generic \"movement\" application for all entities, including\n            // Lad (player) and Der Rocks (enemies). Things like falling, moving left/right, etc.,\n            // work the same for both.\n            //\n            // (There's a bunch of jump logic in here too, and moving UP, which really only applies\n            // to players, but that's OK -- Der Rocks just won't attempt those actions.)\n\n            if (this.nextState) {\n                switch (this.state) {\n                    case State.STOPPED:\n                    case State.LEFT:\n                    case State.RIGHT:\n                        if ([State.LEFT, State.RIGHT, State.STOPPED].includes(this.nextState)) {\n                            this.state = this.nextState;\n                            this.nextState = undefined;\n                        }\n                        break;\n\n                    case State.UP:\n                    case State.DOWN:\n                        // Normal\n                        if ([State.LEFT, State.RIGHT].includes(this.nextState)) {\n                            this.state = this.nextState;\n                            this.nextState = undefined;\n                        }\n                        break;\n                }\n            }\n\n            if (this.nextState === State.START_JUMP) {\n                // Special case: the user wants to jump!\n                //\n                // If the player is standing on something solid, we initiate a jump based on the current\n                // movement of the player. If not, we (sort of) ignore the request to jump... although\n                // it does subtly change the behavior upon landing.\n                if (field.onSolid(this.x, this.y)) {\n                    if (this.state === State.STOPPED || this.state === State.FALLING) {\n                        this.state = State.JUMP_UP;\n                        this.jumpStep = 0;\n                        this.nextState = State.STOPPED;\n                    } else if (this.state === State.LEFT || this.state === State.JUMP_LEFT) {\n                        this.state = State.JUMP_LEFT;\n                        this.jumpStep = 0;\n                        this.nextState = State.LEFT;\n                    } else if (this.state === State.RIGHT || this.state === State.JUMP_RIGHT) {\n                        this.state = State.JUMP_RIGHT;\n                        this.jumpStep = 0;\n                        this.nextState = State.RIGHT;\n                    }\n                } else {\n                    if (this.state === State.JUMP_UP || this.state === State.FALLING) {\n                        this.nextState = State.STOPPED;\n                    } else if (this.state === State.JUMP_RIGHT) {\n                        this.nextState = State.RIGHT;\n                    } else if (this.state === State.JUMP_LEFT) {\n                        this.nextState = State.LEFT;\n                    }\n                }\n            } else if (this.nextState === State.UP && field.isLadder(this.x, this.y)) {\n                // Special case: the user wants to go up!\n                //\n                // If the user is on a ladder, we can start ascending. Note that if the user is not\n                // on a ladder we ignore their input, which is intentional -- this allows queued\n                // (pacman) input, where we can tap UP a little before reaching the ladder.\n                this.state = State.UP;\n                this.nextState = undefined;\n            } else if (this.nextState === State.DOWN && (field.isLadder(this.x, this.y) || field.isLadder(this.x, this.y + 1))) {\n                // Special case: the player wants to go down!\n                //\n                // If the player is on (or above) a ladder, we can start descending. Note that if the player is not\n                // on a ladder we ignore their input, which is intentional -- this allows queued\n                // (pacman) input, where we can tap DOWN a little before reaching the ladder.\n                this.state = State.DOWN;\n                this.nextState = undefined;\n            }\n\n            switch (this.state) {\n                case State.LEFT:\n                    if (!field.onSolid(this.x, this.y)) {\n                        this.nextState = State.LEFT;\n                        this.state = State.FALLING;\n                        repeat = true;\n                        break;\n                    }\n                    if (field.emptySpace(this.x - 1, this.y)) {\n                        this.x--;\n                    } else {\n                        this.nextState = State.STOPPED;\n                    }\n                    break;\n\n                case State.RIGHT:\n                    if (!field.onSolid(this.x, this.y)) {\n                        this.nextState = State.RIGHT;\n                        this.state = State.FALLING;\n                        repeat = true;\n                        break;\n                    }\n                    if (field.emptySpace(this.x + 1, this.y)) {\n                        this.x++;\n                    } else {\n                        this.nextState = State.STOPPED;\n                    }\n                    break;\n\n                case State.UP:\n                    if (field.canClimbUp(this.x, this.y - 1)) {\n                        this.y--;\n                    } else {\n                        this.state = State.STOPPED;\n                    }\n                    break;\n\n                case State.DOWN:\n                    if (field.canClimbDown(this.x, this.y + 1)) {\n                        this.y++;\n                    } else {\n                        this.state = State.STOPPED;\n                    }\n                    break;\n\n                case State.JUMP_RIGHT:\n                case State.JUMP_LEFT:\n                case State.JUMP_UP:\n                    let step = JUMP_FRAMES[this.state][this.jumpStep];\n                    console.log(['jump', this.state, this.jumpStep, step]);\n                    if ((this.x + step.x >= 0) && (this.x + step.x < LEVEL_COLS)) {\n                        let terrain = field.layout[this.y + step.y][this.x + step.x];\n                        if (['=', '|', '-'].includes(terrain)) {\n                            if (field.onSolid(this.x, this.y)) {\n                                this.state = this.nextState;\n                                this.nextState = undefined;\n                            } else {\n                                switch (this.state) {\n                                    case State.JUMP_RIGHT:\n                                        this.nextState = State.RIGHT;\n                                        break;\n                                    case State.JUMP_LEFT:\n                                        this.nextState = State.LEFT;\n                                        break;\n                                    case State.JUMP_UP:\n                                        this.nextState = State.UP;\n                                        break;\n                                }\n                                this.state = State.FALLING;\n                            }\n                        } else if (terrain === 'H') {\n                            this.x += step.x;\n                            this.y += step.y;\n                            this.state = State.STOPPED;\n                            this.nextState = undefined;\n                        } else {\n                            this.x += step.x;\n                            this.y += step.y;\n                            this.jumpStep++;\n\n                            if (this.jumpStep >= JUMP_FRAMES[this.state].length) {\n                                this.state = this.nextState;\n                                this.nextState = undefined;\n                            }\n                        }\n                    } else {\n                        if (field.onSolid(this.x, this.y)) {\n                            this.state = this.nextState;\n                            this.nextState = undefined;\n                        } else {\n                            this.state = State.FALLING;\n                            this.nextState = State.STOPPED;\n                        }\n                    }\n                    break;\n\n                case State.FALLING:\n                    if (field.onSolid(this.x, this.y)) {\n                        this.state = this.nextState || State.STOPPED;\n                    } else {\n                        this.y++;\n                    }\n                    break;\n            }\n\n            // If we were attempting to move somewhere and realized we should be falling instead,\n            // we want to re-run the entire algorithm once. This avoids what boils down to a \"skipped\n            // frame\" from the user's point of view.\n            if (repeat) return this.applyMovement(field);\n        }\n    }\n\n    const DEATH_FRAMES = ['p', 'p', 'b', 'd', 'd', 'q', 'p', 'p', 'b', 'd', 'd', 'q', '-', '-', '_', '_', '_', '_', '_'];\n\n    /**\n     * Player\n     */\n    class Player extends Entity {\n        constructor(x, y) {\n            super();\n            this.x = x;\n            this.y = y;\n            this.state = State.STOPPED;\n            this.nextState = State.STOPPED;\n            this.jumpStep = 0;\n            this.deathStep = 0;\n            console.log('player constructed', x, y);\n        }\n\n        update(field, moveFrame) {\n            if (this.state === State.DYING) {\n                this.deathStep++;\n                if (this.deathStep >= DEATH_FRAMES.length) this.state = State.DEAD;\n            }\n\n            if (this.state === State.DYING || this.state === State.DEAD) return;\n\n            if (!moveFrame) return;\n\n            let action = Input.lastActionPressed();\n\n            if (action === Input.Action.LEFT) {\n                this.nextState = State.LEFT;\n                Input.consume();\n            } else if (action === Input.Action.RIGHT) {\n                this.nextState = State.RIGHT;\n                Input.consume();\n            } else if (action === Input.Action.UP) {\n                this.nextState = State.UP;\n                Input.consume();\n            } else if (action === Input.Action.DOWN) {\n                this.nextState = State.DOWN;\n                Input.consume();\n            } else if (action === Input.Action.JUMP) {\n                this.nextState = State.START_JUMP;\n                Input.consume();\n            }\n\n            return this.applyMovement(field);\n        }\n\n        draw() {\n            let char = 'g';\n\n            switch (this.state) {\n                case State.RIGHT:\n                case State.JUMP_RIGHT:\n                case State.UP:\n                case State.DOWN:\n                    char = 'p';\n                    break;\n\n                case State.LEFT:\n                case State.JUMP_LEFT:\n                    char = 'q';\n                    break;\n\n                case State.FALLING:\n                    char = 'b';\n                    break;\n\n                case State.DYING:\n                    char = DEATH_FRAMES[this.deathStep];\n                    break;\n\n                case State.DEAD:\n                    char = '_';\n                    break;\n            }\n\n            Screen.write(this.x, this.y, char);\n        }\n    }\n\n    const DEATH_FRAMES$1 = ['{', '}', '(', ')', '%', '%', ':', ':'];\n\n    class Rock extends Entity {\n        constructor(dispenser) {\n            super();\n            this.x = dispenser.x;\n            this.y = dispenser.y;\n            this.state = State.FALLING;\n            this.nextState = undefined;\n            this.deathStep = 0;\n        }\n\n        update(field, moveFrame) {\n            if (this.state === State.DYING) {\n                this.deathStep++;\n                if (this.deathStep >= DEATH_FRAMES$1.length) this.state = State.DEAD;\n            }\n\n            if (this.state === State.DYING || this.state === State.DEAD) return;\n\n            if (!moveFrame) return;\n\n            if (this.state === State.STOPPED) {\n                if (this.x === 0 || !field.emptySpace(this.x - 1, this.y)) {\n                    this.nextState = State.RIGHT;\n                } else if (this.x === LEVEL_COLS - 1 || !field.emptySpace(this.x + 1, this.y)) {\n                    this.nextState = State.LEFT;\n                } else {\n                    this.nextState = Math.random() > 0.5 ? State.LEFT : State.RIGHT;\n                }\n            }\n\n            if (this.x === 0 && this.state === State.LEFT) {\n                this.state = State.RIGHT;\n            }\n\n            if (this.x === LEVEL_COLS - 1 && this.state === State.RIGHT) {\n                this.state = State.LEFT;\n            }\n\n            if (this.state !== State.FALLING && !field.onSolid(this.x, this.y)) {\n                this.nextState = State.FALLING;\n            }\n\n            if (field.isLadder(this.x, this.y + 1) && [State.LEFT, State.RIGHT].includes(this.state)) {\n                let r = Math.floor(Math.random() * 4);\n                this.nextState = [State.LEFT, State.RIGHT, State.DOWN, State.DOWN][r];\n            }\n\n            if (field.isEater(this.x, this.y)) {\n                this.state = State.DYING;\n                return;\n            }\n\n            this.applyMovement(field);\n        }\n\n        draw() {\n            let char = 'o';\n\n            switch (this.state) {\n                case State.DYING:\n                    char = DEATH_FRAMES$1[this.deathStep];\n                    break;\n                case State.DEAD:\n                    return;\n            }\n\n            Screen.write(this.x, this.y, char);\n        }\n    }\n\n    var LevelData = [\n    \t{\n    \t\tname: \"Easy Street\",\n    \t\ttime: 35,\n    \t\tmaxRocks: 5,\n    \t\tlayout: [\n    \t\t\t\"                                       V                 $                     \",\n    \t\t\t\"                                                         H                     \",\n    \t\t\t\"                H                                        H                     \",\n    \t\t\t\"       =========H==================================================            \",\n    \t\t\t\"                H                                                              \",\n    \t\t\t\"                H                                                              \",\n    \t\t\t\"                H          H                             H                     \",\n    \t\t\t\"================H==========H==================   ========H=====================\",\n    \t\t\t\"                &          H                             H          |       |  \",\n    \t\t\t\"                                                         H         Easy Street \",\n    \t\t\t\"                H                                        H                     \",\n    \t\t\t\"       =========H==========H=========  =======================                 \",\n    \t\t\t\"                H                                                              \",\n    \t\t\t\"                H                                                              \",\n    \t\t\t\"                H                                        H                     \",\n    \t\t\t\"======================== ====================== =========H==============       \",\n    \t\t\t\"                                                         H                     \",\n    \t\t\t\"                                                         H                     \",\n    \t\t\t\"*    p                                                   H                    *\",\n    \t\t\t\"===============================================================================\"\n    \t\t]\n    \t},\n    \t{\n    \t\tname: \"Long Island\",\n    \t\ttime: 45,\n    \t\tmaxRocks: 8,\n    \t\tlayout: [\n    \t\t\t\"                                                                          $    \",\n    \t\t\t\"                                                                   &      H    \",\n    \t\t\t\"    H       |V                                                     V|     H    \",\n    \t\t\t\"====H======================= ========================= ======================  \",\n    \t\t\t\"    H                                                                          \",\n    \t\t\t\"    H                                                                          \",\n    \t\t\t\"    H                    & |                         . .                  H    \",\n    \t\t\t\"========================== ======  =================== ===================H==  \",\n    \t\t\t\"                                                                          H    \",\n    \t\t\t\"                                  |                                       H    \",\n    \t\t\t\"    H                             |                 .  .                  H    \",\n    \t\t\t\"====H=====================   ======  ================  ======================  \",\n    \t\t\t\"    H                                                                          \",\n    \t\t\t\"    H                      |                                                   \",\n    \t\t\t\"    H                      |                        .   .                 H    \",\n    \t\t\t\"=========================  ========    ==============   ==================H==  \",\n    \t\t\t\"                                                                          H    \",\n    \t\t\t\"==============                      |                                     H    \",\n    \t\t\t\" Long Island |   p         *        |                 *                   H    \",\n    \t\t\t\"===============================================================================\"\n    \t\t]\n    \t},\n    \t{\n    \t\tname: \"Ghost Town\",\n    \t\ttime: 35,\n    \t\tmaxRocks: 5,\n    \t\tlayout: [\n    \t\t\t\"                            V               V           V               $      \",\n    \t\t\t\"                                                                       $$$     \",\n    \t\t\t\"     p    H                                                    H      $$$$$   H\",\n    \t\t\t\"==========H===                                                =H==============H\",\n    \t\t\t\"          H                                                    H              H\",\n    \t\t\t\"          H                              &                     H              H\",\n    \t\t\t\"     ==============   ====     =    ======    =   ====    =====H=====         H\",\n    \t\t\t\"    G              ^^^    ^^^^^ ^^^^      ^^^^ ^^^    ^^^                     $\",\n    \t\t\t\"    h                                                                 |        \",\n    \t\t\t\"    o     |                     H                             &       |        \",\n    \t\t\t\"    s     ======================H============================== ===========    \",\n    \t\t\t\"    t        &                  H                                              \",\n    \t\t\t\"                                H                                              \",\n    \t\t\t\"              |                 H                 H                   H        \",\n    \t\t\t\"    T         ==================H=================H===================H======= \",\n    \t\t\t\"    o                                             H                   H        \",\n    \t\t\t\"    w                                                                 H        \",\n    \t\t\t\"    n                           ^                                     H        \",\n    \t\t\t\"*                              ^^^                                    H       *\",\n    \t\t\t\"===============================================================================\"\n    \t\t]\n    \t},\n    \t{\n    \t\tname: \"Tunnel Vision\",\n    \t\ttime: 36,\n    \t\trocks: 5,\n    \t\tlayout: [\n    \t\t\t\"                                            V                       V          \",\n    \t\t\t\"                                                                               \",\n    \t\t\t\"     H             H                         |                H                \",\n    \t\t\t\"=====H=====--======H==========================     ===----====H===========     \",\n    \t\t\t\"     H             H                |&&                       H                \",\n    \t\t\t\"     H             H                ==================        H                \",\n    \t\t\t\"     H             H                       tunnel  H          H                \",\n    \t\t\t\"     H           =======---===----=================H=         H           H    \",\n    \t\t\t\"     H         |                           vision  H          H           H    \",\n    \t\t\t\"     H         =========---&      -----============H          H           H    \",\n    \t\t\t\"     H           H                                 H |        H           H    \",\n    \t\t\t\"     H           H=========----===----================        H  ==============\",\n    \t\t\t\"                 H                                        &   H                \",\n    \t\t\t\"                 H                                        |   H                \",\n    \t\t\t\"====---====      H                                        |   H                \",\n    \t\t\t\"|         |    ================---===---===================   H                \",\n    \t\t\t\"|   ===   |                                                   H        H    p  \",\n    \t\t\t\"|    $    |                                                   H     ===H=======\",\n    \t\t\t\"|*  $$$  *|   *                *       *                     *H       *H       \",\n    \t\t\t\"===============================================================================\"\n    \t\t]\n    \t},\n    \t{\n    \t\tname: \"Point of No Return\",\n    \t\ttime: 35,\n    \t\tmaxRocks: 7,\n    \t\tlayout: [\n    \t\t\t\"         $                                                                     \",\n    \t\t\t\"         H                                                   V                 \",\n    \t\t\t\"         H                                                                     \",\n    \t\t\t\"         HHHHHHHHHHHHH     .HHHHHHHHHHHHHH                          H    p     \",\n    \t\t\t\"         &                   V           H                        ==H==========\",\n    \t\t\t\"                                         H                          H          \",\n    \t\t\t\"   H                                     H        .                 H          \",\n    \t\t\t\"===H==============-----------============H====                      H          \",\n    \t\t\t\"   H                                                      H         H          \",\n    \t\t\t\"   H                                                 =====H==============      \",\n    \t\t\t\"   H                                     H                H                    \",\n    \t\t\t\"   H              &..^^^.....^..^ . ^^   H==---------     H                    \",\n    \t\t\t\"   H         ============================H    &           H             H      \",\n    \t\t\t\"   H         ===      ===      ===       H    ---------=================H======\",\n    \t\t\t\"   H                                     H                              H      \",\n    \t\t\t\"   H                          &          H          &                   H      \",\n    \t\t\t\"   ==========-------------------------=======----------===================     \",\n    \t\t\t\"                                                                               \",\n    \t\t\t\"^^^*         ^^^^^^^^^^^^^^^^^^^^^^^^^*     *^^^^^^^^^^*Point of No Return*^^^^\",\n    \t\t\t\"===============================================================================\"\n    \t\t]\n    \t},\n    \t{\n    \t\tname: \"Bug City\",\n    \t\ttime: 37,\n    \t\tmaxRocks: 6,\n    \t\tlayout: [\n    \t\t\t\"        Bug City             HHHHHHHH                          V               \",\n    \t\t\t\"                           HHH      HHH                                        \",\n    \t\t\t\"   H                                          >mmmmmmmm                        \",\n    \t\t\t\"   H===============                   ====================          H          \",\n    \t\t\t\"   H              |=====       \\\\  /         V                  =====H==========\",\n    \t\t\t\"   H                            \\\\/                                  H          \",\n    \t\t\t\"   H                                        | $                     H          \",\n    \t\t\t\"   H           H                            | H                     H          \",\n    \t\t\t\"   H       ====H=======          p          |&H    H                H          \",\n    \t\t\t\"   H           H             ======================H           ======          \",\n    \t\t\t\"   H           H      &|                           H                    H      \",\n    \t\t\t\"   H           H      &|                    H      H     }{        =====H====  \",\n    \t\t\t\"===H===&       H       =====================H      H                    H      \",\n    \t\t\t\"               H                            H      H                    H      \",\n    \t\t\t\"               H                            H      &                    H      \",\n    \t\t\t\"         ======H===   =======    H    <>    &                           H      \",\n    \t\t\t\"                                 H==========       =====     =     ============\",\n    \t\t\t\"     }i{                         H                                             \",\n    \t\t\t\"*                                H                                            *\",\n    \t\t\t\"===============================================================================\"\n    \t\t]\n    \t},\n    \t{\n    \t\tname: \"GangLand\",\n    \t\ttime: 32,\n    \t\tmaxRocks: 6,\n    \t\tlayout: [\n    \t\t\t\"                    =Gang Land=                             V                  \",\n    \t\t\t\"                   ==      _  ==                                      .        \",\n    \t\t\t\"      p    H        |  [] |_| |                  &                    .  H     \",\n    \t\t\t\"===========H        |     |_| |       H         ===   ===================H     \",\n    \t\t\t\"      V    H        =============     H======                            H     \",\n    \t\t\t\"           H                          H                     &            H     \",\n    \t\t\t\"           H                          H                |    |            H     \",\n    \t\t\t\"    H      H        ^^^&&^^^ & ^  ^^^ H           H    |    =============H     \",\n    \t\t\t\"    H======H   =======================H===========H=====          &      H     \",\n    \t\t\t\"    H                                 H           H    |         &&&     H     \",\n    \t\t\t\"    H                                 H           H    |        &&&&&    H     \",\n    \t\t\t\"    H                                 H           H    |    =============H     \",\n    \t\t\t\"              =====------=================        H    |       $     $         \",\n    \t\t\t\"                                         |        H    |      $$$   $$$        \",\n    \t\t\t\"====------===                            |        H    |     $$$$$ $$$$$       \",\n    \t\t\t\"            |       =                    | =============    ============       \",\n    \t\t\t\"            |       $                     ^          &                         \",\n    \t\t\t\"            |^^^^^^^^^^^^^^      $ ^              ======                       \",\n    \t\t\t\"*                   .      &   ^ H*^                    ^  ^       ^^^^^^^^^^^^\",\n    \t\t\t\"===============================================================================\"\n    \t\t]\n    \t}\n    ];\n\n    const Level = {\n        LEVELS: LevelData,\n        LEVEL_COUNT: LevelData.length,\n\n        load(levelNumber) {\n            console.log(Level.LEVELS);\n            // As the player keeps playing, level numbers will loop around to beginning\n            let level = Level.LEVELS[levelNumber % Level.LEVELS.length];\n            if (!level) throw new Error(`No such level number: ${levelNumber}`);\n\n            // Perform some sanity checks on the level layout and extract useful info\n            // like player start position and dispenser positions etc.\n\n            let layout = level.layout.map(row => row.split(''));\n            let dispensers = [];\n            let player;\n\n            // Sanity check\n            layout = layout.slice(0, LEVEL_ROWS);\n\n            for (let y = 0; y < LEVEL_ROWS; y++) {\n                // Sanity checks\n                if (!layout[y]) layout[y] = [];\n                layout[y] = layout[y].slice(0, LEVEL_COLS);\n\n                for (let x = 0; x < LEVEL_COLS; x++) {\n                    // Sanity check\n                    if (!layout[y][x]) layout[y][x] = ' ';\n\n                    // Der Dispensers (V) and Der Eaters (*) have behaviors, so it is convenient for us\n                    // to construct a list of them, but they are permanent parts of the layout, so we can\n                    // leave them as part of the level and draw them normally.\n\n                    if (layout[y][x] === 'V') {\n                        dispensers.push({ x, y });\n                    }\n\n                    // Treasure ($), Statues (&), and the Lad (p) are transient - the player moves around and\n                    // can pick up the treasures and statues. That's why for these elements, we add them to\n                    // our lists AND we remove them from the \"playing field\", we'll draw them separately on\n                    // top of the layout.\n\n                    if (layout[y][x] === 'p') {\n                        layout[y][x] = ' ';\n                        player = { x, y };\n                    }\n\n                    // Everything else, like floors (=), walls (|), ladders (H) and fire (^), is part of the\n                    // layout. The Lad interacts with them, but we can handle that during our movement checks.\n                }\n            }\n\n            return {\n                name: level.name,\n                time: level.time,\n                maxRocks: level.maRrocks,\n                layout,\n                dispensers,\n                player\n            };\n        }\n    };\n\n    /**\n     * `PlayingField` is a class that represents a level that is actively being played on-screen.\n     * A new one is created by the game session any time we start a new level.\n     *\n     * Level-specific stuff (like bonus time, dispensers, rocks, player position, etc.) is all\n     * managed by the playing field.\n     */\n\n    class PlayingField {\n        constructor(levelNumber) {\n            let level = Level.load(levelNumber);\n\n            // Store level-related info\n            this.layout = level.layout;\n            this.dispensers = level.dispensers;\n            this.time = 2000;\n\n            // Initialize player\n            this.player = new Player(level.player.x, level.player.y);\n\n            // Initialize list of rocks (empty)\n            this.rocks = [];\n\n            // Not winning yet (while \"winning\" the player stops moving and we add up the bonus score)\n            this.winning = false;\n        }\n\n        update(moveFrame) {\n            // If we're already winning, keep counting down the bonus time, but\n            // no more movement will happen on this level.\n            if (this.winning) {\n                Game.session.updateScore(SCORE_TREASURE);\n                this.time -= 10;\n                if (this.time < 0) Game.session.startNextLevel();\n                return;\n            }\n\n            // Count down bonus time\n            if (this.time > 0 && moveFrame) this.time--;\n\n            let oldX = this.player.x, oldY = this.player.y;\n\n            // Move player based on user input\n            this.player.update(this, moveFrame);\n\n            // Any time you move OFF of a disappearing floor, it goes away.\n            if (oldX !== this.player.x && oldY === this.player.y) {\n                if (this.isDisappearingFloor(oldX, oldY + 1)) {\n                    this.layout[oldY + 1][oldX] = ' ';\n                }\n            }\n\n            // Check if player should be dead (before moving rocks)\n            if (moveFrame) this.checkIfPlayerShouldDie(Game.session);\n\n            // Move rocks\n            for (let rock of this.rocks) rock.update(this, moveFrame);\n\n            // Check if player should be dead (after moving rocks)\n            if (moveFrame) this.checkIfPlayerShouldDie(Game.session);\n\n            if (moveFrame) {\n                // Collect statues\n                if (this.isStatue(this.player.x, this.player.y)) {\n                    this.layout[this.player.y][this.player.x] = ' ';\n                    Game.session.updateScore(SCORE_STATUE);\n                }\n\n                // Collect treasure (ends the current level)\n                if (this.isTreasure(this.player.x, this.player.y)) {\n                    this.winning = true;\n                    return;\n                }\n\n                // Interact with trampolines\n                if (this.isTrampoline(this.player.x, this.player.y)) {\n                    switch (Math.floor(Math.random() * 5)) {\n                        case 0:\n                            this.player.state = State.LEFT;\n                            this.player.nextState = undefined;\n                            break;\n                        case 1:\n                            this.player.state = State.RIGHT;\n                            this.player.nextState = undefined;\n                            break;\n                        case 2:\n                            this.player.state = State.JUMP_UP;\n                            this.player.nextState = undefined;\n                            this.player.jumpStep = 0;\n                            break;\n                        case 3:\n                            this.player.state = State.JUMP_LEFT;\n                            this.player.nextState = State.LEFT;\n                            this.player.jumpStep = 0;\n                            break;\n                        case 4:\n                            this.player.state = State.JUMP_RIGHT;\n                            this.player.nextState = State.RIGHT;\n                            this.player.jumpStep = 0;\n                            break;\n                    }\n                }\n\n                // Kill dead rocks\n                this.rocks = this.rocks.filter(rock => rock.state !== State.DEAD);\n\n                // Dispense new rocks\n                if (this.rocks.length < this.maxRocks() && Math.random() > 0.91) {\n                    let dispenser = this.dispensers[Math.floor(Math.random() * this.dispensers.length)];\n                    this.rocks.push(new Rock(dispenser));\n                }\n\n                // Kill player\n                if (this.player.state === State.DEAD) {\n                    Game.session.restartLevel();\n                }\n            }\n        }\n\n        draw() {\n            // Draw layout\n            Screen.write(0, 0, this.layout.map(row => row.join('')));\n\n            // Draw player\n            this.player.draw();\n\n            // Draw rocks\n            this.rocks.forEach(rock => rock.draw());\n        }\n\n        //\n        // Utility functions - this is an attempt to consolidate logic in one spot and make other\n        // functions (like the update logic in Player) more readable.\n        //\n\n        onSolid(x, y) {\n            return ['=', '-', 'H', '|'].includes(this.layout[y + 1][x]) || this.layout[y][x] === 'H';\n        }\n\n        emptySpace(x, y) {\n            if (x < 0 || x >= LEVEL_COLS) {\n                return false;\n            } else {\n                return !['|', '='].includes(this.layout[y][x]);\n            }\n        }\n\n        isLadder(x, y) {\n            return this.layout[y][x] === 'H';\n        }\n\n        isStatue(x, y) {\n            return this.layout[y][x] === '&';\n        }\n\n        isTreasure(x, y) {\n            return this.layout[y][x] === '$';\n        }\n\n        isTrampoline(x, y) {\n            return this.layout[y][x] === '.';\n        }\n\n        isEater(x, y) {\n            return this.layout[y][x] === '*';\n        }\n\n        isFire(x, y) {\n            return this.layout[y][x] === '^';\n        }\n\n        isDisappearingFloor(x, y) {\n            return this.layout[y][x] === '-';\n        }\n\n        canClimbUp(x, y) {\n            if (y < 0) return false;\n            return ['H', '&', '$'].includes(this.layout[y][x]);\n        }\n\n        canClimbDown(x, y) {\n            return ['H', '&', '$', ' ', '^', '.'].includes(this.layout[y][x]);\n        }\n\n        checkIfPlayerShouldDie() {\n            // If we're ALREADY dying or dead, let nature run its course\n            if (this.player.state === State.DYING || this.player.state === State.DEAD) return;\n\n            // Landing on fire kills you\n            if (this.isFire(this.player.x, this.player.y)) {\n                this.player.state = State.DYING;\n            }\n\n            // Running out of time kills you\n            if (this.time <= 0) {\n                this.player.state = State.DYING;\n            }\n\n            // Running into a rock kills you, and makes the rock that killed you disappear.\n            // That's not necessary, I just think it looks better. While we play the death\n            // animation we'll continue to move rocks, so another rock might also \"hit\" you,\n            // but it will just pass through your dying character.\n            //\n            // If we're above a rock with 1 or 2 spaces between, we get some points instead.\n            //\n            // A function named `checkIfPlayerShouldDie` is probably not the best place to do\n            // this, but it's convenient because we want to do this twice (just like the death\n            // check).\n            //\n            //                    p                          p\n            // (1)   p     -->            (2)   p     -->\n            //        o          o                o          o\n            //      =====       =====          =====       =====\n            //\n            // In situation (1), there will never be a frame on-screen where the player is directly\n            // above the rock, but we'll still count it because we'll check once after the player moves.\n            // In situation (2), the first check won't count, but the second check after the rocks move\n            // will give the score (and the frame drawn on screen will show the player above the rock).\n            //\n            for (let i = 0; i < this.rocks.length; i++) {\n                if (this.player.x === this.rocks[i].x) {\n                    if (this.player.y === this.rocks[i].y) {\n                        this.player.state = State.DYING;\n                        this.rocks.splice(i, 1);\n                        break;\n                    } else if (this.player.y === this.rocks[i].y - 1 && this.emptySpace(this.player.x, this.player.y + 1)) {\n                        Game.session.updateScore(SCORE_ROCK);\n                    } else if (this.player.y === this.rocks[i].y - 2 && this.emptySpace(this.player.x, this.player.y + 1) && this.emptySpace(this.player.x, this.player.y + 2)) {\n                        Game.session.updateScore(SCORE_ROCK);\n                    }\n                }\n            }\n        }\n\n        maxRocks() {\n            // The total number of rocks we can have on screen is based on a global max rocks value,\n            // then increased slightly by the number of dispensers on the level, then increased again\n            // by a hidden difficulty factor (level cycles).\n            return MAX_ROCKS + this.dispensers.length * DISPENSER_MAX_ROCKS + Game.session.hiddenFactor() * HIDDEN_FACTOR_MAX_ROCKS;\n        }\n    }\n\n    /**\n     * `GameSession` is a class that represents... well, a game session! It is created when the\n     * player presses `P` at the main menu, and ends when the player runs out of lives.\n     *\n     * The game session tracks values that persist across levels (like number of lives, score,\n     * the level number, etc.). Most of the actual in-game logic it hands off to `PlayingField`.\n     */\n\n    class GameSession {\n        constructor() {\n            this.score = 0;\n            this.levelNumber = 0;\n            this.levelCycle = 1;\n            this.lives = 5;\n            this.nextLife = 100;\n        }\n\n        update() {\n            // The `Game` controls the overall game loop, which runs at a fixed 60 frames per second.\n            //\n            // However, Ladder has the concept of \"play speed\" which the player can change at the main\n            // menu, and it controls how fast the game runs. To accomplish that, we can do a second\n            // frame gate here. This gate sets a flag called `moveFrame` IF things can move in this frame.\n            //\n            // We do it this way so that animations (like the play death animation, or the end-of-level\n            // score animation) can run at the same speed no matter what the play speed is.\n            let now = new Date().getTime();\n            let lastFrame = this.lastFrame || 0;\n            let moveFrame = false;\n\n            if (now - lastFrame >= (this.nextFrame || 0)) {\n                moveFrame = true;\n                this.nextFrame = now + this.moveFrameMillisecondDelay();\n            }\n\n            // If we haven't instantiated the playing field yet, create it now.\n            if (!this.field) this.field = new PlayingField(this.levelNumber);\n\n            // Hand off to the playing field for actual in-game logic\n            this.field.update(moveFrame);\n\n            this.handleCheatCodes();\n        }\n\n        draw() {\n            if (this.field) this.field.draw();\n\n            let stat = [\n                String(this.lives).padStart(2, ' '),\n                String(this.levelNumber + 1).padStart(2, ' '),\n                String(this.score).padStart(6, ' '),\n                this.field ? String(this.field.time).padStart(4, ' ') : ''\n            ];\n            Screen.write(0, 21, `Lads   ${stat[0]}     Level   ${stat[1]}      Score   ${stat[2]}      Bonus time   ${stat[3]}`);\n        }\n\n        restartLevel() {\n            this.field = undefined;\n        }\n\n        startNextLevel() {\n            this.field = undefined;\n            this.levelNumber++;\n            if (this.levelNumber % Level.LEVEL_COUNT === 0) {\n                this.levelCycle++;\n            }\n        }\n\n        updateScore(scoreType) {\n            switch (scoreType) {\n                case SCORE_ROCK:\n                    this.score += 200;\n                    break;\n                case SCORE_STATUE:\n                    this.score += this.field.time;\n                    break;\n                case SCORE_TREASURE:\n                    // Added repeatedly after winning the level\n                    this.score += 10;\n                    break;\n            }\n        }\n\n        hiddenFactor() {\n            // This \"hidden\" difficulty level increases steadily as the player completes a\n            // level cycle (every time they reach the Easy Street level). This makes the\n            // game slowly harder as you keep playing.\n            return Math.floor(this.levelNumber / Level.LEVEL_COUNT);\n        }\n\n        moveFrameMillisecondDelay() {\n            // Regardless of play speed, the game gets slightly faster every level cycle\n            return Math.floor(PLAY_SPEEDS[Game.playSpeed] - this.hiddenFactor() * HIDDEN_FACTOR_PLAY_SPEED * PLAY_SPEEDS[Game.playSpeed]);\n        }\n\n        handleCheatCodes() {\n            // Cheat codes are useful for testing, and this game is no exception. Of course\n            // THESE cheat codes do not belong here, as they wouldn't be created until 11 years\n            // later, but that won't stop me from inserting them anywhere I get the chance!\n            //\n            // =================     ===============     ===============   ========  ========\n            // \\\\ . . . . . . .\\\\   //. . . . . . .\\\\   //. . . . . . .\\\\  \\\\. . .\\\\// . . //\n            // ||. . ._____. . .|| ||. . ._____. . .|| ||. . ._____. . .|| || . . .\\/ . . .||\n            // || . .||   ||. . || || . .||   ||. . || || . .||   ||. . || ||. . . . . . . ||\n            // ||. . ||   || . .|| ||. . ||   || . .|| ||. . ||   || . .|| || . | . . . . .||\n            // || . .||   ||. _-|| ||-_ .||   ||. . || || . .||   ||. _-|| ||-_.|\\ . . . . ||\n            // ||. . ||   ||-'  || ||  `-||   || . .|| ||. . ||   ||-'  || ||  `|\\_ . .|. .||\n            // || . _||   ||    || ||    ||   ||_ . || || . _||   ||    || ||   |\\ `-_/| . ||\n            // ||_-' ||  .|/    || ||    \\|.  || `-_|| ||_-' ||  .|/    || ||   | \\  / |-_.||\n            // ||    ||_-'      || ||      `-_||    || ||    ||_-'      || ||   | \\  / |  `||\n            // ||    `'         || ||         `'    || ||    `'         || ||   | \\  / |   ||\n            // ||            .===' `===.         .==='.`===.         .===' /==. |  \\/  |   ||\n            // ||         .=='   \\_|-_ `===. .==='   _|_   `===. .===' _-|/   `==  \\/  |   ||\n            // ||      .=='    _-'    `-_  `='    _-'   `-_    `='  _-'   `-_  /|  \\/  |   ||\n            // ||   .=='    _-'          `-__\\._-'         `-_./__-'         `' |. /|  |   ||\n            // ||.=='    _-'                                                     `' |  /==.||\n            // =='    _-'                                                            \\/   `==\n            // \\   _-'                                                                `-_   /\n            //  `''                                                                      ``'\n            //\n            let recentKeystrokes = Input.history.map(event => event.key).join('').toUpperCase();\n            if (recentKeystrokes.match(/IDCLEV(\\d\\d)/)) {\n                // Changing levels is as simple as setting the desired level number\n                // and then throwing the current playing field away.\n                Input.consume();\n                this.levelNumber = parseInt(RegExp.$1, 10);\n                this.field = undefined;\n            } else if (recentKeystrokes.includes(\"IDDQD\")) {\n                Input.consume();\n                console.log(\"god mode\");\n            } else if (recentKeystrokes.includes(\"IDKFA\")) {\n                // Immediately end the current level as if we'd touched the reasure.\n                Input.consume();\n                this.field.winning = true;\n            }\n        }\n    }\n\n    /**\n     * `Game` is a singleton that represents the running game in the browser,\n     * initializes game submodules, and handles the top-level game loop.\n     */\n\n    class Game {\n        init() {\n            Sprite.loadSpritesheet(async () => {\n                await Viewport.init();\n                await Screen.init();\n                await Sprite.init();\n                await Text.init();\n                await Input.init();\n                await Audio.init();\n\n                window.addEventListener('blur', () => this.pause());\n                window.addEventListener('focus', () => this.unpause());\n\n                this.start();\n            });\n        }\n\n        start() {\n            this.frame = 0;\n            this.playSpeed = 0;\n            this.menu = new MainMenu();\n\n            window.requestAnimationFrame(() => this.onFrame());\n        }\n\n        onFrame() {\n            let fps = 60;\n            let now = new Date().getTime();\n            let lastFrame = this.lastFrame || 0;\n\n            // Note: we are using `requestAnimationFrame`, which will call our onFrame handler\n            // 60 times per second in most cases. However, it can be higher (the browser may\n            // respect the user's refresh settings, which could be 120Hz or higher for example).\n            //\n            // It's safest to have a check like we do here, where we explicitly limit the number\n            // of update calls to 60 times per second.\n            if (now - lastFrame >= 1000 / fps) {\n                this.update();\n                this.lastFrame = now;\n            }\n\n            Viewport.resize();\n            this.draw();\n\n            window.requestAnimationFrame(() => this.onFrame());\n        }\n\n        update() {\n            // Pull in frame by frame button pushes / keypresses / mouse clicks\n            Input.update();\n\n            // perform any per-frame audio updates\n            Audio.update();\n\n            if (this.menu) {\n                this.menu.update();\n            }\n\n            if (this.session) this.session.update();\n        }\n\n        draw() {\n            // Reset canvas transform and scale\n            Viewport.ctx.setTransform(Viewport.scale, 0, 0, Viewport.scale, 0, 0);\n\n            // Clear canvas\n            Viewport.ctx.fillStyle = 'black';\n            Viewport.ctx.fillRect(0, 0, Viewport.width, Viewport.height);\n\n            // Center the 80x25 character \"screen\" in the viewport\n            Viewport.ctx.translate((Viewport.width - GAME_WIDTH) / 2 | 0, (Viewport.height - GAME_HEIGHT) / 2 | 0);\n\n            // Hand off control to our submodules to draw whatever they'd like. For all the submodules\n            // below us, \"drawing\" means writing text to the Screen.\n            Screen.clear();\n            if (this.session) this.session.draw();\n            if (this.menu) this.menu.draw();\n\n            // Render the text on the screen to the viewport.\n            Screen.drawToViewport();\n        }\n\n        pause() {\n            if (this.paused) return;\n            this.paused = true;\n            Audio.pause();\n        }\n\n        unpause() {\n            if (!this.paused) return;\n            this.paused = false;\n            Audio.unpause();\n        }\n\n        startSession() {\n            this.menu = undefined;\n            this.session = new GameSession();\n        }\n\n        showMainMenu() {\n            this.menu = new MainMenu();\n            this.session = undefined;\n        }\n\n        showInstructions() {\n            this.menu = new InstructionsMenu();\n            this.session = undefined;\n        }\n    }\n\n    /**\n     * This is the entry point for the game.\n     */\n\n    Game.init();\n\n}());\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwLmpzIiwic291cmNlcyI6WyIuLi9zcmMvanMvQ29uc3RhbnRzLmpzIiwiLi4vc3JjL2pzL1ZpZXdwb3J0LmpzIiwiLi4vc3JjL2pzL1V0aWwuanMiLCIuLi9zcmMvanMvU3ByaXRlU2hlZXQtZ2VuLmpzIiwiLi4vc3JjL2pzL1Nwcml0ZS5qcyIsIi4uL3NyYy9qcy9JbnB1dC5qcyIsIi4uL3NyYy9qcy9UZXh0LmpzIiwiLi4vc3JjL2pzL2xpYi96emZ4LmpzIiwiLi4vc3JjL2pzL2xpYi96emZ4bS5qcyIsIi4uL3NyYy9qcy9zb25ncy9PYmxpcXVlTXlzdGlxdWUuanMiLCIuLi9zcmMvanMvQXVkaW8uanMiLCIuLi9zcmMvanMvU2NyZWVuLmpzIiwiLi4vc3JjL2pzL01haW5NZW51LmpzIiwiLi4vc3JjL2pzL0luc3RydWN0aW9uc01lbnUuanMiLCIuLi9zcmMvanMvQmVoYXZpb3IuanMiLCIuLi9zcmMvanMvRW50aXR5LmpzIiwiLi4vc3JjL2pzL1BsYXllci5qcyIsIi4uL3NyYy9qcy9Sb2NrLmpzIiwiLi4vc3JjL2pzL0xldmVsLmpzIiwiLi4vc3JjL2pzL1BsYXlpbmdGaWVsZC5qcyIsIi4uL3NyYy9qcy9HYW1lU2Vzc2lvbi5qcyIsIi4uL3NyYy9qcy9HYW1lLmpzIiwiLi4vc3JjL2pzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29uc3RhbnRzXG4gKi9cblxuLy8gU3ByaXRlc2hlZXQgVVJJIChwcm9kdWNlZCBkdXJpbmcgZ3VscCBidWlsZClcbmV4cG9ydCBjb25zdCBTUFJJVEVTSEVFVF9VUkkgPSAnc3ByaXRlcy5wbmcnO1xuXG4vLyBUaGUgcGxheWFibGUgYXJlYS4gTm90ZSB0aGF0IHRoaXMgaXMgdGhlIGRlc2lyZWQgZGltZW5zaW9ucywgYnV0IHRoZSBhY3R1YWwgb24tc2NyZWVuIGRpbWVuc2lvbnNcbi8vIG1heSBiZSBsYXJnZXIgdG8gbWFpbnRhaW4gYXNwZWN0IHJhdGlvIChzZWUgYFZpZXdwb3J0LndpZHRoYCAmIGBWaWV3cG9ydC5oZWlnaHRgKS5cbmV4cG9ydCBjb25zdCBHQU1FX1dJRFRIID0gNjQwO1xuZXhwb3J0IGNvbnN0IEdBTUVfSEVJR0hUID0gNDAwO1xuXG4vLyBUaGUgXCJzY3JlZW4gYXJlYVwiLiBUaGlzIGlzIGFuIEFTQ0lJIGdhbWUgYW5kIHNvIG1vc3Qgb2YgdGhlIGdhbWUgbG9naWMgZG9lc24ndCBjYXJlIGFib3V0IGJyb3dzZXJcbi8vIHBpeGVscywgd2UgY2FyZSBhYm91dCB0aGUgQVNDSUkgZGlzcGxheSBhcmVhICg4MHgyNSkuXG5leHBvcnQgY29uc3QgU0NSRUVOX1dJRFRIID0gODA7XG5leHBvcnQgY29uc3QgU0NSRUVOX0hFSUdIVCA9IDI1O1xuXG4vLyBUaGUgc2l6ZSBvZiBvdXIgb24tc2NyZWVuIGNoYXJhY3RlcnMgKGdpdmVuIGRpbWVuc2lvbnMgYWJvdmUsIHRoaXMgaXMgODAgY29scyBieSAyNSByb3dzKS5cbmV4cG9ydCBjb25zdCBDSEFSX1dJRFRIID0gODtcbmV4cG9ydCBjb25zdCBDSEFSX0hFSUdIVCA9IDE2O1xuZXhwb3J0IGNvbnN0IENIQVJTSEVFVF9XSURUSCA9IDE2ICogQ0hBUl9XSURUSDtcbmV4cG9ydCBjb25zdCBDSEFSU0hFRVRfSEVJR0hUID0gMzIgKiBDSEFSX0hFSUdIVDtcblxuLy8gRml4ZWQgbGV2ZWwgc2l6ZVxuZXhwb3J0IGNvbnN0IExFVkVMX1JPV1MgPSAyMDtcbmV4cG9ydCBjb25zdCBMRVZFTF9DT0xTID0gNzk7XG5cbi8vIFBsYXkgc3BlZWRzLCBleHByZXNzZWQgYXMgZnJhbWVzIHBlciBzZWNvbmQuXG4vL1xuLy8gQWNjb3JkaW5nIHRvIHRoZSBvcmlnaW5hbCwgdGhlIHBsYXkgc3BlZWRzIGhhZCBtaWxsaXNlY29uZCBkZWxheXMgb2Y6XG4vLyAgIFsxMDBtcywgNTBtcywgMjVtcywgMTNtcywgN21zXS5cbi8vXG4vLyBUaGlzIHdvdWxkIG1lYW4gdGhlIGVmZmVjdGl2ZSBGUFMgd2FzOlxuLy8gICBbMTAsIDIwLCA0MCwgNzYsIDE0Ml0uXG4vL1xuLy8gSSB0aGluayB0aGlzIGlzIHdheSB0b28gaGlnaCwgYW5kIG1pZ2h0IG5vdCBiZSBhY2N1cmF0ZSAoaXQgZG9lc24ndCBjb3VudFxuLy8gdGltZSBzcGVudCBkcmF3aW5nIHRoZSBzY3JlZW4gYW5kIHJ1bm5pbmcgdGhlIGdhbWUncyBsb2dpYywgd2hpY2ggbWlnaHRcbi8vIGJlIGEgc2lnbmlmaWNhbnQgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcykuIEZyb20gbWVtb3J5LCBlYWNoIHNwZWVkIHdhcyBhYm91dFxuLy8gNTAlIGZhc3RlciB0aGFuIHRoZSBwcmV2aW91cyBvbmUsIHNvIHRoYXQncyB3aGF0IEkndmUgc2V0IGhlcmUuXG5leHBvcnQgY29uc3QgUExBWV9TUEVFRFMgPSBbMTIwLCAxMDAsIDkwLCA1MCwgMzBdO1xuXG4vLyBNYXhpbXVtIG51bWJlciBvZiByb2NrcyBvbiBzY3JlZW4gYXQgb25jZVxuZXhwb3J0IGNvbnN0IE1BWF9ST0NLUyA9IDc7XG5cbi8vIEVhY2ggZGlzcGVuc2VyIG9uIHRoZSBsZXZlbCBpbmNyZWFzZXMgbWF4IHJvY2tzIGJ5IDFcbmV4cG9ydCBjb25zdCBESVNQRU5TRVJfTUFYX1JPQ0tTID0gMTtcblxuLy8gSGlkZGVuIGRpZmZpY3VsdHkgZmFjdG9yIC0gdGhlIGdhbWUgZ2V0cyA1JSBmYXN0ZXIgZWFjaCBsZXZlbCBjeWNsZVxuZXhwb3J0IGNvbnN0IEhJRERFTl9GQUNUT1JfUExBWV9TUEVFRCA9IDAuMDU7XG5cbi8vIEhpZGRlbiBkaWZmaWN1bHR5IGZhY3RvciAtIHRoZSBtYXhpbXVtIG51bWJlciBvZiByb2NrcyBpbmNyZWFzZXMgZWFjaCBsZXZlbCBjeWNsZVxuZXhwb3J0IGNvbnN0IEhJRERFTl9GQUNUT1JfTUFYX1JPQ0tTID0gMjtcblxuLy8gU2NvcmUgZXZlbnRzIChub3RlLCB0aGVzZSBhcmUganVzdCBpZGVudGlmaWVycyBmb3IgdGhlIHR5cGVzIG9mIHNjb3JlIGluY3JlYXNlcywgbm90XG4vLyBhY3R1YWwgc2NvcmUgdmFsdWVzKS5cbmV4cG9ydCBjb25zdCBTQ09SRV9ST0NLID0gMTtcbmV4cG9ydCBjb25zdCBTQ09SRV9TVEFUVUUgPSAyO1xuZXhwb3J0IGNvbnN0IFNDT1JFX1RSRUFTVVJFID0gMztcbiIsIid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHsgR0FNRV9XSURUSCwgR0FNRV9IRUlHSFQgfSBmcm9tICcuL0NvbnN0YW50cyc7XG5cbi8qKlxuICogVmlld3BvcnRcbiAqXG4gKiBSZXByZXNlbnRzIHRoZSBnYW1lIGRpc3BsYXkgKGZvciB1cywgYSBjYW52YXMpLlxuICovXG5leHBvcnQgY29uc3QgVmlld3BvcnQgPSB7XG4gICAgaW5pdCgpIHtcbiAgICAgICAgVmlld3BvcnQuY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhbnZhcycpO1xuICAgICAgICBWaWV3cG9ydC5jdHggPSBWaWV3cG9ydC5jYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgVmlld3BvcnQucmVzaXplKHRydWUpO1xuICAgIH0sXG5cbiAgICAvLyBSZXNpemUgdGhlIGNhbnZhcyB0byBnaXZlIHVzIGFwcHJveGltYXRlbHkgb3VyIGRlc2lyZWQgZ2FtZSBkaXNwbGF5IHNpemUuXG4gICAgLy9cbiAgICAvLyBSYXRoZXIgdGhhbiBhdHRlbXB0IHRvIGV4cGxhaW4gaXQsIGhlcmUncyBhIGNvbmNyZXRlIGV4YW1wbGU6XG4gICAgLy9cbiAgICAvLyAgICAgd2Ugc3RhcnQgd2l0aCBhIGRlc2lyZWQgZ2FtZSBkaW1lbnNpb246ICAgNDgweDI3MHB4XG4gICAgLy8gICAgICAgICAgZ2V0IHRoZSBhY3R1YWwgYnJvd3NlciBkaW1lbnNpb25zOiAgMTMwOXg0NjhweFxuICAgIC8vICAgICAgICAgIGZhY3RvciBpbiB0aGUgZGlzcGxheSdzIERQSSByYXRpbzogIDI2MTh4OTM2cHhcbiAgICAvLyAgICAgICAgIG5vdyBjYWxjdWxhdGUgdGhlIGhvcml6b250YWwgc2NhbGU6ICAgICAgIDUuNDV4XG4gICAgLy8gICAgICAgICAgICAgICAgICAgICBhbmQgdGhlIHZlcnRpY2FsIHNjYWxlOiAgICAgICAzLjQ2eFxuICAgIC8vICAgICAgICAgICAgb3VyIG5ldyBvZmZpY2FsIGdhbWUgc2NhbGluZyBpczogICAgICAgIDUuNHhcbiAgICAvLyAgICAgICBhbmQgb3VyIG9mZmljaWFsIHZpZXdwb3J0IGRpbWVuc2lvbnM6ICAgNDg0eDE3M3B4XG4gICAgLy9cbiAgICAvLyBUaGlzIGFwcHJvYWNoIGVtcGhhc2l6ZXMgY29ycmVjdCBhc3BlY3QgcmF0aW8gYW5kIG1haW50YWlucyBmdWxsLXdpbmRvdyByZW5kZXJpbmcsIGF0XG4gICAgLy8gdGhlIHBvdGVudGlhbCBjb3N0IG9mIGxpbWl0aW5nIHZpc2liaWxpdHkgb2YgdGhlIGdhbWUgaXRzZWxmIGluIGVpdGhlciB0aGUgWCBvciBZIGF4aXMuXG4gICAgLy8gSWYgeW91IHVzZSB0aGlzIGFwcHJvYWNoLCBtYWtlIHN1cmUgeW91ciBHVUkgY2FuIFwiZmxvYXRcIiAob3RoZXJ3aXNlIHRoZXJlIG1heSBiZSB3aG9sZVxuICAgIC8vIFVJIGVsZW1lbnRzIHRoZSBwbGF5ZXIgY2Fubm90IHNlZSEpLlxuICAgIHJlc2l6ZShmb3JjZSkge1xuICAgICAgICBsZXQgZHBpID0gd2luZG93LmRldmljZVBpeGVsUmF0aW8sXG4gICAgICAgICAgICB3aWR0aCA9IFZpZXdwb3J0LmNhbnZhcy5jbGllbnRXaWR0aCxcbiAgICAgICAgICAgIGhlaWdodCA9IFZpZXdwb3J0LmNhbnZhcy5jbGllbnRIZWlnaHQsXG4gICAgICAgICAgICBkcGlXaWR0aCA9IHdpZHRoICogZHBpLFxuICAgICAgICAgICAgZHBpSGVpZ2h0ID0gaGVpZ2h0ICogZHBpO1xuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIGZvcmNlIHx8XG4gICAgICAgICAgICBWaWV3cG9ydC5jYW52YXMud2lkdGggIT09IGRwaVdpZHRoIHx8XG4gICAgICAgICAgICBWaWV3cG9ydC5jYW52YXMuaGVpZ2h0ICE9PSBkcGlIZWlnaHRcbiAgICAgICAgKSB7XG4gICAgICAgICAgICBWaWV3cG9ydC5jYW52YXMud2lkdGggPSBkcGlXaWR0aDtcbiAgICAgICAgICAgIFZpZXdwb3J0LmNhbnZhcy5oZWlnaHQgPSBkcGlIZWlnaHQ7XG5cbiAgICAgICAgICAgIFZpZXdwb3J0LnNjYWxlID0gKChNYXRoLm1pbihkcGlXaWR0aCAvIEdBTUVfV0lEVEgsIGRwaUhlaWdodCAvIEdBTUVfSEVJR0hUKSAqIDEwKSB8IDApIC8gMTA7XG4gICAgICAgICAgICBWaWV3cG9ydC53aWR0aCA9IE1hdGguY2VpbChkcGlXaWR0aCAvIFZpZXdwb3J0LnNjYWxlKTtcbiAgICAgICAgICAgIFZpZXdwb3J0LmhlaWdodCA9IE1hdGguY2VpbChkcGlIZWlnaHQgLyBWaWV3cG9ydC5zY2FsZSk7XG4gICAgICAgICAgICBWaWV3cG9ydC5jZW50ZXIgPSB7XG4gICAgICAgICAgICAgICAgdTogKFZpZXdwb3J0LndpZHRoIC8gMikgfCAwLFxuICAgICAgICAgICAgICAgIHY6IChWaWV3cG9ydC5oZWlnaHQgLyAyKSB8IDBcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBWaWV3cG9ydC5jbGllbnRXaWR0aCA9IHdpZHRoO1xuICAgICAgICAgICAgVmlld3BvcnQuY2xpZW50SGVpZ2h0ID0gaGVpZ2h0O1xuXG4gICAgICAgICAgICAvLyBOb3RlOiBzbW9vdGhpbmcgZmxhZyBnZXRzIHJlc2V0IG9uIGV2ZXJ5IHJlc2l6ZSBieSBzb21lIGJyb3dzZXJzLCB3aGljaCBpcyB3aHlcbiAgICAgICAgICAgIC8vIHdlIGRvIGl0IGhlcmUuXG4gICAgICAgICAgICBWaWV3cG9ydC5jdHguaW1hZ2VTbW9vdGhpbmdFbmFibGVkID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBXZSBkbyB0aGlzIGV2ZXJ5IGZyYW1lLCBub3QganVzdCBvbiByZXNpemUsIGR1ZSB0byBicm93c2VyIHNvbWV0aW1lcyBcImZvcmdldHRpbmdcIi5cbiAgICAgICAgLy9WaWV3cG9ydC5jYW52YXMuc3R5bGUuY3Vyc29yID0gJ25vbmUnO1xuICAgIH1cbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbmltcG9ydCB7IEdhbWUgfSBmcm9tICcuL0dhbWUnO1xuaW1wb3J0IHsgVmlld3BvcnQgfSBmcm9tICcuL1ZpZXdwb3J0JztcblxuZXhwb3J0IGZ1bmN0aW9uIHFyMnh5KHBvcykge1xuICAgIHJldHVybiB7XG4gICAgICAgIHg6IHBvcy5xICogMTMsXG4gICAgICAgIHk6IHBvcy5xICogNiArIHBvcy5yICogMTJcbiAgICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24geHkycXIocG9zKSB7XG4gICAgbGV0IHFyRnJhY3Rpb24gPSB7XG4gICAgICAgIHE6IChwb3MueCAvIDEzKSxcbiAgICAgICAgcjogKChwb3MueSAtIHBvcy54ICogNiAvIDEzKSAvIDEyKVxuICAgIH07XG4gICAgcmV0dXJuIHFyUm91bmRlZChxckZyYWN0aW9uKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHh5MnV2KHBvcykge1xuICAgIHJldHVybiB7XG4gICAgICAgIHU6IHBvcy54ICsgVmlld3BvcnQuY2VudGVyLnUgLSBHYW1lLmNhbWVyYS5wb3MueCxcbiAgICAgICAgdjogcG9zLnkgKyBWaWV3cG9ydC5jZW50ZXIudiAtIEdhbWUuY2FtZXJhLnBvcy55XG4gICAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHV2Mnh5KHBvcykge1xuICAgIHJldHVybiB7XG4gICAgICAgIHg6IHBvcy51IC0gVmlld3BvcnQuY2VudGVyLnUgKyBHYW1lLmNhbWVyYS5wb3MueCxcbiAgICAgICAgeTogcG9zLnYgLSBWaWV3cG9ydC5jZW50ZXIudiArIEdhbWUuY2FtZXJhLnBvcy55XG4gICAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHFyMnFycyhwb3MpIHtcbiAgICByZXR1cm4geyBxOiBwb3MucSwgcjogcG9zLnIsIHM6IC1wb3MucS1wb3MuciB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcXJzMnFyKHBvcykge1xuICAgIHJldHVybiB7IHE6IHBvcy5xLCByOiBwb3MuciB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdGlsZUlzUGFzc2FibGUocSwgcikge1xuICAgIGlmIChHYW1lLmJyYXdsKSB7XG4gICAgICAgIGxldCByb29tID0gR2FtZS5icmF3bC5yb29tO1xuICAgICAgICBpZiAoXG4gICAgICAgICAgICBxIDwgcm9vbS5xIHx8XG4gICAgICAgICAgICByIDwgcm9vbS5yIHx8XG4gICAgICAgICAgICBxID49IHJvb20ucSArIHJvb20udyB8fFxuICAgICAgICAgICAgciA+PSByb29tLnIgKyByb29tLmhcbiAgICAgICAgKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAocSA8IDAgfHwgciA8IDAgfHwgcSA+PSBHYW1lLm1hemUudyB8fCByID49IEdhbWUubWF6ZS5oKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuICEhR2FtZS5tYXplLm1hemVbcl1bcV07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZ2JhKHIsIGcsIGIsIGEpIHtcbiAgICByZXR1cm4gYHJnYmEoJHtyfSwke2d9LCR7Yn0sJHthfSlgO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQ2FudmFzKHdpZHRoLCBoZWlnaHQpIHtcbiAgICBsZXQgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgY2FudmFzLndpZHRoID0gd2lkdGg7XG4gICAgY2FudmFzLmhlaWdodCA9IGhlaWdodDtcbiAgICBsZXQgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gICAgcmV0dXJuIHsgY2FudmFzLCBjdHggfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJvb21DZW50ZXIocm9vbSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHg6IChyb29tLnEgKyByb29tLncgLyAyKSAqIFRJTEVfU0laRSxcbiAgICAgICAgeTogKHJvb20uciArIHJvb20uaCAvIDIpICogVElMRV9TSVpFXG4gICAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnRpYWxUZXh0KHRleHQsIHQsIGQpIHtcbiAgICBsZXQgbGVuZ3RoID0gY2xhbXAoTWF0aC5jZWlsKHQgLyBkICogdGV4dC5sZW5ndGgpLCAwLCB0ZXh0Lmxlbmd0aCksXG4gICAgICAgIHN1YnN0ciA9IHRleHQuc2xpY2UoMCwgbGVuZ3RoKSxcbiAgICAgICAgaWR4ID0gdGV4dC5pbmRleE9mKCcgJywgbGVuZ3RoIC0gMSk7XG4gICAgaWYgKGlkeCA8IDApIGlkeCA9IHRleHQubGVuZ3RoO1xuICAgIGlmIChpZHggLSBsZW5ndGggPiAwKSBzdWJzdHIgKz0gJyMnLnJlcGVhdChpZHggLSBsZW5ndGgpO1xuXG4gICAgcmV0dXJuIHN1YnN0cjtcbn1cbiIsIid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBUaGlzIG1vZHVsZSBpcyBnZW5lcmF0ZWQgYnkgYGd1bHAgYnVpbGRBc3NldHNgLlxuICovXG5leHBvcnQgY29uc3QgU3ByaXRlU2hlZXQgPVxuICAgIC8qIDxnZW5lcmF0ZWQ+ICovXG57IGZvbnQ6IFsgWyAxMjgsIDAsIDEyOCwgNDQ4IF0gXSxcbiAgZm9udDI6IFsgWyAwLCAwLCAxMjgsIDUxMiBdIF0sXG4gIGhhcm9sZDogWyBbIDEyOCwgNDQ4LCAxOSwgMTIgXSBdLFxuICB1cmk6ICdzcHJpdGVzLnBuZycgfVxuLyogPC9nZW5lcmF0ZWQ+ICovXG4iLCIndXNlIHN0cmljdCc7XG5cbmltcG9ydCB7IEdhbWUgfSBmcm9tICcuL0dhbWUnO1xuaW1wb3J0IHsgcmdiYSwgY3JlYXRlQ2FudmFzIH0gZnJvbSAnLi9VdGlsJztcbmltcG9ydCB7IFNwcml0ZVNoZWV0IH0gZnJvbSAnLi9TcHJpdGVTaGVldC1nZW4nO1xuaW1wb3J0IHsgVmlld3BvcnQgfSBmcm9tICcuL1ZpZXdwb3J0JztcblxuLyoqXG4gKiBTcHJpdGVcbiAqXG4gKiBFbmNhcHN1bGF0ZXMgbG9hZGluZyBzcHJpdGUgc2xpY2VzIGZyb20gdGhlIHNwcml0ZXNoZWV0LCBvcmdhbml6aW5nIHRoZW0sIGFuZFxuICogbW9kaWZ5aW5nIHRoZW0gb3IgY29uc3RydWN0aW5nIHVzaW5nIHByaW1pdGl2ZXMuIFRvIHNhdmUgc3BhY2UsIHdlIHVzZSBzb21lIHRlY2huaXF1ZXNcbiAqIGxpa2Ugc3RvcmluZyBvbmx5IGEgc21hbGwgc2xpY2Ugb2YgYW4gaW1hZ2UgaW4gdGhlIHNwcml0ZXNoZWV0LCB0aGVuIHVzaW5nIGNvZGVcbiAqIHRvIGR1cGxpY2F0ZSBpdCwgYWRkIHNvbWUgcmFuZG9tbmVzcywgZXRjLlxuICovXG5leHBvcnQgY29uc3QgU3ByaXRlID0ge1xuICAgIC8vIFRoaXMgaXMgYW4gZXhjZXB0aW9uIHRvIHRoZSBydWxlLCBsb2FkaW5nIHRoZSBzcHJpdGVzaGVldCBpcyBhIHNwZWNpYWwgYWN0aW9uIHRoYXRcbiAgICAvLyBoYXBwZW5zIEJFRk9SRSBldmVyeXRoaW5nIGlzIGluaXRpYWxpemVkLlxuICAgIGxvYWRTcHJpdGVzaGVldChjYikge1xuICAgICAgICBsZXQgaW1hZ2UgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgaW1hZ2Uub25sb2FkID0gY2I7XG4gICAgICAgIGltYWdlLnNyYyA9IFNwcml0ZVNoZWV0LnVyaTtcbiAgICAgICAgU3ByaXRlLnNoZWV0ID0gaW1hZ2U7XG4gICAgfSxcblxuICAgIGluaXQoKSB7XG4gICAgICAgIC8vIEJhc2UgcGl4ZWwgZm9udCBhbmQgaWNvbnMgKHNlZSBgVGV4dC5pbml0YCBmb3IgYWRkaXRpb25hbCB2YXJpYXRpb25zKVxuICAgICAgICBTcHJpdGUuZm9udCA9IGluaXRCYXNpY1Nwcml0ZShTcHJpdGVTaGVldC5mb250MlswXSk7XG5cbiAgICAgICAgcmV0dXJuO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBBIHNtYWxsIGhlbHBlciB0aGF0IGRyYXdzIGEgc3ByaXRlIG9udG8gYSBjYW52YXMsIHJlc3BlY3RpbmcgdGhlIGFuY2hvciBwb2ludCBvZlxuICAgICAqIHRoZSBzcHJpdGUuIE5vdGUgdGhhdCB0aGUgY2FudmFzIHNob3VsZCBiZSBQUkUtVFJBTlNMQVRFRCBhbmQgUFJFLVJPVEFURUQsIGlmXG4gICAgICogdGhhdCdzIGFwcHJvcHJpYXRlIVxuICAgICAqL1xuICAgIGRyYXdTcHJpdGUoY3R4LCBzcHJpdGUsIHUsIHYpIHtcbiAgICAgICAgY3R4LmRyYXdJbWFnZShzcHJpdGUuaW1nLCB1IC0gc3ByaXRlLmFuY2hvci54LCB2IC0gc3ByaXRlLmFuY2hvci55KTtcbiAgICB9LFxuXG4gICAgZHJhd1ZpZXdwb3J0U3ByaXRlKHNwcml0ZSwgcG9zLCByb3RhdGlvbikge1xuICAgICAgICBsZXQgeyB1LCB2IH0gPSB0aGlzLnZpZXdwb3J0U3ByaXRlMnV2KFxuICAgICAgICAgICAgc3ByaXRlLFxuICAgICAgICAgICAgcG9zXG4gICAgICAgICk7XG4gICAgICAgIGlmIChyb3RhdGlvbikge1xuICAgICAgICAgICAgVmlld3BvcnQuY3R4LnNhdmUoKTtcbiAgICAgICAgICAgIFZpZXdwb3J0LmN0eC50cmFuc2xhdGUodSArIHNwcml0ZS5hbmNob3IueCwgdiArIHNwcml0ZS5hbmNob3IueSk7XG4gICAgICAgICAgICBWaWV3cG9ydC5jdHgucm90YXRlKHJvdGF0aW9uKTtcbiAgICAgICAgICAgIFZpZXdwb3J0LmN0eC5kcmF3SW1hZ2UoXG4gICAgICAgICAgICAgICAgc3ByaXRlLmltZyxcbiAgICAgICAgICAgICAgICAtc3ByaXRlLmFuY2hvci54LFxuICAgICAgICAgICAgICAgIC1zcHJpdGUuYW5jaG9yLnlcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBWaWV3cG9ydC5jdHgucmVzdG9yZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgVmlld3BvcnQuY3R4LmRyYXdJbWFnZShzcHJpdGUuaW1nLCB1LCB2KTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICB2aWV3cG9ydFNwcml0ZTJ1dihzcHJpdGUsIHBvcykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdTogcG9zLnggLSBzcHJpdGUuYW5jaG9yLnggLSBHYW1lLmNhbWVyYS5wb3MueCArIFZpZXdwb3J0LmNlbnRlci51LFxuICAgICAgICAgICAgdjogcG9zLnkgLSBzcHJpdGUuYW5jaG9yLnkgLSBHYW1lLmNhbWVyYS5wb3MueSArIFZpZXdwb3J0LmNlbnRlci52XG4gICAgICAgIH07XG4gICAgfVxufTtcblxuLy8gU3ByaXRlIHV0aWxpdHkgZnVuY3Rpb25zXG5cbmZ1bmN0aW9uIGluaXRCYXNpY1Nwcml0ZShkYXRhLCBhbmNob3IpIHtcbiAgICByZXR1cm4gaW5pdER5bmFtaWNTcHJpdGUobG9hZENhY2hlU2xpY2UoLi4uZGF0YSksIGFuY2hvcik7XG59XG5cbmZ1bmN0aW9uIGluaXREeW5hbWljU3ByaXRlKHNvdXJjZSwgYW5jaG9yKSB7XG4gICAgbGV0IHcgPSBzb3VyY2Uud2lkdGgsXG4gICAgICAgIGggPSBzb3VyY2UuaGVpZ2h0O1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgaW1nOiBzb3VyY2UsXG4gICAgICAgIC8vIEhhY2shIFVzaW5nIGEgZmxhdCBgLm1hcChpbml0QmFzaWNTcHJpdGUpYCBpcyBhY3R1YWxseSBnb2luZyB0byBwYXNzIHRoZVxuICAgICAgICAvLyBlbGVtZW50IElOREVYIGFzIHNlY29uZCBhcmd1bWVudCwgcmVzdWx0aW5nIGluIFwiYW5jaG9yPTFcIi4gVGhlIHJpZ2h0IHNvbHV0aW9uXG4gICAgICAgIC8vIGhlcmUgaXMgXCJ0eXBlb2YgYW5jaG9yID09PSAnb2JqZWN0JyA/XCIsIGJ1dCB0byBzYXZlIGJ5dGVzIEkgYXZvaWQgdXNpbmdcbiAgICAgICAgLy8gdGhlIHR5cGVvZiBhbmQgaW5zdGFuY2VvZiBrZXl3b3JkcyBhbnl3aGVyZSBpbiB0aGUgY29kZWJhc2UuIEhlbmNlLFxuICAgICAgICAvLyBcImFuY2hvciAmJiBhbmNob3IueFwiLlxuICAgICAgICBhbmNob3I6IChhbmNob3IgJiYgYW5jaG9yLngpID8gYW5jaG9yIDogeyB4OiAodyAvIDIpIHwgMCwgeTogKGggLyAyKSB8IDAgfVxuICAgIH07XG59XG5cbmZ1bmN0aW9uIGxvYWRDYWNoZVNsaWNlKHgsIHksIHcsIGgpIHtcbiAgICBjb25zdCBzb3VyY2UgPSBTcHJpdGUuc2hlZXQ7XG4gICAgY29uc3Qgc2xpY2VDYW52YXMgPSBjcmVhdGVDYW52YXModywgaCk7XG4gICAgc2xpY2VDYW52YXMuY3R4LmRyYXdJbWFnZShzb3VyY2UsIHgsIHksIHcsIGgsIDAsIDAsIHcsIGgpO1xuICAgIHJldHVybiBzbGljZUNhbnZhcy5jYW52YXM7XG59XG4iLCJcbi8vIEEgbGlzdCBvZiBpbi1nYW1lIGFjdGlvbnMgdGhhdCBjYW4gYmUgcGVyZm9ybWVkIGJ5IHRoZSBwbGF5ZXJcbmNvbnN0IEFjdGlvbiA9IHtcbiAgICBVUDogICAgIDExLFxuICAgIERPV046ICAgMTIsXG4gICAgTEVGVDogICAxMyxcbiAgICBSSUdIVDogIDE0LFxuICAgIEpVTVA6ICAgMTUsXG4gICAgU1RPUDogICAxNixcbiAgICBQQVVTRTogIDE3LFxuICAgIFJFU1VNRTogMThcbn07XG5cbi8vIEEgbGlzdCBvZiBrZXkgY29kZSBtYXBwaW5ncyBhbmQgd2hhdCBhY3Rpb24gdGhleSBwZXJmb3JtLiBIZXJlIHdlIGhhcmQtY29kZSBpdCwgYnV0XG4vLyB5b3UgY291bGQgZWFzaWx5IGFsc28gaGF2ZSB0aGUga2V5IG1hcHBpbmdzIGNvbnRyb2xsZWQgYnkgc2V0dGluZ3MgYW5kIGxldCB0aGUgdXNlclxuLy8gY29uZmlndXJlIGl0LlxuY29uc3QgS2V5TWFwcGluZyA9IHtcbiAgICBLZXlXOiAgICAgICBBY3Rpb24uVVAsXG4gICAgS2V5UzogICAgICAgQWN0aW9uLkRPV04sXG4gICAgS2V5QTogICAgICAgQWN0aW9uLkxFRlQsXG4gICAgS2V5RDogICAgICAgQWN0aW9uLlJJR0hULFxuICAgIEFycm93VXA6ICAgIEFjdGlvbi5VUCxcbiAgICBBcnJvd0Rvd246ICBBY3Rpb24uRE9XTixcbiAgICBBcnJvd0xlZnQ6ICBBY3Rpb24uTEVGVCxcbiAgICBBcnJvd1JpZ2h0OiBBY3Rpb24uUklHSFQsXG4gICAgU3BhY2U6ICAgICAgQWN0aW9uLkpVTVAsXG4gICAgRXNjYXBlOiAgICAgQWN0aW9uLlBBVVNFLFxuICAgIEVudGVyOiAgICAgIEFjdGlvbi5SRVNVTUVcbn07XG5cbmV4cG9ydCBjb25zdCBJbnB1dCA9IHtcbiAgICBBY3Rpb24sXG4gICAgS2V5TWFwcGluZyxcblxuICAgIGluaXQoKSB7XG4gICAgICAgIC8vIElucHV0IGJ1ZmZlciAtIG5ldyBrZXlwcmVzcyBldmVudHMgZ28gaW50byB0aGlzIGJ1ZmZlciB0byBiZSBoYW5kbGVkXG4gICAgICAgIC8vIGR1cmluZyB0aGUgZ2FtZSdzIHVwZGF0ZSBsb29wLiBJdCdzIHVwIHRvIHRoZSBgdXBkYXRlKClgIG1ldGhvZHMgdG8gY29uc3VtZVxuICAgICAgICAvLyBrZXkgcHJlc3NlcyBhbmQgcmVtb3ZlIHRoZW0gZnJvbSB0aGUgYnVmZmVyLlxuICAgICAgICB0aGlzLmJ1ZmZlciA9IFtdO1xuXG4gICAgICAgIC8vIElucHV0IGhpc3RvcnkgLSBoaXN0b3J5IGNvbnRhaW5zIHJlY2VudCBrZXkgcHJlc3MgZXZlbnRzIGluIG9yZGVyLFxuICAgICAgICAvLyByZW1vdmVkIGF1dG9tYXRpY2FsbHkgYWZ0ZXIgYSBmZXcgc2Vjb25kcy4gVGhpcyBpcyB1c2VmdWwgZm9yIGRldGVjdGluZ1xuICAgICAgICAvLyBpbnB1dHMgbGlrZSBjaGVhdCBjb2RlcywgZm9yIGV4YW1wbGUuXG4gICAgICAgIHRoaXMuaGlzdG9yeSA9IFtdO1xuXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZXZlbnQgPT4ge1xuICAgICAgICAgICAgbGV0IGVudHJ5ID0ge1xuICAgICAgICAgICAgICAgIGF0OiBuZXcgRGF0ZSgpLmdldFRpbWUoKSxcbiAgICAgICAgICAgICAgICBrZXk6IGV2ZW50LmtleSxcbiAgICAgICAgICAgICAgICBjb2RlOiBldmVudC5jb2RlLFxuICAgICAgICAgICAgICAgIGFjdGlvbjogSW5wdXQuS2V5TWFwcGluZ1tldmVudC5jb2RlXSB8fCBJbnB1dC5BY3Rpb24uU1RPUFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIElucHV0LmJ1ZmZlci5wdXNoKGVudHJ5KTtcbiAgICAgICAgICAgIElucHV0Lmhpc3RvcnkucHVzaChlbnRyeSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlbnRyeSk7XG4gICAgICAgIH0pO1xuICAgIH0sXG5cbiAgICB1cGRhdGUoKSB7XG4gICAgICAgIGxldCBub3cgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgICAgdGhpcy5oaXN0b3J5ID0gdGhpcy5oaXN0b3J5LmZpbHRlcihlbnRyeSA9PiBlbnRyeS5hdCA+IG5vdyAtIDMwMDApO1xuICAgIH0sXG5cbiAgICBsYXN0S2V5UHJlc3NlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYnVmZmVyLmxlbmd0aCA+IDAgPyB0aGlzLmJ1ZmZlclt0aGlzLmJ1ZmZlci5sZW5ndGggLSAxXS5rZXkgOiAnJztcbiAgICB9LFxuXG4gICAgbGFzdENvZGVQcmVzc2VkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5idWZmZXIubGVuZ3RoID4gMCA/IHRoaXMuYnVmZmVyW3RoaXMuYnVmZmVyLmxlbmd0aCAtIDFdLmNvZGUgOiAnJztcbiAgICB9LFxuXG4gICAgbGFzdEFjdGlvblByZXNzZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlci5sZW5ndGggPiAwID8gdGhpcy5idWZmZXJbdGhpcy5idWZmZXIubGVuZ3RoIC0gMV0uYWN0aW9uIDogdW5kZWZpbmVkO1xuICAgIH0sXG5cbiAgICBjb25zdW1lKCkge1xuICAgICAgICB0aGlzLmJ1ZmZlciA9IFtdO1xuICAgIH0sXG59XG4iLCIvKipcbiAqIGBUZXh0YCBpcyBhIHNpbmdsZXRvbiByZXNwb25zaWJsZSBmb3IgZHJhd2luZyB0ZXh0IGNoYXJhY3RlcnMgb24gdGhlIHZpZXdwb3J0LiBUaGlzXG4gKiBnYW1lIHVzZXMgYSBjdXN0b20gcGl4ZWwgZm9udCwgc28gd2UgbmVlZCB0byBpbXBsZW1lbnQgc29tZSBiYXNpYyB0ZXh0IGhhbmRsaW5nXG4gKiAoc3BsaXR0aW5nIGxvbmcgbGluZXMsIG1lYXN1cmluZyBjaGFyYWN0ZXIgd2lkdGgsIGV0Yy4pIG91cnNlbHZlcy5cbiAqL1xuXG5pbXBvcnQgeyBTcHJpdGUgfSBmcm9tICcuL1Nwcml0ZSc7XG5pbXBvcnQgeyByZ2JhLCBjcmVhdGVDYW52YXMgfSBmcm9tICcuL1V0aWwnO1xuaW1wb3J0IHsgQ0hBUl9XSURUSCwgQ0hBUl9IRUlHSFQsIENIQVJTSEVFVF9XSURUSCB9IGZyb20gJy4vQ29uc3RhbnRzJztcbmltcG9ydCB7IFZpZXdwb3J0IH0gZnJvbSAnLi9WaWV3cG9ydCc7XG5cbi8vIEluIG91ciBjaGFyYWN0ZXIgc2hlZXQsIGNoYXJzIDB4MDAtMHg3RiBhcmUgc3RhbmRhcmQgQVNDSUksIGJlbG93IHRoYXQgd2UgcHV0IHdoYXRldmVyXG4vLyBjaGFyYWN0ZXJzIGFyZSBjb252ZW5pZW50IGZvciB1cy4gSGVyZSB3ZSBjYW4gY2hvb3NlIHRvIG1hcCB1bmljb2RlIGNoYXJhY3RlcnMgdG8gcG9zaXRpb25zXG4vLyAweDgwKyBpbiB0aGUgY2hhcnNoZWV0LCBtYWtpbmcgaXQgZWFzeSBmb3IgdXMgdG8gcmVuZGVyIHRoaW5ncyBsaWtlIHNwZWNpYWwgY2hhcmFjdGVycyxcbi8vIGJveCBkcmF3aW5nIGNoYXJhY3RlcnMsIGV0Yy5cbi8vXG4vLyBOb3RlOiBJIGxpa2UgcGFzdGluZyBhY3R1YWwgY2hhcmFjdGVycyBpbnN0ZWFkIG9mIGNvZGVzIChcIuKUnFwiIGluc3RlYWQgb2YgXCJcXHUyNTFDXCIpLiBJZiB5b3Vcbi8vIGRvIHRoaXMsIGRvbid0IGZvcmdldCB0byBleHBsaWNpdGx5IHRlbGwgdGhlIGJyb3dzZXIgd2hhdCBjaGFyc2V0IHlvdXIgSlMgZmlsZSBpcywgb3IgaXRcbi8vIHdvbid0IGV4ZWN1dGUgLS0gc2VlIGBpbmRleC5odG1sYCBmb3IgYW4gZXhhbXBsZS5cbmNvbnN0IFNVUFBPUlRFRF9VTklDT0RFX0NIQVJTID0gW1xuICAgICfilIDilILilIzilJDilJTilJjilJzilKTilKzilLTilLzilbPilbPilbPilbPilbMnLFxuICAgICfilZDilZHilZTilZfilZrilZ3ilaDilaPilabilanilazilbPilbPilbPilbPilbMnLFxuICAgICfihpHihpPihpDihpLilbPilbPilbPilbPilbPilbPilbPilbPilbPilbPilbPilbMnXG5dLmpvaW4oJycpO1xuXG5jb25zdCBVTklDT0RFX0NIQVJfTUFQID0gU1VQUE9SVEVEX1VOSUNPREVfQ0hBUlMuc3BsaXQoJycpLnJlZHVjZSgobWFwLCBjaGFyLCBpZHgpID0+IHtcbiAgICBtYXBbY2hhcl0gPSAweDgwICsgaWR4O1xuICAgIHJldHVybiBtYXA7XG59LCB7fSk7XG5cbi8qKlxuICogVGV4dFxuICpcbiAqIFV0aWxpdGllcyBmb3IgZHJhd2luZyB0ZXh0IHVzaW5nIGluLWdhbWUgcGl4ZWwgZm9udC5cbiAqL1xuZXhwb3J0IGNvbnN0IFRleHQgPSB7XG4gICAgaW5pdCgpIHtcbiAgICAgICAgVGV4dC53aGl0ZSA9IFNwcml0ZS5mb250LmltZztcblxuICAgICAgICBUZXh0LmJsYWNrID0gcmVjb2xvcihUZXh0LndoaXRlLCByZ2JhKDAsIDAsIDAsIDEpKTtcbiAgICAgICAgVGV4dC5ibGFja19zaGFkb3cgPSByZWNvbG9yKFRleHQud2hpdGUsIHJnYmEoOTAsIDIwLCA5MCwgMC4xNSkpO1xuICAgICAgICBUZXh0LmJsdWUgPSByZWNvbG9yKFRleHQud2hpdGUsIHJnYmEoMjAwLCA0MCwgMjIwLCAxKSk7XG4gICAgICAgIFRleHQuYmx1ZV9zaGFkb3cgPSByZWNvbG9yKFRleHQud2hpdGUsIHJnYmEoMjQwLCA1MCwgMjAwLCAwLjIpKTtcbiAgICAgICAgVGV4dC5zaGFkb3cgPSByZWNvbG9yKFRleHQud2hpdGUsIHJnYmEoMjQwLCAyNDAsIDI1NSwgMC4yNSkpO1xuICAgICAgICBUZXh0LnJlZCA9IHJlY29sb3IoVGV4dC53aGl0ZSwgcmdiYSgyNDAsIDUwLCA1MCwgMSkpO1xuXG4gICAgICAgIFRleHQudGVybWluYWwgPSByZWNvbG9yKFRleHQud2hpdGUsIHJnYmEoNTEsIDI1NSwgMCwgMSkpO1xuICAgICAgICBUZXh0LnRlcm1pbmFsX3NoYWRvdyA9IHJlY29sb3IoVGV4dC53aGl0ZSwgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjMpKTtcblxuICAgICAgICBUZXh0LnRlcm1pbmFsID0gcmVjb2xvcihUZXh0LndoaXRlLCByZ2JhKDUxLCAyNTUsIDAsIDAuOSkpO1xuICAgICAgICBUZXh0LnRlcm1pbmFsX3NoYWRvdyA9IHVuZGVmaW5lZDtcblxuICAgICAgICBUZXh0WycjZWFkNGFhJ10gPSByZWNvbG9yKFRleHQud2hpdGUsICcjZWFkNGFhJyk7XG4gICAgICAgIFRleHRbJyNmZWU3NjEnXSA9IHJlY29sb3IoVGV4dC53aGl0ZSwgJyNmZWU3NjEnKTtcbiAgICAgICAgVGV4dFsnI2ZmMDA0NCddID0gcmVjb2xvcihUZXh0LndoaXRlLCAnI2ZmMDA0NCcpO1xuICAgIH0sXG5cbiAgICBkcmF3VGV4dChjdHgsIHRleHQsIHUsIHYsIHNjYWxlID0gMSwgZm9udCA9IFRleHQud2hpdGUsIHNoYWRvdykge1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh0ZXh0KSkge1xuICAgICAgICAgICAgZm9yIChsZXQgYmxvY2sgb2YgdGV4dCkge1xuICAgICAgICAgICAgICAgIFRleHQuZHJhd1RleHQoY3R4LCBibG9jay50ZXh0LCB1ICsgYmxvY2sudSAqIHNjYWxlLCB2ICsgYmxvY2sudiAqIHNjYWxlLCBzY2FsZSwgZm9udCwgc2hhZG93KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAobGV0IGlkeCA9IDA7IGlkeCA8IHRleHQubGVuZ3RoOyBpZHgrKykge1xuICAgICAgICAgICAgbGV0IGMgPSBVTklDT0RFX0NIQVJfTUFQW3RleHRbaWR4XV0gfHwgdGV4dC5jaGFyQ29kZUF0KGlkeCk7XG4gICAgICAgICAgICBsZXQgayA9IChjIC0gMCkgKiAoQ0hBUl9XSURUSCk7XG4gICAgICAgICAgICBpZiAoc2hhZG93KSB7XG4gICAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShcbiAgICAgICAgICAgICAgICAgICAgc2hhZG93LFxuICAgICAgICAgICAgICAgICAgICBrICUgQ0hBUlNIRUVUX1dJRFRILFxuICAgICAgICAgICAgICAgICAgICBNYXRoLmZsb29yKGsgLyBDSEFSU0hFRVRfV0lEVEgpICogQ0hBUl9IRUlHSFQsXG4gICAgICAgICAgICAgICAgICAgIENIQVJfV0lEVEgsXG4gICAgICAgICAgICAgICAgICAgIENIQVJfSEVJR0hULFxuICAgICAgICAgICAgICAgICAgICB1ICsgMSxcbiAgICAgICAgICAgICAgICAgICAgdixcbiAgICAgICAgICAgICAgICAgICAgQ0hBUl9XSURUSCAqIHNjYWxlLFxuICAgICAgICAgICAgICAgICAgICBDSEFSX0hFSUdIVCAqIHNjYWxlXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoXG4gICAgICAgICAgICAgICAgZm9udCxcbiAgICAgICAgICAgICAgICBrICUgQ0hBUlNIRUVUX1dJRFRILFxuICAgICAgICAgICAgICAgIE1hdGguZmxvb3IoayAvIENIQVJTSEVFVF9XSURUSCkgKiBDSEFSX0hFSUdIVCxcbiAgICAgICAgICAgICAgICBDSEFSX1dJRFRILFxuICAgICAgICAgICAgICAgIENIQVJfSEVJR0hULFxuICAgICAgICAgICAgICAgIHUsXG4gICAgICAgICAgICAgICAgdixcbiAgICAgICAgICAgICAgICBDSEFSX1dJRFRIICogc2NhbGUsXG4gICAgICAgICAgICAgICAgQ0hBUl9IRUlHSFQgKiBzY2FsZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHUgKz0gQ0hBUl9XSURUSCAqIHNjYWxlO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIC8qXG4gICAgZHJhd1JpZ2h0VGV4dChjdHgsIHRleHQsIHUsIHYsIHNjYWxlID0gMSwgZm9udCA9IFRleHQud2hpdGUsIHNoYWRvdykge1xuICAgICAgICB1IC09IFRleHQubWVhc3VyZVdpZHRoKHRleHQsIHNjYWxlKTtcbiAgICAgICAgVGV4dC5kcmF3VGV4dChjdHgsIHRleHQsIHUsIHYsIHNjYWxlLCBmb250LCBzaGFkb3cpO1xuICAgIH0sXG4gICAgKi9cblxuICAgIG1lYXN1cmVXaWR0aCh0ZXh0LCBzY2FsZSA9IDEpIHtcbiAgICAgICAgcmV0dXJuIHRleHQuc3BsaXQoJycpLnJlZHVjZSgoc3VtLCBjKSA9PiBzdW0gKyBDSEFSX1dJRFRILCAwKSAqIHNjYWxlO1xuICAgIH0sXG5cbiAgICBzcGxpdFBhcmFncmFwaCh0ZXh0LCB3LCBoKSB7XG4gICAgICAgIGxldCBjdSA9IDAsIGN2ID0gMDtcbiAgICAgICAgbGV0IG5leHQgPSAoKSA9PiAoeyB0ZXh0OiAnJywgdTogY3UsIHY6IGN2IH0pO1xuICAgICAgICBsZXQgd2lwID0gbmV4dCgpO1xuICAgICAgICBsZXQgbGlzdCA9IFtdO1xuXG4gICAgICAgIGZvciAobGV0IGMgb2YgdGV4dC5zcGxpdCgnJykpIHtcbiAgICAgICAgICAgIGxldCBjV2lkdGggPSBUZXh0Lm1lYXN1cmVXaWR0aChjLCAxKTtcbiAgICAgICAgICAgIGlmIChjID09PSAnXFxuJyB8fCBjdSArIGNXaWR0aCA+IHcpIHtcbiAgICAgICAgICAgICAgICBsZXQgc2F2ZWQgPSAnJztcbiAgICAgICAgICAgICAgICBpZiAoYyAhPT0gJ1xcbicgJiYgYyAhPT0gJyAnKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBzcGFjZSA9IHdpcC50ZXh0LnNwbGl0KCcgJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzcGFjZS5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzYXZlZCA9IHNwYWNlLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgd2lwLnRleHQgPSBzcGFjZS5qb2luKCcgJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHdpcC50ZXh0Lmxlbmd0aCA+IDApIGxpc3QucHVzaCh3aXApO1xuICAgICAgICAgICAgICAgIGN1ID0gMDtcbiAgICAgICAgICAgICAgICBjdiArPSAoQ0hBUl9IRUlHSFQpO1xuICAgICAgICAgICAgICAgIHdpcCA9IG5leHQoKTtcbiAgICAgICAgICAgICAgICBpZiAoc2F2ZWQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICB3aXAudGV4dCA9IHNhdmVkO1xuICAgICAgICAgICAgICAgICAgICBjdSArPSBUZXh0Lm1lYXN1cmVXaWR0aCh3aXAudGV4dCwgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjdSArPSBjV2lkdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYyAhPT0gJ1xcbicpIHtcbiAgICAgICAgICAgICAgICB3aXAudGV4dCA9IHdpcC50ZXh0ICsgYztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh3aXAudGV4dC5sZW5ndGggPiAwKSBsaXN0LnB1c2god2lwKTtcblxuICAgICAgICByZXR1cm4gbGlzdC5tYXAobGluZSA9PiAoe1xuICAgICAgICAgICAgLi4ubGluZSxcbiAgICAgICAgICAgIHc6IFRleHQubWVhc3VyZVdpZHRoKGxpbmUudGV4dCwgMSksXG4gICAgICAgICAgICBoOiBDSEFSX0hFSUdIVFxuICAgICAgICB9KSk7XG4gICAgfSxcblxuICAgIGRyYXdUZXh0Q29sUm93KHRleHQsIGNvbCwgcm93KSB7XG4gICAgICAgIFRleHQuZHJhd1RleHQoVmlld3BvcnQuY3R4LCBUZXh0LnNwbGl0UGFyYWdyYXBoKHRleHQsIFZpZXdwb3J0LndpZHRoKSwgY29sICogQ0hBUl9XSURUSCwgcm93ICogQ0hBUl9IRUlHSFQsIDEsIFRleHQudGVybWluYWwsIFRleHQudGVybWluYWxfc2hhZG93KTtcbiAgICB9XG59O1xuXG4vLyBUZXh0IHV0aWxpdHkgZnVuY3Rpb25zXG5cbmZ1bmN0aW9uIHJlY29sb3IoZm9udCwgY29sb3IpIHtcbiAgICBsZXQgY2FudmFzID0gY3JlYXRlQ2FudmFzKGZvbnQud2lkdGgsIGZvbnQuaGVpZ2h0KTtcbiAgICBjYW52YXMuY3R4LmZpbGxTdHlsZSA9IGNvbG9yO1xuICAgIGNhbnZhcy5jdHguZmlsbFJlY3QoMCwgMCwgZm9udC53aWR0aCwgZm9udC5oZWlnaHQpO1xuICAgIGNhbnZhcy5jdHguZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gJ2Rlc3RpbmF0aW9uLWluJztcbiAgICBjYW52YXMuY3R4LmRyYXdJbWFnZShmb250LCAwLCAwKTtcbiAgICByZXR1cm4gY2FudmFzLmNhbnZhcztcbn1cbiIsIi8vIHp6ZngoKSAtIHRoZSB1bml2ZXJzYWwgZW50cnkgcG9pbnQgLS0gcmV0dXJucyBhIEF1ZGlvQnVmZmVyU291cmNlTm9kZVxuZXhwb3J0IGNvbnN0IHp6Zng9KC4uLnQpPT56emZ4UCh6emZ4RyguLi50KSlcblxuLy8genpmeFAoKSAtIHRoZSBzb3VuZCBwbGF5ZXIgLS0gcmV0dXJucyBhIEF1ZGlvQnVmZmVyU291cmNlTm9kZVxuZXhwb3J0IGNvbnN0IHp6ZnhQPSguLi50KT0+e2xldCBlPXp6ZnhYLmNyZWF0ZUJ1ZmZlclNvdXJjZSgpLGY9enpmeFguY3JlYXRlQnVmZmVyKHQubGVuZ3RoLHRbMF0ubGVuZ3RoLHp6ZnhSKTt0Lm1hcCgoZCxpKT0+Zi5nZXRDaGFubmVsRGF0YShpKS5zZXQoZCkpLGUuYnVmZmVyPWYsZS5jb25uZWN0KHp6ZnguZGVzdGluYXRpb25fKSxlLnN0YXJ0KCk7cmV0dXJuIGV9XG5cbi8vIHp6ZnhHKCkgLSB0aGUgc291bmQgZ2VuZXJhdG9yIC0tIHJldHVybnMgYW4gYXJyYXkgb2Ygc2FtcGxlIGRhdGFcbmV4cG9ydCBjb25zdCB6emZ4Rz0ocT0xLGs9LjA1LGM9MjIwLGU9MCx0PTAsdT0uMSxyPTAsRj0xLHY9MCx6PTAsdz0wLEE9MCxsPTAsQj0wLHg9MCxHPTAsZD0wLHk9MSxtPTAsQz0wKT0+e2xldCBiPTIqTWF0aC5QSSxIPXYqPTUwMCpiL3p6ZnhSKioyLEk9KDA8eD8xOi0xKSpiLzQsRD1jKj0oMSsyKmsqTWF0aC5yYW5kb20oKS1rKSpiL3p6ZnhSLFo9W10sZz0wLEU9MCxhPTAsbj0xLEo9MCxLPTAsZj0wLHAsaDtlPTk5K3p6ZnhSKmU7bSo9enpmeFI7dCo9enpmeFI7dSo9enpmeFI7ZCo9enpmeFI7eio9NTAwKmIvenpmeFIqKjM7eCo9Yi96emZ4Ujt3Kj1iL3p6ZnhSO0EqPXp6ZnhSO2w9enpmeFIqbHwwO2ZvcihoPWUrbSt0K3UrZHwwO2E8aDtaW2ErK109ZikrK0slKDEwMCpHfDApfHwoZj1yPzE8cj8yPHI/MzxyP01hdGguc2luKChnJWIpKiozKTpNYXRoLm1heChNYXRoLm1pbihNYXRoLnRhbihnKSwxKSwtMSk6MS0oMipnL2IlMisyKSUyOjEtNCpNYXRoLmFicyhNYXRoLnJvdW5kKGcvYiktZy9iKTpNYXRoLnNpbihnKSxmPShsPzEtQytDKk1hdGguc2luKDIqTWF0aC5QSSphL2wpOjEpKigwPGY/MTotMSkqTWF0aC5hYnMoZikqKkYqcSp6emZ4ViooYTxlP2EvZTphPGUrbT8xLShhLWUpL20qKDEteSk6YTxlK20rdD95OmE8aC1kPyhoLWEtZCkvdSp5OjApLGY9ZD9mLzIrKGQ+YT8wOihhPGgtZD8xOihoLWEpL2QpKlpbYS1kfDBdLzIpOmYpLHA9KGMrPXYrPXopKk1hdGguc2luKEUqeC1JKSxnKz1wLXAqQiooMS0xRTkqKE1hdGguc2luKGEpKzEpJTIpLEUrPXAtcCpCKigxLTFFOSooTWF0aC5zaW4oYSkqKjIrMSklMiksbiYmKytuPkEmJihjKz13LEQrPXcsbj0wKSwhbHx8KytKJWx8fChjPUQsdj1ILG49bnx8MSk7cmV0dXJuIFp9XG5cbi8vIHp6ZnhWIC0gZ2xvYmFsIHZvbHVtZVxuZXhwb3J0IGNvbnN0IHp6ZnhWPS4zXG5cbi8vIHp6ZnhSIC0gZ2xvYmFsIHNhbXBsZSByYXRlXG5leHBvcnQgY29uc3QgenpmeFI9NDQxMDBcblxuLy8genpmeFggLSB0aGUgY29tbW9uIGF1ZGlvIGNvbnRleHRcbmV4cG9ydCBjb25zdCB6emZ4WD1uZXcodG9wLkF1ZGlvQ29udGV4dHx8d2Via2l0QXVkaW9Db250ZXh0KTtcblxuLy8gZGVzdGluYXRpb24gZm9yIHp6ZnggYW5kIHp6ZnhtIHNvdW5kc1xuenpmeC5kZXN0aW5hdGlvbl8gPSB6emZ4WC5kZXN0aW5hdGlvbjtcbiIsIid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHsgenpmeEcsIHp6ZnhSIH0gZnJvbSAnLi96emZ4JztcblxuLyoqXG4gKiBaekZYIE11c2ljIFJlbmRlcmVyIHYyLjAuMiBieSBLZWl0aCBDbGFya1xuICovXG5cbi8qKlxuICogQHR5cGVkZWYgQ2hhbm5lbFxuICogQHR5cGUge0FycmF5LjxOdW1iZXI+fVxuICogQHByb3BlcnR5IHtOdW1iZXJ9IDAgLSBDaGFubmVsIGluc3RydW1lbnRcbiAqIEBwcm9wZXJ0eSB7TnVtYmVyfSAxIC0gQ2hhbm5lbCBwYW5uaW5nICgtMSB0byArMSlcbiAqIEBwcm9wZXJ0eSB7TnVtYmVyfSAyIC0gTm90ZVxuICovXG5cbi8qKlxuICogQHR5cGVkZWYgUGF0dGVyblxuICogQHR5cGUge0FycmF5LjxDaGFubmVsPn1cbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIEluc3RydW1lbnRcbiAqIEB0eXBlIHtBcnJheS48TnVtYmVyPn0gWnpGWCBzb3VuZCBwYXJhbWV0ZXJzXG4gKi9cblxuLyoqXG4gKiBHZW5lcmF0ZSBhIHNvbmdcbiAqXG4gKiBAcGFyYW0ge0FycmF5LjxJbnN0cnVtZW50Pn0gaW5zdHJ1bWVudHMgLSBBcnJheSBvZiBaekZYIHNvdW5kIHBhcmFtYXRlcnMuXG4gKiBAcGFyYW0ge0FycmF5LjxQYXR0ZXJuPn0gcGF0dGVybnMgLSBBcnJheSBvZiBwYXR0ZXJuIGRhdGEuXG4gKiBAcGFyYW0ge0FycmF5LjxOdW1iZXI+fSBzZXF1ZW5jZSAtIEFycmF5IG9mIHBhdHRlcm4gaW5kZXhlcy5cbiAqIEBwYXJhbSB7TnVtYmVyfSBbc3BlZWQ9MTI1XSAtIFBsYXliYWNrIHNwZWVkIG9mIHRoZSBzb25nIChpbiBCUE0pLlxuICogQHJldHVybnMge0FycmF5LjxBcnJheS48TnVtYmVyPj59IExlZnQgYW5kIHJpZ2h0IGNoYW5uZWwgc2FtcGxlIGRhdGEuXG4gKi9cblxuZXhwb3J0IGNvbnN0IHp6ZnhNID0gKGluc3RydW1lbnRzLCBwYXR0ZXJucywgc2VxdWVuY2UsIEJQTSA9IDEyNSkgPT4ge1xuICAgIGxldCBpbnN0cnVtZW50UGFyYW1ldGVycyxcbiAgICAgICAgaSxcbiAgICAgICAgaixcbiAgICAgICAgayxcbiAgICAgICAgbm90ZSxcbiAgICAgICAgc2FtcGxlLFxuICAgICAgICBwYXR0ZXJuQ2hhbm5lbCxcbiAgICAgICAgbm90Rmlyc3RCZWF0LFxuICAgICAgICBzdG9wLFxuICAgICAgICBpbnN0cnVtZW50LFxuICAgICAgICBwaXRjaCxcbiAgICAgICAgYXR0ZW51YXRpb24sXG4gICAgICAgIG91dFNhbXBsZU9mZnNldCxcbiAgICAgICAgc2FtcGxlT2Zmc2V0LFxuICAgICAgICBuZXh0U2FtcGxlT2Zmc2V0LFxuICAgICAgICBzYW1wbGVCdWZmZXIgPSBbXSxcbiAgICAgICAgbGVmdENoYW5uZWxCdWZmZXIgPSBbXSxcbiAgICAgICAgcmlnaHRDaGFubmVsQnVmZmVyID0gW10sXG4gICAgICAgIGNoYW5uZWxJbmRleCA9IDAsXG4gICAgICAgIHBhbm5pbmcsXG4gICAgICAgIGhhc01vcmUgPSAxLFxuICAgICAgICBzYW1wbGVDYWNoZSA9IHt9LFxuICAgICAgICBiZWF0TGVuZ3RoID0gKCh6emZ4UiAvIEJQTSkgKiA2MCkgPj4gMjtcblxuICAgIC8vIGZvciBlYWNoIGNoYW5uZWwgaW4gb3JkZXIgdW50aWwgdGhlcmUgYXJlIG5vIG1vcmVcbiAgICBmb3IgKDsgaGFzTW9yZTsgY2hhbm5lbEluZGV4KyspIHtcbiAgICAgICAgLy8gcmVzZXQgY3VycmVudCB2YWx1ZXNcbiAgICAgICAgc2FtcGxlQnVmZmVyID0gWyhoYXNNb3JlID0gbm90Rmlyc3RCZWF0ID0gcGl0Y2ggPSBvdXRTYW1wbGVPZmZzZXQgPSAwKV07XG5cbiAgICAgICAgLy8gZm9yIGVhY2ggcGF0dGVybiBpbiBzZXF1ZW5jZVxuICAgICAgICBzZXF1ZW5jZS5tYXAoKHBhdHRlcm5JbmRleCwgc2VxdWVuY2VJbmRleCkgPT4ge1xuICAgICAgICAgICAgLy8gZ2V0IHBhdHRlcm4gZm9yIGN1cnJlbnQgY2hhbm5lbCwgdXNlIGVtcHR5IDEgbm90ZSBwYXR0ZXJuIGlmIG5vbmUgZm91bmRcbiAgICAgICAgICAgIHBhdHRlcm5DaGFubmVsID0gcGF0dGVybnNbcGF0dGVybkluZGV4XVtjaGFubmVsSW5kZXhdIHx8IFswLCAwLCAwXTtcblxuICAgICAgICAgICAgLy8gY2hlY2sgaWYgdGhlcmUgYXJlIG1vcmUgY2hhbm5lbHNcbiAgICAgICAgICAgIGhhc01vcmUgfD0gISFwYXR0ZXJuc1twYXR0ZXJuSW5kZXhdW2NoYW5uZWxJbmRleF07XG5cbiAgICAgICAgICAgIC8vIGdldCBuZXh0IG9mZnNldCwgdXNlIHRoZSBsZW5ndGggb2YgZmlyc3QgY2hhbm5lbFxuICAgICAgICAgICAgbmV4dFNhbXBsZU9mZnNldCA9XG4gICAgICAgICAgICAgICAgb3V0U2FtcGxlT2Zmc2V0ICtcbiAgICAgICAgICAgICAgICAocGF0dGVybnNbcGF0dGVybkluZGV4XVswXS5sZW5ndGggLSAyIC0gIW5vdEZpcnN0QmVhdCkgKlxuICAgICAgICAgICAgICAgICAgICBiZWF0TGVuZ3RoO1xuXG4gICAgICAgICAgICAvLyBmb3IgZWFjaCBiZWF0IGluIHBhdHRlcm4sIHBsdXMgb25lIGV4dHJhIGlmIGVuZCBvZiBzZXF1ZW5jZVxuICAgICAgICAgICAgZm9yIChcbiAgICAgICAgICAgICAgICBpID0gMiwgayA9IG91dFNhbXBsZU9mZnNldDtcbiAgICAgICAgICAgICAgICBpIDxcbiAgICAgICAgICAgICAgICBwYXR0ZXJuQ2hhbm5lbC5sZW5ndGggKyAoc2VxdWVuY2VJbmRleCA9PSBzZXF1ZW5jZS5sZW5ndGggLSAxKTtcbiAgICAgICAgICAgICAgICBub3RGaXJzdEJlYXQgPSArK2lcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIC8vIDxjaGFubmVsLW5vdGU+XG4gICAgICAgICAgICAgICAgbm90ZSA9IHBhdHRlcm5DaGFubmVsW2ldO1xuXG4gICAgICAgICAgICAgICAgLy8gc3RvcCBpZiBkaWZmZXJlbnQgaW5zdHJ1bWVudCBvciBuZXcgbm90ZVxuICAgICAgICAgICAgICAgIHN0b3AgPSAoaW5zdHJ1bWVudCAhPSAocGF0dGVybkNoYW5uZWxbMF0gfHwgMCkpIHwgbm90ZSB8IDA7XG5cbiAgICAgICAgICAgICAgICAvLyBmaWxsIGJ1ZmZlciB3aXRoIHNhbXBsZXMgZm9yIHByZXZpb3VzIGJlYXQsIG1vc3QgY3B1IGludGVuc2l2ZSBwYXJ0XG4gICAgICAgICAgICAgICAgZm9yIChcbiAgICAgICAgICAgICAgICAgICAgaiA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGogPCBiZWF0TGVuZ3RoICYmIG5vdEZpcnN0QmVhdDtcbiAgICAgICAgICAgICAgICAgICAgLy8gZmFkZSBvZmYgYXR0ZW51YXRpb24gYXQgZW5kIG9mIGJlYXQgaWYgc3RvcHBpbmcgbm90ZSwgcHJldmVudHMgY2xpY2tpbmdcbiAgICAgICAgICAgICAgICAgICAgaisrID4gYmVhdExlbmd0aCAtIDk5ICYmIHN0b3BcbiAgICAgICAgICAgICAgICAgICAgICAgID8gKGF0dGVudWF0aW9uICs9IChhdHRlbnVhdGlvbiA8IDEpIC8gOTkpXG4gICAgICAgICAgICAgICAgICAgICAgICA6IDBcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gY29weSBzYW1wbGUgdG8gc3RlcmVvIGJ1ZmZlcnMgd2l0aCBwYW5uaW5nXG4gICAgICAgICAgICAgICAgICAgIHNhbXBsZSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAoKDEgLSBhdHRlbnVhdGlvbikgKiBzYW1wbGVCdWZmZXJbc2FtcGxlT2Zmc2V0KytdKSAvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgMiB8fCAwO1xuICAgICAgICAgICAgICAgICAgICBsZWZ0Q2hhbm5lbEJ1ZmZlcltrXSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAobGVmdENoYW5uZWxCdWZmZXJba10gfHwgMCkgKyBzYW1wbGUgKiBwYW5uaW5nIC0gc2FtcGxlO1xuICAgICAgICAgICAgICAgICAgICByaWdodENoYW5uZWxCdWZmZXJba10gPVxuICAgICAgICAgICAgICAgICAgICAgICAgKHJpZ2h0Q2hhbm5lbEJ1ZmZlcltrKytdIHx8IDApICtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNhbXBsZSAqIHBhbm5pbmcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgc2FtcGxlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIHNldCB1cCBmb3IgbmV4dCBub3RlXG4gICAgICAgICAgICAgICAgaWYgKG5vdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gc2V0IGF0dGVudWF0aW9uXG4gICAgICAgICAgICAgICAgICAgIGF0dGVudWF0aW9uID0gbm90ZSAlIDE7XG4gICAgICAgICAgICAgICAgICAgIHBhbm5pbmcgPSBwYXR0ZXJuQ2hhbm5lbFsxXSB8fCAwO1xuICAgICAgICAgICAgICAgICAgICBpZiAoKG5vdGUgfD0gMCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGdldCBjYWNoZWQgc2FtcGxlXG4gICAgICAgICAgICAgICAgICAgICAgICBzYW1wbGVCdWZmZXIgPSBzYW1wbGVDYWNoZVtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChpbnN0cnVtZW50ID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdHRlcm5DaGFubmVsWyhzYW1wbGVPZmZzZXQgPSAwKV0gfHwgMCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgICAgICBdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYW1wbGVDYWNoZVtbaW5zdHJ1bWVudCwgbm90ZV1dIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWRkIHNhbXBsZSB0byBjYWNoZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICgoaW5zdHJ1bWVudFBhcmFtZXRlcnMgPSBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmluc3RydW1lbnRzW2luc3RydW1lbnRdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKGluc3RydW1lbnRQYXJhbWV0ZXJzWzJdICo9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDIgKiogKChub3RlIC0gMTIpIC8gMTIpKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB6emZ4RyguLi5pbnN0cnVtZW50UGFyYW1ldGVycykpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyB1cGRhdGUgdGhlIHNhbXBsZSBvZmZzZXRcbiAgICAgICAgICAgIG91dFNhbXBsZU9mZnNldCA9IG5leHRTYW1wbGVPZmZzZXQ7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBbbGVmdENoYW5uZWxCdWZmZXIsIHJpZ2h0Q2hhbm5lbEJ1ZmZlcl07XG59O1xuIiwiZXhwb3J0IGNvbnN0IE9ibGlxdWVNeXN0aXF1ZSA9IFtbWzEuMywwLDIzLCwsLjIsMyw1XSxbMS41LDAsNGUzLCwsLjAzLDIsMS4yNSwsLCwsLjAyLDYuOCwtLjMsLC41XSxbLjcsMCwyMTAwLCwsLjIsMywzLCwsLTQwMCwsLDJdLFssMCw2NTUsLCwuMTEsMiwxLjY1LCwsLCwsMy44LC0uMSwuMV1dLFtbWywtLjUsMTMsLCwsLCwxMywsLCwsLDEzLCwsLCwsMTMsLCwsLCwxMywsLCwxNCwsLCwxMywsLCwsLDEzLCwsLCwsMTMsLCwsLCwxMywsLCwsLDEzLCwsLDE0LCwsLF0sWzEsLjMsMTMsLDEzLCwxMywsMTMsLCwsMTMsLDEzLCwxMywsMTMsLDEzLCwsLDEzLCwxMywsMTMsLDEzLCwxMywsMTMsLDEzLCwxMywsMTMsLCwsMTMsLDEzLCwxMywsMTMsLDEzLCwsLDEzLCwxMywsMTMsLDEzLCwxMywsXSxbMiwxLCwsLCwsLCwsMTMsLCwsLCwsLCwsLCwxMywsLCwsLCwsLCwsLCwsLCwsLCwsMTMsLCwsLCwsLCwsLCwxMywsLCwsLCwsLCwsLF0sWywuNiwsLCwsMTMsLDE4LCwxOSwsLCwsLCwsMTksLDE4LCwsLDE2LCwsLDEzLCwsLCwsLCwsLDEzLCwxOCwsMTksLCwsLCwsLDE4LDE5LDE4LCwsLDEzLDE0LDEzLCwxNiwsMTgsLDE5LCxdLFszLC0xLCwsMTMsLCwsLCwsLCwsLCwxMywsLCwsLCwsLCwsLCwsLCwsLCwsMTMsLCwsLCwsLCwsLCwxMywsLCwsLCwsLCwsLCwsMTMsMTMsMTMsMTNdXSxbWywtLjUsMTMsLCwsLCwxMywsLCwsLDEzLCwsLCwsMTMsLCwsLCwxMywsLCwxNCwsLCwxMywsLCwsLDEzLCwsLCwsMTMsLCwsLCwxMywsLCwsLDEzLCwsLDE0LCwsLF0sWzEsLjMsMTMsLDEzLCwxMywsMTMsLCwsMTMsLDEzLCwxMywsMTMsLDEzLCwsLDEzLCwxMywsMTMsLDEzLCwxMywsMTMsLDEzLCwxMywsMTMsLCwsMTMsLDEzLCwxMywsMTMsLDEzLCwsLDEzLCwxMywsMTMsLDEzLCwxMywsXSxbMiwxLCwsLCwsLCwsMTMsLCwsLCwsLCwsLCwxMywsLCwsLCwsLCwsLCwsLCwsLCwsMTMsLCwsLCwsLCwsLCwxMywsLCwsLCwsLCwsLF1dXSxbMSwxLDAsMCwwLDAsMSwwXSwsXVxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgeyB6emZ4LCB6emZ4UCwgenpmeFggfSBmcm9tICcuL2xpYi96emZ4JztcbmltcG9ydCB7IHp6ZnhNIH0gZnJvbSAnLi9saWIvenpmeG0nO1xuaW1wb3J0IHsgT2JsaXF1ZU15c3RpcXVlIH0gZnJvbSAnLi9zb25ncy9PYmxpcXVlTXlzdGlxdWUnO1xuXG5leHBvcnQgY29uc3QgQXVkaW8gPSB7XG4gICAgaW5pdCgpIHtcbiAgICAgICAgQXVkaW8ucmVhZHlUb1BsYXkgPSBmYWxzZTtcblxuICAgICAgICBBdWRpby5jdHggPSB6emZ4WDtcbiAgICAgICAgQXVkaW8uZ2Fpbl8gPSBBdWRpby5jdHguY3JlYXRlR2FpbigpO1xuICAgICAgICBBdWRpby5nYWluXy5jb25uZWN0KEF1ZGlvLmN0eC5kZXN0aW5hdGlvbik7XG4gICAgICAgIHp6ZnguZGVzdGluYXRpb25fID0gQXVkaW8uZ2Fpbl87XG5cbiAgICAgICAgQXVkaW8uc2hvdGd1biA9IFssMC4wMSwxNDAsMC4wMSwwLjAyLDAuNDUsNCwyLjQyLDAuMSwtMC4xLCwsLDEuMiwsMC4zLDAuMDQsMC44LDAuMDJdO1xuICAgICAgICBBdWRpby5wYWdlID0gWywsMTIzMywsLjAxLC4yLDEsMS40MywsLDUzOSwuMSwsLCwsLC41MSwuMDMsLjAxXTtcbiAgICAgICAgQXVkaW8uc2hlbGxSZWxvYWQgPSBbLCw2OCwwLjAxLCwwLjE0LDEsMS41Myw3LjUsMC4xLDUwLDAuMDIsLTAuMDEsLTAuMiwwLjEsMC4yLCwwLjQ3LDAuMDFdO1xuICAgICAgICBBdWRpby5kYW1hZ2UgPSBbLCwzOTEsLC4xOSwuMDEsMiwuNTQsLTQsMjAsLCwsLCwsLjAyLC45XTtcbiAgICAgICAgQXVkaW8uYWxhcm0gPSBbLCw5NzAsLjEyLC4yNSwuMzUsLC4zOSw4LjEsLDEwLC4xLC4yLCwuMSwsLC42LC4wOSwuMTNdO1xuICAgICAgICAvLyBbLCw5NjEsLjA1LC4wNiwxLjE3LDEsNC42NywuOCwsLCwsLjgsLTAuOCwuMSwuNDksLjYyLC4wOV07XG4gICAgICAgIEF1ZGlvLnZpY3RvcnkgPSBbLCw0NTQsLjA2LC44NiwuNzEsMiwuNjMsLTAuNywxLjcsLTgzLC4wOSwuMjcsLjMsLjIsLC4xOCwuOTUsLjAyLC4wMl07XG4gICAgICAgIEF1ZGlvLnNvbmcgPSB6emZ4TSguLi5PYmxpcXVlTXlzdGlxdWUpO1xuXG4gICAgICAgIC8vIFNhdmUgb3VyIGJhY2tncm91bmQgbXVzaWMgaW4gb3MxM2ssIGZvciBmdW4hXG4gICAgICAgIC8vbG9jYWxTdG9yYWdlW2BPUzEza011c2ljLCR7VElUTEV9IC0gT2JsaXF1ZSBNeXN0aXF1ZWBdID0gSlNPTi5zdHJpbmdpZnkoT2JsaXF1ZU15c3RpcXVlKTtcbiAgICB9LFxuXG4gICAgdXBkYXRlKCkge1xuICAgICAgICBpZiAoIUF1ZGlvLnJlYWR5VG9QbGF5KSByZXR1cm47XG5cbiAgICAgICAgaWYgKCFBdWRpby5tdXNpY1BsYXlpbmcpIHtcbiAgICAgICAgICAgIC8vQXVkaW8uYmdtdXNpY25vZGUgPSB6emZ4UCguLi5BdWRpby5zb25nKTtcbiAgICAgICAgICAgIC8vQXVkaW8uYmdtdXNpY25vZGUubG9vcCA9IHRydWU7XG4gICAgICAgICAgICBBdWRpby5tdXNpY1BsYXlpbmcgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIHBsYXkoc291bmQpIHtcbiAgICAgICAgaWYgKCFBdWRpby5yZWFkeVRvUGxheSkgcmV0dXJuO1xuICAgICAgICB6emZ4KC4uLnNvdW5kKTtcbiAgICB9LFxuXG4gICAgLy8gSXQncyBpbXBvcnRhbnQgd2UgZG8gcGF1c2luZyBhbmQgdW5wYXVzaW5nIGFzIHNwZWNpZmljIGV2ZW50cyBhbmQgbm90IGluIGdlbmVyYWwgdXBkYXRlKCksXG4gICAgLy8gYmVjYXVzZSB1cGRhdGUoKSBpcyB0cmlnZ2VyZWQgYnkgdGhlIGFuaW1hdGlvbiBmcmFtZSB0cmlnZ2VyIHdoaWNoIGRvZXMgbm90IHJ1biBpZiB0aGVcbiAgICAvLyBwYWdlIGlzIG5vdCB2aXNpYmxlLiAoU28sIGlmIHlvdSB3YW50IHRoZSBtdXNpYyB0byBmYWRlIGluIHRoZSBiYWNrZ3JvdW5kLCBmb3IgZXhhbXBsZSxcbiAgICAvLyB0aGF0J3Mgbm90IGhlbHBmdWwgaWYgaXQgd29uJ3Qgd29yayBiZWNhdXNlIHlvdSBhcmVuJ3QgbG9va2luZyBhdCB0aGUgcGFnZSEpXG5cbiAgICBwYXVzZSgpIHtcbiAgICAgICAgQXVkaW8uZ2Fpbl8uZ2Fpbi5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZSgwLCBBdWRpby5jdHguY3VycmVudFRpbWUgKyAxKTtcbiAgICB9LFxuXG4gICAgdW5wYXVzZSgpIHtcbiAgICAgICAgQXVkaW8uZ2Fpbl8uZ2Fpbi5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZSgxLCBBdWRpby5jdHguY3VycmVudFRpbWUgKyAxKTtcbiAgICB9XG59O1xuIiwiLyoqXG4gKiBgU2NyZWVuYCBpcyBhIHNpbmdsZXRvbiB0aGF0IHJlcHJlc2VudHMgdGhlIHZpcnR1YWwgODB4MjUgY2hhcmFjdGVyIHNjcmVlbiBvdXIgZ2FtZVxuICogbGl2ZXMgaW4uIENvbXBvbmVudHMgbGlrZSBQbGF5aW5nRmllbGQgd2lsbCBcImRyYXdcIiAod3JpdGUgdGV4dCBvbnRvKSB0aGlzIHZpcnR1YWxcbiAqIHNjcmVlbiBlYWNoIGZyYW1lLiBPbmNlIGFsbCB0aGUgdGV4dCBpcyB3cml0dGVuLCB0aGUgdGV4dCB3aWxsIGVuZCB1cCByZW5kZXJlZCBvblxuICogdGhlIHZpZXdwb3J0IChjYW52YXMpIGluIHRoZSBicm93c2VyLlxuICovXG5cbmltcG9ydCB7IFNDUkVFTl9XSURUSCwgU0NSRUVOX0hFSUdIVCB9IGZyb20gJy4vQ29uc3RhbnRzJztcbmltcG9ydCB7IFZpZXdwb3J0IH0gZnJvbSAnLi9WaWV3cG9ydCc7XG5pbXBvcnQgeyBUZXh0IH0gZnJvbSAnLi9UZXh0JztcblxuZXhwb3J0IGNvbnN0IFNjcmVlbiA9IHtcbiAgICBpbml0KCkge1xuICAgICAgICB0aGlzLnNjcmVlbiA9IFtdO1xuICAgICAgICBmb3IgKGxldCB5ID0gMDsgeSA8IFNDUkVFTl9IRUlHSFQ7IHkrKykge1xuICAgICAgICAgICAgdGhpcy5zY3JlZW4ucHVzaChbXSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jbGVhcigpO1xuICAgIH0sXG5cbiAgICBjbGVhcigpIHtcbiAgICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCBTQ1JFRU5fSEVJR0hUOyB5KyspIHtcbiAgICAgICAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgU0NSRUVOX1dJRFRIOyB4KyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNjcmVlblt5XVt4XSA9ICcgJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICB3cml0ZSh4LCB5LCB0ZXh0KSB7XG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheSh0ZXh0KSkgdGV4dCA9IFt0ZXh0XTtcblxuICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRleHQubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGV4dFtqXS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2NyZWVuW3kgKyBqXVt4ICsgaV0gPSB0ZXh0W2pdW2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcblxuICAgIGRyYXdUb1ZpZXdwb3J0KCkge1xuICAgICAgICBsZXQgdGV4dCA9IHRoaXMuc2NyZWVuLm1hcChyb3cgPT4gcm93LmpvaW4oJycpKS5qb2luKCdcXG4nKTtcblxuICAgICAgICBUZXh0LmRyYXdUZXh0KFxuICAgICAgICAgICAgVmlld3BvcnQuY3R4LFxuICAgICAgICAgICAgVGV4dC5zcGxpdFBhcmFncmFwaCh0ZXh0LCBWaWV3cG9ydC53aWR0aCksXG4gICAgICAgICAgICAwLCAwLFxuICAgICAgICAgICAgMSxcbiAgICAgICAgICAgIFRleHQudGVybWluYWwsIFRleHQudGVybWluYWxfc2hhZG93XG4gICAgICAgICk7XG4gICAgfVxufTtcbiIsImltcG9ydCB7IFNjcmVlbiB9IGZyb20gJy4vU2NyZWVuJztcbmltcG9ydCB7IEdhbWUgfSBmcm9tICcuL0dhbWUnO1xuaW1wb3J0IHsgUExBWV9TUEVFRFMgfSBmcm9tICcuL0NvbnN0YW50cyc7XG5pbXBvcnQgeyBJbnB1dCB9IGZyb20gJy4vSW5wdXQnO1xuXG5leHBvcnQgY2xhc3MgTWFpbk1lbnUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgIH1cblxuICAgIHVwZGF0ZSgpIHtcbiAgICAgICAgc3dpdGNoIChJbnB1dC5sYXN0S2V5UHJlc3NlZCgpLnRvVXBwZXJDYXNlKCkpIHtcbiAgICAgICAgICAgIGNhc2UgJ1AnOlxuICAgICAgICAgICAgICAgIElucHV0LmNvbnN1bWUoKTtcbiAgICAgICAgICAgICAgICBHYW1lLnN0YXJ0U2Vzc2lvbigpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnTCc6XG4gICAgICAgICAgICAgICAgSW5wdXQuY29uc3VtZSgpO1xuICAgICAgICAgICAgICAgIEdhbWUucGxheVNwZWVkID0gKEdhbWUucGxheVNwZWVkICsgMSkgJSBQTEFZX1NQRUVEUy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdJJzpcbiAgICAgICAgICAgICAgICBJbnB1dC5jb25zdW1lKCk7XG4gICAgICAgICAgICAgICAgR2FtZS5zaG93SW5zdHJ1Y3Rpb25zKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdFJzpcbiAgICAgICAgICAgICAgICBJbnB1dC5jb25zdW1lKCk7XG4gICAgICAgICAgICAgICAgR2FtZS5zaG93SW5zdHJ1Y3Rpb25zKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBkcmF3KCkge1xuICAgICAgICBsZXQgdmVyc2lvbiA9ICc/JztcbiAgICAgICAgbGV0IHRlcm1pbmFsID0gJz8nO1xuXG4gICAgICAgIGxldCBoaWdoU2NvcmVzID0gW1xuICAgICAgICAgICAgYDEpIDYwMDAgIEJvYmAsXG4gICAgICAgICAgICBgMikgNjAwMCAgVG9tYCxcbiAgICAgICAgICAgIGAzKSA0MDAwICBXYXluZWAsXG4gICAgICAgICAgICBgYCxcbiAgICAgICAgICAgIGBgXG4gICAgICAgIF07XG5cbiAgICAgICAgU2NyZWVuLmNsZWFyKCk7XG4gICAgICAgIFNjcmVlbi53cml0ZSgwLCAwLCBbXG4gICAgICAgICAgICBgICAgICAgICAgICAgICAgTEwgICAgICAgICAgICAgICAgICAgICBkZCAgICAgICBkZGAsXG4gICAgICAgICAgICBgICAgICAgICAgICAgICAgTEwgICAgICAgICAgICAgICAgICAgICBkZCAgICAgICBkZCAgICAgICAgICAgICAgICAgICAgICB0bWAsXG4gICAgICAgICAgICBgICAgICAgICAgICAgICAgTEwgICAgICAgICBhYWFhICAgICBkZGRkZCAgICBkZGRkZCAgICBlZWVlICAgcnJycnJycmAsXG4gICAgICAgICAgICBgICAgICAgICAgICAgICAgTEwgICAgICAgIGFhICBhYSAgIGRkICBkZCAgIGRkICBkZCAgIGVlICBlZSAgcnIgICAgcnJgLFxuICAgICAgICAgICAgYCAgICAgICAgICAgICAgIExMICAgICAgICBhYSAgYWEgICBkZCAgZGQgICBkZCAgZGQgICBlZWVlZWUgIHJyYCxcbiAgICAgICAgICAgIGAgICAgICAgICAgICAgICBMTCAgICAgICAgYWEgIGFhICAgZGQgIGRkICAgZGQgIGRkICAgZWUgICAgICBycmAsXG4gICAgICAgICAgICBgICAgICAgICAgICAgICAgTExMTExMTEwgICBhYWEgYWEgICBkZGQgZGQgICBkZGQgZGQgICBlZWVlICAgcnJgLFxuICAgICAgICAgICAgYGAsXG4gICAgICAgICAgICBgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVmVyc2lvbjogICAgJHt2ZXJzaW9ufWAsXG4gICAgICAgICAgICBgKGMpIDE5ODIsIDE5ODMgWWFob28gU29mdHdhcmUgICAgICAgICAgVGVybWluYWw6ICAgJHt0ZXJtaW5hbH1gLFxuICAgICAgICAgICAgYDEwOTcwIEFzaHRvbiBBdmUuICBTdWl0ZSAzMTIgICAgICAgICAgIFBsYXkgc3BlZWQ6ICR7R2FtZS5wbGF5U3BlZWQgKyAxfSAvICR7UExBWV9TUEVFRFMubGVuZ3RofWAsXG4gICAgICAgICAgICBgTG9zIEFuZ2VsZXMsIENhICA5MDAyNCAgICAgICAgICAgICAgICAgTW92ZSA9IOKGkeKGk+KGkOKGki9XQVNELCBKdW1wID0gU3BhY2UsYCxcbiAgICAgICAgICAgIGAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdG9wID0gT3RoZXJgLFxuICAgICAgICAgICAgYGAsXG4gICAgICAgICAgICBgUCA9IFBsYXkgZ2FtZSAgICAgICAgICAgICAgICAgICAgICAgICAgSGlnaCBTY29yZXNgLFxuICAgICAgICAgICAgYEwgPSBDaGFuZ2UgbGV2ZWwgb2YgZGlmZmljdWx0eSAgICAgICAgICR7aGlnaFNjb3Jlc1swXX1gLFxuICAgICAgICAgICAgYEMgPSBDb25maWd1cmUgTGFkZGVyICAgICAgICAgICAgICAgICAgICR7aGlnaFNjb3Jlc1sxXX1gLFxuICAgICAgICAgICAgYEkgPSBJbnN0cnVjdGlvbnMgICAgICAgICAgICAgICAgICAgICAgICR7aGlnaFNjb3Jlc1syXX1gLFxuICAgICAgICAgICAgYEUgPSBFeGl0IExhZGRlciAgICAgICAgICAgICAgICAgICAgICAgICR7aGlnaFNjb3Jlc1szXX1gLFxuICAgICAgICAgICAgYCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7aGlnaFNjb3Jlc1s0XX1gLFxuICAgICAgICAgICAgYGAsXG4gICAgICAgICAgICBgRW50ZXIgb25lIG9mIHRoZSBhYm92ZTpgXG4gICAgICAgIF0pO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IFNjcmVlbiB9IGZyb20gJy4vU2NyZWVuJztcbmltcG9ydCB7IEdhbWUgfSBmcm9tICcuL0dhbWUnO1xuaW1wb3J0IHsgSW5wdXQgfSBmcm9tICcuL0lucHV0JztcblxuZXhwb3J0IGNsYXNzIEluc3RydWN0aW9uc01lbnUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgIH1cblxuICAgIHVwZGF0ZSgpIHtcbiAgICAgICAgaWYgKElucHV0Lmxhc3RLZXlQcmVzc2VkKCkudG9VcHBlckNhc2UoKSAhPT0gJycpIHtcbiAgICAgICAgICAgIElucHV0LmNvbnN1bWUoKTtcbiAgICAgICAgICAgIEdhbWUuc2hvd01haW5NZW51KCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBkcmF3KCkge1xuICAgICAgICBTY3JlZW4uY2xlYXIoKTtcbiAgICAgICAgU2NyZWVuLndyaXRlKDAsIDAsIFtcbiAgICAgICAgICAgIGBZb3UgYXJlIGEgTGFkIHRyYXBwZWQgaW4gYSBtYXplLiAgWW91ciBtaXNzaW9uIGlzIGlzIHRvIGV4cGxvcmUgdGhlYCxcbiAgICAgICAgICAgIGBkYXJrIGNvcnJpZG9ycyBuZXZlciBiZWZvcmUgc2VlbiBieSBodW1hbiBleWVzIGFuZCBmaW5kIGhpZGRlbmAsXG4gICAgICAgICAgICBgdHJlYXN1cmVzIGFuZCByaWNoZXMuYCxcbiAgICAgICAgICAgIGBgLFxuICAgICAgICAgICAgYFlvdSBjb250cm9sIExhZCBieSB0eXBpbmcgdGhlIGRpcmVjdGlvbiBidXR0b25zIGFuZCBqdW1waW5nIGJ5YCxcbiAgICAgICAgICAgIGB0eXBpbmcgU1BBQ0UuICBCdXQgYmV3YXJlIG9mIHRoZSBmYWxsaW5nIHJvY2tzIGNhbGxlZCBEZXIgcm9ja3MuYCxcbiAgICAgICAgICAgIGBZb3UgbXVzdCBmaW5kIGFuZCBncmFzcCB0aGUgdHJlYXN1cmVzIChzaG93biBhcyAkKSBCRUZPUkUgdGhlYCxcbiAgICAgICAgICAgIGBib251cyB0aW1lIHJ1bnMgb3V0LmAsXG4gICAgICAgICAgICBgYCxcbiAgICAgICAgICAgIGBBIG5ldyBMYWQgd2lsbCBiZSBhd2FyZGVkIGZvciBldmVyeSAxMCwwMDAgcG9pbnRzLmAsXG4gICAgICAgICAgICBgRXh0cmEgcG9pbnRzIGFyZSBhd2FyZGVkIGZvciB0b3VjaGluZyB0aGUgZ29sZGAsXG4gICAgICAgICAgICBgc3RhdHVlcyAoc2hvd24gYXMgJikuICBZb3Ugd2lsbCByZWNlaXZlIHRoZSBib251cyB0aW1lIHBvaW50c2AsXG4gICAgICAgICAgICBgdGhhdCBhcmUgbGVmdCB3aGVuIHlvdSBoYXZlIGZpbmlzaGVkIHRoZSBsZXZlbC5gLFxuICAgICAgICAgICAgYGAsXG4gICAgICAgICAgICBgVHlwZSBhbiBFU0NhcGUgdG8gcGF1c2UgdGhlIEdhbWVgLFxuICAgICAgICAgICAgYGAsXG4gICAgICAgICAgICBgUmVtZW1iZXIsIHRoZXJlIGlzIG1vcmUgdGhhbiBvbmUgd2F5IHRvIHNraW4gYSBjYXQuIChDaHVtKWAsXG4gICAgICAgICAgICBgYCxcbiAgICAgICAgICAgIGBHb29kIGx1Y2sgTGFkLmAsXG4gICAgICAgICAgICBgYCxcbiAgICAgICAgICAgIGBgLFxuICAgICAgICAgICAgYGAsXG4gICAgICAgICAgICBgVHlwZSBSRVRVUk4gdG8gcmV0dXJuIHRvIG1haW4gbWVudTpgXG4gICAgICAgIF0pO1xuICAgIH1cbn1cbiIsIlxuLy8gVGhpcyBpcyBvdXIgbGlzdCBvZiBTVEFURVMuIEVhY2ggZW50aXR5IHN0YXJ0cyBvdXQgaW4gb25lIG9mIHRoZXNlIHN0YXRlcyBhbmQgY2FuIG1vdmUgYmV0d2VlblxuLy8gdGhlbSBiYXNlZCBvbiBldmVudHMgdGhhdCBoYXBwZW4gaW4gdGhlIEdhbWUgKE5vdGUgdGhhdCBzb21lIG9mIHRoZXNlIGFyZSBkaXJlY3Rpb25zLCBidXRcbi8vIHNpbmNlIGFuIGVudGl0eSBrZWVwcyBtb3ZpbmcgaW4gdGhlIGRpcmVjdGlvbiBpdCBpcyBnb2luZyB1bmxlc3Mgc3RvcHBlZCwgZGlyZWN0aW9ucyBhcmVcbi8vIHN0YXRlcyBpbiB0aGlzIEdhbWUpXG5leHBvcnQgY29uc3QgU3RhdGUgPSB7XG4gICAgU1RPUFBFRDogICAgMSwgICAgICAgICAvLyBTdGFuZGluZyBzdGlsbFxuICAgIFVQOiAgICAgICAgIDIsICAgICAgICAgLy8gTW92aW5nIHVwIChwbGF5ZXIgb25seSlcbiAgICBMRUZUOiAgICAgICAzLCAgICAgICAgIC8vIE1vdmluZyBsZWZ0XG4gICAgRE9XTjogICAgICAgNCwgICAgICAgICAvLyBNb3ZpbmcgZG93blxuICAgIFJJR0hUOiAgICAgIDUsICAgICAgICAgLy8gTW92aW5nIHJpZ2h0XG4gICAgRkFMTElORzogICAgNiwgICAgICAgICAvLyBGYWxsaW5nXG4gICAgU1RBUlRfSlVNUDogNywgICAgICAgICAvLyBBYm91dCB0byBzdGFydCBhIGp1bXAgKHBsYXllciBvbmx5KVxuICAgIEpVTVBfTEVGVDogIDgsICAgICAgICAgLy8gSnVtcGluZyBsZWZ0IChwbGF5ZXIgb25seSlcbiAgICBKVU1QX1JJR0hUOiA5LCAgICAgICAgIC8vIEp1bXBpbmcgcmlnaHQgKHBsYXllciBvbmx5KVxuICAgIEpVTVBfVVA6ICAgIDEwLCAgICAgICAgLy8gSnVtcGluZyBzdHJhaWdodCB1cCAocGxheWVyIG9ubHkpXG4gICAgRFlJTkc6ICAgICAgMTEsICAgICAgICAvLyBEeWluZyAodXNlZCBhcyBhIGRlYXRoIGFuaW1hdGlvbilcbiAgICBERUFEOiAgICAgICAxMiAgICAgICAgIC8vIERlYWQgKGZvciBwbGF5ZXIsIHJlc3RhcnQgbGV2ZWw7IGZvciByb2NrLCBkaXNhcHBlYXIpXG59O1xuXG5leHBvcnQgY29uc3QgSlVNUF9GUkFNRVMgPSB7XG4gICAgW1N0YXRlLkpVTVBfUklHSFRdOiBbXG4gICAgICAgIHsgeDogMSwgeTogLTEgfSxcbiAgICAgICAgeyB4OiAxLCB5OiAtMSB9LFxuICAgICAgICB7IHg6IDEsIHk6IDAgfSxcbiAgICAgICAgeyB4OiAxLCB5OiAwIH0sXG4gICAgICAgIHsgeDogMSwgeTogMSB9LFxuICAgICAgICB7IHg6IDEsIHk6IDEgfVxuICAgIF0sXG4gICAgW1N0YXRlLkpVTVBfTEVGVF06IFtcbiAgICAgICAgeyB4OiAtMSwgeTogLTEgfSxcbiAgICAgICAgeyB4OiAtMSwgeTogLTEgfSxcbiAgICAgICAgeyB4OiAtMSwgeTogMCB9LFxuICAgICAgICB7IHg6IC0xLCB5OiAwIH0sXG4gICAgICAgIHsgeDogLTEsIHk6IDEgfSxcbiAgICAgICAgeyB4OiAtMSwgeTogMSB9XG4gICAgXSxcbiAgICBbU3RhdGUuSlVNUF9VUF06IFtcbiAgICAgICAgeyB4OiAwLCB5OiAtMSB9LFxuICAgICAgICB7IHg6IDAsIHk6IC0xIH0sXG4gICAgICAgIHsgeDogMCwgeTogMCB9LFxuICAgICAgICB7IHg6IDAsIHk6IDEgfSxcbiAgICAgICAgeyB4OiAwLCB5OiAxIH0sXG4gICAgICAgIHsgeDogMCwgeTogMCB9XG4gICAgXSxcbn07XG4iLCJpbXBvcnQgeyBTdGF0ZSwgSlVNUF9GUkFNRVMgfSBmcm9tICcuL0JlaGF2aW9yJztcbmltcG9ydCB7IExFVkVMX0NPTFMgfSBmcm9tICcuL0NvbnN0YW50cyc7XG5cbmV4cG9ydCBjbGFzcyBFbnRpdHkge1xuICAgIGFwcGx5TW92ZW1lbnQoZmllbGQpIHtcbiAgICAgICAgbGV0IHJlcGVhdCA9IGZhbHNlO1xuXG4gICAgICAgIC8vIFRoaXMgbWV0aG9kIGNvbnRhaW5zIGdlbmVyaWMgXCJtb3ZlbWVudFwiIGFwcGxpY2F0aW9uIGZvciBhbGwgZW50aXRpZXMsIGluY2x1ZGluZ1xuICAgICAgICAvLyBMYWQgKHBsYXllcikgYW5kIERlciBSb2NrcyAoZW5lbWllcykuIFRoaW5ncyBsaWtlIGZhbGxpbmcsIG1vdmluZyBsZWZ0L3JpZ2h0LCBldGMuLFxuICAgICAgICAvLyB3b3JrIHRoZSBzYW1lIGZvciBib3RoLlxuICAgICAgICAvL1xuICAgICAgICAvLyAoVGhlcmUncyBhIGJ1bmNoIG9mIGp1bXAgbG9naWMgaW4gaGVyZSB0b28sIGFuZCBtb3ZpbmcgVVAsIHdoaWNoIHJlYWxseSBvbmx5IGFwcGxpZXNcbiAgICAgICAgLy8gdG8gcGxheWVycywgYnV0IHRoYXQncyBPSyAtLSBEZXIgUm9ja3MganVzdCB3b24ndCBhdHRlbXB0IHRob3NlIGFjdGlvbnMuKVxuXG4gICAgICAgIGlmICh0aGlzLm5leHRTdGF0ZSkge1xuICAgICAgICAgICAgc3dpdGNoICh0aGlzLnN0YXRlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBTdGF0ZS5TVE9QUEVEOlxuICAgICAgICAgICAgICAgIGNhc2UgU3RhdGUuTEVGVDpcbiAgICAgICAgICAgICAgICBjYXNlIFN0YXRlLlJJR0hUOlxuICAgICAgICAgICAgICAgICAgICBpZiAoW1N0YXRlLkxFRlQsIFN0YXRlLlJJR0hULCBTdGF0ZS5TVE9QUEVEXS5pbmNsdWRlcyh0aGlzLm5leHRTdGF0ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSB0aGlzLm5leHRTdGF0ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubmV4dFN0YXRlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSBTdGF0ZS5VUDpcbiAgICAgICAgICAgICAgICBjYXNlIFN0YXRlLkRPV046XG4gICAgICAgICAgICAgICAgICAgIC8vIE5vcm1hbFxuICAgICAgICAgICAgICAgICAgICBpZiAoW1N0YXRlLkxFRlQsIFN0YXRlLlJJR0hUXS5pbmNsdWRlcyh0aGlzLm5leHRTdGF0ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSB0aGlzLm5leHRTdGF0ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubmV4dFN0YXRlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMubmV4dFN0YXRlID09PSBTdGF0ZS5TVEFSVF9KVU1QKSB7XG4gICAgICAgICAgICAvLyBTcGVjaWFsIGNhc2U6IHRoZSB1c2VyIHdhbnRzIHRvIGp1bXAhXG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gSWYgdGhlIHBsYXllciBpcyBzdGFuZGluZyBvbiBzb21ldGhpbmcgc29saWQsIHdlIGluaXRpYXRlIGEganVtcCBiYXNlZCBvbiB0aGUgY3VycmVudFxuICAgICAgICAgICAgLy8gbW92ZW1lbnQgb2YgdGhlIHBsYXllci4gSWYgbm90LCB3ZSAoc29ydCBvZikgaWdub3JlIHRoZSByZXF1ZXN0IHRvIGp1bXAuLi4gYWx0aG91Z2hcbiAgICAgICAgICAgIC8vIGl0IGRvZXMgc3VidGx5IGNoYW5nZSB0aGUgYmVoYXZpb3IgdXBvbiBsYW5kaW5nLlxuICAgICAgICAgICAgaWYgKGZpZWxkLm9uU29saWQodGhpcy54LCB0aGlzLnkpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUgPT09IFN0YXRlLlNUT1BQRUQgfHwgdGhpcy5zdGF0ZSA9PT0gU3RhdGUuRkFMTElORykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlID0gU3RhdGUuSlVNUF9VUDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5qdW1wU3RlcCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmV4dFN0YXRlID0gU3RhdGUuU1RPUFBFRDtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc3RhdGUgPT09IFN0YXRlLkxFRlQgfHwgdGhpcy5zdGF0ZSA9PT0gU3RhdGUuSlVNUF9MRUZUKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTdGF0ZS5KVU1QX0xFRlQ7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuanVtcFN0ZXAgPSAwO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm5leHRTdGF0ZSA9IFN0YXRlLkxFRlQ7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnN0YXRlID09PSBTdGF0ZS5SSUdIVCB8fCB0aGlzLnN0YXRlID09PSBTdGF0ZS5KVU1QX1JJR0hUKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTdGF0ZS5KVU1QX1JJR0hUO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmp1bXBTdGVwID0gMDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0U3RhdGUgPSBTdGF0ZS5SSUdIVDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlID09PSBTdGF0ZS5KVU1QX1VQIHx8IHRoaXMuc3RhdGUgPT09IFN0YXRlLkZBTExJTkcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0U3RhdGUgPSBTdGF0ZS5TVE9QUEVEO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0ZSA9PT0gU3RhdGUuSlVNUF9SSUdIVCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm5leHRTdGF0ZSA9IFN0YXRlLlJJR0hUO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0ZSA9PT0gU3RhdGUuSlVNUF9MRUZUKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmV4dFN0YXRlID0gU3RhdGUuTEVGVDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5uZXh0U3RhdGUgPT09IFN0YXRlLlVQICYmIGZpZWxkLmlzTGFkZGVyKHRoaXMueCwgdGhpcy55KSkge1xuICAgICAgICAgICAgLy8gU3BlY2lhbCBjYXNlOiB0aGUgdXNlciB3YW50cyB0byBnbyB1cCFcbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAvLyBJZiB0aGUgdXNlciBpcyBvbiBhIGxhZGRlciwgd2UgY2FuIHN0YXJ0IGFzY2VuZGluZy4gTm90ZSB0aGF0IGlmIHRoZSB1c2VyIGlzIG5vdFxuICAgICAgICAgICAgLy8gb24gYSBsYWRkZXIgd2UgaWdub3JlIHRoZWlyIGlucHV0LCB3aGljaCBpcyBpbnRlbnRpb25hbCAtLSB0aGlzIGFsbG93cyBxdWV1ZWRcbiAgICAgICAgICAgIC8vIChwYWNtYW4pIGlucHV0LCB3aGVyZSB3ZSBjYW4gdGFwIFVQIGEgbGl0dGxlIGJlZm9yZSByZWFjaGluZyB0aGUgbGFkZGVyLlxuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFN0YXRlLlVQO1xuICAgICAgICAgICAgdGhpcy5uZXh0U3RhdGUgPSB1bmRlZmluZWQ7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5uZXh0U3RhdGUgPT09IFN0YXRlLkRPV04gJiYgKGZpZWxkLmlzTGFkZGVyKHRoaXMueCwgdGhpcy55KSB8fCBmaWVsZC5pc0xhZGRlcih0aGlzLngsIHRoaXMueSArIDEpKSkge1xuICAgICAgICAgICAgLy8gU3BlY2lhbCBjYXNlOiB0aGUgcGxheWVyIHdhbnRzIHRvIGdvIGRvd24hXG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gSWYgdGhlIHBsYXllciBpcyBvbiAob3IgYWJvdmUpIGEgbGFkZGVyLCB3ZSBjYW4gc3RhcnQgZGVzY2VuZGluZy4gTm90ZSB0aGF0IGlmIHRoZSBwbGF5ZXIgaXMgbm90XG4gICAgICAgICAgICAvLyBvbiBhIGxhZGRlciB3ZSBpZ25vcmUgdGhlaXIgaW5wdXQsIHdoaWNoIGlzIGludGVudGlvbmFsIC0tIHRoaXMgYWxsb3dzIHF1ZXVlZFxuICAgICAgICAgICAgLy8gKHBhY21hbikgaW5wdXQsIHdoZXJlIHdlIGNhbiB0YXAgRE9XTiBhIGxpdHRsZSBiZWZvcmUgcmVhY2hpbmcgdGhlIGxhZGRlci5cbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTdGF0ZS5ET1dOO1xuICAgICAgICAgICAgdGhpcy5uZXh0U3RhdGUgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cblxuICAgICAgICBzd2l0Y2ggKHRoaXMuc3RhdGUpIHtcbiAgICAgICAgICAgIGNhc2UgU3RhdGUuTEVGVDpcbiAgICAgICAgICAgICAgICBpZiAoIWZpZWxkLm9uU29saWQodGhpcy54LCB0aGlzLnkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmV4dFN0YXRlID0gU3RhdGUuTEVGVDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFN0YXRlLkZBTExJTkc7XG4gICAgICAgICAgICAgICAgICAgIHJlcGVhdCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZmllbGQuZW1wdHlTcGFjZSh0aGlzLnggLSAxLCB0aGlzLnkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMueC0tO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmV4dFN0YXRlID0gU3RhdGUuU1RPUFBFRDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgU3RhdGUuUklHSFQ6XG4gICAgICAgICAgICAgICAgaWYgKCFmaWVsZC5vblNvbGlkKHRoaXMueCwgdGhpcy55KSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm5leHRTdGF0ZSA9IFN0YXRlLlJJR0hUO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlID0gU3RhdGUuRkFMTElORztcbiAgICAgICAgICAgICAgICAgICAgcmVwZWF0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChmaWVsZC5lbXB0eVNwYWNlKHRoaXMueCArIDEsIHRoaXMueSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy54Kys7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0U3RhdGUgPSBTdGF0ZS5TVE9QUEVEO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSBTdGF0ZS5VUDpcbiAgICAgICAgICAgICAgICBpZiAoZmllbGQuY2FuQ2xpbWJVcCh0aGlzLngsIHRoaXMueSAtIDEpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMueS0tO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTdGF0ZS5TVE9QUEVEO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSBTdGF0ZS5ET1dOOlxuICAgICAgICAgICAgICAgIGlmIChmaWVsZC5jYW5DbGltYkRvd24odGhpcy54LCB0aGlzLnkgKyAxKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnkrKztcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlID0gU3RhdGUuU1RPUFBFRDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgU3RhdGUuSlVNUF9SSUdIVDpcbiAgICAgICAgICAgIGNhc2UgU3RhdGUuSlVNUF9MRUZUOlxuICAgICAgICAgICAgY2FzZSBTdGF0ZS5KVU1QX1VQOlxuICAgICAgICAgICAgICAgIGxldCBzdGVwID0gSlVNUF9GUkFNRVNbdGhpcy5zdGF0ZV1bdGhpcy5qdW1wU3RlcF07XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coWydqdW1wJywgdGhpcy5zdGF0ZSwgdGhpcy5qdW1wU3RlcCwgc3RlcF0pO1xuICAgICAgICAgICAgICAgIGlmICgodGhpcy54ICsgc3RlcC54ID49IDApICYmICh0aGlzLnggKyBzdGVwLnggPCBMRVZFTF9DT0xTKSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgdGVycmFpbiA9IGZpZWxkLmxheW91dFt0aGlzLnkgKyBzdGVwLnldW3RoaXMueCArIHN0ZXAueF07XG4gICAgICAgICAgICAgICAgICAgIGlmIChbJz0nLCAnfCcsICctJ10uaW5jbHVkZXModGVycmFpbikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaWVsZC5vblNvbGlkKHRoaXMueCwgdGhpcy55KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSB0aGlzLm5leHRTdGF0ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5leHRTdGF0ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0aGlzLnN0YXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgU3RhdGUuSlVNUF9SSUdIVDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubmV4dFN0YXRlID0gU3RhdGUuUklHSFQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBTdGF0ZS5KVU1QX0xFRlQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5leHRTdGF0ZSA9IFN0YXRlLkxFRlQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBTdGF0ZS5KVU1QX1VQOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0U3RhdGUgPSBTdGF0ZS5VUDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlID0gU3RhdGUuRkFMTElORztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0ZXJyYWluID09PSAnSCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMueCArPSBzdGVwLng7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnkgKz0gc3RlcC55O1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFN0YXRlLlNUT1BQRUQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5leHRTdGF0ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMueCArPSBzdGVwLng7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnkgKz0gc3RlcC55O1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5qdW1wU3RlcCsrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5qdW1wU3RlcCA+PSBKVU1QX0ZSQU1FU1t0aGlzLnN0YXRlXS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlID0gdGhpcy5uZXh0U3RhdGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0U3RhdGUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZmllbGQub25Tb2xpZCh0aGlzLngsIHRoaXMueSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSB0aGlzLm5leHRTdGF0ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubmV4dFN0YXRlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFN0YXRlLkZBTExJTkc7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5leHRTdGF0ZSA9IFN0YXRlLlNUT1BQRUQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgU3RhdGUuRkFMTElORzpcbiAgICAgICAgICAgICAgICBpZiAoZmllbGQub25Tb2xpZCh0aGlzLngsIHRoaXMueSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IHRoaXMubmV4dFN0YXRlIHx8IFN0YXRlLlNUT1BQRUQ7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy55Kys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSWYgd2Ugd2VyZSBhdHRlbXB0aW5nIHRvIG1vdmUgc29tZXdoZXJlIGFuZCByZWFsaXplZCB3ZSBzaG91bGQgYmUgZmFsbGluZyBpbnN0ZWFkLFxuICAgICAgICAvLyB3ZSB3YW50IHRvIHJlLXJ1biB0aGUgZW50aXJlIGFsZ29yaXRobSBvbmNlLiBUaGlzIGF2b2lkcyB3aGF0IGJvaWxzIGRvd24gdG8gYSBcInNraXBwZWRcbiAgICAgICAgLy8gZnJhbWVcIiBmcm9tIHRoZSB1c2VyJ3MgcG9pbnQgb2Ygdmlldy5cbiAgICAgICAgaWYgKHJlcGVhdCkgcmV0dXJuIHRoaXMuYXBwbHlNb3ZlbWVudChmaWVsZCk7XG4gICAgfVxufVxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgeyBTcHJpdGUgfSBmcm9tICcuL1Nwcml0ZSc7XG5pbXBvcnQgeyBTdGF0ZSwgSlVNUF9GUkFNRVMgfSBmcm9tICcuL0JlaGF2aW9yJztcbmltcG9ydCB7IElucHV0IH0gZnJvbSAnLi9JbnB1dCc7XG5pbXBvcnQgeyBUZXh0IH0gZnJvbSAnLi9UZXh0JztcbmltcG9ydCB7IExFVkVMX1JPV1MsIExFVkVMX0NPTFMgfSBmcm9tICcuL0NvbnN0YW50cyc7XG5pbXBvcnQgeyBFbnRpdHkgfSBmcm9tICcuL0VudGl0eSc7XG5pbXBvcnQgeyBTY3JlZW4gfSBmcm9tICcuL1NjcmVlbic7XG5pbXBvcnQgeyBHYW1lIH0gZnJvbSAnLi9HYW1lJztcblxuY29uc3QgREVBVEhfRlJBTUVTID0gWydwJywgJ3AnLCAnYicsICdkJywgJ2QnLCAncScsICdwJywgJ3AnLCAnYicsICdkJywgJ2QnLCAncScsICctJywgJy0nLCAnXycsICdfJywgJ18nLCAnXycsICdfJ107XG5cbi8qKlxuICogUGxheWVyXG4gKi9cbmV4cG9ydCBjbGFzcyBQbGF5ZXIgZXh0ZW5kcyBFbnRpdHkge1xuICAgIGNvbnN0cnVjdG9yKHgsIHkpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy54ID0geDtcbiAgICAgICAgdGhpcy55ID0geTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IFN0YXRlLlNUT1BQRUQ7XG4gICAgICAgIHRoaXMubmV4dFN0YXRlID0gU3RhdGUuU1RPUFBFRDtcbiAgICAgICAgdGhpcy5qdW1wU3RlcCA9IDA7XG4gICAgICAgIHRoaXMuZGVhdGhTdGVwID0gMDtcbiAgICAgICAgY29uc29sZS5sb2coJ3BsYXllciBjb25zdHJ1Y3RlZCcsIHgsIHkpO1xuICAgIH1cblxuICAgIHVwZGF0ZShmaWVsZCwgbW92ZUZyYW1lKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlID09PSBTdGF0ZS5EWUlORykge1xuICAgICAgICAgICAgdGhpcy5kZWF0aFN0ZXArKztcbiAgICAgICAgICAgIGlmICh0aGlzLmRlYXRoU3RlcCA+PSBERUFUSF9GUkFNRVMubGVuZ3RoKSB0aGlzLnN0YXRlID0gU3RhdGUuREVBRDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnN0YXRlID09PSBTdGF0ZS5EWUlORyB8fCB0aGlzLnN0YXRlID09PSBTdGF0ZS5ERUFEKSByZXR1cm47XG5cbiAgICAgICAgaWYgKCFtb3ZlRnJhbWUpIHJldHVybjtcblxuICAgICAgICBsZXQgYWN0aW9uID0gSW5wdXQubGFzdEFjdGlvblByZXNzZWQoKTtcblxuICAgICAgICBpZiAoYWN0aW9uID09PSBJbnB1dC5BY3Rpb24uTEVGVCkge1xuICAgICAgICAgICAgdGhpcy5uZXh0U3RhdGUgPSBTdGF0ZS5MRUZUO1xuICAgICAgICAgICAgSW5wdXQuY29uc3VtZSgpO1xuICAgICAgICB9IGVsc2UgaWYgKGFjdGlvbiA9PT0gSW5wdXQuQWN0aW9uLlJJR0hUKSB7XG4gICAgICAgICAgICB0aGlzLm5leHRTdGF0ZSA9IFN0YXRlLlJJR0hUO1xuICAgICAgICAgICAgSW5wdXQuY29uc3VtZSgpO1xuICAgICAgICB9IGVsc2UgaWYgKGFjdGlvbiA9PT0gSW5wdXQuQWN0aW9uLlVQKSB7XG4gICAgICAgICAgICB0aGlzLm5leHRTdGF0ZSA9IFN0YXRlLlVQO1xuICAgICAgICAgICAgSW5wdXQuY29uc3VtZSgpO1xuICAgICAgICB9IGVsc2UgaWYgKGFjdGlvbiA9PT0gSW5wdXQuQWN0aW9uLkRPV04pIHtcbiAgICAgICAgICAgIHRoaXMubmV4dFN0YXRlID0gU3RhdGUuRE9XTjtcbiAgICAgICAgICAgIElucHV0LmNvbnN1bWUoKTtcbiAgICAgICAgfSBlbHNlIGlmIChhY3Rpb24gPT09IElucHV0LkFjdGlvbi5KVU1QKSB7XG4gICAgICAgICAgICB0aGlzLm5leHRTdGF0ZSA9IFN0YXRlLlNUQVJUX0pVTVA7XG4gICAgICAgICAgICBJbnB1dC5jb25zdW1lKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5hcHBseU1vdmVtZW50KGZpZWxkKTtcbiAgICB9XG5cbiAgICBkcmF3KCkge1xuICAgICAgICBsZXQgY2hhciA9ICdnJztcblxuICAgICAgICBzd2l0Y2ggKHRoaXMuc3RhdGUpIHtcbiAgICAgICAgICAgIGNhc2UgU3RhdGUuUklHSFQ6XG4gICAgICAgICAgICBjYXNlIFN0YXRlLkpVTVBfUklHSFQ6XG4gICAgICAgICAgICBjYXNlIFN0YXRlLlVQOlxuICAgICAgICAgICAgY2FzZSBTdGF0ZS5ET1dOOlxuICAgICAgICAgICAgICAgIGNoYXIgPSAncCc7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgU3RhdGUuTEVGVDpcbiAgICAgICAgICAgIGNhc2UgU3RhdGUuSlVNUF9MRUZUOlxuICAgICAgICAgICAgICAgIGNoYXIgPSAncSc7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgU3RhdGUuRkFMTElORzpcbiAgICAgICAgICAgICAgICBjaGFyID0gJ2InO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIFN0YXRlLkRZSU5HOlxuICAgICAgICAgICAgICAgIGNoYXIgPSBERUFUSF9GUkFNRVNbdGhpcy5kZWF0aFN0ZXBdO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIFN0YXRlLkRFQUQ6XG4gICAgICAgICAgICAgICAgY2hhciA9ICdfJztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIFNjcmVlbi53cml0ZSh0aGlzLngsIHRoaXMueSwgY2hhcik7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgVGV4dCB9IGZyb20gJy4vVGV4dCc7XG5pbXBvcnQgeyBTdGF0ZSB9IGZyb20gJy4vQmVoYXZpb3InO1xuaW1wb3J0IHsgTEVWRUxfQ09MUyB9IGZyb20gJy4vQ29uc3RhbnRzJztcbmltcG9ydCB7IEVudGl0eSB9IGZyb20gJy4vRW50aXR5JztcbmltcG9ydCB7IFNjcmVlbiB9IGZyb20gJy4vU2NyZWVuJztcbmltcG9ydCB7IEdhbWUgfSBmcm9tICcuL0dhbWUnO1xuXG5jb25zdCBERUFUSF9GUkFNRVMgPSBbJ3snLCAnfScsICcoJywgJyknLCAnJScsICclJywgJzonLCAnOiddO1xuXG5leHBvcnQgY2xhc3MgUm9jayBleHRlbmRzIEVudGl0eSB7XG4gICAgY29uc3RydWN0b3IoZGlzcGVuc2VyKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMueCA9IGRpc3BlbnNlci54O1xuICAgICAgICB0aGlzLnkgPSBkaXNwZW5zZXIueTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IFN0YXRlLkZBTExJTkc7XG4gICAgICAgIHRoaXMubmV4dFN0YXRlID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmRlYXRoU3RlcCA9IDA7XG4gICAgfVxuXG4gICAgdXBkYXRlKGZpZWxkLCBtb3ZlRnJhbWUpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgPT09IFN0YXRlLkRZSU5HKSB7XG4gICAgICAgICAgICB0aGlzLmRlYXRoU3RlcCsrO1xuICAgICAgICAgICAgaWYgKHRoaXMuZGVhdGhTdGVwID49IERFQVRIX0ZSQU1FUy5sZW5ndGgpIHRoaXMuc3RhdGUgPSBTdGF0ZS5ERUFEO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgPT09IFN0YXRlLkRZSU5HIHx8IHRoaXMuc3RhdGUgPT09IFN0YXRlLkRFQUQpIHJldHVybjtcblxuICAgICAgICBpZiAoIW1vdmVGcmFtZSkgcmV0dXJuO1xuXG4gICAgICAgIGlmICh0aGlzLnN0YXRlID09PSBTdGF0ZS5TVE9QUEVEKSB7XG4gICAgICAgICAgICBpZiAodGhpcy54ID09PSAwIHx8ICFmaWVsZC5lbXB0eVNwYWNlKHRoaXMueCAtIDEsIHRoaXMueSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm5leHRTdGF0ZSA9IFN0YXRlLlJJR0hUO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnggPT09IExFVkVMX0NPTFMgLSAxIHx8ICFmaWVsZC5lbXB0eVNwYWNlKHRoaXMueCArIDEsIHRoaXMueSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm5leHRTdGF0ZSA9IFN0YXRlLkxFRlQ7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMubmV4dFN0YXRlID0gTWF0aC5yYW5kb20oKSA+IDAuNSA/IFN0YXRlLkxFRlQgOiBTdGF0ZS5SSUdIVDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnggPT09IDAgJiYgdGhpcy5zdGF0ZSA9PT0gU3RhdGUuTEVGVCkge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFN0YXRlLlJJR0hUO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMueCA9PT0gTEVWRUxfQ09MUyAtIDEgJiYgdGhpcy5zdGF0ZSA9PT0gU3RhdGUuUklHSFQpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTdGF0ZS5MRUZUO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgIT09IFN0YXRlLkZBTExJTkcgJiYgIWZpZWxkLm9uU29saWQodGhpcy54LCB0aGlzLnkpKSB7XG4gICAgICAgICAgICB0aGlzLm5leHRTdGF0ZSA9IFN0YXRlLkZBTExJTkc7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZmllbGQuaXNMYWRkZXIodGhpcy54LCB0aGlzLnkgKyAxKSAmJiBbU3RhdGUuTEVGVCwgU3RhdGUuUklHSFRdLmluY2x1ZGVzKHRoaXMuc3RhdGUpKSB7XG4gICAgICAgICAgICBsZXQgciA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDQpO1xuICAgICAgICAgICAgdGhpcy5uZXh0U3RhdGUgPSBbU3RhdGUuTEVGVCwgU3RhdGUuUklHSFQsIFN0YXRlLkRPV04sIFN0YXRlLkRPV05dW3JdO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZpZWxkLmlzRWF0ZXIodGhpcy54LCB0aGlzLnkpKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gU3RhdGUuRFlJTkc7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmFwcGx5TW92ZW1lbnQoZmllbGQpO1xuICAgIH1cblxuICAgIGRyYXcoKSB7XG4gICAgICAgIGxldCBjaGFyID0gJ28nO1xuXG4gICAgICAgIHN3aXRjaCAodGhpcy5zdGF0ZSkge1xuICAgICAgICAgICAgY2FzZSBTdGF0ZS5EWUlORzpcbiAgICAgICAgICAgICAgICBjaGFyID0gREVBVEhfRlJBTUVTW3RoaXMuZGVhdGhTdGVwXTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgU3RhdGUuREVBRDpcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBTY3JlZW4ud3JpdGUodGhpcy54LCB0aGlzLnksIGNoYXIpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IExFVkVMX1JPV1MsIExFVkVMX0NPTFMgfSBmcm9tICcuL0NvbnN0YW50cyc7XG5pbXBvcnQgTGV2ZWxEYXRhIGZyb20gJy4uL2xldmVscy9sZXZlbHMuanNvbic7XG5cbmV4cG9ydCBjb25zdCBMZXZlbCA9IHtcbiAgICBMRVZFTFM6IExldmVsRGF0YSxcbiAgICBMRVZFTF9DT1VOVDogTGV2ZWxEYXRhLmxlbmd0aCxcblxuICAgIGxvYWQobGV2ZWxOdW1iZXIpIHtcbiAgICAgICAgY29uc29sZS5sb2coTGV2ZWwuTEVWRUxTKTtcbiAgICAgICAgLy8gQXMgdGhlIHBsYXllciBrZWVwcyBwbGF5aW5nLCBsZXZlbCBudW1iZXJzIHdpbGwgbG9vcCBhcm91bmQgdG8gYmVnaW5uaW5nXG4gICAgICAgIGxldCBsZXZlbCA9IExldmVsLkxFVkVMU1tsZXZlbE51bWJlciAlIExldmVsLkxFVkVMUy5sZW5ndGhdO1xuICAgICAgICBpZiAoIWxldmVsKSB0aHJvdyBuZXcgRXJyb3IoYE5vIHN1Y2ggbGV2ZWwgbnVtYmVyOiAke2xldmVsTnVtYmVyfWApO1xuXG4gICAgICAgIC8vIFBlcmZvcm0gc29tZSBzYW5pdHkgY2hlY2tzIG9uIHRoZSBsZXZlbCBsYXlvdXQgYW5kIGV4dHJhY3QgdXNlZnVsIGluZm9cbiAgICAgICAgLy8gbGlrZSBwbGF5ZXIgc3RhcnQgcG9zaXRpb24gYW5kIGRpc3BlbnNlciBwb3NpdGlvbnMgZXRjLlxuXG4gICAgICAgIGxldCBsYXlvdXQgPSBsZXZlbC5sYXlvdXQubWFwKHJvdyA9PiByb3cuc3BsaXQoJycpKTtcbiAgICAgICAgbGV0IGRpc3BlbnNlcnMgPSBbXTtcbiAgICAgICAgbGV0IHBsYXllcjtcblxuICAgICAgICAvLyBTYW5pdHkgY2hlY2tcbiAgICAgICAgbGF5b3V0ID0gbGF5b3V0LnNsaWNlKDAsIExFVkVMX1JPV1MpO1xuXG4gICAgICAgIGZvciAobGV0IHkgPSAwOyB5IDwgTEVWRUxfUk9XUzsgeSsrKSB7XG4gICAgICAgICAgICAvLyBTYW5pdHkgY2hlY2tzXG4gICAgICAgICAgICBpZiAoIWxheW91dFt5XSkgbGF5b3V0W3ldID0gW107XG4gICAgICAgICAgICBsYXlvdXRbeV0gPSBsYXlvdXRbeV0uc2xpY2UoMCwgTEVWRUxfQ09MUyk7XG5cbiAgICAgICAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgTEVWRUxfQ09MUzsgeCsrKSB7XG4gICAgICAgICAgICAgICAgLy8gU2FuaXR5IGNoZWNrXG4gICAgICAgICAgICAgICAgaWYgKCFsYXlvdXRbeV1beF0pIGxheW91dFt5XVt4XSA9ICcgJztcblxuICAgICAgICAgICAgICAgIC8vIERlciBEaXNwZW5zZXJzIChWKSBhbmQgRGVyIEVhdGVycyAoKikgaGF2ZSBiZWhhdmlvcnMsIHNvIGl0IGlzIGNvbnZlbmllbnQgZm9yIHVzXG4gICAgICAgICAgICAgICAgLy8gdG8gY29uc3RydWN0IGEgbGlzdCBvZiB0aGVtLCBidXQgdGhleSBhcmUgcGVybWFuZW50IHBhcnRzIG9mIHRoZSBsYXlvdXQsIHNvIHdlIGNhblxuICAgICAgICAgICAgICAgIC8vIGxlYXZlIHRoZW0gYXMgcGFydCBvZiB0aGUgbGV2ZWwgYW5kIGRyYXcgdGhlbSBub3JtYWxseS5cblxuICAgICAgICAgICAgICAgIGlmIChsYXlvdXRbeV1beF0gPT09ICdWJykge1xuICAgICAgICAgICAgICAgICAgICBkaXNwZW5zZXJzLnB1c2goeyB4LCB5IH0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIFRyZWFzdXJlICgkKSwgU3RhdHVlcyAoJiksIGFuZCB0aGUgTGFkIChwKSBhcmUgdHJhbnNpZW50IC0gdGhlIHBsYXllciBtb3ZlcyBhcm91bmQgYW5kXG4gICAgICAgICAgICAgICAgLy8gY2FuIHBpY2sgdXAgdGhlIHRyZWFzdXJlcyBhbmQgc3RhdHVlcy4gVGhhdCdzIHdoeSBmb3IgdGhlc2UgZWxlbWVudHMsIHdlIGFkZCB0aGVtIHRvXG4gICAgICAgICAgICAgICAgLy8gb3VyIGxpc3RzIEFORCB3ZSByZW1vdmUgdGhlbSBmcm9tIHRoZSBcInBsYXlpbmcgZmllbGRcIiwgd2UnbGwgZHJhdyB0aGVtIHNlcGFyYXRlbHkgb25cbiAgICAgICAgICAgICAgICAvLyB0b3Agb2YgdGhlIGxheW91dC5cblxuICAgICAgICAgICAgICAgIGlmIChsYXlvdXRbeV1beF0gPT09ICdwJykge1xuICAgICAgICAgICAgICAgICAgICBsYXlvdXRbeV1beF0gPSAnICc7XG4gICAgICAgICAgICAgICAgICAgIHBsYXllciA9IHsgeCwgeSB9O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIEV2ZXJ5dGhpbmcgZWxzZSwgbGlrZSBmbG9vcnMgKD0pLCB3YWxscyAofCksIGxhZGRlcnMgKEgpIGFuZCBmaXJlICheKSwgaXMgcGFydCBvZiB0aGVcbiAgICAgICAgICAgICAgICAvLyBsYXlvdXQuIFRoZSBMYWQgaW50ZXJhY3RzIHdpdGggdGhlbSwgYnV0IHdlIGNhbiBoYW5kbGUgdGhhdCBkdXJpbmcgb3VyIG1vdmVtZW50IGNoZWNrcy5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuYW1lOiBsZXZlbC5uYW1lLFxuICAgICAgICAgICAgdGltZTogbGV2ZWwudGltZSxcbiAgICAgICAgICAgIG1heFJvY2tzOiBsZXZlbC5tYVJyb2NrcyxcbiAgICAgICAgICAgIGxheW91dCxcbiAgICAgICAgICAgIGRpc3BlbnNlcnMsXG4gICAgICAgICAgICBwbGF5ZXJcbiAgICAgICAgfTtcbiAgICB9XG59O1xuIiwiLyoqXG4gKiBgUGxheWluZ0ZpZWxkYCBpcyBhIGNsYXNzIHRoYXQgcmVwcmVzZW50cyBhIGxldmVsIHRoYXQgaXMgYWN0aXZlbHkgYmVpbmcgcGxheWVkIG9uLXNjcmVlbi5cbiAqIEEgbmV3IG9uZSBpcyBjcmVhdGVkIGJ5IHRoZSBnYW1lIHNlc3Npb24gYW55IHRpbWUgd2Ugc3RhcnQgYSBuZXcgbGV2ZWwuXG4gKlxuICogTGV2ZWwtc3BlY2lmaWMgc3R1ZmYgKGxpa2UgYm9udXMgdGltZSwgZGlzcGVuc2Vycywgcm9ja3MsIHBsYXllciBwb3NpdGlvbiwgZXRjLikgaXMgYWxsXG4gKiBtYW5hZ2VkIGJ5IHRoZSBwbGF5aW5nIGZpZWxkLlxuICovXG5cbmltcG9ydCB7IExFVkVMX0NPTFMsIFNDT1JFX1JPQ0ssIFNDT1JFX1NUQVRVRSwgU0NPUkVfVFJFQVNVUkUsIE1BWF9ST0NLUywgRElTUEVOU0VSX01BWF9ST0NLUywgSElEREVOX0ZBQ1RPUl9NQVhfUk9DS1MgfSBmcm9tICcuL0NvbnN0YW50cyc7XG5pbXBvcnQgeyBHYW1lIH0gZnJvbSAnLi9HYW1lJztcbmltcG9ydCB7IFBsYXllciB9IGZyb20gJy4vUGxheWVyJztcbmltcG9ydCB7IFJvY2sgfSBmcm9tICcuL1JvY2snO1xuaW1wb3J0IHsgU3RhdGUgfSBmcm9tICcuL0JlaGF2aW9yJztcbmltcG9ydCB7IFNjcmVlbiB9IGZyb20gJy4vU2NyZWVuJztcbmltcG9ydCB7IExldmVsIH0gZnJvbSAnLi9MZXZlbCc7XG5cbmV4cG9ydCBjbGFzcyBQbGF5aW5nRmllbGQge1xuICAgIGNvbnN0cnVjdG9yKGxldmVsTnVtYmVyKSB7XG4gICAgICAgIGxldCBsZXZlbCA9IExldmVsLmxvYWQobGV2ZWxOdW1iZXIpO1xuXG4gICAgICAgIC8vIFN0b3JlIGxldmVsLXJlbGF0ZWQgaW5mb1xuICAgICAgICB0aGlzLmxheW91dCA9IGxldmVsLmxheW91dDtcbiAgICAgICAgdGhpcy5kaXNwZW5zZXJzID0gbGV2ZWwuZGlzcGVuc2VycztcbiAgICAgICAgdGhpcy50aW1lID0gMjAwMDtcblxuICAgICAgICAvLyBJbml0aWFsaXplIHBsYXllclxuICAgICAgICB0aGlzLnBsYXllciA9IG5ldyBQbGF5ZXIobGV2ZWwucGxheWVyLngsIGxldmVsLnBsYXllci55KTtcblxuICAgICAgICAvLyBJbml0aWFsaXplIGxpc3Qgb2Ygcm9ja3MgKGVtcHR5KVxuICAgICAgICB0aGlzLnJvY2tzID0gW107XG5cbiAgICAgICAgLy8gTm90IHdpbm5pbmcgeWV0ICh3aGlsZSBcIndpbm5pbmdcIiB0aGUgcGxheWVyIHN0b3BzIG1vdmluZyBhbmQgd2UgYWRkIHVwIHRoZSBib251cyBzY29yZSlcbiAgICAgICAgdGhpcy53aW5uaW5nID0gZmFsc2U7XG4gICAgfVxuXG4gICAgdXBkYXRlKG1vdmVGcmFtZSkge1xuICAgICAgICAvLyBJZiB3ZSdyZSBhbHJlYWR5IHdpbm5pbmcsIGtlZXAgY291bnRpbmcgZG93biB0aGUgYm9udXMgdGltZSwgYnV0XG4gICAgICAgIC8vIG5vIG1vcmUgbW92ZW1lbnQgd2lsbCBoYXBwZW4gb24gdGhpcyBsZXZlbC5cbiAgICAgICAgaWYgKHRoaXMud2lubmluZykge1xuICAgICAgICAgICAgR2FtZS5zZXNzaW9uLnVwZGF0ZVNjb3JlKFNDT1JFX1RSRUFTVVJFKTtcbiAgICAgICAgICAgIHRoaXMudGltZSAtPSAxMDtcbiAgICAgICAgICAgIGlmICh0aGlzLnRpbWUgPCAwKSBHYW1lLnNlc3Npb24uc3RhcnROZXh0TGV2ZWwoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENvdW50IGRvd24gYm9udXMgdGltZVxuICAgICAgICBpZiAodGhpcy50aW1lID4gMCAmJiBtb3ZlRnJhbWUpIHRoaXMudGltZS0tO1xuXG4gICAgICAgIGxldCBvbGRYID0gdGhpcy5wbGF5ZXIueCwgb2xkWSA9IHRoaXMucGxheWVyLnk7XG5cbiAgICAgICAgLy8gTW92ZSBwbGF5ZXIgYmFzZWQgb24gdXNlciBpbnB1dFxuICAgICAgICB0aGlzLnBsYXllci51cGRhdGUodGhpcywgbW92ZUZyYW1lKTtcblxuICAgICAgICAvLyBBbnkgdGltZSB5b3UgbW92ZSBPRkYgb2YgYSBkaXNhcHBlYXJpbmcgZmxvb3IsIGl0IGdvZXMgYXdheS5cbiAgICAgICAgaWYgKG9sZFggIT09IHRoaXMucGxheWVyLnggJiYgb2xkWSA9PT0gdGhpcy5wbGF5ZXIueSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNEaXNhcHBlYXJpbmdGbG9vcihvbGRYLCBvbGRZICsgMSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxheW91dFtvbGRZICsgMV1bb2xkWF0gPSAnICc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDaGVjayBpZiBwbGF5ZXIgc2hvdWxkIGJlIGRlYWQgKGJlZm9yZSBtb3Zpbmcgcm9ja3MpXG4gICAgICAgIGlmIChtb3ZlRnJhbWUpIHRoaXMuY2hlY2tJZlBsYXllclNob3VsZERpZShHYW1lLnNlc3Npb24pO1xuXG4gICAgICAgIC8vIE1vdmUgcm9ja3NcbiAgICAgICAgZm9yIChsZXQgcm9jayBvZiB0aGlzLnJvY2tzKSByb2NrLnVwZGF0ZSh0aGlzLCBtb3ZlRnJhbWUpO1xuXG4gICAgICAgIC8vIENoZWNrIGlmIHBsYXllciBzaG91bGQgYmUgZGVhZCAoYWZ0ZXIgbW92aW5nIHJvY2tzKVxuICAgICAgICBpZiAobW92ZUZyYW1lKSB0aGlzLmNoZWNrSWZQbGF5ZXJTaG91bGREaWUoR2FtZS5zZXNzaW9uKTtcblxuICAgICAgICBpZiAobW92ZUZyYW1lKSB7XG4gICAgICAgICAgICAvLyBDb2xsZWN0IHN0YXR1ZXNcbiAgICAgICAgICAgIGlmICh0aGlzLmlzU3RhdHVlKHRoaXMucGxheWVyLngsIHRoaXMucGxheWVyLnkpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sYXlvdXRbdGhpcy5wbGF5ZXIueV1bdGhpcy5wbGF5ZXIueF0gPSAnICc7XG4gICAgICAgICAgICAgICAgR2FtZS5zZXNzaW9uLnVwZGF0ZVNjb3JlKFNDT1JFX1NUQVRVRSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIENvbGxlY3QgdHJlYXN1cmUgKGVuZHMgdGhlIGN1cnJlbnQgbGV2ZWwpXG4gICAgICAgICAgICBpZiAodGhpcy5pc1RyZWFzdXJlKHRoaXMucGxheWVyLngsIHRoaXMucGxheWVyLnkpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy53aW5uaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEludGVyYWN0IHdpdGggdHJhbXBvbGluZXNcbiAgICAgICAgICAgIGlmICh0aGlzLmlzVHJhbXBvbGluZSh0aGlzLnBsYXllci54LCB0aGlzLnBsYXllci55KSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXIuc3RhdGUgPSBTdGF0ZS5MRUZUO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXIubmV4dFN0YXRlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGxheWVyLnN0YXRlID0gU3RhdGUuUklHSFQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsYXllci5uZXh0U3RhdGUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXIuc3RhdGUgPSBTdGF0ZS5KVU1QX1VQO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXIubmV4dFN0YXRlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXIuanVtcFN0ZXAgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGxheWVyLnN0YXRlID0gU3RhdGUuSlVNUF9MRUZUO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXIubmV4dFN0YXRlID0gU3RhdGUuTEVGVDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGxheWVyLmp1bXBTdGVwID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsYXllci5zdGF0ZSA9IFN0YXRlLkpVTVBfUklHSFQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsYXllci5uZXh0U3RhdGUgPSBTdGF0ZS5SSUdIVDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGxheWVyLmp1bXBTdGVwID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gS2lsbCBkZWFkIHJvY2tzXG4gICAgICAgICAgICB0aGlzLnJvY2tzID0gdGhpcy5yb2Nrcy5maWx0ZXIocm9jayA9PiByb2NrLnN0YXRlICE9PSBTdGF0ZS5ERUFEKTtcblxuICAgICAgICAgICAgLy8gRGlzcGVuc2UgbmV3IHJvY2tzXG4gICAgICAgICAgICBpZiAodGhpcy5yb2Nrcy5sZW5ndGggPCB0aGlzLm1heFJvY2tzKCkgJiYgTWF0aC5yYW5kb20oKSA+IDAuOTEpIHtcbiAgICAgICAgICAgICAgICBsZXQgZGlzcGVuc2VyID0gdGhpcy5kaXNwZW5zZXJzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHRoaXMuZGlzcGVuc2Vycy5sZW5ndGgpXTtcbiAgICAgICAgICAgICAgICB0aGlzLnJvY2tzLnB1c2gobmV3IFJvY2soZGlzcGVuc2VyKSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEtpbGwgcGxheWVyXG4gICAgICAgICAgICBpZiAodGhpcy5wbGF5ZXIuc3RhdGUgPT09IFN0YXRlLkRFQUQpIHtcbiAgICAgICAgICAgICAgICBHYW1lLnNlc3Npb24ucmVzdGFydExldmVsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBkcmF3KCkge1xuICAgICAgICAvLyBEcmF3IGxheW91dFxuICAgICAgICBTY3JlZW4ud3JpdGUoMCwgMCwgdGhpcy5sYXlvdXQubWFwKHJvdyA9PiByb3cuam9pbignJykpKTtcblxuICAgICAgICAvLyBEcmF3IHBsYXllclxuICAgICAgICB0aGlzLnBsYXllci5kcmF3KCk7XG5cbiAgICAgICAgLy8gRHJhdyByb2Nrc1xuICAgICAgICB0aGlzLnJvY2tzLmZvckVhY2gocm9jayA9PiByb2NrLmRyYXcoKSk7XG4gICAgfVxuXG4gICAgLy9cbiAgICAvLyBVdGlsaXR5IGZ1bmN0aW9ucyAtIHRoaXMgaXMgYW4gYXR0ZW1wdCB0byBjb25zb2xpZGF0ZSBsb2dpYyBpbiBvbmUgc3BvdCBhbmQgbWFrZSBvdGhlclxuICAgIC8vIGZ1bmN0aW9ucyAobGlrZSB0aGUgdXBkYXRlIGxvZ2ljIGluIFBsYXllcikgbW9yZSByZWFkYWJsZS5cbiAgICAvL1xuXG4gICAgb25Tb2xpZCh4LCB5KSB7XG4gICAgICAgIHJldHVybiBbJz0nLCAnLScsICdIJywgJ3wnXS5pbmNsdWRlcyh0aGlzLmxheW91dFt5ICsgMV1beF0pIHx8IHRoaXMubGF5b3V0W3ldW3hdID09PSAnSCc7XG4gICAgfVxuXG4gICAgZW1wdHlTcGFjZSh4LCB5KSB7XG4gICAgICAgIGlmICh4IDwgMCB8fCB4ID49IExFVkVMX0NPTFMpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiAhWyd8JywgJz0nXS5pbmNsdWRlcyh0aGlzLmxheW91dFt5XVt4XSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpc0xhZGRlcih4LCB5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxheW91dFt5XVt4XSA9PT0gJ0gnO1xuICAgIH1cblxuICAgIGlzU3RhdHVlKHgsIHkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGF5b3V0W3ldW3hdID09PSAnJic7XG4gICAgfVxuXG4gICAgaXNUcmVhc3VyZSh4LCB5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxheW91dFt5XVt4XSA9PT0gJyQnO1xuICAgIH1cblxuICAgIGlzVHJhbXBvbGluZSh4LCB5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxheW91dFt5XVt4XSA9PT0gJy4nO1xuICAgIH1cblxuICAgIGlzRWF0ZXIoeCwgeSkge1xuICAgICAgICByZXR1cm4gdGhpcy5sYXlvdXRbeV1beF0gPT09ICcqJztcbiAgICB9XG5cbiAgICBpc0ZpcmUoeCwgeSkge1xuICAgICAgICByZXR1cm4gdGhpcy5sYXlvdXRbeV1beF0gPT09ICdeJztcbiAgICB9XG5cbiAgICBpc0Rpc2FwcGVhcmluZ0Zsb29yKHgsIHkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGF5b3V0W3ldW3hdID09PSAnLSc7XG4gICAgfVxuXG4gICAgY2FuQ2xpbWJVcCh4LCB5KSB7XG4gICAgICAgIGlmICh5IDwgMCkgcmV0dXJuIGZhbHNlO1xuICAgICAgICByZXR1cm4gWydIJywgJyYnLCAnJCddLmluY2x1ZGVzKHRoaXMubGF5b3V0W3ldW3hdKTtcbiAgICB9XG5cbiAgICBjYW5DbGltYkRvd24oeCwgeSkge1xuICAgICAgICByZXR1cm4gWydIJywgJyYnLCAnJCcsICcgJywgJ14nLCAnLiddLmluY2x1ZGVzKHRoaXMubGF5b3V0W3ldW3hdKTtcbiAgICB9XG5cbiAgICBjaGVja0lmUGxheWVyU2hvdWxkRGllKCkge1xuICAgICAgICAvLyBJZiB3ZSdyZSBBTFJFQURZIGR5aW5nIG9yIGRlYWQsIGxldCBuYXR1cmUgcnVuIGl0cyBjb3Vyc2VcbiAgICAgICAgaWYgKHRoaXMucGxheWVyLnN0YXRlID09PSBTdGF0ZS5EWUlORyB8fCB0aGlzLnBsYXllci5zdGF0ZSA9PT0gU3RhdGUuREVBRCkgcmV0dXJuO1xuXG4gICAgICAgIC8vIExhbmRpbmcgb24gZmlyZSBraWxscyB5b3VcbiAgICAgICAgaWYgKHRoaXMuaXNGaXJlKHRoaXMucGxheWVyLngsIHRoaXMucGxheWVyLnkpKSB7XG4gICAgICAgICAgICB0aGlzLnBsYXllci5zdGF0ZSA9IFN0YXRlLkRZSU5HO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUnVubmluZyBvdXQgb2YgdGltZSBraWxscyB5b3VcbiAgICAgICAgaWYgKHRoaXMudGltZSA8PSAwKSB7XG4gICAgICAgICAgICB0aGlzLnBsYXllci5zdGF0ZSA9IFN0YXRlLkRZSU5HO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUnVubmluZyBpbnRvIGEgcm9jayBraWxscyB5b3UsIGFuZCBtYWtlcyB0aGUgcm9jayB0aGF0IGtpbGxlZCB5b3UgZGlzYXBwZWFyLlxuICAgICAgICAvLyBUaGF0J3Mgbm90IG5lY2Vzc2FyeSwgSSBqdXN0IHRoaW5rIGl0IGxvb2tzIGJldHRlci4gV2hpbGUgd2UgcGxheSB0aGUgZGVhdGhcbiAgICAgICAgLy8gYW5pbWF0aW9uIHdlJ2xsIGNvbnRpbnVlIHRvIG1vdmUgcm9ja3MsIHNvIGFub3RoZXIgcm9jayBtaWdodCBhbHNvIFwiaGl0XCIgeW91LFxuICAgICAgICAvLyBidXQgaXQgd2lsbCBqdXN0IHBhc3MgdGhyb3VnaCB5b3VyIGR5aW5nIGNoYXJhY3Rlci5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gSWYgd2UncmUgYWJvdmUgYSByb2NrIHdpdGggMSBvciAyIHNwYWNlcyBiZXR3ZWVuLCB3ZSBnZXQgc29tZSBwb2ludHMgaW5zdGVhZC5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gQSBmdW5jdGlvbiBuYW1lZCBgY2hlY2tJZlBsYXllclNob3VsZERpZWAgaXMgcHJvYmFibHkgbm90IHRoZSBiZXN0IHBsYWNlIHRvIGRvXG4gICAgICAgIC8vIHRoaXMsIGJ1dCBpdCdzIGNvbnZlbmllbnQgYmVjYXVzZSB3ZSB3YW50IHRvIGRvIHRoaXMgdHdpY2UgKGp1c3QgbGlrZSB0aGUgZGVhdGhcbiAgICAgICAgLy8gY2hlY2spLlxuICAgICAgICAvL1xuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgcCAgICAgICAgICAgICAgICAgICAgICAgICAgcFxuICAgICAgICAvLyAoMSkgICBwICAgICAtLT4gICAgICAgICAgICAoMikgICBwICAgICAtLT5cbiAgICAgICAgLy8gICAgICAgIG8gICAgICAgICAgbyAgICAgICAgICAgICAgICBvICAgICAgICAgIG9cbiAgICAgICAgLy8gICAgICA9PT09PSAgICAgICA9PT09PSAgICAgICAgICA9PT09PSAgICAgICA9PT09PVxuICAgICAgICAvL1xuICAgICAgICAvLyBJbiBzaXR1YXRpb24gKDEpLCB0aGVyZSB3aWxsIG5ldmVyIGJlIGEgZnJhbWUgb24tc2NyZWVuIHdoZXJlIHRoZSBwbGF5ZXIgaXMgZGlyZWN0bHlcbiAgICAgICAgLy8gYWJvdmUgdGhlIHJvY2ssIGJ1dCB3ZSdsbCBzdGlsbCBjb3VudCBpdCBiZWNhdXNlIHdlJ2xsIGNoZWNrIG9uY2UgYWZ0ZXIgdGhlIHBsYXllciBtb3Zlcy5cbiAgICAgICAgLy8gSW4gc2l0dWF0aW9uICgyKSwgdGhlIGZpcnN0IGNoZWNrIHdvbid0IGNvdW50LCBidXQgdGhlIHNlY29uZCBjaGVjayBhZnRlciB0aGUgcm9ja3MgbW92ZVxuICAgICAgICAvLyB3aWxsIGdpdmUgdGhlIHNjb3JlIChhbmQgdGhlIGZyYW1lIGRyYXduIG9uIHNjcmVlbiB3aWxsIHNob3cgdGhlIHBsYXllciBhYm92ZSB0aGUgcm9jaykuXG4gICAgICAgIC8vXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5yb2Nrcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKHRoaXMucGxheWVyLnggPT09IHRoaXMucm9ja3NbaV0ueCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBsYXllci55ID09PSB0aGlzLnJvY2tzW2ldLnkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXIuc3RhdGUgPSBTdGF0ZS5EWUlORztcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yb2Nrcy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5wbGF5ZXIueSA9PT0gdGhpcy5yb2Nrc1tpXS55IC0gMSAmJiB0aGlzLmVtcHR5U3BhY2UodGhpcy5wbGF5ZXIueCwgdGhpcy5wbGF5ZXIueSArIDEpKSB7XG4gICAgICAgICAgICAgICAgICAgIEdhbWUuc2Vzc2lvbi51cGRhdGVTY29yZShTQ09SRV9ST0NLKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMucGxheWVyLnkgPT09IHRoaXMucm9ja3NbaV0ueSAtIDIgJiYgdGhpcy5lbXB0eVNwYWNlKHRoaXMucGxheWVyLngsIHRoaXMucGxheWVyLnkgKyAxKSAmJiB0aGlzLmVtcHR5U3BhY2UodGhpcy5wbGF5ZXIueCwgdGhpcy5wbGF5ZXIueSArIDIpKSB7XG4gICAgICAgICAgICAgICAgICAgIEdhbWUuc2Vzc2lvbi51cGRhdGVTY29yZShTQ09SRV9ST0NLKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBtYXhSb2NrcygpIHtcbiAgICAgICAgLy8gVGhlIHRvdGFsIG51bWJlciBvZiByb2NrcyB3ZSBjYW4gaGF2ZSBvbiBzY3JlZW4gaXMgYmFzZWQgb24gYSBnbG9iYWwgbWF4IHJvY2tzIHZhbHVlLFxuICAgICAgICAvLyB0aGVuIGluY3JlYXNlZCBzbGlnaHRseSBieSB0aGUgbnVtYmVyIG9mIGRpc3BlbnNlcnMgb24gdGhlIGxldmVsLCB0aGVuIGluY3JlYXNlZCBhZ2FpblxuICAgICAgICAvLyBieSBhIGhpZGRlbiBkaWZmaWN1bHR5IGZhY3RvciAobGV2ZWwgY3ljbGVzKS5cbiAgICAgICAgcmV0dXJuIE1BWF9ST0NLUyArIHRoaXMuZGlzcGVuc2Vycy5sZW5ndGggKiBESVNQRU5TRVJfTUFYX1JPQ0tTICsgR2FtZS5zZXNzaW9uLmhpZGRlbkZhY3RvcigpICogSElEREVOX0ZBQ1RPUl9NQVhfUk9DS1M7XG4gICAgfVxufVxuIiwiLyoqXG4gKiBgR2FtZVNlc3Npb25gIGlzIGEgY2xhc3MgdGhhdCByZXByZXNlbnRzLi4uIHdlbGwsIGEgZ2FtZSBzZXNzaW9uISBJdCBpcyBjcmVhdGVkIHdoZW4gdGhlXG4gKiBwbGF5ZXIgcHJlc3NlcyBgUGAgYXQgdGhlIG1haW4gbWVudSwgYW5kIGVuZHMgd2hlbiB0aGUgcGxheWVyIHJ1bnMgb3V0IG9mIGxpdmVzLlxuICpcbiAqIFRoZSBnYW1lIHNlc3Npb24gdHJhY2tzIHZhbHVlcyB0aGF0IHBlcnNpc3QgYWNyb3NzIGxldmVscyAobGlrZSBudW1iZXIgb2YgbGl2ZXMsIHNjb3JlLFxuICogdGhlIGxldmVsIG51bWJlciwgZXRjLikuIE1vc3Qgb2YgdGhlIGFjdHVhbCBpbi1nYW1lIGxvZ2ljIGl0IGhhbmRzIG9mZiB0byBgUGxheWluZ0ZpZWxkYC5cbiAqL1xuXG5pbXBvcnQgeyBQTEFZX1NQRUVEUywgU0NPUkVfUk9DSywgU0NPUkVfU1RBVFVFLCBTQ09SRV9UUkVBU1VSRSwgSElEREVOX0ZBQ1RPUl9QTEFZX1NQRUVEIH0gZnJvbSAnLi9Db25zdGFudHMnO1xuaW1wb3J0IHsgR2FtZSB9IGZyb20gJy4vR2FtZSc7XG5pbXBvcnQgeyBQbGF5aW5nRmllbGQgfSBmcm9tICcuL1BsYXlpbmdGaWVsZCc7XG5pbXBvcnQgeyBMZXZlbCB9IGZyb20gJy4vTGV2ZWwnO1xuaW1wb3J0IHsgU2NyZWVuIH0gZnJvbSAnLi9TY3JlZW4nO1xuaW1wb3J0IHsgSW5wdXQgfSBmcm9tICcuL0lucHV0JztcblxuZXhwb3J0IGNsYXNzIEdhbWVTZXNzaW9uIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5zY29yZSA9IDA7XG4gICAgICAgIHRoaXMubGV2ZWxOdW1iZXIgPSAwO1xuICAgICAgICB0aGlzLmxldmVsQ3ljbGUgPSAxO1xuICAgICAgICB0aGlzLmxpdmVzID0gNTtcbiAgICAgICAgdGhpcy5uZXh0TGlmZSA9IDEwMDtcbiAgICB9XG5cbiAgICB1cGRhdGUoKSB7XG4gICAgICAgIC8vIFRoZSBgR2FtZWAgY29udHJvbHMgdGhlIG92ZXJhbGwgZ2FtZSBsb29wLCB3aGljaCBydW5zIGF0IGEgZml4ZWQgNjAgZnJhbWVzIHBlciBzZWNvbmQuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIEhvd2V2ZXIsIExhZGRlciBoYXMgdGhlIGNvbmNlcHQgb2YgXCJwbGF5IHNwZWVkXCIgd2hpY2ggdGhlIHBsYXllciBjYW4gY2hhbmdlIGF0IHRoZSBtYWluXG4gICAgICAgIC8vIG1lbnUsIGFuZCBpdCBjb250cm9scyBob3cgZmFzdCB0aGUgZ2FtZSBydW5zLiBUbyBhY2NvbXBsaXNoIHRoYXQsIHdlIGNhbiBkbyBhIHNlY29uZFxuICAgICAgICAvLyBmcmFtZSBnYXRlIGhlcmUuIFRoaXMgZ2F0ZSBzZXRzIGEgZmxhZyBjYWxsZWQgYG1vdmVGcmFtZWAgSUYgdGhpbmdzIGNhbiBtb3ZlIGluIHRoaXMgZnJhbWUuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIFdlIGRvIGl0IHRoaXMgd2F5IHNvIHRoYXQgYW5pbWF0aW9ucyAobGlrZSB0aGUgcGxheSBkZWF0aCBhbmltYXRpb24sIG9yIHRoZSBlbmQtb2YtbGV2ZWxcbiAgICAgICAgLy8gc2NvcmUgYW5pbWF0aW9uKSBjYW4gcnVuIGF0IHRoZSBzYW1lIHNwZWVkIG5vIG1hdHRlciB3aGF0IHRoZSBwbGF5IHNwZWVkIGlzLlxuICAgICAgICBsZXQgbm93ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICAgIGxldCBsYXN0RnJhbWUgPSB0aGlzLmxhc3RGcmFtZSB8fCAwO1xuICAgICAgICBsZXQgbW92ZUZyYW1lID0gZmFsc2U7XG5cbiAgICAgICAgaWYgKG5vdyAtIGxhc3RGcmFtZSA+PSAodGhpcy5uZXh0RnJhbWUgfHwgMCkpIHtcbiAgICAgICAgICAgIG1vdmVGcmFtZSA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLm5leHRGcmFtZSA9IG5vdyArIHRoaXMubW92ZUZyYW1lTWlsbGlzZWNvbmREZWxheSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSWYgd2UgaGF2ZW4ndCBpbnN0YW50aWF0ZWQgdGhlIHBsYXlpbmcgZmllbGQgeWV0LCBjcmVhdGUgaXQgbm93LlxuICAgICAgICBpZiAoIXRoaXMuZmllbGQpIHRoaXMuZmllbGQgPSBuZXcgUGxheWluZ0ZpZWxkKHRoaXMubGV2ZWxOdW1iZXIpO1xuXG4gICAgICAgIC8vIEhhbmQgb2ZmIHRvIHRoZSBwbGF5aW5nIGZpZWxkIGZvciBhY3R1YWwgaW4tZ2FtZSBsb2dpY1xuICAgICAgICB0aGlzLmZpZWxkLnVwZGF0ZShtb3ZlRnJhbWUpO1xuXG4gICAgICAgIHRoaXMuaGFuZGxlQ2hlYXRDb2RlcygpO1xuICAgIH1cblxuICAgIGRyYXcoKSB7XG4gICAgICAgIGlmICh0aGlzLmZpZWxkKSB0aGlzLmZpZWxkLmRyYXcoKTtcblxuICAgICAgICBsZXQgc3RhdCA9IFtcbiAgICAgICAgICAgIFN0cmluZyh0aGlzLmxpdmVzKS5wYWRTdGFydCgyLCAnICcpLFxuICAgICAgICAgICAgU3RyaW5nKHRoaXMubGV2ZWxOdW1iZXIgKyAxKS5wYWRTdGFydCgyLCAnICcpLFxuICAgICAgICAgICAgU3RyaW5nKHRoaXMuc2NvcmUpLnBhZFN0YXJ0KDYsICcgJyksXG4gICAgICAgICAgICB0aGlzLmZpZWxkID8gU3RyaW5nKHRoaXMuZmllbGQudGltZSkucGFkU3RhcnQoNCwgJyAnKSA6ICcnXG4gICAgICAgIF07XG4gICAgICAgIFNjcmVlbi53cml0ZSgwLCAyMSwgYExhZHMgICAke3N0YXRbMF19ICAgICBMZXZlbCAgICR7c3RhdFsxXX0gICAgICBTY29yZSAgICR7c3RhdFsyXX0gICAgICBCb251cyB0aW1lICAgJHtzdGF0WzNdfWApO1xuICAgIH1cblxuICAgIHJlc3RhcnRMZXZlbCgpIHtcbiAgICAgICAgdGhpcy5maWVsZCA9IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBzdGFydE5leHRMZXZlbCgpIHtcbiAgICAgICAgdGhpcy5maWVsZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5sZXZlbE51bWJlcisrO1xuICAgICAgICBpZiAodGhpcy5sZXZlbE51bWJlciAlIExldmVsLkxFVkVMX0NPVU5UID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmxldmVsQ3ljbGUrKztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHVwZGF0ZVNjb3JlKHNjb3JlVHlwZSkge1xuICAgICAgICBzd2l0Y2ggKHNjb3JlVHlwZSkge1xuICAgICAgICAgICAgY2FzZSBTQ09SRV9ST0NLOlxuICAgICAgICAgICAgICAgIHRoaXMuc2NvcmUgKz0gMjAwO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBTQ09SRV9TVEFUVUU6XG4gICAgICAgICAgICAgICAgdGhpcy5zY29yZSArPSB0aGlzLmZpZWxkLnRpbWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFNDT1JFX1RSRUFTVVJFOlxuICAgICAgICAgICAgICAgIC8vIEFkZGVkIHJlcGVhdGVkbHkgYWZ0ZXIgd2lubmluZyB0aGUgbGV2ZWxcbiAgICAgICAgICAgICAgICB0aGlzLnNjb3JlICs9IDEwO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaGlkZGVuRmFjdG9yKCkge1xuICAgICAgICAvLyBUaGlzIFwiaGlkZGVuXCIgZGlmZmljdWx0eSBsZXZlbCBpbmNyZWFzZXMgc3RlYWRpbHkgYXMgdGhlIHBsYXllciBjb21wbGV0ZXMgYVxuICAgICAgICAvLyBsZXZlbCBjeWNsZSAoZXZlcnkgdGltZSB0aGV5IHJlYWNoIHRoZSBFYXN5IFN0cmVldCBsZXZlbCkuIFRoaXMgbWFrZXMgdGhlXG4gICAgICAgIC8vIGdhbWUgc2xvd2x5IGhhcmRlciBhcyB5b3Uga2VlcCBwbGF5aW5nLlxuICAgICAgICByZXR1cm4gTWF0aC5mbG9vcih0aGlzLmxldmVsTnVtYmVyIC8gTGV2ZWwuTEVWRUxfQ09VTlQpO1xuICAgIH1cblxuICAgIG1vdmVGcmFtZU1pbGxpc2Vjb25kRGVsYXkoKSB7XG4gICAgICAgIC8vIFJlZ2FyZGxlc3Mgb2YgcGxheSBzcGVlZCwgdGhlIGdhbWUgZ2V0cyBzbGlnaHRseSBmYXN0ZXIgZXZlcnkgbGV2ZWwgY3ljbGVcbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoUExBWV9TUEVFRFNbR2FtZS5wbGF5U3BlZWRdIC0gdGhpcy5oaWRkZW5GYWN0b3IoKSAqIEhJRERFTl9GQUNUT1JfUExBWV9TUEVFRCAqIFBMQVlfU1BFRURTW0dhbWUucGxheVNwZWVkXSk7XG4gICAgfVxuXG4gICAgaGFuZGxlQ2hlYXRDb2RlcygpIHtcbiAgICAgICAgLy8gQ2hlYXQgY29kZXMgYXJlIHVzZWZ1bCBmb3IgdGVzdGluZywgYW5kIHRoaXMgZ2FtZSBpcyBubyBleGNlcHRpb24uIE9mIGNvdXJzZVxuICAgICAgICAvLyBUSEVTRSBjaGVhdCBjb2RlcyBkbyBub3QgYmVsb25nIGhlcmUsIGFzIHRoZXkgd291bGRuJ3QgYmUgY3JlYXRlZCB1bnRpbCAxMSB5ZWFyc1xuICAgICAgICAvLyBsYXRlciwgYnV0IHRoYXQgd29uJ3Qgc3RvcCBtZSBmcm9tIGluc2VydGluZyB0aGVtIGFueXdoZXJlIEkgZ2V0IHRoZSBjaGFuY2UhXG4gICAgICAgIC8vXG4gICAgICAgIC8vID09PT09PT09PT09PT09PT09ICAgICA9PT09PT09PT09PT09PT0gICAgID09PT09PT09PT09PT09PSAgID09PT09PT09ICA9PT09PT09PVxuICAgICAgICAvLyBcXFxcIC4gLiAuIC4gLiAuIC5cXFxcICAgLy8uIC4gLiAuIC4gLiAuXFxcXCAgIC8vLiAuIC4gLiAuIC4gLlxcXFwgIFxcXFwuIC4gLlxcXFwvLyAuIC4gLy9cbiAgICAgICAgLy8gfHwuIC4gLl9fX19fLiAuIC58fCB8fC4gLiAuX19fX18uIC4gLnx8IHx8LiAuIC5fX19fXy4gLiAufHwgfHwgLiAuIC5cXC8gLiAuIC58fFxuICAgICAgICAvLyB8fCAuIC58fCAgIHx8LiAuIHx8IHx8IC4gLnx8ICAgfHwuIC4gfHwgfHwgLiAufHwgICB8fC4gLiB8fCB8fC4gLiAuIC4gLiAuIC4gfHxcbiAgICAgICAgLy8gfHwuIC4gfHwgICB8fCAuIC58fCB8fC4gLiB8fCAgIHx8IC4gLnx8IHx8LiAuIHx8ICAgfHwgLiAufHwgfHwgLiB8IC4gLiAuIC4gLnx8XG4gICAgICAgIC8vIHx8IC4gLnx8ICAgfHwuIF8tfHwgfHwtXyAufHwgICB8fC4gLiB8fCB8fCAuIC58fCAgIHx8LiBfLXx8IHx8LV8ufFxcIC4gLiAuIC4gfHxcbiAgICAgICAgLy8gfHwuIC4gfHwgICB8fC0nICB8fCB8fCAgYC18fCAgIHx8IC4gLnx8IHx8LiAuIHx8ICAgfHwtJyAgfHwgfHwgIGB8XFxfIC4gLnwuIC58fFxuICAgICAgICAvLyB8fCAuIF98fCAgIHx8ICAgIHx8IHx8ICAgIHx8ICAgfHxfIC4gfHwgfHwgLiBffHwgICB8fCAgICB8fCB8fCAgIHxcXCBgLV8vfCAuIHx8XG4gICAgICAgIC8vIHx8Xy0nIHx8ICAufC8gICAgfHwgfHwgICAgXFx8LiAgfHwgYC1ffHwgfHxfLScgfHwgIC58LyAgICB8fCB8fCAgIHwgXFwgIC8gfC1fLnx8XG4gICAgICAgIC8vIHx8ICAgIHx8Xy0nICAgICAgfHwgfHwgICAgICBgLV98fCAgICB8fCB8fCAgICB8fF8tJyAgICAgIHx8IHx8ICAgfCBcXCAgLyB8ICBgfHxcbiAgICAgICAgLy8gfHwgICAgYCcgICAgICAgICB8fCB8fCAgICAgICAgIGAnICAgIHx8IHx8ICAgIGAnICAgICAgICAgfHwgfHwgICB8IFxcICAvIHwgICB8fFxuICAgICAgICAvLyB8fCAgICAgICAgICAgIC49PT0nIGA9PT0uICAgICAgICAgLj09PScuYD09PS4gICAgICAgICAuPT09JyAvPT0uIHwgIFxcLyAgfCAgIHx8XG4gICAgICAgIC8vIHx8ICAgICAgICAgLj09JyAgIFxcX3wtXyBgPT09LiAuPT09JyAgIF98XyAgIGA9PT0uIC49PT0nIF8tfC8gICBgPT0gIFxcLyAgfCAgIHx8XG4gICAgICAgIC8vIHx8ICAgICAgLj09JyAgICBfLScgICAgYC1fICBgPScgICAgXy0nICAgYC1fICAgIGA9JyAgXy0nICAgYC1fICAvfCAgXFwvICB8ICAgfHxcbiAgICAgICAgLy8gfHwgICAuPT0nICAgIF8tJyAgICAgICAgICBgLV9fXFwuXy0nICAgICAgICAgYC1fLi9fXy0nICAgICAgICAgYCcgfC4gL3wgIHwgICB8fFxuICAgICAgICAvLyB8fC49PScgICAgXy0nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgJyB8ICAvPT0ufHxcbiAgICAgICAgLy8gPT0nICAgIF8tJyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcLyAgIGA9PVxuICAgICAgICAvLyBcXCAgIF8tJyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgLV8gICAvXG4gICAgICAgIC8vICBgJycgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYGAnXG4gICAgICAgIC8vXG4gICAgICAgIGxldCByZWNlbnRLZXlzdHJva2VzID0gSW5wdXQuaGlzdG9yeS5tYXAoZXZlbnQgPT4gZXZlbnQua2V5KS5qb2luKCcnKS50b1VwcGVyQ2FzZSgpO1xuICAgICAgICBpZiAocmVjZW50S2V5c3Ryb2tlcy5tYXRjaCgvSURDTEVWKFxcZFxcZCkvKSkge1xuICAgICAgICAgICAgLy8gQ2hhbmdpbmcgbGV2ZWxzIGlzIGFzIHNpbXBsZSBhcyBzZXR0aW5nIHRoZSBkZXNpcmVkIGxldmVsIG51bWJlclxuICAgICAgICAgICAgLy8gYW5kIHRoZW4gdGhyb3dpbmcgdGhlIGN1cnJlbnQgcGxheWluZyBmaWVsZCBhd2F5LlxuICAgICAgICAgICAgSW5wdXQuY29uc3VtZSgpO1xuICAgICAgICAgICAgdGhpcy5sZXZlbE51bWJlciA9IHBhcnNlSW50KFJlZ0V4cC4kMSwgMTApO1xuICAgICAgICAgICAgdGhpcy5maWVsZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgfSBlbHNlIGlmIChyZWNlbnRLZXlzdHJva2VzLmluY2x1ZGVzKFwiSUREUURcIikpIHtcbiAgICAgICAgICAgIElucHV0LmNvbnN1bWUoKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZ29kIG1vZGVcIik7XG4gICAgICAgIH0gZWxzZSBpZiAocmVjZW50S2V5c3Ryb2tlcy5pbmNsdWRlcyhcIklES0ZBXCIpKSB7XG4gICAgICAgICAgICAvLyBJbW1lZGlhdGVseSBlbmQgdGhlIGN1cnJlbnQgbGV2ZWwgYXMgaWYgd2UnZCB0b3VjaGVkIHRoZSByZWFzdXJlLlxuICAgICAgICAgICAgSW5wdXQuY29uc3VtZSgpO1xuICAgICAgICAgICAgdGhpcy5maWVsZC53aW5uaW5nID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsIi8qKlxuICogYEdhbWVgIGlzIGEgc2luZ2xldG9uIHRoYXQgcmVwcmVzZW50cyB0aGUgcnVubmluZyBnYW1lIGluIHRoZSBicm93c2VyLFxuICogaW5pdGlhbGl6ZXMgZ2FtZSBzdWJtb2R1bGVzLCBhbmQgaGFuZGxlcyB0aGUgdG9wLWxldmVsIGdhbWUgbG9vcC5cbiAqL1xuXG5pbXBvcnQgeyBTcHJpdGUgfSBmcm9tICcuL1Nwcml0ZSc7XG5pbXBvcnQgeyBJbnB1dCB9IGZyb20gJy4vSW5wdXQnO1xuaW1wb3J0IHsgVGV4dCB9IGZyb20gJy4vVGV4dCc7XG5pbXBvcnQgeyBWaWV3cG9ydCB9IGZyb20gJy4vVmlld3BvcnQnO1xuaW1wb3J0IHsgR0FNRV9XSURUSCwgR0FNRV9IRUlHSFQsIFBMQVlfU1BFRURTIH0gZnJvbSAnLi9Db25zdGFudHMnO1xuaW1wb3J0IHsgQXVkaW8gfSBmcm9tICcuL0F1ZGlvJztcbmltcG9ydCB7IFNjcmVlbiB9IGZyb20gJy4vU2NyZWVuJztcbmltcG9ydCB7IE1haW5NZW51IH0gZnJvbSAnLi9NYWluTWVudSc7XG5pbXBvcnQgeyBJbnN0cnVjdGlvbnNNZW51IH0gZnJvbSAnLi9JbnN0cnVjdGlvbnNNZW51JztcbmltcG9ydCB7IEdhbWVTZXNzaW9uIH0gZnJvbSAnLi9HYW1lU2Vzc2lvbic7XG5cbmV4cG9ydCBjbGFzcyBHYW1lIHtcbiAgICBpbml0KCkge1xuICAgICAgICBTcHJpdGUubG9hZFNwcml0ZXNoZWV0KGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGF3YWl0IFZpZXdwb3J0LmluaXQoKTtcbiAgICAgICAgICAgIGF3YWl0IFNjcmVlbi5pbml0KCk7XG4gICAgICAgICAgICBhd2FpdCBTcHJpdGUuaW5pdCgpO1xuICAgICAgICAgICAgYXdhaXQgVGV4dC5pbml0KCk7XG4gICAgICAgICAgICBhd2FpdCBJbnB1dC5pbml0KCk7XG4gICAgICAgICAgICBhd2FpdCBBdWRpby5pbml0KCk7XG5cbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgKCkgPT4gdGhpcy5wYXVzZSgpKTtcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsICgpID0+IHRoaXMudW5wYXVzZSgpKTtcblxuICAgICAgICAgICAgdGhpcy5zdGFydCgpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBzdGFydCgpIHtcbiAgICAgICAgdGhpcy5mcmFtZSA9IDA7XG4gICAgICAgIHRoaXMucGxheVNwZWVkID0gMDtcbiAgICAgICAgdGhpcy5tZW51ID0gbmV3IE1haW5NZW51KCk7XG5cbiAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB0aGlzLm9uRnJhbWUoKSk7XG4gICAgfVxuXG4gICAgb25GcmFtZSgpIHtcbiAgICAgICAgbGV0IGZwcyA9IDYwO1xuICAgICAgICBsZXQgbm93ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICAgIGxldCBsYXN0RnJhbWUgPSB0aGlzLmxhc3RGcmFtZSB8fCAwO1xuXG4gICAgICAgIC8vIE5vdGU6IHdlIGFyZSB1c2luZyBgcmVxdWVzdEFuaW1hdGlvbkZyYW1lYCwgd2hpY2ggd2lsbCBjYWxsIG91ciBvbkZyYW1lIGhhbmRsZXJcbiAgICAgICAgLy8gNjAgdGltZXMgcGVyIHNlY29uZCBpbiBtb3N0IGNhc2VzLiBIb3dldmVyLCBpdCBjYW4gYmUgaGlnaGVyICh0aGUgYnJvd3NlciBtYXlcbiAgICAgICAgLy8gcmVzcGVjdCB0aGUgdXNlcidzIHJlZnJlc2ggc2V0dGluZ3MsIHdoaWNoIGNvdWxkIGJlIDEyMEh6IG9yIGhpZ2hlciBmb3IgZXhhbXBsZSkuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIEl0J3Mgc2FmZXN0IHRvIGhhdmUgYSBjaGVjayBsaWtlIHdlIGRvIGhlcmUsIHdoZXJlIHdlIGV4cGxpY2l0bHkgbGltaXQgdGhlIG51bWJlclxuICAgICAgICAvLyBvZiB1cGRhdGUgY2FsbHMgdG8gNjAgdGltZXMgcGVyIHNlY29uZC5cbiAgICAgICAgaWYgKG5vdyAtIGxhc3RGcmFtZSA+PSAxMDAwIC8gZnBzKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgICAgICAgICAgdGhpcy5sYXN0RnJhbWUgPSBub3c7XG4gICAgICAgIH1cblxuICAgICAgICBWaWV3cG9ydC5yZXNpemUoKTtcbiAgICAgICAgdGhpcy5kcmF3KCk7XG5cbiAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB0aGlzLm9uRnJhbWUoKSk7XG4gICAgfVxuXG4gICAgdXBkYXRlKCkge1xuICAgICAgICAvLyBQdWxsIGluIGZyYW1lIGJ5IGZyYW1lIGJ1dHRvbiBwdXNoZXMgLyBrZXlwcmVzc2VzIC8gbW91c2UgY2xpY2tzXG4gICAgICAgIElucHV0LnVwZGF0ZSgpO1xuXG4gICAgICAgIC8vIHBlcmZvcm0gYW55IHBlci1mcmFtZSBhdWRpbyB1cGRhdGVzXG4gICAgICAgIEF1ZGlvLnVwZGF0ZSgpO1xuXG4gICAgICAgIGlmICh0aGlzLm1lbnUpIHtcbiAgICAgICAgICAgIHRoaXMubWVudS51cGRhdGUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnNlc3Npb24pIHRoaXMuc2Vzc2lvbi51cGRhdGUoKTtcbiAgICB9XG5cbiAgICBkcmF3KCkge1xuICAgICAgICAvLyBSZXNldCBjYW52YXMgdHJhbnNmb3JtIGFuZCBzY2FsZVxuICAgICAgICBWaWV3cG9ydC5jdHguc2V0VHJhbnNmb3JtKFZpZXdwb3J0LnNjYWxlLCAwLCAwLCBWaWV3cG9ydC5zY2FsZSwgMCwgMCk7XG5cbiAgICAgICAgLy8gQ2xlYXIgY2FudmFzXG4gICAgICAgIFZpZXdwb3J0LmN0eC5maWxsU3R5bGUgPSAnYmxhY2snO1xuICAgICAgICBWaWV3cG9ydC5jdHguZmlsbFJlY3QoMCwgMCwgVmlld3BvcnQud2lkdGgsIFZpZXdwb3J0LmhlaWdodCk7XG5cbiAgICAgICAgLy8gQ2VudGVyIHRoZSA4MHgyNSBjaGFyYWN0ZXIgXCJzY3JlZW5cIiBpbiB0aGUgdmlld3BvcnRcbiAgICAgICAgVmlld3BvcnQuY3R4LnRyYW5zbGF0ZSgoVmlld3BvcnQud2lkdGggLSBHQU1FX1dJRFRIKSAvIDIgfCAwLCAoVmlld3BvcnQuaGVpZ2h0IC0gR0FNRV9IRUlHSFQpIC8gMiB8IDApO1xuXG4gICAgICAgIC8vIEhhbmQgb2ZmIGNvbnRyb2wgdG8gb3VyIHN1Ym1vZHVsZXMgdG8gZHJhdyB3aGF0ZXZlciB0aGV5J2QgbGlrZS4gRm9yIGFsbCB0aGUgc3VibW9kdWxlc1xuICAgICAgICAvLyBiZWxvdyB1cywgXCJkcmF3aW5nXCIgbWVhbnMgd3JpdGluZyB0ZXh0IHRvIHRoZSBTY3JlZW4uXG4gICAgICAgIFNjcmVlbi5jbGVhcigpO1xuICAgICAgICBpZiAodGhpcy5zZXNzaW9uKSB0aGlzLnNlc3Npb24uZHJhdygpO1xuICAgICAgICBpZiAodGhpcy5tZW51KSB0aGlzLm1lbnUuZHJhdygpO1xuXG4gICAgICAgIC8vIFJlbmRlciB0aGUgdGV4dCBvbiB0aGUgc2NyZWVuIHRvIHRoZSB2aWV3cG9ydC5cbiAgICAgICAgU2NyZWVuLmRyYXdUb1ZpZXdwb3J0KCk7XG4gICAgfVxuXG4gICAgcGF1c2UoKSB7XG4gICAgICAgIGlmICh0aGlzLnBhdXNlZCkgcmV0dXJuO1xuICAgICAgICB0aGlzLnBhdXNlZCA9IHRydWU7XG4gICAgICAgIEF1ZGlvLnBhdXNlKCk7XG4gICAgfVxuXG4gICAgdW5wYXVzZSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnBhdXNlZCkgcmV0dXJuO1xuICAgICAgICB0aGlzLnBhdXNlZCA9IGZhbHNlO1xuICAgICAgICBBdWRpby51bnBhdXNlKCk7XG4gICAgfVxuXG4gICAgc3RhcnRTZXNzaW9uKCkge1xuICAgICAgICB0aGlzLm1lbnUgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuc2Vzc2lvbiA9IG5ldyBHYW1lU2Vzc2lvbigpO1xuICAgIH1cblxuICAgIHNob3dNYWluTWVudSgpIHtcbiAgICAgICAgdGhpcy5tZW51ID0gbmV3IE1haW5NZW51KCk7XG4gICAgICAgIHRoaXMuc2Vzc2lvbiA9IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBzaG93SW5zdHJ1Y3Rpb25zKCkge1xuICAgICAgICB0aGlzLm1lbnUgPSBuZXcgSW5zdHJ1Y3Rpb25zTWVudSgpO1xuICAgICAgICB0aGlzLnNlc3Npb24gPSB1bmRlZmluZWQ7XG4gICAgfVxufVxuIiwiLyoqXG4gKiBUaGlzIGlzIHRoZSBlbnRyeSBwb2ludCBmb3IgdGhlIGdhbWUuXG4gKi9cbmltcG9ydCB7IEdhbWUgfSBmcm9tICcuL0dhbWUnO1xuXG5HYW1lLmluaXQoKTtcbiJdLCJuYW1lcyI6WyJERUFUSF9GUkFNRVMiXSwibWFwcGluZ3MiOiI7OztJQUFBO0lBQ0E7SUFDQTtBQUlBO0lBQ0E7SUFDQTtJQUNPLE1BQU0sVUFBVSxHQUFHLEdBQUcsQ0FBQztJQUN2QixNQUFNLFdBQVcsR0FBRyxHQUFHLENBQUM7QUFDL0I7SUFDQTtJQUNBO0lBQ08sTUFBTSxZQUFZLEdBQUcsRUFBRSxDQUFDO0lBQ3hCLE1BQU0sYUFBYSxHQUFHLEVBQUUsQ0FBQztBQUNoQztJQUNBO0lBQ08sTUFBTSxVQUFVLEdBQUcsQ0FBQyxDQUFDO0lBQ3JCLE1BQU0sV0FBVyxHQUFHLEVBQUUsQ0FBQztJQUN2QixNQUFNLGVBQWUsR0FBRyxFQUFFLEdBQUcsVUFBVSxDQUFDO0FBRS9DO0lBQ0E7SUFDTyxNQUFNLFVBQVUsR0FBRyxFQUFFLENBQUM7SUFDdEIsTUFBTSxVQUFVLEdBQUcsRUFBRSxDQUFDO0FBQzdCO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ08sTUFBTSxXQUFXLEdBQUcsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7QUFDbEQ7SUFDQTtJQUNPLE1BQU0sU0FBUyxHQUFHLENBQUMsQ0FBQztBQUMzQjtJQUNBO0lBQ08sTUFBTSxtQkFBbUIsR0FBRyxDQUFDLENBQUM7QUFDckM7SUFDQTtJQUNPLE1BQU0sd0JBQXdCLEdB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QUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBQ3hFLFFBQVEsSUFBSSxDQUFDLElBQUksR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUMvRCxRQUFRLElBQUksQ0FBQyxXQUFXLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUM7SUFDeEUsUUFBUSxJQUFJLENBQUMsTUFBTSxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBQ3JFLFFBQVEsSUFBSSxDQUFDLEdBQUcsR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUM3RDtJQUNBLFFBQVEsSUFBSSxDQUFDLFFBQVEsR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNqRSxRQUFRLElBQUksQ0FBQyxlQUFlLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUM7QUFDN0U7SUFDQSxRQUFRLElBQUksQ0FBQyxRQUFRLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxHQUFHLEVBQUUsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFD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QUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLEtBQUssQ0FBQyxrQkFBa0IsRUFBRSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxPQUFPLENBQUMsRUFBQztBQUNsTjtJQUNBO0lBQ08sTUFBTSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxFQUFD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QUFHLENBQUMsQ0FBQyxDQUFDLElBQUksTUFBTSxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsRUFBRSxZQUFZLEVBQUUsb0JBQW9CLEVBQUUsWUFBWSxFQUFFLGFBQWEsQ0FBQyxFQUFFLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsUUFBUSxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLFVBQVUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLFFBQVEsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLElBQUksRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLFlBQVksRUFBRSxvQkFBb0IsRUFBRSxZQUFZLEVBQUUsY0FBYyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsRUFBRSxZQUFZLEVBQUUsb0JBQW9CLEVBQUUsWUFBWSxFQUFFLGFBQWEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDOztJQ00zOUIsTUFBTSxLQUFLLEdBQUc7SUFDckIsSUFBSSxJQUFJLEdBQUc7SUFDWCxRQUFRLEtBQUssQ0FBQyxXQUFXLEdBQUcsS0FBSyxDQUFDO0FBQ2xDO0lBQ0EsUUFBUSxLQUFLLENBQUMsR0FBRyxHQUFHLEtBQUssQ0FBQztJQUMxQixRQUFRLEtBQUssQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDLEdBQUcsQ0FBQyxVQUFVLEVBQUUsQ0FBQztJQUM3QyxRQUFRLEtBQUssQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLENBQUM7SUFDbkQsUUFBUSxJQUFJLENBQUMsWUFBWSxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUM7QUFDeEM7SUFDQSxRQUFRLEtBQUssQ0FBQyxPQUFPLEdBQUcsRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLEdBQUcsRUFBRSxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUM3RixRQUFRLEtBQUssQ0FBQyxJQUFJLEdBQUcsR0FBRyxJQUFJLEVBQUUsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxHQUFHLEdBQUcsQ0FBQyxFQUFFLE1BQU0sR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUN2RSxRQUFRLEtBQUssQ0FBQyxXQUFXLEdBQUcsR0FBRyxFQUFFLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNuRyxRQUFRLEtBQUssQ0FBQyxNQUFNLEdBQUcsR0FBRyxHQUFHLEVBQUUsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsT0FBTyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUM7SUFDakUsUUFBUSxLQUFLLENBQUMsS0FBSyxHQUFHLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxHQUFHLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxHQUFHLEVB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Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7SUMxRU8sTUFBTSxLQUFLLEdBQUc7SUFDckIsSUFBSSxNQUFNLEVBQUUsU0FBUztJQUNyQixJQUFJLFdBQVcsRUFBRSxTQUFTLENBQUMsTUFBTTtBQUNqQztJQUNBLElBQUksSUFBSSxDQUFDLFdBQVcsRUFBRTtJQUN0QixRQUFRLE9BQU8sQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ2xDO0lBQ0EsUUFBUSxJQUFJLEtBQUssR0FBRyxLQUFLLENBQUMsTUFBTSxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ3BFLFFBQVEsSUFBSSxDQUFDLEtBQUssRUFBRSxNQUFNLElBQUksS0FBSyxDQUFDLENBQUMsc0JBQXNCLEVBQUUsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQzVFO0lBQ0E7SUFDQTtBQUNBO0lBQ0EsUUFBUSxJQUFJLE1BQU0sR0FBRyxLQUFLLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxHQUFHLElBQUksR0FBRyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQzVELFFBQVEsSUFBSSxVQUFVLEdBQUcsRUFBRSxDQUFDO0lBQzVCLFFBQVEsSUFBSSxNQUFNLENBQUM7QUFDbkI7SUFDQTtJQUNBLFFBQVEsTUFBTSxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLFVBQVUsQ0FBQyxDQUFDO0FBQzdDO0lBQ0EsUUFBUSxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsVUFBVSxFQUFFLENBQUMsRUFBRSxFQUFFO0lBQzdDO0lBQ0EsWUFBWSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUM7SUFDM0MsWUFBWSxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsVUFBVSxDQUFDLENBQUM7QUFDdkQ7SUFDQSxZQUFZLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxVQUFVLEVBQUUsQ0FBQyxFQUFFLEVBQUU7SUFDakQ7SUFDQSxnQkFBZ0IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDO0FBQ3REO0lBQ0E7SUFDQTtJQUNBO0FBQ0E7SUFDQSxnQkFBZ0IsSUFBSSxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssR0FBRyxFQUFFO0lBQzFDLG9CQUFvQixVQUFVLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7SUFDOUMsaUJBQWlCO0FBQ2pCO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7QUFDQTtJQUNBLGdCQUFnQixJQUFJLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxHQUFHLEVBQUU7SUFDMUMsb0JBQW9CLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUM7SUFDdkMsb0JBQW9CLE1BQU0sR0FBRyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQztJQUN0QyxpQkFBaUI7QUFDakI7SUFDQTtJQUNBO0lBQ0EsYUFBYTtJQUNiLFNBQVM7QUFDVDtJQUNBLFFBQVEsT0FBTztJQUNmLFlBQVksSUFBSSxFQUFFLEtBQUssQ0FBQyxJQUFJO0lBQzVCLFlBQVksSUFBSSxFQUFFLEtBQUssQ0FBQyxJQUFJO0lBQzVCLFlBQVksUUFBUSxFQUFFLEtBQUssQ0FBQyxRQUFRO0lBQ3BDLFlBQVksTUFBTTtJQUNsQixZQUFZLFVBQVU7SUFDdEIsWUFBWSxNQUFNO0lBQ2xCLFNBQVMsQ0FBQztJQUNWLEtBQUs7SUFDTCxDQUFDOztJQ2hFRDtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtBQVNBO0lBQ08sTUFBTSxZQUFZLENBQUM7SUFDMUIsSUFBSSxXQUFXLENBQUMsV0FBVyxFQUFFO0lBQzdCLFFBQVEsSUFBSSxLQUFLLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQztBQUM1QztJQUNBO0lBQ0EsUUFBUSxJQUFJLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUM7SUFDbkMsUUFBUSxJQUFJLENBQUMsVUFBVSxHQUFHLEtBQUssQ0FBQyxVQUFVLENBQUM7SUFDM0MsUUFBUSxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztBQUN6QjtJQUNBO0lBQ0EsUUFBUSxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksTUFBTSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDakU7SUFDQTtJQUNBLFFBQVEsSUFBSSxDQUFDLEtBQUssR0FBRyxFQUFFLENBQUM7QUFDeEI7SUFDQTtJQUNBLFFBQVEsSUFBSSxDQUFDLE9BQU8sR0FBRyxLQUFLLENBQUM7SUFDN0IsS0FBSztBQUNMO0lBQ0EsSUFBSSxNQUFNLENBQUMsU0FBUyxFQUFFO0lBQ3RCO0lBQ0E7SUFDQSxRQUFRLElBQUksSUFBSSxDQUFDLE9BQU8sRUFBRTtJQUMxQixZQUFZLElBQUksQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLGNBQWMsQ0FBQyxDQUFDO0lBQ3JELFlBQVksSUFBSSxDQUFDLElBQUksSUFBSSxFQUFFLENBQUM7SUFDNUIsWUFBWSxJQUFJLElBQUksQ0FBQyxJQUFJLEdBQUcsQ0FBQyxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsY0FBYyxFQUFFLENBQUM7SUFDN0QsWUFBWSxPQUFPO0lBQ25CLFNBQVM7QUFDVDtJQUNBO0lBQ0EsUUFBUSxJQUFJLElBQUksQ0FBQyxJQUFJLEdBQUcsQ0FBQyxJQUFJLFNBQVMsRUFBRSxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDcEQ7SUFDQSxRQUFRLElBQUksSUFBSSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLElBQUksR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztBQUN2RDtJQUNBO0lBQ0EsUUFBUSxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsU0FBUyxDQUFDLENBQUM7QUFDNUM7SUFDQTtJQUNBLFFBQVEsSUFBSSxJQUFJLEtBQUssSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksSUFBSSxLQUFLLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFO0lBQzlELFlBQVksSUFBSSxJQUFJLENBQUMsbUJBQW1CLENBQUMsSUFBSSxFQUFFLElBQUksR0FBRyxDQUFDLENBQUMsRUFBRTtJQUMxRCxnQkFBZ0IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEdBQUcsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsR0FBRyxDQUFDO0lBQ2xELGFBQWE7SUFDYixTQUFTO0FBQ1Q7SUFDQTtJQUNBLFFBQVEsSUFBSSxTQUFTLEVBQUUsSUFBSSxDQUFDLHNCQUFzQixDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUNqRTtJQUNBO0lBQ0EsUUFBUSxLQUFLLElBQUksSUFBSSxJQUFJLElBQUksQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsU0FBUyxDQUFDLENBQUM7QUFDbEU7SUFDQTtJQUNBLFFBQVEsSUFBSSxTQUFTLEVBQUUsSUFBSSxDQUFDLHNCQUFzQixDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUNqRTtJQUNBLFFBQVEsSUFBSSxTQUFTLEVBQUU7SUFDdkI7SUFDQSxZQUFZLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFO0lBQzdELGdCQUFnQixJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUM7SUFDaEUsZ0JBQWdCLElBQUksQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLFlBQVksQ0FBQyxDQUFDO0lBQ3ZELGFBQWE7QUFDYjtJQUNBO0lBQ0EsWUFBWSxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRTtJQUMvRCxnQkFBZ0IsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUM7SUFDcEMsZ0JBQWdCLE9BQU87SUFDdkIsYUFBYTtBQUNiO0lBQ0E7SUFDQSxZQUFZLElBQUksSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFO0lBQ2pFLGdCQUFnQixRQUFRLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxHQUFHLENBQUMsQ0FBQztJQUNyRCxvQkFBb0IsS0FBSyxDQUFDO0lBQzFCLHdCQUF3QixJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDO0lBQ3ZELHdCQUF3QixJQUFJLENBQUMsTUFBTSxDQUFDLFNBQVMsR0FBRyxTQUFTLENBQUM7SUFDMUQsd0JBQXdCLE1BQU07SUFDOUIsb0JBQW9CLEtBQUssQ0FBQztJQUMxQix3QkFBd0IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQztJQUN4RCx3QkFBd0IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFDO0lBQzFELHdCQUF3QixNQUFNO0lBQzlCLG9CQUFvQixLQUFLLENBQUM7SUFDMUIsd0JBQXdCLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQyxPQUFPLENBQUM7SUFDMUQsd0JBQXdCLElBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxHQUFHLFNBQVMsQ0FBQztJQUMxRCx3QkFBd0IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLEdBQUcsQ0FBQyxDQUFDO0lBQ2pELHdCQUF3QixNQUFNO0lBQzlCLG9CQUFvQixLQUFLLENBQUM7SUFDMUIsd0JBQXdCLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQyxTQUFTLENBQUM7SUFDNUQsd0JBQXdCLElBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUM7SUFDM0Qsd0JBQXdCLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxHQUFHLENBQUMsQ0FBQztJQUNqRCx3QkFBd0IsTUFBTTtJQUM5QixvQkFBb0IsS0FBSyxDQUFDO0lBQzFCLHdCQUF3QixJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUMsVUFBVSxDQUFDO0lBQzdELHdCQUF3QixJQUFJLENBQUMsTUFBTSxDQUFDLFNBQVMsR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDO0lBQzVELHdCQUF3QixJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUM7SUFDakQsd0JBQXdCLE1BQU07SUFDOUIsaUJBQWlCO0lBQ2pCLGFBQWE7QUFDYjtJQUNBO0lBQ0EsWUFBWSxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLElBQUksSUFBSSxJQUFJLENBQUMsS0FBSyxLQUFLLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUM5RTtJQUNBO0lBQ0EsWUFBWSxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxRQUFRLEVBQUUsSUFBSSxJQUFJLENBQUMsTUFBTSxFQUFFLEdBQUcsSUFBSSxFQUFFO0lBQzdFLGdCQUFnQixJQUFJLFNBQVMsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztJQUNwRyxnQkFBZ0IsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQztJQUNyRCxhQUFhO0FBQ2I7SUFDQTtJQUNBLFlBQVksSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssS0FBSyxLQUFLLENBQUMsSUFBSSxFQUFFO0lBQ2xELGdCQUFnQixJQUFJLENBQUMsT0FBTyxDQUFDLFlBQVksRUFBRSxDQUFDO0lBQzVDLGFBQWE7SUFDYixTQUFTO0lBQ1QsS0FBSztBQUNMO0lBQ0EsSUFBSSxJQUFJLEdBQUc7SUFDWDtJQUNBLFFBQVEsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLEdBQUcsSUFBSSxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNqRTtJQUNBO0lBQ0EsUUFBUSxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQzNCO0lBQ0E7SUFDQSxRQUFRLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLElBQUksSUFBSSxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQztJQUNoRCxLQUFLO0FBQ0w7SUFDQTtJQUNBO0lBQ0E7SUFDQTtBQUNBO0lBQ0EsSUFBSSxPQUFPLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRTtJQUNsQixRQUFRLE9BQU8sQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQztJQUNqRyxLQUFLO0FBQ0w7SUFDQSxJQUFJLFVBQVUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFO0lBQ3JCLFFBQVEsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxVQUFVLEVBQUU7SUFDdEMsWUFBWSxPQUFPLEtBQUssQ0FBQztJQUN6QixTQUFTLE1BQU07SUFDZixZQUFZLE9BQU8sQ0FBQyxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzNELFNBQVM7SUFDVCxLQUFLO0FBQ0w7SUFDQSxJQUFJLFFBQVEsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFO0lBQ25CLFFBQVEsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQztJQUN6QyxLQUFLO0FBQ0w7SUFDQSxJQUFJLFFBQVEsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFO0lBQ25CLFFBQVEsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQztJQUN6QyxLQUFLO0FBQ0w7SUFDQSxJQUFJLFVBQVUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFO0lBQ3JCLFFBQVEsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQztJQUN6QyxLQUFLO0FBQ0w7SUFDQSxJQUFJLFlBQVksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFO0lBQ3ZCLFFBQVEsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQztJQUN6QyxLQUFLO0FBQ0w7SUFDQSxJQUFJLE9BQU8sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFO0lBQ2xCLFFBQVEsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQztJQUN6QyxLQUFLO0FBQ0w7SUFDQSxJQUFJLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFO0lBQ2pCLFFBQVEsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQztJQUN6QyxLQUFLO0FBQ0w7SUFDQSxJQUFJLG1CQUFtQixDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUU7SUFDOUIsUUFBUSxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssR0FBRyxDQUFDO0lBQ3pDLEtBQUs7QUFDTDtJQUNBLElBQUksVUFBVSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUU7SUFDckIsUUFBUSxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsT0FBTyxLQUFLLENBQUM7SUFDaEMsUUFBUSxPQUFPLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzNELEtBQUs7QUFDTDtJQUNBLElBQUksWUFBWSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUU7SUFDdkIsUUFBUSxPQUFPLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzFFLEtBQUs7QUFDTDtJQUNBLElBQUksc0JBQXNCLEdBQUc7SUFDN0I7SUFDQSxRQUFRLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEtBQUssS0FBSyxDQUFDLEtBQUssSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssS0FBSyxLQUFLLENBQUMsSUFBSSxFQUFFLE9BQU87QUFDMUY7SUFDQTtJQUNBLFFBQVEsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUU7SUFDdkQsWUFBWSxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDO0lBQzVDLFNBQVM7QUFDVDtJQUNBO0lBQ0EsUUFBUSxJQUFJLElBQUksQ0FBQyxJQUFJLElBQUksQ0FBQyxFQUFFO0lBQzVCLFlBQVksSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQztJQUM1QyxTQUFTO0FBQ1Q7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQSxRQUFRLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtJQUNwRCxZQUFZLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEtBQUssSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUU7SUFDbkQsZ0JBQWdCLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEtBQUssSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUU7SUFDdkQsb0JBQW9CLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUM7SUFDcEQsb0JBQW9CLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUM1QyxvQkFBb0IsTUFBTTtJQUMxQixpQkFBaUIsTUFBTSxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxLQUFLLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFO0lBQ3ZILG9CQUFvQixJQUFJLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxVQUFVLENBQUMsQ0FBQztJQUN6RCxpQkFBaUIsTUFBTSxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxLQUFLLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUU7SUFDNUssb0JBQW9CLElBQUksQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLFVBQVUsQ0FBQyxDQUFDO0lBQ3pELGlCQUFpQjtJQUNqQixhQUFhO0lBQ2IsU0FBUztJQUNULEtBQUs7QUFDTDtJQUNBLElBQUksUUFBUSxHQUFHO0lBQ2Y7SUFDQTtJQUNBO0lBQ0EsUUFBUSxPQUFPLFNBQVMsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sR0FBRyxtQkFBbUIsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLFlBQVksRUFBRSxHQUFHLHVCQUF1QixDQUFDO0lBQ2hJLEtBQUs7SUFDTDs7SUN4UEE7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7QUFRQTtJQUNPLE1BQU0sV0FBVyxDQUFDO0lBQ3pCLElBQUksV0FBVyxHQUFHO0lBQ2xCLFFBQVEsSUFBSSxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUM7SUFDdkIsUUFBUSxJQUFJLENBQUMsV0FBVyxHQUFHLENBQUMsQ0FBQztJQUM3QixRQUFRLElBQUksQ0FBQyxVQUFVLEdBQUcsQ0FBQyxDQUFDO0lBQzVCLFFBQVEsSUFBSSxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUM7SUFDdkIsUUFBUSxJQUFJLENBQUMsUUFBUSxHQUFHLEdBQUcsQ0FBQztJQUM1QixLQUFLO0FBQ0w7SUFDQSxJQUFJLE1BQU0sR0FBRztJQUNiO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQSxRQUFRLElBQUksR0FBRyxHQUFHLElBQUksSUFBSSxFQUFFLENBQUMsT0FBTyxFQUFFLENBQUM7SUFDdkMsUUFBUSxJQUFJLFNBQVMsR0FBRyxJQUFJLENBQUMsU0FBUyxJQUFJLENBQUMsQ0FBQztJQUM1QyxRQUFRLElBQUksU0FBUyxHQUFHLEtBQUssQ0FBQztBQUM5QjtJQUNBLFFBQVEsSUFBSSxHQUFHLEdBQUcsU0FBUyxLQUFLLElBQUksQ0FBQyxTQUFTLElBQUksQ0FBQyxDQUFDLEVBQUU7SUFDdEQsWUFBWSxTQUFTLEdBQUcsSUFBSSxDQUFDO0lBQzdCLFlBQVksSUFBSSxDQUFDLFNBQVMsR0FBRyxHQUFHLEdBQUcsSUFBSSxDQUFDLHlCQUF5QixFQUFFLENBQUM7SUFDcEUsU0FBUztBQUNUO0lBQ0E7SUFDQSxRQUFRLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxZQUFZLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO0FBQ3pFO0lBQ0E7SUFDQSxRQUFRLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDO0FBQ3JDO0lBQ0EsUUFBUSxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztJQUNoQyxLQUFLO0FBQ0w7SUFDQSxJQUFJLElBQUksR0FBRztJQUNYLFFBQVEsSUFBSSxJQUFJLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDMUM7SUFDQSxRQUFRLElBQUksSUFBSSxHQUFHO0lBQ25CLFlBQVksTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQztJQUMvQyxZQUFZLE1BQU0sQ0FBQyxJQUFJLENBQUMsV0FBVyxHQUFHLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDO0lBQ3pELFlBQVksTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQztJQUMvQyxZQUFZLElBQUksQ0FBQyxLQUFLLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsR0FBRyxFQUFFO0lBQ3RFLFNBQVMsQ0FBQztJQUNWLFFBQVEsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxhQUFhLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLGNBQWMsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsbUJBQW1CLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzdILEtBQUs7QUFDTDtJQUNBLElBQUksWUFBWSxHQUFHO0lBQ25CLFFBQVEsSUFBSSxDQUFDLEtBQUssR0FBRyxTQUFTLENBQUM7SUFDL0IsS0FBSztBQUNMO0lBQ0EsSUFBSSxjQUFjLEdBQUc7SUFDckIsUUFBUSxJQUFJLENBQUMsS0FBSyxHQUFHLFNBQVMsQ0FBQztJQUMvQixRQUFRLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztJQUMzQixRQUFRLElBQUksSUFBSSxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUMsV0FBVyxLQUFLLENBQUMsRUFBRTtJQUN4RCxZQUFZLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztJQUM5QixTQUFTO0lBQ1QsS0FBSztBQUNMO0lBQ0EsSUFBSSxXQUFXLENBQUMsU0FBUyxFQUFFO0lBQzNCLFFBQVEsUUFBUSxTQUFTO0lBQ3pCLFlBQVksS0FBSyxVQUFVO0lBQzNCLGdCQUFnQixJQUFJLENBQUMsS0FBSyxJQUFJLEdBQUcsQ0FBQztJQUNsQyxnQkFBZ0IsTUFBTTtJQUN0QixZQUFZLEtBQUssWUFBWTtJQUM3QixnQkFBZ0IsSUFBSSxDQUFDLEtBQUssSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQztJQUM5QyxnQkFBZ0IsTUFBTTtJQUN0QixZQUFZLEtBQUssY0FBYztJQUMvQjtJQUNBLGdCQUFnQixJQUFJLENBQUMsS0FBSyxJQUFJLEVBQUUsQ0FBQztJQUNqQyxnQkFBZ0IsTUFBTTtJQUN0QixTQUFTO0lBQ1QsS0FBSztBQUNMO0lBQ0EsSUFBSSxZQUFZLEdBQUc7SUFDbkI7SUFDQTtJQUNBO0lBQ0EsUUFBUSxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUMsV0FBVyxDQUFDLENBQUM7SUFDaEUsS0FBSztBQUNMO0lBQ0EsSUFBSSx5QkFBeUIsR0FBRztJQUNoQztJQUNBLFFBQVEsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLEdBQUcsSUFBSSxDQUFDLFlBQVksRUFBRSxHQUFHLHdCQUF3QixHQUFHLFdBQVcsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQztJQUN0SSxLQUFLO0FBQ0w7SUFDQSxJQUFJLGdCQUFnQixHQUFHO0lBQ3ZCO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBLFFBQVEsSUFBSSxnQkFBZ0IsR0FBRyxLQUFLLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxLQUFLLElBQUksS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQztJQUM1RixRQUFRLElBQUksZ0JBQWdCLENBQUMsS0FBSyxDQUFDLGNBQWMsQ0FBQyxFQUFFO0lBQ3BEO0lBQ0E7SUFDQSxZQUFZLEtBQUssQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUM1QixZQUFZLElBQUksQ0FBQyxXQUFXLEdBQUcsUUFBUSxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7SUFDdkQsWUFBWSxJQUFJLENBQUMsS0FBSyxHQUFHLFNBQVMsQ0FBQztJQUNuQyxTQUFTLE1BQU0sSUFBSSxnQkFBZ0IsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLEVBQUU7SUFDdkQsWUFBWSxLQUFLLENBQUMsT0FBTyxFQUFFLENBQUM7SUFDNUIsWUFBWSxPQUFPLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxDQUFDO0lBQ3BDLFNBQVMsTUFBTSxJQUFJLGdCQUFnQixDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsRUFBRTtJQUN2RDtJQUNBLFlBQVksS0FBSyxDQUFDLE9BQU8sRUFBRSxDQUFDO0lBQzVCLFlBQVksSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDO0lBQ3RDLFNBQVM7SUFDVCxLQUFLO0lBQ0w7O0lDL0lBO0lBQ0E7SUFDQTtJQUNBO0FBWUE7SUFDTyxNQUFNLElBQUksQ0FBQztJQUNsQixJQUFJLElBQUksR0FBRztJQUNYLFFBQVEsTUFBTSxDQUFDLGVBQWUsQ0FBQyxZQUFZO0lBQzNDLFlBQVksTUFBTSxRQUFRLENBQUMsSUFBSSxFQUFFLENBQUM7SUFDbEMsWUFBWSxNQUFNLE1BQU0sQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUNoQyxZQUFZLE1BQU0sTUFBTSxDQUFDLElBQUksRUFBRSxDQUFDO0lBQ2hDLFlBQVksTUFBTSxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7SUFDOUIsWUFBWSxNQUFNLEtBQUssQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUMvQixZQUFZLE1BQU0sS0FBSyxDQUFDLElBQUksRUFBRSxDQUFDO0FBQy9CO0lBQ0EsWUFBWSxNQUFNLENBQUMsZ0JBQWdCLENBQUMsTUFBTSxFQUFFLE1BQU0sSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUM7SUFDaEUsWUFBWSxNQUFNLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLE1BQU0sSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUM7QUFDbkU7SUFDQSxZQUFZLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQztJQUN6QixTQUFTLENBQUMsQ0FBQztJQUNYLEtBQUs7QUFDTDtJQUNBLElBQUksS0FBSyxHQUFHO0lBQ1osUUFBUSxJQUFJLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQztJQUN2QixRQUFRLElBQUksQ0FBQyxTQUFTLEdBQUcsQ0FBQyxDQUFDO0lBQzNCLFFBQVEsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLFFBQVEsRUFBRSxDQUFDO0FBQ25DO0lBQ0EsUUFBUSxNQUFNLENBQUMscUJBQXFCLENBQUMsTUFBTSxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQztJQUMzRCxLQUFLO0FBQ0w7SUFDQSxJQUFJLE9BQU8sR0FBRztJQUNkLFFBQVEsSUFBSSxHQUFHLEdBQUcsRUFBRSxDQUFDO0lBQ3JCLFFBQVEsSUFBSSxHQUFHLEdBQUcsSUFBSSxJQUFJLEVBQUUsQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUN2QyxRQUFRLElBQUksU0FBUyxHQUFHLElBQUksQ0FBQyxTQUFTLElBQUksQ0FBQyxDQUFDO0FBQzVDO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0EsUUFBUSxJQUFJLEdBQUcsR0FBRyxTQUFTLElBQUksSUFBSSxHQUFHLEdBQUcsRUFBRTtJQUMzQyxZQUFZLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztJQUMxQixZQUFZLElBQUksQ0FBQyxTQUFTLEdBQUcsR0FBRyxDQUFDO0lBQ2pDLFNBQVM7QUFDVDtJQUNBLFFBQVEsUUFBUSxDQUFDLE1BQU0sRUFBRSxDQUFDO0lBQzFCLFFBQVEsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ3BCO0lBQ0EsUUFBUSxNQUFNLENBQUMscUJBQXFCLENBQUMsTUFBTSxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQztJQUMzRCxLQUFLO0FBQ0w7SUFDQSxJQUFJLE1BQU0sR0FBRztJQUNiO0lBQ0EsUUFBUSxLQUFLLENBQUMsTUFBTSxFQUFFLENBQUM7QUFDdkI7SUFDQTtJQUNBLFFBQVEsS0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDO0FBQ3ZCO0lBQ0EsUUFBUSxJQUFJLElBQUksQ0FBQyxJQUFJLEVBQUU7SUFDdkIsWUFBWSxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO0lBQy9CLFNBQVM7QUFDVDtJQUNBLFFBQVEsSUFBSSxJQUFJLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxFQUFFLENBQUM7SUFDaEQsS0FBSztBQUNMO0lBQ0EsSUFBSSxJQUFJLEdBQUc7SUFDWDtJQUNBLFFBQVEsUUFBUSxDQUFDLEdBQUcsQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDLEtBQUssRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLFFBQVEsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQzlFO0lBQ0E7SUFDQSxRQUFRLFFBQVEsQ0FBQyxHQUFHLENBQUMsU0FBUyxHQUFHLE9BQU8sQ0FBQztJQUN6QyxRQUFRLFFBQVEsQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsUUFBUSxDQUFDLEtBQUssRUFBRSxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDckU7SUFDQTtJQUNBLFFBQVEsUUFBUSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQyxRQUFRLENBQUMsS0FBSyxHQUFHLFVBQVUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsUUFBUSxDQUFDLE1BQU0sR0FBRyxXQUFXLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0FBQy9HO0lBQ0E7SUFDQTtJQUNBLFFBQVEsTUFBTSxDQUFDLEtBQUssRUFBRSxDQUFDO0lBQ3ZCLFFBQVEsSUFBSSxJQUFJLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxFQUFFLENBQUM7SUFDOUMsUUFBUSxJQUFJLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUN4QztJQUNBO0lBQ0EsUUFBUSxNQUFNLENBQUMsY0FBYyxFQUFFLENBQUM7SUFDaEMsS0FBSztBQUNMO0lBQ0EsSUFBSSxLQUFLLEdBQUc7SUFDWixRQUFRLElBQUksSUFBSSxDQUFDLE1BQU0sRUFBRSxPQUFPO0lBQ2hDLFFBQVEsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUM7SUFDM0IsUUFBUSxLQUFLLENBQUMsS0FBSyxFQUFFLENBQUM7SUFDdEIsS0FBSztBQUNMO0lBQ0EsSUFBSSxPQUFPLEdBQUc7SUFDZCxRQUFRLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLE9BQU87SUFDakMsUUFBUSxJQUFJLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQztJQUM1QixRQUFRLEtBQUssQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUN4QixLQUFLO0FBQ0w7SUFDQSxJQUFJLFlBQVksR0FBRztJQUNuQixRQUFRLElBQUksQ0FBQyxJQUFJLEdBQUcsU0FBUyxDQUFDO0lBQzlCLFFBQVEsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLFdBQVcsRUFBRSxDQUFDO0lBQ3pDLEtBQUs7QUFDTDtJQUNBLElBQUksWUFBWSxHQUFHO0lBQ25CLFFBQVEsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLFFBQVEsRUFBRSxDQUFDO0lBQ25DLFFBQVEsSUFBSSxDQUFDLE9BQU8sR0FBRyxTQUFTLENBQUM7SUFDakMsS0FBSztBQUNMO0lBQ0EsSUFBSSxnQkFBZ0IsR0FBRztJQUN2QixRQUFRLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxnQkFBZ0IsRUFBRSxDQUFDO0lBQzNDLFFBQVEsSUFBSSxDQUFDLE9BQU8sR0FBRyxTQUFTLENBQUM7SUFDakMsS0FBSztJQUNMOztJQzVIQTtJQUNBO0lBQ0E7QUFFQTtJQUNBLElBQUksQ0FBQyxJQUFJLEVBQUU7Ozs7OzsifQ==\n","/**\n * Constants\n */\n\n// Spritesheet URI (produced during gulp build)\nexport const SPRITESHEET_URI = 'sprites.png';\n\n// The playable area. Note that this is the desired dimensions, but the actual on-screen dimensions\n// may be larger to maintain aspect ratio (see `Viewport.width` & `Viewport.height`).\nexport const GAME_WIDTH = 640;\nexport const GAME_HEIGHT = 400;\n\n// The \"screen area\". This is an ASCII game and so most of the game logic doesn't care about browser\n// pixels, we care about the ASCII display area (80x25).\nexport const SCREEN_WIDTH = 80;\nexport const SCREEN_HEIGHT = 25;\n\n// The size of our on-screen characters (given dimensions above, this is 80 cols by 25 rows).\nexport const CHAR_WIDTH = 8;\nexport const CHAR_HEIGHT = 16;\nexport const CHARSHEET_WIDTH = 16 * CHAR_WIDTH;\nexport const CHARSHEET_HEIGHT = 32 * CHAR_HEIGHT;\n\n// Fixed level size\nexport const LEVEL_ROWS = 20;\nexport const LEVEL_COLS = 79;\n\n// Play speeds, expressed as frames per second.\n//\n// According to the original, the play speeds had millisecond delays of:\n//   [100ms, 50ms, 25ms, 13ms, 7ms].\n//\n// This would mean the effective FPS was:\n//   [10, 20, 40, 76, 142].\n//\n// I think this is way too high, and might not be accurate (it doesn't count\n// time spent drawing the screen and running the game's logic, which might\n// be a significant number of milliseconds). From memory, each speed was about\n// 50% faster than the previous one, so that's what I've set here.\nexport const PLAY_SPEEDS = [120, 100, 90, 50, 30];\n\n// Maximum number of rocks on screen at once\nexport const MAX_ROCKS = 7;\n\n// Each dispenser on the level increases max rocks by 1\nexport const DISPENSER_MAX_ROCKS = 1;\n\n// Hidden difficulty factor - the game gets 5% faster each level cycle\nexport const HIDDEN_FACTOR_PLAY_SPEED = 0.05;\n\n// Hidden difficulty factor - the maximum number of rocks increases each level cycle\nexport const HIDDEN_FACTOR_MAX_ROCKS = 2;\n\n// Score events (note, these are just identifiers for the types of score increases, not\n// actual score values).\nexport const SCORE_ROCK = 1;\nexport const SCORE_STATUE = 2;\nexport const SCORE_TREASURE = 3;\n","'use strict';\n\nimport { GAME_WIDTH, GAME_HEIGHT } from './Constants';\n\n/**\n * Viewport\n *\n * Represents the game display (for us, a canvas).\n */\nexport const Viewport = {\n    init() {\n        Viewport.canvas = document.getElementById('canvas');\n        Viewport.ctx = Viewport.canvas.getContext('2d');\n        Viewport.resize(true);\n    },\n\n    // Resize the canvas to give us approximately our desired game display size.\n    //\n    // Rather than attempt to explain it, here's a concrete example:\n    //\n    //     we start with a desired game dimension:   480x270px\n    //          get the actual browser dimensions:  1309x468px\n    //          factor in the display's DPI ratio:  2618x936px\n    //         now calculate the horizontal scale:       5.45x\n    //                     and the vertical scale:       3.46x\n    //            our new offical game scaling is:        5.4x\n    //       and our official viewport dimensions:   484x173px\n    //\n    // This approach emphasizes correct aspect ratio and maintains full-window rendering, at\n    // the potential cost of limiting visibility of the game itself in either the X or Y axis.\n    // If you use this approach, make sure your GUI can \"float\" (otherwise there may be whole\n    // UI elements the player cannot see!).\n    resize(force) {\n        let dpi = window.devicePixelRatio,\n            width = Viewport.canvas.clientWidth,\n            height = Viewport.canvas.clientHeight,\n            dpiWidth = width * dpi,\n            dpiHeight = height * dpi;\n\n        if (\n            force ||\n            Viewport.canvas.width !== dpiWidth ||\n            Viewport.canvas.height !== dpiHeight\n        ) {\n            Viewport.canvas.width = dpiWidth;\n            Viewport.canvas.height = dpiHeight;\n\n            Viewport.scale = ((Math.min(dpiWidth / GAME_WIDTH, dpiHeight / GAME_HEIGHT) * 10) | 0) / 10;\n            Viewport.width = Math.ceil(dpiWidth / Viewport.scale);\n            Viewport.height = Math.ceil(dpiHeight / Viewport.scale);\n            Viewport.center = {\n                u: (Viewport.width / 2) | 0,\n                v: (Viewport.height / 2) | 0\n            };\n            Viewport.clientWidth = width;\n            Viewport.clientHeight = height;\n\n            // Note: smoothing flag gets reset on every resize by some browsers, which is why\n            // we do it here.\n            Viewport.ctx.imageSmoothingEnabled = false;\n        }\n\n        // We do this every frame, not just on resize, due to browser sometimes \"forgetting\".\n        //Viewport.canvas.style.cursor = 'none';\n    }\n};\n","'use strict';\n\nimport { Game } from './Game';\nimport { Viewport } from './Viewport';\n\nexport function qr2xy(pos) {\n    return {\n        x: pos.q * 13,\n        y: pos.q * 6 + pos.r * 12\n    };\n}\n\nexport function xy2qr(pos) {\n    let qrFraction = {\n        q: (pos.x / 13),\n        r: ((pos.y - pos.x * 6 / 13) / 12)\n    };\n    return qrRounded(qrFraction);\n}\n\nexport function xy2uv(pos) {\n    return {\n        u: pos.x + Viewport.center.u - Game.camera.pos.x,\n        v: pos.y + Viewport.center.v - Game.camera.pos.y\n    };\n}\n\nexport function uv2xy(pos) {\n    return {\n        x: pos.u - Viewport.center.u + Game.camera.pos.x,\n        y: pos.v - Viewport.center.v + Game.camera.pos.y\n    };\n}\n\nexport function qr2qrs(pos) {\n    return { q: pos.q, r: pos.r, s: -pos.q-pos.r };\n}\n\nexport function qrs2qr(pos) {\n    return { q: pos.q, r: pos.r };\n}\n\nexport function tileIsPassable(q, r) {\n    if (Game.brawl) {\n        let room = Game.brawl.room;\n        if (\n            q < room.q ||\n            r < room.r ||\n            q >= room.q + room.w ||\n            r >= room.r + room.h\n        )\n            return false;\n    }\n    if (q < 0 || r < 0 || q >= Game.maze.w || r >= Game.maze.h) return false;\n    return !!Game.maze.maze[r][q];\n}\n\nexport function rgba(r, g, b, a) {\n    return `rgba(${r},${g},${b},${a})`;\n}\n\nexport function createCanvas(width, height) {\n    let canvas = document.createElement('canvas');\n    canvas.width = width;\n    canvas.height = height;\n    let ctx = canvas.getContext('2d');\n    return { canvas, ctx };\n}\n\nexport function roomCenter(room) {\n    return {\n        x: (room.q + room.w / 2) * TILE_SIZE,\n        y: (room.r + room.h / 2) * TILE_SIZE\n    };\n}\n\nexport function partialText(text, t, d) {\n    let length = clamp(Math.ceil(t / d * text.length), 0, text.length),\n        substr = text.slice(0, length),\n        idx = text.indexOf(' ', length - 1);\n    if (idx < 0) idx = text.length;\n    if (idx - length > 0) substr += '#'.repeat(idx - length);\n\n    return substr;\n}\n","'use strict';\n\n/**\n * This module is generated by `gulp buildAssets`.\n */\nexport const SpriteSheet =\n    /* <generated> */\n{ font: [ [ 128, 0, 128, 448 ] ],\n  font2: [ [ 0, 0, 128, 512 ] ],\n  harold: [ [ 128, 448, 19, 12 ] ],\n  uri: 'sprites.png' }\n/* </generated> */\n","'use strict';\n\nimport { Game } from './Game';\nimport { rgba, createCanvas } from './Util';\nimport { SpriteSheet } from './SpriteSheet-gen';\nimport { Viewport } from './Viewport';\n\n/**\n * Sprite\n *\n * Encapsulates loading sprite slices from the spritesheet, organizing them, and\n * modifying them or constructing using primitives. To save space, we use some techniques\n * like storing only a small slice of an image in the spritesheet, then using code\n * to duplicate it, add some randomness, etc.\n */\nexport const Sprite = {\n    // This is an exception to the rule, loading the spritesheet is a special action that\n    // happens BEFORE everything is initialized.\n    loadSpritesheet(cb) {\n        let image = new Image();\n        image.onload = cb;\n        image.src = SpriteSheet.uri;\n        Sprite.sheet = image;\n    },\n\n    init() {\n        // Base pixel font and icons (see `Text.init` for additional variations)\n        Sprite.font = initBasicSprite(SpriteSheet.font2[0]);\n\n        return;\n    },\n\n    /**\n     * A small helper that draws a sprite onto a canvas, respecting the anchor point of\n     * the sprite. Note that the canvas should be PRE-TRANSLATED and PRE-ROTATED, if\n     * that's appropriate!\n     */\n    drawSprite(ctx, sprite, u, v) {\n        ctx.drawImage(sprite.img, u - sprite.anchor.x, v - sprite.anchor.y);\n    },\n\n    drawViewportSprite(sprite, pos, rotation) {\n        let { u, v } = this.viewportSprite2uv(\n            sprite,\n            pos\n        );\n        if (rotation) {\n            Viewport.ctx.save();\n            Viewport.ctx.translate(u + sprite.anchor.x, v + sprite.anchor.y);\n            Viewport.ctx.rotate(rotation);\n            Viewport.ctx.drawImage(\n                sprite.img,\n                -sprite.anchor.x,\n                -sprite.anchor.y\n            );\n            Viewport.ctx.restore();\n        } else {\n            Viewport.ctx.drawImage(sprite.img, u, v);\n        }\n    },\n\n    viewportSprite2uv(sprite, pos) {\n        return {\n            u: pos.x - sprite.anchor.x - Game.camera.pos.x + Viewport.center.u,\n            v: pos.y - sprite.anchor.y - Game.camera.pos.y + Viewport.center.v\n        };\n    }\n};\n\n// Sprite utility functions\n\nfunction initBasicSprite(data, anchor) {\n    return initDynamicSprite(loadCacheSlice(...data), anchor);\n}\n\nfunction initDynamicSprite(source, anchor) {\n    let w = source.width,\n        h = source.height;\n\n    return {\n        img: source,\n        // Hack! Using a flat `.map(initBasicSprite)` is actually going to pass the\n        // element INDEX as second argument, resulting in \"anchor=1\". The right solution\n        // here is \"typeof anchor === 'object' ?\", but to save bytes I avoid using\n        // the typeof and instanceof keywords anywhere in the codebase. Hence,\n        // \"anchor && anchor.x\".\n        anchor: (anchor && anchor.x) ? anchor : { x: (w / 2) | 0, y: (h / 2) | 0 }\n    };\n}\n\nfunction loadCacheSlice(x, y, w, h) {\n    const source = Sprite.sheet;\n    const sliceCanvas = createCanvas(w, h);\n    sliceCanvas.ctx.drawImage(source, x, y, w, h, 0, 0, w, h);\n    return sliceCanvas.canvas;\n}\n","\n// A list of in-game actions that can be performed by the player\nconst Action = {\n    UP:     11,\n    DOWN:   12,\n    LEFT:   13,\n    RIGHT:  14,\n    JUMP:   15,\n    STOP:   16,\n    PAUSE:  17,\n    RESUME: 18\n};\n\n// A list of key code mappings and what action they perform. Here we hard-code it, but\n// you could easily also have the key mappings controlled by settings and let the user\n// configure it.\nconst KeyMapping = {\n    KeyW:       Action.UP,\n    KeyS:       Action.DOWN,\n    KeyA:       Action.LEFT,\n    KeyD:       Action.RIGHT,\n    ArrowUp:    Action.UP,\n    ArrowDown:  Action.DOWN,\n    ArrowLeft:  Action.LEFT,\n    ArrowRight: Action.RIGHT,\n    Space:      Action.JUMP,\n    Escape:     Action.PAUSE,\n    Enter:      Action.RESUME\n};\n\nexport const Input = {\n    Action,\n    KeyMapping,\n\n    init() {\n        // Input buffer - new keypress events go into this buffer to be handled\n        // during the game's update loop. It's up to the `update()` methods to consume\n        // key presses and remove them from the buffer.\n        this.buffer = [];\n\n        // Input history - history contains recent key press events in order,\n        // removed automatically after a few seconds. This is useful for detecting\n        // inputs like cheat codes, for example.\n        this.history = [];\n\n        window.addEventListener('keydown', event => {\n            let entry = {\n                at: new Date().getTime(),\n                key: event.key,\n                code: event.code,\n                action: Input.KeyMapping[event.code] || Input.Action.STOP\n            };\n            Input.buffer.push(entry);\n            Input.history.push(entry);\n            console.log(entry);\n        });\n    },\n\n    update() {\n        let now = new Date().getTime();\n        this.history = this.history.filter(entry => entry.at > now - 3000);\n    },\n\n    lastKeyPressed() {\n        return this.buffer.length > 0 ? this.buffer[this.buffer.length - 1].key : '';\n    },\n\n    lastCodePressed() {\n        return this.buffer.length > 0 ? this.buffer[this.buffer.length - 1].code : '';\n    },\n\n    lastActionPressed() {\n        return this.buffer.length > 0 ? this.buffer[this.buffer.length - 1].action : undefined;\n    },\n\n    consume() {\n        this.buffer = [];\n    },\n}\n","/**\n * `Text` is a singleton responsible for drawing text characters on the viewport. This\n * game uses a custom pixel font, so we need to implement some basic text handling\n * (splitting long lines, measuring character width, etc.) ourselves.\n */\n\nimport { Sprite } from './Sprite';\nimport { rgba, createCanvas } from './Util';\nimport { CHAR_WIDTH, CHAR_HEIGHT, CHARSHEET_WIDTH } from './Constants';\nimport { Viewport } from './Viewport';\n\n// In our character sheet, chars 0x00-0x7F are standard ASCII, below that we put whatever\n// characters are convenient for us. Here we can choose to map unicode characters to positions\n// 0x80+ in the charsheet, making it easy for us to render things like special characters,\n// box drawing characters, etc.\n//\n// Note: I like pasting actual characters instead of codes (\"├\" instead of \"\\u251C\"). If you\n// do this, don't forget to explicitly tell the browser what charset your JS file is, or it\n// won't execute -- see `index.html` for an example.\nconst SUPPORTED_UNICODE_CHARS = [\n    '─│┌┐└┘├┤┬┴┼╳╳╳╳╳',\n    '═║╔╗╚╝╠╣╦╩╬╳╳╳╳╳',\n    '↑↓←→╳╳╳╳╳╳╳╳╳╳╳╳'\n].join('');\n\nconst UNICODE_CHAR_MAP = SUPPORTED_UNICODE_CHARS.split('').reduce((map, char, idx) => {\n    map[char] = 0x80 + idx;\n    return map;\n}, {});\n\n/**\n * Text\n *\n * Utilities for drawing text using in-game pixel font.\n */\nexport const Text = {\n    init() {\n        Text.white = Sprite.font.img;\n\n        Text.black = recolor(Text.white, rgba(0, 0, 0, 1));\n        Text.black_shadow = recolor(Text.white, rgba(90, 20, 90, 0.15));\n        Text.blue = recolor(Text.white, rgba(200, 40, 220, 1));\n        Text.blue_shadow = recolor(Text.white, rgba(240, 50, 200, 0.2));\n        Text.shadow = recolor(Text.white, rgba(240, 240, 255, 0.25));\n        Text.red = recolor(Text.white, rgba(240, 50, 50, 1));\n\n        Text.terminal = recolor(Text.white, rgba(51, 255, 0, 1));\n        Text.terminal_shadow = recolor(Text.white, rgba(255, 255, 255, 0.3));\n\n        Text.terminal = recolor(Text.white, rgba(51, 255, 0, 0.9));\n        Text.terminal_shadow = undefined;\n\n        Text['#ead4aa'] = recolor(Text.white, '#ead4aa');\n        Text['#fee761'] = recolor(Text.white, '#fee761');\n        Text['#ff0044'] = recolor(Text.white, '#ff0044');\n    },\n\n    drawText(ctx, text, u, v, scale = 1, font = Text.white, shadow) {\n        if (Array.isArray(text)) {\n            for (let block of text) {\n                Text.drawText(ctx, block.text, u + block.u * scale, v + block.v * scale, scale, font, shadow);\n            }\n            return;\n        }\n\n        for (let idx = 0; idx < text.length; idx++) {\n            let c = UNICODE_CHAR_MAP[text[idx]] || text.charCodeAt(idx);\n            let k = (c - 0) * (CHAR_WIDTH);\n            if (shadow) {\n                ctx.drawImage(\n                    shadow,\n                    k % CHARSHEET_WIDTH,\n                    Math.floor(k / CHARSHEET_WIDTH) * CHAR_HEIGHT,\n                    CHAR_WIDTH,\n                    CHAR_HEIGHT,\n                    u + 1,\n                    v,\n                    CHAR_WIDTH * scale,\n                    CHAR_HEIGHT * scale\n                );\n            }\n            ctx.drawImage(\n                font,\n                k % CHARSHEET_WIDTH,\n                Math.floor(k / CHARSHEET_WIDTH) * CHAR_HEIGHT,\n                CHAR_WIDTH,\n                CHAR_HEIGHT,\n                u,\n                v,\n                CHAR_WIDTH * scale,\n                CHAR_HEIGHT * scale\n            );\n            u += CHAR_WIDTH * scale;\n        }\n    },\n\n    /*\n    drawRightText(ctx, text, u, v, scale = 1, font = Text.white, shadow) {\n        u -= Text.measureWidth(text, scale);\n        Text.drawText(ctx, text, u, v, scale, font, shadow);\n    },\n    */\n\n    measureWidth(text, scale = 1) {\n        return text.split('').reduce((sum, c) => sum + CHAR_WIDTH, 0) * scale;\n    },\n\n    splitParagraph(text, w, h) {\n        let cu = 0, cv = 0;\n        let next = () => ({ text: '', u: cu, v: cv });\n        let wip = next();\n        let list = [];\n\n        for (let c of text.split('')) {\n            let cWidth = Text.measureWidth(c, 1);\n            if (c === '\\n' || cu + cWidth > w) {\n                let saved = '';\n                if (c !== '\\n' && c !== ' ') {\n                    let space = wip.text.split(' ');\n                    if (space.length > 1) {\n                        saved = space.pop();\n                        wip.text = space.join(' ');\n                    }\n                }\n                if (wip.text.length > 0) list.push(wip);\n                cu = 0;\n                cv += (CHAR_HEIGHT);\n                wip = next();\n                if (saved.length > 0) {\n                    wip.text = saved;\n                    cu += Text.measureWidth(wip.text, 1);\n                }\n            } else {\n                cu += cWidth;\n            }\n            if (c !== '\\n') {\n                wip.text = wip.text + c;\n            }\n        }\n\n        if (wip.text.length > 0) list.push(wip);\n\n        return list.map(line => ({\n            ...line,\n            w: Text.measureWidth(line.text, 1),\n            h: CHAR_HEIGHT\n        }));\n    },\n\n    drawTextColRow(text, col, row) {\n        Text.drawText(Viewport.ctx, Text.splitParagraph(text, Viewport.width), col * CHAR_WIDTH, row * CHAR_HEIGHT, 1, Text.terminal, Text.terminal_shadow);\n    }\n};\n\n// Text utility functions\n\nfunction recolor(font, color) {\n    let canvas = createCanvas(font.width, font.height);\n    canvas.ctx.fillStyle = color;\n    canvas.ctx.fillRect(0, 0, font.width, font.height);\n    canvas.ctx.globalCompositeOperation = 'destination-in';\n    canvas.ctx.drawImage(font, 0, 0);\n    return canvas.canvas;\n}\n","// zzfx() - the universal entry point -- returns a AudioBufferSourceNode\nexport const zzfx=(...t)=>zzfxP(zzfxG(...t))\n\n// zzfxP() - the sound player -- returns a AudioBufferSourceNode\nexport const zzfxP=(...t)=>{let e=zzfxX.createBufferSource(),f=zzfxX.createBuffer(t.length,t[0].length,zzfxR);t.map((d,i)=>f.getChannelData(i).set(d)),e.buffer=f,e.connect(zzfx.destination_),e.start();return e}\n\n// zzfxG() - the sound generator -- returns an array of sample data\nexport const zzfxG=(q=1,k=.05,c=220,e=0,t=0,u=.1,r=0,F=1,v=0,z=0,w=0,A=0,l=0,B=0,x=0,G=0,d=0,y=1,m=0,C=0)=>{let b=2*Math.PI,H=v*=500*b/zzfxR**2,I=(0<x?1:-1)*b/4,D=c*=(1+2*k*Math.random()-k)*b/zzfxR,Z=[],g=0,E=0,a=0,n=1,J=0,K=0,f=0,p,h;e=99+zzfxR*e;m*=zzfxR;t*=zzfxR;u*=zzfxR;d*=zzfxR;z*=500*b/zzfxR**3;x*=b/zzfxR;w*=b/zzfxR;A*=zzfxR;l=zzfxR*l|0;for(h=e+m+t+u+d|0;a<h;Z[a++]=f)++K%(100*G|0)||(f=r?1<r?2<r?3<r?Math.sin((g%b)**3):Math.max(Math.min(Math.tan(g),1),-1):1-(2*g/b%2+2)%2:1-4*Math.abs(Math.round(g/b)-g/b):Math.sin(g),f=(l?1-C+C*Math.sin(2*Math.PI*a/l):1)*(0<f?1:-1)*Math.abs(f)**F*q*zzfxV*(a<e?a/e:a<e+m?1-(a-e)/m*(1-y):a<e+m+t?y:a<h-d?(h-a-d)/u*y:0),f=d?f/2+(d>a?0:(a<h-d?1:(h-a)/d)*Z[a-d|0]/2):f),p=(c+=v+=z)*Math.sin(E*x-I),g+=p-p*B*(1-1E9*(Math.sin(a)+1)%2),E+=p-p*B*(1-1E9*(Math.sin(a)**2+1)%2),n&&++n>A&&(c+=w,D+=w,n=0),!l||++J%l||(c=D,v=H,n=n||1);return Z}\n\n// zzfxV - global volume\nexport const zzfxV=.3\n\n// zzfxR - global sample rate\nexport const zzfxR=44100\n\n// zzfxX - the common audio context\nexport const zzfxX=new(top.AudioContext||webkitAudioContext);\n\n// destination for zzfx and zzfxm sounds\nzzfx.destination_ = zzfxX.destination;\n","'use strict';\n\nimport { zzfxG, zzfxR } from './zzfx';\n\n/**\n * ZzFX Music Renderer v2.0.2 by Keith Clark\n */\n\n/**\n * @typedef Channel\n * @type {Array.<Number>}\n * @property {Number} 0 - Channel instrument\n * @property {Number} 1 - Channel panning (-1 to +1)\n * @property {Number} 2 - Note\n */\n\n/**\n * @typedef Pattern\n * @type {Array.<Channel>}\n */\n\n/**\n * @typedef Instrument\n * @type {Array.<Number>} ZzFX sound parameters\n */\n\n/**\n * Generate a song\n *\n * @param {Array.<Instrument>} instruments - Array of ZzFX sound paramaters.\n * @param {Array.<Pattern>} patterns - Array of pattern data.\n * @param {Array.<Number>} sequence - Array of pattern indexes.\n * @param {Number} [speed=125] - Playback speed of the song (in BPM).\n * @returns {Array.<Array.<Number>>} Left and right channel sample data.\n */\n\nexport const zzfxM = (instruments, patterns, sequence, BPM = 125) => {\n    let instrumentParameters,\n        i,\n        j,\n        k,\n        note,\n        sample,\n        patternChannel,\n        notFirstBeat,\n        stop,\n        instrument,\n        pitch,\n        attenuation,\n        outSampleOffset,\n        sampleOffset,\n        nextSampleOffset,\n        sampleBuffer = [],\n        leftChannelBuffer = [],\n        rightChannelBuffer = [],\n        channelIndex = 0,\n        panning,\n        hasMore = 1,\n        sampleCache = {},\n        beatLength = ((zzfxR / BPM) * 60) >> 2;\n\n    // for each channel in order until there are no more\n    for (; hasMore; channelIndex++) {\n        // reset current values\n        sampleBuffer = [(hasMore = notFirstBeat = pitch = outSampleOffset = 0)];\n\n        // for each pattern in sequence\n        sequence.map((patternIndex, sequenceIndex) => {\n            // get pattern for current channel, use empty 1 note pattern if none found\n            patternChannel = patterns[patternIndex][channelIndex] || [0, 0, 0];\n\n            // check if there are more channels\n            hasMore |= !!patterns[patternIndex][channelIndex];\n\n            // get next offset, use the length of first channel\n            nextSampleOffset =\n                outSampleOffset +\n                (patterns[patternIndex][0].length - 2 - !notFirstBeat) *\n                    beatLength;\n\n            // for each beat in pattern, plus one extra if end of sequence\n            for (\n                i = 2, k = outSampleOffset;\n                i <\n                patternChannel.length + (sequenceIndex == sequence.length - 1);\n                notFirstBeat = ++i\n            ) {\n                // <channel-note>\n                note = patternChannel[i];\n\n                // stop if different instrument or new note\n                stop = (instrument != (patternChannel[0] || 0)) | note | 0;\n\n                // fill buffer with samples for previous beat, most cpu intensive part\n                for (\n                    j = 0;\n                    j < beatLength && notFirstBeat;\n                    // fade off attenuation at end of beat if stopping note, prevents clicking\n                    j++ > beatLength - 99 && stop\n                        ? (attenuation += (attenuation < 1) / 99)\n                        : 0\n                ) {\n                    // copy sample to stereo buffers with panning\n                    sample =\n                        ((1 - attenuation) * sampleBuffer[sampleOffset++]) /\n                            2 || 0;\n                    leftChannelBuffer[k] =\n                        (leftChannelBuffer[k] || 0) + sample * panning - sample;\n                    rightChannelBuffer[k] =\n                        (rightChannelBuffer[k++] || 0) +\n                        sample * panning +\n                        sample;\n                }\n\n                // set up for next note\n                if (note) {\n                    // set attenuation\n                    attenuation = note % 1;\n                    panning = patternChannel[1] || 0;\n                    if ((note |= 0)) {\n                        // get cached sample\n                        sampleBuffer = sampleCache[\n                            [\n                                (instrument =\n                                    patternChannel[(sampleOffset = 0)] || 0),\n                                note\n                            ]\n                        ] =\n                            sampleCache[[instrument, note]] ||\n                            // add sample to cache\n                            ((instrumentParameters = [\n                                ...instruments[instrument]\n                            ]),\n                            (instrumentParameters[2] *=\n                                2 ** ((note - 12) / 12)),\n                            zzfxG(...instrumentParameters));\n                    }\n                }\n            }\n\n            // update the sample offset\n            outSampleOffset = nextSampleOffset;\n        });\n    }\n\n    return [leftChannelBuffer, rightChannelBuffer];\n};\n","export const ObliqueMystique = [[[1.3,0,23,,,.2,3,5],[1.5,0,4e3,,,.03,2,1.25,,,,,.02,6.8,-.3,,.5],[.7,0,2100,,,.2,3,3,,,-400,,,2],[,0,655,,,.11,2,1.65,,,,,,3.8,-.1,.1]],[[[,-.5,13,,,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,14,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,14,,,,],[1,.3,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,],[2,1,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,],[,.6,,,,,13,,18,,19,,,,,,,,19,,18,,,,16,,,,13,,,,,,,,,,13,,18,,19,,,,,,,,18,19,18,,,,13,14,13,,16,,18,,19,,],[3,-1,,,13,,,,,,,,,,,,13,,,,,,,,,,,,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,,,13,13,13,13]],[[,-.5,13,,,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,14,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,14,,,,],[1,.3,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,],[2,1,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,]]],[1,1,0,0,0,0,1,0],,]\n","'use strict';\n\nimport { zzfx, zzfxP, zzfxX } from './lib/zzfx';\nimport { zzfxM } from './lib/zzfxm';\nimport { ObliqueMystique } from './songs/ObliqueMystique';\n\nexport const Audio = {\n    init() {\n        Audio.readyToPlay = false;\n\n        Audio.ctx = zzfxX;\n        Audio.gain_ = Audio.ctx.createGain();\n        Audio.gain_.connect(Audio.ctx.destination);\n        zzfx.destination_ = Audio.gain_;\n\n        Audio.shotgun = [,0.01,140,0.01,0.02,0.45,4,2.42,0.1,-0.1,,,,1.2,,0.3,0.04,0.8,0.02];\n        Audio.page = [,,1233,,.01,.2,1,1.43,,,539,.1,,,,,,.51,.03,.01];\n        Audio.shellReload = [,,68,0.01,,0.14,1,1.53,7.5,0.1,50,0.02,-0.01,-0.2,0.1,0.2,,0.47,0.01];\n        Audio.damage = [,,391,,.19,.01,2,.54,-4,20,,,,,,,.02,.9];\n        Audio.alarm = [,,970,.12,.25,.35,,.39,8.1,,10,.1,.2,,.1,,,.6,.09,.13];\n        // [,,961,.05,.06,1.17,1,4.67,.8,,,,,.8,-0.8,.1,.49,.62,.09];\n        Audio.victory = [,,454,.06,.86,.71,2,.63,-0.7,1.7,-83,.09,.27,.3,.2,,.18,.95,.02,.02];\n        Audio.song = zzfxM(...ObliqueMystique);\n\n        // Save our background music in os13k, for fun!\n        //localStorage[`OS13kMusic,${TITLE} - Oblique Mystique`] = JSON.stringify(ObliqueMystique);\n    },\n\n    update() {\n        if (!Audio.readyToPlay) return;\n\n        if (!Audio.musicPlaying) {\n            //Audio.bgmusicnode = zzfxP(...Audio.song);\n            //Audio.bgmusicnode.loop = true;\n            Audio.musicPlaying = true;\n        }\n    },\n\n    play(sound) {\n        if (!Audio.readyToPlay) return;\n        zzfx(...sound);\n    },\n\n    // It's important we do pausing and unpausing as specific events and not in general update(),\n    // because update() is triggered by the animation frame trigger which does not run if the\n    // page is not visible. (So, if you want the music to fade in the background, for example,\n    // that's not helpful if it won't work because you aren't looking at the page!)\n\n    pause() {\n        Audio.gain_.gain.linearRampToValueAtTime(0, Audio.ctx.currentTime + 1);\n    },\n\n    unpause() {\n        Audio.gain_.gain.linearRampToValueAtTime(1, Audio.ctx.currentTime + 1);\n    }\n};\n","/**\n * `Screen` is a singleton that represents the virtual 80x25 character screen our game\n * lives in. Components like PlayingField will \"draw\" (write text onto) this virtual\n * screen each frame. Once all the text is written, the text will end up rendered on\n * the viewport (canvas) in the browser.\n */\n\nimport { SCREEN_WIDTH, SCREEN_HEIGHT } from './Constants';\nimport { Viewport } from './Viewport';\nimport { Text } from './Text';\n\nexport const Screen = {\n    init() {\n        this.screen = [];\n        for (let y = 0; y < SCREEN_HEIGHT; y++) {\n            this.screen.push([]);\n        }\n        this.clear();\n    },\n\n    clear() {\n        for (let y = 0; y < SCREEN_HEIGHT; y++) {\n            for (let x = 0; x < SCREEN_WIDTH; x++) {\n                this.screen[y][x] = ' ';\n            }\n        }\n    },\n\n    write(x, y, text) {\n        if (!Array.isArray(text)) text = [text];\n\n        for (let j = 0; j < text.length; j++) {\n            for (let i = 0; i < text[j].length; i++) {\n                this.screen[y + j][x + i] = text[j][i];\n            }\n        }\n    },\n\n    drawToViewport() {\n        let text = this.screen.map(row => row.join('')).join('\\n');\n\n        Text.drawText(\n            Viewport.ctx,\n            Text.splitParagraph(text, Viewport.width),\n            0, 0,\n            1,\n            Text.terminal, Text.terminal_shadow\n        );\n    }\n};\n","import { Screen } from './Screen';\nimport { Game } from './Game';\nimport { PLAY_SPEEDS } from './Constants';\nimport { Input } from './Input';\n\nexport class MainMenu {\n    constructor() {\n    }\n\n    update() {\n        switch (Input.lastKeyPressed().toUpperCase()) {\n            case 'P':\n                Input.consume();\n                Game.startSession();\n                break;\n            case 'L':\n                Input.consume();\n                Game.playSpeed = (Game.playSpeed + 1) % PLAY_SPEEDS.length;\n                break;\n            case 'I':\n                Input.consume();\n                Game.showInstructions();\n                break;\n            case 'E':\n                Input.consume();\n                Game.showInstructions();\n                break;\n        }\n    }\n\n    draw() {\n        let version = '?';\n        let terminal = '?';\n\n        let highScores = [\n            `1) 6000  Bob`,\n            `2) 6000  Tom`,\n            `3) 4000  Wayne`,\n            ``,\n            ``\n        ];\n\n        Screen.clear();\n        Screen.write(0, 0, [\n            `               LL                     dd       dd`,\n            `               LL                     dd       dd                      tm`,\n            `               LL         aaaa     ddddd    ddddd    eeee   rrrrrrr`,\n            `               LL        aa  aa   dd  dd   dd  dd   ee  ee  rr    rr`,\n            `               LL        aa  aa   dd  dd   dd  dd   eeeeee  rr`,\n            `               LL        aa  aa   dd  dd   dd  dd   ee      rr`,\n            `               LLLLLLLL   aaa aa   ddd dd   ddd dd   eeee   rr`,\n            ``,\n            `                                       Version:    ${version}`,\n            `(c) 1982, 1983 Yahoo Software          Terminal:   ${terminal}`,\n            `10970 Ashton Ave.  Suite 312           Play speed: ${Game.playSpeed + 1} / ${PLAY_SPEEDS.length}`,\n            `Los Angeles, Ca  90024                 Move = ↑↓←→/WASD, Jump = Space,`,\n            `                                       Stop = Other`,\n            ``,\n            `P = Play game                          High Scores`,\n            `L = Change level of difficulty         ${highScores[0]}`,\n            `C = Configure Ladder                   ${highScores[1]}`,\n            `I = Instructions                       ${highScores[2]}`,\n            `E = Exit Ladder                        ${highScores[3]}`,\n            `                                       ${highScores[4]}`,\n            ``,\n            `Enter one of the above:`\n        ]);\n    }\n}\n","import { Screen } from './Screen';\nimport { Game } from './Game';\nimport { Input } from './Input';\n\nexport class InstructionsMenu {\n    constructor() {\n    }\n\n    update() {\n        if (Input.lastKeyPressed().toUpperCase() !== '') {\n            Input.consume();\n            Game.showMainMenu();\n        }\n    }\n\n    draw() {\n        Screen.clear();\n        Screen.write(0, 0, [\n            `You are a Lad trapped in a maze.  Your mission is is to explore the`,\n            `dark corridors never before seen by human eyes and find hidden`,\n            `treasures and riches.`,\n            ``,\n            `You control Lad by typing the direction buttons and jumping by`,\n            `typing SPACE.  But beware of the falling rocks called Der rocks.`,\n            `You must find and grasp the treasures (shown as $) BEFORE the`,\n            `bonus time runs out.`,\n            ``,\n            `A new Lad will be awarded for every 10,000 points.`,\n            `Extra points are awarded for touching the gold`,\n            `statues (shown as &).  You will receive the bonus time points`,\n            `that are left when you have finished the level.`,\n            ``,\n            `Type an ESCape to pause the Game`,\n            ``,\n            `Remember, there is more than one way to skin a cat. (Chum)`,\n            ``,\n            `Good luck Lad.`,\n            ``,\n            ``,\n            ``,\n            `Type RETURN to return to main menu:`\n        ]);\n    }\n}\n","\n// This is our list of STATES. Each entity starts out in one of these states and can move between\n// them based on events that happen in the Game (Note that some of these are directions, but\n// since an entity keeps moving in the direction it is going unless stopped, directions are\n// states in this Game)\nexport const State = {\n    STOPPED:    1,         // Standing still\n    UP:         2,         // Moving up (player only)\n    LEFT:       3,         // Moving left\n    DOWN:       4,         // Moving down\n    RIGHT:      5,         // Moving right\n    FALLING:    6,         // Falling\n    START_JUMP: 7,         // About to start a jump (player only)\n    JUMP_LEFT:  8,         // Jumping left (player only)\n    JUMP_RIGHT: 9,         // Jumping right (player only)\n    JUMP_UP:    10,        // Jumping straight up (player only)\n    DYING:      11,        // Dying (used as a death animation)\n    DEAD:       12         // Dead (for player, restart level; for rock, disappear)\n};\n\nexport const JUMP_FRAMES = {\n    [State.JUMP_RIGHT]: [\n        { x: 1, y: -1 },\n        { x: 1, y: -1 },\n        { x: 1, y: 0 },\n        { x: 1, y: 0 },\n        { x: 1, y: 1 },\n        { x: 1, y: 1 }\n    ],\n    [State.JUMP_LEFT]: [\n        { x: -1, y: -1 },\n        { x: -1, y: -1 },\n        { x: -1, y: 0 },\n        { x: -1, y: 0 },\n        { x: -1, y: 1 },\n        { x: -1, y: 1 }\n    ],\n    [State.JUMP_UP]: [\n        { x: 0, y: -1 },\n        { x: 0, y: -1 },\n        { x: 0, y: 0 },\n        { x: 0, y: 1 },\n        { x: 0, y: 1 },\n        { x: 0, y: 0 }\n    ],\n};\n","import { State, JUMP_FRAMES } from './Behavior';\nimport { LEVEL_COLS } from './Constants';\n\nexport class Entity {\n    applyMovement(field) {\n        let repeat = false;\n\n        // This method contains generic \"movement\" application for all entities, including\n        // Lad (player) and Der Rocks (enemies). Things like falling, moving left/right, etc.,\n        // work the same for both.\n        //\n        // (There's a bunch of jump logic in here too, and moving UP, which really only applies\n        // to players, but that's OK -- Der Rocks just won't attempt those actions.)\n\n        if (this.nextState) {\n            switch (this.state) {\n                case State.STOPPED:\n                case State.LEFT:\n                case State.RIGHT:\n                    if ([State.LEFT, State.RIGHT, State.STOPPED].includes(this.nextState)) {\n                        this.state = this.nextState;\n                        this.nextState = undefined;\n                    }\n                    break;\n\n                case State.UP:\n                case State.DOWN:\n                    // Normal\n                    if ([State.LEFT, State.RIGHT].includes(this.nextState)) {\n                        this.state = this.nextState;\n                        this.nextState = undefined;\n                    }\n                    break;\n            }\n        }\n\n        if (this.nextState === State.START_JUMP) {\n            // Special case: the user wants to jump!\n            //\n            // If the player is standing on something solid, we initiate a jump based on the current\n            // movement of the player. If not, we (sort of) ignore the request to jump... although\n            // it does subtly change the behavior upon landing.\n            if (field.onSolid(this.x, this.y)) {\n                if (this.state === State.STOPPED || this.state === State.FALLING) {\n                    this.state = State.JUMP_UP;\n                    this.jumpStep = 0;\n                    this.nextState = State.STOPPED;\n                } else if (this.state === State.LEFT || this.state === State.JUMP_LEFT) {\n                    this.state = State.JUMP_LEFT;\n                    this.jumpStep = 0;\n                    this.nextState = State.LEFT;\n                } else if (this.state === State.RIGHT || this.state === State.JUMP_RIGHT) {\n                    this.state = State.JUMP_RIGHT;\n                    this.jumpStep = 0;\n                    this.nextState = State.RIGHT;\n                }\n            } else {\n                if (this.state === State.JUMP_UP || this.state === State.FALLING) {\n                    this.nextState = State.STOPPED;\n                } else if (this.state === State.JUMP_RIGHT) {\n                    this.nextState = State.RIGHT;\n                } else if (this.state === State.JUMP_LEFT) {\n                    this.nextState = State.LEFT;\n                }\n            }\n        } else if (this.nextState === State.UP && field.isLadder(this.x, this.y)) {\n            // Special case: the user wants to go up!\n            //\n            // If the user is on a ladder, we can start ascending. Note that if the user is not\n            // on a ladder we ignore their input, which is intentional -- this allows queued\n            // (pacman) input, where we can tap UP a little before reaching the ladder.\n            this.state = State.UP;\n            this.nextState = undefined;\n        } else if (this.nextState === State.DOWN && (field.isLadder(this.x, this.y) || field.isLadder(this.x, this.y + 1))) {\n            // Special case: the player wants to go down!\n            //\n            // If the player is on (or above) a ladder, we can start descending. Note that if the player is not\n            // on a ladder we ignore their input, which is intentional -- this allows queued\n            // (pacman) input, where we can tap DOWN a little before reaching the ladder.\n            this.state = State.DOWN;\n            this.nextState = undefined;\n        }\n\n        switch (this.state) {\n            case State.LEFT:\n                if (!field.onSolid(this.x, this.y)) {\n                    this.nextState = State.LEFT;\n                    this.state = State.FALLING;\n                    repeat = true;\n                    break;\n                }\n                if (field.emptySpace(this.x - 1, this.y)) {\n                    this.x--;\n                } else {\n                    this.nextState = State.STOPPED;\n                }\n                break;\n\n            case State.RIGHT:\n                if (!field.onSolid(this.x, this.y)) {\n                    this.nextState = State.RIGHT;\n                    this.state = State.FALLING;\n                    repeat = true;\n                    break;\n                }\n                if (field.emptySpace(this.x + 1, this.y)) {\n                    this.x++;\n                } else {\n                    this.nextState = State.STOPPED;\n                }\n                break;\n\n            case State.UP:\n                if (field.canClimbUp(this.x, this.y - 1)) {\n                    this.y--;\n                } else {\n                    this.state = State.STOPPED;\n                }\n                break;\n\n            case State.DOWN:\n                if (field.canClimbDown(this.x, this.y + 1)) {\n                    this.y++;\n                } else {\n                    this.state = State.STOPPED;\n                }\n                break;\n\n            case State.JUMP_RIGHT:\n            case State.JUMP_LEFT:\n            case State.JUMP_UP:\n                let step = JUMP_FRAMES[this.state][this.jumpStep];\n                console.log(['jump', this.state, this.jumpStep, step]);\n                if ((this.x + step.x >= 0) && (this.x + step.x < LEVEL_COLS)) {\n                    let terrain = field.layout[this.y + step.y][this.x + step.x];\n                    if (['=', '|', '-'].includes(terrain)) {\n                        if (field.onSolid(this.x, this.y)) {\n                            this.state = this.nextState;\n                            this.nextState = undefined;\n                        } else {\n                            switch (this.state) {\n                                case State.JUMP_RIGHT:\n                                    this.nextState = State.RIGHT;\n                                    break;\n                                case State.JUMP_LEFT:\n                                    this.nextState = State.LEFT;\n                                    break;\n                                case State.JUMP_UP:\n                                    this.nextState = State.UP;\n                                    break;\n                            }\n                            this.state = State.FALLING;\n                        }\n                    } else if (terrain === 'H') {\n                        this.x += step.x;\n                        this.y += step.y;\n                        this.state = State.STOPPED;\n                        this.nextState = undefined;\n                    } else {\n                        this.x += step.x;\n                        this.y += step.y;\n                        this.jumpStep++;\n\n                        if (this.jumpStep >= JUMP_FRAMES[this.state].length) {\n                            this.state = this.nextState;\n                            this.nextState = undefined;\n                        }\n                    }\n                } else {\n                    if (field.onSolid(this.x, this.y)) {\n                        this.state = this.nextState;\n                        this.nextState = undefined;\n                    } else {\n                        this.state = State.FALLING;\n                        this.nextState = State.STOPPED;\n                    }\n                }\n                break;\n\n            case State.FALLING:\n                if (field.onSolid(this.x, this.y)) {\n                    this.state = this.nextState || State.STOPPED;\n                } else {\n                    this.y++;\n                }\n                break;\n        }\n\n        // If we were attempting to move somewhere and realized we should be falling instead,\n        // we want to re-run the entire algorithm once. This avoids what boils down to a \"skipped\n        // frame\" from the user's point of view.\n        if (repeat) return this.applyMovement(field);\n    }\n}\n","'use strict';\n\nimport { Sprite } from './Sprite';\nimport { State, JUMP_FRAMES } from './Behavior';\nimport { Input } from './Input';\nimport { Text } from './Text';\nimport { LEVEL_ROWS, LEVEL_COLS } from './Constants';\nimport { Entity } from './Entity';\nimport { Screen } from './Screen';\nimport { Game } from './Game';\n\nconst DEATH_FRAMES = ['p', 'p', 'b', 'd', 'd', 'q', 'p', 'p', 'b', 'd', 'd', 'q', '-', '-', '_', '_', '_', '_', '_'];\n\n/**\n * Player\n */\nexport class Player extends Entity {\n    constructor(x, y) {\n        super();\n        this.x = x;\n        this.y = y;\n        this.state = State.STOPPED;\n        this.nextState = State.STOPPED;\n        this.jumpStep = 0;\n        this.deathStep = 0;\n        console.log('player constructed', x, y);\n    }\n\n    update(field, moveFrame) {\n        if (this.state === State.DYING) {\n            this.deathStep++;\n            if (this.deathStep >= DEATH_FRAMES.length) this.state = State.DEAD;\n        }\n\n        if (this.state === State.DYING || this.state === State.DEAD) return;\n\n        if (!moveFrame) return;\n\n        let action = Input.lastActionPressed();\n\n        if (action === Input.Action.LEFT) {\n            this.nextState = State.LEFT;\n            Input.consume();\n        } else if (action === Input.Action.RIGHT) {\n            this.nextState = State.RIGHT;\n            Input.consume();\n        } else if (action === Input.Action.UP) {\n            this.nextState = State.UP;\n            Input.consume();\n        } else if (action === Input.Action.DOWN) {\n            this.nextState = State.DOWN;\n            Input.consume();\n        } else if (action === Input.Action.JUMP) {\n            this.nextState = State.START_JUMP;\n            Input.consume();\n        }\n\n        return this.applyMovement(field);\n    }\n\n    draw() {\n        let char = 'g';\n\n        switch (this.state) {\n            case State.RIGHT:\n            case State.JUMP_RIGHT:\n            case State.UP:\n            case State.DOWN:\n                char = 'p';\n                break;\n\n            case State.LEFT:\n            case State.JUMP_LEFT:\n                char = 'q';\n                break;\n\n            case State.FALLING:\n                char = 'b';\n                break;\n\n            case State.DYING:\n                char = DEATH_FRAMES[this.deathStep];\n                break;\n\n            case State.DEAD:\n                char = '_';\n                break;\n        }\n\n        Screen.write(this.x, this.y, char);\n    }\n}\n","import { Text } from './Text';\nimport { State } from './Behavior';\nimport { LEVEL_COLS } from './Constants';\nimport { Entity } from './Entity';\nimport { Screen } from './Screen';\nimport { Game } from './Game';\n\nconst DEATH_FRAMES = ['{', '}', '(', ')', '%', '%', ':', ':'];\n\nexport class Rock extends Entity {\n    constructor(dispenser) {\n        super();\n        this.x = dispenser.x;\n        this.y = dispenser.y;\n        this.state = State.FALLING;\n        this.nextState = undefined;\n        this.deathStep = 0;\n    }\n\n    update(field, moveFrame) {\n        if (this.state === State.DYING) {\n            this.deathStep++;\n            if (this.deathStep >= DEATH_FRAMES.length) this.state = State.DEAD;\n        }\n\n        if (this.state === State.DYING || this.state === State.DEAD) return;\n\n        if (!moveFrame) return;\n\n        if (this.state === State.STOPPED) {\n            if (this.x === 0 || !field.emptySpace(this.x - 1, this.y)) {\n                this.nextState = State.RIGHT;\n            } else if (this.x === LEVEL_COLS - 1 || !field.emptySpace(this.x + 1, this.y)) {\n                this.nextState = State.LEFT;\n            } else {\n                this.nextState = Math.random() > 0.5 ? State.LEFT : State.RIGHT;\n            }\n        }\n\n        if (this.x === 0 && this.state === State.LEFT) {\n            this.state = State.RIGHT;\n        }\n\n        if (this.x === LEVEL_COLS - 1 && this.state === State.RIGHT) {\n            this.state = State.LEFT;\n        }\n\n        if (this.state !== State.FALLING && !field.onSolid(this.x, this.y)) {\n            this.nextState = State.FALLING;\n        }\n\n        if (field.isLadder(this.x, this.y + 1) && [State.LEFT, State.RIGHT].includes(this.state)) {\n            let r = Math.floor(Math.random() * 4);\n            this.nextState = [State.LEFT, State.RIGHT, State.DOWN, State.DOWN][r];\n        }\n\n        if (field.isEater(this.x, this.y)) {\n            this.state = State.DYING;\n            return;\n        }\n\n        this.applyMovement(field);\n    }\n\n    draw() {\n        let char = 'o';\n\n        switch (this.state) {\n            case State.DYING:\n                char = DEATH_FRAMES[this.deathStep];\n                break;\n            case State.DEAD:\n                return;\n        }\n\n        Screen.write(this.x, this.y, char);\n    }\n}\n","import { LEVEL_ROWS, LEVEL_COLS } from './Constants';\nimport LevelData from '../levels/levels.json';\n\nexport const Level = {\n    LEVELS: LevelData,\n    LEVEL_COUNT: LevelData.length,\n\n    load(levelNumber) {\n        console.log(Level.LEVELS);\n        // As the player keeps playing, level numbers will loop around to beginning\n        let level = Level.LEVELS[levelNumber % Level.LEVELS.length];\n        if (!level) throw new Error(`No such level number: ${levelNumber}`);\n\n        // Perform some sanity checks on the level layout and extract useful info\n        // like player start position and dispenser positions etc.\n\n        let layout = level.layout.map(row => row.split(''));\n        let dispensers = [];\n        let player;\n\n        // Sanity check\n        layout = layout.slice(0, LEVEL_ROWS);\n\n        for (let y = 0; y < LEVEL_ROWS; y++) {\n            // Sanity checks\n            if (!layout[y]) layout[y] = [];\n            layout[y] = layout[y].slice(0, LEVEL_COLS);\n\n            for (let x = 0; x < LEVEL_COLS; x++) {\n                // Sanity check\n                if (!layout[y][x]) layout[y][x] = ' ';\n\n                // Der Dispensers (V) and Der Eaters (*) have behaviors, so it is convenient for us\n                // to construct a list of them, but they are permanent parts of the layout, so we can\n                // leave them as part of the level and draw them normally.\n\n                if (layout[y][x] === 'V') {\n                    dispensers.push({ x, y });\n                }\n\n                // Treasure ($), Statues (&), and the Lad (p) are transient - the player moves around and\n                // can pick up the treasures and statues. That's why for these elements, we add them to\n                // our lists AND we remove them from the \"playing field\", we'll draw them separately on\n                // top of the layout.\n\n                if (layout[y][x] === 'p') {\n                    layout[y][x] = ' ';\n                    player = { x, y };\n                }\n\n                // Everything else, like floors (=), walls (|), ladders (H) and fire (^), is part of the\n                // layout. The Lad interacts with them, but we can handle that during our movement checks.\n            }\n        }\n\n        return {\n            name: level.name,\n            time: level.time,\n            maxRocks: level.maRrocks,\n            layout,\n            dispensers,\n            player\n        };\n    }\n};\n","/**\n * `PlayingField` is a class that represents a level that is actively being played on-screen.\n * A new one is created by the game session any time we start a new level.\n *\n * Level-specific stuff (like bonus time, dispensers, rocks, player position, etc.) is all\n * managed by the playing field.\n */\n\nimport { LEVEL_COLS, SCORE_ROCK, SCORE_STATUE, SCORE_TREASURE, MAX_ROCKS, DISPENSER_MAX_ROCKS, HIDDEN_FACTOR_MAX_ROCKS } from './Constants';\nimport { Game } from './Game';\nimport { Player } from './Player';\nimport { Rock } from './Rock';\nimport { State } from './Behavior';\nimport { Screen } from './Screen';\nimport { Level } from './Level';\n\nexport class PlayingField {\n    constructor(levelNumber) {\n        let level = Level.load(levelNumber);\n\n        // Store level-related info\n        this.layout = level.layout;\n        this.dispensers = level.dispensers;\n        this.time = 2000;\n\n        // Initialize player\n        this.player = new Player(level.player.x, level.player.y);\n\n        // Initialize list of rocks (empty)\n        this.rocks = [];\n\n        // Not winning yet (while \"winning\" the player stops moving and we add up the bonus score)\n        this.winning = false;\n    }\n\n    update(moveFrame) {\n        // If we're already winning, keep counting down the bonus time, but\n        // no more movement will happen on this level.\n        if (this.winning) {\n            Game.session.updateScore(SCORE_TREASURE);\n            this.time -= 10;\n            if (this.time < 0) Game.session.startNextLevel();\n            return;\n        }\n\n        // Count down bonus time\n        if (this.time > 0 && moveFrame) this.time--;\n\n        let oldX = this.player.x, oldY = this.player.y;\n\n        // Move player based on user input\n        this.player.update(this, moveFrame);\n\n        // Any time you move OFF of a disappearing floor, it goes away.\n        if (oldX !== this.player.x && oldY === this.player.y) {\n            if (this.isDisappearingFloor(oldX, oldY + 1)) {\n                this.layout[oldY + 1][oldX] = ' ';\n            }\n        }\n\n        // Check if player should be dead (before moving rocks)\n        if (moveFrame) this.checkIfPlayerShouldDie(Game.session);\n\n        // Move rocks\n        for (let rock of this.rocks) rock.update(this, moveFrame);\n\n        // Check if player should be dead (after moving rocks)\n        if (moveFrame) this.checkIfPlayerShouldDie(Game.session);\n\n        if (moveFrame) {\n            // Collect statues\n            if (this.isStatue(this.player.x, this.player.y)) {\n                this.layout[this.player.y][this.player.x] = ' ';\n                Game.session.updateScore(SCORE_STATUE);\n            }\n\n            // Collect treasure (ends the current level)\n            if (this.isTreasure(this.player.x, this.player.y)) {\n                this.winning = true;\n                return;\n            }\n\n            // Interact with trampolines\n            if (this.isTrampoline(this.player.x, this.player.y)) {\n                switch (Math.floor(Math.random() * 5)) {\n                    case 0:\n                        this.player.state = State.LEFT;\n                        this.player.nextState = undefined;\n                        break;\n                    case 1:\n                        this.player.state = State.RIGHT;\n                        this.player.nextState = undefined;\n                        break;\n                    case 2:\n                        this.player.state = State.JUMP_UP;\n                        this.player.nextState = undefined;\n                        this.player.jumpStep = 0;\n                        break;\n                    case 3:\n                        this.player.state = State.JUMP_LEFT;\n                        this.player.nextState = State.LEFT;\n                        this.player.jumpStep = 0;\n                        break;\n                    case 4:\n                        this.player.state = State.JUMP_RIGHT;\n                        this.player.nextState = State.RIGHT;\n                        this.player.jumpStep = 0;\n                        break;\n                }\n            }\n\n            // Kill dead rocks\n            this.rocks = this.rocks.filter(rock => rock.state !== State.DEAD);\n\n            // Dispense new rocks\n            if (this.rocks.length < this.maxRocks() && Math.random() > 0.91) {\n                let dispenser = this.dispensers[Math.floor(Math.random() * this.dispensers.length)];\n                this.rocks.push(new Rock(dispenser));\n            }\n\n            // Kill player\n            if (this.player.state === State.DEAD) {\n                Game.session.restartLevel();\n            }\n        }\n    }\n\n    draw() {\n        // Draw layout\n        Screen.write(0, 0, this.layout.map(row => row.join('')));\n\n        // Draw player\n        this.player.draw();\n\n        // Draw rocks\n        this.rocks.forEach(rock => rock.draw());\n    }\n\n    //\n    // Utility functions - this is an attempt to consolidate logic in one spot and make other\n    // functions (like the update logic in Player) more readable.\n    //\n\n    onSolid(x, y) {\n        return ['=', '-', 'H', '|'].includes(this.layout[y + 1][x]) || this.layout[y][x] === 'H';\n    }\n\n    emptySpace(x, y) {\n        if (x < 0 || x >= LEVEL_COLS) {\n            return false;\n        } else {\n            return !['|', '='].includes(this.layout[y][x]);\n        }\n    }\n\n    isLadder(x, y) {\n        return this.layout[y][x] === 'H';\n    }\n\n    isStatue(x, y) {\n        return this.layout[y][x] === '&';\n    }\n\n    isTreasure(x, y) {\n        return this.layout[y][x] === '$';\n    }\n\n    isTrampoline(x, y) {\n        return this.layout[y][x] === '.';\n    }\n\n    isEater(x, y) {\n        return this.layout[y][x] === '*';\n    }\n\n    isFire(x, y) {\n        return this.layout[y][x] === '^';\n    }\n\n    isDisappearingFloor(x, y) {\n        return this.layout[y][x] === '-';\n    }\n\n    canClimbUp(x, y) {\n        if (y < 0) return false;\n        return ['H', '&', '$'].includes(this.layout[y][x]);\n    }\n\n    canClimbDown(x, y) {\n        return ['H', '&', '$', ' ', '^', '.'].includes(this.layout[y][x]);\n    }\n\n    checkIfPlayerShouldDie() {\n        // If we're ALREADY dying or dead, let nature run its course\n        if (this.player.state === State.DYING || this.player.state === State.DEAD) return;\n\n        // Landing on fire kills you\n        if (this.isFire(this.player.x, this.player.y)) {\n            this.player.state = State.DYING;\n        }\n\n        // Running out of time kills you\n        if (this.time <= 0) {\n            this.player.state = State.DYING;\n        }\n\n        // Running into a rock kills you, and makes the rock that killed you disappear.\n        // That's not necessary, I just think it looks better. While we play the death\n        // animation we'll continue to move rocks, so another rock might also \"hit\" you,\n        // but it will just pass through your dying character.\n        //\n        // If we're above a rock with 1 or 2 spaces between, we get some points instead.\n        //\n        // A function named `checkIfPlayerShouldDie` is probably not the best place to do\n        // this, but it's convenient because we want to do this twice (just like the death\n        // check).\n        //\n        //                    p                          p\n        // (1)   p     -->            (2)   p     -->\n        //        o          o                o          o\n        //      =====       =====          =====       =====\n        //\n        // In situation (1), there will never be a frame on-screen where the player is directly\n        // above the rock, but we'll still count it because we'll check once after the player moves.\n        // In situation (2), the first check won't count, but the second check after the rocks move\n        // will give the score (and the frame drawn on screen will show the player above the rock).\n        //\n        for (let i = 0; i < this.rocks.length; i++) {\n            if (this.player.x === this.rocks[i].x) {\n                if (this.player.y === this.rocks[i].y) {\n                    this.player.state = State.DYING;\n                    this.rocks.splice(i, 1);\n                    break;\n                } else if (this.player.y === this.rocks[i].y - 1 && this.emptySpace(this.player.x, this.player.y + 1)) {\n                    Game.session.updateScore(SCORE_ROCK);\n                } else if (this.player.y === this.rocks[i].y - 2 && this.emptySpace(this.player.x, this.player.y + 1) && this.emptySpace(this.player.x, this.player.y + 2)) {\n                    Game.session.updateScore(SCORE_ROCK);\n                }\n            }\n        }\n    }\n\n    maxRocks() {\n        // The total number of rocks we can have on screen is based on a global max rocks value,\n        // then increased slightly by the number of dispensers on the level, then increased again\n        // by a hidden difficulty factor (level cycles).\n        return MAX_ROCKS + this.dispensers.length * DISPENSER_MAX_ROCKS + Game.session.hiddenFactor() * HIDDEN_FACTOR_MAX_ROCKS;\n    }\n}\n","/**\n * `GameSession` is a class that represents... well, a game session! It is created when the\n * player presses `P` at the main menu, and ends when the player runs out of lives.\n *\n * The game session tracks values that persist across levels (like number of lives, score,\n * the level number, etc.). Most of the actual in-game logic it hands off to `PlayingField`.\n */\n\nimport { PLAY_SPEEDS, SCORE_ROCK, SCORE_STATUE, SCORE_TREASURE, HIDDEN_FACTOR_PLAY_SPEED } from './Constants';\nimport { Game } from './Game';\nimport { PlayingField } from './PlayingField';\nimport { Level } from './Level';\nimport { Screen } from './Screen';\nimport { Input } from './Input';\n\nexport class GameSession {\n    constructor() {\n        this.score = 0;\n        this.levelNumber = 0;\n        this.levelCycle = 1;\n        this.lives = 5;\n        this.nextLife = 100;\n    }\n\n    update() {\n        // The `Game` controls the overall game loop, which runs at a fixed 60 frames per second.\n        //\n        // However, Ladder has the concept of \"play speed\" which the player can change at the main\n        // menu, and it controls how fast the game runs. To accomplish that, we can do a second\n        // frame gate here. This gate sets a flag called `moveFrame` IF things can move in this frame.\n        //\n        // We do it this way so that animations (like the play death animation, or the end-of-level\n        // score animation) can run at the same speed no matter what the play speed is.\n        let now = new Date().getTime();\n        let lastFrame = this.lastFrame || 0;\n        let moveFrame = false;\n\n        if (now - lastFrame >= (this.nextFrame || 0)) {\n            moveFrame = true;\n            this.nextFrame = now + this.moveFrameMillisecondDelay();\n        }\n\n        // If we haven't instantiated the playing field yet, create it now.\n        if (!this.field) this.field = new PlayingField(this.levelNumber);\n\n        // Hand off to the playing field for actual in-game logic\n        this.field.update(moveFrame);\n\n        this.handleCheatCodes();\n    }\n\n    draw() {\n        if (this.field) this.field.draw();\n\n        let stat = [\n            String(this.lives).padStart(2, ' '),\n            String(this.levelNumber + 1).padStart(2, ' '),\n            String(this.score).padStart(6, ' '),\n            this.field ? String(this.field.time).padStart(4, ' ') : ''\n        ];\n        Screen.write(0, 21, `Lads   ${stat[0]}     Level   ${stat[1]}      Score   ${stat[2]}      Bonus time   ${stat[3]}`);\n    }\n\n    restartLevel() {\n        this.field = undefined;\n    }\n\n    startNextLevel() {\n        this.field = undefined;\n        this.levelNumber++;\n        if (this.levelNumber % Level.LEVEL_COUNT === 0) {\n            this.levelCycle++;\n        }\n    }\n\n    updateScore(scoreType) {\n        switch (scoreType) {\n            case SCORE_ROCK:\n                this.score += 200;\n                break;\n            case SCORE_STATUE:\n                this.score += this.field.time;\n                break;\n            case SCORE_TREASURE:\n                // Added repeatedly after winning the level\n                this.score += 10;\n                break;\n        }\n    }\n\n    hiddenFactor() {\n        // This \"hidden\" difficulty level increases steadily as the player completes a\n        // level cycle (every time they reach the Easy Street level). This makes the\n        // game slowly harder as you keep playing.\n        return Math.floor(this.levelNumber / Level.LEVEL_COUNT);\n    }\n\n    moveFrameMillisecondDelay() {\n        // Regardless of play speed, the game gets slightly faster every level cycle\n        return Math.floor(PLAY_SPEEDS[Game.playSpeed] - this.hiddenFactor() * HIDDEN_FACTOR_PLAY_SPEED * PLAY_SPEEDS[Game.playSpeed]);\n    }\n\n    handleCheatCodes() {\n        // Cheat codes are useful for testing, and this game is no exception. Of course\n        // THESE cheat codes do not belong here, as they wouldn't be created until 11 years\n        // later, but that won't stop me from inserting them anywhere I get the chance!\n        //\n        // =================     ===============     ===============   ========  ========\n        // \\\\ . . . . . . .\\\\   //. . . . . . .\\\\   //. . . . . . .\\\\  \\\\. . .\\\\// . . //\n        // ||. . ._____. . .|| ||. . ._____. . .|| ||. . ._____. . .|| || . . .\\/ . . .||\n        // || . .||   ||. . || || . .||   ||. . || || . .||   ||. . || ||. . . . . . . ||\n        // ||. . ||   || . .|| ||. . ||   || . .|| ||. . ||   || . .|| || . | . . . . .||\n        // || . .||   ||. _-|| ||-_ .||   ||. . || || . .||   ||. _-|| ||-_.|\\ . . . . ||\n        // ||. . ||   ||-'  || ||  `-||   || . .|| ||. . ||   ||-'  || ||  `|\\_ . .|. .||\n        // || . _||   ||    || ||    ||   ||_ . || || . _||   ||    || ||   |\\ `-_/| . ||\n        // ||_-' ||  .|/    || ||    \\|.  || `-_|| ||_-' ||  .|/    || ||   | \\  / |-_.||\n        // ||    ||_-'      || ||      `-_||    || ||    ||_-'      || ||   | \\  / |  `||\n        // ||    `'         || ||         `'    || ||    `'         || ||   | \\  / |   ||\n        // ||            .===' `===.         .==='.`===.         .===' /==. |  \\/  |   ||\n        // ||         .=='   \\_|-_ `===. .==='   _|_   `===. .===' _-|/   `==  \\/  |   ||\n        // ||      .=='    _-'    `-_  `='    _-'   `-_    `='  _-'   `-_  /|  \\/  |   ||\n        // ||   .=='    _-'          `-__\\._-'         `-_./__-'         `' |. /|  |   ||\n        // ||.=='    _-'                                                     `' |  /==.||\n        // =='    _-'                                                            \\/   `==\n        // \\   _-'                                                                `-_   /\n        //  `''                                                                      ``'\n        //\n        let recentKeystrokes = Input.history.map(event => event.key).join('').toUpperCase();\n        if (recentKeystrokes.match(/IDCLEV(\\d\\d)/)) {\n            // Changing levels is as simple as setting the desired level number\n            // and then throwing the current playing field away.\n            Input.consume();\n            this.levelNumber = parseInt(RegExp.$1, 10);\n            this.field = undefined;\n        } else if (recentKeystrokes.includes(\"IDDQD\")) {\n            Input.consume();\n            console.log(\"god mode\");\n        } else if (recentKeystrokes.includes(\"IDKFA\")) {\n            // Immediately end the current level as if we'd touched the reasure.\n            Input.consume();\n            this.field.winning = true;\n        }\n    }\n}\n","/**\n * `Game` is a singleton that represents the running game in the browser,\n * initializes game submodules, and handles the top-level game loop.\n */\n\nimport { Sprite } from './Sprite';\nimport { Input } from './Input';\nimport { Text } from './Text';\nimport { Viewport } from './Viewport';\nimport { GAME_WIDTH, GAME_HEIGHT, PLAY_SPEEDS } from './Constants';\nimport { Audio } from './Audio';\nimport { Screen } from './Screen';\nimport { MainMenu } from './MainMenu';\nimport { InstructionsMenu } from './InstructionsMenu';\nimport { GameSession } from './GameSession';\n\nexport class Game {\n    init() {\n        Sprite.loadSpritesheet(async () => {\n            await Viewport.init();\n            await Screen.init();\n            await Sprite.init();\n            await Text.init();\n            await Input.init();\n            await Audio.init();\n\n            window.addEventListener('blur', () => this.pause());\n            window.addEventListener('focus', () => this.unpause());\n\n            this.start();\n        });\n    }\n\n    start() {\n        this.frame = 0;\n        this.playSpeed = 0;\n        this.menu = new MainMenu();\n\n        window.requestAnimationFrame(() => this.onFrame());\n    }\n\n    onFrame() {\n        let fps = 60;\n        let now = new Date().getTime();\n        let lastFrame = this.lastFrame || 0;\n\n        // Note: we are using `requestAnimationFrame`, which will call our onFrame handler\n        // 60 times per second in most cases. However, it can be higher (the browser may\n        // respect the user's refresh settings, which could be 120Hz or higher for example).\n        //\n        // It's safest to have a check like we do here, where we explicitly limit the number\n        // of update calls to 60 times per second.\n        if (now - lastFrame >= 1000 / fps) {\n            this.update();\n            this.lastFrame = now;\n        }\n\n        Viewport.resize();\n        this.draw();\n\n        window.requestAnimationFrame(() => this.onFrame());\n    }\n\n    update() {\n        // Pull in frame by frame button pushes / keypresses / mouse clicks\n        Input.update();\n\n        // perform any per-frame audio updates\n        Audio.update();\n\n        if (this.menu) {\n            this.menu.update();\n        }\n\n        if (this.session) this.session.update();\n    }\n\n    draw() {\n        // Reset canvas transform and scale\n        Viewport.ctx.setTransform(Viewport.scale, 0, 0, Viewport.scale, 0, 0);\n\n        // Clear canvas\n        Viewport.ctx.fillStyle = 'black';\n        Viewport.ctx.fillRect(0, 0, Viewport.width, Viewport.height);\n\n        // Center the 80x25 character \"screen\" in the viewport\n        Viewport.ctx.translate((Viewport.width - GAME_WIDTH) / 2 | 0, (Viewport.height - GAME_HEIGHT) / 2 | 0);\n\n        // Hand off control to our submodules to draw whatever they'd like. For all the submodules\n        // below us, \"drawing\" means writing text to the Screen.\n        Screen.clear();\n        if (this.session) this.session.draw();\n        if (this.menu) this.menu.draw();\n\n        // Render the text on the screen to the viewport.\n        Screen.drawToViewport();\n    }\n\n    pause() {\n        if (this.paused) return;\n        this.paused = true;\n        Audio.pause();\n    }\n\n    unpause() {\n        if (!this.paused) return;\n        this.paused = false;\n        Audio.unpause();\n    }\n\n    startSession() {\n        this.menu = undefined;\n        this.session = new GameSession();\n    }\n\n    showMainMenu() {\n        this.menu = new MainMenu();\n        this.session = undefined;\n    }\n\n    showInstructions() {\n        this.menu = new InstructionsMenu();\n        this.session = undefined;\n    }\n}\n","/**\n * This is the entry point for the game.\n */\nimport { Game } from './Game';\n\nGame.init();\n"]}