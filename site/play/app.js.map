{"version":3,"sources":["app.js","../src/js/Constants.js","../src/js/Viewport.js","../src/js/Util.js","../src/js/SpriteSheet-gen.js","../src/js/Sprite.js","../src/js/Input.js","../src/js/Text.js","../src/js/lib/zzfx.js","../src/js/lib/zzfxm.js","../src/js/songs/ObliqueMystique.js","../src/js/Audio.js","../src/js/ScreenShake.js","../src/js/Screen.js","../src/js/MainMenu.js","../src/js/InstructionsMenu.js","../src/js/Behavior.js","../src/js/Entity.js","../src/js/Player.js","../src/js/Rock.js","../src/js/Level.js","../src/js/Field.js","../src/js/Session.js","../src/js/Game.js","../src/js/index.js"],"names":["PLAY_SPEEDS","Viewport","[object Object]","canvas","document","getElementById","ctx","getContext","resize","force","dpi","window","devicePixelRatio","width","clientWidth","height","clientHeight","dpiWidth","dpiHeight","scale","Math","min","ceil","center","u","v","imageSmoothingEnabled","fillRect","rgba","r","g","b","a","createCanvas","createElement","SpriteSheet","Sprite","cb","image","Image","onload","src","sheet","data","anchor","font","source","w","h","img","x","y","initDynamicSprite","sliceCanvas","drawImage","loadCacheSlice","sprite","pos","rotation","this","viewportSprite2uv","save","translate","rotate","restore","game","camera","Action","UP","DOWN","LEFT","RIGHT","JUMP","STOP","PAUSE","Input","KeyMapping","KeyW","KeyS","KeyA","KeyD","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Space","buffer","history","addEventListener","event","entry","at","Date","getTime","key","code","action","push","console","log","now","filter","length","undefined","UNICODE_CHAR_MAP","join","split","reduce","map","char","idx","Text","white","black","recolor","black_shadow","blue","blue_shadow","shadow","red","terminal","terminal_shadow","text","Array","isArray","block","drawText","k","charCodeAt","floor","measureWidth","sum","c","cu","cv","next","wip","list","cWidth","saved","space","pop","line","col","row","splitParagraph","color","fillStyle","globalCompositeOperation","zzfx","t","zzfxP","zzfxG","e","zzfxX","createBufferSource","f","createBuffer","zzfxR","d","i","getChannelData","set","connect","destination_","start","q","F","z","A","l","B","G","m","C","p","PI","H","I","D","random","Z","E","n","J","K","sin","max","tan","abs","round","zzfxV","top","AudioContext","webkitAudioContext","destination","ObliqueMystique","Audio","readyToPlay","gain_","createGain","shotgun","page","shellReload","damage","alarm","victory","song","instruments","patterns","sequence","BPM","instrumentParameters","j","note","sample","patternChannel","notFirstBeat","stop","instrument","pitch","attenuation","outSampleOffset","sampleOffset","nextSampleOffset","panning","sampleBuffer","leftChannelBuffer","rightChannelBuffer","channelIndex","hasMore","sampleCache","beatLength","patternIndex","sequenceIndex","zzfxM","musicPlaying","sound","gain","linearRampToValueAtTime","currentTime","ScreenShake","frames","hAmplitude","vAmplitude","hSamples","vSamples","sampleCount","frame","s","s0","s1","decay","Screen","screen","clear","MainMenu","lastKeyPressed","toUpperCase","consume","startSession","playSpeed","showInstructions","highScores","write","InstructionsMenu","showMainMenu","State","STOPPED","FALLING","START_JUMP","JUMP_LEFT","JUMP_RIGHT","JUMP_UP","DYING","DEAD","JUMP_FRAMES","Entity","field","repeat","nextState","state","includes","onSolid","jumpStep","isLadder","emptySpace","canClimbUp","canClimbDown","step","terrain","layout","applyMovement","DEATH_FRAMES","Player","super","deathStep","moveFrame","lastActionPressed","Rock","dispenser","LEVEL_COLS","isEater","LevelData","name","time","maxRocks","rocks","Level","LEVELS","LEVEL_COUNT","levelNumber","level","Error","player","dispensers","slice","maRrocks","Field","load","oldX","oldY","update","isDisappearingFloor","checkIfPlayerShouldDie","session","rock","isStatue","updateScore","isTreasure","startNextLevel","isTrampoline","restartLevel","draw","forEach","isFire","splice","Session","score","levelCycle","lives","nextLife","moveFps","lastFrame","recentKeystrokes","match","parseInt","RegExp","$1","stat","String","padStart","Levels","scoreType","loadSpritesheet","async","init","pause","unpause","menu","requestAnimationFrame","onFrame","paused","screenshakes","screenshake","shadowOffset","setTransform","drawToViewport"],"mappings":"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","file":"app.js","sourcesContent":["(function () {\n    'use strict';\n\n    /**\n     * Constants\n     */\n\n    // The playable area. Note that this is the desired dimensions, but the actual on-screen dimensions\n    // may be larger to maintain aspect ratio (see `Viewport.width` & `Viewport.height`).\n    const GAME_WIDTH = 640;\n    const GAME_HEIGHT = 400;\n\n    // The \"screen area\". This is an ASCII game and so most of the game logic doesn't care about browser\n    // pixels, we care about the ASCII display area (80x25).\n    const SCREEN_WIDTH = 80;\n    const SCREEN_HEIGHT = 25;\n\n    // The size of our on-screen characters (given dimensions above, this is 80 cols by 25 rows).\n    const CHAR_WIDTH = 8;\n    const CHAR_HEIGHT = 16;\n    const CHARSHEET_WIDTH = 16 * CHAR_WIDTH;\n\n    // Fixed level size\n    const LEVEL_ROWS = 20;\n    const LEVEL_COLS = 79;\n\n    // Play speeds, expressed as frames per second.\n    //\n    // According to the original, the play speeds had millisecond delays of:\n    //   [100ms, 50ms, 25ms, 13ms, 7ms].\n    //\n    // This would mean the effective FPS was:\n    //   [10, 20, 40, 76, 142].\n    //\n    // I think this is way too high, and might not be accurate (it doesn't count\n    // time spent drawing the screen and running the game's logic, which might\n    // be a significant number of milliseconds). From memory, each speed was about\n    // 50% faster than the previous one, so that's what I've set here.\n    const PLAY_SPEEDS = [10, 15, 23, 35, 50];\n\n    // Score events (note, these are just identifiers for the types of score increases, not\n    // actual score values).\n    const SCORE_ROCK = 0;\n    const SCORE_STATUE = 1;\n    const SCORE_TREASURE = 2;\n\n    /**\n     * Viewport\n     *\n     * Represents the game display (for us, a canvas).\n     */\n    const Viewport = {\n        init() {\n            Viewport.canvas = document.getElementById('canvas');\n            Viewport.ctx = Viewport.canvas.getContext('2d');\n            Viewport.resize(true);\n        },\n\n        // Resize the canvas to give us approximately our desired game display size.\n        //\n        // Rather than attempt to explain it, here's a concrete example:\n        //\n        //     we start with a desired game dimension:   480x270px\n        //          get the actual browser dimensions:  1309x468px\n        //          factor in the display's DPI ratio:  2618x936px\n        //         now calculate the horizontal scale:       5.45x\n        //                     and the vertical scale:       3.46x\n        //            our new offical game scaling is:        5.4x\n        //       and our official viewport dimensions:   484x173px\n        //\n        // This approach emphasizes correct aspect ratio and maintains full-window rendering, at\n        // the potential cost of limiting visibility of the game itself in either the X or Y axis.\n        // If you use this approach, make sure your GUI can \"float\" (otherwise there may be whole\n        // UI elements the player cannot see!).\n        resize(force) {\n            let dpi = window.devicePixelRatio,\n                width = Viewport.canvas.clientWidth,\n                height = Viewport.canvas.clientHeight,\n                dpiWidth = width * dpi,\n                dpiHeight = height * dpi;\n\n            if (\n                force ||\n                Viewport.canvas.width !== dpiWidth ||\n                Viewport.canvas.height !== dpiHeight\n            ) {\n                Viewport.canvas.width = dpiWidth;\n                Viewport.canvas.height = dpiHeight;\n\n                Viewport.scale = ((Math.min(dpiWidth / GAME_WIDTH, dpiHeight / GAME_HEIGHT) * 10) | 0) / 10;\n                Viewport.width = Math.ceil(dpiWidth / Viewport.scale);\n                Viewport.height = Math.ceil(dpiHeight / Viewport.scale);\n                Viewport.center = {\n                    u: (Viewport.width / 2) | 0,\n                    v: (Viewport.height / 2) | 0\n                };\n                Viewport.clientWidth = width;\n                Viewport.clientHeight = height;\n\n                // Note: smoothing flag gets reset on every resize by some browsers, which is why\n                // we do it here.\n                Viewport.ctx.imageSmoothingEnabled = false;\n            }\n\n            // We do this every frame, not just on resize, due to browser sometimes \"forgetting\".\n            //Viewport.canvas.style.cursor = 'none';\n        },\n\n        fillViewportRect() {\n            Viewport.ctx.fillRect(0, 0, Viewport.width, Viewport.height);\n        }\n    };\n\n    function rgba(r, g, b, a) {\n        return `rgba(${r},${g},${b},${a})`;\n    }\n\n    function createCanvas(width, height) {\n        let canvas = document.createElement('canvas');\n        canvas.width = width;\n        canvas.height = height;\n        let ctx = canvas.getContext('2d');\n        return { canvas, ctx };\n    }\n\n    /**\n     * This module is generated by `gulp buildAssets`.\n     */\n    const SpriteSheet =\n        /* <generated> */\n    { font: [ [ 128, 0, 128, 448 ] ],\n      font2: [ [ 0, 0, 128, 512 ] ],\n      harold: [ [ 128, 448, 19, 12 ] ],\n      uri: 'sprites.png' };\n    /* </generated> */\n\n    /**\n     * Sprite\n     *\n     * Encapsulates loading sprite slices from the spritesheet, organizing them, and\n     * modifying them or constructing using primitives. To save space, we use some techniques\n     * like storing only a small slice of an image in the spritesheet, then using code\n     * to duplicate it, add some randomness, etc.\n     */\n    const Sprite = {\n        // This is an exception to the rule, loading the spritesheet is a special action that\n        // happens BEFORE everything is initialized.\n        loadSpritesheet(cb) {\n            let image = new Image();\n            image.onload = cb;\n            image.src = SpriteSheet.uri;\n            Sprite.sheet = image;\n        },\n\n        init() {\n            // Base pixel font and icons (see `Text.init` for additional variations)\n            Sprite.font = initBasicSprite(SpriteSheet.font2[0]);\n\n            return;\n        },\n\n        /**\n         * A small helper that draws a sprite onto a canvas, respecting the anchor point of\n         * the sprite. Note that the canvas should be PRE-TRANSLATED and PRE-ROTATED, if\n         * that's appropriate!\n         */\n        drawSprite(ctx, sprite, u, v) {\n            ctx.drawImage(sprite.img, u - sprite.anchor.x, v - sprite.anchor.y);\n        },\n\n        drawViewportSprite(sprite, pos, rotation) {\n            let { u, v } = this.viewportSprite2uv(\n                sprite,\n                pos\n            );\n            if (rotation) {\n                Viewport.ctx.save();\n                Viewport.ctx.translate(u + sprite.anchor.x, v + sprite.anchor.y);\n                Viewport.ctx.rotate(rotation);\n                Viewport.ctx.drawImage(\n                    sprite.img,\n                    -sprite.anchor.x,\n                    -sprite.anchor.y\n                );\n                Viewport.ctx.restore();\n            } else {\n                Viewport.ctx.drawImage(sprite.img, u, v);\n            }\n        },\n\n        viewportSprite2uv(sprite, pos) {\n            return {\n                u: pos.x - sprite.anchor.x - game.camera.pos.x + Viewport.center.u,\n                v: pos.y - sprite.anchor.y - game.camera.pos.y + Viewport.center.v\n            };\n        }\n    };\n\n    // Sprite utility functions\n\n    function initBasicSprite(data, anchor) {\n        return initDynamicSprite(loadCacheSlice(...data), anchor);\n    }\n\n    function initDynamicSprite(source, anchor) {\n        let w = source.width,\n            h = source.height;\n\n        return {\n            img: source,\n            // Hack! Using a flat `.map(initBasicSprite)` is actually going to pass the\n            // element INDEX as second argument, resulting in \"anchor=1\". The right solution\n            // here is \"typeof anchor === 'object' ?\", but to save bytes I avoid using\n            // the typeof and instanceof keywords anywhere in the codebase. Hence,\n            // \"anchor && anchor.x\".\n            anchor: (anchor && anchor.x) ? anchor : { x: (w / 2) | 0, y: (h / 2) | 0 }\n        };\n    }\n\n    function loadCacheSlice(x, y, w, h) {\n        const source = Sprite.sheet;\n        const sliceCanvas = createCanvas(w, h);\n        sliceCanvas.ctx.drawImage(source, x, y, w, h, 0, 0, w, h);\n        return sliceCanvas.canvas;\n    }\n\n    // A list of in-game actions that can be performed by the player\n    const Action = {\n        UP:    11,\n        DOWN:  12,\n        LEFT:  13,\n        RIGHT: 14,\n        JUMP:  15,\n        STOP:  16,\n        PAUSE: 17\n    };\n\n    // A list of key code mappings and what action they perform. Here we hard-code it, but\n    // you could easily also have the key mappings controlled by settings and let the user\n    // configure it.\n    const KeyMapping = {\n        KeyW:       Action.UP,\n        KeyS:       Action.DOWN,\n        KeyA:       Action.LEFT,\n        KeyD:       Action.RIGHT,\n        ArrowUp:    Action.UP,\n        ArrowDown:  Action.DOWN,\n        ArrowLeft:  Action.LEFT,\n        ArrowRight: Action.RIGHT,\n        Space:      Action.JUMP\n    };\n\n    const Input = {\n        Action,\n        KeyMapping,\n\n        init() {\n            // Input buffer - new keypress events go into this buffer to be handled\n            // during the game's update loop. It's up to the `update()` methods to consume\n            // key presses and remove them from the buffer.\n            this.buffer = [];\n\n            // Input history - history contains recent key press events in order,\n            // removed automatically after a few seconds. This is useful for detecting\n            // inputs like cheat codes, for example.\n            this.history = [];\n\n            window.addEventListener('keydown', event => {\n                let entry = {\n                    at: new Date().getTime(),\n                    key: event.key,\n                    code: event.code,\n                    action: Input.KeyMapping[event.code] || Input.Action.STOP\n                };\n                Input.buffer.push(entry);\n                Input.history.push(entry);\n                console.log(entry);\n            });\n        },\n\n        update() {\n            let now = new Date().getTime();\n            this.history = this.history.filter(entry => entry.at > now - 3000);\n        },\n\n        lastKeyPressed() {\n            return this.buffer.length > 0 ? this.buffer[this.buffer.length - 1].key : '';\n        },\n\n        lastCodePressed() {\n            return this.buffer.length > 0 ? this.buffer[this.buffer.length - 1].code : '';\n        },\n\n        lastActionPressed() {\n            return this.buffer.length > 0 ? this.buffer[this.buffer.length - 1].action : undefined;\n        },\n\n        consume() {\n            this.buffer = [];\n        },\n    };\n\n    // In our character sheet, chars 0x00-0x7F are standard ASCII, below that we put whatever\n    // characters are convenient for us. Here we can choose to map unicode characters to positions\n    // 0x80+ in the charsheet, making it easy for us to render things like special characters,\n    // box drawing characters, etc.\n    const SUPPORTED_UNICODE_CHARS = [\n        '─│┌┐└┘├┤┬┴┼╳╳╳╳╳',\n        '═║╔╗╚╝╠╣╦╩╬╳╳╳╳╳',\n        '↑↓←→╳╳╳╳╳╳╳╳╳╳╳╳'\n    ].join('');\n\n    const UNICODE_CHAR_MAP = SUPPORTED_UNICODE_CHARS.split('').reduce((map, char, idx) => {\n        map[char] = 0x80 + idx;\n        return map;\n    }, {});\n\n    /**\n     * Text\n     *\n     * Utilities for drawing text using in-game pixel font.\n     */\n    const Text = {\n        init() {\n            Text.white = Sprite.font.img;\n\n            Text.black = recolor(Text.white, rgba(0, 0, 0, 1));\n            Text.black_shadow = recolor(Text.white, rgba(90, 20, 90, 0.15));\n            Text.blue = recolor(Text.white, rgba(200, 40, 220, 1));\n            Text.blue_shadow = recolor(Text.white, rgba(240, 50, 200, 0.2));\n            Text.shadow = recolor(Text.white, rgba(240, 240, 255, 0.25));\n            Text.red = recolor(Text.white, rgba(240, 50, 50, 1));\n\n            Text.terminal = recolor(Text.white, rgba(51, 255, 0, 1));\n            Text.terminal_shadow = recolor(Text.white, rgba(255, 255, 255, 0.3));\n\n            Text.terminal = recolor(Text.white, rgba(51, 255, 0, 0.9));\n            Text.terminal_shadow = undefined;\n\n            Text['#ead4aa'] = recolor(Text.white, '#ead4aa');\n            Text['#fee761'] = recolor(Text.white, '#fee761');\n            Text['#ff0044'] = recolor(Text.white, '#ff0044');\n        },\n\n        drawText(ctx, text, u, v, scale = 1, font = Text.white, shadow) {\n            if (Array.isArray(text)) {\n                for (let block of text) {\n                    Text.drawText(ctx, block.text, u + block.u * scale, v + block.v * scale, scale, font, shadow);\n                }\n                return;\n            }\n\n            for (let idx = 0; idx < text.length; idx++) {\n                let c = UNICODE_CHAR_MAP[text[idx]] || text.charCodeAt(idx);\n                let k = (c - 0) * (CHAR_WIDTH);\n                if (shadow) {\n                    ctx.drawImage(\n                        shadow,\n                        k % CHARSHEET_WIDTH,\n                        Math.floor(k / CHARSHEET_WIDTH) * CHAR_HEIGHT,\n                        CHAR_WIDTH,\n                        CHAR_HEIGHT,\n                        u + 1,\n                        v,\n                        CHAR_WIDTH * scale,\n                        CHAR_HEIGHT * scale\n                    );\n                }\n                ctx.drawImage(\n                    font,\n                    k % CHARSHEET_WIDTH,\n                    Math.floor(k / CHARSHEET_WIDTH) * CHAR_HEIGHT,\n                    CHAR_WIDTH,\n                    CHAR_HEIGHT,\n                    u,\n                    v,\n                    CHAR_WIDTH * scale,\n                    CHAR_HEIGHT * scale\n                );\n                u += CHAR_WIDTH * scale;\n            }\n        },\n\n        /*\n        drawRightText(ctx, text, u, v, scale = 1, font = Text.white, shadow) {\n            u -= Text.measureWidth(text, scale);\n            Text.drawText(ctx, text, u, v, scale, font, shadow);\n        },\n        */\n\n        measureWidth(text, scale = 1) {\n            return text.split('').reduce((sum, c) => sum + CHAR_WIDTH, 0) * scale;\n        },\n\n        splitParagraph(text, w, h) {\n            let cu = 0, cv = 0;\n            let next = () => ({ text: '', u: cu, v: cv });\n            let wip = next();\n            let list = [];\n\n            for (let c of text.split('')) {\n                let cWidth = Text.measureWidth(c, 1);\n                if (c === '\\n' || cu + cWidth > w) {\n                    let saved = '';\n                    if (c !== '\\n' && c !== ' ') {\n                        let space = wip.text.split(' ');\n                        if (space.length > 1) {\n                            saved = space.pop();\n                            wip.text = space.join(' ');\n                        }\n                    }\n                    if (wip.text.length > 0) list.push(wip);\n                    cu = 0;\n                    cv += (CHAR_HEIGHT);\n                    wip = next();\n                    if (saved.length > 0) {\n                        wip.text = saved;\n                        cu += Text.measureWidth(wip.text, 1);\n                    }\n                } else {\n                    cu += cWidth;\n                }\n                if (c !== '\\n') {\n                    wip.text = wip.text + c;\n                }\n            }\n\n            if (wip.text.length > 0) list.push(wip);\n\n            return list.map(line => ({\n                ...line,\n                w: Text.measureWidth(line.text, 1),\n                h: CHAR_HEIGHT\n            }));\n        },\n\n        drawTextColRow(text, col, row) {\n            Text.drawText(Viewport.ctx, Text.splitParagraph(text, Viewport.width), col * CHAR_WIDTH, row * CHAR_HEIGHT, 1, Text.terminal, Text.terminal_shadow);\n        }\n    };\n\n    // Text utility functions\n\n    function recolor(font, color) {\n        let canvas = createCanvas(font.width, font.height);\n        canvas.ctx.fillStyle = color;\n        canvas.ctx.fillRect(0, 0, font.width, font.height);\n        canvas.ctx.globalCompositeOperation = 'destination-in';\n        canvas.ctx.drawImage(font, 0, 0);\n        return canvas.canvas;\n    }\n\n    // zzfx() - the universal entry point -- returns a AudioBufferSourceNode\n    const zzfx=(...t)=>zzfxP(zzfxG(...t));\n\n    // zzfxP() - the sound player -- returns a AudioBufferSourceNode\n    const zzfxP=(...t)=>{let e=zzfxX.createBufferSource(),f=zzfxX.createBuffer(t.length,t[0].length,zzfxR);t.map((d,i)=>f.getChannelData(i).set(d)),e.buffer=f,e.connect(zzfx.destination_),e.start();return e};\n\n    // zzfxG() - the sound generator -- returns an array of sample data\n    const zzfxG=(q=1,k=.05,c=220,e=0,t=0,u=.1,r=0,F=1,v=0,z=0,w=0,A=0,l=0,B=0,x=0,G=0,d=0,y=1,m=0,C=0)=>{let b=2*Math.PI,H=v*=500*b/zzfxR**2,I=(0<x?1:-1)*b/4,D=c*=(1+2*k*Math.random()-k)*b/zzfxR,Z=[],g=0,E=0,a=0,n=1,J=0,K=0,f=0,p,h;e=99+zzfxR*e;m*=zzfxR;t*=zzfxR;u*=zzfxR;d*=zzfxR;z*=500*b/zzfxR**3;x*=b/zzfxR;w*=b/zzfxR;A*=zzfxR;l=zzfxR*l|0;for(h=e+m+t+u+d|0;a<h;Z[a++]=f)++K%(100*G|0)||(f=r?1<r?2<r?3<r?Math.sin((g%b)**3):Math.max(Math.min(Math.tan(g),1),-1):1-(2*g/b%2+2)%2:1-4*Math.abs(Math.round(g/b)-g/b):Math.sin(g),f=(l?1-C+C*Math.sin(2*Math.PI*a/l):1)*(0<f?1:-1)*Math.abs(f)**F*q*zzfxV*(a<e?a/e:a<e+m?1-(a-e)/m*(1-y):a<e+m+t?y:a<h-d?(h-a-d)/u*y:0),f=d?f/2+(d>a?0:(a<h-d?1:(h-a)/d)*Z[a-d|0]/2):f),p=(c+=v+=z)*Math.sin(E*x-I),g+=p-p*B*(1-1E9*(Math.sin(a)+1)%2),E+=p-p*B*(1-1E9*(Math.sin(a)**2+1)%2),n&&++n>A&&(c+=w,D+=w,n=0),!l||++J%l||(c=D,v=H,n=n||1);return Z};\n\n    // zzfxV - global volume\n    const zzfxV=.3;\n\n    // zzfxR - global sample rate\n    const zzfxR=44100;\n\n    // zzfxX - the common audio context\n    const zzfxX=new(top.AudioContext||webkitAudioContext);\n\n    // destination for zzfx and zzfxm sounds\n    zzfx.destination_ = zzfxX.destination;\n\n    /**\n     * ZzFX Music Renderer v2.0.2 by Keith Clark\n     */\n\n    /**\n     * @typedef Channel\n     * @type {Array.<Number>}\n     * @property {Number} 0 - Channel instrument\n     * @property {Number} 1 - Channel panning (-1 to +1)\n     * @property {Number} 2 - Note\n     */\n\n    /**\n     * @typedef Pattern\n     * @type {Array.<Channel>}\n     */\n\n    /**\n     * @typedef Instrument\n     * @type {Array.<Number>} ZzFX sound parameters\n     */\n\n    /**\n     * Generate a song\n     *\n     * @param {Array.<Instrument>} instruments - Array of ZzFX sound paramaters.\n     * @param {Array.<Pattern>} patterns - Array of pattern data.\n     * @param {Array.<Number>} sequence - Array of pattern indexes.\n     * @param {Number} [speed=125] - Playback speed of the song (in BPM).\n     * @returns {Array.<Array.<Number>>} Left and right channel sample data.\n     */\n\n    const zzfxM = (instruments, patterns, sequence, BPM = 125) => {\n        let instrumentParameters,\n            i,\n            j,\n            k,\n            note,\n            sample,\n            patternChannel,\n            notFirstBeat,\n            stop,\n            instrument,\n            pitch,\n            attenuation,\n            outSampleOffset,\n            sampleOffset,\n            nextSampleOffset,\n            sampleBuffer = [],\n            leftChannelBuffer = [],\n            rightChannelBuffer = [],\n            channelIndex = 0,\n            panning,\n            hasMore = 1,\n            sampleCache = {},\n            beatLength = ((zzfxR / BPM) * 60) >> 2;\n\n        // for each channel in order until there are no more\n        for (; hasMore; channelIndex++) {\n            // reset current values\n            sampleBuffer = [(hasMore = notFirstBeat = pitch = outSampleOffset = 0)];\n\n            // for each pattern in sequence\n            sequence.map((patternIndex, sequenceIndex) => {\n                // get pattern for current channel, use empty 1 note pattern if none found\n                patternChannel = patterns[patternIndex][channelIndex] || [0, 0, 0];\n\n                // check if there are more channels\n                hasMore |= !!patterns[patternIndex][channelIndex];\n\n                // get next offset, use the length of first channel\n                nextSampleOffset =\n                    outSampleOffset +\n                    (patterns[patternIndex][0].length - 2 - !notFirstBeat) *\n                        beatLength;\n\n                // for each beat in pattern, plus one extra if end of sequence\n                for (\n                    i = 2, k = outSampleOffset;\n                    i <\n                    patternChannel.length + (sequenceIndex == sequence.length - 1);\n                    notFirstBeat = ++i\n                ) {\n                    // <channel-note>\n                    note = patternChannel[i];\n\n                    // stop if different instrument or new note\n                    stop = (instrument != (patternChannel[0] || 0)) | note | 0;\n\n                    // fill buffer with samples for previous beat, most cpu intensive part\n                    for (\n                        j = 0;\n                        j < beatLength && notFirstBeat;\n                        // fade off attenuation at end of beat if stopping note, prevents clicking\n                        j++ > beatLength - 99 && stop\n                            ? (attenuation += (attenuation < 1) / 99)\n                            : 0\n                    ) {\n                        // copy sample to stereo buffers with panning\n                        sample =\n                            ((1 - attenuation) * sampleBuffer[sampleOffset++]) /\n                                2 || 0;\n                        leftChannelBuffer[k] =\n                            (leftChannelBuffer[k] || 0) + sample * panning - sample;\n                        rightChannelBuffer[k] =\n                            (rightChannelBuffer[k++] || 0) +\n                            sample * panning +\n                            sample;\n                    }\n\n                    // set up for next note\n                    if (note) {\n                        // set attenuation\n                        attenuation = note % 1;\n                        panning = patternChannel[1] || 0;\n                        if ((note |= 0)) {\n                            // get cached sample\n                            sampleBuffer = sampleCache[\n                                [\n                                    (instrument =\n                                        patternChannel[(sampleOffset = 0)] || 0),\n                                    note\n                                ]\n                            ] =\n                                sampleCache[[instrument, note]] ||\n                                // add sample to cache\n                                ((instrumentParameters = [\n                                    ...instruments[instrument]\n                                ]),\n                                (instrumentParameters[2] *=\n                                    2 ** ((note - 12) / 12)),\n                                zzfxG(...instrumentParameters));\n                        }\n                    }\n                }\n\n                // update the sample offset\n                outSampleOffset = nextSampleOffset;\n            });\n        }\n\n        return [leftChannelBuffer, rightChannelBuffer];\n    };\n\n    const ObliqueMystique = [[[1.3,0,23,,,.2,3,5],[1.5,0,4e3,,,.03,2,1.25,,,,,.02,6.8,-.3,,.5],[.7,0,2100,,,.2,3,3,,,-400,,,2],[,0,655,,,.11,2,1.65,,,,,,3.8,-.1,.1]],[[[,-.5,13,,,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,14,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,14,,,,],[1,.3,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,],[2,1,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,],[,.6,,,,,13,,18,,19,,,,,,,,19,,18,,,,16,,,,13,,,,,,,,,,13,,18,,19,,,,,,,,18,19,18,,,,13,14,13,,16,,18,,19,,],[3,-1,,,13,,,,,,,,,,,,13,,,,,,,,,,,,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,,,13,13,13,13]],[[,-.5,13,,,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,14,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,14,,,,],[1,.3,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,],[2,1,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,]]],[1,1,0,0,0,0,1,0],,];\n\n    const Audio = {\n        init() {\n            Audio.readyToPlay = false;\n\n            Audio.ctx = zzfxX;\n            Audio.gain_ = Audio.ctx.createGain();\n            Audio.gain_.connect(Audio.ctx.destination);\n            zzfx.destination_ = Audio.gain_;\n\n            Audio.shotgun = [,0.01,140,0.01,0.02,0.45,4,2.42,0.1,-0.1,,,,1.2,,0.3,0.04,0.8,0.02];\n            Audio.page = [,,1233,,.01,.2,1,1.43,,,539,.1,,,,,,.51,.03,.01];\n            Audio.shellReload = [,,68,0.01,,0.14,1,1.53,7.5,0.1,50,0.02,-0.01,-0.2,0.1,0.2,,0.47,0.01];\n            Audio.damage = [,,391,,.19,.01,2,.54,-4,20,,,,,,,.02,.9];\n            Audio.alarm = [,,970,.12,.25,.35,,.39,8.1,,10,.1,.2,,.1,,,.6,.09,.13];\n            // [,,961,.05,.06,1.17,1,4.67,.8,,,,,.8,-0.8,.1,.49,.62,.09];\n            Audio.victory = [,,454,.06,.86,.71,2,.63,-0.7,1.7,-83,.09,.27,.3,.2,,.18,.95,.02,.02];\n            Audio.song = zzfxM(...ObliqueMystique);\n\n            // Save our background music in os13k, for fun!\n            //localStorage[`OS13kMusic,${TITLE} - Oblique Mystique`] = JSON.stringify(ObliqueMystique);\n        },\n\n        update() {\n            if (!Audio.readyToPlay) return;\n\n            if (!Audio.musicPlaying) {\n                //Audio.bgmusicnode = zzfxP(...Audio.song);\n                //Audio.bgmusicnode.loop = true;\n                Audio.musicPlaying = true;\n            }\n        },\n\n        play(sound) {\n            if (!Audio.readyToPlay) return;\n            zzfx(...sound);\n        },\n\n        // It's important we do pausing and unpausing as specific events and not in general update(),\n        // because update() is triggered by the animation frame trigger which does not run if the\n        // page is not visible. (So, if you want the music to fade in the background, for example,\n        // that's not helpful if it won't work because you aren't looking at the page!)\n\n        pause() {\n            Audio.gain_.gain.linearRampToValueAtTime(0, Audio.ctx.currentTime + 1);\n        },\n\n        unpause() {\n            Audio.gain_.gain.linearRampToValueAtTime(1, Audio.ctx.currentTime + 1);\n        }\n    };\n\n    // https://jonny.morrill.me/en/blog/gamedev-how-to-implement-a-camera-shake-effect/\n\n    /**\n     * Shake it baby.\n     */\n    class ScreenShake {\n        constructor(frames, hAmplitude, vAmplitude) {\n            this.frames = frames;\n            this.hAmplitude = hAmplitude;\n            this.vAmplitude = vAmplitude;\n            this.hSamples = [];\n            this.vSamples = [];\n\n            var sampleCount = frames / 2;\n            for (let i = 0; i < sampleCount; i++) {\n                this.hSamples.push(Math.random() * 2 - 1);\n                this.vSamples.push(Math.random() * 2 - 1);\n            }\n            this.frame = -1;\n        }\n\n        update() {\n            this.frame++;\n            if (this.frame >= this.frames) {\n                return false;\n            }\n\n            //let s = (this.frames / 10) * (this.frame / this.frames);\n            let s = this.frame / 2;\n            let s0 = s | 0;\n            let s1 = s0 + 1;\n            let decay = 1 - this.frame / this.frames;\n\n            this.x =\n                this.hAmplitude *\n                decay *\n                (this.hSamples[s0] +\n                    (s - s0) * (this.hSamples[s1] - this.hSamples[s0]));\n            this.y =\n                this.vAmplitude *\n                decay *\n                (this.vSamples[s0] +\n                    (s - s0) * (this.vSamples[s1] - this.vSamples[s0]));\n\n            return true;\n        }\n    }\n\n    const Screen = {\n        init() {\n            this.screen = [];\n            for (let y = 0; y < SCREEN_HEIGHT; y++) {\n                this.screen.push([]);\n            }\n            this.clear();\n        },\n\n        clear() {\n            for (let y = 0; y < SCREEN_HEIGHT; y++) {\n                for (let x = 0; x < SCREEN_WIDTH; x++) {\n                    this.screen[y][x] = ' ';\n                }\n            }\n        },\n\n        write(x, y, text) {\n            if (!Array.isArray(text)) text = [text];\n\n            for (let j = 0; j < text.length; j++) {\n                for (let i = 0; i < text[j].length; i++) {\n                    this.screen[y + j][x + i] = text[j][i];\n                }\n            }\n        },\n\n        drawToViewport() {\n            let text = this.screen.map(row => row.join('')).join('\\n');\n\n            Text.drawText(\n                Viewport.ctx,\n                Text.splitParagraph(text, Viewport.width),\n                0, 0,\n                1,\n                Text.terminal, Text.terminal_shadow\n            );\n        }\n    };\n\n    class MainMenu {\n        constructor() {\n        }\n\n        update() {\n            switch (Input.lastKeyPressed().toUpperCase()) {\n                case 'P':\n                    Input.consume();\n                    game.startSession();\n                    break;\n                case 'L':\n                    Input.consume();\n                    game.playSpeed = (game.playSpeed + 1) % PLAY_SPEEDS.length;\n                    break;\n                case 'I':\n                    Input.consume();\n                    game.showInstructions();\n                    break;\n                case 'E':\n                    Input.consume();\n                    game.showInstructions();\n                    break;\n            }\n        }\n\n        draw() {\n            let version = '?';\n            let terminal = '?';\n\n            let highScores = [\n                `1) 6000  Bob`,\n                `2) 6000  Tom`,\n                `3) 4000  Wayne`,\n                ``,\n                ``\n            ];\n\n            Screen.clear();\n            Screen.write(0, 0, [\n                `               LL                     dd       dd`,\n                `               LL                     dd       dd                      tm`,\n                `               LL         aaaa     ddddd    ddddd    eeee   rrrrrrr`,\n                `               LL        aa  aa   dd  dd   dd  dd   ee  ee  rr    rr`,\n                `               LL        aa  aa   dd  dd   dd  dd   eeeeee  rr`,\n                `               LL        aa  aa   dd  dd   dd  dd   ee      rr`,\n                `               LLLLLLLL   aaa aa   ddd dd   ddd dd   eeee   rr`,\n                ``,\n                `                                       Version:    ${version}`,\n                `(c) 1982, 1983 Yahoo Software          Terminal:   ${terminal}`,\n                `10970 Ashton Ave.  Suite 312           Play speed: ${game.playSpeed + 1} / ${PLAY_SPEEDS.length}`,\n                `Los Angeles, Ca  90024                 Move = ↑↓←→/WASD, Jump = Space,`,\n                `                                       Stop = Other`,\n                ``,\n                `P = Play game                          High Scores`,\n                `L = Change level of difficulty         ${highScores[0]}`,\n                `C = Configure Ladder                   ${highScores[1]}`,\n                `I = Instructions                       ${highScores[2]}`,\n                `E = Exit Ladder                        ${highScores[3]}`,\n                `                                       ${highScores[4]}`,\n                ``,\n                `Enter one of the above:`\n            ]);\n        }\n    }\n\n    class InstructionsMenu {\n        constructor() {\n        }\n\n        update() {\n            if (Input.lastKeyPressed().toUpperCase() !== '') {\n                Input.consume();\n                game.showMainMenu();\n            }\n        }\n\n        draw() {\n            Screen.clear();\n            Screen.write(0, 0, [\n                `You are a Lad trapped in a maze.  Your mission is is to explore the`,\n                `dark corridors never before seen by human eyes and find hidden`,\n                `treasures and riches.`,\n                ``,\n                `You control Lad by typing the direction buttons and jumping by`,\n                `typing SPACE.  But beware of the falling rocks called Der rocks.`,\n                `You must find and grasp the treasures (shown as $) BEFORE the`,\n                `bonus time runs out.`,\n                ``,\n                `A new Lad will be awarded for every 10,000 points.`,\n                `Extra points are awarded for touching the gold`,\n                `statues (shown as &).  You will receive the bonus time points`,\n                `that are left when you have finished the level.`,\n                ``,\n                `Type an ESCape to pause the game.`,\n                ``,\n                `Remember, there is more than one way to skin a cat. (Chum)`,\n                ``,\n                `Good luck Lad.`,\n                ``,\n                ``,\n                ``,\n                `Type RETURN to return to main menu:`\n            ]);\n        }\n    }\n\n    // This is our list of STATES. Each entity starts out in one of these states and can move between\n    // them based on events that happen in the game. (Note that some of these are directions, but\n    // since an entity keeps moving in the direction it is going unless stopped, directions are\n    // states in this game.)\n    const State = {\n        STOPPED:    1,         // Standing still\n        UP:         2,         // Moving up (player only)\n        LEFT:       3,         // Moving left\n        DOWN:       4,         // Moving down\n        RIGHT:      5,         // Moving right\n        FALLING:    6,         // Falling\n        START_JUMP: 7,         // About to start a jump (player only)\n        JUMP_LEFT:  8,         // Jumping left (player only)\n        JUMP_RIGHT: 9,         // Jumping right (player only)\n        JUMP_UP:    10,        // Jumping straight up (player only)\n        DYING:      11,        // Dying (used as a death animation)\n        DEAD:       12         // Dead (for player, restart level; for rock, disappear)\n    };\n\n    const JUMP_FRAMES = {\n        [State.JUMP_RIGHT]: [\n            { x: 1, y: -1 },\n            { x: 1, y: -1 },\n            { x: 1, y: 0 },\n            { x: 1, y: 0 },\n            { x: 1, y: 1 },\n            { x: 1, y: 1 }\n        ],\n        [State.JUMP_LEFT]: [\n            { x: -1, y: -1 },\n            { x: -1, y: -1 },\n            { x: -1, y: 0 },\n            { x: -1, y: 0 },\n            { x: -1, y: 1 },\n            { x: -1, y: 1 }\n        ],\n        [State.JUMP_UP]: [\n            { x: 0, y: -1 },\n            { x: 0, y: -1 },\n            { x: 0, y: 0 },\n            { x: 0, y: 1 },\n            { x: 0, y: 1 },\n            { x: 0, y: 0 }\n        ],\n    };\n\n    class Entity {\n        applyMovement(field) {\n            let repeat = false;\n\n            // This method contains generic \"movement\" application for all entities, including\n            // Lad (player) and Der Rocks (enemies). Things like falling, moving left/right, etc.,\n            // work the same for both.\n            //\n            // (There's a bunch of jump logic in here too, and moving UP, which really only applies\n            // to players, but that's OK -- Der Rocks just won't attempt those actions.)\n\n            if (this.nextState) {\n                switch (this.state) {\n                    case State.STOPPED:\n                    case State.LEFT:\n                    case State.RIGHT:\n                        if ([State.LEFT, State.RIGHT, State.STOPPED].includes(this.nextState)) {\n                            this.state = this.nextState;\n                            this.nextState = undefined;\n                        }\n                        break;\n\n                    case State.UP:\n                    case State.DOWN:\n                        // Normal\n                        if ([State.LEFT, State.RIGHT].includes(this.nextState)) {\n                            this.state = this.nextState;\n                            this.nextState = undefined;\n                        }\n                        break;\n                }\n            }\n\n            if (this.nextState === State.START_JUMP) {\n                // Special case: the user wants to jump!\n                //\n                // If the player is standing on something solid, we initiate a jump based on the current\n                // movement of the player. If not, we (sort of) ignore the request to jump... although\n                // it does subtly change the behavior upon landing.\n                if (field.onSolid(this.x, this.y)) {\n                    if (this.state === State.STOPPED || this.state === State.FALLING) {\n                        this.state = State.JUMP_UP;\n                        this.jumpStep = 0;\n                        this.nextState = State.STOPPED;\n                    } else if (this.state === State.LEFT || this.state === State.JUMP_LEFT) {\n                        this.state = State.JUMP_LEFT;\n                        this.jumpStep = 0;\n                        this.nextState = State.LEFT;\n                    } else if (this.state === State.RIGHT || this.state === State.JUMP_RIGHT) {\n                        this.state = State.JUMP_RIGHT;\n                        this.jumpStep = 0;\n                        this.nextState = State.RIGHT;\n                    }\n                } else {\n                    if (this.state === State.JUMP_UP || this.state === State.FALLING) {\n                        this.nextState = State.STOPPED;\n                    } else if (this.state === State.JUMP_RIGHT) {\n                        this.nextState = State.RIGHT;\n                    } else if (this.state === State.JUMP_LEFT) {\n                        this.nextState = State.LEFT;\n                    }\n                }\n            } else if (this.nextState === State.UP && field.isLadder(this.x, this.y)) {\n                // Special case: the user wants to go up!\n                //\n                // If the user is on a ladder, we can start ascending. Note that if the user is not\n                // on a ladder we ignore their input, which is intentional -- this allows queued\n                // (pacman) input, where we can tap UP a little before reaching the ladder.\n                this.state = State.UP;\n                this.nextState = undefined;\n            } else if (this.nextState === State.DOWN && (field.isLadder(this.x, this.y) || field.isLadder(this.x, this.y + 1))) {\n                // Special case: the player wants to go down!\n                //\n                // If the player is on (or above) a ladder, we can start descending. Note that if the player is not\n                // on a ladder we ignore their input, which is intentional -- this allows queued\n                // (pacman) input, where we can tap DOWN a little before reaching the ladder.\n                this.state = State.DOWN;\n                this.nextState = undefined;\n            }\n\n            switch (this.state) {\n                case State.LEFT:\n                    if (!field.onSolid(this.x, this.y)) {\n                        this.nextState = State.LEFT;\n                        this.state = State.FALLING;\n                        repeat = true;\n                        break;\n                    }\n                    if (field.emptySpace(this.x - 1, this.y)) {\n                        this.x--;\n                    } else {\n                        this.nextState = State.STOPPED;\n                    }\n                    break;\n\n                case State.RIGHT:\n                    if (!field.onSolid(this.x, this.y)) {\n                        this.nextState = State.RIGHT;\n                        this.state = State.FALLING;\n                        repeat = true;\n                        break;\n                    }\n                    if (field.emptySpace(this.x + 1, this.y)) {\n                        this.x++;\n                    } else {\n                        this.nextState = State.STOPPED;\n                    }\n                    break;\n\n                case State.UP:\n                    if (field.canClimbUp(this.x, this.y - 1)) {\n                        this.y--;\n                    } else {\n                        this.state = State.STOPPED;\n                    }\n                    break;\n\n                case State.DOWN:\n                    if (field.canClimbDown(this.x, this.y + 1)) {\n                        this.y++;\n                    } else {\n                        this.state = State.STOPPED;\n                    }\n                    break;\n\n                case State.JUMP_RIGHT:\n                case State.JUMP_LEFT:\n                case State.JUMP_UP:\n                    let step = JUMP_FRAMES[this.state][this.jumpStep];\n                    console.log(['jump', this.state, this.jumpStep, step]);\n                    if ((this.x + step.x >= 0) && (this.x + step.x < LEVEL_COLS)) {\n                        let terrain = field.layout[this.y + step.y][this.x + step.x];\n                        if (['=', '|', '-'].includes(terrain)) {\n                            if (field.onSolid(this.x, this.y)) {\n                                this.state = this.nextState;\n                                this.nextState = undefined;\n                            } else {\n                                switch (this.state) {\n                                    case State.JUMP_RIGHT:\n                                        this.nextState = State.RIGHT;\n                                        break;\n                                    case State.JUMP_LEFT:\n                                        this.nextState = State.LEFT;\n                                        break;\n                                    case State.JUMP_UP:\n                                        this.nextState = State.UP;\n                                        break;\n                                }\n                                this.state = State.FALLING;\n                            }\n                        } else if (terrain === 'H') {\n                            this.x += step.x;\n                            this.y += step.y;\n                            this.state = State.STOPPED;\n                            this.nextState = undefined;\n                        } else {\n                            this.x += step.x;\n                            this.y += step.y;\n                            this.jumpStep++;\n\n                            if (this.jumpStep >= JUMP_FRAMES[this.state].length) {\n                                this.state = this.nextState;\n                                this.nextState = undefined;\n                            }\n                        }\n                    } else {\n                        if (field.onSolid(this.x, this.y)) {\n                            this.state = this.nextState;\n                            this.nextState = undefined;\n                        } else {\n                            this.state = State.FALLING;\n                            this.nextState = State.STOPPED;\n                        }\n                    }\n                    break;\n\n                case State.FALLING:\n                    if (field.onSolid(this.x, this.y)) {\n                        this.state = this.nextState || State.STOPPED;\n                    } else {\n                        this.y++;\n                    }\n                    break;\n            }\n\n            // If we were attempting to move somewhere and realized we should be falling instead,\n            // we want to re-run the entire algorithm once. This avoids what boils down to a \"skipped\n            // frame\" from the user's point of view.\n            if (repeat) return this.applyMovement(field);\n        }\n    }\n\n    const DEATH_FRAMES = ['p', 'p', 'b', 'd', 'd', 'q', 'p', 'p', 'b', 'd', 'd', 'q', '-', '-', '_', '_', '_', '_', '_'];\n\n    /**\n     * Player\n     */\n    class Player extends Entity {\n        constructor(x, y) {\n            super();\n            this.x = x;\n            this.y = y;\n            this.state = State.STOPPED;\n            this.nextState = State.STOPPED;\n            this.jumpStep = 0;\n            this.deathStep = 0;\n            console.log('player constructed', x, y);\n        }\n\n        update(field, moveFrame) {\n            if (this.state === State.DYING) {\n                this.deathStep++;\n                if (this.deathStep >= DEATH_FRAMES.length) this.state = State.DEAD;\n            }\n\n            if (this.state === State.DYING || this.state === State.DEAD) return;\n\n            if (!moveFrame) return;\n\n            let action = Input.lastActionPressed();\n\n            if (action === Input.Action.LEFT) {\n                this.nextState = State.LEFT;\n                Input.consume();\n            } else if (action === Input.Action.RIGHT) {\n                this.nextState = State.RIGHT;\n                Input.consume();\n            } else if (action === Input.Action.UP) {\n                this.nextState = State.UP;\n                Input.consume();\n            } else if (action === Input.Action.DOWN) {\n                this.nextState = State.DOWN;\n                Input.consume();\n            } else if (action === Input.Action.JUMP) {\n                this.nextState = State.START_JUMP;\n                Input.consume();\n            }\n\n            return this.applyMovement(field);\n        }\n\n        draw() {\n            let char = 'g';\n\n            switch (this.state) {\n                case State.RIGHT:\n                case State.JUMP_RIGHT:\n                case State.UP:\n                case State.DOWN:\n                    char = 'p';\n                    break;\n\n                case State.LEFT:\n                case State.JUMP_LEFT:\n                    char = 'q';\n                    break;\n\n                case State.FALLING:\n                    char = 'b';\n                    break;\n\n                case State.DYING:\n                    char = DEATH_FRAMES[this.deathStep];\n                    break;\n\n                case State.DEAD:\n                    char = '_';\n                    break;\n            }\n\n            Screen.write(this.x, this.y, char);\n        }\n    }\n\n    const DEATH_FRAMES$1 = ['{', '}', '(', ')', '%', '%', ':', ':'];\n\n    class Rock extends Entity {\n        constructor(dispenser) {\n            super();\n            this.x = dispenser.x;\n            this.y = dispenser.y;\n            this.state = State.FALLING;\n            this.nextState = undefined;\n            this.deathStep = 0;\n        }\n\n        update(field, moveFrame) {\n            if (this.state === State.DYING) {\n                this.deathStep++;\n                if (this.deathStep >= DEATH_FRAMES$1.length) this.state = State.DEAD;\n            }\n\n            if (this.state === State.DYING || this.state === State.DEAD) return;\n\n            if (!moveFrame) return;\n\n            if (this.state === State.STOPPED) {\n                if (this.x === 0 || !field.emptySpace(this.x - 1, this.y)) {\n                    this.nextState = State.RIGHT;\n                } else if (this.x === LEVEL_COLS - 1 || !field.emptySpace(this.x + 1, this.y)) {\n                    this.nextState = State.LEFT;\n                } else {\n                    this.nextState = Math.random() > 0.5 ? State.LEFT : State.RIGHT;\n                }\n            }\n\n            if (this.x === 0 && this.state === State.LEFT) {\n                this.state = State.RIGHT;\n            }\n\n            if (this.x === LEVEL_COLS - 1 && this.state === State.RIGHT) {\n                this.state = State.LEFT;\n            }\n\n            if (this.state !== State.FALLING && !field.onSolid(this.x, this.y)) {\n                this.nextState = State.FALLING;\n            }\n\n            if (field.isLadder(this.x, this.y + 1) && [State.LEFT, State.RIGHT].includes(this.state)) {\n                let r = Math.floor(Math.random() * 4);\n                this.nextState = [State.LEFT, State.RIGHT, State.DOWN, State.DOWN][r];\n            }\n\n            if (field.isEater(this.x, this.y)) {\n                this.state = State.DYING;\n                return;\n            }\n\n            this.applyMovement(field);\n        }\n\n        draw() {\n            let char = 'o';\n\n            switch (this.state) {\n                case State.DYING:\n                    char = DEATH_FRAMES$1[this.deathStep];\n                    break;\n                case State.DEAD:\n                    return;\n            }\n\n            Screen.write(this.x, this.y, char);\n        }\n    }\n\n    var LevelData = [\n    \t{\n    \t\tname: \"Easy Street\",\n    \t\ttime: 35,\n    \t\tmaxRocks: 5,\n    \t\tlayout: [\n    \t\t\t\"                                       V                 $                     \",\n    \t\t\t\"                                                         H                     \",\n    \t\t\t\"                H                                        H                     \",\n    \t\t\t\"       =========H==================================================            \",\n    \t\t\t\"                H                                                              \",\n    \t\t\t\"                H                                                              \",\n    \t\t\t\"                H          H                             H                     \",\n    \t\t\t\"================H==========H==================   ========H=====================\",\n    \t\t\t\"                &          H                             H          |       |  \",\n    \t\t\t\"                                                         H         Easy Street \",\n    \t\t\t\"                H                                        H                     \",\n    \t\t\t\"       =========H==========H=========  =======================                 \",\n    \t\t\t\"                H                                                              \",\n    \t\t\t\"                H                                                              \",\n    \t\t\t\"                H                                        H                     \",\n    \t\t\t\"======================== ====================== =========H==============       \",\n    \t\t\t\"                                                         H                     \",\n    \t\t\t\"                                                         H                     \",\n    \t\t\t\"*    p                                                   H                    *\",\n    \t\t\t\"===============================================================================\"\n    \t\t]\n    \t},\n    \t{\n    \t\tname: \"Long Island\",\n    \t\ttime: 45,\n    \t\tmaxRocks: 8,\n    \t\tlayout: [\n    \t\t\t\"                                                                          $    \",\n    \t\t\t\"                                                                   &      H    \",\n    \t\t\t\"    H       |V                                                     V|     H    \",\n    \t\t\t\"====H======================= ========================= ======================  \",\n    \t\t\t\"    H                                                                          \",\n    \t\t\t\"    H                                                                          \",\n    \t\t\t\"    H                    & |                         . .                  H    \",\n    \t\t\t\"========================== ======  =================== ===================H==  \",\n    \t\t\t\"                                                                          H    \",\n    \t\t\t\"                                  |                                       H    \",\n    \t\t\t\"    H                             |                 .  .                  H    \",\n    \t\t\t\"====H=====================   ======  ================  ======================  \",\n    \t\t\t\"    H                                                                          \",\n    \t\t\t\"    H                      |                                                   \",\n    \t\t\t\"    H                      |                        .   .                 H    \",\n    \t\t\t\"=========================  ========    ==============   ==================H==  \",\n    \t\t\t\"                                                                          H    \",\n    \t\t\t\"==============                      |                                     H    \",\n    \t\t\t\" Long Island |   p         *        |                 *                   H    \",\n    \t\t\t\"===============================================================================\"\n    \t\t]\n    \t},\n    \t{\n    \t\tname: \"Ghost Town\",\n    \t\ttime: 35,\n    \t\tmaxRocks: 5,\n    \t\tlayout: [\n    \t\t\t\"                            V               V           V               $      \",\n    \t\t\t\"                                                                       $$$     \",\n    \t\t\t\"     p    H                                                    H      $$$$$   H\",\n    \t\t\t\"==========H===                                                =H==============H\",\n    \t\t\t\"          H                                                    H              H\",\n    \t\t\t\"          H                              &                     H              H\",\n    \t\t\t\"     ==============   ====     =    ======    =   ====    =====H=====         H\",\n    \t\t\t\"    G              ^^^    ^^^^^ ^^^^      ^^^^ ^^^    ^^^                     $\",\n    \t\t\t\"    h                                                                 |        \",\n    \t\t\t\"    o     |                     H                             &       |        \",\n    \t\t\t\"    s     ======================H============================== ===========    \",\n    \t\t\t\"    t        &                  H                                              \",\n    \t\t\t\"                                H                                              \",\n    \t\t\t\"              |                 H                 H                   H        \",\n    \t\t\t\"    T         ==================H=================H===================H======= \",\n    \t\t\t\"    o                                             H                   H        \",\n    \t\t\t\"    w                                                                 H        \",\n    \t\t\t\"    n                           ^                                     H        \",\n    \t\t\t\"*                              ^^^                                    H       *\",\n    \t\t\t\"===============================================================================\"\n    \t\t]\n    \t},\n    \t{\n    \t\tname: \"Tunnel Vision\",\n    \t\ttime: 36,\n    \t\trocks: 5,\n    \t\tlayout: [\n    \t\t\t\"                                            V                       V          \",\n    \t\t\t\"                                                                               \",\n    \t\t\t\"     H             H                         |                H                \",\n    \t\t\t\"=====H=====--======H==========================     ===----====H===========     \",\n    \t\t\t\"     H             H                |&&                       H                \",\n    \t\t\t\"     H             H                ==================        H                \",\n    \t\t\t\"     H             H                       tunnel  H          H                \",\n    \t\t\t\"     H           =======---===----=================H=         H           H    \",\n    \t\t\t\"     H         |                           vision  H          H           H    \",\n    \t\t\t\"     H         =========---&      -----============H          H           H    \",\n    \t\t\t\"     H           H                                 H |        H           H    \",\n    \t\t\t\"     H           H=========----===----================        H  ==============\",\n    \t\t\t\"                 H                                        &   H                \",\n    \t\t\t\"                 H                                        |   H                \",\n    \t\t\t\"====---====      H                                        |   H                \",\n    \t\t\t\"|         |    ================---===---===================   H                \",\n    \t\t\t\"|   ===   |                                                   H        H    p  \",\n    \t\t\t\"|    $    |                                                   H     ===H=======\",\n    \t\t\t\"|*  $$$  *|   *                *       *                     *H       *H       \",\n    \t\t\t\"===============================================================================\"\n    \t\t]\n    \t},\n    \t{\n    \t\tname: \"Point of No Return\",\n    \t\ttime: 35,\n    \t\tmaxRocks: 7,\n    \t\tlayout: [\n    \t\t\t\"         $                                                                     \",\n    \t\t\t\"         H                                                   V                 \",\n    \t\t\t\"         H                                                                     \",\n    \t\t\t\"         HHHHHHHHHHHHH     .HHHHHHHHHHHHHH                          H    p     \",\n    \t\t\t\"         &                   V           H                        ==H==========\",\n    \t\t\t\"                                         H                          H          \",\n    \t\t\t\"   H                                     H        .                 H          \",\n    \t\t\t\"===H==============-----------============H====                      H          \",\n    \t\t\t\"   H                                                      H         H          \",\n    \t\t\t\"   H                                                 =====H==============      \",\n    \t\t\t\"   H                                     H                H                    \",\n    \t\t\t\"   H              &..^^^.....^..^ . ^^   H==---------     H                    \",\n    \t\t\t\"   H         ============================H    &           H             H      \",\n    \t\t\t\"   H         ===      ===      ===       H    ---------=================H======\",\n    \t\t\t\"   H                                     H                              H      \",\n    \t\t\t\"   H                          &          H          &                   H      \",\n    \t\t\t\"   ==========-------------------------=======----------===================     \",\n    \t\t\t\"                                                                               \",\n    \t\t\t\"^^^*         ^^^^^^^^^^^^^^^^^^^^^^^^^*     *^^^^^^^^^^*Point of No Return*^^^^\",\n    \t\t\t\"===============================================================================\"\n    \t\t]\n    \t},\n    \t{\n    \t\tname: \"Bug City\",\n    \t\ttime: 37,\n    \t\tmaxRocks: 6,\n    \t\tlayout: [\n    \t\t\t\"        Bug City             HHHHHHHH                          V               \",\n    \t\t\t\"                           HHH      HHH                                        \",\n    \t\t\t\"   H                                          >mmmmmmmm                        \",\n    \t\t\t\"   H===============                   ====================          H          \",\n    \t\t\t\"   H              |=====       \\\\  /         V                  =====H==========\",\n    \t\t\t\"   H                            \\\\/                                  H          \",\n    \t\t\t\"   H                                        | $                     H          \",\n    \t\t\t\"   H           H                            | H                     H          \",\n    \t\t\t\"   H       ====H=======          p          |&H    H                H          \",\n    \t\t\t\"   H           H             ======================H           ======          \",\n    \t\t\t\"   H           H      &|                           H                    H      \",\n    \t\t\t\"   H           H      &|                    H      H     }{        =====H====  \",\n    \t\t\t\"===H===&       H       =====================H      H                    H      \",\n    \t\t\t\"               H                            H      H                    H      \",\n    \t\t\t\"               H                            H      &                    H      \",\n    \t\t\t\"         ======H===   =======    H    <>    &                           H      \",\n    \t\t\t\"                                 H==========       =====     =     ============\",\n    \t\t\t\"     }i{                         H                                             \",\n    \t\t\t\"*                                H                                            *\",\n    \t\t\t\"===============================================================================\"\n    \t\t]\n    \t},\n    \t{\n    \t\tname: \"GangLand\",\n    \t\ttime: 32,\n    \t\tmaxRocks: 6,\n    \t\tlayout: [\n    \t\t\t\"                    =Gang Land=                             V                  \",\n    \t\t\t\"                   ==      _  ==                                      .        \",\n    \t\t\t\"      p    H        |  [] |_| |                  &                    .  H     \",\n    \t\t\t\"===========H        |     |_| |       H         ===   ===================H     \",\n    \t\t\t\"      V    H        =============     H======                            H     \",\n    \t\t\t\"           H                          H                     &            H     \",\n    \t\t\t\"           H                          H                |    |            H     \",\n    \t\t\t\"    H      H        ^^^&&^^^ & ^  ^^^ H           H    |    =============H     \",\n    \t\t\t\"    H======H   =======================H===========H=====          &      H     \",\n    \t\t\t\"    H                                 H           H    |         &&&     H     \",\n    \t\t\t\"    H                                 H           H    |        &&&&&    H     \",\n    \t\t\t\"    H                                 H           H    |    =============H     \",\n    \t\t\t\"              =====------=================        H    |       $     $         \",\n    \t\t\t\"                                         |        H    |      $$$   $$$        \",\n    \t\t\t\"====------===                            |        H    |     $$$$$ $$$$$       \",\n    \t\t\t\"            |       =                    | =============    ============       \",\n    \t\t\t\"            |       $                     ^          &                         \",\n    \t\t\t\"            |^^^^^^^^^^^^^^      $ ^              ======                       \",\n    \t\t\t\"*                   .      &   ^ H*^                    ^  ^       ^^^^^^^^^^^^\",\n    \t\t\t\"===============================================================================\"\n    \t\t]\n    \t}\n    ];\n\n    const Level = {\n        LEVELS: LevelData,\n        LEVEL_COUNT: LevelData.length,\n\n        load(levelNumber) {\n            console.log(Level.LEVELS);\n            // As the player keeps playing, level numbers will loop around to beginning\n            let level = Level.LEVELS[levelNumber % Level.LEVELS.length];\n            if (!level) throw new Error(`No such level number: ${levelNumber}`);\n\n            // Perform some sanity checks on the level layout and extract useful info\n            // like player start position and dispenser positions etc.\n\n            let layout = level.layout.map(row => row.split(''));\n            let dispensers = [];\n            let player;\n\n            // Sanity check\n            layout = layout.slice(0, LEVEL_ROWS);\n\n            for (let y = 0; y < LEVEL_ROWS; y++) {\n                // Sanity checks\n                if (!layout[y]) layout[y] = [];\n                layout[y] = layout[y].slice(0, LEVEL_COLS);\n\n                for (let x = 0; x < LEVEL_COLS; x++) {\n                    // Sanity check\n                    if (!layout[y][x]) layout[y][x] = ' ';\n\n                    // Der Dispensers (V) and Der Eaters (*) have behaviors, so it is convenient for us\n                    // to construct a list of them, but they are permanent parts of the layout, so we can\n                    // leave them as part of the level and draw them normally.\n\n                    if (layout[y][x] === 'V') {\n                        dispensers.push({ x, y });\n                    }\n\n                    // Treasure ($), Statues (&), and the Lad (p) are transient - the player moves around and\n                    // can pick up the treasures and statues. That's why for these elements, we add them to\n                    // our lists AND we remove them from the \"playing field\", we'll draw them separately on\n                    // top of the layout.\n\n                    if (layout[y][x] === 'p') {\n                        layout[y][x] = ' ';\n                        player = { x, y };\n                    }\n\n                    // Everything else, like floors (=), walls (|), ladders (H) and fire (^), is part of the\n                    // layout. The Lad interacts with them, but we can handle that during our movement checks.\n                }\n            }\n\n            return {\n                name: level.name,\n                time: level.time,\n                maxRocks: level.maRrocks,\n                layout,\n                dispensers,\n                player\n            };\n        }\n    };\n\n    /**\n     * Field\n     *\n     * The \"field\" represents the current level, or, \"playing field\". A new playing field is created\n     * every time you start a level, so we attach everything about the currently played level to\n     * the field -- positions of treasure, the player, victory conditions, etc.\n     */\n    class Field {\n        constructor(levelNumber) {\n            let level = Level.load(levelNumber);\n\n            this.layout = level.layout;\n            this.dispensers = level.dispensers;\n            this.time = level.time;\n            this.maxRocks = level.rocks;\n            this.rocks = [];\n            this.player = new Player(level.player.x, level.player.y);\n        }\n\n        update(moveFrame) {\n            let oldX = this.player.x, oldY = this.player.y;\n\n            // Move player based on user input\n            this.player.update(this, moveFrame);\n\n            if (oldX !== this.player.x && oldY === this.player.y) {\n                if (this.isDisappearingFloor(oldX, oldY + 1)) {\n                    this.layout[oldY + 1][oldX] = ' ';\n                }\n            }\n\n            // Check if player should be dead (before moving rocks)\n            if (moveFrame) this.checkIfPlayerShouldDie(game.session);\n\n            // Move rocks\n            for (let rock of this.rocks) rock.update(this, moveFrame);\n\n            // Check if player should be dead (after moving rocks)\n            if (moveFrame) this.checkIfPlayerShouldDie(game.session);\n\n            if (moveFrame) {\n                // Collect statues\n                if (this.isStatue(this.player.x, this.player.y)) {\n                    this.layout[this.player.y][this.player.x] = ' ';\n                    game.session.updateScore(SCORE_STATUE);\n                }\n\n                // Collect treasure (ends the current level)\n                if (this.isTreasure(this.player.x, this.player.y)) {\n                    game.session.startNextLevel();\n                }\n\n                // Interact with trampolines\n                if (this.isTrampoline(this.player.x, this.player.y)) {\n                    switch (Math.floor(Math.random() * 5)) {\n                        case 0:\n                            this.player.state = State.LEFT;\n                            this.player.nextState = undefined;\n                            break;\n                        case 1:\n                            this.player.state = State.RIGHT;\n                            this.player.nextState = undefined;\n                            break;\n                        case 2:\n                            this.player.state = State.JUMP_UP;\n                            this.player.nextState = undefined;\n                            this.player.jumpStep = 0;\n                            break;\n                        case 3:\n                            this.player.state = State.JUMP_LEFT;\n                            this.player.nextState = State.LEFT;\n                            this.player.jumpStep = 0;\n                            break;\n                        case 4:\n                            this.player.state = State.JUMP_RIGHT;\n                            this.player.nextState = State.RIGHT;\n                            this.player.jumpStep = 0;\n                            break;\n                    }\n                }\n\n                // Dispense new rocks\n                if (this.rocks.length < 3 && Math.random() > 0.9) {\n                    let dispenser = this.dispensers[Math.floor(Math.random() * this.dispensers.length)];\n                    this.rocks.push(new Rock(dispenser));\n                }\n\n                // Kill dead rocks\n                this.rocks = this.rocks.filter(rock => rock.state !== State.DEAD);\n\n                // Kill player\n                if (this.player.state === State.DEAD) {\n                    game.session.restartLevel();\n                }\n            }\n        }\n\n        draw() {\n            // Draw layout\n            Screen.write(0, 0, this.layout.map(row => row.join('')));\n\n            // Draw player\n            this.player.draw();\n\n            // Draw rocks\n            this.rocks.forEach(rock => rock.draw());\n        }\n\n        onSolid(x, y) {\n            return ['=', '-', 'H', '|'].includes(this.layout[y + 1][x]) || this.layout[y][x] === 'H';\n        }\n\n        emptySpace(x, y) {\n            if (x < 0 || x >= LEVEL_COLS) {\n                return false;\n            } else {\n                return !['|', '='].includes(this.layout[y][x]);\n            }\n        }\n\n        isLadder(x, y) {\n            return this.layout[y][x] === 'H';\n        }\n\n        isStatue(x, y) {\n            return this.layout[y][x] === '&';\n        }\n\n        isTreasure(x, y) {\n            return this.layout[y][x] === '$';\n        }\n\n        isTrampoline(x, y) {\n            return this.layout[y][x] === '.';\n        }\n\n        isEater(x, y) {\n            return this.layout[y][x] === '*';\n        }\n\n        isFire(x, y) {\n            return this.layout[y][x] === '^';\n        }\n\n        isDisappearingFloor(x, y) {\n            return this.layout[y][x] === '-';\n        }\n\n        canClimbUp(x, y) {\n            if (y < 0) return false;\n            return ['H', '&', '$'].includes(this.layout[y][x]);\n        }\n\n        canClimbDown(x, y) {\n            return ['H', '&', '$', ' ', '^', '.'].includes(this.layout[y][x]);\n        }\n\n        checkIfPlayerShouldDie() {\n            if (this.player.state === State.DYING || this.player.state === State.DEAD) return;\n\n            if (this.isFire(this.player.x, this.player.y)) {\n                this.player.state = State.DYING;\n            }\n\n            for (let i = 0; i < this.rocks.length; i++) {\n                if (this.player.x === this.rocks[i].x) {\n                    if (this.player.y === this.rocks[i].y) {\n                        this.player.state = State.DYING;\n                        this.rocks.splice(i, 1);\n                        break;\n                    } else if (this.player.y === this.rocks[i].y - 1 && this.emptySpace(this.player.x, this.player.y + 1)) {\n                        game.session.updateScore(SCORE_ROCK);\n                    } else if (this.player.y === this.rocks[i].y - 2 && this.emptySpace(this.player.x, this.player.y + 1) && this.emptySpace(this.player.x, this.player.y + 2)) {\n                        game.session.updateScore(SCORE_ROCK);\n                    }\n                }\n            }\n        }\n    }\n\n    class Session {\n        constructor() {\n            this.score = 0;\n            this.levelNumber = 0;\n            this.levelCycle = 1;\n            this.lives = 5;\n            this.nextLife = 100;\n        }\n\n        update() {\n            // The overall game loop runs at a fixed 60 frames per second, but the Play Speed selected\n            // at the main menu controls how fast the game runs. To accomplish that, we do a second\n            // time check here, and unless this is a \"move frame\", we skip all the logic related to\n            // moving entities.\n            //\n            // This setup allows us to have things like death animations look the same regardless of\n            // the Play Speed selected.\n            let moveFps = PLAY_SPEEDS[game.playSpeed];\n            let now = new Date().getTime();\n            let lastFrame = this.lastFrame || 0;\n            let moveFrame = false;\n\n            if (now - lastFrame >= 1000 / moveFps) {\n                moveFrame = true;\n                this.lastFrame = now;\n            }\n\n            if (!this.field) {\n                this.field = new Field(this.levelNumber);\n            }\n\n            this.field.update(moveFrame);\n\n            let recentKeystrokes = Input.buffer.map(event => event.key).join('').toUpperCase();\n\n            if (recentKeystrokes.match(/IDCLEV(\\d\\d)/)) {\n                Input.consume();\n                this.field = undefined;\n                this.levelNumber = parseInt(RegExp.$1, 10);\n            } else if (recentKeystrokes.includes(\"IDDQD\")) {\n                Input.consume();\n                console.log(\"god mode\");\n            }\n        }\n\n        draw() {\n            Screen.clear();\n\n            if (this.field) this.field.draw();\n\n            let stat = [\n                String(this.lives).padStart(2, ' '),\n                String(this.levelNumber + 1).padStart(2, ' '),\n                String(this.score).padStart(4, '0'),\n                this.field ? String(this.field.time).padStart(4, ' ') : ''\n            ];\n            Screen.write(0, 21, `Lads   ${stat[0]}   Level   ${stat[1]}    Score   ${stat[2]}    Bonus time   ${stat[3]}`);\n        }\n\n        restartLevel() {\n            this.field = undefined;\n        }\n\n        startNextLevel() {\n            this.field = undefined;\n            this.levelNumber++;\n            if (this.levelNumber % Levels.LEVEL_COUNT === 0) {\n                this.levelCycle++;\n            }\n        }\n\n        updateScore(scoreType) {\n            switch (scoreType) {\n                case SCORE_ROCK:\n                    this.score += 2;\n                    break;\n                case SCORE_STATUE:\n                    this.score += this.field.time;\n                    break;\n                case SCORE_TREASURE:\n                    // Called repeatedly during the end-of-level event.\n                    this.score += 1;\n                    break;\n            }\n        }\n    }\n\n    /**\n     * Game state.\n     */\n    class Game {\n        init() {\n            Sprite.loadSpritesheet(async () => {\n                await Viewport.init();\n                await Screen.init();\n                await Sprite.init();\n                await Text.init();\n                await Input.init();\n                await Audio.init();\n\n                window.addEventListener('blur', () => this.pause());\n                window.addEventListener('focus', () => this.unpause());\n\n                this.start();\n            });\n        }\n\n        start() {\n            this.frame = 0;\n            this.playSpeed = 0;\n            this.menu = new MainMenu();\n\n            window.requestAnimationFrame(() => this.onFrame());\n        }\n\n        onFrame() {\n            let fps = 60;\n            let now = new Date().getTime();\n            let lastFrame = this.lastFrame || 0;\n\n            // Note: we are using `requestAnimationFrame`, which will call our onFrame handler\n            // 60 times per second in most cases. However, it can be higher (the browser may\n            // respect the user's refresh settings, which could be 120Hz or higher for example).\n            //\n            // It's safest to have a check like we do here, where we explicitly limit the number\n            // of update calls to 60 times per second.\n            if (now - lastFrame >= 1000 / fps) {\n                this.update();\n                this.lastFrame = now;\n            }\n\n            Viewport.resize();\n            this.draw();\n\n            window.requestAnimationFrame(() => this.onFrame());\n        }\n\n        update() {\n            // Pull in frame by frame button pushes / keypresses / mouse clicks\n            Input.update();\n\n            /*game.camera.pos.x += 0.1;\n            game.camera.pos.y -= 0.1;*/\n\n            //if (Input.pressed[Input.Action.MENU]) {\n            //    this.paused ? this.unpause() : this.pause();\n            //}\n\n            if (this.paused) return;\n\n            // perform any per-frame audio updates\n            Audio.update();\n\n            // Behavior (AI, player input, etc.)\n            //perform(this.entities); <-- cut to save space\n\n            // perform any queued damage\n            //Damage.perform(this.entities);\n\n            // Movement (perform entity velocities to position)\n\n            // Dialog scheduling\n            //DialogScheduling.perform();\n\n            // Victory conditions\n\n            if (this.menu) {\n                this.menu.update();\n            }\n\n            /*    if (!this.session) {\n                this.session = new Session();\n            }*/\n\n            if (this.session) this.session.update();\n\n            // Culling (typically when an entity dies)\n\n            // Camera logic\n            /*let diff = {\n                x: this.player.pos.x - this.camera.pos.x,\n                y: this.player.pos.y - this.camera.pos.y\n            };*/\n\n            /*\n            this.camera.pos.x += diff.x * 0.2;\n            this.camera.pos.y += diff.y * 0.2;\n            */\n\n            // Tick screenshakes and cull finished screenshakes\n            this.screenshakes = this.screenshakes.filter(screenshake =>\n                screenshake.update()\n            );\n\n            // Flickering shadows\n            if (game.frame % 6 === 0) this.shadowOffset = (Math.random() * 10) | 0;\n\n            // Intro screenshake\n            if (game.frame === 30) game.screenshakes.push(new ScreenShake(20, 20, 20));\n        }\n\n        draw() {\n            // Reset canvas transform and scale\n            Viewport.ctx.setTransform(Viewport.scale, 0, 0, Viewport.scale, 0, 0);\n\n            Viewport.ctx.fillStyle = 'black';\n            Viewport.ctx.fillRect(0, 0, Viewport.width, Viewport.height);\n\n            Viewport.ctx.translate((Viewport.width - GAME_WIDTH) / 2 | 0, (Viewport.height - GAME_HEIGHT) / 2 | 0);\n\n            if (this.session) this.session.draw();\n            if (this.menu) this.menu.draw();\n\n            Screen.drawToViewport();\n\n            return;\n        }\n\n        pause() {\n            if (this.paused) return;\n            this.paused = true;\n            Audio.pause();\n        }\n\n        unpause() {\n            if (!this.paused) return;\n            this.paused = false;\n            Audio.unpause();\n        }\n\n        startSession() {\n            this.menu = undefined;\n            this.session = new Session();\n        }\n\n        showMainMenu() {\n            this.menu = new MainMenu();\n            this.session = undefined;\n        }\n\n        showInstructions() {\n            this.menu = new InstructionsMenu();\n            this.session = undefined;\n        }\n    }\n\n    const game = new Game();\n\n    /**\n     * Create and launch game.\n     */\n    game.init();\n\n}());\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwLmpzIiwic291cmNlcyI6WyIuLi9zcmMvanMvQ29uc3RhbnRzLmpzIiwiLi4vc3JjL2pzL1ZpZXdwb3J0LmpzIiwiLi4vc3JjL2pzL1V0aWwuanMiLCIuLi9zcmMvanMvU3ByaXRlU2hlZXQtZ2VuLmpzIiwiLi4vc3JjL2pzL1Nwcml0ZS5qcyIsIi4uL3NyYy9qcy9JbnB1dC5qcyIsIi4uL3NyYy9qcy9UZXh0LmpzIiwiLi4vc3JjL2pzL2xpYi96emZ4LmpzIiwiLi4vc3JjL2pzL2xpYi96emZ4bS5qcyIsIi4uL3NyYy9qcy9zb25ncy9PYmxpcXVlTXlzdGlxdWUuanMiLCIuLi9zcmMvanMvQXVkaW8uanMiLCIuLi9zcmMvanMvU2NyZWVuU2hha2UuanMiLCIuLi9zcmMvanMvU2NyZWVuLmpzIiwiLi4vc3JjL2pzL01haW5NZW51LmpzIiwiLi4vc3JjL2pzL0luc3RydWN0aW9uc01lbnUuanMiLCIuLi9zcmMvanMvQmVoYXZpb3IuanMiLCIuLi9zcmMvanMvRW50aXR5LmpzIiwiLi4vc3JjL2pzL1BsYXllci5qcyIsIi4uL3NyYy9qcy9Sb2NrLmpzIiwiLi4vc3JjL2pzL0xldmVsLmpzIiwiLi4vc3JjL2pzL0ZpZWxkLmpzIiwiLi4vc3JjL2pzL1Nlc3Npb24uanMiLCIuLi9zcmMvanMvR2FtZS5qcyIsIi4uL3NyYy9qcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvbnN0YW50c1xuICovXG5cbi8vIFNwcml0ZXNoZWV0IFVSSSAocHJvZHVjZWQgZHVyaW5nIGd1bHAgYnVpbGQpXG5leHBvcnQgY29uc3QgU1BSSVRFU0hFRVRfVVJJID0gJ3Nwcml0ZXMucG5nJztcblxuLy8gVGhlIHBsYXlhYmxlIGFyZWEuIE5vdGUgdGhhdCB0aGlzIGlzIHRoZSBkZXNpcmVkIGRpbWVuc2lvbnMsIGJ1dCB0aGUgYWN0dWFsIG9uLXNjcmVlbiBkaW1lbnNpb25zXG4vLyBtYXkgYmUgbGFyZ2VyIHRvIG1haW50YWluIGFzcGVjdCByYXRpbyAoc2VlIGBWaWV3cG9ydC53aWR0aGAgJiBgVmlld3BvcnQuaGVpZ2h0YCkuXG5leHBvcnQgY29uc3QgR0FNRV9XSURUSCA9IDY0MDtcbmV4cG9ydCBjb25zdCBHQU1FX0hFSUdIVCA9IDQwMDtcblxuLy8gVGhlIFwic2NyZWVuIGFyZWFcIi4gVGhpcyBpcyBhbiBBU0NJSSBnYW1lIGFuZCBzbyBtb3N0IG9mIHRoZSBnYW1lIGxvZ2ljIGRvZXNuJ3QgY2FyZSBhYm91dCBicm93c2VyXG4vLyBwaXhlbHMsIHdlIGNhcmUgYWJvdXQgdGhlIEFTQ0lJIGRpc3BsYXkgYXJlYSAoODB4MjUpLlxuZXhwb3J0IGNvbnN0IFNDUkVFTl9XSURUSCA9IDgwO1xuZXhwb3J0IGNvbnN0IFNDUkVFTl9IRUlHSFQgPSAyNTtcblxuLy8gVGhlIHNpemUgb2Ygb3VyIG9uLXNjcmVlbiBjaGFyYWN0ZXJzIChnaXZlbiBkaW1lbnNpb25zIGFib3ZlLCB0aGlzIGlzIDgwIGNvbHMgYnkgMjUgcm93cykuXG5leHBvcnQgY29uc3QgQ0hBUl9XSURUSCA9IDg7XG5leHBvcnQgY29uc3QgQ0hBUl9IRUlHSFQgPSAxNjtcbmV4cG9ydCBjb25zdCBDSEFSU0hFRVRfV0lEVEggPSAxNiAqIENIQVJfV0lEVEg7XG5leHBvcnQgY29uc3QgQ0hBUlNIRUVUX0hFSUdIVCA9IDMyICogQ0hBUl9IRUlHSFQ7XG5cbi8vIEZpeGVkIGxldmVsIHNpemVcbmV4cG9ydCBjb25zdCBMRVZFTF9ST1dTID0gMjA7XG5leHBvcnQgY29uc3QgTEVWRUxfQ09MUyA9IDc5O1xuXG4vLyBQbGF5IHNwZWVkcywgZXhwcmVzc2VkIGFzIGZyYW1lcyBwZXIgc2Vjb25kLlxuLy9cbi8vIEFjY29yZGluZyB0byB0aGUgb3JpZ2luYWwsIHRoZSBwbGF5IHNwZWVkcyBoYWQgbWlsbGlzZWNvbmQgZGVsYXlzIG9mOlxuLy8gICBbMTAwbXMsIDUwbXMsIDI1bXMsIDEzbXMsIDdtc10uXG4vL1xuLy8gVGhpcyB3b3VsZCBtZWFuIHRoZSBlZmZlY3RpdmUgRlBTIHdhczpcbi8vICAgWzEwLCAyMCwgNDAsIDc2LCAxNDJdLlxuLy9cbi8vIEkgdGhpbmsgdGhpcyBpcyB3YXkgdG9vIGhpZ2gsIGFuZCBtaWdodCBub3QgYmUgYWNjdXJhdGUgKGl0IGRvZXNuJ3QgY291bnRcbi8vIHRpbWUgc3BlbnQgZHJhd2luZyB0aGUgc2NyZWVuIGFuZCBydW5uaW5nIHRoZSBnYW1lJ3MgbG9naWMsIHdoaWNoIG1pZ2h0XG4vLyBiZSBhIHNpZ25pZmljYW50IG51bWJlciBvZiBtaWxsaXNlY29uZHMpLiBGcm9tIG1lbW9yeSwgZWFjaCBzcGVlZCB3YXMgYWJvdXRcbi8vIDUwJSBmYXN0ZXIgdGhhbiB0aGUgcHJldmlvdXMgb25lLCBzbyB0aGF0J3Mgd2hhdCBJJ3ZlIHNldCBoZXJlLlxuZXhwb3J0IGNvbnN0IFBMQVlfU1BFRURTID0gWzEwLCAxNSwgMjMsIDM1LCA1MF07XG5cbi8vIFNjb3JlIGV2ZW50cyAobm90ZSwgdGhlc2UgYXJlIGp1c3QgaWRlbnRpZmllcnMgZm9yIHRoZSB0eXBlcyBvZiBzY29yZSBpbmNyZWFzZXMsIG5vdFxuLy8gYWN0dWFsIHNjb3JlIHZhbHVlcykuXG5leHBvcnQgY29uc3QgU0NPUkVfUk9DSyA9IDBcbmV4cG9ydCBjb25zdCBTQ09SRV9TVEFUVUUgPSAxXG5leHBvcnQgY29uc3QgU0NPUkVfVFJFQVNVUkUgPSAyXG4iLCIndXNlIHN0cmljdCc7XG5cbmltcG9ydCB7IEdBTUVfV0lEVEgsIEdBTUVfSEVJR0hUIH0gZnJvbSAnLi9Db25zdGFudHMnO1xuXG4vKipcbiAqIFZpZXdwb3J0XG4gKlxuICogUmVwcmVzZW50cyB0aGUgZ2FtZSBkaXNwbGF5IChmb3IgdXMsIGEgY2FudmFzKS5cbiAqL1xuZXhwb3J0IGNvbnN0IFZpZXdwb3J0ID0ge1xuICAgIGluaXQoKSB7XG4gICAgICAgIFZpZXdwb3J0LmNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYW52YXMnKTtcbiAgICAgICAgVmlld3BvcnQuY3R4ID0gVmlld3BvcnQuY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gICAgICAgIFZpZXdwb3J0LnJlc2l6ZSh0cnVlKTtcbiAgICB9LFxuXG4gICAgLy8gUmVzaXplIHRoZSBjYW52YXMgdG8gZ2l2ZSB1cyBhcHByb3hpbWF0ZWx5IG91ciBkZXNpcmVkIGdhbWUgZGlzcGxheSBzaXplLlxuICAgIC8vXG4gICAgLy8gUmF0aGVyIHRoYW4gYXR0ZW1wdCB0byBleHBsYWluIGl0LCBoZXJlJ3MgYSBjb25jcmV0ZSBleGFtcGxlOlxuICAgIC8vXG4gICAgLy8gICAgIHdlIHN0YXJ0IHdpdGggYSBkZXNpcmVkIGdhbWUgZGltZW5zaW9uOiAgIDQ4MHgyNzBweFxuICAgIC8vICAgICAgICAgIGdldCB0aGUgYWN0dWFsIGJyb3dzZXIgZGltZW5zaW9uczogIDEzMDl4NDY4cHhcbiAgICAvLyAgICAgICAgICBmYWN0b3IgaW4gdGhlIGRpc3BsYXkncyBEUEkgcmF0aW86ICAyNjE4eDkzNnB4XG4gICAgLy8gICAgICAgICBub3cgY2FsY3VsYXRlIHRoZSBob3Jpem9udGFsIHNjYWxlOiAgICAgICA1LjQ1eFxuICAgIC8vICAgICAgICAgICAgICAgICAgICAgYW5kIHRoZSB2ZXJ0aWNhbCBzY2FsZTogICAgICAgMy40NnhcbiAgICAvLyAgICAgICAgICAgIG91ciBuZXcgb2ZmaWNhbCBnYW1lIHNjYWxpbmcgaXM6ICAgICAgICA1LjR4XG4gICAgLy8gICAgICAgYW5kIG91ciBvZmZpY2lhbCB2aWV3cG9ydCBkaW1lbnNpb25zOiAgIDQ4NHgxNzNweFxuICAgIC8vXG4gICAgLy8gVGhpcyBhcHByb2FjaCBlbXBoYXNpemVzIGNvcnJlY3QgYXNwZWN0IHJhdGlvIGFuZCBtYWludGFpbnMgZnVsbC13aW5kb3cgcmVuZGVyaW5nLCBhdFxuICAgIC8vIHRoZSBwb3RlbnRpYWwgY29zdCBvZiBsaW1pdGluZyB2aXNpYmlsaXR5IG9mIHRoZSBnYW1lIGl0c2VsZiBpbiBlaXRoZXIgdGhlIFggb3IgWSBheGlzLlxuICAgIC8vIElmIHlvdSB1c2UgdGhpcyBhcHByb2FjaCwgbWFrZSBzdXJlIHlvdXIgR1VJIGNhbiBcImZsb2F0XCIgKG90aGVyd2lzZSB0aGVyZSBtYXkgYmUgd2hvbGVcbiAgICAvLyBVSSBlbGVtZW50cyB0aGUgcGxheWVyIGNhbm5vdCBzZWUhKS5cbiAgICByZXNpemUoZm9yY2UpIHtcbiAgICAgICAgbGV0IGRwaSA9IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvLFxuICAgICAgICAgICAgd2lkdGggPSBWaWV3cG9ydC5jYW52YXMuY2xpZW50V2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQgPSBWaWV3cG9ydC5jYW52YXMuY2xpZW50SGVpZ2h0LFxuICAgICAgICAgICAgZHBpV2lkdGggPSB3aWR0aCAqIGRwaSxcbiAgICAgICAgICAgIGRwaUhlaWdodCA9IGhlaWdodCAqIGRwaTtcblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICBmb3JjZSB8fFxuICAgICAgICAgICAgVmlld3BvcnQuY2FudmFzLndpZHRoICE9PSBkcGlXaWR0aCB8fFxuICAgICAgICAgICAgVmlld3BvcnQuY2FudmFzLmhlaWdodCAhPT0gZHBpSGVpZ2h0XG4gICAgICAgICkge1xuICAgICAgICAgICAgVmlld3BvcnQuY2FudmFzLndpZHRoID0gZHBpV2lkdGg7XG4gICAgICAgICAgICBWaWV3cG9ydC5jYW52YXMuaGVpZ2h0ID0gZHBpSGVpZ2h0O1xuXG4gICAgICAgICAgICBWaWV3cG9ydC5zY2FsZSA9ICgoTWF0aC5taW4oZHBpV2lkdGggLyBHQU1FX1dJRFRILCBkcGlIZWlnaHQgLyBHQU1FX0hFSUdIVCkgKiAxMCkgfCAwKSAvIDEwO1xuICAgICAgICAgICAgVmlld3BvcnQud2lkdGggPSBNYXRoLmNlaWwoZHBpV2lkdGggLyBWaWV3cG9ydC5zY2FsZSk7XG4gICAgICAgICAgICBWaWV3cG9ydC5oZWlnaHQgPSBNYXRoLmNlaWwoZHBpSGVpZ2h0IC8gVmlld3BvcnQuc2NhbGUpO1xuICAgICAgICAgICAgVmlld3BvcnQuY2VudGVyID0ge1xuICAgICAgICAgICAgICAgIHU6IChWaWV3cG9ydC53aWR0aCAvIDIpIHwgMCxcbiAgICAgICAgICAgICAgICB2OiAoVmlld3BvcnQuaGVpZ2h0IC8gMikgfCAwXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgVmlld3BvcnQuY2xpZW50V2lkdGggPSB3aWR0aDtcbiAgICAgICAgICAgIFZpZXdwb3J0LmNsaWVudEhlaWdodCA9IGhlaWdodDtcblxuICAgICAgICAgICAgLy8gTm90ZTogc21vb3RoaW5nIGZsYWcgZ2V0cyByZXNldCBvbiBldmVyeSByZXNpemUgYnkgc29tZSBicm93c2Vycywgd2hpY2ggaXMgd2h5XG4gICAgICAgICAgICAvLyB3ZSBkbyBpdCBoZXJlLlxuICAgICAgICAgICAgVmlld3BvcnQuY3R4LmltYWdlU21vb3RoaW5nRW5hYmxlZCA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gV2UgZG8gdGhpcyBldmVyeSBmcmFtZSwgbm90IGp1c3Qgb24gcmVzaXplLCBkdWUgdG8gYnJvd3NlciBzb21ldGltZXMgXCJmb3JnZXR0aW5nXCIuXG4gICAgICAgIC8vVmlld3BvcnQuY2FudmFzLnN0eWxlLmN1cnNvciA9ICdub25lJztcbiAgICB9LFxuXG4gICAgZmlsbFZpZXdwb3J0UmVjdCgpIHtcbiAgICAgICAgVmlld3BvcnQuY3R4LmZpbGxSZWN0KDAsIDAsIFZpZXdwb3J0LndpZHRoLCBWaWV3cG9ydC5oZWlnaHQpO1xuICAgIH1cbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbmltcG9ydCB7IGdhbWUgfSBmcm9tICcuL0dhbWUnO1xuaW1wb3J0IHsgVmlld3BvcnQgfSBmcm9tICcuL1ZpZXdwb3J0JztcblxuZXhwb3J0IGZ1bmN0aW9uIHFyMnh5KHBvcykge1xuICAgIHJldHVybiB7XG4gICAgICAgIHg6IHBvcy5xICogMTMsXG4gICAgICAgIHk6IHBvcy5xICogNiArIHBvcy5yICogMTJcbiAgICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24geHkycXIocG9zKSB7XG4gICAgbGV0IHFyRnJhY3Rpb24gPSB7XG4gICAgICAgIHE6IChwb3MueCAvIDEzKSxcbiAgICAgICAgcjogKChwb3MueSAtIHBvcy54ICogNiAvIDEzKSAvIDEyKVxuICAgIH07XG4gICAgcmV0dXJuIHFyUm91bmRlZChxckZyYWN0aW9uKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHh5MnV2KHBvcykge1xuICAgIHJldHVybiB7XG4gICAgICAgIHU6IHBvcy54ICsgVmlld3BvcnQuY2VudGVyLnUgLSBnYW1lLmNhbWVyYS5wb3MueCxcbiAgICAgICAgdjogcG9zLnkgKyBWaWV3cG9ydC5jZW50ZXIudiAtIGdhbWUuY2FtZXJhLnBvcy55XG4gICAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHV2Mnh5KHBvcykge1xuICAgIHJldHVybiB7XG4gICAgICAgIHg6IHBvcy51IC0gVmlld3BvcnQuY2VudGVyLnUgKyBnYW1lLmNhbWVyYS5wb3MueCxcbiAgICAgICAgeTogcG9zLnYgLSBWaWV3cG9ydC5jZW50ZXIudiArIGdhbWUuY2FtZXJhLnBvcy55XG4gICAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHFyMnFycyhwb3MpIHtcbiAgICByZXR1cm4geyBxOiBwb3MucSwgcjogcG9zLnIsIHM6IC1wb3MucS1wb3MuciB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcXJzMnFyKHBvcykge1xuICAgIHJldHVybiB7IHE6IHBvcy5xLCByOiBwb3MuciB9O1xufVxuXG4vLyBXaGVuIHlvdSBcInJvdW5kXCIgYSBmcmFjdGlvbmFsIGhleGFnb25hbCB2YWx1ZSB0byBhbiBpbnRlZ2VyIG9uZSAodXN1YWxseSB0byBjb252ZXJ0XG4vLyBhIG1vdXNlIGNsaWNrIHRvIGEgaGV4IGdyaWQpLCB5b3UgY2FuJ3QganVzdCBgTWF0aC5mbG9vcigpYCBsaWtlIHlvdSBjYW4gd2l0aCBzdGFuZGFyZFxuLy8gc3F1YXJlIHRpbGVzIC0geW91J2xsIG5ldmVyIGdldCB0aGUgYmVoYXZpb3IgcmlnaHQgb24gdGhlIGFuZ2xlZCBzaWRlcyBvZiB0aGUgaGV4YWdvbnMuXG4vL1xuLy8gVG8gZ2V0IHRoZSBiZWhhdmlvciB5b3Ugd2FudCwgeW91IG5lZWQgdG8gY29udmVydCB0byBjdWJlZCBjb29yZGluYXRlcyAocSxyLHMpLCB0aGVuXG4vLyBpbmRpdmlkdWFsbHkgcm91bmQgZWFjaCBvbmUgYW5kIGVsaW1pbmF0ZSB0aGUgb25lIGZ1cnRoZXN0IGF3YXkgZnJvbSB5b3VyIG9yaWdpbmFsIHZhbHVlLlxuZXhwb3J0IGZ1bmN0aW9uIHFyUm91bmRlZChwb3MpIHtcbiAgICBsZXQgcXJzQSA9IHFyMnFycyhwb3MpLFxuICAgICAgICBxcnNCID0ge1xuICAgICAgICAgICAgcTogTWF0aC5yb3VuZChxcnNBLnEpLFxuICAgICAgICAgICAgcjogTWF0aC5yb3VuZChxcnNBLnIpLFxuICAgICAgICAgICAgczogTWF0aC5yb3VuZChxcnNBLnMpXG4gICAgICAgIH0sXG4gICAgICAgIGRpZmZRID0gTWF0aC5hYnMocXJzQS5xIC0gcXJzQi5xKSxcbiAgICAgICAgZGlmZlIgPSBNYXRoLmFicyhxcnNBLnIgLSBxcnNCLnIpLFxuICAgICAgICBkaWZmUyA9IE1hdGguYWJzKHFyc0EucyAtIHFyc0Iucyk7XG5cbiAgICBpZiAoZGlmZlEgPiBkaWZmUiAmJiBkaWZmUSA+IGRpZmZTKSB7XG4gICAgICAgIHFyc0IucSA9IC1xcnNCLnItcXJzQi5zO1xuICAgIH0gZWxzZSBpZiAoZGlmZlIgPiBkaWZmUykge1xuICAgICAgICBxcnNCLnIgPSAtcXJzQi5xLXFyc0IucztcbiAgICB9IGVsc2Uge1xuICAgICAgICBxcnNCLnMgPSAtcXJzQi5xLXFyc0IucjtcbiAgICB9XG5cbiAgICByZXR1cm4gcXJzMnFyKHFyc0IpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY2xhbXAodmFsdWUsIG1pbiwgbWF4KSB7XG4gICAgcmV0dXJuIHZhbHVlIDwgbWluID8gbWluIDogdmFsdWUgPiBtYXggPyBtYXggOiB2YWx1ZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZsb29kKG1hemUsIHBvcywgbWF4RGlzdGFuY2UgPSBJbmZpbml0eSkge1xuICAgIGxldCByZXN1bHQgPSBhcnJheTJkKG1hemVbMF0ubGVuZ3RoLCBtYXplLmxlbmd0aCwgKCkgPT4gSW5maW5pdHkpO1xuICAgIGxldCBzdGFjayA9IFt7IC4uLnBvcywgY29zdDogMCB9XTtcbiAgICB3aGlsZSAoc3RhY2subGVuZ3RoID4gMCkge1xuICAgICAgICBsZXQgeyBxLCByLCBjb3N0IH0gPSBzdGFjay5zaGlmdCgpO1xuICAgICAgICBpZiAocmVzdWx0W3JdW3FdIDw9IGNvc3QpIGNvbnRpbnVlO1xuICAgICAgICByZXN1bHRbcl1bcV0gPSBjb3N0Kys7XG4gICAgICAgIGlmIChyZXN1bHRbcl1bcV0gPj0gbWF4RGlzdGFuY2UpIGNvbnRpbnVlO1xuICAgICAgICBpZiAobWF6ZVtyXVtxICsgMV0gJiYgcmVzdWx0W3JdW3EgKyAxXSA+IGNvc3QpXG4gICAgICAgICAgICBzdGFjay5wdXNoKHsgcTogcSArIDEsIHIsIGNvc3QgfSk7XG4gICAgICAgIGlmIChtYXplW3JdW3EgLSAxXSAmJiByZXN1bHRbcl1bcSAtIDFdID4gY29zdClcbiAgICAgICAgICAgIHN0YWNrLnB1c2goeyBxOiBxIC0gMSwgciwgY29zdCB9KTtcbiAgICAgICAgaWYgKG1hemVbciArIDFdW3FdICYmIHJlc3VsdFtyICsgMV1bcV0gPiBjb3N0KVxuICAgICAgICAgICAgc3RhY2sucHVzaCh7IHEsIHI6IHIgKyAxLCBjb3N0IH0pO1xuICAgICAgICBpZiAobWF6ZVtyIC0gMV1bcV0gJiYgcmVzdWx0W3IgLSAxXVtxXSA+IGNvc3QpXG4gICAgICAgICAgICBzdGFjay5wdXNoKHsgcSwgcjogciAtIDEsIGNvc3QgfSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhcnJheTJkKHdpZHRoLCBoZWlnaHQsIGZuKSB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20oeyBsZW5ndGg6IGhlaWdodCB9LCAoKSA9PlxuICAgICAgICBBcnJheS5mcm9tKHsgbGVuZ3RoOiB3aWR0aCB9LCBmbilcbiAgICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdGlsZUlzUGFzc2FibGUocSwgcikge1xuICAgIGlmIChnYW1lLmJyYXdsKSB7XG4gICAgICAgIGxldCByb29tID0gZ2FtZS5icmF3bC5yb29tO1xuICAgICAgICBpZiAoXG4gICAgICAgICAgICBxIDwgcm9vbS5xIHx8XG4gICAgICAgICAgICByIDwgcm9vbS5yIHx8XG4gICAgICAgICAgICBxID49IHJvb20ucSArIHJvb20udyB8fFxuICAgICAgICAgICAgciA+PSByb29tLnIgKyByb29tLmhcbiAgICAgICAgKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAocSA8IDAgfHwgciA8IDAgfHwgcSA+PSBnYW1lLm1hemUudyB8fCByID49IGdhbWUubWF6ZS5oKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuICEhZ2FtZS5tYXplLm1hemVbcl1bcV07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZ2JhKHIsIGcsIGIsIGEpIHtcbiAgICByZXR1cm4gYHJnYmEoJHtyfSwke2d9LCR7Yn0sJHthfSlgO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQ2FudmFzKHdpZHRoLCBoZWlnaHQpIHtcbiAgICBsZXQgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgY2FudmFzLndpZHRoID0gd2lkdGg7XG4gICAgY2FudmFzLmhlaWdodCA9IGhlaWdodDtcbiAgICBsZXQgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gICAgcmV0dXJuIHsgY2FudmFzLCBjdHggfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJvb21DZW50ZXIocm9vbSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHg6IChyb29tLnEgKyByb29tLncgLyAyKSAqIFRJTEVfU0laRSxcbiAgICAgICAgeTogKHJvb20uciArIHJvb20uaCAvIDIpICogVElMRV9TSVpFXG4gICAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnRpYWxUZXh0KHRleHQsIHQsIGQpIHtcbiAgICBsZXQgbGVuZ3RoID0gY2xhbXAoTWF0aC5jZWlsKHQgLyBkICogdGV4dC5sZW5ndGgpLCAwLCB0ZXh0Lmxlbmd0aCksXG4gICAgICAgIHN1YnN0ciA9IHRleHQuc2xpY2UoMCwgbGVuZ3RoKSxcbiAgICAgICAgaWR4ID0gdGV4dC5pbmRleE9mKCcgJywgbGVuZ3RoIC0gMSk7XG4gICAgaWYgKGlkeCA8IDApIGlkeCA9IHRleHQubGVuZ3RoO1xuICAgIGlmIChpZHggLSBsZW5ndGggPiAwKSBzdWJzdHIgKz0gJyMnLnJlcGVhdChpZHggLSBsZW5ndGgpO1xuXG4gICAgcmV0dXJuIHN1YnN0cjtcbn1cbiIsIid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBUaGlzIG1vZHVsZSBpcyBnZW5lcmF0ZWQgYnkgYGd1bHAgYnVpbGRBc3NldHNgLlxuICovXG5leHBvcnQgY29uc3QgU3ByaXRlU2hlZXQgPVxuICAgIC8qIDxnZW5lcmF0ZWQ+ICovXG57IGZvbnQ6IFsgWyAxMjgsIDAsIDEyOCwgNDQ4IF0gXSxcbiAgZm9udDI6IFsgWyAwLCAwLCAxMjgsIDUxMiBdIF0sXG4gIGhhcm9sZDogWyBbIDEyOCwgNDQ4LCAxOSwgMTIgXSBdLFxuICB1cmk6ICdzcHJpdGVzLnBuZycgfVxuLyogPC9nZW5lcmF0ZWQ+ICovXG4iLCIndXNlIHN0cmljdCc7XG5cbmltcG9ydCB7IGdhbWUgfSBmcm9tICcuL0dhbWUnO1xuaW1wb3J0IHsgcmdiYSwgY3JlYXRlQ2FudmFzIH0gZnJvbSAnLi9VdGlsJztcbmltcG9ydCB7IFNwcml0ZVNoZWV0IH0gZnJvbSAnLi9TcHJpdGVTaGVldC1nZW4nO1xuaW1wb3J0IHsgVmlld3BvcnQgfSBmcm9tICcuL1ZpZXdwb3J0JztcblxuLyoqXG4gKiBTcHJpdGVcbiAqXG4gKiBFbmNhcHN1bGF0ZXMgbG9hZGluZyBzcHJpdGUgc2xpY2VzIGZyb20gdGhlIHNwcml0ZXNoZWV0LCBvcmdhbml6aW5nIHRoZW0sIGFuZFxuICogbW9kaWZ5aW5nIHRoZW0gb3IgY29uc3RydWN0aW5nIHVzaW5nIHByaW1pdGl2ZXMuIFRvIHNhdmUgc3BhY2UsIHdlIHVzZSBzb21lIHRlY2huaXF1ZXNcbiAqIGxpa2Ugc3RvcmluZyBvbmx5IGEgc21hbGwgc2xpY2Ugb2YgYW4gaW1hZ2UgaW4gdGhlIHNwcml0ZXNoZWV0LCB0aGVuIHVzaW5nIGNvZGVcbiAqIHRvIGR1cGxpY2F0ZSBpdCwgYWRkIHNvbWUgcmFuZG9tbmVzcywgZXRjLlxuICovXG5leHBvcnQgY29uc3QgU3ByaXRlID0ge1xuICAgIC8vIFRoaXMgaXMgYW4gZXhjZXB0aW9uIHRvIHRoZSBydWxlLCBsb2FkaW5nIHRoZSBzcHJpdGVzaGVldCBpcyBhIHNwZWNpYWwgYWN0aW9uIHRoYXRcbiAgICAvLyBoYXBwZW5zIEJFRk9SRSBldmVyeXRoaW5nIGlzIGluaXRpYWxpemVkLlxuICAgIGxvYWRTcHJpdGVzaGVldChjYikge1xuICAgICAgICBsZXQgaW1hZ2UgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgaW1hZ2Uub25sb2FkID0gY2I7XG4gICAgICAgIGltYWdlLnNyYyA9IFNwcml0ZVNoZWV0LnVyaTtcbiAgICAgICAgU3ByaXRlLnNoZWV0ID0gaW1hZ2U7XG4gICAgfSxcblxuICAgIGluaXQoKSB7XG4gICAgICAgIC8vIEJhc2UgcGl4ZWwgZm9udCBhbmQgaWNvbnMgKHNlZSBgVGV4dC5pbml0YCBmb3IgYWRkaXRpb25hbCB2YXJpYXRpb25zKVxuICAgICAgICBTcHJpdGUuZm9udCA9IGluaXRCYXNpY1Nwcml0ZShTcHJpdGVTaGVldC5mb250MlswXSk7XG5cbiAgICAgICAgcmV0dXJuO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBBIHNtYWxsIGhlbHBlciB0aGF0IGRyYXdzIGEgc3ByaXRlIG9udG8gYSBjYW52YXMsIHJlc3BlY3RpbmcgdGhlIGFuY2hvciBwb2ludCBvZlxuICAgICAqIHRoZSBzcHJpdGUuIE5vdGUgdGhhdCB0aGUgY2FudmFzIHNob3VsZCBiZSBQUkUtVFJBTlNMQVRFRCBhbmQgUFJFLVJPVEFURUQsIGlmXG4gICAgICogdGhhdCdzIGFwcHJvcHJpYXRlIVxuICAgICAqL1xuICAgIGRyYXdTcHJpdGUoY3R4LCBzcHJpdGUsIHUsIHYpIHtcbiAgICAgICAgY3R4LmRyYXdJbWFnZShzcHJpdGUuaW1nLCB1IC0gc3ByaXRlLmFuY2hvci54LCB2IC0gc3ByaXRlLmFuY2hvci55KTtcbiAgICB9LFxuXG4gICAgZHJhd1ZpZXdwb3J0U3ByaXRlKHNwcml0ZSwgcG9zLCByb3RhdGlvbikge1xuICAgICAgICBsZXQgeyB1LCB2IH0gPSB0aGlzLnZpZXdwb3J0U3ByaXRlMnV2KFxuICAgICAgICAgICAgc3ByaXRlLFxuICAgICAgICAgICAgcG9zXG4gICAgICAgICk7XG4gICAgICAgIGlmIChyb3RhdGlvbikge1xuICAgICAgICAgICAgVmlld3BvcnQuY3R4LnNhdmUoKTtcbiAgICAgICAgICAgIFZpZXdwb3J0LmN0eC50cmFuc2xhdGUodSArIHNwcml0ZS5hbmNob3IueCwgdiArIHNwcml0ZS5hbmNob3IueSk7XG4gICAgICAgICAgICBWaWV3cG9ydC5jdHgucm90YXRlKHJvdGF0aW9uKTtcbiAgICAgICAgICAgIFZpZXdwb3J0LmN0eC5kcmF3SW1hZ2UoXG4gICAgICAgICAgICAgICAgc3ByaXRlLmltZyxcbiAgICAgICAgICAgICAgICAtc3ByaXRlLmFuY2hvci54LFxuICAgICAgICAgICAgICAgIC1zcHJpdGUuYW5jaG9yLnlcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBWaWV3cG9ydC5jdHgucmVzdG9yZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgVmlld3BvcnQuY3R4LmRyYXdJbWFnZShzcHJpdGUuaW1nLCB1LCB2KTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICB2aWV3cG9ydFNwcml0ZTJ1dihzcHJpdGUsIHBvcykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdTogcG9zLnggLSBzcHJpdGUuYW5jaG9yLnggLSBnYW1lLmNhbWVyYS5wb3MueCArIFZpZXdwb3J0LmNlbnRlci51LFxuICAgICAgICAgICAgdjogcG9zLnkgLSBzcHJpdGUuYW5jaG9yLnkgLSBnYW1lLmNhbWVyYS5wb3MueSArIFZpZXdwb3J0LmNlbnRlci52XG4gICAgICAgIH07XG4gICAgfVxufTtcblxuLy8gU3ByaXRlIHV0aWxpdHkgZnVuY3Rpb25zXG5cbmZ1bmN0aW9uIGluaXRCYXNpY1Nwcml0ZShkYXRhLCBhbmNob3IpIHtcbiAgICByZXR1cm4gaW5pdER5bmFtaWNTcHJpdGUobG9hZENhY2hlU2xpY2UoLi4uZGF0YSksIGFuY2hvcik7XG59XG5cbmZ1bmN0aW9uIGluaXREeW5hbWljU3ByaXRlKHNvdXJjZSwgYW5jaG9yKSB7XG4gICAgbGV0IHcgPSBzb3VyY2Uud2lkdGgsXG4gICAgICAgIGggPSBzb3VyY2UuaGVpZ2h0O1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgaW1nOiBzb3VyY2UsXG4gICAgICAgIC8vIEhhY2shIFVzaW5nIGEgZmxhdCBgLm1hcChpbml0QmFzaWNTcHJpdGUpYCBpcyBhY3R1YWxseSBnb2luZyB0byBwYXNzIHRoZVxuICAgICAgICAvLyBlbGVtZW50IElOREVYIGFzIHNlY29uZCBhcmd1bWVudCwgcmVzdWx0aW5nIGluIFwiYW5jaG9yPTFcIi4gVGhlIHJpZ2h0IHNvbHV0aW9uXG4gICAgICAgIC8vIGhlcmUgaXMgXCJ0eXBlb2YgYW5jaG9yID09PSAnb2JqZWN0JyA/XCIsIGJ1dCB0byBzYXZlIGJ5dGVzIEkgYXZvaWQgdXNpbmdcbiAgICAgICAgLy8gdGhlIHR5cGVvZiBhbmQgaW5zdGFuY2VvZiBrZXl3b3JkcyBhbnl3aGVyZSBpbiB0aGUgY29kZWJhc2UuIEhlbmNlLFxuICAgICAgICAvLyBcImFuY2hvciAmJiBhbmNob3IueFwiLlxuICAgICAgICBhbmNob3I6IChhbmNob3IgJiYgYW5jaG9yLngpID8gYW5jaG9yIDogeyB4OiAodyAvIDIpIHwgMCwgeTogKGggLyAyKSB8IDAgfVxuICAgIH07XG59XG5cbmZ1bmN0aW9uIGxvYWRDYWNoZVNsaWNlKHgsIHksIHcsIGgpIHtcbiAgICBjb25zdCBzb3VyY2UgPSBTcHJpdGUuc2hlZXQ7XG4gICAgY29uc3Qgc2xpY2VDYW52YXMgPSBjcmVhdGVDYW52YXModywgaCk7XG4gICAgc2xpY2VDYW52YXMuY3R4LmRyYXdJbWFnZShzb3VyY2UsIHgsIHksIHcsIGgsIDAsIDAsIHcsIGgpO1xuICAgIHJldHVybiBzbGljZUNhbnZhcy5jYW52YXM7XG59XG4iLCJcbi8vIEEgbGlzdCBvZiBpbi1nYW1lIGFjdGlvbnMgdGhhdCBjYW4gYmUgcGVyZm9ybWVkIGJ5IHRoZSBwbGF5ZXJcbmNvbnN0IEFjdGlvbiA9IHtcbiAgICBVUDogICAgMTEsXG4gICAgRE9XTjogIDEyLFxuICAgIExFRlQ6ICAxMyxcbiAgICBSSUdIVDogMTQsXG4gICAgSlVNUDogIDE1LFxuICAgIFNUT1A6ICAxNixcbiAgICBQQVVTRTogMTdcbn07XG5cbi8vIEEgbGlzdCBvZiBrZXkgY29kZSBtYXBwaW5ncyBhbmQgd2hhdCBhY3Rpb24gdGhleSBwZXJmb3JtLiBIZXJlIHdlIGhhcmQtY29kZSBpdCwgYnV0XG4vLyB5b3UgY291bGQgZWFzaWx5IGFsc28gaGF2ZSB0aGUga2V5IG1hcHBpbmdzIGNvbnRyb2xsZWQgYnkgc2V0dGluZ3MgYW5kIGxldCB0aGUgdXNlclxuLy8gY29uZmlndXJlIGl0LlxuY29uc3QgS2V5TWFwcGluZyA9IHtcbiAgICBLZXlXOiAgICAgICBBY3Rpb24uVVAsXG4gICAgS2V5UzogICAgICAgQWN0aW9uLkRPV04sXG4gICAgS2V5QTogICAgICAgQWN0aW9uLkxFRlQsXG4gICAgS2V5RDogICAgICAgQWN0aW9uLlJJR0hULFxuICAgIEFycm93VXA6ICAgIEFjdGlvbi5VUCxcbiAgICBBcnJvd0Rvd246ICBBY3Rpb24uRE9XTixcbiAgICBBcnJvd0xlZnQ6ICBBY3Rpb24uTEVGVCxcbiAgICBBcnJvd1JpZ2h0OiBBY3Rpb24uUklHSFQsXG4gICAgU3BhY2U6ICAgICAgQWN0aW9uLkpVTVBcbn07XG5cbmV4cG9ydCBjb25zdCBJbnB1dCA9IHtcbiAgICBBY3Rpb24sXG4gICAgS2V5TWFwcGluZyxcblxuICAgIGluaXQoKSB7XG4gICAgICAgIC8vIElucHV0IGJ1ZmZlciAtIG5ldyBrZXlwcmVzcyBldmVudHMgZ28gaW50byB0aGlzIGJ1ZmZlciB0byBiZSBoYW5kbGVkXG4gICAgICAgIC8vIGR1cmluZyB0aGUgZ2FtZSdzIHVwZGF0ZSBsb29wLiBJdCdzIHVwIHRvIHRoZSBgdXBkYXRlKClgIG1ldGhvZHMgdG8gY29uc3VtZVxuICAgICAgICAvLyBrZXkgcHJlc3NlcyBhbmQgcmVtb3ZlIHRoZW0gZnJvbSB0aGUgYnVmZmVyLlxuICAgICAgICB0aGlzLmJ1ZmZlciA9IFtdO1xuXG4gICAgICAgIC8vIElucHV0IGhpc3RvcnkgLSBoaXN0b3J5IGNvbnRhaW5zIHJlY2VudCBrZXkgcHJlc3MgZXZlbnRzIGluIG9yZGVyLFxuICAgICAgICAvLyByZW1vdmVkIGF1dG9tYXRpY2FsbHkgYWZ0ZXIgYSBmZXcgc2Vjb25kcy4gVGhpcyBpcyB1c2VmdWwgZm9yIGRldGVjdGluZ1xuICAgICAgICAvLyBpbnB1dHMgbGlrZSBjaGVhdCBjb2RlcywgZm9yIGV4YW1wbGUuXG4gICAgICAgIHRoaXMuaGlzdG9yeSA9IFtdO1xuXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZXZlbnQgPT4ge1xuICAgICAgICAgICAgbGV0IGVudHJ5ID0ge1xuICAgICAgICAgICAgICAgIGF0OiBuZXcgRGF0ZSgpLmdldFRpbWUoKSxcbiAgICAgICAgICAgICAgICBrZXk6IGV2ZW50LmtleSxcbiAgICAgICAgICAgICAgICBjb2RlOiBldmVudC5jb2RlLFxuICAgICAgICAgICAgICAgIGFjdGlvbjogSW5wdXQuS2V5TWFwcGluZ1tldmVudC5jb2RlXSB8fCBJbnB1dC5BY3Rpb24uU1RPUFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIElucHV0LmJ1ZmZlci5wdXNoKGVudHJ5KTtcbiAgICAgICAgICAgIElucHV0Lmhpc3RvcnkucHVzaChlbnRyeSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlbnRyeSk7XG4gICAgICAgIH0pO1xuICAgIH0sXG5cbiAgICB1cGRhdGUoKSB7XG4gICAgICAgIGxldCBub3cgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgICAgdGhpcy5oaXN0b3J5ID0gdGhpcy5oaXN0b3J5LmZpbHRlcihlbnRyeSA9PiBlbnRyeS5hdCA+IG5vdyAtIDMwMDApO1xuICAgIH0sXG5cbiAgICBsYXN0S2V5UHJlc3NlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYnVmZmVyLmxlbmd0aCA+IDAgPyB0aGlzLmJ1ZmZlclt0aGlzLmJ1ZmZlci5sZW5ndGggLSAxXS5rZXkgOiAnJztcbiAgICB9LFxuXG4gICAgbGFzdENvZGVQcmVzc2VkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5idWZmZXIubGVuZ3RoID4gMCA/IHRoaXMuYnVmZmVyW3RoaXMuYnVmZmVyLmxlbmd0aCAtIDFdLmNvZGUgOiAnJztcbiAgICB9LFxuXG4gICAgbGFzdEFjdGlvblByZXNzZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlci5sZW5ndGggPiAwID8gdGhpcy5idWZmZXJbdGhpcy5idWZmZXIubGVuZ3RoIC0gMV0uYWN0aW9uIDogdW5kZWZpbmVkO1xuICAgIH0sXG5cbiAgICBjb25zdW1lKCkge1xuICAgICAgICB0aGlzLmJ1ZmZlciA9IFtdO1xuICAgIH0sXG59XG4iLCIndXNlIHN0cmljdCc7XG5cbmltcG9ydCB7IFNwcml0ZSB9IGZyb20gJy4vU3ByaXRlJztcbmltcG9ydCB7IHJnYmEsIGNyZWF0ZUNhbnZhcyB9IGZyb20gJy4vVXRpbCc7XG5pbXBvcnQgeyBDSEFSX1dJRFRILCBDSEFSX0hFSUdIVCwgQ0hBUlNIRUVUX1dJRFRIIH0gZnJvbSAnLi9Db25zdGFudHMnO1xuaW1wb3J0IHsgVmlld3BvcnQgfSBmcm9tICcuL1ZpZXdwb3J0JztcblxuXG4vLyBJbiBvdXIgY2hhcmFjdGVyIHNoZWV0LCBjaGFycyAweDAwLTB4N0YgYXJlIHN0YW5kYXJkIEFTQ0lJLCBiZWxvdyB0aGF0IHdlIHB1dCB3aGF0ZXZlclxuLy8gY2hhcmFjdGVycyBhcmUgY29udmVuaWVudCBmb3IgdXMuIEhlcmUgd2UgY2FuIGNob29zZSB0byBtYXAgdW5pY29kZSBjaGFyYWN0ZXJzIHRvIHBvc2l0aW9uc1xuLy8gMHg4MCsgaW4gdGhlIGNoYXJzaGVldCwgbWFraW5nIGl0IGVhc3kgZm9yIHVzIHRvIHJlbmRlciB0aGluZ3MgbGlrZSBzcGVjaWFsIGNoYXJhY3RlcnMsXG4vLyBib3ggZHJhd2luZyBjaGFyYWN0ZXJzLCBldGMuXG5jb25zdCBTVVBQT1JURURfVU5JQ09ERV9DSEFSUyA9IFtcbiAgICAn4pSA4pSC4pSM4pSQ4pSU4pSY4pSc4pSk4pSs4pS04pS84pWz4pWz4pWz4pWz4pWzJyxcbiAgICAn4pWQ4pWR4pWU4pWX4pWa4pWd4pWg4pWj4pWm4pWp4pWs4pWz4pWz4pWz4pWz4pWzJyxcbiAgICAn4oaR4oaT4oaQ4oaS4pWz4pWz4pWz4pWz4pWz4pWz4pWz4pWz4pWz4pWz4pWz4pWzJ1xuXS5qb2luKCcnKTtcblxuY29uc3QgVU5JQ09ERV9DSEFSX01BUCA9IFNVUFBPUlRFRF9VTklDT0RFX0NIQVJTLnNwbGl0KCcnKS5yZWR1Y2UoKG1hcCwgY2hhciwgaWR4KSA9PiB7XG4gICAgbWFwW2NoYXJdID0gMHg4MCArIGlkeDtcbiAgICByZXR1cm4gbWFwO1xufSwge30pO1xuXG4vKipcbiAqIFRleHRcbiAqXG4gKiBVdGlsaXRpZXMgZm9yIGRyYXdpbmcgdGV4dCB1c2luZyBpbi1nYW1lIHBpeGVsIGZvbnQuXG4gKi9cbmV4cG9ydCBjb25zdCBUZXh0ID0ge1xuICAgIGluaXQoKSB7XG4gICAgICAgIFRleHQud2hpdGUgPSBTcHJpdGUuZm9udC5pbWc7XG5cbiAgICAgICAgVGV4dC5ibGFjayA9IHJlY29sb3IoVGV4dC53aGl0ZSwgcmdiYSgwLCAwLCAwLCAxKSk7XG4gICAgICAgIFRleHQuYmxhY2tfc2hhZG93ID0gcmVjb2xvcihUZXh0LndoaXRlLCByZ2JhKDkwLCAyMCwgOTAsIDAuMTUpKTtcbiAgICAgICAgVGV4dC5ibHVlID0gcmVjb2xvcihUZXh0LndoaXRlLCByZ2JhKDIwMCwgNDAsIDIyMCwgMSkpO1xuICAgICAgICBUZXh0LmJsdWVfc2hhZG93ID0gcmVjb2xvcihUZXh0LndoaXRlLCByZ2JhKDI0MCwgNTAsIDIwMCwgMC4yKSk7XG4gICAgICAgIFRleHQuc2hhZG93ID0gcmVjb2xvcihUZXh0LndoaXRlLCByZ2JhKDI0MCwgMjQwLCAyNTUsIDAuMjUpKTtcbiAgICAgICAgVGV4dC5yZWQgPSByZWNvbG9yKFRleHQud2hpdGUsIHJnYmEoMjQwLCA1MCwgNTAsIDEpKTtcblxuICAgICAgICBUZXh0LnRlcm1pbmFsID0gcmVjb2xvcihUZXh0LndoaXRlLCByZ2JhKDUxLCAyNTUsIDAsIDEpKTtcbiAgICAgICAgVGV4dC50ZXJtaW5hbF9zaGFkb3cgPSByZWNvbG9yKFRleHQud2hpdGUsIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4zKSk7XG5cbiAgICAgICAgVGV4dC50ZXJtaW5hbCA9IHJlY29sb3IoVGV4dC53aGl0ZSwgcmdiYSg1MSwgMjU1LCAwLCAwLjkpKTtcbiAgICAgICAgVGV4dC50ZXJtaW5hbF9zaGFkb3cgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgVGV4dFsnI2VhZDRhYSddID0gcmVjb2xvcihUZXh0LndoaXRlLCAnI2VhZDRhYScpO1xuICAgICAgICBUZXh0WycjZmVlNzYxJ10gPSByZWNvbG9yKFRleHQud2hpdGUsICcjZmVlNzYxJyk7XG4gICAgICAgIFRleHRbJyNmZjAwNDQnXSA9IHJlY29sb3IoVGV4dC53aGl0ZSwgJyNmZjAwNDQnKTtcbiAgICB9LFxuXG4gICAgZHJhd1RleHQoY3R4LCB0ZXh0LCB1LCB2LCBzY2FsZSA9IDEsIGZvbnQgPSBUZXh0LndoaXRlLCBzaGFkb3cpIHtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodGV4dCkpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGJsb2NrIG9mIHRleHQpIHtcbiAgICAgICAgICAgICAgICBUZXh0LmRyYXdUZXh0KGN0eCwgYmxvY2sudGV4dCwgdSArIGJsb2NrLnUgKiBzY2FsZSwgdiArIGJsb2NrLnYgKiBzY2FsZSwgc2NhbGUsIGZvbnQsIHNoYWRvdyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGxldCBpZHggPSAwOyBpZHggPCB0ZXh0Lmxlbmd0aDsgaWR4KyspIHtcbiAgICAgICAgICAgIGxldCBjID0gVU5JQ09ERV9DSEFSX01BUFt0ZXh0W2lkeF1dIHx8IHRleHQuY2hhckNvZGVBdChpZHgpO1xuICAgICAgICAgICAgbGV0IGsgPSAoYyAtIDApICogKENIQVJfV0lEVEgpO1xuICAgICAgICAgICAgaWYgKHNoYWRvdykge1xuICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoXG4gICAgICAgICAgICAgICAgICAgIHNoYWRvdyxcbiAgICAgICAgICAgICAgICAgICAgayAlIENIQVJTSEVFVF9XSURUSCxcbiAgICAgICAgICAgICAgICAgICAgTWF0aC5mbG9vcihrIC8gQ0hBUlNIRUVUX1dJRFRIKSAqIENIQVJfSEVJR0hULFxuICAgICAgICAgICAgICAgICAgICBDSEFSX1dJRFRILFxuICAgICAgICAgICAgICAgICAgICBDSEFSX0hFSUdIVCxcbiAgICAgICAgICAgICAgICAgICAgdSArIDEsXG4gICAgICAgICAgICAgICAgICAgIHYsXG4gICAgICAgICAgICAgICAgICAgIENIQVJfV0lEVEggKiBzY2FsZSxcbiAgICAgICAgICAgICAgICAgICAgQ0hBUl9IRUlHSFQgKiBzY2FsZVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdHguZHJhd0ltYWdlKFxuICAgICAgICAgICAgICAgIGZvbnQsXG4gICAgICAgICAgICAgICAgayAlIENIQVJTSEVFVF9XSURUSCxcbiAgICAgICAgICAgICAgICBNYXRoLmZsb29yKGsgLyBDSEFSU0hFRVRfV0lEVEgpICogQ0hBUl9IRUlHSFQsXG4gICAgICAgICAgICAgICAgQ0hBUl9XSURUSCxcbiAgICAgICAgICAgICAgICBDSEFSX0hFSUdIVCxcbiAgICAgICAgICAgICAgICB1LFxuICAgICAgICAgICAgICAgIHYsXG4gICAgICAgICAgICAgICAgQ0hBUl9XSURUSCAqIHNjYWxlLFxuICAgICAgICAgICAgICAgIENIQVJfSEVJR0hUICogc2NhbGVcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB1ICs9IENIQVJfV0lEVEggKiBzY2FsZTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICAvKlxuICAgIGRyYXdSaWdodFRleHQoY3R4LCB0ZXh0LCB1LCB2LCBzY2FsZSA9IDEsIGZvbnQgPSBUZXh0LndoaXRlLCBzaGFkb3cpIHtcbiAgICAgICAgdSAtPSBUZXh0Lm1lYXN1cmVXaWR0aCh0ZXh0LCBzY2FsZSk7XG4gICAgICAgIFRleHQuZHJhd1RleHQoY3R4LCB0ZXh0LCB1LCB2LCBzY2FsZSwgZm9udCwgc2hhZG93KTtcbiAgICB9LFxuICAgICovXG5cbiAgICBtZWFzdXJlV2lkdGgodGV4dCwgc2NhbGUgPSAxKSB7XG4gICAgICAgIHJldHVybiB0ZXh0LnNwbGl0KCcnKS5yZWR1Y2UoKHN1bSwgYykgPT4gc3VtICsgQ0hBUl9XSURUSCwgMCkgKiBzY2FsZTtcbiAgICB9LFxuXG4gICAgc3BsaXRQYXJhZ3JhcGgodGV4dCwgdywgaCkge1xuICAgICAgICBsZXQgY3UgPSAwLCBjdiA9IDA7XG4gICAgICAgIGxldCBuZXh0ID0gKCkgPT4gKHsgdGV4dDogJycsIHU6IGN1LCB2OiBjdiB9KTtcbiAgICAgICAgbGV0IHdpcCA9IG5leHQoKTtcbiAgICAgICAgbGV0IGxpc3QgPSBbXTtcblxuICAgICAgICBmb3IgKGxldCBjIG9mIHRleHQuc3BsaXQoJycpKSB7XG4gICAgICAgICAgICBsZXQgY1dpZHRoID0gVGV4dC5tZWFzdXJlV2lkdGgoYywgMSk7XG4gICAgICAgICAgICBpZiAoYyA9PT0gJ1xcbicgfHwgY3UgKyBjV2lkdGggPiB3KSB7XG4gICAgICAgICAgICAgICAgbGV0IHNhdmVkID0gJyc7XG4gICAgICAgICAgICAgICAgaWYgKGMgIT09ICdcXG4nICYmIGMgIT09ICcgJykge1xuICAgICAgICAgICAgICAgICAgICBsZXQgc3BhY2UgPSB3aXAudGV4dC5zcGxpdCgnICcpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3BhY2UubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2F2ZWQgPSBzcGFjZS5wb3AoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpcC50ZXh0ID0gc3BhY2Uuam9pbignICcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh3aXAudGV4dC5sZW5ndGggPiAwKSBsaXN0LnB1c2god2lwKTtcbiAgICAgICAgICAgICAgICBjdSA9IDA7XG4gICAgICAgICAgICAgICAgY3YgKz0gKENIQVJfSEVJR0hUKTtcbiAgICAgICAgICAgICAgICB3aXAgPSBuZXh0KCk7XG4gICAgICAgICAgICAgICAgaWYgKHNhdmVkLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgd2lwLnRleHQgPSBzYXZlZDtcbiAgICAgICAgICAgICAgICAgICAgY3UgKz0gVGV4dC5tZWFzdXJlV2lkdGgod2lwLnRleHQsIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY3UgKz0gY1dpZHRoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGMgIT09ICdcXG4nKSB7XG4gICAgICAgICAgICAgICAgd2lwLnRleHQgPSB3aXAudGV4dCArIGM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAod2lwLnRleHQubGVuZ3RoID4gMCkgbGlzdC5wdXNoKHdpcCk7XG5cbiAgICAgICAgcmV0dXJuIGxpc3QubWFwKGxpbmUgPT4gKHtcbiAgICAgICAgICAgIC4uLmxpbmUsXG4gICAgICAgICAgICB3OiBUZXh0Lm1lYXN1cmVXaWR0aChsaW5lLnRleHQsIDEpLFxuICAgICAgICAgICAgaDogQ0hBUl9IRUlHSFRcbiAgICAgICAgfSkpO1xuICAgIH0sXG5cbiAgICBkcmF3VGV4dENvbFJvdyh0ZXh0LCBjb2wsIHJvdykge1xuICAgICAgICBUZXh0LmRyYXdUZXh0KFZpZXdwb3J0LmN0eCwgVGV4dC5zcGxpdFBhcmFncmFwaCh0ZXh0LCBWaWV3cG9ydC53aWR0aCksIGNvbCAqIENIQVJfV0lEVEgsIHJvdyAqIENIQVJfSEVJR0hULCAxLCBUZXh0LnRlcm1pbmFsLCBUZXh0LnRlcm1pbmFsX3NoYWRvdyk7XG4gICAgfVxufTtcblxuLy8gVGV4dCB1dGlsaXR5IGZ1bmN0aW9uc1xuXG5mdW5jdGlvbiByZWNvbG9yKGZvbnQsIGNvbG9yKSB7XG4gICAgbGV0IGNhbnZhcyA9IGNyZWF0ZUNhbnZhcyhmb250LndpZHRoLCBmb250LmhlaWdodCk7XG4gICAgY2FudmFzLmN0eC5maWxsU3R5bGUgPSBjb2xvcjtcbiAgICBjYW52YXMuY3R4LmZpbGxSZWN0KDAsIDAsIGZvbnQud2lkdGgsIGZvbnQuaGVpZ2h0KTtcbiAgICBjYW52YXMuY3R4Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9ICdkZXN0aW5hdGlvbi1pbic7XG4gICAgY2FudmFzLmN0eC5kcmF3SW1hZ2UoZm9udCwgMCwgMCk7XG4gICAgcmV0dXJuIGNhbnZhcy5jYW52YXM7XG59XG4iLCIvLyB6emZ4KCkgLSB0aGUgdW5pdmVyc2FsIGVudHJ5IHBvaW50IC0tIHJldHVybnMgYSBBdWRpb0J1ZmZlclNvdXJjZU5vZGVcbmV4cG9ydCBjb25zdCB6emZ4PSguLi50KT0+enpmeFAoenpmeEcoLi4udCkpXG5cbi8vIHp6ZnhQKCkgLSB0aGUgc291bmQgcGxheWVyIC0tIHJldHVybnMgYSBBdWRpb0J1ZmZlclNvdXJjZU5vZGVcbmV4cG9ydCBjb25zdCB6emZ4UD0oLi4udCk9PntsZXQgZT16emZ4WC5jcmVhdGVCdWZmZXJTb3VyY2UoKSxmPXp6ZnhYLmNyZWF0ZUJ1ZmZlcih0Lmxlbmd0aCx0WzBdLmxlbmd0aCx6emZ4Uik7dC5tYXAoKGQsaSk9PmYuZ2V0Q2hhbm5lbERhdGEoaSkuc2V0KGQpKSxlLmJ1ZmZlcj1mLGUuY29ubmVjdCh6emZ4LmRlc3RpbmF0aW9uXyksZS5zdGFydCgpO3JldHVybiBlfVxuXG4vLyB6emZ4RygpIC0gdGhlIHNvdW5kIGdlbmVyYXRvciAtLSByZXR1cm5zIGFuIGFycmF5IG9mIHNhbXBsZSBkYXRhXG5leHBvcnQgY29uc3QgenpmeEc9KHE9MSxrPS4wNSxjPTIyMCxlPTAsdD0wLHU9LjEscj0wLEY9MSx2PTAsej0wLHc9MCxBPTAsbD0wLEI9MCx4PTAsRz0wLGQ9MCx5PTEsbT0wLEM9MCk9PntsZXQgYj0yKk1hdGguUEksSD12Kj01MDAqYi96emZ4UioqMixJPSgwPHg/MTotMSkqYi80LEQ9Yyo9KDErMiprKk1hdGgucmFuZG9tKCktaykqYi96emZ4UixaPVtdLGc9MCxFPTAsYT0wLG49MSxKPTAsSz0wLGY9MCxwLGg7ZT05OSt6emZ4UiplO20qPXp6ZnhSO3QqPXp6ZnhSO3UqPXp6ZnhSO2QqPXp6ZnhSO3oqPTUwMCpiL3p6ZnhSKiozO3gqPWIvenpmeFI7dyo9Yi96emZ4UjtBKj16emZ4UjtsPXp6ZnhSKmx8MDtmb3IoaD1lK20rdCt1K2R8MDthPGg7WlthKytdPWYpKytLJSgxMDAqR3wwKXx8KGY9cj8xPHI/MjxyPzM8cj9NYXRoLnNpbigoZyViKSoqMyk6TWF0aC5tYXgoTWF0aC5taW4oTWF0aC50YW4oZyksMSksLTEpOjEtKDIqZy9iJTIrMiklMjoxLTQqTWF0aC5hYnMoTWF0aC5yb3VuZChnL2IpLWcvYik6TWF0aC5zaW4oZyksZj0obD8xLUMrQypNYXRoLnNpbigyKk1hdGguUEkqYS9sKToxKSooMDxmPzE6LTEpKk1hdGguYWJzKGYpKipGKnEqenpmeFYqKGE8ZT9hL2U6YTxlK20/MS0oYS1lKS9tKigxLXkpOmE8ZSttK3Q/eTphPGgtZD8oaC1hLWQpL3UqeTowKSxmPWQ/Zi8yKyhkPmE/MDooYTxoLWQ/MTooaC1hKS9kKSpaW2EtZHwwXS8yKTpmKSxwPShjKz12Kz16KSpNYXRoLnNpbihFKngtSSksZys9cC1wKkIqKDEtMUU5KihNYXRoLnNpbihhKSsxKSUyKSxFKz1wLXAqQiooMS0xRTkqKE1hdGguc2luKGEpKioyKzEpJTIpLG4mJisrbj5BJiYoYys9dyxEKz13LG49MCksIWx8fCsrSiVsfHwoYz1ELHY9SCxuPW58fDEpO3JldHVybiBafVxuXG4vLyB6emZ4ViAtIGdsb2JhbCB2b2x1bWVcbmV4cG9ydCBjb25zdCB6emZ4Vj0uM1xuXG4vLyB6emZ4UiAtIGdsb2JhbCBzYW1wbGUgcmF0ZVxuZXhwb3J0IGNvbnN0IHp6ZnhSPTQ0MTAwXG5cbi8vIHp6ZnhYIC0gdGhlIGNvbW1vbiBhdWRpbyBjb250ZXh0XG5leHBvcnQgY29uc3QgenpmeFg9bmV3KHRvcC5BdWRpb0NvbnRleHR8fHdlYmtpdEF1ZGlvQ29udGV4dCk7XG5cbi8vIGRlc3RpbmF0aW9uIGZvciB6emZ4IGFuZCB6emZ4bSBzb3VuZHNcbnp6ZnguZGVzdGluYXRpb25fID0genpmeFguZGVzdGluYXRpb247XG4iLCIndXNlIHN0cmljdCc7XG5cbmltcG9ydCB7IHp6ZnhHLCB6emZ4UiB9IGZyb20gJy4venpmeCc7XG5cbi8qKlxuICogWnpGWCBNdXNpYyBSZW5kZXJlciB2Mi4wLjIgYnkgS2VpdGggQ2xhcmtcbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIENoYW5uZWxcbiAqIEB0eXBlIHtBcnJheS48TnVtYmVyPn1cbiAqIEBwcm9wZXJ0eSB7TnVtYmVyfSAwIC0gQ2hhbm5lbCBpbnN0cnVtZW50XG4gKiBAcHJvcGVydHkge051bWJlcn0gMSAtIENoYW5uZWwgcGFubmluZyAoLTEgdG8gKzEpXG4gKiBAcHJvcGVydHkge051bWJlcn0gMiAtIE5vdGVcbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIFBhdHRlcm5cbiAqIEB0eXBlIHtBcnJheS48Q2hhbm5lbD59XG4gKi9cblxuLyoqXG4gKiBAdHlwZWRlZiBJbnN0cnVtZW50XG4gKiBAdHlwZSB7QXJyYXkuPE51bWJlcj59IFp6Rlggc291bmQgcGFyYW1ldGVyc1xuICovXG5cbi8qKlxuICogR2VuZXJhdGUgYSBzb25nXG4gKlxuICogQHBhcmFtIHtBcnJheS48SW5zdHJ1bWVudD59IGluc3RydW1lbnRzIC0gQXJyYXkgb2YgWnpGWCBzb3VuZCBwYXJhbWF0ZXJzLlxuICogQHBhcmFtIHtBcnJheS48UGF0dGVybj59IHBhdHRlcm5zIC0gQXJyYXkgb2YgcGF0dGVybiBkYXRhLlxuICogQHBhcmFtIHtBcnJheS48TnVtYmVyPn0gc2VxdWVuY2UgLSBBcnJheSBvZiBwYXR0ZXJuIGluZGV4ZXMuXG4gKiBAcGFyYW0ge051bWJlcn0gW3NwZWVkPTEyNV0gLSBQbGF5YmFjayBzcGVlZCBvZiB0aGUgc29uZyAoaW4gQlBNKS5cbiAqIEByZXR1cm5zIHtBcnJheS48QXJyYXkuPE51bWJlcj4+fSBMZWZ0IGFuZCByaWdodCBjaGFubmVsIHNhbXBsZSBkYXRhLlxuICovXG5cbmV4cG9ydCBjb25zdCB6emZ4TSA9IChpbnN0cnVtZW50cywgcGF0dGVybnMsIHNlcXVlbmNlLCBCUE0gPSAxMjUpID0+IHtcbiAgICBsZXQgaW5zdHJ1bWVudFBhcmFtZXRlcnMsXG4gICAgICAgIGksXG4gICAgICAgIGosXG4gICAgICAgIGssXG4gICAgICAgIG5vdGUsXG4gICAgICAgIHNhbXBsZSxcbiAgICAgICAgcGF0dGVybkNoYW5uZWwsXG4gICAgICAgIG5vdEZpcnN0QmVhdCxcbiAgICAgICAgc3RvcCxcbiAgICAgICAgaW5zdHJ1bWVudCxcbiAgICAgICAgcGl0Y2gsXG4gICAgICAgIGF0dGVudWF0aW9uLFxuICAgICAgICBvdXRTYW1wbGVPZmZzZXQsXG4gICAgICAgIHNhbXBsZU9mZnNldCxcbiAgICAgICAgbmV4dFNhbXBsZU9mZnNldCxcbiAgICAgICAgc2FtcGxlQnVmZmVyID0gW10sXG4gICAgICAgIGxlZnRDaGFubmVsQnVmZmVyID0gW10sXG4gICAgICAgIHJpZ2h0Q2hhbm5lbEJ1ZmZlciA9IFtdLFxuICAgICAgICBjaGFubmVsSW5kZXggPSAwLFxuICAgICAgICBwYW5uaW5nLFxuICAgICAgICBoYXNNb3JlID0gMSxcbiAgICAgICAgc2FtcGxlQ2FjaGUgPSB7fSxcbiAgICAgICAgYmVhdExlbmd0aCA9ICgoenpmeFIgLyBCUE0pICogNjApID4+IDI7XG5cbiAgICAvLyBmb3IgZWFjaCBjaGFubmVsIGluIG9yZGVyIHVudGlsIHRoZXJlIGFyZSBubyBtb3JlXG4gICAgZm9yICg7IGhhc01vcmU7IGNoYW5uZWxJbmRleCsrKSB7XG4gICAgICAgIC8vIHJlc2V0IGN1cnJlbnQgdmFsdWVzXG4gICAgICAgIHNhbXBsZUJ1ZmZlciA9IFsoaGFzTW9yZSA9IG5vdEZpcnN0QmVhdCA9IHBpdGNoID0gb3V0U2FtcGxlT2Zmc2V0ID0gMCldO1xuXG4gICAgICAgIC8vIGZvciBlYWNoIHBhdHRlcm4gaW4gc2VxdWVuY2VcbiAgICAgICAgc2VxdWVuY2UubWFwKChwYXR0ZXJuSW5kZXgsIHNlcXVlbmNlSW5kZXgpID0+IHtcbiAgICAgICAgICAgIC8vIGdldCBwYXR0ZXJuIGZvciBjdXJyZW50IGNoYW5uZWwsIHVzZSBlbXB0eSAxIG5vdGUgcGF0dGVybiBpZiBub25lIGZvdW5kXG4gICAgICAgICAgICBwYXR0ZXJuQ2hhbm5lbCA9IHBhdHRlcm5zW3BhdHRlcm5JbmRleF1bY2hhbm5lbEluZGV4XSB8fCBbMCwgMCwgMF07XG5cbiAgICAgICAgICAgIC8vIGNoZWNrIGlmIHRoZXJlIGFyZSBtb3JlIGNoYW5uZWxzXG4gICAgICAgICAgICBoYXNNb3JlIHw9ICEhcGF0dGVybnNbcGF0dGVybkluZGV4XVtjaGFubmVsSW5kZXhdO1xuXG4gICAgICAgICAgICAvLyBnZXQgbmV4dCBvZmZzZXQsIHVzZSB0aGUgbGVuZ3RoIG9mIGZpcnN0IGNoYW5uZWxcbiAgICAgICAgICAgIG5leHRTYW1wbGVPZmZzZXQgPVxuICAgICAgICAgICAgICAgIG91dFNhbXBsZU9mZnNldCArXG4gICAgICAgICAgICAgICAgKHBhdHRlcm5zW3BhdHRlcm5JbmRleF1bMF0ubGVuZ3RoIC0gMiAtICFub3RGaXJzdEJlYXQpICpcbiAgICAgICAgICAgICAgICAgICAgYmVhdExlbmd0aDtcblxuICAgICAgICAgICAgLy8gZm9yIGVhY2ggYmVhdCBpbiBwYXR0ZXJuLCBwbHVzIG9uZSBleHRyYSBpZiBlbmQgb2Ygc2VxdWVuY2VcbiAgICAgICAgICAgIGZvciAoXG4gICAgICAgICAgICAgICAgaSA9IDIsIGsgPSBvdXRTYW1wbGVPZmZzZXQ7XG4gICAgICAgICAgICAgICAgaSA8XG4gICAgICAgICAgICAgICAgcGF0dGVybkNoYW5uZWwubGVuZ3RoICsgKHNlcXVlbmNlSW5kZXggPT0gc2VxdWVuY2UubGVuZ3RoIC0gMSk7XG4gICAgICAgICAgICAgICAgbm90Rmlyc3RCZWF0ID0gKytpXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAvLyA8Y2hhbm5lbC1ub3RlPlxuICAgICAgICAgICAgICAgIG5vdGUgPSBwYXR0ZXJuQ2hhbm5lbFtpXTtcblxuICAgICAgICAgICAgICAgIC8vIHN0b3AgaWYgZGlmZmVyZW50IGluc3RydW1lbnQgb3IgbmV3IG5vdGVcbiAgICAgICAgICAgICAgICBzdG9wID0gKGluc3RydW1lbnQgIT0gKHBhdHRlcm5DaGFubmVsWzBdIHx8IDApKSB8IG5vdGUgfCAwO1xuXG4gICAgICAgICAgICAgICAgLy8gZmlsbCBidWZmZXIgd2l0aCBzYW1wbGVzIGZvciBwcmV2aW91cyBiZWF0LCBtb3N0IGNwdSBpbnRlbnNpdmUgcGFydFxuICAgICAgICAgICAgICAgIGZvciAoXG4gICAgICAgICAgICAgICAgICAgIGogPSAwO1xuICAgICAgICAgICAgICAgICAgICBqIDwgYmVhdExlbmd0aCAmJiBub3RGaXJzdEJlYXQ7XG4gICAgICAgICAgICAgICAgICAgIC8vIGZhZGUgb2ZmIGF0dGVudWF0aW9uIGF0IGVuZCBvZiBiZWF0IGlmIHN0b3BwaW5nIG5vdGUsIHByZXZlbnRzIGNsaWNraW5nXG4gICAgICAgICAgICAgICAgICAgIGorKyA+IGJlYXRMZW5ndGggLSA5OSAmJiBzdG9wXG4gICAgICAgICAgICAgICAgICAgICAgICA/IChhdHRlbnVhdGlvbiArPSAoYXR0ZW51YXRpb24gPCAxKSAvIDk5KVxuICAgICAgICAgICAgICAgICAgICAgICAgOiAwXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNvcHkgc2FtcGxlIHRvIHN0ZXJlbyBidWZmZXJzIHdpdGggcGFubmluZ1xuICAgICAgICAgICAgICAgICAgICBzYW1wbGUgPVxuICAgICAgICAgICAgICAgICAgICAgICAgKCgxIC0gYXR0ZW51YXRpb24pICogc2FtcGxlQnVmZmVyW3NhbXBsZU9mZnNldCsrXSkgL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDIgfHwgMDtcbiAgICAgICAgICAgICAgICAgICAgbGVmdENoYW5uZWxCdWZmZXJba10gPVxuICAgICAgICAgICAgICAgICAgICAgICAgKGxlZnRDaGFubmVsQnVmZmVyW2tdIHx8IDApICsgc2FtcGxlICogcGFubmluZyAtIHNhbXBsZTtcbiAgICAgICAgICAgICAgICAgICAgcmlnaHRDaGFubmVsQnVmZmVyW2tdID1cbiAgICAgICAgICAgICAgICAgICAgICAgIChyaWdodENoYW5uZWxCdWZmZXJbaysrXSB8fCAwKSArXG4gICAgICAgICAgICAgICAgICAgICAgICBzYW1wbGUgKiBwYW5uaW5nICtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNhbXBsZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBzZXQgdXAgZm9yIG5leHQgbm90ZVxuICAgICAgICAgICAgICAgIGlmIChub3RlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHNldCBhdHRlbnVhdGlvblxuICAgICAgICAgICAgICAgICAgICBhdHRlbnVhdGlvbiA9IG5vdGUgJSAxO1xuICAgICAgICAgICAgICAgICAgICBwYW5uaW5nID0gcGF0dGVybkNoYW5uZWxbMV0gfHwgMDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKChub3RlIHw9IDApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBnZXQgY2FjaGVkIHNhbXBsZVxuICAgICAgICAgICAgICAgICAgICAgICAgc2FtcGxlQnVmZmVyID0gc2FtcGxlQ2FjaGVbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoaW5zdHJ1bWVudCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXR0ZXJuQ2hhbm5lbFsoc2FtcGxlT2Zmc2V0ID0gMCldIHx8IDApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICAgICAgXSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2FtcGxlQ2FjaGVbW2luc3RydW1lbnQsIG5vdGVdXSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFkZCBzYW1wbGUgdG8gY2FjaGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoKGluc3RydW1lbnRQYXJhbWV0ZXJzID0gW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5pbnN0cnVtZW50c1tpbnN0cnVtZW50XVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChpbnN0cnVtZW50UGFyYW1ldGVyc1syXSAqPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAyICoqICgobm90ZSAtIDEyKSAvIDEyKSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgenpmeEcoLi4uaW5zdHJ1bWVudFBhcmFtZXRlcnMpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gdXBkYXRlIHRoZSBzYW1wbGUgb2Zmc2V0XG4gICAgICAgICAgICBvdXRTYW1wbGVPZmZzZXQgPSBuZXh0U2FtcGxlT2Zmc2V0O1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gW2xlZnRDaGFubmVsQnVmZmVyLCByaWdodENoYW5uZWxCdWZmZXJdO1xufTtcbiIsImV4cG9ydCBjb25zdCBPYmxpcXVlTXlzdGlxdWUgPSBbW1sxLjMsMCwyMywsLC4yLDMsNV0sWzEuNSwwLDRlMywsLC4wMywyLDEuMjUsLCwsLC4wMiw2LjgsLS4zLCwuNV0sWy43LDAsMjEwMCwsLC4yLDMsMywsLC00MDAsLCwyXSxbLDAsNjU1LCwsLjExLDIsMS42NSwsLCwsLDMuOCwtLjEsLjFdXSxbW1ssLS41LDEzLCwsLCwsMTMsLCwsLCwxMywsLCwsLDEzLCwsLCwsMTMsLCwsMTQsLCwsMTMsLCwsLCwxMywsLCwsLDEzLCwsLCwsMTMsLCwsLCwxMywsLCwxNCwsLCxdLFsxLC4zLDEzLCwxMywsMTMsLDEzLCwsLDEzLCwxMywsMTMsLDEzLCwxMywsLCwxMywsMTMsLDEzLCwxMywsMTMsLDEzLCwxMywsMTMsLDEzLCwsLDEzLCwxMywsMTMsLDEzLCwxMywsLCwxMywsMTMsLDEzLCwxMywsMTMsLF0sWzIsMSwsLCwsLCwsLDEzLCwsLCwsLCwsLCwsMTMsLCwsLCwsLCwsLCwsLCwsLCwsLDEzLCwsLCwsLCwsLCwsMTMsLCwsLCwsLCwsLCxdLFssLjYsLCwsLDEzLCwxOCwsMTksLCwsLCwsLDE5LCwxOCwsLCwxNiwsLCwxMywsLCwsLCwsLCwxMywsMTgsLDE5LCwsLCwsLCwxOCwxOSwxOCwsLCwxMywxNCwxMywsMTYsLDE4LCwxOSwsXSxbMywtMSwsLDEzLCwsLCwsLCwsLCwsMTMsLCwsLCwsLCwsLCwsLCwsLCwsLDEzLCwsLCwsLCwsLCwsMTMsLCwsLCwsLCwsLCwsLDEzLDEzLDEzLDEzXV0sW1ssLS41LDEzLCwsLCwsMTMsLCwsLCwxMywsLCwsLDEzLCwsLCwsMTMsLCwsMTQsLCwsMTMsLCwsLCwxMywsLCwsLDEzLCwsLCwsMTMsLCwsLCwxMywsLCwxNCwsLCxdLFsxLC4zLDEzLCwxMywsMTMsLDEzLCwsLDEzLCwxMywsMTMsLDEzLCwxMywsLCwxMywsMTMsLDEzLCwxMywsMTMsLDEzLCwxMywsMTMsLDEzLCwsLDEzLCwxMywsMTMsLDEzLCwxMywsLCwxMywsMTMsLDEzLCwxMywsMTMsLF0sWzIsMSwsLCwsLCwsLDEzLCwsLCwsLCwsLCwsMTMsLCwsLCwsLCwsLCwsLCwsLCwsLDEzLCwsLCwsLCwsLCwsMTMsLCwsLCwsLCwsLCxdXV0sWzEsMSwwLDAsMCwwLDEsMF0sLF1cbiIsIid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHsgenpmeCwgenpmeFAsIHp6ZnhYIH0gZnJvbSAnLi9saWIvenpmeCc7XG5pbXBvcnQgeyB6emZ4TSB9IGZyb20gJy4vbGliL3p6ZnhtJztcbmltcG9ydCB7IE9ibGlxdWVNeXN0aXF1ZSB9IGZyb20gJy4vc29uZ3MvT2JsaXF1ZU15c3RpcXVlJztcblxuZXhwb3J0IGNvbnN0IEF1ZGlvID0ge1xuICAgIGluaXQoKSB7XG4gICAgICAgIEF1ZGlvLnJlYWR5VG9QbGF5ID0gZmFsc2U7XG5cbiAgICAgICAgQXVkaW8uY3R4ID0genpmeFg7XG4gICAgICAgIEF1ZGlvLmdhaW5fID0gQXVkaW8uY3R4LmNyZWF0ZUdhaW4oKTtcbiAgICAgICAgQXVkaW8uZ2Fpbl8uY29ubmVjdChBdWRpby5jdHguZGVzdGluYXRpb24pO1xuICAgICAgICB6emZ4LmRlc3RpbmF0aW9uXyA9IEF1ZGlvLmdhaW5fO1xuXG4gICAgICAgIEF1ZGlvLnNob3RndW4gPSBbLDAuMDEsMTQwLDAuMDEsMC4wMiwwLjQ1LDQsMi40MiwwLjEsLTAuMSwsLCwxLjIsLDAuMywwLjA0LDAuOCwwLjAyXTtcbiAgICAgICAgQXVkaW8ucGFnZSA9IFssLDEyMzMsLC4wMSwuMiwxLDEuNDMsLCw1MzksLjEsLCwsLCwuNTEsLjAzLC4wMV07XG4gICAgICAgIEF1ZGlvLnNoZWxsUmVsb2FkID0gWywsNjgsMC4wMSwsMC4xNCwxLDEuNTMsNy41LDAuMSw1MCwwLjAyLC0wLjAxLC0wLjIsMC4xLDAuMiwsMC40NywwLjAxXTtcbiAgICAgICAgQXVkaW8uZGFtYWdlID0gWywsMzkxLCwuMTksLjAxLDIsLjU0LC00LDIwLCwsLCwsLC4wMiwuOV07XG4gICAgICAgIEF1ZGlvLmFsYXJtID0gWywsOTcwLC4xMiwuMjUsLjM1LCwuMzksOC4xLCwxMCwuMSwuMiwsLjEsLCwuNiwuMDksLjEzXTtcbiAgICAgICAgLy8gWywsOTYxLC4wNSwuMDYsMS4xNywxLDQuNjcsLjgsLCwsLC44LC0wLjgsLjEsLjQ5LC42MiwuMDldO1xuICAgICAgICBBdWRpby52aWN0b3J5ID0gWywsNDU0LC4wNiwuODYsLjcxLDIsLjYzLC0wLjcsMS43LC04MywuMDksLjI3LC4zLC4yLCwuMTgsLjk1LC4wMiwuMDJdO1xuICAgICAgICBBdWRpby5zb25nID0genpmeE0oLi4uT2JsaXF1ZU15c3RpcXVlKTtcblxuICAgICAgICAvLyBTYXZlIG91ciBiYWNrZ3JvdW5kIG11c2ljIGluIG9zMTNrLCBmb3IgZnVuIVxuICAgICAgICAvL2xvY2FsU3RvcmFnZVtgT1MxM2tNdXNpYywke1RJVExFfSAtIE9ibGlxdWUgTXlzdGlxdWVgXSA9IEpTT04uc3RyaW5naWZ5KE9ibGlxdWVNeXN0aXF1ZSk7XG4gICAgfSxcblxuICAgIHVwZGF0ZSgpIHtcbiAgICAgICAgaWYgKCFBdWRpby5yZWFkeVRvUGxheSkgcmV0dXJuO1xuXG4gICAgICAgIGlmICghQXVkaW8ubXVzaWNQbGF5aW5nKSB7XG4gICAgICAgICAgICAvL0F1ZGlvLmJnbXVzaWNub2RlID0genpmeFAoLi4uQXVkaW8uc29uZyk7XG4gICAgICAgICAgICAvL0F1ZGlvLmJnbXVzaWNub2RlLmxvb3AgPSB0cnVlO1xuICAgICAgICAgICAgQXVkaW8ubXVzaWNQbGF5aW5nID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBwbGF5KHNvdW5kKSB7XG4gICAgICAgIGlmICghQXVkaW8ucmVhZHlUb1BsYXkpIHJldHVybjtcbiAgICAgICAgenpmeCguLi5zb3VuZCk7XG4gICAgfSxcblxuICAgIC8vIEl0J3MgaW1wb3J0YW50IHdlIGRvIHBhdXNpbmcgYW5kIHVucGF1c2luZyBhcyBzcGVjaWZpYyBldmVudHMgYW5kIG5vdCBpbiBnZW5lcmFsIHVwZGF0ZSgpLFxuICAgIC8vIGJlY2F1c2UgdXBkYXRlKCkgaXMgdHJpZ2dlcmVkIGJ5IHRoZSBhbmltYXRpb24gZnJhbWUgdHJpZ2dlciB3aGljaCBkb2VzIG5vdCBydW4gaWYgdGhlXG4gICAgLy8gcGFnZSBpcyBub3QgdmlzaWJsZS4gKFNvLCBpZiB5b3Ugd2FudCB0aGUgbXVzaWMgdG8gZmFkZSBpbiB0aGUgYmFja2dyb3VuZCwgZm9yIGV4YW1wbGUsXG4gICAgLy8gdGhhdCdzIG5vdCBoZWxwZnVsIGlmIGl0IHdvbid0IHdvcmsgYmVjYXVzZSB5b3UgYXJlbid0IGxvb2tpbmcgYXQgdGhlIHBhZ2UhKVxuXG4gICAgcGF1c2UoKSB7XG4gICAgICAgIEF1ZGlvLmdhaW5fLmdhaW4ubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUoMCwgQXVkaW8uY3R4LmN1cnJlbnRUaW1lICsgMSk7XG4gICAgfSxcblxuICAgIHVucGF1c2UoKSB7XG4gICAgICAgIEF1ZGlvLmdhaW5fLmdhaW4ubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUoMSwgQXVkaW8uY3R4LmN1cnJlbnRUaW1lICsgMSk7XG4gICAgfVxufTtcbiIsIi8vIGh0dHBzOi8vam9ubnkubW9ycmlsbC5tZS9lbi9ibG9nL2dhbWVkZXYtaG93LXRvLWltcGxlbWVudC1hLWNhbWVyYS1zaGFrZS1lZmZlY3QvXG5cbi8qKlxuICogU2hha2UgaXQgYmFieS5cbiAqL1xuZXhwb3J0IGNsYXNzIFNjcmVlblNoYWtlIHtcbiAgICBjb25zdHJ1Y3RvcihmcmFtZXMsIGhBbXBsaXR1ZGUsIHZBbXBsaXR1ZGUpIHtcbiAgICAgICAgdGhpcy5mcmFtZXMgPSBmcmFtZXM7XG4gICAgICAgIHRoaXMuaEFtcGxpdHVkZSA9IGhBbXBsaXR1ZGU7XG4gICAgICAgIHRoaXMudkFtcGxpdHVkZSA9IHZBbXBsaXR1ZGU7XG4gICAgICAgIHRoaXMuaFNhbXBsZXMgPSBbXTtcbiAgICAgICAgdGhpcy52U2FtcGxlcyA9IFtdO1xuXG4gICAgICAgIHZhciBzYW1wbGVDb3VudCA9IGZyYW1lcyAvIDI7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2FtcGxlQ291bnQ7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5oU2FtcGxlcy5wdXNoKE1hdGgucmFuZG9tKCkgKiAyIC0gMSk7XG4gICAgICAgICAgICB0aGlzLnZTYW1wbGVzLnB1c2goTWF0aC5yYW5kb20oKSAqIDIgLSAxKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZyYW1lID0gLTE7XG4gICAgfVxuXG4gICAgdXBkYXRlKCkge1xuICAgICAgICB0aGlzLmZyYW1lKys7XG4gICAgICAgIGlmICh0aGlzLmZyYW1lID49IHRoaXMuZnJhbWVzKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICAvL2xldCBzID0gKHRoaXMuZnJhbWVzIC8gMTApICogKHRoaXMuZnJhbWUgLyB0aGlzLmZyYW1lcyk7XG4gICAgICAgIGxldCBzID0gdGhpcy5mcmFtZSAvIDI7XG4gICAgICAgIGxldCBzMCA9IHMgfCAwO1xuICAgICAgICBsZXQgczEgPSBzMCArIDE7XG4gICAgICAgIGxldCBkZWNheSA9IDEgLSB0aGlzLmZyYW1lIC8gdGhpcy5mcmFtZXM7XG5cbiAgICAgICAgdGhpcy54ID1cbiAgICAgICAgICAgIHRoaXMuaEFtcGxpdHVkZSAqXG4gICAgICAgICAgICBkZWNheSAqXG4gICAgICAgICAgICAodGhpcy5oU2FtcGxlc1tzMF0gK1xuICAgICAgICAgICAgICAgIChzIC0gczApICogKHRoaXMuaFNhbXBsZXNbczFdIC0gdGhpcy5oU2FtcGxlc1tzMF0pKTtcbiAgICAgICAgdGhpcy55ID1cbiAgICAgICAgICAgIHRoaXMudkFtcGxpdHVkZSAqXG4gICAgICAgICAgICBkZWNheSAqXG4gICAgICAgICAgICAodGhpcy52U2FtcGxlc1tzMF0gK1xuICAgICAgICAgICAgICAgIChzIC0gczApICogKHRoaXMudlNhbXBsZXNbczFdIC0gdGhpcy52U2FtcGxlc1tzMF0pKTtcblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBTQ1JFRU5fV0lEVEgsIFNDUkVFTl9IRUlHSFQgfSBmcm9tICcuL0NvbnN0YW50cyc7XG5pbXBvcnQgeyBWaWV3cG9ydCB9IGZyb20gJy4vVmlld3BvcnQnO1xuaW1wb3J0IHsgVGV4dCB9IGZyb20gJy4vVGV4dCc7XG5cbmV4cG9ydCBjb25zdCBTY3JlZW4gPSB7XG4gICAgaW5pdCgpIHtcbiAgICAgICAgdGhpcy5zY3JlZW4gPSBbXTtcbiAgICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCBTQ1JFRU5fSEVJR0hUOyB5KyspIHtcbiAgICAgICAgICAgIHRoaXMuc2NyZWVuLnB1c2goW10pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2xlYXIoKTtcbiAgICB9LFxuXG4gICAgY2xlYXIoKSB7XG4gICAgICAgIGZvciAobGV0IHkgPSAwOyB5IDwgU0NSRUVOX0hFSUdIVDsgeSsrKSB7XG4gICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IFNDUkVFTl9XSURUSDsgeCsrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zY3JlZW5beV1beF0gPSAnICc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgd3JpdGUoeCwgeSwgdGV4dCkge1xuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkodGV4dCkpIHRleHQgPSBbdGV4dF07XG5cbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0ZXh0Lmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRleHRbal0ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNjcmVlblt5ICsgal1beCArIGldID0gdGV4dFtqXVtpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBkcmF3VG9WaWV3cG9ydCgpIHtcbiAgICAgICAgbGV0IHRleHQgPSB0aGlzLnNjcmVlbi5tYXAocm93ID0+IHJvdy5qb2luKCcnKSkuam9pbignXFxuJyk7XG5cbiAgICAgICAgVGV4dC5kcmF3VGV4dChcbiAgICAgICAgICAgIFZpZXdwb3J0LmN0eCxcbiAgICAgICAgICAgIFRleHQuc3BsaXRQYXJhZ3JhcGgodGV4dCwgVmlld3BvcnQud2lkdGgpLFxuICAgICAgICAgICAgMCwgMCxcbiAgICAgICAgICAgIDEsXG4gICAgICAgICAgICBUZXh0LnRlcm1pbmFsLCBUZXh0LnRlcm1pbmFsX3NoYWRvd1xuICAgICAgICApO1xuICAgIH1cbn07XG4iLCJpbXBvcnQgeyBTY3JlZW4gfSBmcm9tICcuL1NjcmVlbic7XG5pbXBvcnQgeyBnYW1lIH0gZnJvbSAnLi9HYW1lJztcbmltcG9ydCB7IFBMQVlfU1BFRURTIH0gZnJvbSAnLi9Db25zdGFudHMnO1xuaW1wb3J0IHsgSW5wdXQgfSBmcm9tICcuL0lucHV0JztcblxuZXhwb3J0IGNsYXNzIE1haW5NZW51IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICB9XG5cbiAgICB1cGRhdGUoKSB7XG4gICAgICAgIHN3aXRjaCAoSW5wdXQubGFzdEtleVByZXNzZWQoKS50b1VwcGVyQ2FzZSgpKSB7XG4gICAgICAgICAgICBjYXNlICdQJzpcbiAgICAgICAgICAgICAgICBJbnB1dC5jb25zdW1lKCk7XG4gICAgICAgICAgICAgICAgZ2FtZS5zdGFydFNlc3Npb24oKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ0wnOlxuICAgICAgICAgICAgICAgIElucHV0LmNvbnN1bWUoKTtcbiAgICAgICAgICAgICAgICBnYW1lLnBsYXlTcGVlZCA9IChnYW1lLnBsYXlTcGVlZCArIDEpICUgUExBWV9TUEVFRFMubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnSSc6XG4gICAgICAgICAgICAgICAgSW5wdXQuY29uc3VtZSgpO1xuICAgICAgICAgICAgICAgIGdhbWUuc2hvd0luc3RydWN0aW9ucygpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnRSc6XG4gICAgICAgICAgICAgICAgSW5wdXQuY29uc3VtZSgpO1xuICAgICAgICAgICAgICAgIGdhbWUuc2hvd0luc3RydWN0aW9ucygpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZHJhdygpIHtcbiAgICAgICAgbGV0IHZlcnNpb24gPSAnPyc7XG4gICAgICAgIGxldCB0ZXJtaW5hbCA9ICc/JztcblxuICAgICAgICBsZXQgaGlnaFNjb3JlcyA9IFtcbiAgICAgICAgICAgIGAxKSA2MDAwICBCb2JgLFxuICAgICAgICAgICAgYDIpIDYwMDAgIFRvbWAsXG4gICAgICAgICAgICBgMykgNDAwMCAgV2F5bmVgLFxuICAgICAgICAgICAgYGAsXG4gICAgICAgICAgICBgYFxuICAgICAgICBdO1xuXG4gICAgICAgIFNjcmVlbi5jbGVhcigpO1xuICAgICAgICBTY3JlZW4ud3JpdGUoMCwgMCwgW1xuICAgICAgICAgICAgYCAgICAgICAgICAgICAgIExMICAgICAgICAgICAgICAgICAgICAgZGQgICAgICAgZGRgLFxuICAgICAgICAgICAgYCAgICAgICAgICAgICAgIExMICAgICAgICAgICAgICAgICAgICAgZGQgICAgICAgZGQgICAgICAgICAgICAgICAgICAgICAgdG1gLFxuICAgICAgICAgICAgYCAgICAgICAgICAgICAgIExMICAgICAgICAgYWFhYSAgICAgZGRkZGQgICAgZGRkZGQgICAgZWVlZSAgIHJycnJycnJgLFxuICAgICAgICAgICAgYCAgICAgICAgICAgICAgIExMICAgICAgICBhYSAgYWEgICBkZCAgZGQgICBkZCAgZGQgICBlZSAgZWUgIHJyICAgIHJyYCxcbiAgICAgICAgICAgIGAgICAgICAgICAgICAgICBMTCAgICAgICAgYWEgIGFhICAgZGQgIGRkICAgZGQgIGRkICAgZWVlZWVlICBycmAsXG4gICAgICAgICAgICBgICAgICAgICAgICAgICAgTEwgICAgICAgIGFhICBhYSAgIGRkICBkZCAgIGRkICBkZCAgIGVlICAgICAgcnJgLFxuICAgICAgICAgICAgYCAgICAgICAgICAgICAgIExMTExMTExMICAgYWFhIGFhICAgZGRkIGRkICAgZGRkIGRkICAgZWVlZSAgIHJyYCxcbiAgICAgICAgICAgIGBgLFxuICAgICAgICAgICAgYCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZlcnNpb246ICAgICR7dmVyc2lvbn1gLFxuICAgICAgICAgICAgYChjKSAxOTgyLCAxOTgzIFlhaG9vIFNvZnR3YXJlICAgICAgICAgIFRlcm1pbmFsOiAgICR7dGVybWluYWx9YCxcbiAgICAgICAgICAgIGAxMDk3MCBBc2h0b24gQXZlLiAgU3VpdGUgMzEyICAgICAgICAgICBQbGF5IHNwZWVkOiAke2dhbWUucGxheVNwZWVkICsgMX0gLyAke1BMQVlfU1BFRURTLmxlbmd0aH1gLFxuICAgICAgICAgICAgYExvcyBBbmdlbGVzLCBDYSAgOTAwMjQgICAgICAgICAgICAgICAgIE1vdmUgPSDihpHihpPihpDihpIvV0FTRCwgSnVtcCA9IFNwYWNlLGAsXG4gICAgICAgICAgICBgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3RvcCA9IE90aGVyYCxcbiAgICAgICAgICAgIGBgLFxuICAgICAgICAgICAgYFAgPSBQbGF5IGdhbWUgICAgICAgICAgICAgICAgICAgICAgICAgIEhpZ2ggU2NvcmVzYCxcbiAgICAgICAgICAgIGBMID0gQ2hhbmdlIGxldmVsIG9mIGRpZmZpY3VsdHkgICAgICAgICAke2hpZ2hTY29yZXNbMF19YCxcbiAgICAgICAgICAgIGBDID0gQ29uZmlndXJlIExhZGRlciAgICAgICAgICAgICAgICAgICAke2hpZ2hTY29yZXNbMV19YCxcbiAgICAgICAgICAgIGBJID0gSW5zdHJ1Y3Rpb25zICAgICAgICAgICAgICAgICAgICAgICAke2hpZ2hTY29yZXNbMl19YCxcbiAgICAgICAgICAgIGBFID0gRXhpdCBMYWRkZXIgICAgICAgICAgICAgICAgICAgICAgICAke2hpZ2hTY29yZXNbM119YCxcbiAgICAgICAgICAgIGAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke2hpZ2hTY29yZXNbNF19YCxcbiAgICAgICAgICAgIGBgLFxuICAgICAgICAgICAgYEVudGVyIG9uZSBvZiB0aGUgYWJvdmU6YFxuICAgICAgICBdKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBTY3JlZW4gfSBmcm9tICcuL1NjcmVlbic7XG5pbXBvcnQgeyBnYW1lIH0gZnJvbSAnLi9HYW1lJztcbmltcG9ydCB7IElucHV0IH0gZnJvbSAnLi9JbnB1dCc7XG5cbmV4cG9ydCBjbGFzcyBJbnN0cnVjdGlvbnNNZW51IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICB9XG5cbiAgICB1cGRhdGUoKSB7XG4gICAgICAgIGlmIChJbnB1dC5sYXN0S2V5UHJlc3NlZCgpLnRvVXBwZXJDYXNlKCkgIT09ICcnKSB7XG4gICAgICAgICAgICBJbnB1dC5jb25zdW1lKCk7XG4gICAgICAgICAgICBnYW1lLnNob3dNYWluTWVudSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZHJhdygpIHtcbiAgICAgICAgU2NyZWVuLmNsZWFyKCk7XG4gICAgICAgIFNjcmVlbi53cml0ZSgwLCAwLCBbXG4gICAgICAgICAgICBgWW91IGFyZSBhIExhZCB0cmFwcGVkIGluIGEgbWF6ZS4gIFlvdXIgbWlzc2lvbiBpcyBpcyB0byBleHBsb3JlIHRoZWAsXG4gICAgICAgICAgICBgZGFyayBjb3JyaWRvcnMgbmV2ZXIgYmVmb3JlIHNlZW4gYnkgaHVtYW4gZXllcyBhbmQgZmluZCBoaWRkZW5gLFxuICAgICAgICAgICAgYHRyZWFzdXJlcyBhbmQgcmljaGVzLmAsXG4gICAgICAgICAgICBgYCxcbiAgICAgICAgICAgIGBZb3UgY29udHJvbCBMYWQgYnkgdHlwaW5nIHRoZSBkaXJlY3Rpb24gYnV0dG9ucyBhbmQganVtcGluZyBieWAsXG4gICAgICAgICAgICBgdHlwaW5nIFNQQUNFLiAgQnV0IGJld2FyZSBvZiB0aGUgZmFsbGluZyByb2NrcyBjYWxsZWQgRGVyIHJvY2tzLmAsXG4gICAgICAgICAgICBgWW91IG11c3QgZmluZCBhbmQgZ3Jhc3AgdGhlIHRyZWFzdXJlcyAoc2hvd24gYXMgJCkgQkVGT1JFIHRoZWAsXG4gICAgICAgICAgICBgYm9udXMgdGltZSBydW5zIG91dC5gLFxuICAgICAgICAgICAgYGAsXG4gICAgICAgICAgICBgQSBuZXcgTGFkIHdpbGwgYmUgYXdhcmRlZCBmb3IgZXZlcnkgMTAsMDAwIHBvaW50cy5gLFxuICAgICAgICAgICAgYEV4dHJhIHBvaW50cyBhcmUgYXdhcmRlZCBmb3IgdG91Y2hpbmcgdGhlIGdvbGRgLFxuICAgICAgICAgICAgYHN0YXR1ZXMgKHNob3duIGFzICYpLiAgWW91IHdpbGwgcmVjZWl2ZSB0aGUgYm9udXMgdGltZSBwb2ludHNgLFxuICAgICAgICAgICAgYHRoYXQgYXJlIGxlZnQgd2hlbiB5b3UgaGF2ZSBmaW5pc2hlZCB0aGUgbGV2ZWwuYCxcbiAgICAgICAgICAgIGBgLFxuICAgICAgICAgICAgYFR5cGUgYW4gRVNDYXBlIHRvIHBhdXNlIHRoZSBnYW1lLmAsXG4gICAgICAgICAgICBgYCxcbiAgICAgICAgICAgIGBSZW1lbWJlciwgdGhlcmUgaXMgbW9yZSB0aGFuIG9uZSB3YXkgdG8gc2tpbiBhIGNhdC4gKENodW0pYCxcbiAgICAgICAgICAgIGBgLFxuICAgICAgICAgICAgYEdvb2QgbHVjayBMYWQuYCxcbiAgICAgICAgICAgIGBgLFxuICAgICAgICAgICAgYGAsXG4gICAgICAgICAgICBgYCxcbiAgICAgICAgICAgIGBUeXBlIFJFVFVSTiB0byByZXR1cm4gdG8gbWFpbiBtZW51OmBcbiAgICAgICAgXSk7XG4gICAgfVxufVxuIiwiXG4vLyBUaGlzIGlzIG91ciBsaXN0IG9mIFNUQVRFUy4gRWFjaCBlbnRpdHkgc3RhcnRzIG91dCBpbiBvbmUgb2YgdGhlc2Ugc3RhdGVzIGFuZCBjYW4gbW92ZSBiZXR3ZWVuXG4vLyB0aGVtIGJhc2VkIG9uIGV2ZW50cyB0aGF0IGhhcHBlbiBpbiB0aGUgZ2FtZS4gKE5vdGUgdGhhdCBzb21lIG9mIHRoZXNlIGFyZSBkaXJlY3Rpb25zLCBidXRcbi8vIHNpbmNlIGFuIGVudGl0eSBrZWVwcyBtb3ZpbmcgaW4gdGhlIGRpcmVjdGlvbiBpdCBpcyBnb2luZyB1bmxlc3Mgc3RvcHBlZCwgZGlyZWN0aW9ucyBhcmVcbi8vIHN0YXRlcyBpbiB0aGlzIGdhbWUuKVxuZXhwb3J0IGNvbnN0IFN0YXRlID0ge1xuICAgIFNUT1BQRUQ6ICAgIDEsICAgICAgICAgLy8gU3RhbmRpbmcgc3RpbGxcbiAgICBVUDogICAgICAgICAyLCAgICAgICAgIC8vIE1vdmluZyB1cCAocGxheWVyIG9ubHkpXG4gICAgTEVGVDogICAgICAgMywgICAgICAgICAvLyBNb3ZpbmcgbGVmdFxuICAgIERPV046ICAgICAgIDQsICAgICAgICAgLy8gTW92aW5nIGRvd25cbiAgICBSSUdIVDogICAgICA1LCAgICAgICAgIC8vIE1vdmluZyByaWdodFxuICAgIEZBTExJTkc6ICAgIDYsICAgICAgICAgLy8gRmFsbGluZ1xuICAgIFNUQVJUX0pVTVA6IDcsICAgICAgICAgLy8gQWJvdXQgdG8gc3RhcnQgYSBqdW1wIChwbGF5ZXIgb25seSlcbiAgICBKVU1QX0xFRlQ6ICA4LCAgICAgICAgIC8vIEp1bXBpbmcgbGVmdCAocGxheWVyIG9ubHkpXG4gICAgSlVNUF9SSUdIVDogOSwgICAgICAgICAvLyBKdW1waW5nIHJpZ2h0IChwbGF5ZXIgb25seSlcbiAgICBKVU1QX1VQOiAgICAxMCwgICAgICAgIC8vIEp1bXBpbmcgc3RyYWlnaHQgdXAgKHBsYXllciBvbmx5KVxuICAgIERZSU5HOiAgICAgIDExLCAgICAgICAgLy8gRHlpbmcgKHVzZWQgYXMgYSBkZWF0aCBhbmltYXRpb24pXG4gICAgREVBRDogICAgICAgMTIgICAgICAgICAvLyBEZWFkIChmb3IgcGxheWVyLCByZXN0YXJ0IGxldmVsOyBmb3Igcm9jaywgZGlzYXBwZWFyKVxufTtcblxuZXhwb3J0IGNvbnN0IEpVTVBfRlJBTUVTID0ge1xuICAgIFtTdGF0ZS5KVU1QX1JJR0hUXTogW1xuICAgICAgICB7IHg6IDEsIHk6IC0xIH0sXG4gICAgICAgIHsgeDogMSwgeTogLTEgfSxcbiAgICAgICAgeyB4OiAxLCB5OiAwIH0sXG4gICAgICAgIHsgeDogMSwgeTogMCB9LFxuICAgICAgICB7IHg6IDEsIHk6IDEgfSxcbiAgICAgICAgeyB4OiAxLCB5OiAxIH1cbiAgICBdLFxuICAgIFtTdGF0ZS5KVU1QX0xFRlRdOiBbXG4gICAgICAgIHsgeDogLTEsIHk6IC0xIH0sXG4gICAgICAgIHsgeDogLTEsIHk6IC0xIH0sXG4gICAgICAgIHsgeDogLTEsIHk6IDAgfSxcbiAgICAgICAgeyB4OiAtMSwgeTogMCB9LFxuICAgICAgICB7IHg6IC0xLCB5OiAxIH0sXG4gICAgICAgIHsgeDogLTEsIHk6IDEgfVxuICAgIF0sXG4gICAgW1N0YXRlLkpVTVBfVVBdOiBbXG4gICAgICAgIHsgeDogMCwgeTogLTEgfSxcbiAgICAgICAgeyB4OiAwLCB5OiAtMSB9LFxuICAgICAgICB7IHg6IDAsIHk6IDAgfSxcbiAgICAgICAgeyB4OiAwLCB5OiAxIH0sXG4gICAgICAgIHsgeDogMCwgeTogMSB9LFxuICAgICAgICB7IHg6IDAsIHk6IDAgfVxuICAgIF0sXG59O1xuIiwiaW1wb3J0IHsgU3RhdGUsIEpVTVBfRlJBTUVTIH0gZnJvbSAnLi9CZWhhdmlvcic7XG5pbXBvcnQgeyBMRVZFTF9DT0xTIH0gZnJvbSAnLi9Db25zdGFudHMnO1xuXG5leHBvcnQgY2xhc3MgRW50aXR5IHtcbiAgICBhcHBseU1vdmVtZW50KGZpZWxkKSB7XG4gICAgICAgIGxldCByZXBlYXQgPSBmYWxzZTtcblxuICAgICAgICAvLyBUaGlzIG1ldGhvZCBjb250YWlucyBnZW5lcmljIFwibW92ZW1lbnRcIiBhcHBsaWNhdGlvbiBmb3IgYWxsIGVudGl0aWVzLCBpbmNsdWRpbmdcbiAgICAgICAgLy8gTGFkIChwbGF5ZXIpIGFuZCBEZXIgUm9ja3MgKGVuZW1pZXMpLiBUaGluZ3MgbGlrZSBmYWxsaW5nLCBtb3ZpbmcgbGVmdC9yaWdodCwgZXRjLixcbiAgICAgICAgLy8gd29yayB0aGUgc2FtZSBmb3IgYm90aC5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gKFRoZXJlJ3MgYSBidW5jaCBvZiBqdW1wIGxvZ2ljIGluIGhlcmUgdG9vLCBhbmQgbW92aW5nIFVQLCB3aGljaCByZWFsbHkgb25seSBhcHBsaWVzXG4gICAgICAgIC8vIHRvIHBsYXllcnMsIGJ1dCB0aGF0J3MgT0sgLS0gRGVyIFJvY2tzIGp1c3Qgd29uJ3QgYXR0ZW1wdCB0aG9zZSBhY3Rpb25zLilcblxuICAgICAgICBpZiAodGhpcy5uZXh0U3RhdGUpIHtcbiAgICAgICAgICAgIHN3aXRjaCAodGhpcy5zdGF0ZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgU3RhdGUuU1RPUFBFRDpcbiAgICAgICAgICAgICAgICBjYXNlIFN0YXRlLkxFRlQ6XG4gICAgICAgICAgICAgICAgY2FzZSBTdGF0ZS5SSUdIVDpcbiAgICAgICAgICAgICAgICAgICAgaWYgKFtTdGF0ZS5MRUZULCBTdGF0ZS5SSUdIVCwgU3RhdGUuU1RPUFBFRF0uaW5jbHVkZXModGhpcy5uZXh0U3RhdGUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlID0gdGhpcy5uZXh0U3RhdGU7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5leHRTdGF0ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGNhc2UgU3RhdGUuVVA6XG4gICAgICAgICAgICAgICAgY2FzZSBTdGF0ZS5ET1dOOlxuICAgICAgICAgICAgICAgICAgICAvLyBOb3JtYWxcbiAgICAgICAgICAgICAgICAgICAgaWYgKFtTdGF0ZS5MRUZULCBTdGF0ZS5SSUdIVF0uaW5jbHVkZXModGhpcy5uZXh0U3RhdGUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlID0gdGhpcy5uZXh0U3RhdGU7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5leHRTdGF0ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLm5leHRTdGF0ZSA9PT0gU3RhdGUuU1RBUlRfSlVNUCkge1xuICAgICAgICAgICAgLy8gU3BlY2lhbCBjYXNlOiB0aGUgdXNlciB3YW50cyB0byBqdW1wIVxuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vIElmIHRoZSBwbGF5ZXIgaXMgc3RhbmRpbmcgb24gc29tZXRoaW5nIHNvbGlkLCB3ZSBpbml0aWF0ZSBhIGp1bXAgYmFzZWQgb24gdGhlIGN1cnJlbnRcbiAgICAgICAgICAgIC8vIG1vdmVtZW50IG9mIHRoZSBwbGF5ZXIuIElmIG5vdCwgd2UgKHNvcnQgb2YpIGlnbm9yZSB0aGUgcmVxdWVzdCB0byBqdW1wLi4uIGFsdGhvdWdoXG4gICAgICAgICAgICAvLyBpdCBkb2VzIHN1YnRseSBjaGFuZ2UgdGhlIGJlaGF2aW9yIHVwb24gbGFuZGluZy5cbiAgICAgICAgICAgIGlmIChmaWVsZC5vblNvbGlkKHRoaXMueCwgdGhpcy55KSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlID09PSBTdGF0ZS5TVE9QUEVEIHx8IHRoaXMuc3RhdGUgPT09IFN0YXRlLkZBTExJTkcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFN0YXRlLkpVTVBfVVA7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuanVtcFN0ZXAgPSAwO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm5leHRTdGF0ZSA9IFN0YXRlLlNUT1BQRUQ7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnN0YXRlID09PSBTdGF0ZS5MRUZUIHx8IHRoaXMuc3RhdGUgPT09IFN0YXRlLkpVTVBfTEVGVCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlID0gU3RhdGUuSlVNUF9MRUZUO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmp1bXBTdGVwID0gMDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0U3RhdGUgPSBTdGF0ZS5MRUZUO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0ZSA9PT0gU3RhdGUuUklHSFQgfHwgdGhpcy5zdGF0ZSA9PT0gU3RhdGUuSlVNUF9SSUdIVCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlID0gU3RhdGUuSlVNUF9SSUdIVDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5qdW1wU3RlcCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmV4dFN0YXRlID0gU3RhdGUuUklHSFQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGF0ZSA9PT0gU3RhdGUuSlVNUF9VUCB8fCB0aGlzLnN0YXRlID09PSBTdGF0ZS5GQUxMSU5HKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmV4dFN0YXRlID0gU3RhdGUuU1RPUFBFRDtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc3RhdGUgPT09IFN0YXRlLkpVTVBfUklHSFQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0U3RhdGUgPSBTdGF0ZS5SSUdIVDtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc3RhdGUgPT09IFN0YXRlLkpVTVBfTEVGVCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm5leHRTdGF0ZSA9IFN0YXRlLkxFRlQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMubmV4dFN0YXRlID09PSBTdGF0ZS5VUCAmJiBmaWVsZC5pc0xhZGRlcih0aGlzLngsIHRoaXMueSkpIHtcbiAgICAgICAgICAgIC8vIFNwZWNpYWwgY2FzZTogdGhlIHVzZXIgd2FudHMgdG8gZ28gdXAhXG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gSWYgdGhlIHVzZXIgaXMgb24gYSBsYWRkZXIsIHdlIGNhbiBzdGFydCBhc2NlbmRpbmcuIE5vdGUgdGhhdCBpZiB0aGUgdXNlciBpcyBub3RcbiAgICAgICAgICAgIC8vIG9uIGEgbGFkZGVyIHdlIGlnbm9yZSB0aGVpciBpbnB1dCwgd2hpY2ggaXMgaW50ZW50aW9uYWwgLS0gdGhpcyBhbGxvd3MgcXVldWVkXG4gICAgICAgICAgICAvLyAocGFjbWFuKSBpbnB1dCwgd2hlcmUgd2UgY2FuIHRhcCBVUCBhIGxpdHRsZSBiZWZvcmUgcmVhY2hpbmcgdGhlIGxhZGRlci5cbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTdGF0ZS5VUDtcbiAgICAgICAgICAgIHRoaXMubmV4dFN0YXRlID0gdW5kZWZpbmVkO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMubmV4dFN0YXRlID09PSBTdGF0ZS5ET1dOICYmIChmaWVsZC5pc0xhZGRlcih0aGlzLngsIHRoaXMueSkgfHwgZmllbGQuaXNMYWRkZXIodGhpcy54LCB0aGlzLnkgKyAxKSkpIHtcbiAgICAgICAgICAgIC8vIFNwZWNpYWwgY2FzZTogdGhlIHBsYXllciB3YW50cyB0byBnbyBkb3duIVxuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vIElmIHRoZSBwbGF5ZXIgaXMgb24gKG9yIGFib3ZlKSBhIGxhZGRlciwgd2UgY2FuIHN0YXJ0IGRlc2NlbmRpbmcuIE5vdGUgdGhhdCBpZiB0aGUgcGxheWVyIGlzIG5vdFxuICAgICAgICAgICAgLy8gb24gYSBsYWRkZXIgd2UgaWdub3JlIHRoZWlyIGlucHV0LCB3aGljaCBpcyBpbnRlbnRpb25hbCAtLSB0aGlzIGFsbG93cyBxdWV1ZWRcbiAgICAgICAgICAgIC8vIChwYWNtYW4pIGlucHV0LCB3aGVyZSB3ZSBjYW4gdGFwIERPV04gYSBsaXR0bGUgYmVmb3JlIHJlYWNoaW5nIHRoZSBsYWRkZXIuXG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gU3RhdGUuRE9XTjtcbiAgICAgICAgICAgIHRoaXMubmV4dFN0YXRlID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG5cbiAgICAgICAgc3dpdGNoICh0aGlzLnN0YXRlKSB7XG4gICAgICAgICAgICBjYXNlIFN0YXRlLkxFRlQ6XG4gICAgICAgICAgICAgICAgaWYgKCFmaWVsZC5vblNvbGlkKHRoaXMueCwgdGhpcy55KSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm5leHRTdGF0ZSA9IFN0YXRlLkxFRlQ7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTdGF0ZS5GQUxMSU5HO1xuICAgICAgICAgICAgICAgICAgICByZXBlYXQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGZpZWxkLmVtcHR5U3BhY2UodGhpcy54IC0gMSwgdGhpcy55KSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLngtLTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm5leHRTdGF0ZSA9IFN0YXRlLlNUT1BQRUQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIFN0YXRlLlJJR0hUOlxuICAgICAgICAgICAgICAgIGlmICghZmllbGQub25Tb2xpZCh0aGlzLngsIHRoaXMueSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0U3RhdGUgPSBTdGF0ZS5SSUdIVDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFN0YXRlLkZBTExJTkc7XG4gICAgICAgICAgICAgICAgICAgIHJlcGVhdCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZmllbGQuZW1wdHlTcGFjZSh0aGlzLnggKyAxLCB0aGlzLnkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMueCsrO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmV4dFN0YXRlID0gU3RhdGUuU1RPUFBFRDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgU3RhdGUuVVA6XG4gICAgICAgICAgICAgICAgaWYgKGZpZWxkLmNhbkNsaW1iVXAodGhpcy54LCB0aGlzLnkgLSAxKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnktLTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlID0gU3RhdGUuU1RPUFBFRDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgU3RhdGUuRE9XTjpcbiAgICAgICAgICAgICAgICBpZiAoZmllbGQuY2FuQ2xpbWJEb3duKHRoaXMueCwgdGhpcy55ICsgMSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy55Kys7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFN0YXRlLlNUT1BQRUQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIFN0YXRlLkpVTVBfUklHSFQ6XG4gICAgICAgICAgICBjYXNlIFN0YXRlLkpVTVBfTEVGVDpcbiAgICAgICAgICAgIGNhc2UgU3RhdGUuSlVNUF9VUDpcbiAgICAgICAgICAgICAgICBsZXQgc3RlcCA9IEpVTVBfRlJBTUVTW3RoaXMuc3RhdGVdW3RoaXMuanVtcFN0ZXBdO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFsnanVtcCcsIHRoaXMuc3RhdGUsIHRoaXMuanVtcFN0ZXAsIHN0ZXBdKTtcbiAgICAgICAgICAgICAgICBpZiAoKHRoaXMueCArIHN0ZXAueCA+PSAwKSAmJiAodGhpcy54ICsgc3RlcC54IDwgTEVWRUxfQ09MUykpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRlcnJhaW4gPSBmaWVsZC5sYXlvdXRbdGhpcy55ICsgc3RlcC55XVt0aGlzLnggKyBzdGVwLnhdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoWyc9JywgJ3wnLCAnLSddLmluY2x1ZGVzKHRlcnJhaW4pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmllbGQub25Tb2xpZCh0aGlzLngsIHRoaXMueSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlID0gdGhpcy5uZXh0U3RhdGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0U3RhdGUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodGhpcy5zdGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFN0YXRlLkpVTVBfUklHSFQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5leHRTdGF0ZSA9IFN0YXRlLlJJR0hUO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgU3RhdGUuSlVNUF9MRUZUOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0U3RhdGUgPSBTdGF0ZS5MRUZUO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgU3RhdGUuSlVNUF9VUDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubmV4dFN0YXRlID0gU3RhdGUuVVA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFN0YXRlLkZBTExJTkc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGVycmFpbiA9PT0gJ0gnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnggKz0gc3RlcC54O1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy55ICs9IHN0ZXAueTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTdGF0ZS5TVE9QUEVEO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0U3RhdGUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnggKz0gc3RlcC54O1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy55ICs9IHN0ZXAueTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuanVtcFN0ZXArKztcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuanVtcFN0ZXAgPj0gSlVNUF9GUkFNRVNbdGhpcy5zdGF0ZV0ubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IHRoaXMubmV4dFN0YXRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubmV4dFN0YXRlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpZWxkLm9uU29saWQodGhpcy54LCB0aGlzLnkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlID0gdGhpcy5uZXh0U3RhdGU7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5leHRTdGF0ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTdGF0ZS5GQUxMSU5HO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0U3RhdGUgPSBTdGF0ZS5TVE9QUEVEO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIFN0YXRlLkZBTExJTkc6XG4gICAgICAgICAgICAgICAgaWYgKGZpZWxkLm9uU29saWQodGhpcy54LCB0aGlzLnkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSB0aGlzLm5leHRTdGF0ZSB8fCBTdGF0ZS5TVE9QUEVEO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMueSsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIElmIHdlIHdlcmUgYXR0ZW1wdGluZyB0byBtb3ZlIHNvbWV3aGVyZSBhbmQgcmVhbGl6ZWQgd2Ugc2hvdWxkIGJlIGZhbGxpbmcgaW5zdGVhZCxcbiAgICAgICAgLy8gd2Ugd2FudCB0byByZS1ydW4gdGhlIGVudGlyZSBhbGdvcml0aG0gb25jZS4gVGhpcyBhdm9pZHMgd2hhdCBib2lscyBkb3duIHRvIGEgXCJza2lwcGVkXG4gICAgICAgIC8vIGZyYW1lXCIgZnJvbSB0aGUgdXNlcidzIHBvaW50IG9mIHZpZXcuXG4gICAgICAgIGlmIChyZXBlYXQpIHJldHVybiB0aGlzLmFwcGx5TW92ZW1lbnQoZmllbGQpO1xuICAgIH1cbn1cbiIsIid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHsgU3ByaXRlIH0gZnJvbSAnLi9TcHJpdGUnO1xuaW1wb3J0IHsgU3RhdGUsIEpVTVBfRlJBTUVTIH0gZnJvbSAnLi9CZWhhdmlvcic7XG5pbXBvcnQgeyBJbnB1dCB9IGZyb20gJy4vSW5wdXQnO1xuaW1wb3J0IHsgVGV4dCB9IGZyb20gJy4vVGV4dCc7XG5pbXBvcnQgeyBMRVZFTF9ST1dTLCBMRVZFTF9DT0xTIH0gZnJvbSAnLi9Db25zdGFudHMnO1xuaW1wb3J0IHsgRW50aXR5IH0gZnJvbSAnLi9FbnRpdHknO1xuaW1wb3J0IHsgU2NyZWVuIH0gZnJvbSAnLi9TY3JlZW4nO1xuaW1wb3J0IHsgZ2FtZSB9IGZyb20gJy4vR2FtZSc7XG5cbmNvbnN0IERFQVRIX0ZSQU1FUyA9IFsncCcsICdwJywgJ2InLCAnZCcsICdkJywgJ3EnLCAncCcsICdwJywgJ2InLCAnZCcsICdkJywgJ3EnLCAnLScsICctJywgJ18nLCAnXycsICdfJywgJ18nLCAnXyddO1xuXG4vKipcbiAqIFBsYXllclxuICovXG5leHBvcnQgY2xhc3MgUGxheWVyIGV4dGVuZHMgRW50aXR5IHtcbiAgICBjb25zdHJ1Y3Rvcih4LCB5KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMueCA9IHg7XG4gICAgICAgIHRoaXMueSA9IHk7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBTdGF0ZS5TVE9QUEVEO1xuICAgICAgICB0aGlzLm5leHRTdGF0ZSA9IFN0YXRlLlNUT1BQRUQ7XG4gICAgICAgIHRoaXMuanVtcFN0ZXAgPSAwO1xuICAgICAgICB0aGlzLmRlYXRoU3RlcCA9IDA7XG4gICAgICAgIGNvbnNvbGUubG9nKCdwbGF5ZXIgY29uc3RydWN0ZWQnLCB4LCB5KTtcbiAgICB9XG5cbiAgICB1cGRhdGUoZmllbGQsIG1vdmVGcmFtZSkge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZSA9PT0gU3RhdGUuRFlJTkcpIHtcbiAgICAgICAgICAgIHRoaXMuZGVhdGhTdGVwKys7XG4gICAgICAgICAgICBpZiAodGhpcy5kZWF0aFN0ZXAgPj0gREVBVEhfRlJBTUVTLmxlbmd0aCkgdGhpcy5zdGF0ZSA9IFN0YXRlLkRFQUQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5zdGF0ZSA9PT0gU3RhdGUuRFlJTkcgfHwgdGhpcy5zdGF0ZSA9PT0gU3RhdGUuREVBRCkgcmV0dXJuO1xuXG4gICAgICAgIGlmICghbW92ZUZyYW1lKSByZXR1cm47XG5cbiAgICAgICAgbGV0IGFjdGlvbiA9IElucHV0Lmxhc3RBY3Rpb25QcmVzc2VkKCk7XG5cbiAgICAgICAgaWYgKGFjdGlvbiA9PT0gSW5wdXQuQWN0aW9uLkxFRlQpIHtcbiAgICAgICAgICAgIHRoaXMubmV4dFN0YXRlID0gU3RhdGUuTEVGVDtcbiAgICAgICAgICAgIElucHV0LmNvbnN1bWUoKTtcbiAgICAgICAgfSBlbHNlIGlmIChhY3Rpb24gPT09IElucHV0LkFjdGlvbi5SSUdIVCkge1xuICAgICAgICAgICAgdGhpcy5uZXh0U3RhdGUgPSBTdGF0ZS5SSUdIVDtcbiAgICAgICAgICAgIElucHV0LmNvbnN1bWUoKTtcbiAgICAgICAgfSBlbHNlIGlmIChhY3Rpb24gPT09IElucHV0LkFjdGlvbi5VUCkge1xuICAgICAgICAgICAgdGhpcy5uZXh0U3RhdGUgPSBTdGF0ZS5VUDtcbiAgICAgICAgICAgIElucHV0LmNvbnN1bWUoKTtcbiAgICAgICAgfSBlbHNlIGlmIChhY3Rpb24gPT09IElucHV0LkFjdGlvbi5ET1dOKSB7XG4gICAgICAgICAgICB0aGlzLm5leHRTdGF0ZSA9IFN0YXRlLkRPV047XG4gICAgICAgICAgICBJbnB1dC5jb25zdW1lKCk7XG4gICAgICAgIH0gZWxzZSBpZiAoYWN0aW9uID09PSBJbnB1dC5BY3Rpb24uSlVNUCkge1xuICAgICAgICAgICAgdGhpcy5uZXh0U3RhdGUgPSBTdGF0ZS5TVEFSVF9KVU1QO1xuICAgICAgICAgICAgSW5wdXQuY29uc3VtZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuYXBwbHlNb3ZlbWVudChmaWVsZCk7XG4gICAgfVxuXG4gICAgZHJhdygpIHtcbiAgICAgICAgbGV0IGNoYXIgPSAnZyc7XG5cbiAgICAgICAgc3dpdGNoICh0aGlzLnN0YXRlKSB7XG4gICAgICAgICAgICBjYXNlIFN0YXRlLlJJR0hUOlxuICAgICAgICAgICAgY2FzZSBTdGF0ZS5KVU1QX1JJR0hUOlxuICAgICAgICAgICAgY2FzZSBTdGF0ZS5VUDpcbiAgICAgICAgICAgIGNhc2UgU3RhdGUuRE9XTjpcbiAgICAgICAgICAgICAgICBjaGFyID0gJ3AnO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIFN0YXRlLkxFRlQ6XG4gICAgICAgICAgICBjYXNlIFN0YXRlLkpVTVBfTEVGVDpcbiAgICAgICAgICAgICAgICBjaGFyID0gJ3EnO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIFN0YXRlLkZBTExJTkc6XG4gICAgICAgICAgICAgICAgY2hhciA9ICdiJztcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSBTdGF0ZS5EWUlORzpcbiAgICAgICAgICAgICAgICBjaGFyID0gREVBVEhfRlJBTUVTW3RoaXMuZGVhdGhTdGVwXTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSBTdGF0ZS5ERUFEOlxuICAgICAgICAgICAgICAgIGNoYXIgPSAnXyc7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICBTY3JlZW4ud3JpdGUodGhpcy54LCB0aGlzLnksIGNoYXIpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IFRleHQgfSBmcm9tICcuL1RleHQnO1xuaW1wb3J0IHsgU3RhdGUgfSBmcm9tICcuL0JlaGF2aW9yJztcbmltcG9ydCB7IExFVkVMX0NPTFMgfSBmcm9tICcuL0NvbnN0YW50cyc7XG5pbXBvcnQgeyBFbnRpdHkgfSBmcm9tICcuL0VudGl0eSc7XG5pbXBvcnQgeyBTY3JlZW4gfSBmcm9tICcuL1NjcmVlbic7XG5pbXBvcnQgeyBnYW1lIH0gZnJvbSAnLi9HYW1lJztcblxuY29uc3QgREVBVEhfRlJBTUVTID0gWyd7JywgJ30nLCAnKCcsICcpJywgJyUnLCAnJScsICc6JywgJzonXTtcblxuZXhwb3J0IGNsYXNzIFJvY2sgZXh0ZW5kcyBFbnRpdHkge1xuICAgIGNvbnN0cnVjdG9yKGRpc3BlbnNlcikge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnggPSBkaXNwZW5zZXIueDtcbiAgICAgICAgdGhpcy55ID0gZGlzcGVuc2VyLnk7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBTdGF0ZS5GQUxMSU5HO1xuICAgICAgICB0aGlzLm5leHRTdGF0ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5kZWF0aFN0ZXAgPSAwO1xuICAgIH1cblxuICAgIHVwZGF0ZShmaWVsZCwgbW92ZUZyYW1lKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlID09PSBTdGF0ZS5EWUlORykge1xuICAgICAgICAgICAgdGhpcy5kZWF0aFN0ZXArKztcbiAgICAgICAgICAgIGlmICh0aGlzLmRlYXRoU3RlcCA+PSBERUFUSF9GUkFNRVMubGVuZ3RoKSB0aGlzLnN0YXRlID0gU3RhdGUuREVBRDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnN0YXRlID09PSBTdGF0ZS5EWUlORyB8fCB0aGlzLnN0YXRlID09PSBTdGF0ZS5ERUFEKSByZXR1cm47XG5cbiAgICAgICAgaWYgKCFtb3ZlRnJhbWUpIHJldHVybjtcblxuICAgICAgICBpZiAodGhpcy5zdGF0ZSA9PT0gU3RhdGUuU1RPUFBFRCkge1xuICAgICAgICAgICAgaWYgKHRoaXMueCA9PT0gMCB8fCAhZmllbGQuZW1wdHlTcGFjZSh0aGlzLnggLSAxLCB0aGlzLnkpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5uZXh0U3RhdGUgPSBTdGF0ZS5SSUdIVDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy54ID09PSBMRVZFTF9DT0xTIC0gMSB8fCAhZmllbGQuZW1wdHlTcGFjZSh0aGlzLnggKyAxLCB0aGlzLnkpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5uZXh0U3RhdGUgPSBTdGF0ZS5MRUZUO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLm5leHRTdGF0ZSA9IE1hdGgucmFuZG9tKCkgPiAwLjUgPyBTdGF0ZS5MRUZUIDogU3RhdGUuUklHSFQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy54ID09PSAwICYmIHRoaXMuc3RhdGUgPT09IFN0YXRlLkxFRlQpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTdGF0ZS5SSUdIVDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnggPT09IExFVkVMX0NPTFMgLSAxICYmIHRoaXMuc3RhdGUgPT09IFN0YXRlLlJJR0hUKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gU3RhdGUuTEVGVDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnN0YXRlICE9PSBTdGF0ZS5GQUxMSU5HICYmICFmaWVsZC5vblNvbGlkKHRoaXMueCwgdGhpcy55KSkge1xuICAgICAgICAgICAgdGhpcy5uZXh0U3RhdGUgPSBTdGF0ZS5GQUxMSU5HO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZpZWxkLmlzTGFkZGVyKHRoaXMueCwgdGhpcy55ICsgMSkgJiYgW1N0YXRlLkxFRlQsIFN0YXRlLlJJR0hUXS5pbmNsdWRlcyh0aGlzLnN0YXRlKSkge1xuICAgICAgICAgICAgbGV0IHIgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA0KTtcbiAgICAgICAgICAgIHRoaXMubmV4dFN0YXRlID0gW1N0YXRlLkxFRlQsIFN0YXRlLlJJR0hULCBTdGF0ZS5ET1dOLCBTdGF0ZS5ET1dOXVtyXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChmaWVsZC5pc0VhdGVyKHRoaXMueCwgdGhpcy55KSkge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFN0YXRlLkRZSU5HO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5hcHBseU1vdmVtZW50KGZpZWxkKTtcbiAgICB9XG5cbiAgICBkcmF3KCkge1xuICAgICAgICBsZXQgY2hhciA9ICdvJztcblxuICAgICAgICBzd2l0Y2ggKHRoaXMuc3RhdGUpIHtcbiAgICAgICAgICAgIGNhc2UgU3RhdGUuRFlJTkc6XG4gICAgICAgICAgICAgICAgY2hhciA9IERFQVRIX0ZSQU1FU1t0aGlzLmRlYXRoU3RlcF07XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFN0YXRlLkRFQUQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgU2NyZWVuLndyaXRlKHRoaXMueCwgdGhpcy55LCBjaGFyKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBMRVZFTF9ST1dTLCBMRVZFTF9DT0xTIH0gZnJvbSAnLi9Db25zdGFudHMnO1xuaW1wb3J0IExldmVsRGF0YSBmcm9tICcuLi9sZXZlbHMvbGV2ZWxzLmpzb24nO1xuXG5leHBvcnQgY29uc3QgTGV2ZWwgPSB7XG4gICAgTEVWRUxTOiBMZXZlbERhdGEsXG4gICAgTEVWRUxfQ09VTlQ6IExldmVsRGF0YS5sZW5ndGgsXG5cbiAgICBsb2FkKGxldmVsTnVtYmVyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKExldmVsLkxFVkVMUyk7XG4gICAgICAgIC8vIEFzIHRoZSBwbGF5ZXIga2VlcHMgcGxheWluZywgbGV2ZWwgbnVtYmVycyB3aWxsIGxvb3AgYXJvdW5kIHRvIGJlZ2lubmluZ1xuICAgICAgICBsZXQgbGV2ZWwgPSBMZXZlbC5MRVZFTFNbbGV2ZWxOdW1iZXIgJSBMZXZlbC5MRVZFTFMubGVuZ3RoXTtcbiAgICAgICAgaWYgKCFsZXZlbCkgdGhyb3cgbmV3IEVycm9yKGBObyBzdWNoIGxldmVsIG51bWJlcjogJHtsZXZlbE51bWJlcn1gKTtcblxuICAgICAgICAvLyBQZXJmb3JtIHNvbWUgc2FuaXR5IGNoZWNrcyBvbiB0aGUgbGV2ZWwgbGF5b3V0IGFuZCBleHRyYWN0IHVzZWZ1bCBpbmZvXG4gICAgICAgIC8vIGxpa2UgcGxheWVyIHN0YXJ0IHBvc2l0aW9uIGFuZCBkaXNwZW5zZXIgcG9zaXRpb25zIGV0Yy5cblxuICAgICAgICBsZXQgbGF5b3V0ID0gbGV2ZWwubGF5b3V0Lm1hcChyb3cgPT4gcm93LnNwbGl0KCcnKSk7XG4gICAgICAgIGxldCBkaXNwZW5zZXJzID0gW107XG4gICAgICAgIGxldCBwbGF5ZXI7XG5cbiAgICAgICAgLy8gU2FuaXR5IGNoZWNrXG4gICAgICAgIGxheW91dCA9IGxheW91dC5zbGljZSgwLCBMRVZFTF9ST1dTKTtcblxuICAgICAgICBmb3IgKGxldCB5ID0gMDsgeSA8IExFVkVMX1JPV1M7IHkrKykge1xuICAgICAgICAgICAgLy8gU2FuaXR5IGNoZWNrc1xuICAgICAgICAgICAgaWYgKCFsYXlvdXRbeV0pIGxheW91dFt5XSA9IFtdO1xuICAgICAgICAgICAgbGF5b3V0W3ldID0gbGF5b3V0W3ldLnNsaWNlKDAsIExFVkVMX0NPTFMpO1xuXG4gICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IExFVkVMX0NPTFM7IHgrKykge1xuICAgICAgICAgICAgICAgIC8vIFNhbml0eSBjaGVja1xuICAgICAgICAgICAgICAgIGlmICghbGF5b3V0W3ldW3hdKSBsYXlvdXRbeV1beF0gPSAnICc7XG5cbiAgICAgICAgICAgICAgICAvLyBEZXIgRGlzcGVuc2VycyAoVikgYW5kIERlciBFYXRlcnMgKCopIGhhdmUgYmVoYXZpb3JzLCBzbyBpdCBpcyBjb252ZW5pZW50IGZvciB1c1xuICAgICAgICAgICAgICAgIC8vIHRvIGNvbnN0cnVjdCBhIGxpc3Qgb2YgdGhlbSwgYnV0IHRoZXkgYXJlIHBlcm1hbmVudCBwYXJ0cyBvZiB0aGUgbGF5b3V0LCBzbyB3ZSBjYW5cbiAgICAgICAgICAgICAgICAvLyBsZWF2ZSB0aGVtIGFzIHBhcnQgb2YgdGhlIGxldmVsIGFuZCBkcmF3IHRoZW0gbm9ybWFsbHkuXG5cbiAgICAgICAgICAgICAgICBpZiAobGF5b3V0W3ldW3hdID09PSAnVicpIHtcbiAgICAgICAgICAgICAgICAgICAgZGlzcGVuc2Vycy5wdXNoKHsgeCwgeSB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBUcmVhc3VyZSAoJCksIFN0YXR1ZXMgKCYpLCBhbmQgdGhlIExhZCAocCkgYXJlIHRyYW5zaWVudCAtIHRoZSBwbGF5ZXIgbW92ZXMgYXJvdW5kIGFuZFxuICAgICAgICAgICAgICAgIC8vIGNhbiBwaWNrIHVwIHRoZSB0cmVhc3VyZXMgYW5kIHN0YXR1ZXMuIFRoYXQncyB3aHkgZm9yIHRoZXNlIGVsZW1lbnRzLCB3ZSBhZGQgdGhlbSB0b1xuICAgICAgICAgICAgICAgIC8vIG91ciBsaXN0cyBBTkQgd2UgcmVtb3ZlIHRoZW0gZnJvbSB0aGUgXCJwbGF5aW5nIGZpZWxkXCIsIHdlJ2xsIGRyYXcgdGhlbSBzZXBhcmF0ZWx5IG9uXG4gICAgICAgICAgICAgICAgLy8gdG9wIG9mIHRoZSBsYXlvdXQuXG5cbiAgICAgICAgICAgICAgICBpZiAobGF5b3V0W3ldW3hdID09PSAncCcpIHtcbiAgICAgICAgICAgICAgICAgICAgbGF5b3V0W3ldW3hdID0gJyAnO1xuICAgICAgICAgICAgICAgICAgICBwbGF5ZXIgPSB7IHgsIHkgfTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBFdmVyeXRoaW5nIGVsc2UsIGxpa2UgZmxvb3JzICg9KSwgd2FsbHMgKHwpLCBsYWRkZXJzIChIKSBhbmQgZmlyZSAoXiksIGlzIHBhcnQgb2YgdGhlXG4gICAgICAgICAgICAgICAgLy8gbGF5b3V0LiBUaGUgTGFkIGludGVyYWN0cyB3aXRoIHRoZW0sIGJ1dCB3ZSBjYW4gaGFuZGxlIHRoYXQgZHVyaW5nIG91ciBtb3ZlbWVudCBjaGVja3MuXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmFtZTogbGV2ZWwubmFtZSxcbiAgICAgICAgICAgIHRpbWU6IGxldmVsLnRpbWUsXG4gICAgICAgICAgICBtYXhSb2NrczogbGV2ZWwubWFScm9ja3MsXG4gICAgICAgICAgICBsYXlvdXQsXG4gICAgICAgICAgICBkaXNwZW5zZXJzLFxuICAgICAgICAgICAgcGxheWVyXG4gICAgICAgIH07XG4gICAgfVxufTtcbiIsImltcG9ydCB7IFRleHQgfSBmcm9tICcuL1RleHQnO1xuaW1wb3J0IHsgUGxheWVyIH0gZnJvbSAnLi9QbGF5ZXInO1xuaW1wb3J0IHsgUm9jayB9IGZyb20gJy4vUm9jayc7XG5pbXBvcnQgeyBMRVZFTF9DT0xTLCBMRVZFTF9ST1dTLCBTQ09SRV9ST0NLLCBTQ09SRV9TVEFUVUUsIFNDT1JFX1RSRUFTVVJFIH0gZnJvbSAnLi9Db25zdGFudHMnO1xuaW1wb3J0IHsgZ2FtZSB9IGZyb20gJy4vR2FtZSc7XG5pbXBvcnQgeyBTdGF0ZSB9IGZyb20gJy4vQmVoYXZpb3InO1xuaW1wb3J0IHsgU2NyZWVuIH0gZnJvbSAnLi9TY3JlZW4nO1xuaW1wb3J0IHsgTGV2ZWwgfSBmcm9tICcuL0xldmVsJztcblxuLyoqXG4gKiBGaWVsZFxuICpcbiAqIFRoZSBcImZpZWxkXCIgcmVwcmVzZW50cyB0aGUgY3VycmVudCBsZXZlbCwgb3IsIFwicGxheWluZyBmaWVsZFwiLiBBIG5ldyBwbGF5aW5nIGZpZWxkIGlzIGNyZWF0ZWRcbiAqIGV2ZXJ5IHRpbWUgeW91IHN0YXJ0IGEgbGV2ZWwsIHNvIHdlIGF0dGFjaCBldmVyeXRoaW5nIGFib3V0IHRoZSBjdXJyZW50bHkgcGxheWVkIGxldmVsIHRvXG4gKiB0aGUgZmllbGQgLS0gcG9zaXRpb25zIG9mIHRyZWFzdXJlLCB0aGUgcGxheWVyLCB2aWN0b3J5IGNvbmRpdGlvbnMsIGV0Yy5cbiAqL1xuZXhwb3J0IGNsYXNzIEZpZWxkIHtcbiAgICBjb25zdHJ1Y3RvcihsZXZlbE51bWJlcikge1xuICAgICAgICBsZXQgbGV2ZWwgPSBMZXZlbC5sb2FkKGxldmVsTnVtYmVyKTtcblxuICAgICAgICB0aGlzLmxheW91dCA9IGxldmVsLmxheW91dDtcbiAgICAgICAgdGhpcy5kaXNwZW5zZXJzID0gbGV2ZWwuZGlzcGVuc2VycztcbiAgICAgICAgdGhpcy50aW1lID0gbGV2ZWwudGltZTtcbiAgICAgICAgdGhpcy5tYXhSb2NrcyA9IGxldmVsLnJvY2tzO1xuICAgICAgICB0aGlzLnJvY2tzID0gW107XG4gICAgICAgIHRoaXMucGxheWVyID0gbmV3IFBsYXllcihsZXZlbC5wbGF5ZXIueCwgbGV2ZWwucGxheWVyLnkpO1xuICAgIH1cblxuICAgIHVwZGF0ZShtb3ZlRnJhbWUpIHtcbiAgICAgICAgbGV0IG9sZFggPSB0aGlzLnBsYXllci54LCBvbGRZID0gdGhpcy5wbGF5ZXIueTtcblxuICAgICAgICAvLyBNb3ZlIHBsYXllciBiYXNlZCBvbiB1c2VyIGlucHV0XG4gICAgICAgIHRoaXMucGxheWVyLnVwZGF0ZSh0aGlzLCBtb3ZlRnJhbWUpO1xuXG4gICAgICAgIGlmIChvbGRYICE9PSB0aGlzLnBsYXllci54ICYmIG9sZFkgPT09IHRoaXMucGxheWVyLnkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzRGlzYXBwZWFyaW5nRmxvb3Iob2xkWCwgb2xkWSArIDEpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sYXlvdXRbb2xkWSArIDFdW29sZFhdID0gJyAnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgcGxheWVyIHNob3VsZCBiZSBkZWFkIChiZWZvcmUgbW92aW5nIHJvY2tzKVxuICAgICAgICBpZiAobW92ZUZyYW1lKSB0aGlzLmNoZWNrSWZQbGF5ZXJTaG91bGREaWUoZ2FtZS5zZXNzaW9uKTtcblxuICAgICAgICAvLyBNb3ZlIHJvY2tzXG4gICAgICAgIGZvciAobGV0IHJvY2sgb2YgdGhpcy5yb2Nrcykgcm9jay51cGRhdGUodGhpcywgbW92ZUZyYW1lKTtcblxuICAgICAgICAvLyBDaGVjayBpZiBwbGF5ZXIgc2hvdWxkIGJlIGRlYWQgKGFmdGVyIG1vdmluZyByb2NrcylcbiAgICAgICAgaWYgKG1vdmVGcmFtZSkgdGhpcy5jaGVja0lmUGxheWVyU2hvdWxkRGllKGdhbWUuc2Vzc2lvbik7XG5cbiAgICAgICAgaWYgKG1vdmVGcmFtZSkge1xuICAgICAgICAgICAgLy8gQ29sbGVjdCBzdGF0dWVzXG4gICAgICAgICAgICBpZiAodGhpcy5pc1N0YXR1ZSh0aGlzLnBsYXllci54LCB0aGlzLnBsYXllci55KSkge1xuICAgICAgICAgICAgICAgIHRoaXMubGF5b3V0W3RoaXMucGxheWVyLnldW3RoaXMucGxheWVyLnhdID0gJyAnO1xuICAgICAgICAgICAgICAgIGdhbWUuc2Vzc2lvbi51cGRhdGVTY29yZShTQ09SRV9TVEFUVUUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBDb2xsZWN0IHRyZWFzdXJlIChlbmRzIHRoZSBjdXJyZW50IGxldmVsKVxuICAgICAgICAgICAgaWYgKHRoaXMuaXNUcmVhc3VyZSh0aGlzLnBsYXllci54LCB0aGlzLnBsYXllci55KSkge1xuICAgICAgICAgICAgICAgIGdhbWUuc2Vzc2lvbi5zdGFydE5leHRMZXZlbCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBJbnRlcmFjdCB3aXRoIHRyYW1wb2xpbmVzXG4gICAgICAgICAgICBpZiAodGhpcy5pc1RyYW1wb2xpbmUodGhpcy5wbGF5ZXIueCwgdGhpcy5wbGF5ZXIueSkpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGxheWVyLnN0YXRlID0gU3RhdGUuTEVGVDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGxheWVyLm5leHRTdGF0ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsYXllci5zdGF0ZSA9IFN0YXRlLlJJR0hUO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXIubmV4dFN0YXRlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGxheWVyLnN0YXRlID0gU3RhdGUuSlVNUF9VUDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGxheWVyLm5leHRTdGF0ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGxheWVyLmp1bXBTdGVwID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsYXllci5zdGF0ZSA9IFN0YXRlLkpVTVBfTEVGVDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGxheWVyLm5leHRTdGF0ZSA9IFN0YXRlLkxFRlQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsYXllci5qdW1wU3RlcCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXIuc3RhdGUgPSBTdGF0ZS5KVU1QX1JJR0hUO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXIubmV4dFN0YXRlID0gU3RhdGUuUklHSFQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsYXllci5qdW1wU3RlcCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIERpc3BlbnNlIG5ldyByb2Nrc1xuICAgICAgICAgICAgaWYgKHRoaXMucm9ja3MubGVuZ3RoIDwgMyAmJiBNYXRoLnJhbmRvbSgpID4gMC45KSB7XG4gICAgICAgICAgICAgICAgbGV0IGRpc3BlbnNlciA9IHRoaXMuZGlzcGVuc2Vyc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB0aGlzLmRpc3BlbnNlcnMubGVuZ3RoKV07XG4gICAgICAgICAgICAgICAgdGhpcy5yb2Nrcy5wdXNoKG5ldyBSb2NrKGRpc3BlbnNlcikpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBLaWxsIGRlYWQgcm9ja3NcbiAgICAgICAgICAgIHRoaXMucm9ja3MgPSB0aGlzLnJvY2tzLmZpbHRlcihyb2NrID0+IHJvY2suc3RhdGUgIT09IFN0YXRlLkRFQUQpO1xuXG4gICAgICAgICAgICAvLyBLaWxsIHBsYXllclxuICAgICAgICAgICAgaWYgKHRoaXMucGxheWVyLnN0YXRlID09PSBTdGF0ZS5ERUFEKSB7XG4gICAgICAgICAgICAgICAgZ2FtZS5zZXNzaW9uLnJlc3RhcnRMZXZlbCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZHJhdygpIHtcbiAgICAgICAgLy8gRHJhdyBsYXlvdXRcbiAgICAgICAgU2NyZWVuLndyaXRlKDAsIDAsIHRoaXMubGF5b3V0Lm1hcChyb3cgPT4gcm93LmpvaW4oJycpKSk7XG5cbiAgICAgICAgLy8gRHJhdyBwbGF5ZXJcbiAgICAgICAgdGhpcy5wbGF5ZXIuZHJhdygpO1xuXG4gICAgICAgIC8vIERyYXcgcm9ja3NcbiAgICAgICAgdGhpcy5yb2Nrcy5mb3JFYWNoKHJvY2sgPT4gcm9jay5kcmF3KCkpO1xuICAgIH1cblxuICAgIG9uU29saWQoeCwgeSkge1xuICAgICAgICByZXR1cm4gWyc9JywgJy0nLCAnSCcsICd8J10uaW5jbHVkZXModGhpcy5sYXlvdXRbeSArIDFdW3hdKSB8fCB0aGlzLmxheW91dFt5XVt4XSA9PT0gJ0gnO1xuICAgIH1cblxuICAgIGVtcHR5U3BhY2UoeCwgeSkge1xuICAgICAgICBpZiAoeCA8IDAgfHwgeCA+PSBMRVZFTF9DT0xTKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gIVsnfCcsICc9J10uaW5jbHVkZXModGhpcy5sYXlvdXRbeV1beF0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaXNMYWRkZXIoeCwgeSkge1xuICAgICAgICByZXR1cm4gdGhpcy5sYXlvdXRbeV1beF0gPT09ICdIJztcbiAgICB9XG5cbiAgICBpc1N0YXR1ZSh4LCB5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxheW91dFt5XVt4XSA9PT0gJyYnO1xuICAgIH1cblxuICAgIGlzVHJlYXN1cmUoeCwgeSkge1xuICAgICAgICByZXR1cm4gdGhpcy5sYXlvdXRbeV1beF0gPT09ICckJztcbiAgICB9XG5cbiAgICBpc1RyYW1wb2xpbmUoeCwgeSkge1xuICAgICAgICByZXR1cm4gdGhpcy5sYXlvdXRbeV1beF0gPT09ICcuJztcbiAgICB9XG5cbiAgICBpc0VhdGVyKHgsIHkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGF5b3V0W3ldW3hdID09PSAnKic7XG4gICAgfVxuXG4gICAgaXNGaXJlKHgsIHkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGF5b3V0W3ldW3hdID09PSAnXic7XG4gICAgfVxuXG4gICAgaXNEaXNhcHBlYXJpbmdGbG9vcih4LCB5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxheW91dFt5XVt4XSA9PT0gJy0nO1xuICAgIH1cblxuICAgIGNhbkNsaW1iVXAoeCwgeSkge1xuICAgICAgICBpZiAoeSA8IDApIHJldHVybiBmYWxzZTtcbiAgICAgICAgcmV0dXJuIFsnSCcsICcmJywgJyQnXS5pbmNsdWRlcyh0aGlzLmxheW91dFt5XVt4XSk7XG4gICAgfVxuXG4gICAgY2FuQ2xpbWJEb3duKHgsIHkpIHtcbiAgICAgICAgcmV0dXJuIFsnSCcsICcmJywgJyQnLCAnICcsICdeJywgJy4nXS5pbmNsdWRlcyh0aGlzLmxheW91dFt5XVt4XSk7XG4gICAgfVxuXG4gICAgY2hlY2tJZlBsYXllclNob3VsZERpZSgpIHtcbiAgICAgICAgaWYgKHRoaXMucGxheWVyLnN0YXRlID09PSBTdGF0ZS5EWUlORyB8fCB0aGlzLnBsYXllci5zdGF0ZSA9PT0gU3RhdGUuREVBRCkgcmV0dXJuO1xuXG4gICAgICAgIGlmICh0aGlzLmlzRmlyZSh0aGlzLnBsYXllci54LCB0aGlzLnBsYXllci55KSkge1xuICAgICAgICAgICAgdGhpcy5wbGF5ZXIuc3RhdGUgPSBTdGF0ZS5EWUlORztcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5yb2Nrcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKHRoaXMucGxheWVyLnggPT09IHRoaXMucm9ja3NbaV0ueCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBsYXllci55ID09PSB0aGlzLnJvY2tzW2ldLnkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXIuc3RhdGUgPSBTdGF0ZS5EWUlORztcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yb2Nrcy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5wbGF5ZXIueSA9PT0gdGhpcy5yb2Nrc1tpXS55IC0gMSAmJiB0aGlzLmVtcHR5U3BhY2UodGhpcy5wbGF5ZXIueCwgdGhpcy5wbGF5ZXIueSArIDEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGdhbWUuc2Vzc2lvbi51cGRhdGVTY29yZShTQ09SRV9ST0NLKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMucGxheWVyLnkgPT09IHRoaXMucm9ja3NbaV0ueSAtIDIgJiYgdGhpcy5lbXB0eVNwYWNlKHRoaXMucGxheWVyLngsIHRoaXMucGxheWVyLnkgKyAxKSAmJiB0aGlzLmVtcHR5U3BhY2UodGhpcy5wbGF5ZXIueCwgdGhpcy5wbGF5ZXIueSArIDIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGdhbWUuc2Vzc2lvbi51cGRhdGVTY29yZShTQ09SRV9ST0NLKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJcbmltcG9ydCB7IFBMQVlfU1BFRURTLCBTQ09SRV9ST0NLLCBTQ09SRV9TVEFUVUUsIFNDT1JFX1RSRUFTVVJFIH0gZnJvbSAnLi9Db25zdGFudHMnO1xuaW1wb3J0IHsgRmllbGQgfSBmcm9tICcuL0ZpZWxkJztcbmltcG9ydCB7IFNjcmVlbiB9IGZyb20gJy4vU2NyZWVuJztcbmltcG9ydCB7IElucHV0IH0gZnJvbSAnLi9JbnB1dCc7XG5pbXBvcnQgeyBnYW1lIH0gZnJvbSAnLi9HYW1lJztcblxuZXhwb3J0IGNsYXNzIFNlc3Npb24ge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnNjb3JlID0gMDtcbiAgICAgICAgdGhpcy5sZXZlbE51bWJlciA9IDA7XG4gICAgICAgIHRoaXMubGV2ZWxDeWNsZSA9IDE7XG4gICAgICAgIHRoaXMubGl2ZXMgPSA1O1xuICAgICAgICB0aGlzLm5leHRMaWZlID0gMTAwO1xuICAgIH1cblxuICAgIHVwZGF0ZSgpIHtcbiAgICAgICAgLy8gVGhlIG92ZXJhbGwgZ2FtZSBsb29wIHJ1bnMgYXQgYSBmaXhlZCA2MCBmcmFtZXMgcGVyIHNlY29uZCwgYnV0IHRoZSBQbGF5IFNwZWVkIHNlbGVjdGVkXG4gICAgICAgIC8vIGF0IHRoZSBtYWluIG1lbnUgY29udHJvbHMgaG93IGZhc3QgdGhlIGdhbWUgcnVucy4gVG8gYWNjb21wbGlzaCB0aGF0LCB3ZSBkbyBhIHNlY29uZFxuICAgICAgICAvLyB0aW1lIGNoZWNrIGhlcmUsIGFuZCB1bmxlc3MgdGhpcyBpcyBhIFwibW92ZSBmcmFtZVwiLCB3ZSBza2lwIGFsbCB0aGUgbG9naWMgcmVsYXRlZCB0b1xuICAgICAgICAvLyBtb3ZpbmcgZW50aXRpZXMuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIFRoaXMgc2V0dXAgYWxsb3dzIHVzIHRvIGhhdmUgdGhpbmdzIGxpa2UgZGVhdGggYW5pbWF0aW9ucyBsb29rIHRoZSBzYW1lIHJlZ2FyZGxlc3Mgb2ZcbiAgICAgICAgLy8gdGhlIFBsYXkgU3BlZWQgc2VsZWN0ZWQuXG4gICAgICAgIGxldCBtb3ZlRnBzID0gUExBWV9TUEVFRFNbZ2FtZS5wbGF5U3BlZWRdO1xuICAgICAgICBsZXQgbm93ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICAgIGxldCBsYXN0RnJhbWUgPSB0aGlzLmxhc3RGcmFtZSB8fCAwO1xuICAgICAgICBsZXQgbW92ZUZyYW1lID0gZmFsc2U7XG5cbiAgICAgICAgaWYgKG5vdyAtIGxhc3RGcmFtZSA+PSAxMDAwIC8gbW92ZUZwcykge1xuICAgICAgICAgICAgbW92ZUZyYW1lID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMubGFzdEZyYW1lID0gbm93O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLmZpZWxkKSB7XG4gICAgICAgICAgICB0aGlzLmZpZWxkID0gbmV3IEZpZWxkKHRoaXMubGV2ZWxOdW1iZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5maWVsZC51cGRhdGUobW92ZUZyYW1lKTtcblxuICAgICAgICBsZXQgcmVjZW50S2V5c3Ryb2tlcyA9IElucHV0LmJ1ZmZlci5tYXAoZXZlbnQgPT4gZXZlbnQua2V5KS5qb2luKCcnKS50b1VwcGVyQ2FzZSgpO1xuXG4gICAgICAgIGlmIChyZWNlbnRLZXlzdHJva2VzLm1hdGNoKC9JRENMRVYoXFxkXFxkKS8pKSB7XG4gICAgICAgICAgICBJbnB1dC5jb25zdW1lKCk7XG4gICAgICAgICAgICB0aGlzLmZpZWxkID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgdGhpcy5sZXZlbE51bWJlciA9IHBhcnNlSW50KFJlZ0V4cC4kMSwgMTApO1xuICAgICAgICB9IGVsc2UgaWYgKHJlY2VudEtleXN0cm9rZXMuaW5jbHVkZXMoXCJJRERRRFwiKSkge1xuICAgICAgICAgICAgSW5wdXQuY29uc3VtZSgpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJnb2QgbW9kZVwiKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGRyYXcoKSB7XG4gICAgICAgIFNjcmVlbi5jbGVhcigpO1xuXG4gICAgICAgIGlmICh0aGlzLmZpZWxkKSB0aGlzLmZpZWxkLmRyYXcoKTtcblxuICAgICAgICBsZXQgc3RhdCA9IFtcbiAgICAgICAgICAgIFN0cmluZyh0aGlzLmxpdmVzKS5wYWRTdGFydCgyLCAnICcpLFxuICAgICAgICAgICAgU3RyaW5nKHRoaXMubGV2ZWxOdW1iZXIgKyAxKS5wYWRTdGFydCgyLCAnICcpLFxuICAgICAgICAgICAgU3RyaW5nKHRoaXMuc2NvcmUpLnBhZFN0YXJ0KDQsICcwJyksXG4gICAgICAgICAgICB0aGlzLmZpZWxkID8gU3RyaW5nKHRoaXMuZmllbGQudGltZSkucGFkU3RhcnQoNCwgJyAnKSA6ICcnXG4gICAgICAgIF07XG4gICAgICAgIFNjcmVlbi53cml0ZSgwLCAyMSwgYExhZHMgICAke3N0YXRbMF19ICAgTGV2ZWwgICAke3N0YXRbMV19ICAgIFNjb3JlICAgJHtzdGF0WzJdfSAgICBCb251cyB0aW1lICAgJHtzdGF0WzNdfWApO1xuICAgIH1cblxuICAgIHJlc3RhcnRMZXZlbCgpIHtcbiAgICAgICAgdGhpcy5maWVsZCA9IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBzdGFydE5leHRMZXZlbCgpIHtcbiAgICAgICAgdGhpcy5maWVsZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5sZXZlbE51bWJlcisrO1xuICAgICAgICBpZiAodGhpcy5sZXZlbE51bWJlciAlIExldmVscy5MRVZFTF9DT1VOVCA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5sZXZlbEN5Y2xlKys7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB1cGRhdGVTY29yZShzY29yZVR5cGUpIHtcbiAgICAgICAgc3dpdGNoIChzY29yZVR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgU0NPUkVfUk9DSzpcbiAgICAgICAgICAgICAgICB0aGlzLnNjb3JlICs9IDI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFNDT1JFX1NUQVRVRTpcbiAgICAgICAgICAgICAgICB0aGlzLnNjb3JlICs9IHRoaXMuZmllbGQudGltZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgU0NPUkVfVFJFQVNVUkU6XG4gICAgICAgICAgICAgICAgLy8gQ2FsbGVkIHJlcGVhdGVkbHkgZHVyaW5nIHRoZSBlbmQtb2YtbGV2ZWwgZXZlbnQuXG4gICAgICAgICAgICAgICAgdGhpcy5zY29yZSArPSAxO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgeyBTcHJpdGUgfSBmcm9tICcuL1Nwcml0ZSc7XG5pbXBvcnQgeyBJbnB1dCB9IGZyb20gJy4vSW5wdXQnO1xuaW1wb3J0IHsgVGV4dCB9IGZyb20gJy4vVGV4dCc7XG5pbXBvcnQgeyBWaWV3cG9ydCB9IGZyb20gJy4vVmlld3BvcnQnO1xuaW1wb3J0IHsgR0FNRV9XSURUSCwgR0FNRV9IRUlHSFQsIFBMQVlfU1BFRURTIH0gZnJvbSAnLi9Db25zdGFudHMnO1xuaW1wb3J0IHsgcmdiYSwgY3JlYXRlQ2FudmFzLCBjbGFtcCwgcGFydGlhbFRleHQsIHV2Mnh5LCB4eTJxciB9IGZyb20gJy4vVXRpbCc7XG5pbXBvcnQgeyBBdWRpbyB9IGZyb20gJy4vQXVkaW8nO1xuaW1wb3J0IHsgU2NyZWVuU2hha2UgfSBmcm9tICcuL1NjcmVlblNoYWtlJztcbmltcG9ydCB7IFNjcmVlbiB9IGZyb20gJy4vU2NyZWVuJztcbmltcG9ydCB7IE1haW5NZW51IH0gZnJvbSAnLi9NYWluTWVudSc7XG5pbXBvcnQgeyBJbnN0cnVjdGlvbnNNZW51IH0gZnJvbSAnLi9JbnN0cnVjdGlvbnNNZW51JztcbmltcG9ydCB7IFNlc3Npb24gfSBmcm9tICcuL1Nlc3Npb24nO1xuXG4vKipcbiAqIEdhbWUgc3RhdGUuXG4gKi9cbmV4cG9ydCBjbGFzcyBHYW1lIHtcbiAgICBpbml0KCkge1xuICAgICAgICBTcHJpdGUubG9hZFNwcml0ZXNoZWV0KGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGF3YWl0IFZpZXdwb3J0LmluaXQoKTtcbiAgICAgICAgICAgIGF3YWl0IFNjcmVlbi5pbml0KCk7XG4gICAgICAgICAgICBhd2FpdCBTcHJpdGUuaW5pdCgpO1xuICAgICAgICAgICAgYXdhaXQgVGV4dC5pbml0KCk7XG4gICAgICAgICAgICBhd2FpdCBJbnB1dC5pbml0KCk7XG4gICAgICAgICAgICBhd2FpdCBBdWRpby5pbml0KCk7XG5cbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgKCkgPT4gdGhpcy5wYXVzZSgpKTtcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsICgpID0+IHRoaXMudW5wYXVzZSgpKTtcblxuICAgICAgICAgICAgdGhpcy5zdGFydCgpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBzdGFydCgpIHtcbiAgICAgICAgdGhpcy5mcmFtZSA9IDA7XG4gICAgICAgIHRoaXMucGxheVNwZWVkID0gMDtcbiAgICAgICAgdGhpcy5tZW51ID0gbmV3IE1haW5NZW51KCk7XG5cbiAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB0aGlzLm9uRnJhbWUoKSk7XG4gICAgfVxuXG4gICAgb25GcmFtZSgpIHtcbiAgICAgICAgbGV0IGZwcyA9IDYwO1xuICAgICAgICBsZXQgbm93ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICAgIGxldCBsYXN0RnJhbWUgPSB0aGlzLmxhc3RGcmFtZSB8fCAwO1xuXG4gICAgICAgIC8vIE5vdGU6IHdlIGFyZSB1c2luZyBgcmVxdWVzdEFuaW1hdGlvbkZyYW1lYCwgd2hpY2ggd2lsbCBjYWxsIG91ciBvbkZyYW1lIGhhbmRsZXJcbiAgICAgICAgLy8gNjAgdGltZXMgcGVyIHNlY29uZCBpbiBtb3N0IGNhc2VzLiBIb3dldmVyLCBpdCBjYW4gYmUgaGlnaGVyICh0aGUgYnJvd3NlciBtYXlcbiAgICAgICAgLy8gcmVzcGVjdCB0aGUgdXNlcidzIHJlZnJlc2ggc2V0dGluZ3MsIHdoaWNoIGNvdWxkIGJlIDEyMEh6IG9yIGhpZ2hlciBmb3IgZXhhbXBsZSkuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIEl0J3Mgc2FmZXN0IHRvIGhhdmUgYSBjaGVjayBsaWtlIHdlIGRvIGhlcmUsIHdoZXJlIHdlIGV4cGxpY2l0bHkgbGltaXQgdGhlIG51bWJlclxuICAgICAgICAvLyBvZiB1cGRhdGUgY2FsbHMgdG8gNjAgdGltZXMgcGVyIHNlY29uZC5cbiAgICAgICAgaWYgKG5vdyAtIGxhc3RGcmFtZSA+PSAxMDAwIC8gZnBzKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgICAgICAgICAgdGhpcy5sYXN0RnJhbWUgPSBub3c7XG4gICAgICAgIH1cblxuICAgICAgICBWaWV3cG9ydC5yZXNpemUoKTtcbiAgICAgICAgdGhpcy5kcmF3KCk7XG5cbiAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB0aGlzLm9uRnJhbWUoKSk7XG4gICAgfVxuXG4gICAgdXBkYXRlKCkge1xuICAgICAgICAvLyBQdWxsIGluIGZyYW1lIGJ5IGZyYW1lIGJ1dHRvbiBwdXNoZXMgLyBrZXlwcmVzc2VzIC8gbW91c2UgY2xpY2tzXG4gICAgICAgIElucHV0LnVwZGF0ZSgpO1xuXG4gICAgICAgIC8qZ2FtZS5jYW1lcmEucG9zLnggKz0gMC4xO1xuICAgICAgICBnYW1lLmNhbWVyYS5wb3MueSAtPSAwLjE7Ki9cblxuICAgICAgICAvL2lmIChJbnB1dC5wcmVzc2VkW0lucHV0LkFjdGlvbi5NRU5VXSkge1xuICAgICAgICAvLyAgICB0aGlzLnBhdXNlZCA/IHRoaXMudW5wYXVzZSgpIDogdGhpcy5wYXVzZSgpO1xuICAgICAgICAvL31cblxuICAgICAgICBpZiAodGhpcy5wYXVzZWQpIHJldHVybjtcblxuICAgICAgICAvLyBwZXJmb3JtIGFueSBwZXItZnJhbWUgYXVkaW8gdXBkYXRlc1xuICAgICAgICBBdWRpby51cGRhdGUoKTtcblxuICAgICAgICAvLyBCZWhhdmlvciAoQUksIHBsYXllciBpbnB1dCwgZXRjLilcbiAgICAgICAgLy9wZXJmb3JtKHRoaXMuZW50aXRpZXMpOyA8LS0gY3V0IHRvIHNhdmUgc3BhY2VcblxuICAgICAgICAvLyBwZXJmb3JtIGFueSBxdWV1ZWQgZGFtYWdlXG4gICAgICAgIC8vRGFtYWdlLnBlcmZvcm0odGhpcy5lbnRpdGllcyk7XG5cbiAgICAgICAgLy8gTW92ZW1lbnQgKHBlcmZvcm0gZW50aXR5IHZlbG9jaXRpZXMgdG8gcG9zaXRpb24pXG5cbiAgICAgICAgLy8gRGlhbG9nIHNjaGVkdWxpbmdcbiAgICAgICAgLy9EaWFsb2dTY2hlZHVsaW5nLnBlcmZvcm0oKTtcblxuICAgICAgICAvLyBWaWN0b3J5IGNvbmRpdGlvbnNcblxuICAgICAgICBpZiAodGhpcy5tZW51KSB7XG4gICAgICAgICAgICB0aGlzLm1lbnUudXBkYXRlKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKiAgICBpZiAoIXRoaXMuc2Vzc2lvbikge1xuICAgICAgICAgICAgdGhpcy5zZXNzaW9uID0gbmV3IFNlc3Npb24oKTtcbiAgICAgICAgfSovXG5cbiAgICAgICAgaWYgKHRoaXMuc2Vzc2lvbikgdGhpcy5zZXNzaW9uLnVwZGF0ZSgpO1xuXG4gICAgICAgIC8vIEN1bGxpbmcgKHR5cGljYWxseSB3aGVuIGFuIGVudGl0eSBkaWVzKVxuXG4gICAgICAgIC8vIENhbWVyYSBsb2dpY1xuICAgICAgICAvKmxldCBkaWZmID0ge1xuICAgICAgICAgICAgeDogdGhpcy5wbGF5ZXIucG9zLnggLSB0aGlzLmNhbWVyYS5wb3MueCxcbiAgICAgICAgICAgIHk6IHRoaXMucGxheWVyLnBvcy55IC0gdGhpcy5jYW1lcmEucG9zLnlcbiAgICAgICAgfTsqL1xuXG4gICAgICAgIC8qXG4gICAgICAgIHRoaXMuY2FtZXJhLnBvcy54ICs9IGRpZmYueCAqIDAuMjtcbiAgICAgICAgdGhpcy5jYW1lcmEucG9zLnkgKz0gZGlmZi55ICogMC4yO1xuICAgICAgICAqL1xuXG4gICAgICAgIC8vIFRpY2sgc2NyZWVuc2hha2VzIGFuZCBjdWxsIGZpbmlzaGVkIHNjcmVlbnNoYWtlc1xuICAgICAgICB0aGlzLnNjcmVlbnNoYWtlcyA9IHRoaXMuc2NyZWVuc2hha2VzLmZpbHRlcihzY3JlZW5zaGFrZSA9PlxuICAgICAgICAgICAgc2NyZWVuc2hha2UudXBkYXRlKClcbiAgICAgICAgKTtcblxuICAgICAgICAvLyBGbGlja2VyaW5nIHNoYWRvd3NcbiAgICAgICAgaWYgKGdhbWUuZnJhbWUgJSA2ID09PSAwKSB0aGlzLnNoYWRvd09mZnNldCA9IChNYXRoLnJhbmRvbSgpICogMTApIHwgMDtcblxuICAgICAgICAvLyBJbnRybyBzY3JlZW5zaGFrZVxuICAgICAgICBpZiAoZ2FtZS5mcmFtZSA9PT0gMzApIGdhbWUuc2NyZWVuc2hha2VzLnB1c2gobmV3IFNjcmVlblNoYWtlKDIwLCAyMCwgMjApKTtcbiAgICB9XG5cbiAgICBkcmF3KCkge1xuICAgICAgICAvLyBSZXNldCBjYW52YXMgdHJhbnNmb3JtIGFuZCBzY2FsZVxuICAgICAgICBWaWV3cG9ydC5jdHguc2V0VHJhbnNmb3JtKFZpZXdwb3J0LnNjYWxlLCAwLCAwLCBWaWV3cG9ydC5zY2FsZSwgMCwgMCk7XG5cbiAgICAgICAgVmlld3BvcnQuY3R4LmZpbGxTdHlsZSA9ICdibGFjayc7XG4gICAgICAgIFZpZXdwb3J0LmN0eC5maWxsUmVjdCgwLCAwLCBWaWV3cG9ydC53aWR0aCwgVmlld3BvcnQuaGVpZ2h0KTtcblxuICAgICAgICBWaWV3cG9ydC5jdHgudHJhbnNsYXRlKChWaWV3cG9ydC53aWR0aCAtIEdBTUVfV0lEVEgpIC8gMiB8IDAsIChWaWV3cG9ydC5oZWlnaHQgLSBHQU1FX0hFSUdIVCkgLyAyIHwgMCk7XG5cbiAgICAgICAgaWYgKHRoaXMuc2Vzc2lvbikgdGhpcy5zZXNzaW9uLmRyYXcoKTtcbiAgICAgICAgaWYgKHRoaXMubWVudSkgdGhpcy5tZW51LmRyYXcoKTtcblxuICAgICAgICBTY3JlZW4uZHJhd1RvVmlld3BvcnQoKTtcblxuICAgICAgICByZXR1cm47XG5cbiAgICAgICAgLy8gUmVuZGVyIHNjcmVlbnNoYWtlcyAoY2FudmFzIHRyYW5zbGF0aW9uKVxuICAgICAgICBsZXQgc2hha2VYID0gMCwgc2hha2VZID0gMDtcbiAgICAgICAgdGhpcy5zY3JlZW5zaGFrZXMuZm9yRWFjaChzaGFrZSA9PiB7XG4gICAgICAgICAgICBzaGFrZVggKz0gc2hha2UueDtcbiAgICAgICAgICAgIHNoYWtlWSArPSBzaGFrZS55O1xuICAgICAgICB9KTtcbiAgICAgICAgVmlld3BvcnQuY3R4LnRyYW5zbGF0ZShzaGFrZVgsIHNoYWtlWSk7XG5cbiAgICAgICAgLy9NYXplLmRyYXcoKTtcblxuICAgICAgICBmb3IgKGxldCBlbnRpdHkgb2YgdGhpcy5lbnRpdGllcykge1xuICAgICAgICAgICAgaWYgKCFlbnRpdHkueiB8fCBlbnRpdHkueiA8IDEwMCkgZW50aXR5LmRyYXcoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIFZpZXdwb3J0LmN0eC5kcmF3SW1hZ2UoXG4gICAgICAgICAgICBTcHJpdGUuc2hhZG93LmltZyxcbiAgICAgICAgICAgIDAsIDAsXG4gICAgICAgICAgICA1MDAsIDUwMCxcbiAgICAgICAgICAgIC10aGlzLnNoYWRvd09mZnNldCwgLXRoaXMuc2hhZG93T2Zmc2V0LFxuICAgICAgICAgICAgVmlld3BvcnQud2lkdGggKyB0aGlzLnNoYWRvd09mZnNldCAqIDIsXG4gICAgICAgICAgICBWaWV3cG9ydC5oZWlnaHQgKyB0aGlzLnNoYWRvd09mZnNldCAqIDJcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwYXVzZSgpIHtcbiAgICAgICAgaWYgKHRoaXMucGF1c2VkKSByZXR1cm47XG4gICAgICAgIHRoaXMucGF1c2VkID0gdHJ1ZTtcbiAgICAgICAgQXVkaW8ucGF1c2UoKTtcbiAgICB9XG5cbiAgICB1bnBhdXNlKCkge1xuICAgICAgICBpZiAoIXRoaXMucGF1c2VkKSByZXR1cm47XG4gICAgICAgIHRoaXMucGF1c2VkID0gZmFsc2U7XG4gICAgICAgIEF1ZGlvLnVucGF1c2UoKTtcbiAgICB9XG5cbiAgICBzdGFydFNlc3Npb24oKSB7XG4gICAgICAgIHRoaXMubWVudSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5zZXNzaW9uID0gbmV3IFNlc3Npb24oKTtcbiAgICB9XG5cbiAgICBzaG93TWFpbk1lbnUoKSB7XG4gICAgICAgIHRoaXMubWVudSA9IG5ldyBNYWluTWVudSgpO1xuICAgICAgICB0aGlzLnNlc3Npb24gPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgc2hvd0luc3RydWN0aW9ucygpIHtcbiAgICAgICAgdGhpcy5tZW51ID0gbmV3IEluc3RydWN0aW9uc01lbnUoKTtcbiAgICAgICAgdGhpcy5zZXNzaW9uID0gdW5kZWZpbmVkO1xuICAgIH1cbn1cblxuZXhwb3J0IGNvbnN0IGdhbWUgPSBuZXcgR2FtZSgpO1xuIiwiaW1wb3J0IHsgZ2FtZSB9IGZyb20gJy4vR2FtZSc7XG5cbi8qKlxuICogQ3JlYXRlIGFuZCBsYXVuY2ggZ2FtZS5cbiAqL1xuZ2FtZS5pbml0KCk7XG4iXSwibmFtZXMiOlsiREVBVEhfRlJBTUVTIl0sIm1hcHBpbmdzIjoiOzs7SUFBQTtJQUNBO0lBQ0E7QUFJQTtJQUNBO0lBQ0E7SUFDTyxNQUFNLFVBQVUsR0FBRyxHQUFHLENBQUM7SUFDdkIsTUFBTSxXQUFXLEdBQUcsR0FBRyxDQUFDO0FBQy9CO0lBQ0E7SUFDQTtJQUNPLE1BQU0sWUFBWSxHQUFHLEVBQUUsQ0FBQztJQUN4QixNQUFNLGFBQWEsR0FBRyxFQUFFLENBQUM7QUFDaEM7SUFDQTtJQUNPLE1BQU0sVUFBVSxHQUFHLENBQUMsQ0FBQztJQUNyQixNQUFNLFdBQVcsR0FBRyxFQUFFLENBQUM7SUFDdkIsTUFBTSxlQUFlLEdBQUcsRUFBRSxHQUFHLFVBQVUsQ0FBQztBQUUvQztJQUNBO0lBQ08sTUFBTSxVQUFVLEdBQUcsRUFBRSxDQUFDO0lBQ3RCLE1BQU0sVUFBVSxHQUFHLEVBQUUsQ0FBQztBQUM3QjtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNPLE1BQU0sV0FBVyxHQUFHLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO0FBQ2hEO0lBQ0E7SUFDQTtJQUNPLE1BQU0sVUFBVSxHQUFHLEVBQUM7SUFDcEIsTUFB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RyxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUMvRCxRQUFRLElBQUksQ0FBQyxXQUFXLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUM7SUFDeEUsUUFBUSxJQUFJLENBQUMsTUFBTSxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBQ3JFLFFBQVEsSUFBSSxDQUFDLEdBQUcsR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUM3RDtJQUNBLFFBQVEsSUFBSSxDQUFDLFFBQVEsR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNqRSxRQUFRLElBQUksQ0FBQyxlQUFlLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUM7QUFDN0U7SUFDQSxRQUFRLElBQUksQ0FBQyxRQUFRLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxHQUFHLEVBQUUsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUM7SUFDbkUsUUFBUSxJQUFJLENBQUMsZUFBZSxHQUFHLFNBQVMsQ0FBQztBQUN6QztJQUNBLFFBQVEsSUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLFNBQVMs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QyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxPQUFPLENBQUMsRUFBQztBQUNsTjtJQUNBO0lBQ08sTUFBTSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxFQUFDO0FBQ3gyQjtJQUNBO0lBQ08sTUFBTSxLQUFLLENBQUMsR0FBRTtBQUNyQjtJQUNBO0lBQ08sTUFBTSxLQUFLLENBQUMsTUFBSztBQUN4QjtJQUNBO0lBQ08sTUFBTSxLQUFLLENBQUMsSUFBSSxHQUFHLENBQUMsWUFB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LEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsRUFBRSxZQUFZLEVBQUUsb0JBQW9CLEVBQUUsWUFBWSxFQUFFLGFBQWEsQ0FBQyxFQUFFLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsUUFBUSxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLFVBQVUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLFFBQVEsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLElBQUksRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLFlBQVksRUFBRSxvQkFBb0IsRUFBRSxZQUFZLEVBQUUsY0FBYyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsRUFBRSxZQUFZLEVBQUUsb0JBQW9CLEVBQUUsWUFBWSxFQUFFLGFBQWEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDOztJQ00zOUIsTUFBTSxLQUFLLEdBQUc7SUFDckIsSUFBSSxJQUFJLEdBQUc7SUFDWCxRQUFRLEtBQUssQ0FBQyxXQUFXLEdBQUcsS0FBSyxDQUFDO0FBQ2xDO0lBQ0EsUUFBUSxLQUFLLENBQUMsR0FBRyxHQUFHLEtBQUssQ0FBQztJQUMxQixRQUFRLEtBQUssQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDLEdBQUcsQ0FBQyxVQUFVLEVBQUUsQ0FBQztJQUM3QyxRQUFRLEtBQUssQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLENBQUM7SUFDbkQsUUFBUSxJQUFJLENBQUMsWUFBWSxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUM7QUFDeEM7SUFDQSxRQUFRLEtBQUssQ0FBQyxPQUFPLEdBQUcsRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLEdBQUcsRUFBRSxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUM3RixRQUFRLEtBQUssQ0FBQyxJQUFJLEdBQUcsR0FBRyxJQUFJLEVBQUUsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxHQUFHLEdBQUcsQ0FBQyxFQUFFLE1BQU0sR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUN2RSxRQUFRLEtBQUssQ0FBQyxXQUFXLEdBQUcsR0FBRyxFQUFFLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNuRyxRQUFRLEtBQUssQ0FBQyxNQUFNLEdBQUcsR0FBRyxHQUFHLEVBQUUsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsT0FBTyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUM7SUFDakUsUUFBUSxLQUFLLENBQUMsS0FBSyxHQUFHLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxHQUFHLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDOUU7SUFDQSxRQUFRLEtBQUssQ0FBQyxPQUFPLEdBQUcsR0FBRyxHQUFHLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFD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Q0FBQyxDQUFDLEVBQUU7SUFDdkIsUUFBUSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFO0lBQ3ZCLFFBQVEsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUU7SUFDdEIsUUFBUSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRTtJQUN0QixRQUFRLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFO0lBQ3RCLFFBQVEsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUU7SUFDdEIsS0FBSztJQUNMLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxHQUFHO0lBQ3ZCLFFBQVEsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFO0lBQ3hCLFFBQVEsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFO0lBQ3hCLFFBQVEsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRTtJQUN2QixRQUFRLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUU7SUFDdkIsUUFBUSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFO0lBQ3ZCLFFBQVEsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRTtJQUN2QixLQUFLO0lBQ0wsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLEdBQUc7SUFDckIsUUFBUSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFO0lBQ3ZCLFFBQVEsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRTtJQUN2QixRQUFR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LEdBQUcsQ0FBQyxJQUFJLElBQUksQ0FBQyxLQUFLLEtBQUssS0FBSyxDQUFDLEtBQUssRUFBRTtJQUNyRSxZQUFZLElBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQztJQUNwQyxTQUFTO0FBQ1Q7SUFDQSxRQUFRLElBQUksSUFBSSxDQUFDLEtBQUssS0FBSyxLQUFLLENBQUMsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRTtJQUM1RSxZQUFZLElBQUksQ0FBQyxTQUFTLEdBQUcsS0FBSyxDQUFDLE9BQU8sQ0FBQztJQUMzQyxTQUFTO0FBQ1Q7SUFDQSxRQUFRLElBQUksS0FBSyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFO0lBQ2xHLFlBQVksSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUM7SUFDbEQsWUFBWSxJQUFJLENBQUMsU0FBUyxHQUFHLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxLQUFLLENBQUMsS0FBSyxFQUFFLEtBQUssQ0FBQyxJQUFJLEVBQUUsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ2xGLFNBQVM7QUFDVDtJQUNBLFFBQVEsSUFBSSxLQUFLLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFO0lBQzNDLFlBQVksSUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDO0lBQ3JDLFlBQVksT0FBTztJQUNuQixTQUFTO0FBQ1Q7SUFDQSxRQUFRLElBQUksQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDbEMsS0FBSztBQUNMO0lBQ0EsSUFBSSxJQUFJLEdBQUc7SUFDWCxRQUFRLElBQUksSUFBSSxHQUFHLEdBQUcsQ0FBQztBQUN2QjtJQUNBLFFBQVEsUUFBUSxJQUFJLENBQUMsS0FBSztJQUMxQixZQUFZLEtBQUssS0FBSyxDQUFDLEtBQUs7SUFDNUIsZ0JBQWdCLElBQUksR0FBR0EsY0FBWSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztJQUNwRCxnQkFBZ0IsTUFBTTtJQUN0QixZQUFZLEtBQUssS0FBSyxDQUFDLElBQUk7SUFDM0IsZ0JBQWdCLE9BQU87SUFDdkIsU0FBUztBQUNUO0lBQ0EsUUFBUSxNQUFNLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQztJQUMzQyxLQUFLO0lBQ0w7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0lDMUVPLE1BQU0sS0FBSyxHQUFHO0lBQ3JCLElBQUksTUFBTSxFQUFFLFNBQVM7SUFDckIsSUFBSSxXQUFXLEVBQUUsU0FBUyxDQUFDLE1BQU07QUFDakM7SUFDQSxJQUFJLElBQUksQ0FBQyxXQUFXLEVBQUU7SUFDdEIsUUFBUSxPQUFPLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUNsQztJQUNBLFFBQVEsSUFBSSxLQUFLLEdBQUcsS0FBSyxDQUFDLE1BQU0sQ0FBQyxXQUFXLEdBQUcsS0FBSyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUNwRSxRQUFRLElBQUksQ0FBQyxLQUFLLEVBQUUsTUFBTSxJQUFJLEtBQUssQ0FBQyxDQUFDLHNCQUFzQixFQUFFLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUM1RTtJQUNBO0lBQ0E7QUFDQTtJQUNBLFFBQVEsSUFBSSxNQUFNLEdBQUcsS0FBSyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsR0FBRyxJQUFJLEdBQUcsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUM1RCxRQUFRLElBQUksVUFBVSxHQUFHLEVBQUUsQ0FBQztJQUM1QixRQUFRLElBQUksTUFBTSxDQUFDO0FBQ25CO0lBQ0E7SUFDQSxRQUFRLE1BQU0sR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxVQUFVLENBQUMsQ0FBQztBQUM3QztJQUNBLFFBQVEsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFVBQVUsRUFBRSxDQUFDLEVBQUUsRUFBRTtJQUM3QztJQUNBLFlBQVksSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDO0lBQzNDLFlBQVksTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLFVBQVUsQ0FBQyxDQUFDO0FBQ3ZEO0lBQ0EsWUFBWSxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsVUFBVSxFQUFFLENBQUMsRUFBRSxFQUFFO0lBQ2pEO0lBQ0EsZ0JBQWdCLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQztBQUN0RDtJQUNBO0lBQ0E7SUFDQTtBQUNBO0lBQ0EsZ0JBQWdCLElBQUksTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUcsRUFBRTtJQUMxQyxvQkFBb0IsVUFBVSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQzlDLGlCQUFpQjtBQUNqQjtJQUNBO0lBQ0E7SUFDQTtJQUNBO0FBQ0E7SUFDQSxnQkFBZ0IsSUFBSSxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssR0FBRyxFQUFFO0lBQzFDLG9CQUFvQixNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDO0lBQ3ZDLG9CQUFvQixNQUFNLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUM7SUFDdEMsaUJBQWlCO0FBQ2pCO0lBQ0E7SUFDQTtJQUNBLGFBQWE7SUFDYixTQUFTO0FBQ1Q7SUFDQSxRQUFRLE9BQU87SUFDZixZQUFZLElBQUksRUFBRSxLQUFLLENBQUMsSUFBSTtJQUM1QixZQUFZLElBQUksRUFBRSxLQUFLLENBQUMsSUFBSTtJQUM1QixZQUFZLFFBQVEsRUFBRSxLQUFLLENBQUMsUUFBUTtJQUNwQyxZQUFZLE1BQU07SUFDbEIsWUFBWSxVQUFVO0lBQ3RCLFlBQVksTUFBTTtJQUNsQixTQUFTLENBQUM7SUFDVixLQUFLO0lBQ0wsQ0FBQzs7SUN2REQ7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDTyxNQUFNLEtBQUssQ0FBQztJQUNuQixJQUFJLFdBQVcsQ0FBQyxXQUFXLEVBQUU7SUFDN0IsUUFBUSxJQUFJLEtBQUssR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO0FBQzVDO0lBQ0EsUUFBUSxJQUFJLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUM7SUFDbkMsUUFBUSxJQUFJLENBQUMsVUFBVSxHQUFHLEtBQUssQ0FBQyxVQUFVLENBQUM7SUFDM0MsUUFBUSxJQUFJLENBQUMsSUFBSSxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUM7SUFDL0IsUUFBUSxJQUFJLENBQUMsUUFBUSxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUM7SUFDcEMsUUFBUSxJQUFJLENBQUMsS0FBSyxHQUFHLEVBQUUsQ0FBQztJQUN4QixRQUFRLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxNQUFNLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNqRSxLQUFLO0FBQ0w7SUFDQSxJQUFJLE1BQU0sQ0FBQyxTQUFTLEVBQUU7SUFDdEIsUUFBUSxJQUFJLElBQUksR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxJQUFJLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7QUFDdkQ7SUFDQTtJQUNBLFFBQVEsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLFNBQVMsQ0FBQyxDQUFDO0FBQzVDO0lBQ0EsUUFBUSxJQUFJLElBQUksS0FBSyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxJQUFJLEtBQUssSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUU7SUFDOUQsWUFBWSxJQUFJLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxJQUFJLEVBQUUsSUFBSSxHQUFHLENBQUMsQ0FBQyxFQUFFO0lBQzFELGdCQUFnQixJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksR0FBRyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxHQUFHLENBQUM7SUFDbEQsYUFBYTtJQUNiLFNBQVM7QUFDVDtJQUNBO0lBQ0EsUUFBUSxJQUFJLFNBQVMsRUFBRSxJQUFJLENBQUMsc0JBQXNCLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQ2pFO0lBQ0E7SUFDQSxRQUFRLEtBQUssSUFBSSxJQUFJLElBQUksSUFBSSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxTQUFTLENBQUMsQ0FBQztBQUNsRTtJQUNBO0lBQ0EsUUFBUSxJQUFJLFNBQVMsRUFBRSxJQUFJLENBQUMsc0JBQXNCLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQ2pFO0lBQ0EsUUFBUSxJQUFJLFNBQVMsRUFBRTtJQUN2QjtJQUNBLFlBQVksSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUU7SUFDN0QsZ0JBQWdCLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQztJQUNoRSxnQkFBZ0IsSUFBSSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsWUFBWSxDQUFDLENBQUM7SUFDdkQsYUFBYTtBQUNiO0lBQ0E7SUFDQSxZQUFZLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFO0lBQy9ELGdCQUFnQixJQUFJLENBQUMsT0FBTyxDQUFDLGNBQWMsRUFBRSxDQUFDO0lBQzlDLGFBQWE7QUFDYjtJQUNBO0lBQ0EsWUFBWSxJQUFJLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRTtJQUNqRSxnQkFBZ0IsUUFBUSxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsR0FBRyxDQUFDLENBQUM7SUFDckQsb0JBQW9CLEtBQUssQ0FBQztJQUMxQix3QkFBd0IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQztJQUN2RCx3QkFBd0IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFDO0lBQzFELHdCQUF3QixNQUFNO0lBQzlCLG9CQUFvQixLQUFLLENBQUM7SUFDMUIsd0JBQXdCLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUM7SUFDeEQsd0JBQXdCLElBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxHQUFHLFNBQVMsQ0FBQztJQUMxRCx3QkFBd0IsTUFBTTtJQUM5QixvQkFBb0IsS0FBSyxDQUFDO0lBQzFCLHdCQUF3QixJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUMsT0FBTyxDQUFDO0lBQzFELHdCQUF3QixJQUFJLENBQUMsTUFBTSxDQUFDLFNBQVMsR0FBRyxTQUFTLENBQUM7SUFDMUQsd0JBQXdCLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxHQUFHLENBQUMsQ0FBQztJQUNqRCx3QkFBd0IsTUFBTTtJQUM5QixvQkFBb0IsS0FBSyxDQUFDO0lBQzFCLHdCQUF3QixJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUMsU0FBUyxDQUFDO0lBQzVELHdCQUF3QixJQUFJLENBQUMsTUFBTSxDQUFDLFNBQVMsR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDO0lBQzNELHdCQUF3QixJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUM7SUFDakQsd0JBQXdCLE1BQU07SUFDOUIsb0JBQW9CLEtBQUssQ0FBQztJQUMxQix3QkFBd0IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDLFVBQVUsQ0FBQztJQUM3RCx3QkFBd0IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxTQUFTLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQztJQUM1RCx3QkFBd0IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLEdBQUcsQ0FBQyxDQUFDO0lBQ2pELHdCQUF3QixNQUFNO0lBQzlCLGlCQUFpQjtJQUNqQixhQUFhO0FBQ2I7SUFDQTtJQUNBLFlBQVksSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sR0FBRyxDQUFDLElBQUksSUFBSSxDQUFDLE1BQU0sRUFBRSxHQUFHLEdBQUcsRUFBRTtJQUM5RCxnQkFBZ0IsSUFBSSxTQUFTLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7SUFDcEcsZ0JBQWdCLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7SUFDckQsYUFBYTtBQUNiO0lBQ0E7SUFDQSxZQUFZLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsSUFBSSxJQUFJLElBQUksQ0FBQyxLQUFLLEtBQUssS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQzlFO0lBQ0E7SUFDQSxZQUFZLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEtBQUssS0FBSyxDQUFDLElBQUksRUFBRTtJQUNsRCxnQkFBZ0IsSUFBSSxDQUFDLE9BQU8sQ0FBQyxZQUFZLEVBQUUsQ0FBQztJQUM1QyxhQUFhO0lBQ2IsU0FBUztJQUNULEtBQUs7QUFDTDtJQUNBLElBQUksSUFBSSxHQUFHO0lBQ1g7SUFDQSxRQUFRLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxHQUFHLElBQUksR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDakU7SUFDQTtJQUNBLFFBQVEsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUMzQjtJQUNBO0lBQ0EsUUFBUSxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxJQUFJLElBQUksSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUM7SUFDaEQsS0FBSztBQUNMO0lBQ0EsSUFBSSxPQUFPLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRTtJQUNsQixRQUFRLE9BQU8sQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQztJQUNqRyxLQUFLO0FBQ0w7SUFDQSxJQUFJLFVBQVUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFO0lBQ3JCLFFBQVEsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxVQUFVLEVBQUU7SUFDdEMsWUFBWSxPQUFPLEtBQUssQ0FBQztJQUN6QixTQUFTLE1BQU07SUFDZixZQUFZLE9BQU8sQ0FBQyxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzNELFNBQVM7SUFDVCxLQUFLO0FBQ0w7SUFDQSxJQUFJLFFBQVEsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFO0lBQ25CLFFBQVEsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQztJQUN6QyxLQUFLO0FBQ0w7SUFDQSxJQUFJLFFBQVEsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFO0lBQ25CLFFBQVEsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQztJQUN6QyxLQUFLO0FBQ0w7SUFDQSxJQUFJLFVBQVUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFO0lBQ3JCLFFBQVEsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQztJQUN6QyxLQUFLO0FBQ0w7SUFDQSxJQUFJLFlBQVksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFO0lBQ3ZCLFFBQVEsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQztJQUN6QyxLQUFLO0FBQ0w7SUFDQSxJQUFJLE9BQU8sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFO0lBQ2xCLFFBQVEsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQztJQUN6QyxLQUFLO0FBQ0w7SUFDQSxJQUFJLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFO0lBQ2pCLFFBQVEsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQztJQUN6QyxLQUFLO0FBQ0w7SUFDQSxJQUFJLG1CQUFtQixDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUU7SUFDOUIsUUFBUSxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssR0FBRyxDQUFDO0lBQ3pDLEtBQUs7QUFDTDtJQUNBLElBQUksVUFBVSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUU7SUFDckIsUUFBUSxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsT0FBTyxLQUFLLENBQUM7SUFDaEMsUUFBUSxPQUFPLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzNELEtBQUs7QUFDTDtJQUNBLElBQUksWUFBWSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUU7SUFDdkIsUUFBUSxPQUFPLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzFFLEtBQUs7QUFDTDtJQUNBLElBQUksc0JBQXNCLEdBQUc7SUFDN0IsUUFBUSxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxLQUFLLEtBQUssQ0FBQyxLQUFLLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEtBQUssS0FBSyxDQUFDLElBQUksRUFBRSxPQUFPO0FBQzFGO0lBQ0EsUUFBUSxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRTtJQUN2RCxZQUFZLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUM7SUFDNUMsU0FBUztBQUNUO0lBQ0EsUUFBUSxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7SUFDcEQsWUFBWSxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxLQUFLLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFO0lBQ25ELGdCQUFnQixJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxLQUFLLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFO0lBQ3ZELG9CQUFvQixJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDO0lBQ3BELG9CQUFvQixJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFDNUMsb0JBQW9CLE1BQU07SUFDMUIsaUJBQWlCLE1BQU0sSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsS0FBSyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRTtJQUN2SCxvQkFBb0IsSUFBSSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsVUFBVSxDQUFDLENBQUM7SUFDekQsaUJBQWlCLE1BQU0sSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsS0FBSyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFO0lBQzVLLG9CQUFvQixJQUFJLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxVQUFVLENBQUMsQ0FBQztJQUN6RCxpQkFBaUI7SUFDakIsYUFBYTtJQUNiLFNBQVM7SUFDVCxLQUFLO0lBQ0w7O0lDcExPLE1BQU0sT0FBTyxDQUFDO0lBQ3JCLElBQUksV0FBVyxHQUFHO0lBQ2xCLFFBQVEsSUFBSSxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUM7SUFDdkIsUUFBUSxJQUFJLENBQUMsV0FBVyxHQUFHLENBQUMsQ0FBQztJQUM3QixRQUFRLElBQUksQ0FBQyxVQUFVLEdBQUcsQ0FBQyxDQUFDO0lBQzVCLFFBQVEsSUFBSSxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUM7SUFDdkIsUUFBUSxJQUFJLENBQUMsUUFBUSxHQUFHLEdBQUcsQ0FBQztJQUM1QixLQUFLO0FBQ0w7SUFDQSxJQUFJLE1BQU0sR0FBRztJQUNiO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0EsUUFBUSxJQUFJLE9BQU8sR0FBRyxXQUFXLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO0lBQ2xELFFBQVEsSUFBSSxHQUFHLEdBQUcsSUFBSSxJQUFJLEVBQUUsQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUN2QyxRQUFRLElBQUksU0FBUyxHQUFHLElBQUksQ0FBQyxTQUFTLElBQUksQ0FBQyxDQUFDO0lBQzVDLFFBQVEsSUFBSSxTQUFTLEdBQUcsS0FBSyxDQUFDO0FBQzlCO0lBQ0EsUUFBUSxJQUFJLEdBQUcsR0FBRyxTQUFTLElBQUksSUFBSSxHQUFHLE9BQU8sRUFBRTtJQUMvQyxZQUFZLFNBQVMsR0FBRyxJQUFJLENBQUM7SUFDN0IsWUFBWSxJQUFJLENBQUMsU0FBUyxHQUFHLEdBQUcsQ0FBQztJQUNqQyxTQUFTO0FBQ1Q7SUFDQSxRQUFRLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFO0lBQ3pCLFlBQVksSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLEtBQUssQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7SUFDckQsU0FBUztBQUNUO0lBQ0EsUUFBUSxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQztBQUNyQztJQUNBLFFBQVEsSUFBSSxnQkFBZ0IsR0FBRyxLQUFLLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxLQUFLLElBQUksS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQztBQUMzRjtJQUNBLFFBQVEsSUFBSSxnQkFBZ0IsQ0FBQyxLQUFLLENBQUMsY0FBYyxDQUFDLEVBQUU7SUFDcEQsWUFBWSxLQUFLLENBQUMsT0FBTyxFQUFFLENBQUM7SUFDNUIsWUFBWSxJQUFJLENBQUMsS0FBSyxHQUFHLFNBQVMsQ0FBQztJQUNuQyxZQUFZLElBQUksQ0FBQyxXQUFXLEdBQUcsUUFBUSxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7SUFDdkQsU0FBUyxNQUFNLElBQUksZ0JBQWdCLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxFQUFFO0lBQ3ZELFlBQVksS0FBSyxDQUFDLE9BQU8sRUFBRSxDQUFDO0lBQzVCLFlBQVksT0FBTyxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQztJQUNwQyxTQUFTO0lBQ1QsS0FBSztBQUNMO0lBQ0EsSUFBSSxJQUFJLEdBQUc7SUFDWCxRQUFRLE1BQU0sQ0FBQyxLQUFLLEVBQUUsQ0FBQztBQUN2QjtJQUNBLFFBQVEsSUFBSSxJQUFJLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDMUM7SUFDQSxRQUFRLElBQUksSUFBSSxHQUFHO0lBQ25CLFlBQVksTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQztJQUMvQyxZQUFZLE1BQU0sQ0FBQyxJQUFJLENBQUMsV0FBVyxHQUFHLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDO0lBQ3pELFlBQVksTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQztJQUMvQyxZQUFZLElBQUksQ0FBQyxLQUFLLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsR0FBRyxFQUFFO0lBQ3RFLFNBQVMsQ0FBQztJQUNWLFFBQVEsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxXQUFXLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLFlBQVksRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsaUJBQWlCLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3ZILEtBQUs7QUFDTDtJQUNBLElBQUksWUFBWSxHQUFHO0lBQ25CLFFBQVEsSUFBSSxDQUFDLEtBQUssR0FBRyxTQUFTLENBQUM7SUFDL0IsS0FBSztBQUNMO0lBQ0EsSUFBSSxjQUFjLEdBQUc7SUFDckIsUUFBUSxJQUFJLENBQUMsS0FBSyxHQUFHLFNBQVMsQ0FBQztJQUMvQixRQUFRLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztJQUMzQixRQUFRLElBQUksSUFBSSxDQUFDLFdBQVcsR0FBRyxNQUFNLENBQUMsV0FBVyxLQUFLLENBQUMsRUFBRTtJQUN6RCxZQUFZLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztJQUM5QixTQUFTO0lBQ1QsS0FBSztBQUNMO0lBQ0EsSUFBSSxXQUFXLENBQUMsU0FBUyxFQUFFO0lBQzNCLFFBQVEsUUFBUSxTQUFTO0lBQ3pCLFlBQVksS0FBSyxVQUFVO0lBQzNCLGdCQUFnQixJQUFJLENBQUMsS0FBSyxJQUFJLENBQUMsQ0FBQztJQUNoQyxnQkFBZ0IsTUFBTTtJQUN0QixZQUFZLEtBQUssWUFBWTtJQUM3QixnQkFBZ0IsSUFBSSxDQUFDLEtBQUssSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQztJQUM5QyxnQkFBZ0IsTUFBTTtJQUN0QixZQUFZLEtBQUssY0FBYztJQUMvQjtJQUNBLGdCQUFnQixJQUFJLENBQUMsS0FBSyxJQUFJLENBQUMsQ0FBQztJQUNoQyxnQkFBZ0IsTUFBTTtJQUN0QixTQUFTO0lBQ1QsS0FBSztJQUNMOztJQzdFQTtJQUNBO0lBQ0E7SUFDTyxNQUFNLElBQUksQ0FBQztJQUNsQixJQUFJLElBQUksR0FBRztJQUNYLFFBQVEsTUFBTSxDQUFDLGVBQWUsQ0FBQyxZQUFZO0lBQzNDLFlBQVksTUFBTSxRQUFRLENBQUMsSUFBSSxFQUFFLENBQUM7SUFDbEMsWUFBWSxNQUFNLE1BQU0sQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUNoQyxZQUFZLE1BQU0sTUFBTSxDQUFDLElBQUksRUFBRSxDQUFDO0lBQ2hDLFlBQVksTUFBTSxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7SUFDOUIsWUFBWSxNQUFNLEtBQUssQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUMvQixZQUFZLE1BQU0sS0FBSyxDQUFDLElBQUksRUFBRSxDQUFDO0FBQy9CO0lBQ0EsWUFBWSxNQUFNLENBQUMsZ0JBQWdCLENBQUMsTUFBTSxFQUFFLE1BQU0sSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUM7SUFDaEUsWUFBWSxNQUFNLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLE1BQU0sSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUM7QUFDbkU7SUFDQSxZQUFZLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQztJQUN6QixTQUFTLENBQUMsQ0FBQztJQUNYLEtBQUs7QUFDTDtJQUNBLElBQUksS0FBSyxHQUFHO0lBQ1osUUFBUSxJQUFJLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQztJQUN2QixRQUFRLElBQUksQ0FBQyxTQUFTLEdBQUcsQ0FBQyxDQUFDO0lBQzNCLFFBQVEsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLFFBQVEsRUFBRSxDQUFDO0FBQ25DO0lBQ0EsUUFBUSxNQUFNLENBQUMscUJBQXFCLENBQUMsTUFBTSxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQztJQUMzRCxLQUFLO0FBQ0w7SUFDQSxJQUFJLE9BQU8sR0FBRztJQUNkLFFBQVEsSUFBSSxHQUFHLEdBQUcsRUFBRSxDQUFDO0lBQ3JCLFFBQVEsSUFBSSxHQUFHLEdBQUcsSUFBSSxJQUFJLEVBQUUsQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUN2QyxRQUFRLElBQUksU0FBUyxHQUFHLElBQUksQ0FBQyxTQUFTLElBQUksQ0FBQyxDQUFDO0FBQzVDO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0EsUUFBUSxJQUFJLEdBQUcsR0FBRyxTQUFTLElBQUksSUFBSSxHQUFHLEdBQUcsRUFBRTtJQUMzQyxZQUFZLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztJQUMxQixZQUFZLElBQUksQ0FBQyxTQUFTLEdBQUcsR0FBRyxDQUFDO0lBQ2pDLFNBQVM7QUFDVDtJQUNBLFFBQVEsUUFBUSxDQUFDLE1BQU0sRUFBRSxDQUFDO0lBQzFCLFFBQVEsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ3BCO0lBQ0EsUUFBUSxNQUFNLENBQUMscUJBQXFCLENBQUMsTUFBTSxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQztJQUMzRCxLQUFLO0FBQ0w7SUFDQSxJQUFJLE1BQU0sR0FBRztJQUNiO0lBQ0EsUUFBUSxLQUFLLENBQUMsTUFBTSxFQUFFLENBQUM7QUFDdkI7SUFDQTtJQUNBO0FBQ0E7SUFDQTtJQUNBO0lBQ0E7QUFDQTtJQUNBLFFBQVEsSUFBSSxJQUFJLENBQUMsTUFBTSxFQUFFLE9BQU87QUFDaEM7SUFDQTtJQUNBLFFBQVEsS0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDO0FBQ3ZCO0lBQ0E7SUFDQTtBQUNBO0lBQ0E7SUFDQTtBQUNBO0lBQ0E7QUFDQTtJQUNBO0lBQ0E7QUFDQTtJQUNBO0FBQ0E7SUFDQSxRQUFRLElBQUksSUFBSSxDQUFDLElBQUksRUFBRTtJQUN2QixZQUFZLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7SUFDL0IsU0FBUztBQUNUO0lBQ0E7SUFDQTtJQUNBO0FBQ0E7SUFDQSxRQUFRLElBQUksSUFBSSxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sRUFBRSxDQUFDO0FBQ2hEO0lBQ0E7QUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7QUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0FBQ0E7SUFDQTtJQUNBLFFBQVEsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLE1BQU0sQ0FBQyxXQUFXO0lBQ2hFLFlBQVksV0FBVyxDQUFDLE1BQU0sRUFBRTtJQUNoQyxTQUFTLENBQUM7QUFDVjtJQUNBO0lBQ0EsUUFBUSxJQUFJLElBQUksQ0FBQyxLQUFLLEdBQUcsQ0FBQyxLQUFLLENBQUMsRUFBRSxJQUFJLENBQUMsWUFBWSxHQUFHLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxHQUFHLEVBQUUsSUFBSSxDQUFDLENBQUM7QUFDL0U7SUFDQTtJQUNBLFFBQVEsSUFBSSxJQUFJLENBQUMsS0FBSyxLQUFLLEVBQUUsRUFBRSxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxJQUFJLFdBQVcsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFDbkYsS0FBSztBQUNMO0lBQ0EsSUFBSSxJQUFJLEdBQUc7SUFDWDtJQUNBLFFBQVEsUUFBUSxDQUFDLEdBQUcsQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDLEtBQUssRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLFFBQVEsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQzlFO0lBQ0EsUUFBUSxRQUFRLENBQUMsR0FBRyxDQUFDLFNBQVMsR0FBRyxPQUFPLENBQUM7SUFDekMsUUFBUSxRQUFRLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLFFBQVEsQ0FBQyxLQUFLLEVBQUUsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQ3JFO0lBQ0EsUUFBUSxRQUFRLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxLQUFLLEdBQUcsVUFBVSxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxRQUFRLENBQUMsTUFBTSxHQUFHLFdBQVcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7QUFDL0c7SUFDQSxRQUFRLElBQUksSUFBSSxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRSxDQUFDO0lBQzlDLFFBQVEsSUFBSSxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDeEM7SUFDQSxRQUFRLE1BQU0sQ0FBQyxjQUFjLEVBQUUsQ0FBQztBQUNoQztJQUNBLFFBQVEsT0FBTztJQXdCZixLQUFLO0FBQ0w7SUFDQSxJQUFJLEtBQUssR0FBRztJQUNaLFFBQVEsSUFBSSxJQUFJLENBQUMsTUFBTSxFQUFFLE9BQU87SUFDaEMsUUFBUSxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQztJQUMzQixRQUFRLEtBQUssQ0FBQyxLQUFLLEVBQUUsQ0FBQztJQUN0QixLQUFLO0FBQ0w7SUFDQSxJQUFJLE9BQU8sR0FBRztJQUNkLFFBQVEsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsT0FBTztJQUNqQyxRQUFRLElBQUksQ0FBQyxNQUFNLEdBQUcsS0FBSyxDQUFDO0lBQzVCLFFBQVEsS0FBSyxDQUFDLE9BQU8sRUFBRSxDQUFDO0lBQ3hCLEtBQUs7QUFDTDtJQUNBLElBQUksWUFBWSxHQUFHO0lBQ25CLFFBQVEsSUFBSSxDQUFDLElBQUksR0FBRyxTQUFTLENBQUM7SUFDOUIsUUFBUSxJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksT0FBTyxFQUFFLENBQUM7SUFDckMsS0FBSztBQUNMO0lBQ0EsSUFBSSxZQUFZLEdBQUc7SUFDbkIsUUFBUSxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksUUFBUSxFQUFFLENBQUM7SUFDbkMsUUFBUSxJQUFJLENBQUMsT0FBTyxHQUFHLFNBQVMsQ0FBQztJQUNqQyxLQUFLO0FBQ0w7SUFDQSxJQUFJLGdCQUFnQixHQUFHO0lBQ3ZCLFFBQVEsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLGdCQUFnQixFQUFFLENBQUM7SUFDM0MsUUFBUSxJQUFJLENBQUMsT0FBTyxHQUFHLFNBQVMsQ0FBQztJQUNqQyxLQUFLO0lBQ0wsQ0FBQztBQUNEO0lBQ08sTUFBTSxJQUFJLEdBQUcsSUFBSSxJQUFJLEVBQUU7O0lDbk05QjtJQUNBO0lBQ0E7SUFDQSxJQUFJLENBQUMsSUFBSSxFQUFFOzs7Ozs7In0=\n","/**\n * Constants\n */\n\n// Spritesheet URI (produced during gulp build)\nexport const SPRITESHEET_URI = 'sprites.png';\n\n// The playable area. Note that this is the desired dimensions, but the actual on-screen dimensions\n// may be larger to maintain aspect ratio (see `Viewport.width` & `Viewport.height`).\nexport const GAME_WIDTH = 640;\nexport const GAME_HEIGHT = 400;\n\n// The \"screen area\". This is an ASCII game and so most of the game logic doesn't care about browser\n// pixels, we care about the ASCII display area (80x25).\nexport const SCREEN_WIDTH = 80;\nexport const SCREEN_HEIGHT = 25;\n\n// The size of our on-screen characters (given dimensions above, this is 80 cols by 25 rows).\nexport const CHAR_WIDTH = 8;\nexport const CHAR_HEIGHT = 16;\nexport const CHARSHEET_WIDTH = 16 * CHAR_WIDTH;\nexport const CHARSHEET_HEIGHT = 32 * CHAR_HEIGHT;\n\n// Fixed level size\nexport const LEVEL_ROWS = 20;\nexport const LEVEL_COLS = 79;\n\n// Play speeds, expressed as frames per second.\n//\n// According to the original, the play speeds had millisecond delays of:\n//   [100ms, 50ms, 25ms, 13ms, 7ms].\n//\n// This would mean the effective FPS was:\n//   [10, 20, 40, 76, 142].\n//\n// I think this is way too high, and might not be accurate (it doesn't count\n// time spent drawing the screen and running the game's logic, which might\n// be a significant number of milliseconds). From memory, each speed was about\n// 50% faster than the previous one, so that's what I've set here.\nexport const PLAY_SPEEDS = [10, 15, 23, 35, 50];\n\n// Score events (note, these are just identifiers for the types of score increases, not\n// actual score values).\nexport const SCORE_ROCK = 0\nexport const SCORE_STATUE = 1\nexport const SCORE_TREASURE = 2\n","'use strict';\n\nimport { GAME_WIDTH, GAME_HEIGHT } from './Constants';\n\n/**\n * Viewport\n *\n * Represents the game display (for us, a canvas).\n */\nexport const Viewport = {\n    init() {\n        Viewport.canvas = document.getElementById('canvas');\n        Viewport.ctx = Viewport.canvas.getContext('2d');\n        Viewport.resize(true);\n    },\n\n    // Resize the canvas to give us approximately our desired game display size.\n    //\n    // Rather than attempt to explain it, here's a concrete example:\n    //\n    //     we start with a desired game dimension:   480x270px\n    //          get the actual browser dimensions:  1309x468px\n    //          factor in the display's DPI ratio:  2618x936px\n    //         now calculate the horizontal scale:       5.45x\n    //                     and the vertical scale:       3.46x\n    //            our new offical game scaling is:        5.4x\n    //       and our official viewport dimensions:   484x173px\n    //\n    // This approach emphasizes correct aspect ratio and maintains full-window rendering, at\n    // the potential cost of limiting visibility of the game itself in either the X or Y axis.\n    // If you use this approach, make sure your GUI can \"float\" (otherwise there may be whole\n    // UI elements the player cannot see!).\n    resize(force) {\n        let dpi = window.devicePixelRatio,\n            width = Viewport.canvas.clientWidth,\n            height = Viewport.canvas.clientHeight,\n            dpiWidth = width * dpi,\n            dpiHeight = height * dpi;\n\n        if (\n            force ||\n            Viewport.canvas.width !== dpiWidth ||\n            Viewport.canvas.height !== dpiHeight\n        ) {\n            Viewport.canvas.width = dpiWidth;\n            Viewport.canvas.height = dpiHeight;\n\n            Viewport.scale = ((Math.min(dpiWidth / GAME_WIDTH, dpiHeight / GAME_HEIGHT) * 10) | 0) / 10;\n            Viewport.width = Math.ceil(dpiWidth / Viewport.scale);\n            Viewport.height = Math.ceil(dpiHeight / Viewport.scale);\n            Viewport.center = {\n                u: (Viewport.width / 2) | 0,\n                v: (Viewport.height / 2) | 0\n            };\n            Viewport.clientWidth = width;\n            Viewport.clientHeight = height;\n\n            // Note: smoothing flag gets reset on every resize by some browsers, which is why\n            // we do it here.\n            Viewport.ctx.imageSmoothingEnabled = false;\n        }\n\n        // We do this every frame, not just on resize, due to browser sometimes \"forgetting\".\n        //Viewport.canvas.style.cursor = 'none';\n    },\n\n    fillViewportRect() {\n        Viewport.ctx.fillRect(0, 0, Viewport.width, Viewport.height);\n    }\n};\n","'use strict';\n\nimport { game } from './Game';\nimport { Viewport } from './Viewport';\n\nexport function qr2xy(pos) {\n    return {\n        x: pos.q * 13,\n        y: pos.q * 6 + pos.r * 12\n    };\n}\n\nexport function xy2qr(pos) {\n    let qrFraction = {\n        q: (pos.x / 13),\n        r: ((pos.y - pos.x * 6 / 13) / 12)\n    };\n    return qrRounded(qrFraction);\n}\n\nexport function xy2uv(pos) {\n    return {\n        u: pos.x + Viewport.center.u - game.camera.pos.x,\n        v: pos.y + Viewport.center.v - game.camera.pos.y\n    };\n}\n\nexport function uv2xy(pos) {\n    return {\n        x: pos.u - Viewport.center.u + game.camera.pos.x,\n        y: pos.v - Viewport.center.v + game.camera.pos.y\n    };\n}\n\nexport function qr2qrs(pos) {\n    return { q: pos.q, r: pos.r, s: -pos.q-pos.r };\n}\n\nexport function qrs2qr(pos) {\n    return { q: pos.q, r: pos.r };\n}\n\n// When you \"round\" a fractional hexagonal value to an integer one (usually to convert\n// a mouse click to a hex grid), you can't just `Math.floor()` like you can with standard\n// square tiles - you'll never get the behavior right on the angled sides of the hexagons.\n//\n// To get the behavior you want, you need to convert to cubed coordinates (q,r,s), then\n// individually round each one and eliminate the one furthest away from your original value.\nexport function qrRounded(pos) {\n    let qrsA = qr2qrs(pos),\n        qrsB = {\n            q: Math.round(qrsA.q),\n            r: Math.round(qrsA.r),\n            s: Math.round(qrsA.s)\n        },\n        diffQ = Math.abs(qrsA.q - qrsB.q),\n        diffR = Math.abs(qrsA.r - qrsB.r),\n        diffS = Math.abs(qrsA.s - qrsB.s);\n\n    if (diffQ > diffR && diffQ > diffS) {\n        qrsB.q = -qrsB.r-qrsB.s;\n    } else if (diffR > diffS) {\n        qrsB.r = -qrsB.q-qrsB.s;\n    } else {\n        qrsB.s = -qrsB.q-qrsB.r;\n    }\n\n    return qrs2qr(qrsB);\n}\n\nexport function clamp(value, min, max) {\n    return value < min ? min : value > max ? max : value;\n}\n\nexport function flood(maze, pos, maxDistance = Infinity) {\n    let result = array2d(maze[0].length, maze.length, () => Infinity);\n    let stack = [{ ...pos, cost: 0 }];\n    while (stack.length > 0) {\n        let { q, r, cost } = stack.shift();\n        if (result[r][q] <= cost) continue;\n        result[r][q] = cost++;\n        if (result[r][q] >= maxDistance) continue;\n        if (maze[r][q + 1] && result[r][q + 1] > cost)\n            stack.push({ q: q + 1, r, cost });\n        if (maze[r][q - 1] && result[r][q - 1] > cost)\n            stack.push({ q: q - 1, r, cost });\n        if (maze[r + 1][q] && result[r + 1][q] > cost)\n            stack.push({ q, r: r + 1, cost });\n        if (maze[r - 1][q] && result[r - 1][q] > cost)\n            stack.push({ q, r: r - 1, cost });\n    }\n    return result;\n}\n\nexport function array2d(width, height, fn) {\n    return Array.from({ length: height }, () =>\n        Array.from({ length: width }, fn)\n    );\n}\n\nexport function tileIsPassable(q, r) {\n    if (game.brawl) {\n        let room = game.brawl.room;\n        if (\n            q < room.q ||\n            r < room.r ||\n            q >= room.q + room.w ||\n            r >= room.r + room.h\n        )\n            return false;\n    }\n    if (q < 0 || r < 0 || q >= game.maze.w || r >= game.maze.h) return false;\n    return !!game.maze.maze[r][q];\n}\n\nexport function rgba(r, g, b, a) {\n    return `rgba(${r},${g},${b},${a})`;\n}\n\nexport function createCanvas(width, height) {\n    let canvas = document.createElement('canvas');\n    canvas.width = width;\n    canvas.height = height;\n    let ctx = canvas.getContext('2d');\n    return { canvas, ctx };\n}\n\nexport function roomCenter(room) {\n    return {\n        x: (room.q + room.w / 2) * TILE_SIZE,\n        y: (room.r + room.h / 2) * TILE_SIZE\n    };\n}\n\nexport function partialText(text, t, d) {\n    let length = clamp(Math.ceil(t / d * text.length), 0, text.length),\n        substr = text.slice(0, length),\n        idx = text.indexOf(' ', length - 1);\n    if (idx < 0) idx = text.length;\n    if (idx - length > 0) substr += '#'.repeat(idx - length);\n\n    return substr;\n}\n","'use strict';\n\n/**\n * This module is generated by `gulp buildAssets`.\n */\nexport const SpriteSheet =\n    /* <generated> */\n{ font: [ [ 128, 0, 128, 448 ] ],\n  font2: [ [ 0, 0, 128, 512 ] ],\n  harold: [ [ 128, 448, 19, 12 ] ],\n  uri: 'sprites.png' }\n/* </generated> */\n","'use strict';\n\nimport { game } from './Game';\nimport { rgba, createCanvas } from './Util';\nimport { SpriteSheet } from './SpriteSheet-gen';\nimport { Viewport } from './Viewport';\n\n/**\n * Sprite\n *\n * Encapsulates loading sprite slices from the spritesheet, organizing them, and\n * modifying them or constructing using primitives. To save space, we use some techniques\n * like storing only a small slice of an image in the spritesheet, then using code\n * to duplicate it, add some randomness, etc.\n */\nexport const Sprite = {\n    // This is an exception to the rule, loading the spritesheet is a special action that\n    // happens BEFORE everything is initialized.\n    loadSpritesheet(cb) {\n        let image = new Image();\n        image.onload = cb;\n        image.src = SpriteSheet.uri;\n        Sprite.sheet = image;\n    },\n\n    init() {\n        // Base pixel font and icons (see `Text.init` for additional variations)\n        Sprite.font = initBasicSprite(SpriteSheet.font2[0]);\n\n        return;\n    },\n\n    /**\n     * A small helper that draws a sprite onto a canvas, respecting the anchor point of\n     * the sprite. Note that the canvas should be PRE-TRANSLATED and PRE-ROTATED, if\n     * that's appropriate!\n     */\n    drawSprite(ctx, sprite, u, v) {\n        ctx.drawImage(sprite.img, u - sprite.anchor.x, v - sprite.anchor.y);\n    },\n\n    drawViewportSprite(sprite, pos, rotation) {\n        let { u, v } = this.viewportSprite2uv(\n            sprite,\n            pos\n        );\n        if (rotation) {\n            Viewport.ctx.save();\n            Viewport.ctx.translate(u + sprite.anchor.x, v + sprite.anchor.y);\n            Viewport.ctx.rotate(rotation);\n            Viewport.ctx.drawImage(\n                sprite.img,\n                -sprite.anchor.x,\n                -sprite.anchor.y\n            );\n            Viewport.ctx.restore();\n        } else {\n            Viewport.ctx.drawImage(sprite.img, u, v);\n        }\n    },\n\n    viewportSprite2uv(sprite, pos) {\n        return {\n            u: pos.x - sprite.anchor.x - game.camera.pos.x + Viewport.center.u,\n            v: pos.y - sprite.anchor.y - game.camera.pos.y + Viewport.center.v\n        };\n    }\n};\n\n// Sprite utility functions\n\nfunction initBasicSprite(data, anchor) {\n    return initDynamicSprite(loadCacheSlice(...data), anchor);\n}\n\nfunction initDynamicSprite(source, anchor) {\n    let w = source.width,\n        h = source.height;\n\n    return {\n        img: source,\n        // Hack! Using a flat `.map(initBasicSprite)` is actually going to pass the\n        // element INDEX as second argument, resulting in \"anchor=1\". The right solution\n        // here is \"typeof anchor === 'object' ?\", but to save bytes I avoid using\n        // the typeof and instanceof keywords anywhere in the codebase. Hence,\n        // \"anchor && anchor.x\".\n        anchor: (anchor && anchor.x) ? anchor : { x: (w / 2) | 0, y: (h / 2) | 0 }\n    };\n}\n\nfunction loadCacheSlice(x, y, w, h) {\n    const source = Sprite.sheet;\n    const sliceCanvas = createCanvas(w, h);\n    sliceCanvas.ctx.drawImage(source, x, y, w, h, 0, 0, w, h);\n    return sliceCanvas.canvas;\n}\n","\n// A list of in-game actions that can be performed by the player\nconst Action = {\n    UP:    11,\n    DOWN:  12,\n    LEFT:  13,\n    RIGHT: 14,\n    JUMP:  15,\n    STOP:  16,\n    PAUSE: 17\n};\n\n// A list of key code mappings and what action they perform. Here we hard-code it, but\n// you could easily also have the key mappings controlled by settings and let the user\n// configure it.\nconst KeyMapping = {\n    KeyW:       Action.UP,\n    KeyS:       Action.DOWN,\n    KeyA:       Action.LEFT,\n    KeyD:       Action.RIGHT,\n    ArrowUp:    Action.UP,\n    ArrowDown:  Action.DOWN,\n    ArrowLeft:  Action.LEFT,\n    ArrowRight: Action.RIGHT,\n    Space:      Action.JUMP\n};\n\nexport const Input = {\n    Action,\n    KeyMapping,\n\n    init() {\n        // Input buffer - new keypress events go into this buffer to be handled\n        // during the game's update loop. It's up to the `update()` methods to consume\n        // key presses and remove them from the buffer.\n        this.buffer = [];\n\n        // Input history - history contains recent key press events in order,\n        // removed automatically after a few seconds. This is useful for detecting\n        // inputs like cheat codes, for example.\n        this.history = [];\n\n        window.addEventListener('keydown', event => {\n            let entry = {\n                at: new Date().getTime(),\n                key: event.key,\n                code: event.code,\n                action: Input.KeyMapping[event.code] || Input.Action.STOP\n            };\n            Input.buffer.push(entry);\n            Input.history.push(entry);\n            console.log(entry);\n        });\n    },\n\n    update() {\n        let now = new Date().getTime();\n        this.history = this.history.filter(entry => entry.at > now - 3000);\n    },\n\n    lastKeyPressed() {\n        return this.buffer.length > 0 ? this.buffer[this.buffer.length - 1].key : '';\n    },\n\n    lastCodePressed() {\n        return this.buffer.length > 0 ? this.buffer[this.buffer.length - 1].code : '';\n    },\n\n    lastActionPressed() {\n        return this.buffer.length > 0 ? this.buffer[this.buffer.length - 1].action : undefined;\n    },\n\n    consume() {\n        this.buffer = [];\n    },\n}\n","'use strict';\n\nimport { Sprite } from './Sprite';\nimport { rgba, createCanvas } from './Util';\nimport { CHAR_WIDTH, CHAR_HEIGHT, CHARSHEET_WIDTH } from './Constants';\nimport { Viewport } from './Viewport';\n\n\n// In our character sheet, chars 0x00-0x7F are standard ASCII, below that we put whatever\n// characters are convenient for us. Here we can choose to map unicode characters to positions\n// 0x80+ in the charsheet, making it easy for us to render things like special characters,\n// box drawing characters, etc.\nconst SUPPORTED_UNICODE_CHARS = [\n    '─│┌┐└┘├┤┬┴┼╳╳╳╳╳',\n    '═║╔╗╚╝╠╣╦╩╬╳╳╳╳╳',\n    '↑↓←→╳╳╳╳╳╳╳╳╳╳╳╳'\n].join('');\n\nconst UNICODE_CHAR_MAP = SUPPORTED_UNICODE_CHARS.split('').reduce((map, char, idx) => {\n    map[char] = 0x80 + idx;\n    return map;\n}, {});\n\n/**\n * Text\n *\n * Utilities for drawing text using in-game pixel font.\n */\nexport const Text = {\n    init() {\n        Text.white = Sprite.font.img;\n\n        Text.black = recolor(Text.white, rgba(0, 0, 0, 1));\n        Text.black_shadow = recolor(Text.white, rgba(90, 20, 90, 0.15));\n        Text.blue = recolor(Text.white, rgba(200, 40, 220, 1));\n        Text.blue_shadow = recolor(Text.white, rgba(240, 50, 200, 0.2));\n        Text.shadow = recolor(Text.white, rgba(240, 240, 255, 0.25));\n        Text.red = recolor(Text.white, rgba(240, 50, 50, 1));\n\n        Text.terminal = recolor(Text.white, rgba(51, 255, 0, 1));\n        Text.terminal_shadow = recolor(Text.white, rgba(255, 255, 255, 0.3));\n\n        Text.terminal = recolor(Text.white, rgba(51, 255, 0, 0.9));\n        Text.terminal_shadow = undefined;\n\n        Text['#ead4aa'] = recolor(Text.white, '#ead4aa');\n        Text['#fee761'] = recolor(Text.white, '#fee761');\n        Text['#ff0044'] = recolor(Text.white, '#ff0044');\n    },\n\n    drawText(ctx, text, u, v, scale = 1, font = Text.white, shadow) {\n        if (Array.isArray(text)) {\n            for (let block of text) {\n                Text.drawText(ctx, block.text, u + block.u * scale, v + block.v * scale, scale, font, shadow);\n            }\n            return;\n        }\n\n        for (let idx = 0; idx < text.length; idx++) {\n            let c = UNICODE_CHAR_MAP[text[idx]] || text.charCodeAt(idx);\n            let k = (c - 0) * (CHAR_WIDTH);\n            if (shadow) {\n                ctx.drawImage(\n                    shadow,\n                    k % CHARSHEET_WIDTH,\n                    Math.floor(k / CHARSHEET_WIDTH) * CHAR_HEIGHT,\n                    CHAR_WIDTH,\n                    CHAR_HEIGHT,\n                    u + 1,\n                    v,\n                    CHAR_WIDTH * scale,\n                    CHAR_HEIGHT * scale\n                );\n            }\n            ctx.drawImage(\n                font,\n                k % CHARSHEET_WIDTH,\n                Math.floor(k / CHARSHEET_WIDTH) * CHAR_HEIGHT,\n                CHAR_WIDTH,\n                CHAR_HEIGHT,\n                u,\n                v,\n                CHAR_WIDTH * scale,\n                CHAR_HEIGHT * scale\n            );\n            u += CHAR_WIDTH * scale;\n        }\n    },\n\n    /*\n    drawRightText(ctx, text, u, v, scale = 1, font = Text.white, shadow) {\n        u -= Text.measureWidth(text, scale);\n        Text.drawText(ctx, text, u, v, scale, font, shadow);\n    },\n    */\n\n    measureWidth(text, scale = 1) {\n        return text.split('').reduce((sum, c) => sum + CHAR_WIDTH, 0) * scale;\n    },\n\n    splitParagraph(text, w, h) {\n        let cu = 0, cv = 0;\n        let next = () => ({ text: '', u: cu, v: cv });\n        let wip = next();\n        let list = [];\n\n        for (let c of text.split('')) {\n            let cWidth = Text.measureWidth(c, 1);\n            if (c === '\\n' || cu + cWidth > w) {\n                let saved = '';\n                if (c !== '\\n' && c !== ' ') {\n                    let space = wip.text.split(' ');\n                    if (space.length > 1) {\n                        saved = space.pop();\n                        wip.text = space.join(' ');\n                    }\n                }\n                if (wip.text.length > 0) list.push(wip);\n                cu = 0;\n                cv += (CHAR_HEIGHT);\n                wip = next();\n                if (saved.length > 0) {\n                    wip.text = saved;\n                    cu += Text.measureWidth(wip.text, 1);\n                }\n            } else {\n                cu += cWidth;\n            }\n            if (c !== '\\n') {\n                wip.text = wip.text + c;\n            }\n        }\n\n        if (wip.text.length > 0) list.push(wip);\n\n        return list.map(line => ({\n            ...line,\n            w: Text.measureWidth(line.text, 1),\n            h: CHAR_HEIGHT\n        }));\n    },\n\n    drawTextColRow(text, col, row) {\n        Text.drawText(Viewport.ctx, Text.splitParagraph(text, Viewport.width), col * CHAR_WIDTH, row * CHAR_HEIGHT, 1, Text.terminal, Text.terminal_shadow);\n    }\n};\n\n// Text utility functions\n\nfunction recolor(font, color) {\n    let canvas = createCanvas(font.width, font.height);\n    canvas.ctx.fillStyle = color;\n    canvas.ctx.fillRect(0, 0, font.width, font.height);\n    canvas.ctx.globalCompositeOperation = 'destination-in';\n    canvas.ctx.drawImage(font, 0, 0);\n    return canvas.canvas;\n}\n","// zzfx() - the universal entry point -- returns a AudioBufferSourceNode\nexport const zzfx=(...t)=>zzfxP(zzfxG(...t))\n\n// zzfxP() - the sound player -- returns a AudioBufferSourceNode\nexport const zzfxP=(...t)=>{let e=zzfxX.createBufferSource(),f=zzfxX.createBuffer(t.length,t[0].length,zzfxR);t.map((d,i)=>f.getChannelData(i).set(d)),e.buffer=f,e.connect(zzfx.destination_),e.start();return e}\n\n// zzfxG() - the sound generator -- returns an array of sample data\nexport const zzfxG=(q=1,k=.05,c=220,e=0,t=0,u=.1,r=0,F=1,v=0,z=0,w=0,A=0,l=0,B=0,x=0,G=0,d=0,y=1,m=0,C=0)=>{let b=2*Math.PI,H=v*=500*b/zzfxR**2,I=(0<x?1:-1)*b/4,D=c*=(1+2*k*Math.random()-k)*b/zzfxR,Z=[],g=0,E=0,a=0,n=1,J=0,K=0,f=0,p,h;e=99+zzfxR*e;m*=zzfxR;t*=zzfxR;u*=zzfxR;d*=zzfxR;z*=500*b/zzfxR**3;x*=b/zzfxR;w*=b/zzfxR;A*=zzfxR;l=zzfxR*l|0;for(h=e+m+t+u+d|0;a<h;Z[a++]=f)++K%(100*G|0)||(f=r?1<r?2<r?3<r?Math.sin((g%b)**3):Math.max(Math.min(Math.tan(g),1),-1):1-(2*g/b%2+2)%2:1-4*Math.abs(Math.round(g/b)-g/b):Math.sin(g),f=(l?1-C+C*Math.sin(2*Math.PI*a/l):1)*(0<f?1:-1)*Math.abs(f)**F*q*zzfxV*(a<e?a/e:a<e+m?1-(a-e)/m*(1-y):a<e+m+t?y:a<h-d?(h-a-d)/u*y:0),f=d?f/2+(d>a?0:(a<h-d?1:(h-a)/d)*Z[a-d|0]/2):f),p=(c+=v+=z)*Math.sin(E*x-I),g+=p-p*B*(1-1E9*(Math.sin(a)+1)%2),E+=p-p*B*(1-1E9*(Math.sin(a)**2+1)%2),n&&++n>A&&(c+=w,D+=w,n=0),!l||++J%l||(c=D,v=H,n=n||1);return Z}\n\n// zzfxV - global volume\nexport const zzfxV=.3\n\n// zzfxR - global sample rate\nexport const zzfxR=44100\n\n// zzfxX - the common audio context\nexport const zzfxX=new(top.AudioContext||webkitAudioContext);\n\n// destination for zzfx and zzfxm sounds\nzzfx.destination_ = zzfxX.destination;\n","'use strict';\n\nimport { zzfxG, zzfxR } from './zzfx';\n\n/**\n * ZzFX Music Renderer v2.0.2 by Keith Clark\n */\n\n/**\n * @typedef Channel\n * @type {Array.<Number>}\n * @property {Number} 0 - Channel instrument\n * @property {Number} 1 - Channel panning (-1 to +1)\n * @property {Number} 2 - Note\n */\n\n/**\n * @typedef Pattern\n * @type {Array.<Channel>}\n */\n\n/**\n * @typedef Instrument\n * @type {Array.<Number>} ZzFX sound parameters\n */\n\n/**\n * Generate a song\n *\n * @param {Array.<Instrument>} instruments - Array of ZzFX sound paramaters.\n * @param {Array.<Pattern>} patterns - Array of pattern data.\n * @param {Array.<Number>} sequence - Array of pattern indexes.\n * @param {Number} [speed=125] - Playback speed of the song (in BPM).\n * @returns {Array.<Array.<Number>>} Left and right channel sample data.\n */\n\nexport const zzfxM = (instruments, patterns, sequence, BPM = 125) => {\n    let instrumentParameters,\n        i,\n        j,\n        k,\n        note,\n        sample,\n        patternChannel,\n        notFirstBeat,\n        stop,\n        instrument,\n        pitch,\n        attenuation,\n        outSampleOffset,\n        sampleOffset,\n        nextSampleOffset,\n        sampleBuffer = [],\n        leftChannelBuffer = [],\n        rightChannelBuffer = [],\n        channelIndex = 0,\n        panning,\n        hasMore = 1,\n        sampleCache = {},\n        beatLength = ((zzfxR / BPM) * 60) >> 2;\n\n    // for each channel in order until there are no more\n    for (; hasMore; channelIndex++) {\n        // reset current values\n        sampleBuffer = [(hasMore = notFirstBeat = pitch = outSampleOffset = 0)];\n\n        // for each pattern in sequence\n        sequence.map((patternIndex, sequenceIndex) => {\n            // get pattern for current channel, use empty 1 note pattern if none found\n            patternChannel = patterns[patternIndex][channelIndex] || [0, 0, 0];\n\n            // check if there are more channels\n            hasMore |= !!patterns[patternIndex][channelIndex];\n\n            // get next offset, use the length of first channel\n            nextSampleOffset =\n                outSampleOffset +\n                (patterns[patternIndex][0].length - 2 - !notFirstBeat) *\n                    beatLength;\n\n            // for each beat in pattern, plus one extra if end of sequence\n            for (\n                i = 2, k = outSampleOffset;\n                i <\n                patternChannel.length + (sequenceIndex == sequence.length - 1);\n                notFirstBeat = ++i\n            ) {\n                // <channel-note>\n                note = patternChannel[i];\n\n                // stop if different instrument or new note\n                stop = (instrument != (patternChannel[0] || 0)) | note | 0;\n\n                // fill buffer with samples for previous beat, most cpu intensive part\n                for (\n                    j = 0;\n                    j < beatLength && notFirstBeat;\n                    // fade off attenuation at end of beat if stopping note, prevents clicking\n                    j++ > beatLength - 99 && stop\n                        ? (attenuation += (attenuation < 1) / 99)\n                        : 0\n                ) {\n                    // copy sample to stereo buffers with panning\n                    sample =\n                        ((1 - attenuation) * sampleBuffer[sampleOffset++]) /\n                            2 || 0;\n                    leftChannelBuffer[k] =\n                        (leftChannelBuffer[k] || 0) + sample * panning - sample;\n                    rightChannelBuffer[k] =\n                        (rightChannelBuffer[k++] || 0) +\n                        sample * panning +\n                        sample;\n                }\n\n                // set up for next note\n                if (note) {\n                    // set attenuation\n                    attenuation = note % 1;\n                    panning = patternChannel[1] || 0;\n                    if ((note |= 0)) {\n                        // get cached sample\n                        sampleBuffer = sampleCache[\n                            [\n                                (instrument =\n                                    patternChannel[(sampleOffset = 0)] || 0),\n                                note\n                            ]\n                        ] =\n                            sampleCache[[instrument, note]] ||\n                            // add sample to cache\n                            ((instrumentParameters = [\n                                ...instruments[instrument]\n                            ]),\n                            (instrumentParameters[2] *=\n                                2 ** ((note - 12) / 12)),\n                            zzfxG(...instrumentParameters));\n                    }\n                }\n            }\n\n            // update the sample offset\n            outSampleOffset = nextSampleOffset;\n        });\n    }\n\n    return [leftChannelBuffer, rightChannelBuffer];\n};\n","export const ObliqueMystique = [[[1.3,0,23,,,.2,3,5],[1.5,0,4e3,,,.03,2,1.25,,,,,.02,6.8,-.3,,.5],[.7,0,2100,,,.2,3,3,,,-400,,,2],[,0,655,,,.11,2,1.65,,,,,,3.8,-.1,.1]],[[[,-.5,13,,,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,14,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,14,,,,],[1,.3,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,],[2,1,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,],[,.6,,,,,13,,18,,19,,,,,,,,19,,18,,,,16,,,,13,,,,,,,,,,13,,18,,19,,,,,,,,18,19,18,,,,13,14,13,,16,,18,,19,,],[3,-1,,,13,,,,,,,,,,,,13,,,,,,,,,,,,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,,,13,13,13,13]],[[,-.5,13,,,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,14,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,14,,,,],[1,.3,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,],[2,1,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,]]],[1,1,0,0,0,0,1,0],,]\n","'use strict';\n\nimport { zzfx, zzfxP, zzfxX } from './lib/zzfx';\nimport { zzfxM } from './lib/zzfxm';\nimport { ObliqueMystique } from './songs/ObliqueMystique';\n\nexport const Audio = {\n    init() {\n        Audio.readyToPlay = false;\n\n        Audio.ctx = zzfxX;\n        Audio.gain_ = Audio.ctx.createGain();\n        Audio.gain_.connect(Audio.ctx.destination);\n        zzfx.destination_ = Audio.gain_;\n\n        Audio.shotgun = [,0.01,140,0.01,0.02,0.45,4,2.42,0.1,-0.1,,,,1.2,,0.3,0.04,0.8,0.02];\n        Audio.page = [,,1233,,.01,.2,1,1.43,,,539,.1,,,,,,.51,.03,.01];\n        Audio.shellReload = [,,68,0.01,,0.14,1,1.53,7.5,0.1,50,0.02,-0.01,-0.2,0.1,0.2,,0.47,0.01];\n        Audio.damage = [,,391,,.19,.01,2,.54,-4,20,,,,,,,.02,.9];\n        Audio.alarm = [,,970,.12,.25,.35,,.39,8.1,,10,.1,.2,,.1,,,.6,.09,.13];\n        // [,,961,.05,.06,1.17,1,4.67,.8,,,,,.8,-0.8,.1,.49,.62,.09];\n        Audio.victory = [,,454,.06,.86,.71,2,.63,-0.7,1.7,-83,.09,.27,.3,.2,,.18,.95,.02,.02];\n        Audio.song = zzfxM(...ObliqueMystique);\n\n        // Save our background music in os13k, for fun!\n        //localStorage[`OS13kMusic,${TITLE} - Oblique Mystique`] = JSON.stringify(ObliqueMystique);\n    },\n\n    update() {\n        if (!Audio.readyToPlay) return;\n\n        if (!Audio.musicPlaying) {\n            //Audio.bgmusicnode = zzfxP(...Audio.song);\n            //Audio.bgmusicnode.loop = true;\n            Audio.musicPlaying = true;\n        }\n    },\n\n    play(sound) {\n        if (!Audio.readyToPlay) return;\n        zzfx(...sound);\n    },\n\n    // It's important we do pausing and unpausing as specific events and not in general update(),\n    // because update() is triggered by the animation frame trigger which does not run if the\n    // page is not visible. (So, if you want the music to fade in the background, for example,\n    // that's not helpful if it won't work because you aren't looking at the page!)\n\n    pause() {\n        Audio.gain_.gain.linearRampToValueAtTime(0, Audio.ctx.currentTime + 1);\n    },\n\n    unpause() {\n        Audio.gain_.gain.linearRampToValueAtTime(1, Audio.ctx.currentTime + 1);\n    }\n};\n","// https://jonny.morrill.me/en/blog/gamedev-how-to-implement-a-camera-shake-effect/\n\n/**\n * Shake it baby.\n */\nexport class ScreenShake {\n    constructor(frames, hAmplitude, vAmplitude) {\n        this.frames = frames;\n        this.hAmplitude = hAmplitude;\n        this.vAmplitude = vAmplitude;\n        this.hSamples = [];\n        this.vSamples = [];\n\n        var sampleCount = frames / 2;\n        for (let i = 0; i < sampleCount; i++) {\n            this.hSamples.push(Math.random() * 2 - 1);\n            this.vSamples.push(Math.random() * 2 - 1);\n        }\n        this.frame = -1;\n    }\n\n    update() {\n        this.frame++;\n        if (this.frame >= this.frames) {\n            return false;\n        }\n\n        //let s = (this.frames / 10) * (this.frame / this.frames);\n        let s = this.frame / 2;\n        let s0 = s | 0;\n        let s1 = s0 + 1;\n        let decay = 1 - this.frame / this.frames;\n\n        this.x =\n            this.hAmplitude *\n            decay *\n            (this.hSamples[s0] +\n                (s - s0) * (this.hSamples[s1] - this.hSamples[s0]));\n        this.y =\n            this.vAmplitude *\n            decay *\n            (this.vSamples[s0] +\n                (s - s0) * (this.vSamples[s1] - this.vSamples[s0]));\n\n        return true;\n    }\n}\n","import { SCREEN_WIDTH, SCREEN_HEIGHT } from './Constants';\nimport { Viewport } from './Viewport';\nimport { Text } from './Text';\n\nexport const Screen = {\n    init() {\n        this.screen = [];\n        for (let y = 0; y < SCREEN_HEIGHT; y++) {\n            this.screen.push([]);\n        }\n        this.clear();\n    },\n\n    clear() {\n        for (let y = 0; y < SCREEN_HEIGHT; y++) {\n            for (let x = 0; x < SCREEN_WIDTH; x++) {\n                this.screen[y][x] = ' ';\n            }\n        }\n    },\n\n    write(x, y, text) {\n        if (!Array.isArray(text)) text = [text];\n\n        for (let j = 0; j < text.length; j++) {\n            for (let i = 0; i < text[j].length; i++) {\n                this.screen[y + j][x + i] = text[j][i];\n            }\n        }\n    },\n\n    drawToViewport() {\n        let text = this.screen.map(row => row.join('')).join('\\n');\n\n        Text.drawText(\n            Viewport.ctx,\n            Text.splitParagraph(text, Viewport.width),\n            0, 0,\n            1,\n            Text.terminal, Text.terminal_shadow\n        );\n    }\n};\n","import { Screen } from './Screen';\nimport { game } from './Game';\nimport { PLAY_SPEEDS } from './Constants';\nimport { Input } from './Input';\n\nexport class MainMenu {\n    constructor() {\n    }\n\n    update() {\n        switch (Input.lastKeyPressed().toUpperCase()) {\n            case 'P':\n                Input.consume();\n                game.startSession();\n                break;\n            case 'L':\n                Input.consume();\n                game.playSpeed = (game.playSpeed + 1) % PLAY_SPEEDS.length;\n                break;\n            case 'I':\n                Input.consume();\n                game.showInstructions();\n                break;\n            case 'E':\n                Input.consume();\n                game.showInstructions();\n                break;\n        }\n    }\n\n    draw() {\n        let version = '?';\n        let terminal = '?';\n\n        let highScores = [\n            `1) 6000  Bob`,\n            `2) 6000  Tom`,\n            `3) 4000  Wayne`,\n            ``,\n            ``\n        ];\n\n        Screen.clear();\n        Screen.write(0, 0, [\n            `               LL                     dd       dd`,\n            `               LL                     dd       dd                      tm`,\n            `               LL         aaaa     ddddd    ddddd    eeee   rrrrrrr`,\n            `               LL        aa  aa   dd  dd   dd  dd   ee  ee  rr    rr`,\n            `               LL        aa  aa   dd  dd   dd  dd   eeeeee  rr`,\n            `               LL        aa  aa   dd  dd   dd  dd   ee      rr`,\n            `               LLLLLLLL   aaa aa   ddd dd   ddd dd   eeee   rr`,\n            ``,\n            `                                       Version:    ${version}`,\n            `(c) 1982, 1983 Yahoo Software          Terminal:   ${terminal}`,\n            `10970 Ashton Ave.  Suite 312           Play speed: ${game.playSpeed + 1} / ${PLAY_SPEEDS.length}`,\n            `Los Angeles, Ca  90024                 Move = ↑↓←→/WASD, Jump = Space,`,\n            `                                       Stop = Other`,\n            ``,\n            `P = Play game                          High Scores`,\n            `L = Change level of difficulty         ${highScores[0]}`,\n            `C = Configure Ladder                   ${highScores[1]}`,\n            `I = Instructions                       ${highScores[2]}`,\n            `E = Exit Ladder                        ${highScores[3]}`,\n            `                                       ${highScores[4]}`,\n            ``,\n            `Enter one of the above:`\n        ]);\n    }\n}\n","import { Screen } from './Screen';\nimport { game } from './Game';\nimport { Input } from './Input';\n\nexport class InstructionsMenu {\n    constructor() {\n    }\n\n    update() {\n        if (Input.lastKeyPressed().toUpperCase() !== '') {\n            Input.consume();\n            game.showMainMenu();\n        }\n    }\n\n    draw() {\n        Screen.clear();\n        Screen.write(0, 0, [\n            `You are a Lad trapped in a maze.  Your mission is is to explore the`,\n            `dark corridors never before seen by human eyes and find hidden`,\n            `treasures and riches.`,\n            ``,\n            `You control Lad by typing the direction buttons and jumping by`,\n            `typing SPACE.  But beware of the falling rocks called Der rocks.`,\n            `You must find and grasp the treasures (shown as $) BEFORE the`,\n            `bonus time runs out.`,\n            ``,\n            `A new Lad will be awarded for every 10,000 points.`,\n            `Extra points are awarded for touching the gold`,\n            `statues (shown as &).  You will receive the bonus time points`,\n            `that are left when you have finished the level.`,\n            ``,\n            `Type an ESCape to pause the game.`,\n            ``,\n            `Remember, there is more than one way to skin a cat. (Chum)`,\n            ``,\n            `Good luck Lad.`,\n            ``,\n            ``,\n            ``,\n            `Type RETURN to return to main menu:`\n        ]);\n    }\n}\n","\n// This is our list of STATES. Each entity starts out in one of these states and can move between\n// them based on events that happen in the game. (Note that some of these are directions, but\n// since an entity keeps moving in the direction it is going unless stopped, directions are\n// states in this game.)\nexport const State = {\n    STOPPED:    1,         // Standing still\n    UP:         2,         // Moving up (player only)\n    LEFT:       3,         // Moving left\n    DOWN:       4,         // Moving down\n    RIGHT:      5,         // Moving right\n    FALLING:    6,         // Falling\n    START_JUMP: 7,         // About to start a jump (player only)\n    JUMP_LEFT:  8,         // Jumping left (player only)\n    JUMP_RIGHT: 9,         // Jumping right (player only)\n    JUMP_UP:    10,        // Jumping straight up (player only)\n    DYING:      11,        // Dying (used as a death animation)\n    DEAD:       12         // Dead (for player, restart level; for rock, disappear)\n};\n\nexport const JUMP_FRAMES = {\n    [State.JUMP_RIGHT]: [\n        { x: 1, y: -1 },\n        { x: 1, y: -1 },\n        { x: 1, y: 0 },\n        { x: 1, y: 0 },\n        { x: 1, y: 1 },\n        { x: 1, y: 1 }\n    ],\n    [State.JUMP_LEFT]: [\n        { x: -1, y: -1 },\n        { x: -1, y: -1 },\n        { x: -1, y: 0 },\n        { x: -1, y: 0 },\n        { x: -1, y: 1 },\n        { x: -1, y: 1 }\n    ],\n    [State.JUMP_UP]: [\n        { x: 0, y: -1 },\n        { x: 0, y: -1 },\n        { x: 0, y: 0 },\n        { x: 0, y: 1 },\n        { x: 0, y: 1 },\n        { x: 0, y: 0 }\n    ],\n};\n","import { State, JUMP_FRAMES } from './Behavior';\nimport { LEVEL_COLS } from './Constants';\n\nexport class Entity {\n    applyMovement(field) {\n        let repeat = false;\n\n        // This method contains generic \"movement\" application for all entities, including\n        // Lad (player) and Der Rocks (enemies). Things like falling, moving left/right, etc.,\n        // work the same for both.\n        //\n        // (There's a bunch of jump logic in here too, and moving UP, which really only applies\n        // to players, but that's OK -- Der Rocks just won't attempt those actions.)\n\n        if (this.nextState) {\n            switch (this.state) {\n                case State.STOPPED:\n                case State.LEFT:\n                case State.RIGHT:\n                    if ([State.LEFT, State.RIGHT, State.STOPPED].includes(this.nextState)) {\n                        this.state = this.nextState;\n                        this.nextState = undefined;\n                    }\n                    break;\n\n                case State.UP:\n                case State.DOWN:\n                    // Normal\n                    if ([State.LEFT, State.RIGHT].includes(this.nextState)) {\n                        this.state = this.nextState;\n                        this.nextState = undefined;\n                    }\n                    break;\n            }\n        }\n\n        if (this.nextState === State.START_JUMP) {\n            // Special case: the user wants to jump!\n            //\n            // If the player is standing on something solid, we initiate a jump based on the current\n            // movement of the player. If not, we (sort of) ignore the request to jump... although\n            // it does subtly change the behavior upon landing.\n            if (field.onSolid(this.x, this.y)) {\n                if (this.state === State.STOPPED || this.state === State.FALLING) {\n                    this.state = State.JUMP_UP;\n                    this.jumpStep = 0;\n                    this.nextState = State.STOPPED;\n                } else if (this.state === State.LEFT || this.state === State.JUMP_LEFT) {\n                    this.state = State.JUMP_LEFT;\n                    this.jumpStep = 0;\n                    this.nextState = State.LEFT;\n                } else if (this.state === State.RIGHT || this.state === State.JUMP_RIGHT) {\n                    this.state = State.JUMP_RIGHT;\n                    this.jumpStep = 0;\n                    this.nextState = State.RIGHT;\n                }\n            } else {\n                if (this.state === State.JUMP_UP || this.state === State.FALLING) {\n                    this.nextState = State.STOPPED;\n                } else if (this.state === State.JUMP_RIGHT) {\n                    this.nextState = State.RIGHT;\n                } else if (this.state === State.JUMP_LEFT) {\n                    this.nextState = State.LEFT;\n                }\n            }\n        } else if (this.nextState === State.UP && field.isLadder(this.x, this.y)) {\n            // Special case: the user wants to go up!\n            //\n            // If the user is on a ladder, we can start ascending. Note that if the user is not\n            // on a ladder we ignore their input, which is intentional -- this allows queued\n            // (pacman) input, where we can tap UP a little before reaching the ladder.\n            this.state = State.UP;\n            this.nextState = undefined;\n        } else if (this.nextState === State.DOWN && (field.isLadder(this.x, this.y) || field.isLadder(this.x, this.y + 1))) {\n            // Special case: the player wants to go down!\n            //\n            // If the player is on (or above) a ladder, we can start descending. Note that if the player is not\n            // on a ladder we ignore their input, which is intentional -- this allows queued\n            // (pacman) input, where we can tap DOWN a little before reaching the ladder.\n            this.state = State.DOWN;\n            this.nextState = undefined;\n        }\n\n        switch (this.state) {\n            case State.LEFT:\n                if (!field.onSolid(this.x, this.y)) {\n                    this.nextState = State.LEFT;\n                    this.state = State.FALLING;\n                    repeat = true;\n                    break;\n                }\n                if (field.emptySpace(this.x - 1, this.y)) {\n                    this.x--;\n                } else {\n                    this.nextState = State.STOPPED;\n                }\n                break;\n\n            case State.RIGHT:\n                if (!field.onSolid(this.x, this.y)) {\n                    this.nextState = State.RIGHT;\n                    this.state = State.FALLING;\n                    repeat = true;\n                    break;\n                }\n                if (field.emptySpace(this.x + 1, this.y)) {\n                    this.x++;\n                } else {\n                    this.nextState = State.STOPPED;\n                }\n                break;\n\n            case State.UP:\n                if (field.canClimbUp(this.x, this.y - 1)) {\n                    this.y--;\n                } else {\n                    this.state = State.STOPPED;\n                }\n                break;\n\n            case State.DOWN:\n                if (field.canClimbDown(this.x, this.y + 1)) {\n                    this.y++;\n                } else {\n                    this.state = State.STOPPED;\n                }\n                break;\n\n            case State.JUMP_RIGHT:\n            case State.JUMP_LEFT:\n            case State.JUMP_UP:\n                let step = JUMP_FRAMES[this.state][this.jumpStep];\n                console.log(['jump', this.state, this.jumpStep, step]);\n                if ((this.x + step.x >= 0) && (this.x + step.x < LEVEL_COLS)) {\n                    let terrain = field.layout[this.y + step.y][this.x + step.x];\n                    if (['=', '|', '-'].includes(terrain)) {\n                        if (field.onSolid(this.x, this.y)) {\n                            this.state = this.nextState;\n                            this.nextState = undefined;\n                        } else {\n                            switch (this.state) {\n                                case State.JUMP_RIGHT:\n                                    this.nextState = State.RIGHT;\n                                    break;\n                                case State.JUMP_LEFT:\n                                    this.nextState = State.LEFT;\n                                    break;\n                                case State.JUMP_UP:\n                                    this.nextState = State.UP;\n                                    break;\n                            }\n                            this.state = State.FALLING;\n                        }\n                    } else if (terrain === 'H') {\n                        this.x += step.x;\n                        this.y += step.y;\n                        this.state = State.STOPPED;\n                        this.nextState = undefined;\n                    } else {\n                        this.x += step.x;\n                        this.y += step.y;\n                        this.jumpStep++;\n\n                        if (this.jumpStep >= JUMP_FRAMES[this.state].length) {\n                            this.state = this.nextState;\n                            this.nextState = undefined;\n                        }\n                    }\n                } else {\n                    if (field.onSolid(this.x, this.y)) {\n                        this.state = this.nextState;\n                        this.nextState = undefined;\n                    } else {\n                        this.state = State.FALLING;\n                        this.nextState = State.STOPPED;\n                    }\n                }\n                break;\n\n            case State.FALLING:\n                if (field.onSolid(this.x, this.y)) {\n                    this.state = this.nextState || State.STOPPED;\n                } else {\n                    this.y++;\n                }\n                break;\n        }\n\n        // If we were attempting to move somewhere and realized we should be falling instead,\n        // we want to re-run the entire algorithm once. This avoids what boils down to a \"skipped\n        // frame\" from the user's point of view.\n        if (repeat) return this.applyMovement(field);\n    }\n}\n","'use strict';\n\nimport { Sprite } from './Sprite';\nimport { State, JUMP_FRAMES } from './Behavior';\nimport { Input } from './Input';\nimport { Text } from './Text';\nimport { LEVEL_ROWS, LEVEL_COLS } from './Constants';\nimport { Entity } from './Entity';\nimport { Screen } from './Screen';\nimport { game } from './Game';\n\nconst DEATH_FRAMES = ['p', 'p', 'b', 'd', 'd', 'q', 'p', 'p', 'b', 'd', 'd', 'q', '-', '-', '_', '_', '_', '_', '_'];\n\n/**\n * Player\n */\nexport class Player extends Entity {\n    constructor(x, y) {\n        super();\n        this.x = x;\n        this.y = y;\n        this.state = State.STOPPED;\n        this.nextState = State.STOPPED;\n        this.jumpStep = 0;\n        this.deathStep = 0;\n        console.log('player constructed', x, y);\n    }\n\n    update(field, moveFrame) {\n        if (this.state === State.DYING) {\n            this.deathStep++;\n            if (this.deathStep >= DEATH_FRAMES.length) this.state = State.DEAD;\n        }\n\n        if (this.state === State.DYING || this.state === State.DEAD) return;\n\n        if (!moveFrame) return;\n\n        let action = Input.lastActionPressed();\n\n        if (action === Input.Action.LEFT) {\n            this.nextState = State.LEFT;\n            Input.consume();\n        } else if (action === Input.Action.RIGHT) {\n            this.nextState = State.RIGHT;\n            Input.consume();\n        } else if (action === Input.Action.UP) {\n            this.nextState = State.UP;\n            Input.consume();\n        } else if (action === Input.Action.DOWN) {\n            this.nextState = State.DOWN;\n            Input.consume();\n        } else if (action === Input.Action.JUMP) {\n            this.nextState = State.START_JUMP;\n            Input.consume();\n        }\n\n        return this.applyMovement(field);\n    }\n\n    draw() {\n        let char = 'g';\n\n        switch (this.state) {\n            case State.RIGHT:\n            case State.JUMP_RIGHT:\n            case State.UP:\n            case State.DOWN:\n                char = 'p';\n                break;\n\n            case State.LEFT:\n            case State.JUMP_LEFT:\n                char = 'q';\n                break;\n\n            case State.FALLING:\n                char = 'b';\n                break;\n\n            case State.DYING:\n                char = DEATH_FRAMES[this.deathStep];\n                break;\n\n            case State.DEAD:\n                char = '_';\n                break;\n        }\n\n        Screen.write(this.x, this.y, char);\n    }\n}\n","import { Text } from './Text';\nimport { State } from './Behavior';\nimport { LEVEL_COLS } from './Constants';\nimport { Entity } from './Entity';\nimport { Screen } from './Screen';\nimport { game } from './Game';\n\nconst DEATH_FRAMES = ['{', '}', '(', ')', '%', '%', ':', ':'];\n\nexport class Rock extends Entity {\n    constructor(dispenser) {\n        super();\n        this.x = dispenser.x;\n        this.y = dispenser.y;\n        this.state = State.FALLING;\n        this.nextState = undefined;\n        this.deathStep = 0;\n    }\n\n    update(field, moveFrame) {\n        if (this.state === State.DYING) {\n            this.deathStep++;\n            if (this.deathStep >= DEATH_FRAMES.length) this.state = State.DEAD;\n        }\n\n        if (this.state === State.DYING || this.state === State.DEAD) return;\n\n        if (!moveFrame) return;\n\n        if (this.state === State.STOPPED) {\n            if (this.x === 0 || !field.emptySpace(this.x - 1, this.y)) {\n                this.nextState = State.RIGHT;\n            } else if (this.x === LEVEL_COLS - 1 || !field.emptySpace(this.x + 1, this.y)) {\n                this.nextState = State.LEFT;\n            } else {\n                this.nextState = Math.random() > 0.5 ? State.LEFT : State.RIGHT;\n            }\n        }\n\n        if (this.x === 0 && this.state === State.LEFT) {\n            this.state = State.RIGHT;\n        }\n\n        if (this.x === LEVEL_COLS - 1 && this.state === State.RIGHT) {\n            this.state = State.LEFT;\n        }\n\n        if (this.state !== State.FALLING && !field.onSolid(this.x, this.y)) {\n            this.nextState = State.FALLING;\n        }\n\n        if (field.isLadder(this.x, this.y + 1) && [State.LEFT, State.RIGHT].includes(this.state)) {\n            let r = Math.floor(Math.random() * 4);\n            this.nextState = [State.LEFT, State.RIGHT, State.DOWN, State.DOWN][r];\n        }\n\n        if (field.isEater(this.x, this.y)) {\n            this.state = State.DYING;\n            return;\n        }\n\n        this.applyMovement(field);\n    }\n\n    draw() {\n        let char = 'o';\n\n        switch (this.state) {\n            case State.DYING:\n                char = DEATH_FRAMES[this.deathStep];\n                break;\n            case State.DEAD:\n                return;\n        }\n\n        Screen.write(this.x, this.y, char);\n    }\n}\n","import { LEVEL_ROWS, LEVEL_COLS } from './Constants';\nimport LevelData from '../levels/levels.json';\n\nexport const Level = {\n    LEVELS: LevelData,\n    LEVEL_COUNT: LevelData.length,\n\n    load(levelNumber) {\n        console.log(Level.LEVELS);\n        // As the player keeps playing, level numbers will loop around to beginning\n        let level = Level.LEVELS[levelNumber % Level.LEVELS.length];\n        if (!level) throw new Error(`No such level number: ${levelNumber}`);\n\n        // Perform some sanity checks on the level layout and extract useful info\n        // like player start position and dispenser positions etc.\n\n        let layout = level.layout.map(row => row.split(''));\n        let dispensers = [];\n        let player;\n\n        // Sanity check\n        layout = layout.slice(0, LEVEL_ROWS);\n\n        for (let y = 0; y < LEVEL_ROWS; y++) {\n            // Sanity checks\n            if (!layout[y]) layout[y] = [];\n            layout[y] = layout[y].slice(0, LEVEL_COLS);\n\n            for (let x = 0; x < LEVEL_COLS; x++) {\n                // Sanity check\n                if (!layout[y][x]) layout[y][x] = ' ';\n\n                // Der Dispensers (V) and Der Eaters (*) have behaviors, so it is convenient for us\n                // to construct a list of them, but they are permanent parts of the layout, so we can\n                // leave them as part of the level and draw them normally.\n\n                if (layout[y][x] === 'V') {\n                    dispensers.push({ x, y });\n                }\n\n                // Treasure ($), Statues (&), and the Lad (p) are transient - the player moves around and\n                // can pick up the treasures and statues. That's why for these elements, we add them to\n                // our lists AND we remove them from the \"playing field\", we'll draw them separately on\n                // top of the layout.\n\n                if (layout[y][x] === 'p') {\n                    layout[y][x] = ' ';\n                    player = { x, y };\n                }\n\n                // Everything else, like floors (=), walls (|), ladders (H) and fire (^), is part of the\n                // layout. The Lad interacts with them, but we can handle that during our movement checks.\n            }\n        }\n\n        return {\n            name: level.name,\n            time: level.time,\n            maxRocks: level.maRrocks,\n            layout,\n            dispensers,\n            player\n        };\n    }\n};\n","import { Text } from './Text';\nimport { Player } from './Player';\nimport { Rock } from './Rock';\nimport { LEVEL_COLS, LEVEL_ROWS, SCORE_ROCK, SCORE_STATUE, SCORE_TREASURE } from './Constants';\nimport { game } from './Game';\nimport { State } from './Behavior';\nimport { Screen } from './Screen';\nimport { Level } from './Level';\n\n/**\n * Field\n *\n * The \"field\" represents the current level, or, \"playing field\". A new playing field is created\n * every time you start a level, so we attach everything about the currently played level to\n * the field -- positions of treasure, the player, victory conditions, etc.\n */\nexport class Field {\n    constructor(levelNumber) {\n        let level = Level.load(levelNumber);\n\n        this.layout = level.layout;\n        this.dispensers = level.dispensers;\n        this.time = level.time;\n        this.maxRocks = level.rocks;\n        this.rocks = [];\n        this.player = new Player(level.player.x, level.player.y);\n    }\n\n    update(moveFrame) {\n        let oldX = this.player.x, oldY = this.player.y;\n\n        // Move player based on user input\n        this.player.update(this, moveFrame);\n\n        if (oldX !== this.player.x && oldY === this.player.y) {\n            if (this.isDisappearingFloor(oldX, oldY + 1)) {\n                this.layout[oldY + 1][oldX] = ' ';\n            }\n        }\n\n        // Check if player should be dead (before moving rocks)\n        if (moveFrame) this.checkIfPlayerShouldDie(game.session);\n\n        // Move rocks\n        for (let rock of this.rocks) rock.update(this, moveFrame);\n\n        // Check if player should be dead (after moving rocks)\n        if (moveFrame) this.checkIfPlayerShouldDie(game.session);\n\n        if (moveFrame) {\n            // Collect statues\n            if (this.isStatue(this.player.x, this.player.y)) {\n                this.layout[this.player.y][this.player.x] = ' ';\n                game.session.updateScore(SCORE_STATUE);\n            }\n\n            // Collect treasure (ends the current level)\n            if (this.isTreasure(this.player.x, this.player.y)) {\n                game.session.startNextLevel();\n            }\n\n            // Interact with trampolines\n            if (this.isTrampoline(this.player.x, this.player.y)) {\n                switch (Math.floor(Math.random() * 5)) {\n                    case 0:\n                        this.player.state = State.LEFT;\n                        this.player.nextState = undefined;\n                        break;\n                    case 1:\n                        this.player.state = State.RIGHT;\n                        this.player.nextState = undefined;\n                        break;\n                    case 2:\n                        this.player.state = State.JUMP_UP;\n                        this.player.nextState = undefined;\n                        this.player.jumpStep = 0;\n                        break;\n                    case 3:\n                        this.player.state = State.JUMP_LEFT;\n                        this.player.nextState = State.LEFT;\n                        this.player.jumpStep = 0;\n                        break;\n                    case 4:\n                        this.player.state = State.JUMP_RIGHT;\n                        this.player.nextState = State.RIGHT;\n                        this.player.jumpStep = 0;\n                        break;\n                }\n            }\n\n            // Dispense new rocks\n            if (this.rocks.length < 3 && Math.random() > 0.9) {\n                let dispenser = this.dispensers[Math.floor(Math.random() * this.dispensers.length)];\n                this.rocks.push(new Rock(dispenser));\n            }\n\n            // Kill dead rocks\n            this.rocks = this.rocks.filter(rock => rock.state !== State.DEAD);\n\n            // Kill player\n            if (this.player.state === State.DEAD) {\n                game.session.restartLevel();\n            }\n        }\n    }\n\n    draw() {\n        // Draw layout\n        Screen.write(0, 0, this.layout.map(row => row.join('')));\n\n        // Draw player\n        this.player.draw();\n\n        // Draw rocks\n        this.rocks.forEach(rock => rock.draw());\n    }\n\n    onSolid(x, y) {\n        return ['=', '-', 'H', '|'].includes(this.layout[y + 1][x]) || this.layout[y][x] === 'H';\n    }\n\n    emptySpace(x, y) {\n        if (x < 0 || x >= LEVEL_COLS) {\n            return false;\n        } else {\n            return !['|', '='].includes(this.layout[y][x]);\n        }\n    }\n\n    isLadder(x, y) {\n        return this.layout[y][x] === 'H';\n    }\n\n    isStatue(x, y) {\n        return this.layout[y][x] === '&';\n    }\n\n    isTreasure(x, y) {\n        return this.layout[y][x] === '$';\n    }\n\n    isTrampoline(x, y) {\n        return this.layout[y][x] === '.';\n    }\n\n    isEater(x, y) {\n        return this.layout[y][x] === '*';\n    }\n\n    isFire(x, y) {\n        return this.layout[y][x] === '^';\n    }\n\n    isDisappearingFloor(x, y) {\n        return this.layout[y][x] === '-';\n    }\n\n    canClimbUp(x, y) {\n        if (y < 0) return false;\n        return ['H', '&', '$'].includes(this.layout[y][x]);\n    }\n\n    canClimbDown(x, y) {\n        return ['H', '&', '$', ' ', '^', '.'].includes(this.layout[y][x]);\n    }\n\n    checkIfPlayerShouldDie() {\n        if (this.player.state === State.DYING || this.player.state === State.DEAD) return;\n\n        if (this.isFire(this.player.x, this.player.y)) {\n            this.player.state = State.DYING;\n        }\n\n        for (let i = 0; i < this.rocks.length; i++) {\n            if (this.player.x === this.rocks[i].x) {\n                if (this.player.y === this.rocks[i].y) {\n                    this.player.state = State.DYING;\n                    this.rocks.splice(i, 1);\n                    break;\n                } else if (this.player.y === this.rocks[i].y - 1 && this.emptySpace(this.player.x, this.player.y + 1)) {\n                    game.session.updateScore(SCORE_ROCK);\n                } else if (this.player.y === this.rocks[i].y - 2 && this.emptySpace(this.player.x, this.player.y + 1) && this.emptySpace(this.player.x, this.player.y + 2)) {\n                    game.session.updateScore(SCORE_ROCK);\n                }\n            }\n        }\n    }\n}\n","\nimport { PLAY_SPEEDS, SCORE_ROCK, SCORE_STATUE, SCORE_TREASURE } from './Constants';\nimport { Field } from './Field';\nimport { Screen } from './Screen';\nimport { Input } from './Input';\nimport { game } from './Game';\n\nexport class Session {\n    constructor() {\n        this.score = 0;\n        this.levelNumber = 0;\n        this.levelCycle = 1;\n        this.lives = 5;\n        this.nextLife = 100;\n    }\n\n    update() {\n        // The overall game loop runs at a fixed 60 frames per second, but the Play Speed selected\n        // at the main menu controls how fast the game runs. To accomplish that, we do a second\n        // time check here, and unless this is a \"move frame\", we skip all the logic related to\n        // moving entities.\n        //\n        // This setup allows us to have things like death animations look the same regardless of\n        // the Play Speed selected.\n        let moveFps = PLAY_SPEEDS[game.playSpeed];\n        let now = new Date().getTime();\n        let lastFrame = this.lastFrame || 0;\n        let moveFrame = false;\n\n        if (now - lastFrame >= 1000 / moveFps) {\n            moveFrame = true;\n            this.lastFrame = now;\n        }\n\n        if (!this.field) {\n            this.field = new Field(this.levelNumber);\n        }\n\n        this.field.update(moveFrame);\n\n        let recentKeystrokes = Input.buffer.map(event => event.key).join('').toUpperCase();\n\n        if (recentKeystrokes.match(/IDCLEV(\\d\\d)/)) {\n            Input.consume();\n            this.field = undefined;\n            this.levelNumber = parseInt(RegExp.$1, 10);\n        } else if (recentKeystrokes.includes(\"IDDQD\")) {\n            Input.consume();\n            console.log(\"god mode\");\n        }\n    }\n\n    draw() {\n        Screen.clear();\n\n        if (this.field) this.field.draw();\n\n        let stat = [\n            String(this.lives).padStart(2, ' '),\n            String(this.levelNumber + 1).padStart(2, ' '),\n            String(this.score).padStart(4, '0'),\n            this.field ? String(this.field.time).padStart(4, ' ') : ''\n        ];\n        Screen.write(0, 21, `Lads   ${stat[0]}   Level   ${stat[1]}    Score   ${stat[2]}    Bonus time   ${stat[3]}`);\n    }\n\n    restartLevel() {\n        this.field = undefined;\n    }\n\n    startNextLevel() {\n        this.field = undefined;\n        this.levelNumber++;\n        if (this.levelNumber % Levels.LEVEL_COUNT === 0) {\n            this.levelCycle++;\n        }\n    }\n\n    updateScore(scoreType) {\n        switch (scoreType) {\n            case SCORE_ROCK:\n                this.score += 2;\n                break;\n            case SCORE_STATUE:\n                this.score += this.field.time;\n                break;\n            case SCORE_TREASURE:\n                // Called repeatedly during the end-of-level event.\n                this.score += 1;\n                break;\n        }\n    }\n}\n","'use strict';\n\nimport { Sprite } from './Sprite';\nimport { Input } from './Input';\nimport { Text } from './Text';\nimport { Viewport } from './Viewport';\nimport { GAME_WIDTH, GAME_HEIGHT, PLAY_SPEEDS } from './Constants';\nimport { rgba, createCanvas, clamp, partialText, uv2xy, xy2qr } from './Util';\nimport { Audio } from './Audio';\nimport { ScreenShake } from './ScreenShake';\nimport { Screen } from './Screen';\nimport { MainMenu } from './MainMenu';\nimport { InstructionsMenu } from './InstructionsMenu';\nimport { Session } from './Session';\n\n/**\n * Game state.\n */\nexport class Game {\n    init() {\n        Sprite.loadSpritesheet(async () => {\n            await Viewport.init();\n            await Screen.init();\n            await Sprite.init();\n            await Text.init();\n            await Input.init();\n            await Audio.init();\n\n            window.addEventListener('blur', () => this.pause());\n            window.addEventListener('focus', () => this.unpause());\n\n            this.start();\n        });\n    }\n\n    start() {\n        this.frame = 0;\n        this.playSpeed = 0;\n        this.menu = new MainMenu();\n\n        window.requestAnimationFrame(() => this.onFrame());\n    }\n\n    onFrame() {\n        let fps = 60;\n        let now = new Date().getTime();\n        let lastFrame = this.lastFrame || 0;\n\n        // Note: we are using `requestAnimationFrame`, which will call our onFrame handler\n        // 60 times per second in most cases. However, it can be higher (the browser may\n        // respect the user's refresh settings, which could be 120Hz or higher for example).\n        //\n        // It's safest to have a check like we do here, where we explicitly limit the number\n        // of update calls to 60 times per second.\n        if (now - lastFrame >= 1000 / fps) {\n            this.update();\n            this.lastFrame = now;\n        }\n\n        Viewport.resize();\n        this.draw();\n\n        window.requestAnimationFrame(() => this.onFrame());\n    }\n\n    update() {\n        // Pull in frame by frame button pushes / keypresses / mouse clicks\n        Input.update();\n\n        /*game.camera.pos.x += 0.1;\n        game.camera.pos.y -= 0.1;*/\n\n        //if (Input.pressed[Input.Action.MENU]) {\n        //    this.paused ? this.unpause() : this.pause();\n        //}\n\n        if (this.paused) return;\n\n        // perform any per-frame audio updates\n        Audio.update();\n\n        // Behavior (AI, player input, etc.)\n        //perform(this.entities); <-- cut to save space\n\n        // perform any queued damage\n        //Damage.perform(this.entities);\n\n        // Movement (perform entity velocities to position)\n\n        // Dialog scheduling\n        //DialogScheduling.perform();\n\n        // Victory conditions\n\n        if (this.menu) {\n            this.menu.update();\n        }\n\n        /*    if (!this.session) {\n            this.session = new Session();\n        }*/\n\n        if (this.session) this.session.update();\n\n        // Culling (typically when an entity dies)\n\n        // Camera logic\n        /*let diff = {\n            x: this.player.pos.x - this.camera.pos.x,\n            y: this.player.pos.y - this.camera.pos.y\n        };*/\n\n        /*\n        this.camera.pos.x += diff.x * 0.2;\n        this.camera.pos.y += diff.y * 0.2;\n        */\n\n        // Tick screenshakes and cull finished screenshakes\n        this.screenshakes = this.screenshakes.filter(screenshake =>\n            screenshake.update()\n        );\n\n        // Flickering shadows\n        if (game.frame % 6 === 0) this.shadowOffset = (Math.random() * 10) | 0;\n\n        // Intro screenshake\n        if (game.frame === 30) game.screenshakes.push(new ScreenShake(20, 20, 20));\n    }\n\n    draw() {\n        // Reset canvas transform and scale\n        Viewport.ctx.setTransform(Viewport.scale, 0, 0, Viewport.scale, 0, 0);\n\n        Viewport.ctx.fillStyle = 'black';\n        Viewport.ctx.fillRect(0, 0, Viewport.width, Viewport.height);\n\n        Viewport.ctx.translate((Viewport.width - GAME_WIDTH) / 2 | 0, (Viewport.height - GAME_HEIGHT) / 2 | 0);\n\n        if (this.session) this.session.draw();\n        if (this.menu) this.menu.draw();\n\n        Screen.drawToViewport();\n\n        return;\n\n        // Render screenshakes (canvas translation)\n        let shakeX = 0, shakeY = 0;\n        this.screenshakes.forEach(shake => {\n            shakeX += shake.x;\n            shakeY += shake.y;\n        });\n        Viewport.ctx.translate(shakeX, shakeY);\n\n        //Maze.draw();\n\n        for (let entity of this.entities) {\n            if (!entity.z || entity.z < 100) entity.draw();\n        }\n\n        Viewport.ctx.drawImage(\n            Sprite.shadow.img,\n            0, 0,\n            500, 500,\n            -this.shadowOffset, -this.shadowOffset,\n            Viewport.width + this.shadowOffset * 2,\n            Viewport.height + this.shadowOffset * 2\n        );\n    }\n\n    pause() {\n        if (this.paused) return;\n        this.paused = true;\n        Audio.pause();\n    }\n\n    unpause() {\n        if (!this.paused) return;\n        this.paused = false;\n        Audio.unpause();\n    }\n\n    startSession() {\n        this.menu = undefined;\n        this.session = new Session();\n    }\n\n    showMainMenu() {\n        this.menu = new MainMenu();\n        this.session = undefined;\n    }\n\n    showInstructions() {\n        this.menu = new InstructionsMenu();\n        this.session = undefined;\n    }\n}\n\nexport const game = new Game();\n","import { game } from './Game';\n\n/**\n * Create and launch game.\n */\ngame.init();\n"]}